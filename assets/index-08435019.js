function jV(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Pb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function VV(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){if(this instanceof r){var i=[null];i.push.apply(i,arguments);var s=Function.bind.apply(e,i);return new s}return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var v={},BV={get exports(){return v},set exports(t){v=t}},ty={},H={},zV={get exports(){return H},set exports(t){H=t}},tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uf=Symbol.for("react.element"),WV=Symbol.for("react.portal"),HV=Symbol.for("react.fragment"),GV=Symbol.for("react.strict_mode"),qV=Symbol.for("react.profiler"),KV=Symbol.for("react.provider"),QV=Symbol.for("react.context"),YV=Symbol.for("react.forward_ref"),XV=Symbol.for("react.suspense"),JV=Symbol.for("react.memo"),ZV=Symbol.for("react.lazy"),nI=Symbol.iterator;function e3(t){return t===null||typeof t!="object"?null:(t=nI&&t[nI]||t["@@iterator"],typeof t=="function"?t:null)}var mN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gN=Object.assign,yN={};function uu(t,e,n){this.props=t,this.context=e,this.refs=yN,this.updater=n||mN}uu.prototype.isReactComponent={};uu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};uu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function vN(){}vN.prototype=uu.prototype;function Db(t,e,n){this.props=t,this.context=e,this.refs=yN,this.updater=n||mN}var Ob=Db.prototype=new vN;Ob.constructor=Db;gN(Ob,uu.prototype);Ob.isPureReactComponent=!0;var rI=Array.isArray,_N=Object.prototype.hasOwnProperty,Lb={current:null},wN={key:!0,ref:!0,__self:!0,__source:!0};function bN(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)_N.call(e,r)&&!wN.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:uf,type:t,key:s,ref:o,props:i,_owner:Lb.current}}function t3(t,e){return{$$typeof:uf,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Mb(t){return typeof t=="object"&&t!==null&&t.$$typeof===uf}function n3(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var iI=/\/+/g;function C_(t,e){return typeof t=="object"&&t!==null&&t.key!=null?n3(""+t.key):e.toString(36)}function Jp(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case uf:case WV:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+C_(o,0):r,rI(i)?(n="",t!=null&&(n=t.replace(iI,"$&/")+"/"),Jp(i,e,n,"",function(c){return c})):i!=null&&(Mb(i)&&(i=t3(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(iI,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",rI(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+C_(s,a);o+=Jp(s,e,n,l,i)}else if(l=e3(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+C_(s,a++),o+=Jp(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function dp(t,e,n){if(t==null)return t;var r=[],i=0;return Jp(t,r,"","",function(s){return e.call(n,s,i++)}),r}function r3(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var or={current:null},Zp={transition:null},i3={ReactCurrentDispatcher:or,ReactCurrentBatchConfig:Zp,ReactCurrentOwner:Lb};tt.Children={map:dp,forEach:function(t,e,n){dp(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return dp(t,function(){e++}),e},toArray:function(t){return dp(t,function(e){return e})||[]},only:function(t){if(!Mb(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};tt.Component=uu;tt.Fragment=HV;tt.Profiler=qV;tt.PureComponent=Db;tt.StrictMode=GV;tt.Suspense=XV;tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=i3;tt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=gN({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Lb.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)_N.call(e,l)&&!wN.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:uf,type:t.type,key:i,ref:s,props:r,_owner:o}};tt.createContext=function(t){return t={$$typeof:QV,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:KV,_context:t},t.Consumer=t};tt.createElement=bN;tt.createFactory=function(t){var e=bN.bind(null,t);return e.type=t,e};tt.createRef=function(){return{current:null}};tt.forwardRef=function(t){return{$$typeof:YV,render:t}};tt.isValidElement=Mb;tt.lazy=function(t){return{$$typeof:ZV,_payload:{_status:-1,_result:t},_init:r3}};tt.memo=function(t,e){return{$$typeof:JV,type:t,compare:e===void 0?null:e}};tt.startTransition=function(t){var e=Zp.transition;Zp.transition={};try{t()}finally{Zp.transition=e}};tt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};tt.useCallback=function(t,e){return or.current.useCallback(t,e)};tt.useContext=function(t){return or.current.useContext(t)};tt.useDebugValue=function(){};tt.useDeferredValue=function(t){return or.current.useDeferredValue(t)};tt.useEffect=function(t,e){return or.current.useEffect(t,e)};tt.useId=function(){return or.current.useId()};tt.useImperativeHandle=function(t,e,n){return or.current.useImperativeHandle(t,e,n)};tt.useInsertionEffect=function(t,e){return or.current.useInsertionEffect(t,e)};tt.useLayoutEffect=function(t,e){return or.current.useLayoutEffect(t,e)};tt.useMemo=function(t,e){return or.current.useMemo(t,e)};tt.useReducer=function(t,e,n){return or.current.useReducer(t,e,n)};tt.useRef=function(t){return or.current.useRef(t)};tt.useState=function(t){return or.current.useState(t)};tt.useSyncExternalStore=function(t,e,n){return or.current.useSyncExternalStore(t,e,n)};tt.useTransition=function(){return or.current.useTransition()};tt.version="18.2.0";(function(t){t.exports=tt})(zV);const Pe=Pb(H),J0=jV({__proto__:null,default:Pe},[H]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s3=H,o3=Symbol.for("react.element"),a3=Symbol.for("react.fragment"),l3=Object.prototype.hasOwnProperty,c3=s3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u3={key:!0,ref:!0,__self:!0,__source:!0};function SN(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)l3.call(e,r)&&!u3.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:o3,type:t,key:s,ref:o,props:i,_owner:c3.current}}ty.Fragment=a3;ty.jsx=SN;ty.jsxs=SN;(function(t){t.exports=ty})(BV);var Z0={},Tm={},d3={get exports(){return Tm},set exports(t){Tm=t}},Ur={},ew={},h3={get exports(){return ew},set exports(t){ew=t}},EN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,$){var z=U.length;U.push($);e:for(;0<z;){var J=z-1>>>1,P=U[J];if(0<i(P,$))U[J]=$,U[z]=P,z=J;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var $=U[0],z=U.pop();if(z!==$){U[0]=z;e:for(var J=0,P=U.length,F=P>>>1;J<F;){var L=2*(J+1)-1,j=U[L],M=L+1,te=U[M];if(0>i(j,z))M<P&&0>i(te,j)?(U[J]=te,U[M]=z,J=M):(U[J]=j,U[L]=z,J=L);else if(M<P&&0>i(te,z))U[J]=te,U[M]=z,J=M;else break e}}return $}function i(U,$){var z=U.sortIndex-$.sortIndex;return z!==0?z:U.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,h=3,f=!1,p=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(U){for(var $=n(c);$!==null;){if($.callback===null)r(c);else if($.startTime<=U)r(c),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(c)}}function S(U){if(y=!1,_(U),!p)if(n(l)!==null)p=!0,R(I);else{var $=n(c);$!==null&&T(S,$.startTime-U)}}function I(U,$){p=!1,y&&(y=!1,m(b),b=-1),f=!0;var z=h;try{for(_($),d=n(l);d!==null&&(!(d.expirationTime>$)||U&&!C());){var J=d.callback;if(typeof J=="function"){d.callback=null,h=d.priorityLevel;var P=J(d.expirationTime<=$);$=t.unstable_now(),typeof P=="function"?d.callback=P:d===n(l)&&r(l),_($)}else r(l);d=n(l)}if(d!==null)var F=!0;else{var L=n(c);L!==null&&T(S,L.startTime-$),F=!1}return F}finally{d=null,h=z,f=!1}}var E=!1,D=null,b=-1,x=5,O=-1;function C(){return!(t.unstable_now()-O<x)}function k(){if(D!==null){var U=t.unstable_now();O=U;var $=!0;try{$=D(!0,U)}finally{$?A():(E=!1,D=null)}}else E=!1}var A;if(typeof g=="function")A=function(){g(k)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,B=N.port2;N.port1.onmessage=k,A=function(){B.postMessage(null)}}else A=function(){w(k,0)};function R(U){D=U,E||(E=!0,A())}function T(U,$){b=w(function(){U(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,R(I))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var z=h;h=$;try{return U()}finally{h=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,$){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var z=h;h=U;try{return $()}finally{h=z}},t.unstable_scheduleCallback=function(U,$,z){var J=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?J+z:J):z=J,U){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=z+P,U={id:u++,callback:$,priorityLevel:U,startTime:z,expirationTime:P,sortIndex:-1},z>J?(U.sortIndex=z,e(c,U),n(l)===null&&U===n(c)&&(y?(m(b),b=-1):y=!0,T(S,z-J))):(U.sortIndex=P,e(l,U),p||f||(p=!0,R(I))),U},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(U){var $=h;return function(){var z=h;h=$;try{return U.apply(this,arguments)}finally{h=z}}}})(EN);(function(t){t.exports=EN})(h3);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xN=H,Or=ew;function ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var TN=new Set,rh={};function pl(t,e){Tc(t,e),Tc(t+"Capture",e)}function Tc(t,e){for(rh[t]=e,t=0;t<e.length;t++)TN.add(e[t])}var _s=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tw=Object.prototype.hasOwnProperty,f3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sI={},oI={};function p3(t){return tw.call(oI,t)?!0:tw.call(sI,t)?!1:f3.test(t)?oI[t]=!0:(sI[t]=!0,!1)}function m3(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function g3(t,e,n,r){if(e===null||typeof e>"u"||m3(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ar(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ln={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ln[t]=new ar(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ln[e]=new ar(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ln[t]=new ar(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ln[t]=new ar(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ln[t]=new ar(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ln[t]=new ar(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ln[t]=new ar(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ln[t]=new ar(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ln[t]=new ar(t,5,!1,t.toLowerCase(),null,!1,!1)});var $b=/[\-:]([a-z])/g;function Fb(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace($b,Fb);Ln[e]=new ar(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace($b,Fb);Ln[e]=new ar(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace($b,Fb);Ln[e]=new ar(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ln[t]=new ar(t,1,!1,t.toLowerCase(),null,!1,!1)});Ln.xlinkHref=new ar("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ln[t]=new ar(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ub(t,e,n,r){var i=Ln.hasOwnProperty(e)?Ln[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(g3(e,n,i,r)&&(n=null),r||i===null?p3(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ks=xN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hp=Symbol.for("react.element"),Hl=Symbol.for("react.portal"),Gl=Symbol.for("react.fragment"),jb=Symbol.for("react.strict_mode"),nw=Symbol.for("react.profiler"),IN=Symbol.for("react.provider"),CN=Symbol.for("react.context"),Vb=Symbol.for("react.forward_ref"),rw=Symbol.for("react.suspense"),iw=Symbol.for("react.suspense_list"),Bb=Symbol.for("react.memo"),Ws=Symbol.for("react.lazy"),kN=Symbol.for("react.offscreen"),aI=Symbol.iterator;function $u(t){return t===null||typeof t!="object"?null:(t=aI&&t[aI]||t["@@iterator"],typeof t=="function"?t:null)}var Bt=Object.assign,k_;function gd(t){if(k_===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);k_=e&&e[1]||""}return`
`+k_+t}var A_=!1;function R_(t,e){if(!t||A_)return"";A_=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{A_=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?gd(t):""}function y3(t){switch(t.tag){case 5:return gd(t.type);case 16:return gd("Lazy");case 13:return gd("Suspense");case 19:return gd("SuspenseList");case 0:case 2:case 15:return t=R_(t.type,!1),t;case 11:return t=R_(t.type.render,!1),t;case 1:return t=R_(t.type,!0),t;default:return""}}function sw(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Gl:return"Fragment";case Hl:return"Portal";case nw:return"Profiler";case jb:return"StrictMode";case rw:return"Suspense";case iw:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case CN:return(t.displayName||"Context")+".Consumer";case IN:return(t._context.displayName||"Context")+".Provider";case Vb:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Bb:return e=t.displayName||null,e!==null?e:sw(t.type)||"Memo";case Ws:e=t._payload,t=t._init;try{return sw(t(e))}catch{}}return null}function v3(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sw(e);case 8:return e===jb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function bo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function AN(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function _3(t){var e=AN(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function fp(t){t._valueTracker||(t._valueTracker=_3(t))}function RN(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=AN(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Im(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ow(t,e){var n=e.checked;return Bt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function lI(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=bo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function NN(t,e){e=e.checked,e!=null&&Ub(t,"checked",e,!1)}function aw(t,e){NN(t,e);var n=bo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?lw(t,e.type,n):e.hasOwnProperty("defaultValue")&&lw(t,e.type,bo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function cI(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function lw(t,e,n){(e!=="number"||Im(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var yd=Array.isArray;function cc(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+bo(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function cw(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ae(91));return Bt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function uI(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ae(92));if(yd(n)){if(1<n.length)throw Error(ae(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:bo(n)}}function PN(t,e){var n=bo(e.value),r=bo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function dI(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function DN(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function uw(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?DN(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var pp,ON=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(pp=pp||document.createElement("div"),pp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=pp.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ih(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Cd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},w3=["Webkit","ms","Moz","O"];Object.keys(Cd).forEach(function(t){w3.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Cd[e]=Cd[t]})});function LN(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Cd.hasOwnProperty(t)&&Cd[t]?(""+e).trim():e+"px"}function MN(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=LN(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var b3=Bt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dw(t,e){if(e){if(b3[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ae(62))}}function hw(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fw=null;function zb(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var pw=null,uc=null,dc=null;function hI(t){if(t=ff(t)){if(typeof pw!="function")throw Error(ae(280));var e=t.stateNode;e&&(e=oy(e),pw(t.stateNode,t.type,e))}}function $N(t){uc?dc?dc.push(t):dc=[t]:uc=t}function FN(){if(uc){var t=uc,e=dc;if(dc=uc=null,hI(t),e)for(t=0;t<e.length;t++)hI(e[t])}}function UN(t,e){return t(e)}function jN(){}var N_=!1;function VN(t,e,n){if(N_)return t(e,n);N_=!0;try{return UN(t,e,n)}finally{N_=!1,(uc!==null||dc!==null)&&(jN(),FN())}}function sh(t,e){var n=t.stateNode;if(n===null)return null;var r=oy(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ae(231,e,typeof n));return n}var mw=!1;if(_s)try{var Fu={};Object.defineProperty(Fu,"passive",{get:function(){mw=!0}}),window.addEventListener("test",Fu,Fu),window.removeEventListener("test",Fu,Fu)}catch{mw=!1}function S3(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var kd=!1,Cm=null,km=!1,gw=null,E3={onError:function(t){kd=!0,Cm=t}};function x3(t,e,n,r,i,s,o,a,l){kd=!1,Cm=null,S3.apply(E3,arguments)}function T3(t,e,n,r,i,s,o,a,l){if(x3.apply(this,arguments),kd){if(kd){var c=Cm;kd=!1,Cm=null}else throw Error(ae(198));km||(km=!0,gw=c)}}function ml(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function BN(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function fI(t){if(ml(t)!==t)throw Error(ae(188))}function I3(t){var e=t.alternate;if(!e){if(e=ml(t),e===null)throw Error(ae(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return fI(i),t;if(s===r)return fI(i),e;s=s.sibling}throw Error(ae(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(ae(189))}}if(n.alternate!==r)throw Error(ae(190))}if(n.tag!==3)throw Error(ae(188));return n.stateNode.current===n?t:e}function zN(t){return t=I3(t),t!==null?WN(t):null}function WN(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=WN(t);if(e!==null)return e;t=t.sibling}return null}var HN=Or.unstable_scheduleCallback,pI=Or.unstable_cancelCallback,C3=Or.unstable_shouldYield,k3=Or.unstable_requestPaint,Qt=Or.unstable_now,A3=Or.unstable_getCurrentPriorityLevel,Wb=Or.unstable_ImmediatePriority,GN=Or.unstable_UserBlockingPriority,Am=Or.unstable_NormalPriority,R3=Or.unstable_LowPriority,qN=Or.unstable_IdlePriority,ny=null,$i=null;function N3(t){if($i&&typeof $i.onCommitFiberRoot=="function")try{$i.onCommitFiberRoot(ny,t,void 0,(t.current.flags&128)===128)}catch{}}var mi=Math.clz32?Math.clz32:O3,P3=Math.log,D3=Math.LN2;function O3(t){return t>>>=0,t===0?32:31-(P3(t)/D3|0)|0}var mp=64,gp=4194304;function vd(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Rm(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=vd(a):(s&=o,s!==0&&(r=vd(s)))}else o=n&~i,o!==0?r=vd(o):s!==0&&(r=vd(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-mi(e),i=1<<n,r|=t[n],e&=~i;return r}function L3(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function M3(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-mi(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=L3(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function yw(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function KN(){var t=mp;return mp<<=1,!(mp&4194240)&&(mp=64),t}function P_(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function df(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-mi(e),t[e]=n}function $3(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-mi(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Hb(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-mi(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var mt=0;function QN(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var YN,Gb,XN,JN,ZN,vw=!1,yp=[],so=null,oo=null,ao=null,oh=new Map,ah=new Map,qs=[],F3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mI(t,e){switch(t){case"focusin":case"focusout":so=null;break;case"dragenter":case"dragleave":oo=null;break;case"mouseover":case"mouseout":ao=null;break;case"pointerover":case"pointerout":oh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ah.delete(e.pointerId)}}function Uu(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ff(e),e!==null&&Gb(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function U3(t,e,n,r,i){switch(e){case"focusin":return so=Uu(so,t,e,n,r,i),!0;case"dragenter":return oo=Uu(oo,t,e,n,r,i),!0;case"mouseover":return ao=Uu(ao,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return oh.set(s,Uu(oh.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ah.set(s,Uu(ah.get(s)||null,t,e,n,r,i)),!0}return!1}function eP(t){var e=ya(t.target);if(e!==null){var n=ml(e);if(n!==null){if(e=n.tag,e===13){if(e=BN(n),e!==null){t.blockedOn=e,ZN(t.priority,function(){XN(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function em(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=_w(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);fw=r,n.target.dispatchEvent(r),fw=null}else return e=ff(n),e!==null&&Gb(e),t.blockedOn=n,!1;e.shift()}return!0}function gI(t,e,n){em(t)&&n.delete(e)}function j3(){vw=!1,so!==null&&em(so)&&(so=null),oo!==null&&em(oo)&&(oo=null),ao!==null&&em(ao)&&(ao=null),oh.forEach(gI),ah.forEach(gI)}function ju(t,e){t.blockedOn===e&&(t.blockedOn=null,vw||(vw=!0,Or.unstable_scheduleCallback(Or.unstable_NormalPriority,j3)))}function lh(t){function e(i){return ju(i,t)}if(0<yp.length){ju(yp[0],t);for(var n=1;n<yp.length;n++){var r=yp[n];r.blockedOn===t&&(r.blockedOn=null)}}for(so!==null&&ju(so,t),oo!==null&&ju(oo,t),ao!==null&&ju(ao,t),oh.forEach(e),ah.forEach(e),n=0;n<qs.length;n++)r=qs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<qs.length&&(n=qs[0],n.blockedOn===null);)eP(n),n.blockedOn===null&&qs.shift()}var hc=ks.ReactCurrentBatchConfig,Nm=!0;function V3(t,e,n,r){var i=mt,s=hc.transition;hc.transition=null;try{mt=1,qb(t,e,n,r)}finally{mt=i,hc.transition=s}}function B3(t,e,n,r){var i=mt,s=hc.transition;hc.transition=null;try{mt=4,qb(t,e,n,r)}finally{mt=i,hc.transition=s}}function qb(t,e,n,r){if(Nm){var i=_w(t,e,n,r);if(i===null)B_(t,e,r,Pm,n),mI(t,r);else if(U3(i,t,e,n,r))r.stopPropagation();else if(mI(t,r),e&4&&-1<F3.indexOf(t)){for(;i!==null;){var s=ff(i);if(s!==null&&YN(s),s=_w(t,e,n,r),s===null&&B_(t,e,r,Pm,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else B_(t,e,r,null,n)}}var Pm=null;function _w(t,e,n,r){if(Pm=null,t=zb(r),t=ya(t),t!==null)if(e=ml(t),e===null)t=null;else if(n=e.tag,n===13){if(t=BN(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Pm=t,null}function tP(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(A3()){case Wb:return 1;case GN:return 4;case Am:case R3:return 16;case qN:return 536870912;default:return 16}default:return 16}}var Xs=null,Kb=null,tm=null;function nP(){if(tm)return tm;var t,e=Kb,n=e.length,r,i="value"in Xs?Xs.value:Xs.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return tm=i.slice(t,1<r?1-r:void 0)}function nm(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function vp(){return!0}function yI(){return!1}function jr(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?vp:yI,this.isPropagationStopped=yI,this}return Bt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=vp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=vp)},persist:function(){},isPersistent:vp}),e}var du={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qb=jr(du),hf=Bt({},du,{view:0,detail:0}),z3=jr(hf),D_,O_,Vu,ry=Bt({},hf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yb,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Vu&&(Vu&&t.type==="mousemove"?(D_=t.screenX-Vu.screenX,O_=t.screenY-Vu.screenY):O_=D_=0,Vu=t),D_)},movementY:function(t){return"movementY"in t?t.movementY:O_}}),vI=jr(ry),W3=Bt({},ry,{dataTransfer:0}),H3=jr(W3),G3=Bt({},hf,{relatedTarget:0}),L_=jr(G3),q3=Bt({},du,{animationName:0,elapsedTime:0,pseudoElement:0}),K3=jr(q3),Q3=Bt({},du,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Y3=jr(Q3),X3=Bt({},du,{data:0}),_I=jr(X3),J3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Z3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eB={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tB(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=eB[t])?!!e[t]:!1}function Yb(){return tB}var nB=Bt({},hf,{key:function(t){if(t.key){var e=J3[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=nm(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Z3[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yb,charCode:function(t){return t.type==="keypress"?nm(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?nm(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),rB=jr(nB),iB=Bt({},ry,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wI=jr(iB),sB=Bt({},hf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yb}),oB=jr(sB),aB=Bt({},du,{propertyName:0,elapsedTime:0,pseudoElement:0}),lB=jr(aB),cB=Bt({},ry,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),uB=jr(cB),dB=[9,13,27,32],Xb=_s&&"CompositionEvent"in window,Ad=null;_s&&"documentMode"in document&&(Ad=document.documentMode);var hB=_s&&"TextEvent"in window&&!Ad,rP=_s&&(!Xb||Ad&&8<Ad&&11>=Ad),bI=String.fromCharCode(32),SI=!1;function iP(t,e){switch(t){case"keyup":return dB.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sP(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ql=!1;function fB(t,e){switch(t){case"compositionend":return sP(e);case"keypress":return e.which!==32?null:(SI=!0,bI);case"textInput":return t=e.data,t===bI&&SI?null:t;default:return null}}function pB(t,e){if(ql)return t==="compositionend"||!Xb&&iP(t,e)?(t=nP(),tm=Kb=Xs=null,ql=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return rP&&e.locale!=="ko"?null:e.data;default:return null}}var mB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function EI(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!mB[t.type]:e==="textarea"}function oP(t,e,n,r){$N(r),e=Dm(e,"onChange"),0<e.length&&(n=new Qb("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Rd=null,ch=null;function gB(t){yP(t,0)}function iy(t){var e=Yl(t);if(RN(e))return t}function yB(t,e){if(t==="change")return e}var aP=!1;if(_s){var M_;if(_s){var $_="oninput"in document;if(!$_){var xI=document.createElement("div");xI.setAttribute("oninput","return;"),$_=typeof xI.oninput=="function"}M_=$_}else M_=!1;aP=M_&&(!document.documentMode||9<document.documentMode)}function TI(){Rd&&(Rd.detachEvent("onpropertychange",lP),ch=Rd=null)}function lP(t){if(t.propertyName==="value"&&iy(ch)){var e=[];oP(e,ch,t,zb(t)),VN(gB,e)}}function vB(t,e,n){t==="focusin"?(TI(),Rd=e,ch=n,Rd.attachEvent("onpropertychange",lP)):t==="focusout"&&TI()}function _B(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return iy(ch)}function wB(t,e){if(t==="click")return iy(e)}function bB(t,e){if(t==="input"||t==="change")return iy(e)}function SB(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vi=typeof Object.is=="function"?Object.is:SB;function uh(t,e){if(vi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!tw.call(e,i)||!vi(t[i],e[i]))return!1}return!0}function II(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function CI(t,e){var n=II(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=II(n)}}function cP(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?cP(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function uP(){for(var t=window,e=Im();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Im(t.document)}return e}function Jb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function EB(t){var e=uP(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&cP(n.ownerDocument.documentElement,n)){if(r!==null&&Jb(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=CI(n,s);var o=CI(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var xB=_s&&"documentMode"in document&&11>=document.documentMode,Kl=null,ww=null,Nd=null,bw=!1;function kI(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;bw||Kl==null||Kl!==Im(r)||(r=Kl,"selectionStart"in r&&Jb(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Nd&&uh(Nd,r)||(Nd=r,r=Dm(ww,"onSelect"),0<r.length&&(e=new Qb("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Kl)))}function _p(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ql={animationend:_p("Animation","AnimationEnd"),animationiteration:_p("Animation","AnimationIteration"),animationstart:_p("Animation","AnimationStart"),transitionend:_p("Transition","TransitionEnd")},F_={},dP={};_s&&(dP=document.createElement("div").style,"AnimationEvent"in window||(delete Ql.animationend.animation,delete Ql.animationiteration.animation,delete Ql.animationstart.animation),"TransitionEvent"in window||delete Ql.transitionend.transition);function sy(t){if(F_[t])return F_[t];if(!Ql[t])return t;var e=Ql[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in dP)return F_[t]=e[n];return t}var hP=sy("animationend"),fP=sy("animationiteration"),pP=sy("animationstart"),mP=sy("transitionend"),gP=new Map,AI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bo(t,e){gP.set(t,e),pl(e,[t])}for(var U_=0;U_<AI.length;U_++){var j_=AI[U_],TB=j_.toLowerCase(),IB=j_[0].toUpperCase()+j_.slice(1);Bo(TB,"on"+IB)}Bo(hP,"onAnimationEnd");Bo(fP,"onAnimationIteration");Bo(pP,"onAnimationStart");Bo("dblclick","onDoubleClick");Bo("focusin","onFocus");Bo("focusout","onBlur");Bo(mP,"onTransitionEnd");Tc("onMouseEnter",["mouseout","mouseover"]);Tc("onMouseLeave",["mouseout","mouseover"]);Tc("onPointerEnter",["pointerout","pointerover"]);Tc("onPointerLeave",["pointerout","pointerover"]);pl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));pl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));pl("onBeforeInput",["compositionend","keypress","textInput","paste"]);pl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));pl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));pl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _d="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CB=new Set("cancel close invalid load scroll toggle".split(" ").concat(_d));function RI(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,T3(r,e,void 0,t),t.currentTarget=null}function yP(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;RI(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;RI(i,a,c),s=l}}}if(km)throw t=gw,km=!1,gw=null,t}function Tt(t,e){var n=e[Iw];n===void 0&&(n=e[Iw]=new Set);var r=t+"__bubble";n.has(r)||(vP(e,t,2,!1),n.add(r))}function V_(t,e,n){var r=0;e&&(r|=4),vP(n,t,r,e)}var wp="_reactListening"+Math.random().toString(36).slice(2);function dh(t){if(!t[wp]){t[wp]=!0,TN.forEach(function(n){n!=="selectionchange"&&(CB.has(n)||V_(n,!1,t),V_(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[wp]||(e[wp]=!0,V_("selectionchange",!1,e))}}function vP(t,e,n,r){switch(tP(e)){case 1:var i=V3;break;case 4:i=B3;break;default:i=qb}n=i.bind(null,e,n,t),i=void 0,!mw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function B_(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ya(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}VN(function(){var c=s,u=zb(n),d=[];e:{var h=gP.get(t);if(h!==void 0){var f=Qb,p=t;switch(t){case"keypress":if(nm(n)===0)break e;case"keydown":case"keyup":f=rB;break;case"focusin":p="focus",f=L_;break;case"focusout":p="blur",f=L_;break;case"beforeblur":case"afterblur":f=L_;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=vI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=H3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=oB;break;case hP:case fP:case pP:f=K3;break;case mP:f=lB;break;case"scroll":f=z3;break;case"wheel":f=uB;break;case"copy":case"cut":case"paste":f=Y3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=wI}var y=(e&4)!==0,w=!y&&t==="scroll",m=y?h!==null?h+"Capture":null:h;y=[];for(var g=c,_;g!==null;){_=g;var S=_.stateNode;if(_.tag===5&&S!==null&&(_=S,m!==null&&(S=sh(g,m),S!=null&&y.push(hh(g,S,_)))),w)break;g=g.return}0<y.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:y}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==fw&&(p=n.relatedTarget||n.fromElement)&&(ya(p)||p[ws]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=c,p=p?ya(p):null,p!==null&&(w=ml(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=c),f!==p)){if(y=vI,S="onMouseLeave",m="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(y=wI,S="onPointerLeave",m="onPointerEnter",g="pointer"),w=f==null?h:Yl(f),_=p==null?h:Yl(p),h=new y(S,g+"leave",f,n,u),h.target=w,h.relatedTarget=_,S=null,ya(u)===c&&(y=new y(m,g+"enter",p,n,u),y.target=_,y.relatedTarget=w,S=y),w=S,f&&p)t:{for(y=f,m=p,g=0,_=y;_;_=Ol(_))g++;for(_=0,S=m;S;S=Ol(S))_++;for(;0<g-_;)y=Ol(y),g--;for(;0<_-g;)m=Ol(m),_--;for(;g--;){if(y===m||m!==null&&y===m.alternate)break t;y=Ol(y),m=Ol(m)}y=null}else y=null;f!==null&&NI(d,h,f,y,!1),p!==null&&w!==null&&NI(d,w,p,y,!0)}}e:{if(h=c?Yl(c):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var I=yB;else if(EI(h))if(aP)I=bB;else{I=_B;var E=vB}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(I=wB);if(I&&(I=I(t,c))){oP(d,I,n,u);break e}E&&E(t,h,c),t==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&lw(h,"number",h.value)}switch(E=c?Yl(c):window,t){case"focusin":(EI(E)||E.contentEditable==="true")&&(Kl=E,ww=c,Nd=null);break;case"focusout":Nd=ww=Kl=null;break;case"mousedown":bw=!0;break;case"contextmenu":case"mouseup":case"dragend":bw=!1,kI(d,n,u);break;case"selectionchange":if(xB)break;case"keydown":case"keyup":kI(d,n,u)}var D;if(Xb)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else ql?iP(t,n)&&(b="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(rP&&n.locale!=="ko"&&(ql||b!=="onCompositionStart"?b==="onCompositionEnd"&&ql&&(D=nP()):(Xs=u,Kb="value"in Xs?Xs.value:Xs.textContent,ql=!0)),E=Dm(c,b),0<E.length&&(b=new _I(b,t,null,n,u),d.push({event:b,listeners:E}),D?b.data=D:(D=sP(n),D!==null&&(b.data=D)))),(D=hB?fB(t,n):pB(t,n))&&(c=Dm(c,"onBeforeInput"),0<c.length&&(u=new _I("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=D))}yP(d,e)})}function hh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Dm(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=sh(t,n),s!=null&&r.unshift(hh(t,s,i)),s=sh(t,e),s!=null&&r.push(hh(t,s,i))),t=t.return}return r}function Ol(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function NI(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=sh(n,s),l!=null&&o.unshift(hh(n,l,a))):i||(l=sh(n,s),l!=null&&o.push(hh(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var kB=/\r\n?/g,AB=/\u0000|\uFFFD/g;function PI(t){return(typeof t=="string"?t:""+t).replace(kB,`
`).replace(AB,"")}function bp(t,e,n){if(e=PI(e),PI(t)!==e&&n)throw Error(ae(425))}function Om(){}var Sw=null,Ew=null;function xw(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Tw=typeof setTimeout=="function"?setTimeout:void 0,RB=typeof clearTimeout=="function"?clearTimeout:void 0,DI=typeof Promise=="function"?Promise:void 0,NB=typeof queueMicrotask=="function"?queueMicrotask:typeof DI<"u"?function(t){return DI.resolve(null).then(t).catch(PB)}:Tw;function PB(t){setTimeout(function(){throw t})}function z_(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),lh(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);lh(e)}function lo(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function OI(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var hu=Math.random().toString(36).slice(2),Ii="__reactFiber$"+hu,fh="__reactProps$"+hu,ws="__reactContainer$"+hu,Iw="__reactEvents$"+hu,DB="__reactListeners$"+hu,OB="__reactHandles$"+hu;function ya(t){var e=t[Ii];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ws]||n[Ii]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=OI(t);t!==null;){if(n=t[Ii])return n;t=OI(t)}return e}t=n,n=t.parentNode}return null}function ff(t){return t=t[Ii]||t[ws],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Yl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ae(33))}function oy(t){return t[fh]||null}var Cw=[],Xl=-1;function zo(t){return{current:t}}function kt(t){0>Xl||(t.current=Cw[Xl],Cw[Xl]=null,Xl--)}function St(t,e){Xl++,Cw[Xl]=t.current,t.current=e}var So={},Qn=zo(So),vr=zo(!1),ja=So;function Ic(t,e){var n=t.type.contextTypes;if(!n)return So;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function _r(t){return t=t.childContextTypes,t!=null}function Lm(){kt(vr),kt(Qn)}function LI(t,e,n){if(Qn.current!==So)throw Error(ae(168));St(Qn,e),St(vr,n)}function _P(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ae(108,v3(t)||"Unknown",i));return Bt({},n,r)}function Mm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||So,ja=Qn.current,St(Qn,t),St(vr,vr.current),!0}function MI(t,e,n){var r=t.stateNode;if(!r)throw Error(ae(169));n?(t=_P(t,e,ja),r.__reactInternalMemoizedMergedChildContext=t,kt(vr),kt(Qn),St(Qn,t)):kt(vr),St(vr,n)}var ss=null,ay=!1,W_=!1;function wP(t){ss===null?ss=[t]:ss.push(t)}function LB(t){ay=!0,wP(t)}function Wo(){if(!W_&&ss!==null){W_=!0;var t=0,e=mt;try{var n=ss;for(mt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ss=null,ay=!1}catch(i){throw ss!==null&&(ss=ss.slice(t+1)),HN(Wb,Wo),i}finally{mt=e,W_=!1}}return null}var Jl=[],Zl=0,$m=null,Fm=0,zr=[],Wr=0,Va=null,os=1,as="";function sa(t,e){Jl[Zl++]=Fm,Jl[Zl++]=$m,$m=t,Fm=e}function bP(t,e,n){zr[Wr++]=os,zr[Wr++]=as,zr[Wr++]=Va,Va=t;var r=os;t=as;var i=32-mi(r)-1;r&=~(1<<i),n+=1;var s=32-mi(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,os=1<<32-mi(e)+i|n<<i|r,as=s+t}else os=1<<s|n<<i|r,as=t}function Zb(t){t.return!==null&&(sa(t,1),bP(t,1,0))}function eS(t){for(;t===$m;)$m=Jl[--Zl],Jl[Zl]=null,Fm=Jl[--Zl],Jl[Zl]=null;for(;t===Va;)Va=zr[--Wr],zr[Wr]=null,as=zr[--Wr],zr[Wr]=null,os=zr[--Wr],zr[Wr]=null}var Dr=null,Rr=null,Dt=!1,ui=null;function SP(t,e){var n=Gr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function $I(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Dr=t,Rr=lo(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Dr=t,Rr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Va!==null?{id:os,overflow:as}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Gr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Dr=t,Rr=null,!0):!1;default:return!1}}function kw(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Aw(t){if(Dt){var e=Rr;if(e){var n=e;if(!$I(t,e)){if(kw(t))throw Error(ae(418));e=lo(n.nextSibling);var r=Dr;e&&$I(t,e)?SP(r,n):(t.flags=t.flags&-4097|2,Dt=!1,Dr=t)}}else{if(kw(t))throw Error(ae(418));t.flags=t.flags&-4097|2,Dt=!1,Dr=t}}}function FI(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Dr=t}function Sp(t){if(t!==Dr)return!1;if(!Dt)return FI(t),Dt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!xw(t.type,t.memoizedProps)),e&&(e=Rr)){if(kw(t))throw EP(),Error(ae(418));for(;e;)SP(t,e),e=lo(e.nextSibling)}if(FI(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Rr=lo(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Rr=null}}else Rr=Dr?lo(t.stateNode.nextSibling):null;return!0}function EP(){for(var t=Rr;t;)t=lo(t.nextSibling)}function Cc(){Rr=Dr=null,Dt=!1}function tS(t){ui===null?ui=[t]:ui.push(t)}var MB=ks.ReactCurrentBatchConfig;function li(t,e){if(t&&t.defaultProps){e=Bt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Um=zo(null),jm=null,ec=null,nS=null;function rS(){nS=ec=jm=null}function iS(t){var e=Um.current;kt(Um),t._currentValue=e}function Rw(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function fc(t,e){jm=t,nS=ec=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(fr=!0),t.firstContext=null)}function Jr(t){var e=t._currentValue;if(nS!==t)if(t={context:t,memoizedValue:e,next:null},ec===null){if(jm===null)throw Error(ae(308));ec=t,jm.dependencies={lanes:0,firstContext:t}}else ec=ec.next=t;return e}var va=null;function sS(t){va===null?va=[t]:va.push(t)}function xP(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,sS(e)):(n.next=i.next,i.next=n),e.interleaved=n,bs(t,r)}function bs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Hs=!1;function oS(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function TP(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function hs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function co(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,lt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,bs(t,n)}return i=r.interleaved,i===null?(e.next=e,sS(r)):(e.next=i.next,i.next=e),r.interleaved=e,bs(t,n)}function rm(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Hb(t,n)}}function UI(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Vm(t,e,n,r){var i=t.updateQueue;Hs=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,u=c=l=null,a=s;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,y=a;switch(h=e,f=n,y.tag){case 1:if(p=y.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=y.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=Bt({},d,h);break e;case 2:Hs=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);za|=o,t.lanes=o,t.memoizedState=d}}function jI(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ae(191,i));i.call(r)}}}var IP=new xN.Component().refs;function Nw(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Bt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ly={isMounted:function(t){return(t=t._reactInternals)?ml(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=rr(),i=ho(t),s=hs(r,i);s.payload=e,n!=null&&(s.callback=n),e=co(t,s,i),e!==null&&(gi(e,t,i,r),rm(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=rr(),i=ho(t),s=hs(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=co(t,s,i),e!==null&&(gi(e,t,i,r),rm(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=rr(),r=ho(t),i=hs(n,r);i.tag=2,e!=null&&(i.callback=e),e=co(t,i,r),e!==null&&(gi(e,t,r,n),rm(e,t,r))}};function VI(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!uh(n,r)||!uh(i,s):!0}function CP(t,e,n){var r=!1,i=So,s=e.contextType;return typeof s=="object"&&s!==null?s=Jr(s):(i=_r(e)?ja:Qn.current,r=e.contextTypes,s=(r=r!=null)?Ic(t,i):So),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ly,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function BI(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ly.enqueueReplaceState(e,e.state,null)}function Pw(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=IP,oS(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Jr(s):(s=_r(e)?ja:Qn.current,i.context=Ic(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Nw(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ly.enqueueReplaceState(i,i.state,null),Vm(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Bu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ae(309));var r=n.stateNode}if(!r)throw Error(ae(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===IP&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(ae(284));if(!n._owner)throw Error(ae(290,t))}return t}function Ep(t,e){throw t=Object.prototype.toString.call(e),Error(ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function zI(t){var e=t._init;return e(t._payload)}function kP(t){function e(m,g){if(t){var _=m.deletions;_===null?(m.deletions=[g],m.flags|=16):_.push(g)}}function n(m,g){if(!t)return null;for(;g!==null;)e(m,g),g=g.sibling;return null}function r(m,g){for(m=new Map;g!==null;)g.key!==null?m.set(g.key,g):m.set(g.index,g),g=g.sibling;return m}function i(m,g){return m=fo(m,g),m.index=0,m.sibling=null,m}function s(m,g,_){return m.index=_,t?(_=m.alternate,_!==null?(_=_.index,_<g?(m.flags|=2,g):_):(m.flags|=2,g)):(m.flags|=1048576,g)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,g,_,S){return g===null||g.tag!==6?(g=X_(_,m.mode,S),g.return=m,g):(g=i(g,_),g.return=m,g)}function l(m,g,_,S){var I=_.type;return I===Gl?u(m,g,_.props.children,S,_.key):g!==null&&(g.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Ws&&zI(I)===g.type)?(S=i(g,_.props),S.ref=Bu(m,g,_),S.return=m,S):(S=cm(_.type,_.key,_.props,null,m.mode,S),S.ref=Bu(m,g,_),S.return=m,S)}function c(m,g,_,S){return g===null||g.tag!==4||g.stateNode.containerInfo!==_.containerInfo||g.stateNode.implementation!==_.implementation?(g=J_(_,m.mode,S),g.return=m,g):(g=i(g,_.children||[]),g.return=m,g)}function u(m,g,_,S,I){return g===null||g.tag!==7?(g=Ra(_,m.mode,S,I),g.return=m,g):(g=i(g,_),g.return=m,g)}function d(m,g,_){if(typeof g=="string"&&g!==""||typeof g=="number")return g=X_(""+g,m.mode,_),g.return=m,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case hp:return _=cm(g.type,g.key,g.props,null,m.mode,_),_.ref=Bu(m,null,g),_.return=m,_;case Hl:return g=J_(g,m.mode,_),g.return=m,g;case Ws:var S=g._init;return d(m,S(g._payload),_)}if(yd(g)||$u(g))return g=Ra(g,m.mode,_,null),g.return=m,g;Ep(m,g)}return null}function h(m,g,_,S){var I=g!==null?g.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return I!==null?null:a(m,g,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case hp:return _.key===I?l(m,g,_,S):null;case Hl:return _.key===I?c(m,g,_,S):null;case Ws:return I=_._init,h(m,g,I(_._payload),S)}if(yd(_)||$u(_))return I!==null?null:u(m,g,_,S,null);Ep(m,_)}return null}function f(m,g,_,S,I){if(typeof S=="string"&&S!==""||typeof S=="number")return m=m.get(_)||null,a(g,m,""+S,I);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case hp:return m=m.get(S.key===null?_:S.key)||null,l(g,m,S,I);case Hl:return m=m.get(S.key===null?_:S.key)||null,c(g,m,S,I);case Ws:var E=S._init;return f(m,g,_,E(S._payload),I)}if(yd(S)||$u(S))return m=m.get(_)||null,u(g,m,S,I,null);Ep(g,S)}return null}function p(m,g,_,S){for(var I=null,E=null,D=g,b=g=0,x=null;D!==null&&b<_.length;b++){D.index>b?(x=D,D=null):x=D.sibling;var O=h(m,D,_[b],S);if(O===null){D===null&&(D=x);break}t&&D&&O.alternate===null&&e(m,D),g=s(O,g,b),E===null?I=O:E.sibling=O,E=O,D=x}if(b===_.length)return n(m,D),Dt&&sa(m,b),I;if(D===null){for(;b<_.length;b++)D=d(m,_[b],S),D!==null&&(g=s(D,g,b),E===null?I=D:E.sibling=D,E=D);return Dt&&sa(m,b),I}for(D=r(m,D);b<_.length;b++)x=f(D,m,b,_[b],S),x!==null&&(t&&x.alternate!==null&&D.delete(x.key===null?b:x.key),g=s(x,g,b),E===null?I=x:E.sibling=x,E=x);return t&&D.forEach(function(C){return e(m,C)}),Dt&&sa(m,b),I}function y(m,g,_,S){var I=$u(_);if(typeof I!="function")throw Error(ae(150));if(_=I.call(_),_==null)throw Error(ae(151));for(var E=I=null,D=g,b=g=0,x=null,O=_.next();D!==null&&!O.done;b++,O=_.next()){D.index>b?(x=D,D=null):x=D.sibling;var C=h(m,D,O.value,S);if(C===null){D===null&&(D=x);break}t&&D&&C.alternate===null&&e(m,D),g=s(C,g,b),E===null?I=C:E.sibling=C,E=C,D=x}if(O.done)return n(m,D),Dt&&sa(m,b),I;if(D===null){for(;!O.done;b++,O=_.next())O=d(m,O.value,S),O!==null&&(g=s(O,g,b),E===null?I=O:E.sibling=O,E=O);return Dt&&sa(m,b),I}for(D=r(m,D);!O.done;b++,O=_.next())O=f(D,m,b,O.value,S),O!==null&&(t&&O.alternate!==null&&D.delete(O.key===null?b:O.key),g=s(O,g,b),E===null?I=O:E.sibling=O,E=O);return t&&D.forEach(function(k){return e(m,k)}),Dt&&sa(m,b),I}function w(m,g,_,S){if(typeof _=="object"&&_!==null&&_.type===Gl&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case hp:e:{for(var I=_.key,E=g;E!==null;){if(E.key===I){if(I=_.type,I===Gl){if(E.tag===7){n(m,E.sibling),g=i(E,_.props.children),g.return=m,m=g;break e}}else if(E.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Ws&&zI(I)===E.type){n(m,E.sibling),g=i(E,_.props),g.ref=Bu(m,E,_),g.return=m,m=g;break e}n(m,E);break}else e(m,E);E=E.sibling}_.type===Gl?(g=Ra(_.props.children,m.mode,S,_.key),g.return=m,m=g):(S=cm(_.type,_.key,_.props,null,m.mode,S),S.ref=Bu(m,g,_),S.return=m,m=S)}return o(m);case Hl:e:{for(E=_.key;g!==null;){if(g.key===E)if(g.tag===4&&g.stateNode.containerInfo===_.containerInfo&&g.stateNode.implementation===_.implementation){n(m,g.sibling),g=i(g,_.children||[]),g.return=m,m=g;break e}else{n(m,g);break}else e(m,g);g=g.sibling}g=J_(_,m.mode,S),g.return=m,m=g}return o(m);case Ws:return E=_._init,w(m,g,E(_._payload),S)}if(yd(_))return p(m,g,_,S);if($u(_))return y(m,g,_,S);Ep(m,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,g!==null&&g.tag===6?(n(m,g.sibling),g=i(g,_),g.return=m,m=g):(n(m,g),g=X_(_,m.mode,S),g.return=m,m=g),o(m)):n(m,g)}return w}var kc=kP(!0),AP=kP(!1),pf={},Fi=zo(pf),ph=zo(pf),mh=zo(pf);function _a(t){if(t===pf)throw Error(ae(174));return t}function aS(t,e){switch(St(mh,e),St(ph,t),St(Fi,pf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:uw(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=uw(e,t)}kt(Fi),St(Fi,e)}function Ac(){kt(Fi),kt(ph),kt(mh)}function RP(t){_a(mh.current);var e=_a(Fi.current),n=uw(e,t.type);e!==n&&(St(ph,t),St(Fi,n))}function lS(t){ph.current===t&&(kt(Fi),kt(ph))}var Ut=zo(0);function Bm(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var H_=[];function cS(){for(var t=0;t<H_.length;t++)H_[t]._workInProgressVersionPrimary=null;H_.length=0}var im=ks.ReactCurrentDispatcher,G_=ks.ReactCurrentBatchConfig,Ba=0,Vt=null,nn=null,fn=null,zm=!1,Pd=!1,gh=0,$B=0;function Vn(){throw Error(ae(321))}function uS(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!vi(t[n],e[n]))return!1;return!0}function dS(t,e,n,r,i,s){if(Ba=s,Vt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,im.current=t===null||t.memoizedState===null?VB:BB,t=n(r,i),Pd){s=0;do{if(Pd=!1,gh=0,25<=s)throw Error(ae(301));s+=1,fn=nn=null,e.updateQueue=null,im.current=zB,t=n(r,i)}while(Pd)}if(im.current=Wm,e=nn!==null&&nn.next!==null,Ba=0,fn=nn=Vt=null,zm=!1,e)throw Error(ae(300));return t}function hS(){var t=gh!==0;return gh=0,t}function xi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?Vt.memoizedState=fn=t:fn=fn.next=t,fn}function Zr(){if(nn===null){var t=Vt.alternate;t=t!==null?t.memoizedState:null}else t=nn.next;var e=fn===null?Vt.memoizedState:fn.next;if(e!==null)fn=e,nn=t;else{if(t===null)throw Error(ae(310));nn=t,t={memoizedState:nn.memoizedState,baseState:nn.baseState,baseQueue:nn.baseQueue,queue:nn.queue,next:null},fn===null?Vt.memoizedState=fn=t:fn=fn.next=t}return fn}function yh(t,e){return typeof e=="function"?e(t):e}function q_(t){var e=Zr(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var r=nn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Ba&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Vt.lanes|=u,za|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,vi(r,e.memoizedState)||(fr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Vt.lanes|=s,za|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function K_(t){var e=Zr(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);vi(s,e.memoizedState)||(fr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function NP(){}function PP(t,e){var n=Vt,r=Zr(),i=e(),s=!vi(r.memoizedState,i);if(s&&(r.memoizedState=i,fr=!0),r=r.queue,fS(LP.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||fn!==null&&fn.memoizedState.tag&1){if(n.flags|=2048,vh(9,OP.bind(null,n,r,i,e),void 0,null),_n===null)throw Error(ae(349));Ba&30||DP(n,e,i)}return i}function DP(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Vt.updateQueue,e===null?(e={lastEffect:null,stores:null},Vt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function OP(t,e,n,r){e.value=n,e.getSnapshot=r,MP(e)&&$P(t)}function LP(t,e,n){return n(function(){MP(e)&&$P(t)})}function MP(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!vi(t,n)}catch{return!0}}function $P(t){var e=bs(t,1);e!==null&&gi(e,t,1,-1)}function WI(t){var e=xi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yh,lastRenderedState:t},e.queue=t,t=t.dispatch=jB.bind(null,Vt,t),[e.memoizedState,t]}function vh(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Vt.updateQueue,e===null?(e={lastEffect:null,stores:null},Vt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function FP(){return Zr().memoizedState}function sm(t,e,n,r){var i=xi();Vt.flags|=t,i.memoizedState=vh(1|e,n,void 0,r===void 0?null:r)}function cy(t,e,n,r){var i=Zr();r=r===void 0?null:r;var s=void 0;if(nn!==null){var o=nn.memoizedState;if(s=o.destroy,r!==null&&uS(r,o.deps)){i.memoizedState=vh(e,n,s,r);return}}Vt.flags|=t,i.memoizedState=vh(1|e,n,s,r)}function HI(t,e){return sm(8390656,8,t,e)}function fS(t,e){return cy(2048,8,t,e)}function UP(t,e){return cy(4,2,t,e)}function jP(t,e){return cy(4,4,t,e)}function VP(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function BP(t,e,n){return n=n!=null?n.concat([t]):null,cy(4,4,VP.bind(null,e,t),n)}function pS(){}function zP(t,e){var n=Zr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&uS(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function WP(t,e){var n=Zr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&uS(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function HP(t,e,n){return Ba&21?(vi(n,e)||(n=KN(),Vt.lanes|=n,za|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,fr=!0),t.memoizedState=n)}function FB(t,e){var n=mt;mt=n!==0&&4>n?n:4,t(!0);var r=G_.transition;G_.transition={};try{t(!1),e()}finally{mt=n,G_.transition=r}}function GP(){return Zr().memoizedState}function UB(t,e,n){var r=ho(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},qP(t))KP(e,n);else if(n=xP(t,e,n,r),n!==null){var i=rr();gi(n,t,r,i),QP(n,e,r)}}function jB(t,e,n){var r=ho(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(qP(t))KP(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,vi(a,o)){var l=e.interleaved;l===null?(i.next=i,sS(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=xP(t,e,i,r),n!==null&&(i=rr(),gi(n,t,r,i),QP(n,e,r))}}function qP(t){var e=t.alternate;return t===Vt||e!==null&&e===Vt}function KP(t,e){Pd=zm=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function QP(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Hb(t,n)}}var Wm={readContext:Jr,useCallback:Vn,useContext:Vn,useEffect:Vn,useImperativeHandle:Vn,useInsertionEffect:Vn,useLayoutEffect:Vn,useMemo:Vn,useReducer:Vn,useRef:Vn,useState:Vn,useDebugValue:Vn,useDeferredValue:Vn,useTransition:Vn,useMutableSource:Vn,useSyncExternalStore:Vn,useId:Vn,unstable_isNewReconciler:!1},VB={readContext:Jr,useCallback:function(t,e){return xi().memoizedState=[t,e===void 0?null:e],t},useContext:Jr,useEffect:HI,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,sm(4194308,4,VP.bind(null,e,t),n)},useLayoutEffect:function(t,e){return sm(4194308,4,t,e)},useInsertionEffect:function(t,e){return sm(4,2,t,e)},useMemo:function(t,e){var n=xi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=xi();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=UB.bind(null,Vt,t),[r.memoizedState,t]},useRef:function(t){var e=xi();return t={current:t},e.memoizedState=t},useState:WI,useDebugValue:pS,useDeferredValue:function(t){return xi().memoizedState=t},useTransition:function(){var t=WI(!1),e=t[0];return t=FB.bind(null,t[1]),xi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Vt,i=xi();if(Dt){if(n===void 0)throw Error(ae(407));n=n()}else{if(n=e(),_n===null)throw Error(ae(349));Ba&30||DP(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,HI(LP.bind(null,r,s,t),[t]),r.flags|=2048,vh(9,OP.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=xi(),e=_n.identifierPrefix;if(Dt){var n=as,r=os;n=(r&~(1<<32-mi(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=gh++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=$B++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},BB={readContext:Jr,useCallback:zP,useContext:Jr,useEffect:fS,useImperativeHandle:BP,useInsertionEffect:UP,useLayoutEffect:jP,useMemo:WP,useReducer:q_,useRef:FP,useState:function(){return q_(yh)},useDebugValue:pS,useDeferredValue:function(t){var e=Zr();return HP(e,nn.memoizedState,t)},useTransition:function(){var t=q_(yh)[0],e=Zr().memoizedState;return[t,e]},useMutableSource:NP,useSyncExternalStore:PP,useId:GP,unstable_isNewReconciler:!1},zB={readContext:Jr,useCallback:zP,useContext:Jr,useEffect:fS,useImperativeHandle:BP,useInsertionEffect:UP,useLayoutEffect:jP,useMemo:WP,useReducer:K_,useRef:FP,useState:function(){return K_(yh)},useDebugValue:pS,useDeferredValue:function(t){var e=Zr();return nn===null?e.memoizedState=t:HP(e,nn.memoizedState,t)},useTransition:function(){var t=K_(yh)[0],e=Zr().memoizedState;return[t,e]},useMutableSource:NP,useSyncExternalStore:PP,useId:GP,unstable_isNewReconciler:!1};function Rc(t,e){try{var n="",r=e;do n+=y3(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Q_(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Dw(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var WB=typeof WeakMap=="function"?WeakMap:Map;function YP(t,e,n){n=hs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Gm||(Gm=!0,zw=r),Dw(t,e)},n}function XP(t,e,n){n=hs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Dw(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Dw(t,e),typeof r!="function"&&(uo===null?uo=new Set([this]):uo.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function GI(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new WB;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=i4.bind(null,t,e,n),e.then(t,t))}function qI(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function KI(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=hs(-1,1),e.tag=2,co(n,e,1))),n.lanes|=1),t)}var HB=ks.ReactCurrentOwner,fr=!1;function Jn(t,e,n,r){e.child=t===null?AP(e,null,n,r):kc(e,t.child,n,r)}function QI(t,e,n,r,i){n=n.render;var s=e.ref;return fc(e,i),r=dS(t,e,n,r,s,i),n=hS(),t!==null&&!fr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ss(t,e,i)):(Dt&&n&&Zb(e),e.flags|=1,Jn(t,e,r,i),e.child)}function YI(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!SS(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,JP(t,e,s,r,i)):(t=cm(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:uh,n(o,r)&&t.ref===e.ref)return Ss(t,e,i)}return e.flags|=1,t=fo(s,r),t.ref=e.ref,t.return=e,e.child=t}function JP(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(uh(s,r)&&t.ref===e.ref)if(fr=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(fr=!0);else return e.lanes=t.lanes,Ss(t,e,i)}return Ow(t,e,n,r,i)}function ZP(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},St(nc,Cr),Cr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,St(nc,Cr),Cr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,St(nc,Cr),Cr|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,St(nc,Cr),Cr|=r;return Jn(t,e,i,n),e.child}function eD(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ow(t,e,n,r,i){var s=_r(n)?ja:Qn.current;return s=Ic(e,s),fc(e,i),n=dS(t,e,n,r,s,i),r=hS(),t!==null&&!fr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ss(t,e,i)):(Dt&&r&&Zb(e),e.flags|=1,Jn(t,e,n,i),e.child)}function XI(t,e,n,r,i){if(_r(n)){var s=!0;Mm(e)}else s=!1;if(fc(e,i),e.stateNode===null)om(t,e),CP(e,n,r),Pw(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Jr(c):(c=_r(n)?ja:Qn.current,c=Ic(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&BI(e,o,r,c),Hs=!1;var h=e.memoizedState;o.state=h,Vm(e,r,o,i),l=e.memoizedState,a!==r||h!==l||vr.current||Hs?(typeof u=="function"&&(Nw(e,n,u,r),l=e.memoizedState),(a=Hs||VI(e,n,a,r,h,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,TP(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:li(e.type,a),o.props=c,d=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Jr(l):(l=_r(n)?ja:Qn.current,l=Ic(e,l));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&BI(e,o,r,l),Hs=!1,h=e.memoizedState,o.state=h,Vm(e,r,o,i);var p=e.memoizedState;a!==d||h!==p||vr.current||Hs?(typeof f=="function"&&(Nw(e,n,f,r),p=e.memoizedState),(c=Hs||VI(e,n,c,r,h,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return Lw(t,e,n,r,s,i)}function Lw(t,e,n,r,i,s){eD(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&MI(e,n,!1),Ss(t,e,s);r=e.stateNode,HB.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=kc(e,t.child,null,s),e.child=kc(e,null,a,s)):Jn(t,e,a,s),e.memoizedState=r.state,i&&MI(e,n,!0),e.child}function tD(t){var e=t.stateNode;e.pendingContext?LI(t,e.pendingContext,e.pendingContext!==e.context):e.context&&LI(t,e.context,!1),aS(t,e.containerInfo)}function JI(t,e,n,r,i){return Cc(),tS(i),e.flags|=256,Jn(t,e,n,r),e.child}var Mw={dehydrated:null,treeContext:null,retryLane:0};function $w(t){return{baseLanes:t,cachePool:null,transitions:null}}function nD(t,e,n){var r=e.pendingProps,i=Ut.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),St(Ut,i&1),t===null)return Aw(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=hy(o,r,0,null),t=Ra(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=$w(n),e.memoizedState=Mw,t):mS(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return GB(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=fo(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=fo(a,s):(s=Ra(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?$w(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Mw,r}return s=t.child,t=s.sibling,r=fo(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function mS(t,e){return e=hy({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function xp(t,e,n,r){return r!==null&&tS(r),kc(e,t.child,null,n),t=mS(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function GB(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Q_(Error(ae(422))),xp(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=hy({mode:"visible",children:r.children},i,0,null),s=Ra(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&kc(e,t.child,null,o),e.child.memoizedState=$w(o),e.memoizedState=Mw,s);if(!(e.mode&1))return xp(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(ae(419)),r=Q_(s,r,void 0),xp(t,e,o,r)}if(a=(o&t.childLanes)!==0,fr||a){if(r=_n,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,bs(t,i),gi(r,t,i,-1))}return bS(),r=Q_(Error(ae(421))),xp(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=s4.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Rr=lo(i.nextSibling),Dr=e,Dt=!0,ui=null,t!==null&&(zr[Wr++]=os,zr[Wr++]=as,zr[Wr++]=Va,os=t.id,as=t.overflow,Va=e),e=mS(e,r.children),e.flags|=4096,e)}function ZI(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Rw(t.return,e,n)}function Y_(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function rD(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Jn(t,e,r.children,n),r=Ut.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ZI(t,n,e);else if(t.tag===19)ZI(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(St(Ut,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Bm(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Y_(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Bm(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Y_(e,!0,n,null,s);break;case"together":Y_(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function om(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ss(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),za|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ae(153));if(e.child!==null){for(t=e.child,n=fo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=fo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function qB(t,e,n){switch(e.tag){case 3:tD(e),Cc();break;case 5:RP(e);break;case 1:_r(e.type)&&Mm(e);break;case 4:aS(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;St(Um,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(St(Ut,Ut.current&1),e.flags|=128,null):n&e.child.childLanes?nD(t,e,n):(St(Ut,Ut.current&1),t=Ss(t,e,n),t!==null?t.sibling:null);St(Ut,Ut.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return rD(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),St(Ut,Ut.current),r)break;return null;case 22:case 23:return e.lanes=0,ZP(t,e,n)}return Ss(t,e,n)}var iD,Fw,sD,oD;iD=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Fw=function(){};sD=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,_a(Fi.current);var s=null;switch(n){case"input":i=ow(t,i),r=ow(t,r),s=[];break;case"select":i=Bt({},i,{value:void 0}),r=Bt({},r,{value:void 0}),s=[];break;case"textarea":i=cw(t,i),r=cw(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Om)}dw(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(rh.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(rh.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Tt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};oD=function(t,e,n,r){n!==r&&(e.flags|=4)};function zu(t,e){if(!Dt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Bn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function KB(t,e,n){var r=e.pendingProps;switch(eS(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bn(e),null;case 1:return _r(e.type)&&Lm(),Bn(e),null;case 3:return r=e.stateNode,Ac(),kt(vr),kt(Qn),cS(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Sp(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ui!==null&&(Gw(ui),ui=null))),Fw(t,e),Bn(e),null;case 5:lS(e);var i=_a(mh.current);if(n=e.type,t!==null&&e.stateNode!=null)sD(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ae(166));return Bn(e),null}if(t=_a(Fi.current),Sp(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Ii]=e,r[fh]=s,t=(e.mode&1)!==0,n){case"dialog":Tt("cancel",r),Tt("close",r);break;case"iframe":case"object":case"embed":Tt("load",r);break;case"video":case"audio":for(i=0;i<_d.length;i++)Tt(_d[i],r);break;case"source":Tt("error",r);break;case"img":case"image":case"link":Tt("error",r),Tt("load",r);break;case"details":Tt("toggle",r);break;case"input":lI(r,s),Tt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Tt("invalid",r);break;case"textarea":uI(r,s),Tt("invalid",r)}dw(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&bp(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&bp(r.textContent,a,t),i=["children",""+a]):rh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Tt("scroll",r)}switch(n){case"input":fp(r),cI(r,s,!0);break;case"textarea":fp(r),dI(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Om)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=DN(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Ii]=e,t[fh]=r,iD(t,e,!1,!1),e.stateNode=t;e:{switch(o=hw(n,r),n){case"dialog":Tt("cancel",t),Tt("close",t),i=r;break;case"iframe":case"object":case"embed":Tt("load",t),i=r;break;case"video":case"audio":for(i=0;i<_d.length;i++)Tt(_d[i],t);i=r;break;case"source":Tt("error",t),i=r;break;case"img":case"image":case"link":Tt("error",t),Tt("load",t),i=r;break;case"details":Tt("toggle",t),i=r;break;case"input":lI(t,r),i=ow(t,r),Tt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Bt({},r,{value:void 0}),Tt("invalid",t);break;case"textarea":uI(t,r),i=cw(t,r),Tt("invalid",t);break;default:i=r}dw(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?MN(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&ON(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ih(t,l):typeof l=="number"&&ih(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(rh.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Tt("scroll",t):l!=null&&Ub(t,s,l,o))}switch(n){case"input":fp(t),cI(t,r,!1);break;case"textarea":fp(t),dI(t);break;case"option":r.value!=null&&t.setAttribute("value",""+bo(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?cc(t,!!r.multiple,s,!1):r.defaultValue!=null&&cc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Om)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Bn(e),null;case 6:if(t&&e.stateNode!=null)oD(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ae(166));if(n=_a(mh.current),_a(Fi.current),Sp(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ii]=e,(s=r.nodeValue!==n)&&(t=Dr,t!==null))switch(t.tag){case 3:bp(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&bp(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ii]=e,e.stateNode=r}return Bn(e),null;case 13:if(kt(Ut),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Dt&&Rr!==null&&e.mode&1&&!(e.flags&128))EP(),Cc(),e.flags|=98560,s=!1;else if(s=Sp(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(ae(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ae(317));s[Ii]=e}else Cc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Bn(e),s=!1}else ui!==null&&(Gw(ui),ui=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ut.current&1?on===0&&(on=3):bS())),e.updateQueue!==null&&(e.flags|=4),Bn(e),null);case 4:return Ac(),Fw(t,e),t===null&&dh(e.stateNode.containerInfo),Bn(e),null;case 10:return iS(e.type._context),Bn(e),null;case 17:return _r(e.type)&&Lm(),Bn(e),null;case 19:if(kt(Ut),s=e.memoizedState,s===null)return Bn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)zu(s,!1);else{if(on!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Bm(t),o!==null){for(e.flags|=128,zu(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return St(Ut,Ut.current&1|2),e.child}t=t.sibling}s.tail!==null&&Qt()>Nc&&(e.flags|=128,r=!0,zu(s,!1),e.lanes=4194304)}else{if(!r)if(t=Bm(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),zu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Dt)return Bn(e),null}else 2*Qt()-s.renderingStartTime>Nc&&n!==1073741824&&(e.flags|=128,r=!0,zu(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Qt(),e.sibling=null,n=Ut.current,St(Ut,r?n&1|2:n&1),e):(Bn(e),null);case 22:case 23:return wS(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Cr&1073741824&&(Bn(e),e.subtreeFlags&6&&(e.flags|=8192)):Bn(e),null;case 24:return null;case 25:return null}throw Error(ae(156,e.tag))}function QB(t,e){switch(eS(e),e.tag){case 1:return _r(e.type)&&Lm(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ac(),kt(vr),kt(Qn),cS(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return lS(e),null;case 13:if(kt(Ut),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ae(340));Cc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return kt(Ut),null;case 4:return Ac(),null;case 10:return iS(e.type._context),null;case 22:case 23:return wS(),null;case 24:return null;default:return null}}var Tp=!1,zn=!1,YB=typeof WeakSet=="function"?WeakSet:Set,xe=null;function tc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ht(t,e,r)}else n.current=null}function Uw(t,e,n){try{n()}catch(r){Ht(t,e,r)}}var eC=!1;function XB(t,e){if(Sw=Nm,t=uP(),Jb(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++c===i&&(a=o),h===s&&++u===r&&(l=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ew={focusedElem:t,selectionRange:n},Nm=!1,xe=e;xe!==null;)if(e=xe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,xe=t;else for(;xe!==null;){e=xe;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var y=p.memoizedProps,w=p.memoizedState,m=e.stateNode,g=m.getSnapshotBeforeUpdate(e.elementType===e.type?y:li(e.type,y),w);m.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(S){Ht(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,xe=t;break}xe=e.return}return p=eC,eC=!1,p}function Dd(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Uw(e,n,s)}i=i.next}while(i!==r)}}function uy(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function jw(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function aD(t){var e=t.alternate;e!==null&&(t.alternate=null,aD(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ii],delete e[fh],delete e[Iw],delete e[DB],delete e[OB])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function lD(t){return t.tag===5||t.tag===3||t.tag===4}function tC(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||lD(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Vw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Om));else if(r!==4&&(t=t.child,t!==null))for(Vw(t,e,n),t=t.sibling;t!==null;)Vw(t,e,n),t=t.sibling}function Bw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Bw(t,e,n),t=t.sibling;t!==null;)Bw(t,e,n),t=t.sibling}var An=null,ci=!1;function Us(t,e,n){for(n=n.child;n!==null;)cD(t,e,n),n=n.sibling}function cD(t,e,n){if($i&&typeof $i.onCommitFiberUnmount=="function")try{$i.onCommitFiberUnmount(ny,n)}catch{}switch(n.tag){case 5:zn||tc(n,e);case 6:var r=An,i=ci;An=null,Us(t,e,n),An=r,ci=i,An!==null&&(ci?(t=An,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):An.removeChild(n.stateNode));break;case 18:An!==null&&(ci?(t=An,n=n.stateNode,t.nodeType===8?z_(t.parentNode,n):t.nodeType===1&&z_(t,n),lh(t)):z_(An,n.stateNode));break;case 4:r=An,i=ci,An=n.stateNode.containerInfo,ci=!0,Us(t,e,n),An=r,ci=i;break;case 0:case 11:case 14:case 15:if(!zn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Uw(n,e,o),i=i.next}while(i!==r)}Us(t,e,n);break;case 1:if(!zn&&(tc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ht(n,e,a)}Us(t,e,n);break;case 21:Us(t,e,n);break;case 22:n.mode&1?(zn=(r=zn)||n.memoizedState!==null,Us(t,e,n),zn=r):Us(t,e,n);break;default:Us(t,e,n)}}function nC(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new YB),e.forEach(function(r){var i=o4.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ii(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:An=a.stateNode,ci=!1;break e;case 3:An=a.stateNode.containerInfo,ci=!0;break e;case 4:An=a.stateNode.containerInfo,ci=!0;break e}a=a.return}if(An===null)throw Error(ae(160));cD(s,o,i),An=null,ci=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Ht(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)uD(e,t),e=e.sibling}function uD(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ii(e,t),Si(t),r&4){try{Dd(3,t,t.return),uy(3,t)}catch(y){Ht(t,t.return,y)}try{Dd(5,t,t.return)}catch(y){Ht(t,t.return,y)}}break;case 1:ii(e,t),Si(t),r&512&&n!==null&&tc(n,n.return);break;case 5:if(ii(e,t),Si(t),r&512&&n!==null&&tc(n,n.return),t.flags&32){var i=t.stateNode;try{ih(i,"")}catch(y){Ht(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&NN(i,s),hw(a,o);var c=hw(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?MN(i,d):u==="dangerouslySetInnerHTML"?ON(i,d):u==="children"?ih(i,d):Ub(i,u,d,c)}switch(a){case"input":aw(i,s);break;case"textarea":PN(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?cc(i,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?cc(i,!!s.multiple,s.defaultValue,!0):cc(i,!!s.multiple,s.multiple?[]:"",!1))}i[fh]=s}catch(y){Ht(t,t.return,y)}}break;case 6:if(ii(e,t),Si(t),r&4){if(t.stateNode===null)throw Error(ae(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(y){Ht(t,t.return,y)}}break;case 3:if(ii(e,t),Si(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{lh(e.containerInfo)}catch(y){Ht(t,t.return,y)}break;case 4:ii(e,t),Si(t);break;case 13:ii(e,t),Si(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(vS=Qt())),r&4&&nC(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(zn=(c=zn)||u,ii(e,t),zn=c):ii(e,t),Si(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(xe=t,u=t.child;u!==null;){for(d=xe=u;xe!==null;){switch(h=xe,f=h.child,h.tag){case 0:case 11:case 14:case 15:Dd(4,h,h.return);break;case 1:tc(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(y){Ht(r,n,y)}}break;case 5:tc(h,h.return);break;case 22:if(h.memoizedState!==null){iC(d);continue}}f!==null?(f.return=h,xe=f):iC(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=LN("display",o))}catch(y){Ht(t,t.return,y)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(y){Ht(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ii(e,t),Si(t),r&4&&nC(t);break;case 21:break;default:ii(e,t),Si(t)}}function Si(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(lD(n)){var r=n;break e}n=n.return}throw Error(ae(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ih(i,""),r.flags&=-33);var s=tC(t);Bw(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=tC(t);Vw(t,a,o);break;default:throw Error(ae(161))}}catch(l){Ht(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function JB(t,e,n){xe=t,dD(t)}function dD(t,e,n){for(var r=(t.mode&1)!==0;xe!==null;){var i=xe,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Tp;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||zn;a=Tp;var c=zn;if(Tp=o,(zn=l)&&!c)for(xe=i;xe!==null;)o=xe,l=o.child,o.tag===22&&o.memoizedState!==null?sC(i):l!==null?(l.return=o,xe=l):sC(i);for(;s!==null;)xe=s,dD(s),s=s.sibling;xe=i,Tp=a,zn=c}rC(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,xe=s):rC(t)}}function rC(t){for(;xe!==null;){var e=xe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:zn||uy(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!zn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:li(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&jI(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}jI(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&lh(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}zn||e.flags&512&&jw(e)}catch(h){Ht(e,e.return,h)}}if(e===t){xe=null;break}if(n=e.sibling,n!==null){n.return=e.return,xe=n;break}xe=e.return}}function iC(t){for(;xe!==null;){var e=xe;if(e===t){xe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,xe=n;break}xe=e.return}}function sC(t){for(;xe!==null;){var e=xe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{uy(4,e)}catch(l){Ht(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ht(e,i,l)}}var s=e.return;try{jw(e)}catch(l){Ht(e,s,l)}break;case 5:var o=e.return;try{jw(e)}catch(l){Ht(e,o,l)}}}catch(l){Ht(e,e.return,l)}if(e===t){xe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,xe=a;break}xe=e.return}}var ZB=Math.ceil,Hm=ks.ReactCurrentDispatcher,gS=ks.ReactCurrentOwner,Xr=ks.ReactCurrentBatchConfig,lt=0,_n=null,tn=null,Nn=0,Cr=0,nc=zo(0),on=0,_h=null,za=0,dy=0,yS=0,Od=null,ur=null,vS=0,Nc=1/0,ns=null,Gm=!1,zw=null,uo=null,Ip=!1,Js=null,qm=0,Ld=0,Ww=null,am=-1,lm=0;function rr(){return lt&6?Qt():am!==-1?am:am=Qt()}function ho(t){return t.mode&1?lt&2&&Nn!==0?Nn&-Nn:MB.transition!==null?(lm===0&&(lm=KN()),lm):(t=mt,t!==0||(t=window.event,t=t===void 0?16:tP(t.type)),t):1}function gi(t,e,n,r){if(50<Ld)throw Ld=0,Ww=null,Error(ae(185));df(t,n,r),(!(lt&2)||t!==_n)&&(t===_n&&(!(lt&2)&&(dy|=n),on===4&&Ks(t,Nn)),wr(t,r),n===1&&lt===0&&!(e.mode&1)&&(Nc=Qt()+500,ay&&Wo()))}function wr(t,e){var n=t.callbackNode;M3(t,e);var r=Rm(t,t===_n?Nn:0);if(r===0)n!==null&&pI(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&pI(n),e===1)t.tag===0?LB(oC.bind(null,t)):wP(oC.bind(null,t)),NB(function(){!(lt&6)&&Wo()}),n=null;else{switch(QN(r)){case 1:n=Wb;break;case 4:n=GN;break;case 16:n=Am;break;case 536870912:n=qN;break;default:n=Am}n=_D(n,hD.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function hD(t,e){if(am=-1,lm=0,lt&6)throw Error(ae(327));var n=t.callbackNode;if(pc()&&t.callbackNode!==n)return null;var r=Rm(t,t===_n?Nn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Km(t,r);else{e=r;var i=lt;lt|=2;var s=pD();(_n!==t||Nn!==e)&&(ns=null,Nc=Qt()+500,Aa(t,e));do try{n4();break}catch(a){fD(t,a)}while(1);rS(),Hm.current=s,lt=i,tn!==null?e=0:(_n=null,Nn=0,e=on)}if(e!==0){if(e===2&&(i=yw(t),i!==0&&(r=i,e=Hw(t,i))),e===1)throw n=_h,Aa(t,0),Ks(t,r),wr(t,Qt()),n;if(e===6)Ks(t,r);else{if(i=t.current.alternate,!(r&30)&&!e4(i)&&(e=Km(t,r),e===2&&(s=yw(t),s!==0&&(r=s,e=Hw(t,s))),e===1))throw n=_h,Aa(t,0),Ks(t,r),wr(t,Qt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ae(345));case 2:oa(t,ur,ns);break;case 3:if(Ks(t,r),(r&130023424)===r&&(e=vS+500-Qt(),10<e)){if(Rm(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){rr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Tw(oa.bind(null,t,ur,ns),e);break}oa(t,ur,ns);break;case 4:if(Ks(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-mi(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Qt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ZB(r/1960))-r,10<r){t.timeoutHandle=Tw(oa.bind(null,t,ur,ns),r);break}oa(t,ur,ns);break;case 5:oa(t,ur,ns);break;default:throw Error(ae(329))}}}return wr(t,Qt()),t.callbackNode===n?hD.bind(null,t):null}function Hw(t,e){var n=Od;return t.current.memoizedState.isDehydrated&&(Aa(t,e).flags|=256),t=Km(t,e),t!==2&&(e=ur,ur=n,e!==null&&Gw(e)),t}function Gw(t){ur===null?ur=t:ur.push.apply(ur,t)}function e4(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!vi(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ks(t,e){for(e&=~yS,e&=~dy,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-mi(e),r=1<<n;t[n]=-1,e&=~r}}function oC(t){if(lt&6)throw Error(ae(327));pc();var e=Rm(t,0);if(!(e&1))return wr(t,Qt()),null;var n=Km(t,e);if(t.tag!==0&&n===2){var r=yw(t);r!==0&&(e=r,n=Hw(t,r))}if(n===1)throw n=_h,Aa(t,0),Ks(t,e),wr(t,Qt()),n;if(n===6)throw Error(ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,oa(t,ur,ns),wr(t,Qt()),null}function _S(t,e){var n=lt;lt|=1;try{return t(e)}finally{lt=n,lt===0&&(Nc=Qt()+500,ay&&Wo())}}function Wa(t){Js!==null&&Js.tag===0&&!(lt&6)&&pc();var e=lt;lt|=1;var n=Xr.transition,r=mt;try{if(Xr.transition=null,mt=1,t)return t()}finally{mt=r,Xr.transition=n,lt=e,!(lt&6)&&Wo()}}function wS(){Cr=nc.current,kt(nc)}function Aa(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,RB(n)),tn!==null)for(n=tn.return;n!==null;){var r=n;switch(eS(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Lm();break;case 3:Ac(),kt(vr),kt(Qn),cS();break;case 5:lS(r);break;case 4:Ac();break;case 13:kt(Ut);break;case 19:kt(Ut);break;case 10:iS(r.type._context);break;case 22:case 23:wS()}n=n.return}if(_n=t,tn=t=fo(t.current,null),Nn=Cr=e,on=0,_h=null,yS=dy=za=0,ur=Od=null,va!==null){for(e=0;e<va.length;e++)if(n=va[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}va=null}return t}function fD(t,e){do{var n=tn;try{if(rS(),im.current=Wm,zm){for(var r=Vt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}zm=!1}if(Ba=0,fn=nn=Vt=null,Pd=!1,gh=0,gS.current=null,n===null||n.return===null){on=1,_h=e,tn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Nn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=qI(o);if(f!==null){f.flags&=-257,KI(f,o,a,s,e),f.mode&1&&GI(s,c,e),e=f,l=c;var p=e.updateQueue;if(p===null){var y=new Set;y.add(l),e.updateQueue=y}else p.add(l);break e}else{if(!(e&1)){GI(s,c,e),bS();break e}l=Error(ae(426))}}else if(Dt&&a.mode&1){var w=qI(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),KI(w,o,a,s,e),tS(Rc(l,a));break e}}s=l=Rc(l,a),on!==4&&(on=2),Od===null?Od=[s]:Od.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=YP(s,l,e);UI(s,m);break e;case 1:a=l;var g=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(uo===null||!uo.has(_)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=XP(s,a,e);UI(s,S);break e}}s=s.return}while(s!==null)}gD(n)}catch(I){e=I,tn===n&&n!==null&&(tn=n=n.return);continue}break}while(1)}function pD(){var t=Hm.current;return Hm.current=Wm,t===null?Wm:t}function bS(){(on===0||on===3||on===2)&&(on=4),_n===null||!(za&268435455)&&!(dy&268435455)||Ks(_n,Nn)}function Km(t,e){var n=lt;lt|=2;var r=pD();(_n!==t||Nn!==e)&&(ns=null,Aa(t,e));do try{t4();break}catch(i){fD(t,i)}while(1);if(rS(),lt=n,Hm.current=r,tn!==null)throw Error(ae(261));return _n=null,Nn=0,on}function t4(){for(;tn!==null;)mD(tn)}function n4(){for(;tn!==null&&!C3();)mD(tn)}function mD(t){var e=vD(t.alternate,t,Cr);t.memoizedProps=t.pendingProps,e===null?gD(t):tn=e,gS.current=null}function gD(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=QB(n,e),n!==null){n.flags&=32767,tn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{on=6,tn=null;return}}else if(n=KB(n,e,Cr),n!==null){tn=n;return}if(e=e.sibling,e!==null){tn=e;return}tn=e=t}while(e!==null);on===0&&(on=5)}function oa(t,e,n){var r=mt,i=Xr.transition;try{Xr.transition=null,mt=1,r4(t,e,n,r)}finally{Xr.transition=i,mt=r}return null}function r4(t,e,n,r){do pc();while(Js!==null);if(lt&6)throw Error(ae(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ae(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if($3(t,s),t===_n&&(tn=_n=null,Nn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ip||(Ip=!0,_D(Am,function(){return pc(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Xr.transition,Xr.transition=null;var o=mt;mt=1;var a=lt;lt|=4,gS.current=null,XB(t,n),uD(n,t),EB(Ew),Nm=!!Sw,Ew=Sw=null,t.current=n,JB(n),k3(),lt=a,mt=o,Xr.transition=s}else t.current=n;if(Ip&&(Ip=!1,Js=t,qm=i),s=t.pendingLanes,s===0&&(uo=null),N3(n.stateNode),wr(t,Qt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gm)throw Gm=!1,t=zw,zw=null,t;return qm&1&&t.tag!==0&&pc(),s=t.pendingLanes,s&1?t===Ww?Ld++:(Ld=0,Ww=t):Ld=0,Wo(),null}function pc(){if(Js!==null){var t=QN(qm),e=Xr.transition,n=mt;try{if(Xr.transition=null,mt=16>t?16:t,Js===null)var r=!1;else{if(t=Js,Js=null,qm=0,lt&6)throw Error(ae(331));var i=lt;for(lt|=4,xe=t.current;xe!==null;){var s=xe,o=s.child;if(xe.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(xe=c;xe!==null;){var u=xe;switch(u.tag){case 0:case 11:case 15:Dd(8,u,s)}var d=u.child;if(d!==null)d.return=u,xe=d;else for(;xe!==null;){u=xe;var h=u.sibling,f=u.return;if(aD(u),u===c){xe=null;break}if(h!==null){h.return=f,xe=h;break}xe=f}}}var p=s.alternate;if(p!==null){var y=p.child;if(y!==null){p.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}xe=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,xe=o;else e:for(;xe!==null;){if(s=xe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Dd(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,xe=m;break e}xe=s.return}}var g=t.current;for(xe=g;xe!==null;){o=xe;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,xe=_;else e:for(o=g;xe!==null;){if(a=xe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:uy(9,a)}}catch(I){Ht(a,a.return,I)}if(a===o){xe=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,xe=S;break e}xe=a.return}}if(lt=i,Wo(),$i&&typeof $i.onPostCommitFiberRoot=="function")try{$i.onPostCommitFiberRoot(ny,t)}catch{}r=!0}return r}finally{mt=n,Xr.transition=e}}return!1}function aC(t,e,n){e=Rc(n,e),e=YP(t,e,1),t=co(t,e,1),e=rr(),t!==null&&(df(t,1,e),wr(t,e))}function Ht(t,e,n){if(t.tag===3)aC(t,t,n);else for(;e!==null;){if(e.tag===3){aC(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(uo===null||!uo.has(r))){t=Rc(n,t),t=XP(e,t,1),e=co(e,t,1),t=rr(),e!==null&&(df(e,1,t),wr(e,t));break}}e=e.return}}function i4(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=rr(),t.pingedLanes|=t.suspendedLanes&n,_n===t&&(Nn&n)===n&&(on===4||on===3&&(Nn&130023424)===Nn&&500>Qt()-vS?Aa(t,0):yS|=n),wr(t,e)}function yD(t,e){e===0&&(t.mode&1?(e=gp,gp<<=1,!(gp&130023424)&&(gp=4194304)):e=1);var n=rr();t=bs(t,e),t!==null&&(df(t,e,n),wr(t,n))}function s4(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),yD(t,n)}function o4(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ae(314))}r!==null&&r.delete(e),yD(t,n)}var vD;vD=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||vr.current)fr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return fr=!1,qB(t,e,n);fr=!!(t.flags&131072)}else fr=!1,Dt&&e.flags&1048576&&bP(e,Fm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;om(t,e),t=e.pendingProps;var i=Ic(e,Qn.current);fc(e,n),i=dS(null,e,r,t,i,n);var s=hS();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,_r(r)?(s=!0,Mm(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,oS(e),i.updater=ly,e.stateNode=i,i._reactInternals=e,Pw(e,r,t,n),e=Lw(null,e,r,!0,s,n)):(e.tag=0,Dt&&s&&Zb(e),Jn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(om(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=l4(r),t=li(r,t),i){case 0:e=Ow(null,e,r,t,n);break e;case 1:e=XI(null,e,r,t,n);break e;case 11:e=QI(null,e,r,t,n);break e;case 14:e=YI(null,e,r,li(r.type,t),n);break e}throw Error(ae(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:li(r,i),Ow(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:li(r,i),XI(t,e,r,i,n);case 3:e:{if(tD(e),t===null)throw Error(ae(387));r=e.pendingProps,s=e.memoizedState,i=s.element,TP(t,e),Vm(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Rc(Error(ae(423)),e),e=JI(t,e,r,n,i);break e}else if(r!==i){i=Rc(Error(ae(424)),e),e=JI(t,e,r,n,i);break e}else for(Rr=lo(e.stateNode.containerInfo.firstChild),Dr=e,Dt=!0,ui=null,n=AP(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Cc(),r===i){e=Ss(t,e,n);break e}Jn(t,e,r,n)}e=e.child}return e;case 5:return RP(e),t===null&&Aw(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,xw(r,i)?o=null:s!==null&&xw(r,s)&&(e.flags|=32),eD(t,e),Jn(t,e,o,n),e.child;case 6:return t===null&&Aw(e),null;case 13:return nD(t,e,n);case 4:return aS(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=kc(e,null,r,n):Jn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:li(r,i),QI(t,e,r,i,n);case 7:return Jn(t,e,e.pendingProps,n),e.child;case 8:return Jn(t,e,e.pendingProps.children,n),e.child;case 12:return Jn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,St(Um,r._currentValue),r._currentValue=o,s!==null)if(vi(s.value,o)){if(s.children===i.children&&!vr.current){e=Ss(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=hs(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Rw(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ae(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Rw(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Jn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,fc(e,n),i=Jr(i),r=r(i),e.flags|=1,Jn(t,e,r,n),e.child;case 14:return r=e.type,i=li(r,e.pendingProps),i=li(r.type,i),YI(t,e,r,i,n);case 15:return JP(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:li(r,i),om(t,e),e.tag=1,_r(r)?(t=!0,Mm(e)):t=!1,fc(e,n),CP(e,r,i),Pw(e,r,i,n),Lw(null,e,r,!0,t,n);case 19:return rD(t,e,n);case 22:return ZP(t,e,n)}throw Error(ae(156,e.tag))};function _D(t,e){return HN(t,e)}function a4(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gr(t,e,n,r){return new a4(t,e,n,r)}function SS(t){return t=t.prototype,!(!t||!t.isReactComponent)}function l4(t){if(typeof t=="function")return SS(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Vb)return 11;if(t===Bb)return 14}return 2}function fo(t,e){var n=t.alternate;return n===null?(n=Gr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function cm(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")SS(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Gl:return Ra(n.children,i,s,e);case jb:o=8,i|=8;break;case nw:return t=Gr(12,n,e,i|2),t.elementType=nw,t.lanes=s,t;case rw:return t=Gr(13,n,e,i),t.elementType=rw,t.lanes=s,t;case iw:return t=Gr(19,n,e,i),t.elementType=iw,t.lanes=s,t;case kN:return hy(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case IN:o=10;break e;case CN:o=9;break e;case Vb:o=11;break e;case Bb:o=14;break e;case Ws:o=16,r=null;break e}throw Error(ae(130,t==null?t:typeof t,""))}return e=Gr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ra(t,e,n,r){return t=Gr(7,t,r,e),t.lanes=n,t}function hy(t,e,n,r){return t=Gr(22,t,r,e),t.elementType=kN,t.lanes=n,t.stateNode={isHidden:!1},t}function X_(t,e,n){return t=Gr(6,t,null,e),t.lanes=n,t}function J_(t,e,n){return e=Gr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function c4(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=P_(0),this.expirationTimes=P_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=P_(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ES(t,e,n,r,i,s,o,a,l){return t=new c4(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Gr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},oS(s),t}function u4(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function wD(t){if(!t)return So;t=t._reactInternals;e:{if(ml(t)!==t||t.tag!==1)throw Error(ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(_r(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ae(171))}if(t.tag===1){var n=t.type;if(_r(n))return _P(t,n,e)}return e}function bD(t,e,n,r,i,s,o,a,l){return t=ES(n,r,!0,t,i,s,o,a,l),t.context=wD(null),n=t.current,r=rr(),i=ho(n),s=hs(r,i),s.callback=e??null,co(n,s,i),t.current.lanes=i,df(t,i,r),wr(t,r),t}function fy(t,e,n,r){var i=e.current,s=rr(),o=ho(i);return n=wD(n),e.context===null?e.context=n:e.pendingContext=n,e=hs(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=co(i,e,o),t!==null&&(gi(t,i,o,s),rm(t,i,o)),o}function Qm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function lC(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function xS(t,e){lC(t,e),(t=t.alternate)&&lC(t,e)}function d4(){return null}var SD=typeof reportError=="function"?reportError:function(t){console.error(t)};function TS(t){this._internalRoot=t}py.prototype.render=TS.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ae(409));fy(t,e,null,null)};py.prototype.unmount=TS.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Wa(function(){fy(null,t,null,null)}),e[ws]=null}};function py(t){this._internalRoot=t}py.prototype.unstable_scheduleHydration=function(t){if(t){var e=JN();t={blockedOn:null,target:t,priority:e};for(var n=0;n<qs.length&&e!==0&&e<qs[n].priority;n++);qs.splice(n,0,t),n===0&&eP(t)}};function IS(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function my(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function cC(){}function h4(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Qm(o);s.call(c)}}var o=bD(e,r,t,0,null,!1,!1,"",cC);return t._reactRootContainer=o,t[ws]=o.current,dh(t.nodeType===8?t.parentNode:t),Wa(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Qm(l);a.call(c)}}var l=ES(t,0,!1,null,null,!1,!1,"",cC);return t._reactRootContainer=l,t[ws]=l.current,dh(t.nodeType===8?t.parentNode:t),Wa(function(){fy(e,l,n,r)}),l}function gy(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Qm(o);a.call(l)}}fy(e,o,t,i)}else o=h4(n,e,t,i,r);return Qm(o)}YN=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=vd(e.pendingLanes);n!==0&&(Hb(e,n|1),wr(e,Qt()),!(lt&6)&&(Nc=Qt()+500,Wo()))}break;case 13:Wa(function(){var r=bs(t,1);if(r!==null){var i=rr();gi(r,t,1,i)}}),xS(t,1)}};Gb=function(t){if(t.tag===13){var e=bs(t,134217728);if(e!==null){var n=rr();gi(e,t,134217728,n)}xS(t,134217728)}};XN=function(t){if(t.tag===13){var e=ho(t),n=bs(t,e);if(n!==null){var r=rr();gi(n,t,e,r)}xS(t,e)}};JN=function(){return mt};ZN=function(t,e){var n=mt;try{return mt=t,e()}finally{mt=n}};pw=function(t,e,n){switch(e){case"input":if(aw(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=oy(r);if(!i)throw Error(ae(90));RN(r),aw(r,i)}}}break;case"textarea":PN(t,n);break;case"select":e=n.value,e!=null&&cc(t,!!n.multiple,e,!1)}};UN=_S;jN=Wa;var f4={usingClientEntryPoint:!1,Events:[ff,Yl,oy,$N,FN,_S]},Wu={findFiberByHostInstance:ya,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},p4={bundleType:Wu.bundleType,version:Wu.version,rendererPackageName:Wu.rendererPackageName,rendererConfig:Wu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ks.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=zN(t),t===null?null:t.stateNode},findFiberByHostInstance:Wu.findFiberByHostInstance||d4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cp.isDisabled&&Cp.supportsFiber)try{ny=Cp.inject(p4),$i=Cp}catch{}}Ur.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=f4;Ur.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!IS(e))throw Error(ae(200));return u4(t,e,null,n)};Ur.createRoot=function(t,e){if(!IS(t))throw Error(ae(299));var n=!1,r="",i=SD;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=ES(t,1,!1,null,null,n,!1,r,i),t[ws]=e.current,dh(t.nodeType===8?t.parentNode:t),new TS(e)};Ur.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ae(188)):(t=Object.keys(t).join(","),Error(ae(268,t)));return t=zN(e),t=t===null?null:t.stateNode,t};Ur.flushSync=function(t){return Wa(t)};Ur.hydrate=function(t,e,n){if(!my(e))throw Error(ae(200));return gy(null,t,e,!0,n)};Ur.hydrateRoot=function(t,e,n){if(!IS(t))throw Error(ae(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=SD;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=bD(e,null,t,1,n??null,i,!1,s,o),t[ws]=e.current,dh(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new py(e)};Ur.render=function(t,e,n){if(!my(e))throw Error(ae(200));return gy(null,t,e,!1,n)};Ur.unmountComponentAtNode=function(t){if(!my(t))throw Error(ae(40));return t._reactRootContainer?(Wa(function(){gy(null,null,t,!1,function(){t._reactRootContainer=null,t[ws]=null})}),!0):!1};Ur.unstable_batchedUpdates=_S;Ur.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!my(n))throw Error(ae(200));if(t==null||t._reactInternals===void 0)throw Error(ae(38));return gy(t,e,n,!1,r)};Ur.version="18.2.0-next-9e3b772b8-20220608";(function(t){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}e(),t.exports=Ur})(d3);const m4=Pb(Tm);var uC=Tm;Z0.createRoot=uC.createRoot,Z0.hydrateRoot=uC.hydrateRoot;/**
 * @remix-run/router v1.3.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dt(){return dt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dt.apply(this,arguments)}var en;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(en||(en={}));const dC="popstate";function g4(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return wh("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Es(i)}return v4(e,n,null,t)}function Qe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function y4(){return Math.random().toString(36).substr(2,8)}function hC(t,e){return{usr:t.state,key:t.key,idx:e}}function wh(t,e,n,r){return n===void 0&&(n=null),dt({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?As(e):e,{state:n,key:e&&e.key||r||y4()})}function Es(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function As(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function v4(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=en.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(dt({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=en.Pop;let w=u(),m=w==null?null:w-c;c=w,l&&l({action:a,location:y.location,delta:m})}function h(w,m){a=en.Push;let g=wh(y.location,w,m);n&&n(g,w),c=u()+1;let _=hC(g,c),S=y.createHref(g);try{o.pushState(_,"",S)}catch{i.location.assign(S)}s&&l&&l({action:a,location:y.location,delta:1})}function f(w,m){a=en.Replace;let g=wh(y.location,w,m);n&&n(g,w),c=u();let _=hC(g,c),S=y.createHref(g);o.replaceState(_,"",S),s&&l&&l({action:a,location:y.location,delta:0})}function p(w){let m=i.location.origin!=="null"?i.location.origin:i.location.href,g=typeof w=="string"?w:Es(w);return Qe(m,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,m)}let y={get action(){return a},get location(){return t(i,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(dC,d),l=w,()=>{i.removeEventListener(dC,d),l=null}},createHref(w){return e(i,w)},createURL:p,encodeLocation(w){let m=p(w);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:h,replace:f,go(w){return o.go(w)}};return y}var pn;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(pn||(pn={}));function _4(t){return t.index===!0}function ED(t,e,n){return e===void 0&&(e=[]),n===void 0&&(n=new Set),t.map((r,i)=>{let s=[...e,i],o=typeof r.id=="string"?r.id:s.join("-");return Qe(r.index!==!0||!r.children,"Cannot specify children on an index route"),Qe(!n.has(o),'Found a route id collision on id "'+o+`".  Route id's must be globally unique within Data Router usages`),n.add(o),_4(r)?dt({},r,{id:o}):dt({},r,{id:o,children:r.children?ED(r.children,s,n):void 0})})}function rc(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?As(e):e,i=mf(r.pathname||"/",n);if(i==null)return null;let s=xD(t);w4(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=A4(s[a],P4(i));return o}function xD(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Qe(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=fs([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(Qe(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),xD(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:C4(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of TD(s.path))i(s,o,l)}),e}function TD(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=TD(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function w4(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:k4(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const b4=/^:\w+$/,S4=3,E4=2,x4=1,T4=10,I4=-2,fC=t=>t==="*";function C4(t,e){let n=t.split("/"),r=n.length;return n.some(fC)&&(r+=I4),e&&(r+=E4),n.filter(i=>!fC(i)).reduce((i,s)=>i+(b4.test(s)?S4:s===""?x4:T4),r)}function k4(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function A4(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=i==="/"?e:e.slice(i.length)||"/",u=R4({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!u)return null;Object.assign(r,u.params);let d=a.route;s.push({params:r,pathname:fs([i,u.pathname]),pathnameBase:M4(fs([i,u.pathnameBase])),route:d}),u.pathnameBase!=="/"&&(i=fs([i,u.pathnameBase]))}return s}function R4(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=N4(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,d)=>{if(u==="*"){let h=a[d]||"";o=s.slice(0,s.length-h.length).replace(/(.)\/+$/,"$1")}return c[u]=D4(a[d]||"",u),c},{}),pathname:s,pathnameBase:o,pattern:t}}function N4(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),bh(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function P4(t){try{return decodeURI(t)}catch(e){return bh(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function D4(t,e){try{return decodeURIComponent(t)}catch(n){return bh(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function mf(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function bh(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function O4(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?As(t):t;return{pathname:n?n.startsWith("/")?n:L4(n,e):e,search:$4(r),hash:F4(i)}}function L4(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Z_(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function yy(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function CS(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=As(t):(i=dt({},t),Qe(!i.pathname||!i.pathname.includes("?"),Z_("?","pathname","search",i)),Qe(!i.pathname||!i.pathname.includes("#"),Z_("#","pathname","hash",i)),Qe(!i.search||!i.search.includes("#"),Z_("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(r||o==null)a=n;else{let d=e.length-1;if(o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}a=d>=0?e[d]:"/"}let l=O4(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const fs=t=>t.join("/").replace(/\/\/+/g,"/"),M4=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),$4=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,F4=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class pC extends Error{}class U4{constructor(e,n){this.pendingKeysSet=new Set,this.subscribers=new Set,this.deferredKeys=[],Qe(e&&typeof e=="object"&&!Array.isArray(e),"defer() only accepts plain objects");let r;this.abortPromise=new Promise((s,o)=>r=o),this.controller=new AbortController;let i=()=>r(new pC("Deferred data aborted"));this.unlistenAbortSignal=()=>this.controller.signal.removeEventListener("abort",i),this.controller.signal.addEventListener("abort",i),this.data=Object.entries(e).reduce((s,o)=>{let[a,l]=o;return Object.assign(s,{[a]:this.trackPromise(a,l)})},{}),this.done&&this.unlistenAbortSignal(),this.init=n}trackPromise(e,n){if(!(n instanceof Promise))return n;this.deferredKeys.push(e),this.pendingKeysSet.add(e);let r=Promise.race([n,this.abortPromise]).then(i=>this.onSettle(r,e,null,i),i=>this.onSettle(r,e,i));return r.catch(()=>{}),Object.defineProperty(r,"_tracked",{get:()=>!0}),r}onSettle(e,n,r,i){return this.controller.signal.aborted&&r instanceof pC?(this.unlistenAbortSignal(),Object.defineProperty(e,"_error",{get:()=>r}),Promise.reject(r)):(this.pendingKeysSet.delete(n),this.done&&this.unlistenAbortSignal(),r?(Object.defineProperty(e,"_error",{get:()=>r}),this.emit(!1,n),Promise.reject(r)):(Object.defineProperty(e,"_data",{get:()=>i}),this.emit(!1,n),i))}emit(e,n){this.subscribers.forEach(r=>r(e,n))}subscribe(e){return this.subscribers.add(e),()=>this.subscribers.delete(e)}cancel(){this.controller.abort(),this.pendingKeysSet.forEach((e,n)=>this.pendingKeysSet.delete(n)),this.emit(!0)}async resolveData(e){let n=!1;if(!this.done){let r=()=>this.cancel();e.addEventListener("abort",r),n=await new Promise(i=>{this.subscribe(s=>{e.removeEventListener("abort",r),(s||this.done)&&i(s)})})}return n}get done(){return this.pendingKeysSet.size===0}get unwrappedData(){return Qe(this.data!==null&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce((e,n)=>{let[r,i]=n;return Object.assign(e,{[r]:V4(i)})},{})}get pendingKeys(){return Array.from(this.pendingKeysSet)}}function j4(t){return t instanceof Promise&&t._tracked===!0}function V4(t){if(!j4(t))return t;if(t._error)throw t._error;return t._data}class kS{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function ID(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const CD=["post","put","patch","delete"],B4=new Set(CD),z4=["get",...CD],W4=new Set(z4),H4=new Set([301,302,303,307,308]),G4=new Set([307,308]),e0={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},q4={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},mC={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},kD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,AD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",K4=!AD;function Q4(t){Qe(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let e=ED(t.routes),n,r=null,i=new Set,s=null,o=null,a=null,l=t.hydrationData!=null,c=rc(e,t.history.location,t.basename),u=null;if(c==null){let K=Zi(404,{pathname:t.history.location.pathname}),{matches:Y,route:X}=bC(e);c=Y,u={[X.id]:K}}let d=!c.some(K=>K.route.loader)||t.hydrationData!=null,h,f={historyAction:t.history.action,location:t.history.location,matches:c,initialized:d,navigation:e0,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||u,fetchers:new Map,blockers:new Map},p=en.Pop,y=!1,w,m=!1,g=!1,_=[],S=[],I=new Map,E=0,D=-1,b=new Map,x=new Set,O=new Map,C=new Map,k=new Map,A=!1;function N(){return r=t.history.listen(K=>{let{action:Y,location:X,delta:be}=K;if(A){A=!1;return}bh(k.size===0||be!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let _e=qe({currentLocation:f.location,nextLocation:X,historyAction:Y});if(_e&&be!=null){A=!0,t.history.go(be*-1),ft(_e,{state:"blocked",location:X,proceed(){ft(_e,{state:"proceeding",proceed:void 0,reset:void 0,location:X}),t.history.go(be)},reset(){Le(_e),T({blockers:new Map(h.state.blockers)})}});return}return J(Y,X)}),f.initialized||J(en.Pop,f.location),h}function B(){r&&r(),i.clear(),w&&w.abort(),f.fetchers.forEach((K,Y)=>oe(Y)),f.blockers.forEach((K,Y)=>Le(Y))}function R(K){return i.add(K),()=>i.delete(K)}function T(K){f=dt({},f,K),i.forEach(Y=>Y(f))}function U(K,Y){var X,be;let _e=f.actionData!=null&&f.navigation.formMethod!=null&&rs(f.navigation.formMethod)&&f.navigation.state==="loading"&&((X=K.state)==null?void 0:X._isRedirect)!==!0,Re;Y.actionData?Object.keys(Y.actionData).length>0?Re=Y.actionData:Re=null:_e?Re=f.actionData:Re=null;let Te=Y.loaderData?wC(f.loaderData,Y.loaderData,Y.matches||[],Y.errors):f.loaderData;for(let[we]of k)Le(we);let Fe=y===!0||f.navigation.formMethod!=null&&rs(f.navigation.formMethod)&&((be=K.state)==null?void 0:be._isRedirect)!==!0;n&&(e=n,n=void 0),T(dt({},Y,{actionData:Re,loaderData:Te,historyAction:p,location:K,initialized:!0,navigation:e0,revalidation:"idle",restoreScrollPosition:pe(K,Y.matches||f.matches),preventScrollReset:Fe,blockers:new Map(f.blockers)})),m||p===en.Pop||(p===en.Push?t.history.push(K,K.state):p===en.Replace&&t.history.replace(K,K.state)),p=en.Pop,y=!1,m=!1,g=!1,_=[],S=[]}async function $(K,Y){if(typeof K=="number"){t.history.go(K);return}let{path:X,submission:be,error:_e}=gC(K,Y),Re=f.location,Te=wh(f.location,X,Y&&Y.state);Te=dt({},Te,t.history.encodeLocation(Te));let Fe=Y&&Y.replace!=null?Y.replace:void 0,we=en.Push;Fe===!0?we=en.Replace:Fe===!1||be!=null&&rs(be.formMethod)&&be.formAction===f.location.pathname+f.location.search&&(we=en.Replace);let W=Y&&"preventScrollReset"in Y?Y.preventScrollReset===!0:void 0,V=qe({currentLocation:Re,nextLocation:Te,historyAction:we});if(V){ft(V,{state:"blocked",location:Te,proceed(){ft(V,{state:"proceeding",proceed:void 0,reset:void 0,location:Te}),$(K,Y)},reset(){Le(V),T({blockers:new Map(f.blockers)})}});return}return await J(we,Te,{submission:be,pendingError:_e,preventScrollReset:W,replace:Y&&Y.replace})}function z(){if(de(),T({revalidation:"loading"}),f.navigation.state!=="submitting"){if(f.navigation.state==="idle"){J(f.historyAction,f.location,{startUninterruptedRevalidation:!0});return}J(p||f.historyAction,f.navigation.location,{overrideNavigation:f.navigation})}}async function J(K,Y,X){w&&w.abort(),w=null,p=K,m=(X&&X.startUninterruptedRevalidation)===!0,et(f.location,f.matches),y=(X&&X.preventScrollReset)===!0;let be=n||e,_e=X&&X.overrideNavigation,Re=rc(be,Y,t.basename);if(!Re){let ie=Zi(404,{pathname:Y.pathname}),{matches:ue,route:he}=bC(be);ut(),U(Y,{matches:ue,loaderData:{},errors:{[he.id]:ie}});return}if(ez(f.location,Y)&&!(X&&X.submission&&rs(X.submission.formMethod))){U(Y,{matches:Re});return}w=new AbortController;let Te=Gu(t.history,Y,w.signal,X&&X.submission),Fe,we;if(X&&X.pendingError)we={[ic(Re).route.id]:X.pendingError};else if(X&&X.submission&&rs(X.submission.formMethod)){let ie=await P(Te,Y,X.submission,Re,{replace:X.replace});if(ie.shortCircuited)return;Fe=ie.pendingActionData,we=ie.pendingActionError,_e=dt({state:"loading",location:Y},X.submission),Te=new Request(Te.url,{signal:Te.signal})}let{shortCircuited:W,loaderData:V,errors:Z}=await F(Te,Y,Re,_e,X&&X.submission,X&&X.replace,Fe,we);W||(w=null,U(Y,dt({matches:Re},Fe?{actionData:Fe}:{},{loaderData:V,errors:Z})))}async function P(K,Y,X,be,_e){de();let Re=dt({state:"submitting",location:Y},X);T({navigation:Re});let Te,Fe=qw(be,Y);if(!Fe.route.action)Te={type:pn.error,error:Zi(405,{method:K.method,pathname:Y.pathname,routeId:Fe.route.id})};else if(Te=await Hu("action",K,Fe,be,h.basename),K.signal.aborted)return{shortCircuited:!0};if(mc(Te)){let we;return _e&&_e.replace!=null?we=_e.replace:we=Te.location===f.location.pathname+f.location.search,await G(f,Te,{submission:X,replace:we}),{shortCircuited:!0}}if(Md(Te)){let we=ic(be,Fe.route.id);return(_e&&_e.replace)!==!0&&(p=en.Push),{pendingActionData:{},pendingActionError:{[we.route.id]:Te.error}}}if(wa(Te))throw Zi(400,{type:"defer-action"});return{pendingActionData:{[Fe.route.id]:Te.data}}}async function F(K,Y,X,be,_e,Re,Te,Fe){let we=be;we||(we=dt({state:"loading",location:Y,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},_e));let W=_e||(we.formMethod&&we.formAction&&we.formData&&we.formEncType?{formMethod:we.formMethod,formAction:we.formAction,formData:we.formData,formEncType:we.formEncType}:void 0),V=n||e,[Z,ie]=yC(t.history,f,X,W,Y,g,_,S,O,V,t.basename,Te,Fe);if(ut(rt=>!(X&&X.some(Ze=>Ze.route.id===rt))||Z&&Z.some(Ze=>Ze.route.id===rt)),Z.length===0&&ie.length===0)return U(Y,dt({matches:X,loaderData:{},errors:Fe||null},Te?{actionData:Te}:{})),{shortCircuited:!0};if(!m){ie.forEach(Ze=>{let yt=f.fetchers.get(Ze.key),jn={state:"loading",data:yt&&yt.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};f.fetchers.set(Ze.key,jn)});let rt=Te||f.actionData;T(dt({navigation:we},rt?Object.keys(rt).length===0?{actionData:null}:{actionData:rt}:{},ie.length>0?{fetchers:new Map(f.fetchers)}:{}))}D=++E,ie.forEach(rt=>I.set(rt.key,w));let{results:ue,loaderResults:he,fetcherResults:Oe}=await ee(f.matches,X,Z,ie,K);if(K.signal.aborted)return{shortCircuited:!0};ie.forEach(rt=>I.delete(rt.key));let Ie=SC(ue);if(Ie)return await G(f,Ie,{replace:Re}),{shortCircuited:!0};let{loaderData:Ce,errors:$e}=_C(f,X,Z,he,Fe,ie,Oe,C);C.forEach((rt,Ze)=>{rt.subscribe(yt=>{(yt||rt.done)&&C.delete(Ze)})}),Ee();let nt=Me(D);return dt({loaderData:Ce,errors:$e},nt||ie.length>0?{fetchers:new Map(f.fetchers)}:{})}function L(K){return f.fetchers.get(K)||q4}function j(K,Y,X,be){if(K4)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");I.has(K)&&De(K);let Re=rc(n||e,X,t.basename);if(!Re){ye(K,Y,Zi(404,{pathname:X}));return}let{path:Te,submission:Fe}=gC(X,be,!0),we=qw(Re,Te);if(y=(be&&be.preventScrollReset)===!0,Fe&&rs(Fe.formMethod)){M(K,Y,Te,we,Re,Fe);return}O.set(K,{routeId:Y,path:Te}),te(K,Y,Te,we,Re,Fe)}async function M(K,Y,X,be,_e,Re){if(de(),O.delete(K),!be.route.action){let Yn=Zi(405,{method:Re.formMethod,pathname:X,routeId:Y});ye(K,Y,Yn);return}let Te=f.fetchers.get(K),Fe=dt({state:"submitting"},Re,{data:Te&&Te.data," _hasFetcherDoneAnything ":!0});f.fetchers.set(K,Fe),T({fetchers:new Map(f.fetchers)});let we=new AbortController,W=Gu(t.history,X,we.signal,Re);I.set(K,we);let V=await Hu("action",W,be,_e,h.basename);if(W.signal.aborted){I.get(K)===we&&I.delete(K);return}if(mc(V)){I.delete(K),x.add(K);let Yn=dt({state:"loading"},Re,{data:void 0," _hasFetcherDoneAnything ":!0});return f.fetchers.set(K,Yn),T({fetchers:new Map(f.fetchers)}),G(f,V,{isFetchActionRedirect:!0})}if(Md(V)){ye(K,Y,V.error);return}if(wa(V))throw Zi(400,{type:"defer-action"});let Z=f.navigation.location||f.location,ie=Gu(t.history,Z,we.signal),ue=n||e,he=f.navigation.state!=="idle"?rc(ue,f.navigation.location,t.basename):f.matches;Qe(he,"Didn't find any matches after fetcher action");let Oe=++E;b.set(K,Oe);let Ie=dt({state:"loading",data:V.data},Re,{" _hasFetcherDoneAnything ":!0});f.fetchers.set(K,Ie);let[Ce,$e]=yC(t.history,f,he,Re,Z,g,_,S,O,ue,t.basename,{[be.route.id]:V.data},void 0);$e.filter(Yn=>Yn.key!==K).forEach(Yn=>{let I_=Yn.key,tI=f.fetchers.get(I_),UV={state:"loading",data:tI&&tI.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};f.fetchers.set(I_,UV),I.set(I_,we)}),T({fetchers:new Map(f.fetchers)});let{results:nt,loaderResults:rt,fetcherResults:Ze}=await ee(f.matches,he,Ce,$e,ie);if(we.signal.aborted)return;b.delete(K),I.delete(K),$e.forEach(Yn=>I.delete(Yn.key));let yt=SC(nt);if(yt)return G(f,yt);let{loaderData:jn,errors:bi}=_C(f,f.matches,Ce,rt,void 0,$e,Ze,C),Dl={state:"idle",data:V.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};f.fetchers.set(K,Dl);let ra=Me(Oe);f.navigation.state==="loading"&&Oe>D?(Qe(p,"Expected pending action"),w&&w.abort(),U(f.navigation.location,{matches:he,loaderData:jn,errors:bi,fetchers:new Map(f.fetchers)})):(T(dt({errors:bi,loaderData:wC(f.loaderData,jn,he,bi)},ra?{fetchers:new Map(f.fetchers)}:{})),g=!1)}async function te(K,Y,X,be,_e,Re){let Te=f.fetchers.get(K),Fe=dt({state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},Re,{data:Te&&Te.data," _hasFetcherDoneAnything ":!0});f.fetchers.set(K,Fe),T({fetchers:new Map(f.fetchers)});let we=new AbortController,W=Gu(t.history,X,we.signal);I.set(K,we);let V=await Hu("loader",W,be,_e,h.basename);if(wa(V)&&(V=await DD(V,W.signal,!0)||V),I.get(K)===we&&I.delete(K),W.signal.aborted)return;if(mc(V)){await G(f,V);return}if(Md(V)){let ie=ic(f.matches,Y);f.fetchers.delete(K),T({fetchers:new Map(f.fetchers),errors:{[ie.route.id]:V.error}});return}Qe(!wa(V),"Unhandled fetcher deferred data");let Z={state:"idle",data:V.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};f.fetchers.set(K,Z),T({fetchers:new Map(f.fetchers)})}async function G(K,Y,X){var be;let{submission:_e,replace:Re,isFetchActionRedirect:Te}=X===void 0?{}:X;Y.revalidate&&(g=!0);let Fe=wh(K.location,Y.location,dt({_isRedirect:!0},Te?{_isFetchActionRedirect:!0}:{}));if(Qe(Fe,"Expected a location on the redirect navigation"),kD.test(Y.location)&&AD&&typeof((be=window)==null?void 0:be.location)<"u"){let ue=t.history.createURL(Y.location),he=mf(ue.pathname,t.basename||"/")==null;if(window.location.origin!==ue.origin||he){Re?window.location.replace(Y.location):window.location.assign(Y.location);return}}w=null;let we=Re===!0?en.Replace:en.Push,{formMethod:W,formAction:V,formEncType:Z,formData:ie}=K.navigation;!_e&&W&&V&&ie&&Z&&(_e={formMethod:W,formAction:V,formEncType:Z,formData:ie}),G4.has(Y.status)&&_e&&rs(_e.formMethod)?await J(we,Fe,{submission:dt({},_e,{formAction:Y.location}),preventScrollReset:y}):await J(we,Fe,{overrideNavigation:{state:"loading",location:Fe,formMethod:_e?_e.formMethod:void 0,formAction:_e?_e.formAction:void 0,formEncType:_e?_e.formEncType:void 0,formData:_e?_e.formData:void 0},preventScrollReset:y})}async function ee(K,Y,X,be,_e){let Re=await Promise.all([...X.map(we=>Hu("loader",_e,we,Y,h.basename)),...be.map(we=>we.matches&&we.match?Hu("loader",Gu(t.history,we.path,_e.signal),we.match,we.matches,h.basename):{type:pn.error,error:Zi(404,{pathname:we.path})})]),Te=Re.slice(0,X.length),Fe=Re.slice(X.length);return await Promise.all([EC(K,X,Te,_e.signal,!1,f.loaderData),EC(K,be.map(we=>we.match),Fe,_e.signal,!0)]),{results:Re,loaderResults:Te,fetcherResults:Fe}}function de(){g=!0,_.push(...ut()),O.forEach((K,Y)=>{I.has(Y)&&(S.push(Y),De(Y))})}function ye(K,Y,X){let be=ic(f.matches,Y);oe(K),T({errors:{[be.route.id]:X},fetchers:new Map(f.fetchers)})}function oe(K){I.has(K)&&De(K),O.delete(K),b.delete(K),x.delete(K),f.fetchers.delete(K)}function De(K){let Y=I.get(K);Qe(Y,"Expected fetch controller: "+K),Y.abort(),I.delete(K)}function He(K){for(let Y of K){let be={state:"idle",data:L(Y).data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};f.fetchers.set(Y,be)}}function Ee(){let K=[];for(let Y of x){let X=f.fetchers.get(Y);Qe(X,"Expected fetcher: "+Y),X.state==="loading"&&(x.delete(Y),K.push(Y))}He(K)}function Me(K){let Y=[];for(let[X,be]of b)if(be<K){let _e=f.fetchers.get(X);Qe(_e,"Expected fetcher: "+X),_e.state==="loading"&&(De(X),b.delete(X),Y.push(X))}return He(Y),Y.length>0}function ve(K,Y){let X=f.blockers.get(K)||mC;return k.get(K)!==Y&&k.set(K,Y),X}function Le(K){f.blockers.delete(K),k.delete(K)}function ft(K,Y){let X=f.blockers.get(K)||mC;Qe(X.state==="unblocked"&&Y.state==="blocked"||X.state==="blocked"&&Y.state==="blocked"||X.state==="blocked"&&Y.state==="proceeding"||X.state==="blocked"&&Y.state==="unblocked"||X.state==="proceeding"&&Y.state==="unblocked","Invalid blocker state transition: "+X.state+" -> "+Y.state),f.blockers.set(K,Y),T({blockers:new Map(f.blockers)})}function qe(K){let{currentLocation:Y,nextLocation:X,historyAction:be}=K;if(k.size===0)return;k.size>1&&bh(!1,"A router only supports one blocker at a time");let _e=Array.from(k.entries()),[Re,Te]=_e[_e.length-1],Fe=f.blockers.get(Re);if(!(Fe&&Fe.state==="proceeding")&&Te({currentLocation:Y,nextLocation:X,historyAction:be}))return Re}function ut(K){let Y=[];return C.forEach((X,be)=>{(!K||K(be))&&(X.cancel(),Y.push(be),C.delete(be))}),Y}function Pt(K,Y,X){if(s=K,a=Y,o=X||(be=>be.key),!l&&f.navigation===e0){l=!0;let be=pe(f.location,f.matches);be!=null&&T({restoreScrollPosition:be})}return()=>{s=null,a=null,o=null}}function et(K,Y){if(s&&o&&a){let X=Y.map(_e=>xC(_e,f.loaderData)),be=o(K,X)||K.key;s[be]=a()}}function pe(K,Y){if(s&&o&&a){let X=Y.map(Re=>xC(Re,f.loaderData)),be=o(K,X)||K.key,_e=s[be];if(typeof _e=="number")return _e}return null}function Ge(K){n=K}return h={get basename(){return t.basename},get state(){return f},get routes(){return e},initialize:N,subscribe:R,enableScrollRestoration:Pt,navigate:$,fetch:j,revalidate:z,createHref:K=>t.history.createHref(K),encodeLocation:K=>t.history.encodeLocation(K),getFetcher:L,deleteFetcher:oe,dispose:B,getBlocker:ve,deleteBlocker:Le,_internalFetchControllers:I,_internalActiveDeferreds:C,_internalSetRoutes:Ge},h}function Y4(t){return t!=null&&"formData"in t}function gC(t,e,n){n===void 0&&(n=!1);let r=typeof t=="string"?t:Es(t);if(!e||!Y4(e))return{path:r};if(e.formMethod&&!nz(e.formMethod))return{path:r,error:Zi(405,{method:e.formMethod})};let i;if(e.formData&&(i={formMethod:e.formMethod||"get",formAction:PD(r),formEncType:e&&e.formEncType||"application/x-www-form-urlencoded",formData:e.formData},rs(i.formMethod)))return{path:r,submission:i};let s=As(r),o=ND(e.formData);return n&&s.search&&OD(s.search)&&o.append("index",""),s.search="?"+o,{path:Es(s),submission:i}}function X4(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function yC(t,e,n,r,i,s,o,a,l,c,u,d,h){let f=h?Object.values(h)[0]:d?Object.values(d)[0]:void 0,p=t.createURL(e.location),y=t.createURL(i),w=s||p.toString()===y.toString()||p.search!==y.search,m=h?Object.keys(h)[0]:void 0,_=X4(n,m).filter((I,E)=>{if(I.route.loader==null)return!1;if(J4(e.loaderData,e.matches[E],I)||o.some(x=>x===I.route.id))return!0;let D=e.matches[E],b=I;return vC(I,dt({currentUrl:p,currentParams:D.params,nextUrl:y,nextParams:b.params},r,{actionResult:f,defaultShouldRevalidate:w||RD(D,b)}))}),S=[];return l.forEach((I,E)=>{if(!n.some(O=>O.route.id===I.routeId))return;let D=rc(c,I.path,u);if(!D){S.push(dt({key:E},I,{matches:null,match:null}));return}let b=qw(D,I.path);if(a.includes(E)){S.push(dt({key:E,matches:D,match:b},I));return}vC(b,dt({currentUrl:p,currentParams:e.matches[e.matches.length-1].params,nextUrl:y,nextParams:n[n.length-1].params},r,{actionResult:f,defaultShouldRevalidate:w}))&&S.push(dt({key:E,matches:D,match:b},I))}),[_,S]}function J4(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function RD(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function vC(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function Hu(t,e,n,r,i,s,o,a){i===void 0&&(i="/"),s===void 0&&(s=!1),o===void 0&&(o=!1);let l,c,u,d=new Promise((y,w)=>u=w),h=()=>u();e.signal.addEventListener("abort",h);try{let y=n.route[t];Qe(y,"Could not find the "+t+' to run on the "'+n.route.id+'" route'),c=await Promise.race([y({request:e,params:n.params,context:a}),d]),Qe(c!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(y){l=pn.error,c=y}finally{e.signal.removeEventListener("abort",h)}if(tz(c)){let y=c.status;if(H4.has(y)){let g=c.headers.get("Location");if(Qe(g,"Redirects returned/thrown from loaders/actions must have a Location header"),kD.test(g)){if(!s){let _=new URL(e.url),S=g.startsWith("//")?new URL(_.protocol+g):new URL(g),I=mf(S.pathname,i)!=null;S.origin===_.origin&&I&&(g=S.pathname+S.search+S.hash)}}else{let _=r.slice(0,r.indexOf(n)+1),S=yy(_).map(E=>E.pathnameBase),I=CS(g,S,new URL(e.url).pathname);if(Qe(Es(I),"Unable to resolve redirect location: "+g),i){let E=I.pathname;I.pathname=E==="/"?i:fs([i,E])}g=Es(I)}if(s)throw c.headers.set("Location",g),c;return{type:pn.redirect,status:y,location:g,revalidate:c.headers.get("X-Remix-Revalidate")!==null}}if(o)throw{type:l||pn.data,response:c};let w,m=c.headers.get("Content-Type");return m&&/\bapplication\/json\b/.test(m)?w=await c.json():w=await c.text(),l===pn.error?{type:l,error:new kS(y,c.statusText,w),headers:c.headers}:{type:pn.data,data:w,statusCode:c.status,headers:c.headers}}if(l===pn.error)return{type:l,error:c};if(c instanceof U4){var f,p;return{type:pn.deferred,deferredData:c,statusCode:(f=c.init)==null?void 0:f.status,headers:((p=c.init)==null?void 0:p.headers)&&new Headers(c.init.headers)}}return{type:pn.data,data:c}}function Gu(t,e,n,r){let i=t.createURL(PD(e)).toString(),s={signal:n};if(r&&rs(r.formMethod)){let{formMethod:o,formEncType:a,formData:l}=r;s.method=o.toUpperCase(),s.body=a==="application/x-www-form-urlencoded"?ND(l):l}return new Request(i,s)}function ND(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,r instanceof File?r.name:r);return e}function Z4(t,e,n,r,i){let s={},o=null,a,l=!1,c={};return n.forEach((u,d)=>{let h=e[d].route.id;if(Qe(!mc(u),"Cannot handle redirect results in processLoaderData"),Md(u)){let f=ic(t,h),p=u.error;r&&(p=Object.values(r)[0],r=void 0),o=o||{},o[f.route.id]==null&&(o[f.route.id]=p),s[h]=void 0,l||(l=!0,a=ID(u.error)?u.error.status:500),u.headers&&(c[h]=u.headers)}else wa(u)?(i.set(h,u.deferredData),s[h]=u.deferredData.data):s[h]=u.data,u.statusCode!=null&&u.statusCode!==200&&!l&&(a=u.statusCode),u.headers&&(c[h]=u.headers)}),r&&(o=r,s[Object.keys(r)[0]]=void 0),{loaderData:s,errors:o,statusCode:a||200,loaderHeaders:c}}function _C(t,e,n,r,i,s,o,a){let{loaderData:l,errors:c}=Z4(e,n,r,i,a);for(let u=0;u<s.length;u++){let{key:d,match:h}=s[u];Qe(o!==void 0&&o[u]!==void 0,"Did not find corresponding fetcher result");let f=o[u];if(Md(f)){let p=ic(t.matches,h==null?void 0:h.route.id);c&&c[p.route.id]||(c=dt({},c,{[p.route.id]:f.error})),t.fetchers.delete(d)}else if(mc(f))Qe(!1,"Unhandled fetcher revalidation redirect");else if(wa(f))Qe(!1,"Unhandled fetcher deferred data");else{let p={state:"idle",data:f.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};t.fetchers.set(d,p)}}return{loaderData:l,errors:c}}function wC(t,e,n,r){let i=dt({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function ic(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function bC(t){let e=t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Zi(t,e){let{pathname:n,routeId:r,method:i,type:s}=e===void 0?{}:e,o="Unknown Server Error",a="Unknown @remix-run/router error";return t===400?(o="Bad Request",i&&n&&r?a="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"&&(a="defer() is not supported in actions")):t===403?(o="Forbidden",a='Route "'+r+'" does not match URL "'+n+'"'):t===404?(o="Not Found",a='No route matches URL "'+n+'"'):t===405&&(o="Method Not Allowed",i&&n&&r?a="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(a='Invalid request method "'+i.toUpperCase()+'"')),new kS(t||500,o,new Error(a),!0)}function SC(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(mc(n))return n}}function PD(t){let e=typeof t=="string"?As(t):t;return Es(dt({},e,{hash:""}))}function ez(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.hash!==e.hash}function wa(t){return t.type===pn.deferred}function Md(t){return t.type===pn.error}function mc(t){return(t&&t.type)===pn.redirect}function tz(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function nz(t){return W4.has(t)}function rs(t){return B4.has(t)}async function EC(t,e,n,r,i,s){for(let o=0;o<n.length;o++){let a=n[o],l=e[o];if(!l)continue;let c=t.find(d=>d.route.id===l.route.id),u=c!=null&&!RD(c,l)&&(s&&s[l.route.id])!==void 0;wa(a)&&(i||u)&&await DD(a,r,i).then(d=>{d&&(n[o]=d||n[o])})}}async function DD(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:pn.data,data:t.deferredData.unwrappedData}}catch(i){return{type:pn.error,error:i}}return{type:pn.data,data:t.deferredData.data}}}function OD(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function xC(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function qw(t,e){let n=typeof e=="string"?As(e).search:e.search;if(t[t.length-1].route.index&&OD(n||""))return t[t.length-1];let r=yy(t);return r[r.length-1]}/**
 * React Router v6.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ym(){return Ym=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ym.apply(this,arguments)}function rz(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}const iz=typeof Object.is=="function"?Object.is:rz,{useState:sz,useEffect:oz,useLayoutEffect:az,useDebugValue:lz}=J0;function cz(t,e,n){const r=e(),[{inst:i},s]=sz({inst:{value:r,getSnapshot:e}});return az(()=>{i.value=r,i.getSnapshot=e,t0(i)&&s({inst:i})},[t,r,e]),oz(()=>(t0(i)&&s({inst:i}),t(()=>{t0(i)&&s({inst:i})})),[t]),lz(r),r}function t0(t){const e=t.getSnapshot,n=t.value;try{const r=e();return!iz(n,r)}catch{return!0}}function uz(t,e,n){return e()}const dz=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",hz=!dz,fz=hz?uz:cz,pz="useSyncExternalStore"in J0?(t=>t.useSyncExternalStore)(J0):fz,AS=H.createContext(null),RS=H.createContext(null),gf=H.createContext(null),vy=H.createContext(null),Ho=H.createContext({outlet:null,matches:[]}),LD=H.createContext(null);function mz(t,e){let{relative:n}=e===void 0?{}:e;yf()||Qe(!1);let{basename:r,navigator:i}=H.useContext(gf),{hash:s,pathname:o,search:a}=MD(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:fs([r,o])),i.createHref({pathname:l,search:a,hash:s})}function yf(){return H.useContext(vy)!=null}function _y(){return yf()||Qe(!1),H.useContext(vy).location}function Rs(){yf()||Qe(!1);let{basename:t,navigator:e}=H.useContext(gf),{matches:n}=H.useContext(Ho),{pathname:r}=_y(),i=JSON.stringify(yy(n).map(a=>a.pathnameBase)),s=H.useRef(!1);return H.useEffect(()=>{s.current=!0}),H.useCallback(function(a,l){if(l===void 0&&(l={}),!s.current)return;if(typeof a=="number"){e.go(a);return}let c=CS(a,JSON.parse(i),r,l.relative==="path");t!=="/"&&(c.pathname=c.pathname==="/"?t:fs([t,c.pathname])),(l.replace?e.replace:e.push)(c,l.state,l)},[t,e,i,r])}const gz=H.createContext(null);function yz(t){let e=H.useContext(Ho).outlet;return e&&H.createElement(gz.Provider,{value:t},e)}function NS(){let{matches:t}=H.useContext(Ho),e=t[t.length-1];return e?e.params:{}}function MD(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=H.useContext(Ho),{pathname:i}=_y(),s=JSON.stringify(yy(r).map(o=>o.pathnameBase));return H.useMemo(()=>CS(t,JSON.parse(s),i,n==="path"),[t,s,i,n])}function vz(t,e){yf()||Qe(!1);let{navigator:n}=H.useContext(gf),r=H.useContext(RS),{matches:i}=H.useContext(Ho),s=i[i.length-1],o=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let l=_y(),c;if(e){var u;let y=typeof e=="string"?As(e):e;a==="/"||(u=y.pathname)!=null&&u.startsWith(a)||Qe(!1),c=y}else c=l;let d=c.pathname||"/",h=a==="/"?d:d.slice(a.length)||"/",f=rc(t,{pathname:h}),p=Sz(f&&f.map(y=>Object.assign({},y,{params:Object.assign({},o,y.params),pathname:fs([a,n.encodeLocation?n.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?a:fs([a,n.encodeLocation?n.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,r||void 0);return e&&p?H.createElement(vy.Provider,{value:{location:Ym({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:en.Pop}},p):p}function _z(){let t=Iz(),e=ID(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},e),n?H.createElement("pre",{style:i},n):null,s)}class wz extends H.Component{constructor(e){super(e),this.state={location:e.location,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location?{error:e.error,location:e.location}:{error:e.error||n.error,location:n.location}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?H.createElement(Ho.Provider,{value:this.props.routeContext},H.createElement(LD.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function bz(t){let{routeContext:e,match:n,children:r}=t,i=H.useContext(AS);return i&&i.static&&i.staticContext&&n.route.errorElement&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),H.createElement(Ho.Provider,{value:e},r)}function Sz(t,e,n){if(e===void 0&&(e=[]),t==null)if(n!=null&&n.errors)t=n.matches;else return null;let r=t,i=n==null?void 0:n.errors;if(i!=null){let s=r.findIndex(o=>o.route.id&&(i==null?void 0:i[o.route.id]));s>=0||Qe(!1),r=r.slice(0,Math.min(r.length,s+1))}return r.reduceRight((s,o,a)=>{let l=o.route.id?i==null?void 0:i[o.route.id]:null,c=n?o.route.errorElement||H.createElement(_z,null):null,u=e.concat(r.slice(0,a+1)),d=()=>H.createElement(bz,{match:o,routeContext:{outlet:s,matches:u}},l?c:o.route.element!==void 0?o.route.element:s);return n&&(o.route.errorElement||a===0)?H.createElement(wz,{location:n.location,component:c,error:l,children:d(),routeContext:{outlet:null,matches:u}}):d()},null)}var TC;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator"})(TC||(TC={}));var Xm;(function(t){t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator"})(Xm||(Xm={}));function Ez(t){let e=H.useContext(RS);return e||Qe(!1),e}function xz(t){let e=H.useContext(Ho);return e||Qe(!1),e}function Tz(t){let e=xz(),n=e.matches[e.matches.length-1];return n.route.id||Qe(!1),n.route.id}function Iz(){var t;let e=H.useContext(LD),n=Ez(Xm.UseRouteError),r=Tz(Xm.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function Cz(t){let{fallbackElement:e,router:n}=t,r=pz(n.subscribe,()=>n.state,()=>n.state),i=H.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:o=>n.navigate(o),push:(o,a,l)=>n.navigate(o,{state:a,preventScrollReset:l==null?void 0:l.preventScrollReset}),replace:(o,a,l)=>n.navigate(o,{replace:!0,state:a,preventScrollReset:l==null?void 0:l.preventScrollReset})}),[n]),s=n.basename||"/";return H.createElement(H.Fragment,null,H.createElement(AS.Provider,{value:{router:n,navigator:i,static:!1,basename:s}},H.createElement(RS.Provider,{value:r},H.createElement(Rz,{basename:n.basename,location:n.state.location,navigationType:n.state.historyAction,navigator:i},n.state.initialized?H.createElement(Nz,null):e))),null)}function kz(t){return yz(t.context)}function Az(t){Qe(!1)}function Rz(t){let{basename:e="/",children:n=null,location:r,navigationType:i=en.Pop,navigator:s,static:o=!1}=t;yf()&&Qe(!1);let a=e.replace(/^\/*/,"/"),l=H.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof r=="string"&&(r=As(r));let{pathname:c="/",search:u="",hash:d="",state:h=null,key:f="default"}=r,p=H.useMemo(()=>{let y=mf(c,a);return y==null?null:{pathname:y,search:u,hash:d,state:h,key:f}},[a,c,u,d,h,f]);return p==null?null:H.createElement(gf.Provider,{value:l},H.createElement(vy.Provider,{children:n,value:{location:p,navigationType:i}}))}function Nz(t){let{children:e,location:n}=t,r=H.useContext(AS),i=r&&!e?r.router.routes:Kw(e);return vz(i,n)}var IC;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(IC||(IC={}));new Promise(()=>{});function Kw(t,e){e===void 0&&(e=[]);let n=[];return H.Children.forEach(t,(r,i)=>{if(!H.isValidElement(r))return;if(r.type===H.Fragment){n.push.apply(n,Kw(r.props.children,e));return}r.type!==Az&&Qe(!1),!r.props.index||!r.props.children||Qe(!1);let s=[...e,i],o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,hasErrorBoundary:r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle};r.props.children&&(o.children=Kw(r.props.children,s)),n.push(o)}),n}function $D(t){return t.map(e=>{let n=Ym({},e);return n.hasErrorBoundary==null&&(n.hasErrorBoundary=n.errorElement!=null),n.children&&(n.children=$D(n.children)),n})}/**
 * React Router DOM v6.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jm(){return Jm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jm.apply(this,arguments)}function Pz(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Dz(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Oz(t,e){return t.button===0&&(!e||e==="_self")&&!Dz(t)}const Lz=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function Mz(t,e){return Q4({basename:e==null?void 0:e.basename,history:g4({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||$z(),routes:$D(t)}).initialize()}function $z(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=Jm({},e,{errors:Fz(e.errors)})),e}function Fz(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new kS(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){let s=new Error(i.message);s.stack="",n[r]=s}else n[r]=i;return n}const Uz=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",jz=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ps=H.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u}=e,d=Pz(e,Lz),{basename:h}=H.useContext(gf),f,p=!1;if(typeof c=="string"&&jz.test(c)&&(f=c,Uz)){let g=new URL(window.location.href),_=c.startsWith("//")?new URL(g.protocol+c):new URL(c),S=mf(_.pathname,h);_.origin===g.origin&&S!=null?c=S+_.search+_.hash:p=!0}let y=mz(c,{relative:i}),w=Vz(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i});function m(g){r&&r(g),g.defaultPrevented||w(g)}return H.createElement("a",Jm({},d,{href:f||y,onClick:p||s?r:m,ref:n,target:l}))});var CC;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmitImpl="useSubmitImpl",t.UseFetcher="useFetcher"})(CC||(CC={}));var kC;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(kC||(kC={}));function Vz(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o}=e===void 0?{}:e,a=Rs(),l=_y(),c=MD(t,{relative:o});return H.useCallback(u=>{if(Oz(u,n)){u.preventDefault();let d=r!==void 0?r:Es(l)===Es(c);a(t,{replace:d,state:i,preventScrollReset:s,relative:o})}},[l,a,c,r,i,n,t,s,o])}function Bz(t){const e=new Error(t);if(e.stack===void 0)try{throw e}catch{}return e}var zz=Bz,Ke=zz;function Wz(t){return!!t&&typeof t.then=="function"}var Ct=Wz;function Hz(t,e){if(t!=null)return t;throw Ke(e??"Got unexpected null or undefined")}var Lt=Hz;function ze(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class wy{getValue(){throw Ke("BaseLoadable")}toPromise(){throw Ke("BaseLoadable")}valueMaybe(){throw Ke("BaseLoadable")}valueOrThrow(){throw Ke(`Loadable expected value, but in "${this.state}" state`)}promiseMaybe(){throw Ke("BaseLoadable")}promiseOrThrow(){throw Ke(`Loadable expected promise, but in "${this.state}" state`)}errorMaybe(){throw Ke("BaseLoadable")}errorOrThrow(){throw Ke(`Loadable expected error, but in "${this.state}" state`)}is(e){return e.state===this.state&&e.contents===this.contents}map(e){throw Ke("BaseLoadable")}}class Gz extends wy{constructor(e){super(),ze(this,"state","hasValue"),ze(this,"contents",void 0),this.contents=e}getValue(){return this.contents}toPromise(){return Promise.resolve(this.contents)}valueMaybe(){return this.contents}valueOrThrow(){return this.contents}promiseMaybe(){}errorMaybe(){}map(e){try{const n=e(this.contents);return Ct(n)?Ha(n):Pc(n)?n:vf(n)}catch(n){return Ct(n)?Ha(n.next(()=>this.map(e))):by(n)}}}class qz extends wy{constructor(e){super(),ze(this,"state","hasError"),ze(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return Promise.reject(this.contents)}valueMaybe(){}promiseMaybe(){}errorMaybe(){return this.contents}errorOrThrow(){return this.contents}map(e){return this}}class FD extends wy{constructor(e){super(),ze(this,"state","loading"),ze(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return this.contents}valueMaybe(){}promiseMaybe(){return this.contents}promiseOrThrow(){return this.contents}errorMaybe(){}map(e){return Ha(this.contents.then(n=>{const r=e(n);if(Pc(r)){const i=r;switch(i.state){case"hasValue":return i.contents;case"hasError":throw i.contents;case"loading":return i.contents}}return r}).catch(n=>{if(Ct(n))return n.then(()=>this.map(e).contents);throw n}))}}function vf(t){return Object.freeze(new Gz(t))}function by(t){return Object.freeze(new qz(t))}function Ha(t){return Object.freeze(new FD(t))}function UD(){return Object.freeze(new FD(new Promise(()=>{})))}function Kz(t){return t.every(e=>e.state==="hasValue")?vf(t.map(e=>e.contents)):t.some(e=>e.state==="hasError")?by(Lt(t.find(e=>e.state==="hasError"),"Invalid loadable passed to loadableAll").contents):Ha(Promise.all(t.map(e=>e.contents)))}function jD(t){const n=(Array.isArray(t)?t:Object.getOwnPropertyNames(t).map(i=>t[i])).map(i=>Pc(i)?i:Ct(i)?Ha(i):vf(i)),r=Kz(n);return Array.isArray(t)?r:r.map(i=>Object.getOwnPropertyNames(t).reduce((s,o,a)=>({...s,[o]:i[a]}),{}))}function Pc(t){return t instanceof wy}const Qz={of:t=>Ct(t)?Ha(t):Pc(t)?t:vf(t),error:t=>by(t),loading:()=>UD(),all:jD,isLoadable:Pc};var gl={loadableWithValue:vf,loadableWithError:by,loadableWithPromise:Ha,loadableLoading:UD,loadableAll:jD,isLoadable:Pc,RecoilLoadable:Qz},Yz=gl.loadableWithValue,Xz=gl.loadableWithError,Jz=gl.loadableWithPromise,Zz=gl.loadableLoading,e5=gl.loadableAll,t5=gl.isLoadable,n5=gl.RecoilLoadable,_f=Object.freeze({__proto__:null,loadableWithValue:Yz,loadableWithError:Xz,loadableWithPromise:Jz,loadableLoading:Zz,loadableAll:e5,isLoadable:t5,RecoilLoadable:n5});const Qw={RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED:!0,RECOIL_GKS_ENABLED:new Set(["recoil_hamt_2020","recoil_sync_external_store","recoil_suppress_rerender_in_callback","recoil_memory_managament_2020"])};function r5(t,e){var n,r;const i=(n=process.env[t])===null||n===void 0||(r=n.toLowerCase())===null||r===void 0?void 0:r.trim();if(i==null||i==="")return;if(!["true","false"].includes(i))throw Ke(`({}).${t} value must be 'true', 'false', or empty: ${i}`);e(i==="true")}function i5(t,e){var n;const r=(n=process.env[t])===null||n===void 0?void 0:n.trim();r==null||r===""||e(r.split(/\s*,\s*|\s+/))}function s5(){var t;typeof process>"u"||((t=process)===null||t===void 0?void 0:t.env)!=null&&(r5("RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED",e=>{Qw.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED=e}),i5("RECOIL_GKS_ENABLED",e=>{e.forEach(n=>{Qw.RECOIL_GKS_ENABLED.add(n)})}))}s5();var fu=Qw;function Sy(t){return fu.RECOIL_GKS_ENABLED.has(t)}Sy.setPass=t=>{fu.RECOIL_GKS_ENABLED.add(t)};Sy.setFail=t=>{fu.RECOIL_GKS_ENABLED.delete(t)};Sy.clear=()=>{fu.RECOIL_GKS_ENABLED.clear()};var _t=Sy;function o5(t,e,{error:n}={}){return null}var a5=o5,PS=a5,n0,r0,i0;const l5=(n0=Pe.createMutableSource)!==null&&n0!==void 0?n0:Pe.unstable_createMutableSource,VD=(r0=Pe.useMutableSource)!==null&&r0!==void 0?r0:Pe.unstable_useMutableSource,BD=(i0=Pe.useSyncExternalStore)!==null&&i0!==void 0?i0:Pe.unstable_useSyncExternalStore;function c5(){var t;const{ReactCurrentDispatcher:e,ReactCurrentOwner:n}=Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;return((t=e==null?void 0:e.current)!==null&&t!==void 0?t:n.currentDispatcher).useSyncExternalStore!=null}function u5(){return _t("recoil_transition_support")?{mode:"TRANSITION_SUPPORT",early:!0,concurrent:!0}:_t("recoil_sync_external_store")&&BD!=null?{mode:"SYNC_EXTERNAL_STORE",early:!0,concurrent:!1}:_t("recoil_mutable_source")&&VD!=null&&typeof window<"u"&&!window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE?_t("recoil_suppress_rerender_in_callback")?{mode:"MUTABLE_SOURCE",early:!0,concurrent:!0}:{mode:"MUTABLE_SOURCE",early:!1,concurrent:!1}:_t("recoil_suppress_rerender_in_callback")?{mode:"LEGACY",early:!0,concurrent:!1}:{mode:"LEGACY",early:!1,concurrent:!1}}function d5(){return!1}var wf={createMutableSource:l5,useMutableSource:VD,useSyncExternalStore:BD,currentRendererSupportsUseSyncExternalStore:c5,reactMode:u5,isFastRefreshEnabled:d5};class DS{constructor(e){ze(this,"key",void 0),this.key=e}toJSON(){return{key:this.key}}}class zD extends DS{}class WD extends DS{}function h5(t){return t instanceof zD||t instanceof WD}var Ey={AbstractRecoilValue:DS,RecoilState:zD,RecoilValueReadOnly:WD,isRecoilValue:h5},f5=Ey.AbstractRecoilValue,p5=Ey.RecoilState,m5=Ey.RecoilValueReadOnly,g5=Ey.isRecoilValue,Dc=Object.freeze({__proto__:null,AbstractRecoilValue:f5,RecoilState:p5,RecoilValueReadOnly:m5,isRecoilValue:g5});function y5(t,e){return function*(){let n=0;for(const r of t)yield e(r,n++)}()}var xy=y5;class HD{}const v5=new HD,Ga=new Map,OS=new Map;function _5(t){return xy(t,e=>Lt(OS.get(e)))}function w5(t){if(Ga.has(t)){const e=`Duplicate atom key "${t}". This is a FATAL ERROR in
      production. But it is safe to ignore this warning if it occurred because of
      hot module replacement.`;console.warn(e)}}function b5(t){fu.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED&&w5(t.key),Ga.set(t.key,t);const e=t.set==null?new Dc.RecoilValueReadOnly(t.key):new Dc.RecoilState(t.key);return OS.set(t.key,e),e}class GD extends Error{}function S5(t){const e=Ga.get(t);if(e==null)throw new GD(`Missing definition for RecoilValue: "${t}""`);return e}function E5(t){return Ga.get(t)}const Zm=new Map;function x5(t){var e;if(!_t("recoil_memory_managament_2020"))return;const n=Ga.get(t);if(n!=null&&(e=n.shouldDeleteConfigOnRelease)!==null&&e!==void 0&&e.call(n)){var r;Ga.delete(t),(r=qD(t))===null||r===void 0||r(),Zm.delete(t)}}function T5(t,e){_t("recoil_memory_managament_2020")&&(e===void 0?Zm.delete(t):Zm.set(t,e))}function qD(t){return Zm.get(t)}var Tr={nodes:Ga,recoilValues:OS,registerNode:b5,getNode:S5,getNodeMaybe:E5,deleteNodeConfigIfPossible:x5,setConfigDeletionHandler:T5,getConfigDeletionHandler:qD,recoilValuesForKeys:_5,NodeMissingError:GD,DefaultValue:HD,DEFAULT_VALUE:v5};function I5(t,e){e()}var C5={enqueueExecution:I5};function k5(t,e){return e={exports:{}},t(e,e.exports),e.exports}var A5=k5(function(t){var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},n={},r=5,i=Math.pow(2,r),s=i-1,o=i/2,a=i/4,l={},c=function(V){return function(){return V}},u=n.hash=function(W){var V=typeof W>"u"?"undefined":e(W);if(V==="number")return W;V!=="string"&&(W+="");for(var Z=0,ie=0,ue=W.length;ie<ue;++ie){var he=W.charCodeAt(ie);Z=(Z<<5)-Z+he|0}return Z},d=function(V){return V-=V>>1&1431655765,V=(V&858993459)+(V>>2&858993459),V=V+(V>>4)&252645135,V+=V>>8,V+=V>>16,V&127},h=function(V,Z){return Z>>>V&s},f=function(V){return 1<<V},p=function(V,Z){return d(V&Z-1)},y=function(V,Z,ie,ue){var he=ue;if(!V){var Oe=ue.length;he=new Array(Oe);for(var Ie=0;Ie<Oe;++Ie)he[Ie]=ue[Ie]}return he[Z]=ie,he},w=function(V,Z,ie){var ue=ie.length-1,he=0,Oe=0,Ie=ie;if(V)he=Oe=Z;else for(Ie=new Array(ue);he<Z;)Ie[Oe++]=ie[he++];for(++he;he<=ue;)Ie[Oe++]=ie[he++];return V&&(Ie.length=ue),Ie},m=function(V,Z,ie,ue){var he=ue.length;if(V){for(var Oe=he;Oe>=Z;)ue[Oe--]=ue[Oe];return ue[Z]=ie,ue}for(var Ie=0,Ce=0,$e=new Array(he+1);Ie<Z;)$e[Ce++]=ue[Ie++];for($e[Z]=ie;Ie<he;)$e[++Ce]=ue[Ie++];return $e},g=1,_=2,S=3,I=4,E={__hamt_isEmpty:!0},D=function(V){return V===E||V&&V.__hamt_isEmpty},b=function(V,Z,ie,ue){return{type:g,edit:V,hash:Z,key:ie,value:ue,_modify:U}},x=function(V,Z,ie){return{type:_,edit:V,hash:Z,children:ie,_modify:$}},O=function(V,Z,ie){return{type:S,edit:V,mask:Z,children:ie,_modify:z}},C=function(V,Z,ie){return{type:I,edit:V,size:Z,children:ie,_modify:J}},k=function(V){return V===E||V.type===g||V.type===_},A=function(V,Z,ie,ue,he){for(var Oe=[],Ie=ue,Ce=0,$e=0;Ie;++$e)Ie&1&&(Oe[$e]=he[Ce++]),Ie>>>=1;return Oe[Z]=ie,C(V,Ce+1,Oe)},N=function(V,Z,ie,ue){for(var he=new Array(Z-1),Oe=0,Ie=0,Ce=0,$e=ue.length;Ce<$e;++Ce)if(Ce!==ie){var nt=ue[Ce];nt&&!D(nt)&&(he[Oe++]=nt,Ie|=1<<Ce)}return O(V,Ie,he)},B=function W(V,Z,ie,ue,he,Oe){if(ie===he)return x(V,ie,[Oe,ue]);var Ie=h(Z,ie),Ce=h(Z,he);return O(V,f(Ie)|f(Ce),Ie===Ce?[W(V,Z+r,ie,ue,he,Oe)]:Ie<Ce?[ue,Oe]:[Oe,ue])},R=function(V,Z,ie,ue,he,Oe,Ie,Ce){for(var $e=he.length,nt=0;nt<$e;++nt){var rt=he[nt];if(ie(Ie,rt.key)){var Ze=rt.value,yt=Oe(Ze);return yt===Ze?he:yt===l?(--Ce.value,w(V,nt,he)):y(V,nt,b(Z,ue,Ie,yt),he)}}var jn=Oe();return jn===l?he:(++Ce.value,y(V,$e,b(Z,ue,Ie,jn),he))},T=function(V,Z){return V===Z.edit},U=function(V,Z,ie,ue,he,Oe,Ie){if(Z(Oe,this.key)){var Ce=ue(this.value);return Ce===this.value?this:Ce===l?(--Ie.value,E):T(V,this)?(this.value=Ce,this):b(V,he,Oe,Ce)}var $e=ue();return $e===l?this:(++Ie.value,B(V,ie,this.hash,this,he,b(V,he,Oe,$e)))},$=function(V,Z,ie,ue,he,Oe,Ie){if(he===this.hash){var Ce=T(V,this),$e=R(Ce,V,Z,this.hash,this.children,ue,Oe,Ie);return $e===this.children?this:$e.length>1?x(V,this.hash,$e):$e[0]}var nt=ue();return nt===l?this:(++Ie.value,B(V,ie,this.hash,this,he,b(V,he,Oe,nt)))},z=function(V,Z,ie,ue,he,Oe,Ie){var Ce=this.mask,$e=this.children,nt=h(ie,he),rt=f(nt),Ze=p(Ce,rt),yt=Ce&rt,jn=yt?$e[Ze]:E,bi=jn._modify(V,Z,ie+r,ue,he,Oe,Ie);if(jn===bi)return this;var Dl=T(V,this),ra=Ce,Yn=void 0;if(yt&&D(bi)){if(ra&=~rt,!ra)return E;if($e.length<=2&&k($e[Ze^1]))return $e[Ze^1];Yn=w(Dl,Ze,$e)}else if(!yt&&!D(bi)){if($e.length>=o)return A(V,nt,bi,Ce,$e);ra|=rt,Yn=m(Dl,Ze,bi,$e)}else Yn=y(Dl,Ze,bi,$e);return Dl?(this.mask=ra,this.children=Yn,this):O(V,ra,Yn)},J=function(V,Z,ie,ue,he,Oe,Ie){var Ce=this.size,$e=this.children,nt=h(ie,he),rt=$e[nt],Ze=(rt||E)._modify(V,Z,ie+r,ue,he,Oe,Ie);if(rt===Ze)return this;var yt=T(V,this),jn=void 0;if(D(rt)&&!D(Ze))++Ce,jn=y(yt,nt,Ze,$e);else if(!D(rt)&&D(Ze)){if(--Ce,Ce<=a)return N(V,Ce,nt,$e);jn=y(yt,nt,E,$e)}else jn=y(yt,nt,Ze,$e);return yt?(this.size=Ce,this.children=jn,this):C(V,Ce,jn)};E._modify=function(W,V,Z,ie,ue,he,Oe){var Ie=ie();return Ie===l?E:(++Oe.value,b(W,ue,he,Ie))};function P(W,V,Z,ie,ue){this._editable=W,this._edit=V,this._config=Z,this._root=ie,this._size=ue}P.prototype.setTree=function(W,V){return this._editable?(this._root=W,this._size=V,this):W===this._root?this:new P(this._editable,this._edit,this._config,W,V)};var F=n.tryGetHash=function(W,V,Z,ie){for(var ue=ie._root,he=0,Oe=ie._config.keyEq;;)switch(ue.type){case g:return Oe(Z,ue.key)?ue.value:W;case _:{if(V===ue.hash)for(var Ie=ue.children,Ce=0,$e=Ie.length;Ce<$e;++Ce){var nt=Ie[Ce];if(Oe(Z,nt.key))return nt.value}return W}case S:{var rt=h(he,V),Ze=f(rt);if(ue.mask&Ze){ue=ue.children[p(ue.mask,Ze)],he+=r;break}return W}case I:{if(ue=ue.children[h(he,V)],ue){he+=r;break}return W}default:return W}};P.prototype.tryGetHash=function(W,V,Z){return F(W,V,Z,this)};var L=n.tryGet=function(W,V,Z){return F(W,Z._config.hash(V),V,Z)};P.prototype.tryGet=function(W,V){return L(W,V,this)};var j=n.getHash=function(W,V,Z){return F(void 0,W,V,Z)};P.prototype.getHash=function(W,V){return j(W,V,this)},n.get=function(W,V){return F(void 0,V._config.hash(W),W,V)},P.prototype.get=function(W,V){return L(V,W,this)};var M=n.has=function(W,V,Z){return F(l,W,V,Z)!==l};P.prototype.hasHash=function(W,V){return M(W,V,this)};var te=n.has=function(W,V){return M(V._config.hash(W),W,V)};P.prototype.has=function(W){return te(W,this)};var G=function(V,Z){return V===Z};n.make=function(W){return new P(0,0,{keyEq:W&&W.keyEq||G,hash:W&&W.hash||u},E,0)},n.empty=n.make();var ee=n.isEmpty=function(W){return W&&!!D(W._root)};P.prototype.isEmpty=function(){return ee(this)};var de=n.modifyHash=function(W,V,Z,ie){var ue={value:ie._size},he=ie._root._modify(ie._editable?ie._edit:NaN,ie._config.keyEq,0,W,V,Z,ue);return ie.setTree(he,ue.value)};P.prototype.modifyHash=function(W,V,Z){return de(Z,W,V,this)};var ye=n.modify=function(W,V,Z){return de(W,Z._config.hash(V),V,Z)};P.prototype.modify=function(W,V){return ye(V,W,this)};var oe=n.setHash=function(W,V,Z,ie){return de(c(Z),W,V,ie)};P.prototype.setHash=function(W,V,Z){return oe(W,V,Z,this)};var De=n.set=function(W,V,Z){return oe(Z._config.hash(W),W,V,Z)};P.prototype.set=function(W,V){return De(W,V,this)};var He=c(l),Ee=n.removeHash=function(W,V,Z){return de(He,W,V,Z)};P.prototype.removeHash=P.prototype.deleteHash=function(W,V){return Ee(W,V,this)};var Me=n.remove=function(W,V){return Ee(V._config.hash(W),W,V)};P.prototype.remove=P.prototype.delete=function(W){return Me(W,this)};var ve=n.beginMutation=function(W){return new P(W._editable+1,W._edit+1,W._config,W._root,W._size)};P.prototype.beginMutation=function(){return ve(this)};var Le=n.endMutation=function(W){return W._editable=W._editable&&W._editable-1,W};P.prototype.endMutation=function(){return Le(this)};var ft=n.mutate=function(W,V){var Z=ve(V);return W(Z),Le(Z)};P.prototype.mutate=function(W){return ft(W,this)};var qe=function(V){return V&&ut(V[0],V[1],V[2],V[3],V[4])},ut=function(V,Z,ie,ue,he){for(;ie<V;){var Oe=Z[ie++];if(Oe&&!D(Oe))return Pt(Oe,ue,[V,Z,ie,ue,he])}return qe(he)},Pt=function(V,Z,ie){switch(V.type){case g:return{value:Z(V),rest:ie};case _:case I:case S:var ue=V.children;return ut(ue.length,ue,0,Z,ie);default:return qe(ie)}},et={done:!0};function pe(W){this.v=W}pe.prototype.next=function(){if(!this.v)return et;var W=this.v;return this.v=qe(W.rest),W},pe.prototype[Symbol.iterator]=function(){return this};var Ge=function(V,Z){return new pe(Pt(V._root,Z))},K=function(V){return[V.key,V.value]},Y=n.entries=function(W){return Ge(W,K)};P.prototype.entries=P.prototype[Symbol.iterator]=function(){return Y(this)};var X=function(V){return V.key},be=n.keys=function(W){return Ge(W,X)};P.prototype.keys=function(){return be(this)};var _e=function(V){return V.value},Re=n.values=P.prototype.values=function(W){return Ge(W,_e)};P.prototype.values=function(){return Re(this)};var Te=n.fold=function(W,V,Z){var ie=Z._root;if(ie.type===g)return W(V,ie.value,ie.key);for(var ue=[ie.children],he=void 0;he=ue.pop();)for(var Oe=0,Ie=he.length;Oe<Ie;){var Ce=he[Oe++];Ce&&Ce.type&&(Ce.type===g?V=W(V,Ce.value,Ce.key):ue.push(Ce.children))}return V};P.prototype.fold=function(W,V){return Te(W,V,this)};var Fe=n.forEach=function(W,V){return Te(function(Z,ie,ue){return W(ie,ue,V)},null,V)};P.prototype.forEach=function(W){return Fe(W,this)};var we=n.count=function(W){return W._size};P.prototype.count=function(){return we(this)},Object.defineProperty(P.prototype,"size",{get:P.prototype.count}),t.exports?t.exports=n:(void 0).hamt=n});class R5{constructor(e){ze(this,"_map",void 0),this._map=new Map(e==null?void 0:e.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(e){return this._map.get(e)}has(e){return this._map.has(e)}set(e,n){return this._map.set(e,n),this}delete(e){return this._map.delete(e),this}clone(){return MS(this)}toMap(){return new Map(this._map)}}class LS{constructor(e){if(ze(this,"_hamt",A5.empty.beginMutation()),e instanceof LS){const n=e._hamt.endMutation();e._hamt=n.beginMutation(),this._hamt=n.beginMutation()}else if(e)for(const[n,r]of e.entries())this._hamt.set(n,r)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(e){return this._hamt.get(e)}has(e){return this._hamt.has(e)}set(e,n){return this._hamt.set(e,n),this}delete(e){return this._hamt.delete(e),this}clone(){return MS(this)}toMap(){return new Map(this._hamt)}}function MS(t){return _t("recoil_hamt_2020")?new LS(t):new R5(t)}var N5={persistentMap:MS},P5=N5.persistentMap,D5=Object.freeze({__proto__:null,persistentMap:P5});function O5(t,...e){const n=new Set;e:for(const r of t){for(const i of e)if(i.has(r))continue e;n.add(r)}return n}var $d=O5;function L5(t,e){const n=new Map;return t.forEach((r,i)=>{n.set(i,e(r,i))}),n}var eg=L5;function M5(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}}function $5(t){return{nodeDeps:eg(t.nodeDeps,e=>new Set(e)),nodeToNodeSubscriptions:eg(t.nodeToNodeSubscriptions,e=>new Set(e))}}function s0(t,e,n,r){const{nodeDeps:i,nodeToNodeSubscriptions:s}=n,o=i.get(t);if(o&&r&&o!==r.nodeDeps.get(t))return;i.set(t,e);const a=o==null?e:$d(e,o);for(const l of a)s.has(l)||s.set(l,new Set),Lt(s.get(l)).add(t);if(o){const l=$d(o,e);for(const c of l){if(!s.has(c))return;const u=Lt(s.get(c));u.delete(t),u.size===0&&s.delete(c)}}}function F5(t,e,n,r){var i,s,o,a;const l=n.getState();r===l.currentTree.version||r===((i=l.nextTree)===null||i===void 0?void 0:i.version)||((s=l.previousTree)===null||s===void 0||s.version);const c=n.getGraph(r);if(s0(t,e,c),r===((o=l.previousTree)===null||o===void 0?void 0:o.version)){const d=n.getGraph(l.currentTree.version);s0(t,e,d,c)}if(r===((a=l.previousTree)===null||a===void 0?void 0:a.version)||r===l.currentTree.version){var u;const d=(u=l.nextTree)===null||u===void 0?void 0:u.version;if(d!==void 0){const h=n.getGraph(d);s0(t,e,h,c)}}}var bf={cloneGraph:$5,graph:M5,saveDepsToStore:F5};let U5=0;const j5=()=>U5++;let V5=0;const B5=()=>V5++;let z5=0;const W5=()=>z5++;var Ty={getNextTreeStateVersion:j5,getNextStoreID:B5,getNextComponentID:W5};const{persistentMap:AC}=D5,{graph:H5}=bf,{getNextTreeStateVersion:KD}=Ty;function QD(){const t=KD();return{version:t,stateID:t,transactionMetadata:{},dirtyAtoms:new Set,atomValues:AC(),nonvalidatedAtoms:AC()}}function G5(){const t=QD();return{currentTree:t,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(t.version,H5()),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}var YD={makeEmptyTreeState:QD,makeEmptyStoreState:G5,getNextTreeStateVersion:KD};class XD{}function q5(){return new XD}var Iy={RetentionZone:XD,retentionZone:q5};function K5(t,e){const n=new Set(t);return n.add(e),n}function Q5(t,e){const n=new Set(t);return n.delete(e),n}function Y5(t,e,n){const r=new Map(t);return r.set(e,n),r}function X5(t,e,n){const r=new Map(t);return r.set(e,n(r.get(e))),r}function J5(t,e){const n=new Map(t);return n.delete(e),n}function Z5(t,e){const n=new Map(t);return e.forEach(r=>n.delete(r)),n}var JD={setByAddingToSet:K5,setByDeletingFromSet:Q5,mapBySettingInMap:Y5,mapByUpdatingInMap:X5,mapByDeletingFromMap:J5,mapByDeletingMultipleFromMap:Z5};function*e6(t,e){let n=0;for(const r of t)e(r,n++)&&(yield r)}var $S=e6;function t6(t,e){return new Proxy(t,{get:(r,i)=>(!(i in r)&&i in e&&(r[i]=e[i]()),r[i]),ownKeys:r=>Object.keys(r)})}var ZD=t6;const{getNode:Sf,getNodeMaybe:n6,recoilValuesForKeys:RC}=Tr,{RetentionZone:NC}=Iy,{setByAddingToSet:r6}=JD,i6=Object.freeze(new Set);class s6 extends Error{}function o6(t,e,n){if(!_t("recoil_memory_managament_2020"))return()=>{};const{nodesRetainedByZone:r}=t.getState().retention;function i(s){let o=r.get(s);o||r.set(s,o=new Set),o.add(e)}if(n instanceof NC)i(n);else if(Array.isArray(n))for(const s of n)i(s);return()=>{if(!_t("recoil_memory_managament_2020"))return;const{retention:s}=t.getState();function o(a){const l=s.nodesRetainedByZone.get(a);l==null||l.delete(e),l&&l.size===0&&s.nodesRetainedByZone.delete(a)}if(n instanceof NC)o(n);else if(Array.isArray(n))for(const a of n)o(a)}}function FS(t,e,n,r){const i=t.getState();if(i.nodeCleanupFunctions.has(n))return;const s=Sf(n),o=o6(t,n,s.retainedBy),a=s.init(t,e,r);i.nodeCleanupFunctions.set(n,()=>{a(),o()})}function a6(t,e,n){FS(t,t.getState().currentTree,e,n)}function l6(t,e){var n;const r=t.getState();(n=r.nodeCleanupFunctions.get(e))===null||n===void 0||n(),r.nodeCleanupFunctions.delete(e)}function c6(t,e,n){return FS(t,e,n,"get"),Sf(n).get(t,e)}function eO(t,e,n){return Sf(n).peek(t,e)}function u6(t,e,n){var r;const i=n6(e);return i==null||(r=i.invalidate)===null||r===void 0||r.call(i,t),{...t,atomValues:t.atomValues.clone().delete(e),nonvalidatedAtoms:t.nonvalidatedAtoms.clone().set(e,n),dirtyAtoms:r6(t.dirtyAtoms,e)}}function d6(t,e,n,r){const i=Sf(n);if(i.set==null)throw new s6(`Attempt to set read-only RecoilValue: ${n}`);const s=i.set;return FS(t,e,n,"set"),s(t,e,r)}function h6(t,e,n){const r=t.getState(),i=t.getGraph(e.version),s=Sf(n).nodeType;return ZD({type:s},{loadable:()=>eO(t,e,n),isActive:()=>r.knownAtoms.has(n)||r.knownSelectors.has(n),isSet:()=>s==="selector"?!1:e.atomValues.has(n),isModified:()=>e.dirtyAtoms.has(n),deps:()=>{var o;return RC((o=i.nodeDeps.get(n))!==null&&o!==void 0?o:[])},subscribers:()=>{var o,a;return{nodes:RC($S(tO(t,e,new Set([n])),l=>l!==n)),components:xy((o=(a=r.nodeToComponentSubscriptions.get(n))===null||a===void 0?void 0:a.values())!==null&&o!==void 0?o:[],([l])=>({name:l}))}}})}function tO(t,e,n){const r=new Set,i=Array.from(n),s=t.getGraph(e.version);for(let a=i.pop();a;a=i.pop()){var o;r.add(a);const l=(o=s.nodeToNodeSubscriptions.get(a))!==null&&o!==void 0?o:i6;for(const c of l)r.has(c)||i.push(c)}return r}var Go={getNodeLoadable:c6,peekNodeLoadable:eO,setNodeValue:d6,initializeNode:a6,cleanUpNode:l6,setUnvalidatedAtomValue_DEPRECATED:u6,peekNodeInfo:h6,getDownstreamNodes:tO};let nO=null;function f6(t){nO=t}function p6(){var t;(t=nO)===null||t===void 0||t()}var rO={setInvalidateMemoizedSnapshot:f6,invalidateMemoizedSnapshot:p6};const{getDownstreamNodes:m6,getNodeLoadable:iO,setNodeValue:g6}=Go,{getNextComponentID:y6}=Ty,{getNode:v6,getNodeMaybe:sO}=Tr,{DefaultValue:US}=Tr,{reactMode:_6}=wf,{AbstractRecoilValue:w6,RecoilState:b6,RecoilValueReadOnly:S6,isRecoilValue:E6}=Dc,{invalidateMemoizedSnapshot:x6}=rO;function T6(t,{key:e},n=t.getState().currentTree){var r,i;const s=t.getState();n.version===s.currentTree.version||n.version===((r=s.nextTree)===null||r===void 0?void 0:r.version)||(n.version,(i=s.previousTree)===null||i===void 0||i.version);const o=iO(t,n,e);return o.state==="loading"&&o.contents.catch(()=>{}),o}function I6(t,e){const n=t.clone();return e.forEach((r,i)=>{r.state==="hasValue"&&r.contents instanceof US?n.delete(i):n.set(i,r)}),n}function C6(t,e,{key:n},r){if(typeof r=="function"){const i=iO(t,e,n);if(i.state==="loading"){const s=`Tried to set atom or selector "${n}" using an updater function while the current state is pending, this is not currently supported.`;throw Ke(s)}else if(i.state==="hasError")throw i.contents;return r(i.contents)}else return r}function k6(t,e,n){if(n.type==="set"){const{recoilValue:i,valueOrUpdater:s}=n,o=C6(t,e,i,s),a=g6(t,e,i.key,o);for(const[l,c]of a.entries())Yw(e,l,c)}else if(n.type==="setLoadable"){const{recoilValue:{key:i},loadable:s}=n;Yw(e,i,s)}else if(n.type==="markModified"){const{recoilValue:{key:i}}=n;e.dirtyAtoms.add(i)}else if(n.type==="setUnvalidated"){var r;const{recoilValue:{key:i},unvalidatedValue:s}=n,o=sO(i);o==null||(r=o.invalidate)===null||r===void 0||r.call(o,e),e.atomValues.delete(i),e.nonvalidatedAtoms.set(i,s),e.dirtyAtoms.add(i)}else PS(`Unknown action ${n.type}`)}function Yw(t,e,n){n.state==="hasValue"&&n.contents instanceof US?t.atomValues.delete(e):t.atomValues.set(e,n),t.dirtyAtoms.add(e),t.nonvalidatedAtoms.delete(e)}function oO(t,e){t.replaceState(n=>{const r=aO(n);for(const i of e)k6(t,r,i);return lO(t,r),x6(),r})}function Cy(t,e){if(Fd.length){const n=Fd[Fd.length-1];let r=n.get(t);r||n.set(t,r=[]),r.push(e)}else oO(t,[e])}const Fd=[];function A6(){const t=new Map;return Fd.push(t),()=>{for(const[e,n]of t)oO(e,n);Fd.pop()}}function aO(t){return{...t,atomValues:t.atomValues.clone(),nonvalidatedAtoms:t.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(t.dirtyAtoms)}}function lO(t,e){const n=m6(t,e,e.dirtyAtoms);for(const s of n){var r,i;(r=sO(s))===null||r===void 0||(i=r.invalidate)===null||i===void 0||i.call(r,e)}}function cO(t,e,n){Cy(t,{type:"set",recoilValue:e,valueOrUpdater:n})}function R6(t,e,n){if(n instanceof US)return cO(t,e,n);Cy(t,{type:"setLoadable",recoilValue:e,loadable:n})}function N6(t,e){Cy(t,{type:"markModified",recoilValue:e})}function P6(t,e,n){Cy(t,{type:"setUnvalidated",recoilValue:e,unvalidatedValue:n})}function D6(t,{key:e},n,r=null){const i=y6(),s=t.getState();s.nodeToComponentSubscriptions.has(e)||s.nodeToComponentSubscriptions.set(e,new Map),Lt(s.nodeToComponentSubscriptions.get(e)).set(i,[r??"<not captured>",n]);const o=_6();if(o.early&&(o.mode==="LEGACY"||o.mode==="MUTABLE_SOURCE")){const a=t.getState().nextTree;a&&a.dirtyAtoms.has(e)&&n(a)}return{release:()=>{const a=t.getState(),l=a.nodeToComponentSubscriptions.get(e);l===void 0||!l.has(i)||(l.delete(i),l.size===0&&a.nodeToComponentSubscriptions.delete(e))}}}function O6(t,e){var n;const{currentTree:r}=t.getState(),i=v6(e.key);(n=i.clearCache)===null||n===void 0||n.call(i,t,r)}var Xi={RecoilValueReadOnly:S6,AbstractRecoilValue:w6,RecoilState:b6,getRecoilValueAsLoadable:T6,setRecoilValue:cO,setRecoilValueLoadable:R6,markRecoilValueModified:N6,setUnvalidatedRecoilValue:P6,subscribeToRecoilValue:D6,isRecoilValue:E6,applyAtomValueWrites:I6,batchStart:A6,writeLoadableToTreeState:Yw,invalidateDownstreams:lO,copyTreeState:aO,refreshRecoilValue:O6};function L6(t,e,n){const r=t.entries();let i=r.next();for(;!i.done;){const s=i.value;if(e.call(n,s[1],s[0],t))return!0;i=r.next()}return!1}var M6=L6;const{cleanUpNode:$6}=Go,{deleteNodeConfigIfPossible:F6,getNode:uO}=Tr,{RetentionZone:dO}=Iy,U6=12e4,hO=new Set;function fO(t,e){const n=t.getState(),r=n.currentTree;if(n.nextTree)return;const i=new Set;for(const o of e)if(o instanceof dO)for(const a of z6(n,o))i.add(a);else i.add(o);const s=j6(t,i);for(const o of s)B6(t,r,o)}function j6(t,e){const n=t.getState(),r=n.currentTree,i=t.getGraph(r.version),s=new Set,o=new Set;return a(e),s;function a(l){const c=new Set,u=V6(t,r,l,s,o);for(const p of u){var d;if(uO(p).retainedBy==="recoilRoot"){o.add(p);continue}if(((d=n.retention.referenceCounts.get(p))!==null&&d!==void 0?d:0)>0){o.add(p);continue}if(pO(p).some(w=>n.retention.referenceCounts.get(w))){o.add(p);continue}const y=i.nodeToNodeSubscriptions.get(p);if(y&&M6(y,w=>o.has(w))){o.add(p);continue}s.add(p),c.add(p)}const h=new Set;for(const p of c)for(const y of(f=i.nodeDeps.get(p))!==null&&f!==void 0?f:hO){var f;s.has(y)||h.add(y)}h.size&&a(h)}}function V6(t,e,n,r,i){const s=t.getGraph(e.version),o=[],a=new Set;for(;n.size>0;)l(Lt(n.values().next().value));return o;function l(c){if(r.has(c)||i.has(c)){n.delete(c);return}if(a.has(c))return;const u=s.nodeToNodeSubscriptions.get(c);if(u)for(const d of u)l(d);a.add(c),n.delete(c),o.push(c)}}function B6(t,e,n){if(!_t("recoil_memory_managament_2020"))return;$6(t,n);const r=t.getState();r.knownAtoms.delete(n),r.knownSelectors.delete(n),r.nodeTransactionSubscriptions.delete(n),r.retention.referenceCounts.delete(n);const i=pO(n);for(const l of i){var s;(s=r.retention.nodesRetainedByZone.get(l))===null||s===void 0||s.delete(n)}e.atomValues.delete(n),e.dirtyAtoms.delete(n),e.nonvalidatedAtoms.delete(n);const o=r.graphsByVersion.get(e.version);if(o){const l=o.nodeDeps.get(n);if(l!==void 0){o.nodeDeps.delete(n);for(const c of l){var a;(a=o.nodeToNodeSubscriptions.get(c))===null||a===void 0||a.delete(n)}}o.nodeToNodeSubscriptions.delete(n)}F6(n)}function z6(t,e){var n;return(n=t.retention.nodesRetainedByZone.get(e))!==null&&n!==void 0?n:hO}function pO(t){const e=uO(t).retainedBy;return e===void 0||e==="components"||e==="recoilRoot"?[]:e instanceof dO?[e]:e}function W6(t,e){const n=t.getState();n.nextTree?n.retention.retainablesToCheckForRelease.add(e):fO(t,new Set([e]))}function H6(t,e,n){var r;if(!_t("recoil_memory_managament_2020"))return;const i=t.getState().retention.referenceCounts,s=((r=i.get(e))!==null&&r!==void 0?r:0)+n;s===0?mO(t,e):i.set(e,s)}function mO(t,e){if(!_t("recoil_memory_managament_2020"))return;t.getState().retention.referenceCounts.delete(e),W6(t,e)}function G6(t){if(!_t("recoil_memory_managament_2020"))return;const e=t.getState();fO(t,e.retention.retainablesToCheckForRelease),e.retention.retainablesToCheckForRelease.clear()}function q6(t){return t===void 0?"recoilRoot":t}var yl={SUSPENSE_TIMEOUT_MS:U6,updateRetainCount:H6,updateRetainCountToZero:mO,releaseScheduledRetainablesNow:G6,retainedByOptionWithDefault:q6};const{unstable_batchedUpdates:K6}=m4;var Q6={unstable_batchedUpdates:K6};const{unstable_batchedUpdates:Y6}=Q6;var X6={unstable_batchedUpdates:Y6};const{batchStart:J6}=Xi,{unstable_batchedUpdates:Z6}=X6;let jS=Z6||(t=>t());const e8=t=>{jS=t},t8=()=>jS,n8=t=>{jS(()=>{let e=()=>{};try{e=J6(),t()}finally{e()}})};var ky={getBatcher:t8,setBatcher:e8,batchUpdates:n8};function*r8(t){for(const e of t)for(const n of e)yield n}var gO=r8;const yO=typeof Window>"u"||typeof window>"u",i8=t=>!yO&&(t===window||t instanceof Window),s8=typeof navigator<"u"&&navigator.product==="ReactNative";var Ay={isSSR:yO,isReactNative:s8,isWindow:i8};function o8(t,e){let n;return(...r)=>{n||(n={});const i=e(...r);return Object.hasOwnProperty.call(n,i)||(n[i]=t(...r)),n[i]}}function a8(t,e){let n,r;return(...i)=>{const s=e(...i);return n===s||(n=s,r=t(...i)),r}}function l8(t,e){let n,r;return[(...o)=>{const a=e(...o);return n===a||(n=a,r=t(...o)),r},()=>{n=null}]}var c8={memoizeWithArgsHash:o8,memoizeOneWithArgsHash:a8,memoizeOneWithArgsHashAndInvalidation:l8};const{batchUpdates:Xw}=ky,{initializeNode:u8,peekNodeInfo:d8}=Go,{graph:h8}=bf,{getNextStoreID:f8}=Ty,{DEFAULT_VALUE:p8,recoilValues:PC,recoilValuesForKeys:DC}=Tr,{AbstractRecoilValue:m8,getRecoilValueAsLoadable:g8,setRecoilValue:OC,setUnvalidatedRecoilValue:y8}=Xi,{updateRetainCount:um}=yl,{setInvalidateMemoizedSnapshot:v8}=rO,{getNextTreeStateVersion:_8,makeEmptyStoreState:w8}=YD,{isSSR:b8}=Ay,{memoizeOneWithArgsHashAndInvalidation:S8}=c8;class Ry{constructor(e,n){ze(this,"_store",void 0),ze(this,"_refCount",1),ze(this,"getLoadable",r=>(this.checkRefCount_INTERNAL(),g8(this._store,r))),ze(this,"getPromise",r=>(this.checkRefCount_INTERNAL(),this.getLoadable(r).toPromise())),ze(this,"getNodes_UNSTABLE",r=>{if(this.checkRefCount_INTERNAL(),(r==null?void 0:r.isModified)===!0){if((r==null?void 0:r.isInitialized)===!1)return[];const o=this._store.getState().currentTree;return DC(o.dirtyAtoms)}const i=this._store.getState().knownAtoms,s=this._store.getState().knownSelectors;return(r==null?void 0:r.isInitialized)==null?PC.values():r.isInitialized===!0?DC(gO([i,s])):$S(PC.values(),({key:o})=>!i.has(o)&&!s.has(o))}),ze(this,"getInfo_UNSTABLE",({key:r})=>(this.checkRefCount_INTERNAL(),d8(this._store,this._store.getState().currentTree,r))),ze(this,"map",r=>{this.checkRefCount_INTERNAL();const i=new Jw(this,Xw);return r(i),i}),ze(this,"asyncMap",async r=>{this.checkRefCount_INTERNAL();const i=new Jw(this,Xw);return i.retain(),await r(i),i.autoRelease_INTERNAL(),i}),this._store={storeID:f8(),parentStoreID:n,getState:()=>e,replaceState:r=>{e.currentTree=r(e.currentTree)},getGraph:r=>{const i=e.graphsByVersion;if(i.has(r))return Lt(i.get(r));const s=h8();return i.set(r,s),s},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw Ke("Cannot subscribe to Snapshots")}};for(const r of this._store.getState().knownAtoms)u8(this._store,r,"get"),um(this._store,r,1);this.autoRelease_INTERNAL()}retain(){this._refCount<=0,this._refCount++;let e=!1;return()=>{e||(e=!0,this._release())}}autoRelease_INTERNAL(){b8||window.setTimeout(()=>this._release(),10)}_release(){if(this._refCount--,this._refCount===0){if(this._store.getState().nodeCleanupFunctions.forEach(e=>e()),this._store.getState().nodeCleanupFunctions.clear(),!_t("recoil_memory_managament_2020"))return}else this._refCount<0}isRetained(){return this._refCount>0}checkRefCount_INTERNAL(){_t("recoil_memory_managament_2020")&&this._refCount<=0}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}getStoreID(){return this.checkRefCount_INTERNAL(),this._store.storeID}}function vO(t,e,n=!1){const r=t.getState(),i=n?_8():e.version;return{currentTree:{version:n?i:e.version,stateID:n?i:e.stateID,transactionMetadata:{...e.transactionMetadata},dirtyAtoms:new Set(e.dirtyAtoms),atomValues:e.atomValues.clone(),nonvalidatedAtoms:e.nonvalidatedAtoms.clone()},commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(r.knownAtoms),knownSelectors:new Set(r.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(i,t.getGraph(e.version)),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map(xy(r.nodeCleanupFunctions.entries(),([s])=>[s,()=>{}]))}}function E8(t){const e=new Ry(w8());return t!=null?e.map(t):e}const[LC,_O]=S8((t,e)=>{var n;const r=t.getState(),i=e==="latest"?(n=r.nextTree)!==null&&n!==void 0?n:r.currentTree:Lt(r.previousTree);return new Ry(vO(t,i),t.storeID)},(t,e)=>{var n,r;return String(e)+String(t.storeID)+String((n=t.getState().nextTree)===null||n===void 0?void 0:n.version)+String(t.getState().currentTree.version)+String((r=t.getState().previousTree)===null||r===void 0?void 0:r.version)});v8(_O);function x8(t,e="latest"){const n=LC(t,e);return n.isRetained()?n:(_O(),LC(t,e))}class Jw extends Ry{constructor(e,n){super(vO(e.getStore_INTERNAL(),e.getStore_INTERNAL().getState().currentTree,!0),e.getStoreID()),ze(this,"_batch",void 0),ze(this,"set",(r,i)=>{this.checkRefCount_INTERNAL();const s=this.getStore_INTERNAL();this._batch(()=>{um(s,r.key,1),OC(this.getStore_INTERNAL(),r,i)})}),ze(this,"reset",r=>{this.checkRefCount_INTERNAL();const i=this.getStore_INTERNAL();this._batch(()=>{um(i,r.key,1),OC(this.getStore_INTERNAL(),r,p8)})}),ze(this,"setUnvalidatedAtomValues_DEPRECATED",r=>{this.checkRefCount_INTERNAL();const i=this.getStore_INTERNAL();Xw(()=>{for(const[s,o]of r.entries())um(i,s,1),y8(i,new m8(s),o)})}),this._batch=n}}var Ny={Snapshot:Ry,MutableSnapshot:Jw,freshSnapshot:E8,cloneSnapshot:x8},T8=Ny.Snapshot,I8=Ny.MutableSnapshot,C8=Ny.freshSnapshot,k8=Ny.cloneSnapshot,Py=Object.freeze({__proto__:null,Snapshot:T8,MutableSnapshot:I8,freshSnapshot:C8,cloneSnapshot:k8});function A8(...t){const e=new Set;for(const n of t)for(const r of n)e.add(r);return e}var R8=A8;const{useRef:N8}=Pe;function P8(t){const e=N8(t);return e.current===t&&typeof t=="function"&&(e.current=t()),e}var MC=P8;const{getNextTreeStateVersion:D8,makeEmptyStoreState:wO}=YD,{cleanUpNode:O8,getDownstreamNodes:L8,initializeNode:M8,setNodeValue:$8,setUnvalidatedAtomValue_DEPRECATED:F8}=Go,{graph:U8}=bf,{cloneGraph:j8}=bf,{getNextStoreID:bO}=Ty,{createMutableSource:o0,reactMode:SO}=wf,{applyAtomValueWrites:V8}=Xi,{releaseScheduledRetainablesNow:EO}=yl,{freshSnapshot:B8}=Py,{useCallback:z8,useContext:xO,useEffect:Zw,useMemo:W8,useRef:H8,useState:G8}=Pe;function qu(){throw Ke("This component must be used inside a <RecoilRoot> component.")}const TO=Object.freeze({storeID:bO(),getState:qu,replaceState:qu,getGraph:qu,subscribeToTransactions:qu,addTransactionMetadata:qu});let e1=!1;function $C(t){if(e1)throw Ke("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");const e=t.getState();if(e.nextTree===null){_t("recoil_memory_managament_2020")&&_t("recoil_release_on_cascading_update_killswitch_2021")&&e.commitDepth>0&&EO(t);const n=e.currentTree.version,r=D8();e.nextTree={...e.currentTree,version:r,stateID:r,dirtyAtoms:new Set,transactionMetadata:{}},e.graphsByVersion.set(r,j8(Lt(e.graphsByVersion.get(n))))}}const IO=Pe.createContext({current:TO}),Dy=()=>xO(IO),CO=Pe.createContext(null);function q8(){return xO(CO)}function VS(t,e,n){const r=L8(t,n,n.dirtyAtoms);for(const i of r){const s=e.nodeToComponentSubscriptions.get(i);if(s)for(const[o,[a,l]]of s)l(n)}}function kO(t){const e=t.getState(),n=e.currentTree,r=n.dirtyAtoms;if(r.size){for(const[i,s]of e.nodeTransactionSubscriptions)if(r.has(i))for(const[o,a]of s)a(t);for(const[i,s]of e.transactionSubscriptions)s(t);(!SO().early||e.suspendedComponentResolvers.size>0)&&(VS(t,e,n),e.suspendedComponentResolvers.forEach(i=>i()),e.suspendedComponentResolvers.clear())}e.queuedComponentCallbacks_DEPRECATED.forEach(i=>i(n)),e.queuedComponentCallbacks_DEPRECATED.splice(0,e.queuedComponentCallbacks_DEPRECATED.length)}function K8(t){const e=t.getState();e.commitDepth++;try{const{nextTree:n}=e;if(n==null)return;e.previousTree=e.currentTree,e.currentTree=n,e.nextTree=null,kO(t),e.previousTree!=null?e.graphsByVersion.delete(e.previousTree.version):PS("Ended batch with no previous state, which is unexpected","recoil"),e.previousTree=null,_t("recoil_memory_managament_2020")&&n==null&&EO(t)}finally{e.commitDepth--}}function Q8({setNotifyBatcherOfChange:t}){const e=Dy(),[,n]=G8([]);return t(()=>n({})),Zw(()=>(t(()=>n({})),()=>{t(()=>{})}),[t]),Zw(()=>{C5.enqueueExecution("Batcher",()=>{K8(e.current)})}),null}function Y8(t,e){const n=wO();return e({set:(r,i)=>{const s=n.currentTree,o=$8(t,s,r.key,i),a=new Set(o.keys()),l=s.nonvalidatedAtoms.clone();for(const c of a)l.delete(c);n.currentTree={...s,dirtyAtoms:R8(s.dirtyAtoms,a),atomValues:V8(s.atomValues,o),nonvalidatedAtoms:l}},setUnvalidatedAtomValues:r=>{r.forEach((i,s)=>{n.currentTree=F8(n.currentTree,s,i)})}}),n}function X8(t){const e=B8(t),n=e.getStore_INTERNAL().getState();return e.retain(),n.nodeCleanupFunctions.forEach(r=>r()),n.nodeCleanupFunctions.clear(),n}let FC=0;function J8({initializeState_DEPRECATED:t,initializeState:e,store_INTERNAL:n,children:r}){let i;const s=f=>{const p=i.current.graphsByVersion;if(p.has(f))return Lt(p.get(f));const y=U8();return p.set(f,y),y},o=(f,p)=>{if(p==null){const{transactionSubscriptions:y}=d.current.getState(),w=FC++;return y.set(w,f),{release:()=>{y.delete(w)}}}else{const{nodeTransactionSubscriptions:y}=d.current.getState();y.has(p)||y.set(p,new Map);const w=FC++;return Lt(y.get(p)).set(w,f),{release:()=>{const m=y.get(p);m&&(m.delete(w),m.size===0&&y.delete(p))}}}},a=f=>{$C(d.current);for(const p of Object.keys(f))Lt(d.current.getState().nextTree).transactionMetadata[p]=f[p]},l=f=>{$C(d.current);const p=Lt(i.current.nextTree);let y;try{e1=!0,y=f(p)}finally{e1=!1}y!==p&&(i.current.nextTree=y,SO().early&&VS(d.current,i.current,y),Lt(c.current)())},c=H8(null),u=z8(f=>{c.current=f},[c]),d=MC(()=>n??{storeID:bO(),getState:()=>i.current,replaceState:l,getGraph:s,subscribeToTransactions:o,addTransactionMetadata:a});n!=null&&(d.current=n),i=MC(()=>t!=null?Y8(d.current,t):e!=null?X8(e):wO());const h=W8(()=>o0==null?void 0:o0(i,()=>i.current.currentTree.version),[i]);return Zw(()=>{const f=d.current;for(const p of new Set(f.getState().knownAtoms))M8(f,p,"get");return()=>{for(const p of f.getState().knownAtoms)O8(f,p)}},[d]),Pe.createElement(IO.Provider,{value:d},Pe.createElement(CO.Provider,{value:h},Pe.createElement(Q8,{setNotifyBatcherOfChange:u}),r))}function Z8(t){const{override:e,...n}=t,r=Dy();return e===!1&&r.current!==TO?t.children:Pe.createElement(J8,n)}function eW(){return Dy().current.storeID}var Ns={RecoilRoot:Z8,useStoreRef:Dy,useRecoilMutableSource:q8,useRecoilStoreID:eW,notifyComponents_FOR_TESTING:VS,sendEndOfBatchNotifications_FOR_TESTING:kO};function tW(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}var nW=tW;const{useEffect:rW,useRef:iW}=Pe;function sW(t){const e=iW();return rW(()=>{e.current=t}),e.current}var AO=sW;const{useStoreRef:oW}=Ns,{SUSPENSE_TIMEOUT_MS:aW}=yl,{updateRetainCount:Ku}=yl,{RetentionZone:lW}=Iy,{useEffect:cW,useRef:uW}=Pe,{isSSR:UC}=Ay;function dW(t){if(_t("recoil_memory_managament_2020"))return hW(t)}function hW(t){const n=(Array.isArray(t)?t:[t]).map(o=>o instanceof lW?o:o.key),r=oW();cW(()=>{if(!_t("recoil_memory_managament_2020"))return;const o=r.current;if(i.current&&!UC)window.clearTimeout(i.current),i.current=null;else for(const a of n)Ku(o,a,1);return()=>{for(const a of n)Ku(o,a,-1)}},[r,...n]);const i=uW(),s=AO(n);if(!UC&&(s===void 0||!nW(s,n))){const o=r.current;for(const a of n)Ku(o,a,1);if(s)for(const a of s)Ku(o,a,-1);i.current&&window.clearTimeout(i.current),i.current=window.setTimeout(()=>{i.current=null;for(const a of n)Ku(o,a,-1)},aW)}}var BS=dW;function fW(){return"<component name not available>"}var Ef=fW;const{batchUpdates:pW}=ky,{DEFAULT_VALUE:RO}=Tr,{currentRendererSupportsUseSyncExternalStore:mW,reactMode:pu,useMutableSource:gW,useSyncExternalStore:yW}=wf,{useRecoilMutableSource:vW,useStoreRef:Ji}=Ns,{AbstractRecoilValue:t1,getRecoilValueAsLoadable:xf,setRecoilValue:tg,setUnvalidatedRecoilValue:_W,subscribeToRecoilValue:Oc}=Xi,{useCallback:br,useEffect:Lc,useMemo:NO,useRef:Ud,useState:zS}=Pe,{setByAddingToSet:wW}=JD,{isSSR:bW}=Ay;function WS(t,e,n){if(t.state==="hasValue")return t.contents;throw t.state==="loading"?new Promise(i=>{const s=n.current.getState().suspendedComponentResolvers;s.add(i),bW&&Ct(t.contents)&&t.contents.finally(()=>{s.delete(i)})}):t.state==="hasError"?t.contents:Ke(`Invalid value of loadable atom "${e.key}"`)}function SW(){const t=Ef(),e=Ji(),[,n]=zS([]),r=Ud(new Set);r.current=new Set;const i=Ud(new Set),s=Ud(new Map),o=br(l=>{const c=s.current.get(l);c&&(c.release(),s.current.delete(l))},[s]),a=br((l,c)=>{s.current.has(c)&&n([])},[]);return Lc(()=>{const l=e.current;$d(r.current,i.current).forEach(c=>{if(s.current.has(c))return;const u=Oc(l,new t1(c),h=>a(h,c),t);s.current.set(c,u),l.getState().nextTree?l.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{a(l.getState(),c)}):a(l.getState(),c)}),$d(i.current,r.current).forEach(c=>{o(c)}),i.current=r.current}),Lc(()=>{const l=s.current;return $d(r.current,new Set(l.keys())).forEach(c=>{const u=Oc(e.current,new t1(c),d=>a(d,c),t);l.set(c,u)}),()=>l.forEach((c,u)=>o(u))},[t,e,o,a]),NO(()=>{function l(p){return y=>{tg(e.current,p,y)}}function c(p){return()=>tg(e.current,p,RO)}function u(p){var y;r.current.has(p.key)||(r.current=wW(r.current,p.key));const w=e.current.getState();return xf(e.current,p,pu().early&&(y=w.nextTree)!==null&&y!==void 0?y:w.currentTree)}function d(p){const y=u(p);return WS(y,p,e)}function h(p){return[d(p),l(p)]}function f(p){return[u(p),l(p)]}return{getRecoilValue:d,getRecoilValueLoadable:u,getRecoilState:h,getRecoilStateLoadable:f,getSetRecoilState:l,getResetRecoilState:c}},[r,e])}const EW={current:0};function xW(t){const e=Ji(),n=Ef(),r=br(()=>{var a;const l=e.current,c=l.getState(),u=pu().early&&(a=c.nextTree)!==null&&a!==void 0?a:c.currentTree;return{loadable:xf(l,t,u),key:t.key}},[e,t]),i=br(a=>{let l;return()=>{var c,u;const d=a();return(c=l)!==null&&c!==void 0&&c.loadable.is(d.loadable)&&((u=l)===null||u===void 0?void 0:u.key)===d.key?l:(l=d,d)}},[]),s=NO(()=>i(r),[r,i]),o=br(a=>{const l=e.current;return Oc(l,t,a,n).release},[e,t,n]);return yW(o,s,s).loadable}function TW(t){const e=Ji(),n=br(()=>{var c;const u=e.current,d=u.getState(),h=pu().early&&(c=d.nextTree)!==null&&c!==void 0?c:d.currentTree;return xf(u,t,h)},[e,t]),r=br(()=>n(),[n]),i=Ef(),s=br((c,u)=>{const d=e.current;return Oc(d,t,()=>{if(!_t("recoil_suppress_rerender_in_callback"))return u();const f=n();l.current.is(f)||u(),l.current=f},i).release},[e,t,i,n]),o=vW();if(o==null)throw Ke("Recoil hooks must be used in components contained within a <RecoilRoot> component.");const a=gW(o,r,s),l=Ud(a);return Lc(()=>{l.current=a}),a}function n1(t){const e=Ji(),n=Ef(),r=br(()=>{var l;const c=e.current,u=c.getState(),d=pu().early&&(l=u.nextTree)!==null&&l!==void 0?l:u.currentTree;return xf(c,t,d)},[e,t]),i=br(()=>({loadable:r(),key:t.key}),[r,t.key]),s=br(l=>{const c=i();return l.loadable.is(c.loadable)&&l.key===c.key?l:c},[i]);Lc(()=>{const l=Oc(e.current,t,c=>{a(s)},n);return a(s),l.release},[n,t,e,s]);const[o,a]=zS(i);return o.key!==t.key?i().loadable:o.loadable}function IW(t){const e=Ji(),[,n]=zS([]),r=Ef(),i=br(()=>{var a;const l=e.current,c=l.getState(),u=pu().early&&(a=c.nextTree)!==null&&a!==void 0?a:c.currentTree;return xf(l,t,u)},[e,t]),s=i(),o=Ud(s);return Lc(()=>{o.current=s}),Lc(()=>{const a=e.current,l=a.getState(),c=Oc(a,t,d=>{var h;if(!_t("recoil_suppress_rerender_in_callback"))return n([]);const f=i();(h=o.current)!==null&&h!==void 0&&h.is(f)||n(f),o.current=f},r);if(l.nextTree)a.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{o.current=null,n([])});else{var u;if(!_t("recoil_suppress_rerender_in_callback"))return n([]);const d=i();(u=o.current)!==null&&u!==void 0&&u.is(d)||n(d),o.current=d}return c.release},[r,i,t,e]),s}function HS(t){return _t("recoil_memory_managament_2020")&&BS(t),{TRANSITION_SUPPORT:n1,SYNC_EXTERNAL_STORE:mW()?xW:n1,MUTABLE_SOURCE:TW,LEGACY:IW}[pu().mode](t)}function PO(t){const e=Ji(),n=HS(t);return WS(n,t,e)}function Oy(t){const e=Ji();return br(n=>{tg(e.current,t,n)},[e,t])}function CW(t){const e=Ji();return br(()=>{tg(e.current,t,RO)},[e,t])}function kW(t){return[PO(t),Oy(t)]}function AW(t){return[HS(t),Oy(t)]}function RW(){const t=Ji();return(e,n={})=>{pW(()=>{t.current.addTransactionMetadata(n),e.forEach((r,i)=>_W(t.current,new t1(i),r))})}}function DO(t){return _t("recoil_memory_managament_2020")&&BS(t),n1(t)}function OO(t){const e=Ji(),n=DO(t);return WS(n,t,e)}function NW(t){return[OO(t),Oy(t)]}var PW={recoilComponentGetRecoilValueCount_FOR_TESTING:EW,useRecoilInterface:SW,useRecoilState:kW,useRecoilStateLoadable:AW,useRecoilValue:PO,useRecoilValueLoadable:HS,useResetRecoilState:CW,useSetRecoilState:Oy,useSetUnvalidatedAtomValues:RW,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:DO,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:OO,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:NW};function DW(t,e){const n=new Map;for(const[r,i]of t)e(i,r)&&n.set(r,i);return n}var OW=DW;function LW(t,e){const n=new Set;for(const r of t)e(r)&&n.add(r);return n}var MW=LW;function $W(...t){const e=new Map;for(let n=0;n<t.length;n++){const r=t[n].keys();let i;for(;!(i=r.next()).done;)e.set(i.value,t[n].get(i.value))}return e}var FW=$W;const{batchUpdates:UW}=ky,{DEFAULT_VALUE:jW,getNode:LO,nodes:VW}=Tr,{useStoreRef:GS}=Ns,{AbstractRecoilValue:BW,setRecoilValueLoadable:zW}=Xi,{SUSPENSE_TIMEOUT_MS:WW}=yl,{cloneSnapshot:ng}=Py,{useCallback:Ly,useEffect:MO,useRef:jC,useState:HW}=Pe,{isSSR:VC}=Ay;function My(t){const e=GS();MO(()=>e.current.subscribeToTransactions(t).release,[t,e])}function BC(t){const e=t.atomValues.toMap(),n=eg(OW(e,(r,i)=>{const o=LO(i).persistence_UNSTABLE;return o!=null&&o.type!=="none"&&r.state==="hasValue"}),r=>r.contents);return FW(t.nonvalidatedAtoms.toMap(),n)}function GW(t){My(Ly(e=>{let n=e.getState().previousTree;const r=e.getState().currentTree;n||(n=e.getState().currentTree);const i=BC(r),s=BC(n),o=eg(VW,l=>{var c,u,d,h;return{persistence_UNSTABLE:{type:(c=(u=l.persistence_UNSTABLE)===null||u===void 0?void 0:u.type)!==null&&c!==void 0?c:"none",backButton:(d=(h=l.persistence_UNSTABLE)===null||h===void 0?void 0:h.backButton)!==null&&d!==void 0?d:!1}}}),a=MW(r.dirtyAtoms,l=>i.has(l)||s.has(l));t({atomValues:i,previousAtomValues:s,atomInfo:o,modifiedAtoms:a,transactionMetadata:{...r.transactionMetadata}})},[t]))}function qW(t){My(Ly(e=>{const n=ng(e,"latest"),r=ng(e,"previous");t({snapshot:n,previousSnapshot:r})},[t]))}function KW(){const t=GS(),[e,n]=HW(()=>ng(t.current)),r=AO(e),i=jC(),s=jC();if(My(Ly(a=>n(ng(a)),[])),MO(()=>{const a=e.retain();if(i.current&&!VC){var l;window.clearTimeout(i.current),i.current=null,(l=s.current)===null||l===void 0||l.call(s),s.current=null}return()=>{window.setTimeout(a,10)}},[e]),r!==e&&!VC){if(i.current){var o;window.clearTimeout(i.current),i.current=null,(o=s.current)===null||o===void 0||o.call(s),s.current=null}s.current=e.retain(),i.current=window.setTimeout(()=>{var a;i.current=null,(a=s.current)===null||a===void 0||a.call(s),s.current=null},WW)}return e}function $O(t,e){var n;const r=t.getState(),i=(n=r.nextTree)!==null&&n!==void 0?n:r.currentTree,s=e.getStore_INTERNAL().getState().currentTree;UW(()=>{const o=new Set;for(const c of[i.atomValues.keys(),s.atomValues.keys()])for(const u of c){var a,l;((a=i.atomValues.get(u))===null||a===void 0?void 0:a.contents)!==((l=s.atomValues.get(u))===null||l===void 0?void 0:l.contents)&&LO(u).shouldRestoreFromSnapshots&&o.add(u)}o.forEach(c=>{zW(t,new BW(c),s.atomValues.has(c)?Lt(s.atomValues.get(c)):jW)}),t.replaceState(c=>({...c,stateID:e.getID()}))})}function QW(){const t=GS();return Ly(e=>$O(t.current,e),[t])}var FO={useRecoilSnapshot:KW,gotoSnapshot:$O,useGotoRecoilSnapshot:QW,useRecoilTransactionObserver:qW,useTransactionObservation_DEPRECATED:GW,useTransactionSubscription_DEPRECATED:My};const{peekNodeInfo:YW}=Go,{useStoreRef:XW}=Ns;function JW(){const t=XW();return({key:e})=>YW(t.current,t.current.getState().currentTree,e)}var ZW=JW;const{reactMode:eH}=wf,{RecoilRoot:tH,useStoreRef:nH}=Ns,{useMemo:rH}=Pe;function iH(){eH().mode==="MUTABLE_SOURCE"&&console.warn("Warning: There are known issues using useRecoilBridgeAcrossReactRoots() in recoil_mutable_source rendering mode.  Please consider upgrading to recoil_sync_external_store mode.");const t=nH().current;return rH(()=>{function e({children:n}){return Pe.createElement(tH,{store_INTERNAL:t},n)}return e},[t])}var sH=iH;const{loadableWithValue:oH}=_f,{initializeNode:aH}=Go,{DEFAULT_VALUE:lH,getNode:cH}=Tr,{copyTreeState:uH,getRecoilValueAsLoadable:dH,invalidateDownstreams:hH,writeLoadableToTreeState:fH}=Xi;function zC(t){return cH(t.key).nodeType==="atom"}class pH{constructor(e,n){ze(this,"_store",void 0),ze(this,"_treeState",void 0),ze(this,"_changes",void 0),ze(this,"get",r=>{if(this._changes.has(r.key))return this._changes.get(r.key);if(!zC(r))throw Ke("Reading selectors within atomicUpdate is not supported");const i=dH(this._store,r,this._treeState);if(i.state==="hasValue")return i.contents;throw i.state==="hasError"?i.contents:Ke(`Expected Recoil atom ${r.key} to have a value, but it is in a loading state.`)}),ze(this,"set",(r,i)=>{if(!zC(r))throw Ke("Setting selectors within atomicUpdate is not supported");if(typeof i=="function"){const s=this.get(r);this._changes.set(r.key,i(s))}else aH(this._store,r.key,"set"),this._changes.set(r.key,i)}),ze(this,"reset",r=>{this.set(r,lH)}),this._store=e,this._treeState=n,this._changes=new Map}newTreeState_INTERNAL(){if(this._changes.size===0)return this._treeState;const e=uH(this._treeState);for(const[n,r]of this._changes)fH(e,n,oH(r));return hH(this._store,e),e}}function mH(t){return e=>{t.replaceState(n=>{const r=new pH(t,n);return e(r),r.newTreeState_INTERNAL()})}}var gH={atomicUpdater:mH},yH=gH.atomicUpdater,UO=Object.freeze({__proto__:null,atomicUpdater:yH});function vH(t,e){if(!t)throw new Error(e)}var _H=vH,wd=_H;const{atomicUpdater:wH}=UO,{batchUpdates:bH}=ky,{DEFAULT_VALUE:SH}=Tr,{useStoreRef:EH}=Ns,{refreshRecoilValue:xH,setRecoilValue:WC}=Xi,{cloneSnapshot:TH}=Py,{gotoSnapshot:IH}=FO,{useCallback:CH}=Pe;class jO{}const kH=new jO;function VO(t,e,n,r){let i=kH,s;if(bH(()=>{const a="useRecoilCallback() expects a function that returns a function: it accepts a function of the type (RecoilInterface) => (Args) => ReturnType and returns a callback function (Args) => ReturnType, where RecoilInterface is an object {snapshot, set, ...} and Args and ReturnType are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if(typeof e!="function")throw Ke(a);const l=ZD({...r??{},set:(u,d)=>WC(t,u,d),reset:u=>WC(t,u,SH),refresh:u=>xH(t,u),gotoSnapshot:u=>IH(t,u),transact_UNSTABLE:u=>wH(t)(u)},{snapshot:()=>{const u=TH(t);return s=u.retain(),u}}),c=e(l);if(typeof c!="function")throw Ke(a);i=c(...n)}),i instanceof jO&&wd(!1),Ct(i))i=i.finally(()=>{var a;(a=s)===null||a===void 0||a()});else{var o;(o=s)===null||o===void 0||o()}return i}function AH(t,e){const n=EH();return CH((...r)=>VO(n.current,t,r),e!=null?[...e,n]:void 0)}var BO={recoilCallback:VO,useRecoilCallback:AH};const{useStoreRef:RH}=Ns,{refreshRecoilValue:NH}=Xi,{useCallback:PH}=Pe;function DH(t){const e=RH();return PH(()=>{const n=e.current;NH(n,t)},[t,e])}var OH=DH;const{atomicUpdater:LH}=UO,{useStoreRef:MH}=Ns,{useMemo:$H}=Pe;function FH(t,e){const n=MH();return $H(()=>(...r)=>{LH(n.current)(s=>{t(s)(...r)})},e!=null?[...e,n]:void 0)}var UH=FH;class jH{constructor(e){ze(this,"value",void 0),this.value=e}}var VH={WrappedValue:jH},BH=VH.WrappedValue,zO=Object.freeze({__proto__:null,WrappedValue:BH});const{isFastRefreshEnabled:zH}=wf;class HC extends Error{}class WH{constructor(e){var n,r,i;ze(this,"_name",void 0),ze(this,"_numLeafs",void 0),ze(this,"_root",void 0),ze(this,"_onHit",void 0),ze(this,"_onSet",void 0),ze(this,"_mapNodeValue",void 0),this._name=e==null?void 0:e.name,this._numLeafs=0,this._root=null,this._onHit=(n=e==null?void 0:e.onHit)!==null&&n!==void 0?n:()=>{},this._onSet=(r=e==null?void 0:e.onSet)!==null&&r!==void 0?r:()=>{},this._mapNodeValue=(i=e==null?void 0:e.mapNodeValue)!==null&&i!==void 0?i:s=>s}size(){return this._numLeafs}root(){return this._root}get(e,n){var r;return(r=this.getLeafNode(e,n))===null||r===void 0?void 0:r.value}getLeafNode(e,n){if(this._root==null)return;let r=this._root;for(;r;){if(n==null||n.onNodeVisit(r),r.type==="leaf")return this._onHit(r),r;const i=this._mapNodeValue(e(r.nodeKey));r=r.branches.get(i)}}set(e,n,r){const i=()=>{var s,o,a,l;let c,u;for(const[w,m]of e){var d,h,f;const g=this._root;if((g==null?void 0:g.type)==="leaf")throw this.invalidCacheError();const _=c;if(c=_?_.branches.get(u):g,c=(d=c)!==null&&d!==void 0?d:{type:"branch",nodeKey:w,parent:_,branches:new Map,branchKey:u},c.type!=="branch"||c.nodeKey!==w)throw this.invalidCacheError();_==null||_.branches.set(u,c),r==null||(h=r.onNodeVisit)===null||h===void 0||h.call(r,c),u=this._mapNodeValue(m),this._root=(f=this._root)!==null&&f!==void 0?f:c}const p=c?(s=c)===null||s===void 0?void 0:s.branches.get(u):this._root;if(p!=null&&(p.type!=="leaf"||p.branchKey!==u))throw this.invalidCacheError();const y={type:"leaf",value:n,parent:c,branchKey:u};(o=c)===null||o===void 0||o.branches.set(u,y),this._root=(a=this._root)!==null&&a!==void 0?a:y,this._numLeafs++,this._onSet(y),r==null||(l=r.onNodeVisit)===null||l===void 0||l.call(r,y)};try{i()}catch(s){if(s instanceof HC)this.clear(),i();else throw s}}delete(e){const n=this.root();if(!n)return!1;if(e===n)return this._root=null,this._numLeafs=0,!0;let r=e.parent,i=e.branchKey;for(;r;){var s;if(r.branches.delete(i),r===n)return r.branches.size===0?(this._root=null,this._numLeafs=0):this._numLeafs--,!0;if(r.branches.size>0)break;i=(s=r)===null||s===void 0?void 0:s.branchKey,r=r.parent}for(;r!==n;r=r.parent)if(r==null)return!1;return this._numLeafs--,!0}clear(){this._numLeafs=0,this._root=null}invalidCacheError(){const e=zH()?"Possible Fast Refresh module reload detected.  This may also be caused by an selector returning inconsistent values. Resetting cache.":"Invalid cache values.  This happens when selectors do not return consistent values for the same input dependency values.  That may also be caused when using Fast Refresh to change a selector implementation.  Resetting cache.";throw PS(e+(this._name!=null?` - ${this._name}`:"")),new HC}}var HH={TreeCache:WH},GH=HH.TreeCache,WO=Object.freeze({__proto__:null,TreeCache:GH});class qH{constructor(e){var n;ze(this,"_maxSize",void 0),ze(this,"_size",void 0),ze(this,"_head",void 0),ze(this,"_tail",void 0),ze(this,"_map",void 0),ze(this,"_keyMapper",void 0),this._maxSize=e.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=(n=e.mapKey)!==null&&n!==void 0?n:r=>r}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(e){return this._map.has(this._keyMapper(e))}get(e){const n=this._keyMapper(e),r=this._map.get(n);if(r)return this.set(e,r.value),r.value}set(e,n){const r=this._keyMapper(e);this._map.get(r)&&this.delete(e);const s=this.head(),o={key:e,right:s,left:null,value:n};s?s.left=o:this._tail=o,this._map.set(r,o),this._head=o,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){const e=this.tail();e&&this.delete(e.key)}delete(e){const n=this._keyMapper(e);if(!this._size||!this._map.has(n))return;const r=Lt(this._map.get(n)),i=r.right,s=r.left;i&&(i.left=r.left),s&&(s.right=r.right),r===this.head()&&(this._head=i),r===this.tail()&&(this._tail=s),this._map.delete(n),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}}var KH={LRUCache:qH},QH=KH.LRUCache,HO=Object.freeze({__proto__:null,LRUCache:QH});const{LRUCache:YH}=HO,{TreeCache:XH}=WO;function JH({name:t,maxSize:e,mapNodeValue:n=r=>r}){const r=new YH({maxSize:e}),i=new XH({name:t,mapNodeValue:n,onHit:s=>{r.set(s,!0)},onSet:s=>{const o=r.tail();r.set(s,!0),o&&i.size()>e&&i.delete(o.key)}});return i}var GC=JH;function oi(t,e,n){if(typeof t=="string"&&!t.includes('"')&&!t.includes("\\"))return`"${t}"`;switch(typeof t){case"undefined":return"";case"boolean":return t?"true":"false";case"number":case"symbol":return String(t);case"string":return JSON.stringify(t);case"function":if((e==null?void 0:e.allowFunctions)!==!0)throw Ke("Attempt to serialize function in a Recoil cache key");return`__FUNCTION(${t.name})__`}if(t===null)return"null";if(typeof t!="object"){var r;return(r=JSON.stringify(t))!==null&&r!==void 0?r:""}if(Ct(t))return"__PROMISE__";if(Array.isArray(t))return`[${t.map((i,s)=>oi(i,e,s.toString()))}]`;if(typeof t.toJSON=="function")return oi(t.toJSON(n),e,n);if(t instanceof Map){const i={};for(const[s,o]of t)i[typeof s=="string"?s:oi(s,e)]=o;return oi(i,e,n)}return t instanceof Set?oi(Array.from(t).sort((i,s)=>oi(i,e).localeCompare(oi(s,e))),e,n):Symbol!==void 0&&t[Symbol.iterator]!=null&&typeof t[Symbol.iterator]=="function"?oi(Array.from(t),e,n):`{${Object.keys(t).filter(i=>t[i]!==void 0).sort().map(i=>`${oi(i,e)}:${oi(t[i],e,i)}`).join(",")}}`}function ZH(t,e={allowFunctions:!1}){return oi(t,e)}var $y=ZH;const{TreeCache:eG}=WO,kp={equality:"reference",eviction:"keep-all",maxSize:1/0};function tG({equality:t=kp.equality,eviction:e=kp.eviction,maxSize:n=kp.maxSize}=kp,r){const i=nG(t);return rG(e,n,i,r)}function nG(t){switch(t){case"reference":return e=>e;case"value":return e=>$y(e)}throw Ke(`Unrecognized equality policy ${t}`)}function rG(t,e,n,r){switch(t){case"keep-all":return new eG({name:r,mapNodeValue:n});case"lru":return GC({name:r,maxSize:Lt(e),mapNodeValue:n});case"most-recent":return GC({name:r,maxSize:1,mapNodeValue:n})}throw Ke(`Unrecognized eviction policy ${t}`)}var iG=tG;function sG(t){return()=>null}var oG={startPerfBlock:sG};const{isLoadable:aG,loadableWithError:Ap,loadableWithPromise:lG,loadableWithValue:a0}=_f,{WrappedValue:GO}=zO,{getNodeLoadable:Rp,peekNodeLoadable:cG,setNodeValue:uG}=Go,{saveDepsToStore:dG}=bf,{DEFAULT_VALUE:hG,getConfigDeletionHandler:fG,getNode:pG,registerNode:qC}=Tr,{isRecoilValue:mG}=Dc,{markRecoilValueModified:KC}=Xi,{retainedByOptionWithDefault:gG}=yl,{recoilCallback:yG}=BO,{startPerfBlock:vG}=oG;class qO{}const Qu=new qO,Yu=[],Np=new Map,_G=(()=>{let t=0;return()=>t++})();function KO(t){let e=null;const{key:n,get:r,cachePolicy_UNSTABLE:i}=t,s=t.set!=null?t.set:void 0,o=new Set,a=iG(i??{equality:"reference",eviction:"keep-all"},n),l=gG(t.retainedBy_UNSTABLE),c=new Map;let u=0;function d(){return!_t("recoil_memory_managament_2020")||u>0}function h(P){return P.getState().knownSelectors.add(n),u++,()=>{u--}}function f(){return fG(n)!==void 0&&!d()}function p(P,F,L,j,M){R(F,j,M),y(P,L)}function y(P,F){N(P,F)&&A(P),m(F,!0)}function w(P,F){N(P,F)&&(Lt(O(P)).stateVersions.clear(),m(F,!1))}function m(P,F){const L=Np.get(P);if(L!=null){for(const j of L)KC(j,Lt(e));F&&Np.delete(P)}}function g(P,F){let L=Np.get(F);L==null&&Np.set(F,L=new Set),L.add(P)}function _(P,F,L,j,M,te){return F.then(G=>{if(!d())throw A(P),Qu;const ee=a0(G);return p(P,L,M,ee,j),G}).catch(G=>{if(!d())throw A(P),Qu;if(Ct(G))return S(P,G,L,j,M,te);const ee=Ap(G);throw p(P,L,M,ee,j),G})}function S(P,F,L,j,M,te){return F.then(G=>{if(!d())throw A(P),Qu;te.loadingDepKey!=null&&te.loadingDepPromise===F?L.atomValues.set(te.loadingDepKey,a0(G)):P.getState().knownSelectors.forEach(oe=>{L.atomValues.delete(oe)});const ee=D(P,L);if(ee&&ee.state!=="loading"){if((N(P,M)||O(P)==null)&&y(P,M),ee.state==="hasValue")return ee.contents;throw ee.contents}if(!N(P,M)){const oe=x(P,L);if(oe!=null)return oe.loadingLoadable.contents}const[de,ye]=E(P,L,M);if(de.state!=="loading"&&p(P,L,M,de,ye),de.state==="hasError")throw de.contents;return de.contents}).catch(G=>{if(G instanceof qO)throw Qu;if(!d())throw A(P),Qu;const ee=Ap(G);throw p(P,L,M,ee,j),G})}function I(P,F,L,j){var M,te,G,ee;if(N(P,j)||F.version===((M=P.getState())===null||M===void 0||(te=M.currentTree)===null||te===void 0?void 0:te.version)||F.version===((G=P.getState())===null||G===void 0||(ee=G.nextTree)===null||ee===void 0?void 0:ee.version)){var de,ye,oe;dG(n,L,P,(de=(ye=P.getState())===null||ye===void 0||(oe=ye.nextTree)===null||oe===void 0?void 0:oe.version)!==null&&de!==void 0?de:P.getState().currentTree.version)}for(const De of L)o.add(De)}function E(P,F,L){const j=vG(n);let M=!0,te=!0;const G=()=>{j(),te=!1};let ee,de=!1,ye;const oe={loadingDepKey:null,loadingDepPromise:null},De=new Map;function He({key:Me}){const ve=Rp(P,F,Me);switch(De.set(Me,ve),M||(I(P,F,new Set(De.keys()),L),w(P,L)),ve.state){case"hasValue":return ve.contents;case"hasError":throw ve.contents;case"loading":throw oe.loadingDepKey=Me,oe.loadingDepPromise=ve.contents,ve.contents}throw Ke("Invalid Loadable state")}const Ee=Me=>(...ve)=>{if(te)throw Ke("Callbacks from getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can work with Recoil state without a subscription.");return e==null&&wd(!1),yG(P,Me,ve,{node:e})};try{ee=r({get:He,getCallback:Ee}),ee=mG(ee)?He(ee):ee,aG(ee)&&(ee.state==="hasError"&&(de=!0),ee=ee.contents),Ct(ee)?ee=_(P,ee,F,De,L,oe).finally(G):G(),ee=ee instanceof GO?ee.value:ee}catch(Me){ee=Me,Ct(ee)?ee=S(P,ee,F,De,L,oe).finally(G):(de=!0,G())}return de?ye=Ap(ee):Ct(ee)?ye=lG(ee):ye=a0(ee),M=!1,k(P,L,De),I(P,F,new Set(De.keys()),L),[ye,De]}function D(P,F){let L=F.atomValues.get(n);if(L!=null)return L;const j=new Set;try{L=a.get(te=>(typeof te!="string"&&wd(!1),Rp(P,F,te).contents),{onNodeVisit:te=>{te.type==="branch"&&te.nodeKey!==n&&j.add(te.nodeKey)}})}catch(te){throw Ke(`Problem with cache lookup for selector "${n}": ${te.message}`)}if(L){var M;F.atomValues.set(n,L),I(P,F,j,(M=O(P))===null||M===void 0?void 0:M.executionID)}return L}function b(P,F){const L=D(P,F);if(L!=null)return A(P),L;const j=x(P,F);if(j!=null){var M;return((M=j.loadingLoadable)===null||M===void 0?void 0:M.state)==="loading"&&g(P,j.executionID),j.loadingLoadable}const te=_G(),[G,ee]=E(P,F,te);return G.state==="loading"?(C(P,te,G,ee,F),g(P,te)):(A(P),R(F,G,ee)),G}function x(P,F){const L=gO([c.has(P)?[Lt(c.get(P))]:[],xy($S(c,([M])=>M!==P),([,M])=>M)]);function j(M){for(const[te,G]of M)if(!Rp(P,F,te).is(G))return!0;return!1}for(const M of L){if(M.stateVersions.get(F.version)||!j(M.depValuesDiscoveredSoFarDuringAsyncWork))return M.stateVersions.set(F.version,!0),M;M.stateVersions.set(F.version,!1)}}function O(P){return c.get(P)}function C(P,F,L,j,M){c.set(P,{depValuesDiscoveredSoFarDuringAsyncWork:j,executionID:F,loadingLoadable:L,stateVersions:new Map([[M.version,!0]])})}function k(P,F,L){if(N(P,F)){const j=O(P);j!=null&&(j.depValuesDiscoveredSoFarDuringAsyncWork=L)}}function A(P){c.delete(P)}function N(P,F){var L;return F===((L=O(P))===null||L===void 0?void 0:L.executionID)}function B(P){return Array.from(P.entries()).map(([F,L])=>[F,L.contents])}function R(P,F,L){P.atomValues.set(n,F);try{a.set(B(L),F)}catch(j){throw Ke(`Problem with setting cache for selector "${n}": ${j.message}`)}}function T(P){if(Yu.includes(n)){const F=`Recoil selector has circular dependencies: ${Yu.slice(Yu.indexOf(n)).join(" → ")}`;return Ap(Ke(F))}Yu.push(n);try{return P()}finally{Yu.pop()}}function U(P,F){const L=F.atomValues.get(n);return L??a.get(j=>{var M;return typeof j!="string"&&wd(!1),(M=cG(P,F,j))===null||M===void 0?void 0:M.contents})}function $(P,F){return T(()=>b(P,F))}function z(P){P.atomValues.delete(n)}function J(P,F){e==null&&wd(!1);for(const j of o){var L;const M=pG(j);(L=M.clearCache)===null||L===void 0||L.call(M,P,F)}o.clear(),z(F),a.clear(),KC(P,e)}return s!=null?e=qC({key:n,nodeType:"selector",peek:U,get:$,set:(F,L,j)=>{let M=!1;const te=new Map;function G({key:oe}){if(M)throw Ke("Recoil: Async selector sets are not currently supported.");const De=Rp(F,L,oe);if(De.state==="hasValue")return De.contents;if(De.state==="loading"){const He=`Getting value of asynchronous atom or selector "${oe}" in a pending state while setting selector "${n}" is not yet supported.`;throw Ke(He)}else throw De.contents}function ee(oe,De){if(M)throw Ke("Recoil: Async selector sets are not currently supported.");const He=typeof De=="function"?De(G(oe)):De;uG(F,L,oe.key,He).forEach((Me,ve)=>te.set(ve,Me))}function de(oe){ee(oe,hG)}const ye=s({set:ee,get:G,reset:de},j);if(ye!==void 0)throw Ct(ye)?Ke("Recoil: Async selector sets are not currently supported."):Ke("Recoil: selector set should be a void function.");return M=!0,te},init:h,invalidate:z,clearCache:J,shouldDeleteConfigOnRelease:f,dangerouslyAllowMutability:t.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:l}):e=qC({key:n,nodeType:"selector",peek:U,get:$,init:h,invalidate:z,clearCache:J,shouldDeleteConfigOnRelease:f,dangerouslyAllowMutability:t.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:l})}KO.value=t=>new GO(t);var Mc=KO;const{isLoadable:wG,loadableWithError:l0,loadableWithPromise:c0,loadableWithValue:Ll}=_f,{WrappedValue:QO}=zO,{peekNodeInfo:bG}=Go,{DEFAULT_VALUE:ua,DefaultValue:Gs,getConfigDeletionHandler:YO,registerNode:SG,setConfigDeletionHandler:EG}=Tr,{isRecoilValue:xG}=Dc,{getRecoilValueAsLoadable:TG,markRecoilValueModified:IG,setRecoilValue:QC,setRecoilValueLoadable:CG}=Xi,{retainedByOptionWithDefault:kG}=yl,Xu=t=>t instanceof QO?t.value:t;function AG(t){const{key:e,persistence_UNSTABLE:n}=t,r=kG(t.retainedBy_UNSTABLE);let i=0;function s(g){return c0(g.then(_=>(o=Ll(_),_)).catch(_=>{throw o=l0(_),_}))}let o=Ct(t.default)?s(t.default):wG(t.default)?t.default.state==="loading"?s(t.default.contents):t.default:Ll(Xu(t.default));o.contents;let a;const l=new Map;function c(g){return g}function u(g,_){const S=_.then(I=>{var E,D;return((D=((E=g.getState().nextTree)!==null&&E!==void 0?E:g.getState().currentTree).atomValues.get(e))===null||D===void 0?void 0:D.contents)===S&&QC(g,m,I),I}).catch(I=>{var E,D;throw((D=((E=g.getState().nextTree)!==null&&E!==void 0?E:g.getState().currentTree).atomValues.get(e))===null||D===void 0?void 0:D.contents)===S&&CG(g,m,l0(I)),I});return S}function d(g,_,S){var I;i++;const E=()=>{var A;i--,(A=l.get(g))===null||A===void 0||A.forEach(N=>N()),l.delete(g)};if(g.getState().knownAtoms.add(e),o.state==="loading"){const A=()=>{var N;((N=g.getState().nextTree)!==null&&N!==void 0?N:g.getState().currentTree).atomValues.has(e)||IG(g,m)};o.contents.finally(A)}const D=(I=t.effects)!==null&&I!==void 0?I:t.effects_UNSTABLE;if(D!=null){let T=function(F){if(N&&F.key===e){const L=A;return L instanceof Gs?h(g,_):Ct(L)?c0(L.then(j=>j instanceof Gs?o.toPromise():j)):Ll(L)}return TG(g,F)},U=function(F){return T(F).toPromise()},$=function(F){var L;const j=bG(g,(L=g.getState().nextTree)!==null&&L!==void 0?L:g.getState().currentTree,F.key);return N&&F.key===e&&!(A instanceof Gs)?{...j,isSet:!0,loadable:T(F)}:j};var O=T,C=U,k=$;let A=ua,N=!0,B=!1,R=null;const z=F=>L=>{if(N){const j=T(m),M=j.state==="hasValue"?j.contents:ua;A=typeof L=="function"?L(M):L,Ct(A)&&(A=A.then(te=>(R={effect:F,value:te},te)))}else{if(Ct(L))throw Ke("Setting atoms to async values is not implemented.");typeof L!="function"&&(R={effect:F,value:Xu(L)}),QC(g,m,typeof L=="function"?j=>{const M=Xu(L(j));return R={effect:F,value:M},M}:Xu(L))}},J=F=>()=>z(F)(ua),P=F=>L=>{var j;const{release:M}=g.subscribeToTransactions(te=>{var G;let{currentTree:ee,previousTree:de}=te.getState();de||(de=ee);const ye=(G=ee.atomValues.get(e))!==null&&G!==void 0?G:o;if(ye.state==="hasValue"){var oe,De,He,Ee;const Me=ye.contents,ve=(oe=de.atomValues.get(e))!==null&&oe!==void 0?oe:o,Le=ve.state==="hasValue"?ve.contents:ua;((De=R)===null||De===void 0?void 0:De.effect)!==F||((He=R)===null||He===void 0?void 0:He.value)!==Me?L(Me,Le,!ee.atomValues.has(e)):((Ee=R)===null||Ee===void 0?void 0:Ee.effect)===F&&(R=null)}},e);l.set(g,[...(j=l.get(g))!==null&&j!==void 0?j:[],M])};for(const F of D)try{const L=F({node:m,storeID:g.storeID,parentStoreID_UNSTABLE:g.parentStoreID,trigger:S,setSelf:z(F),resetSelf:J(F),onSet:P(F),getPromise:U,getLoadable:T,getInfo_UNSTABLE:$});if(L!=null){var b;l.set(g,[...(b=l.get(g))!==null&&b!==void 0?b:[],L])}}catch(L){A=L,B=!0}if(N=!1,!(A instanceof Gs)){var x;const F=B?l0(A):Ct(A)?c0(u(g,A)):Ll(Xu(A));F.contents,_.atomValues.set(e,F),(x=g.getState().nextTree)===null||x===void 0||x.atomValues.set(e,F)}}return E}function h(g,_){var S,I;return(S=(I=_.atomValues.get(e))!==null&&I!==void 0?I:a)!==null&&S!==void 0?S:o}function f(g,_){if(_.atomValues.has(e))return Lt(_.atomValues.get(e));if(_.nonvalidatedAtoms.has(e)){if(a!=null)return a;if(n==null)return o;const S=_.nonvalidatedAtoms.get(e),I=n.validator(S,ua);return a=I instanceof Gs?o:Ll(I),a}else return o}function p(){a=void 0}function y(g,_,S){if(_.atomValues.has(e)){const I=Lt(_.atomValues.get(e));if(I.state==="hasValue"&&S===I.contents)return new Map}else if(!_.nonvalidatedAtoms.has(e)&&S instanceof Gs)return new Map;return a=void 0,new Map().set(e,Ll(S))}function w(){return YO(e)!==void 0&&i<=0}const m=SG({key:e,nodeType:"atom",peek:h,get:f,set:y,init:d,invalidate:p,shouldDeleteConfigOnRelease:w,dangerouslyAllowMutability:t.dangerouslyAllowMutability,persistence_UNSTABLE:t.persistence_UNSTABLE?{type:t.persistence_UNSTABLE.type,backButton:t.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:r});return m}function qS(t){const{...e}=t,n="default"in t?t.default:new Promise(()=>{});return xG(n)?RG({...e,default:n}):AG({...e,default:n})}function RG(t){const e=qS({...t,default:ua,persistence_UNSTABLE:t.persistence_UNSTABLE===void 0?void 0:{...t.persistence_UNSTABLE,validator:r=>r instanceof Gs?r:Lt(t.persistence_UNSTABLE).validator(r,ua)},effects:t.effects,effects_UNSTABLE:t.effects_UNSTABLE}),n=Mc({key:`${t.key}__withFallback`,get:({get:r})=>{const i=r(e);return i instanceof Gs?t.default:i},set:({set:r},i)=>r(e,i),cachePolicy_UNSTABLE:{eviction:"most-recent"},dangerouslyAllowMutability:t.dangerouslyAllowMutability});return EG(n.key,YO(t.key)),n}qS.value=t=>new QO(t);var XO=qS;class NG{constructor(e){var n;ze(this,"_map",void 0),ze(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=(n=e==null?void 0:e.mapKey)!==null&&n!==void 0?n:r=>r}size(){return this._map.size}has(e){return this._map.has(this._keyMapper(e))}get(e){return this._map.get(this._keyMapper(e))}set(e,n){this._map.set(this._keyMapper(e),n)}delete(e){this._map.delete(this._keyMapper(e))}clear(){this._map.clear()}}var PG={MapCache:NG},DG=PG.MapCache,OG=Object.freeze({__proto__:null,MapCache:DG});const{LRUCache:YC}=HO,{MapCache:LG}=OG,Pp={equality:"reference",eviction:"none",maxSize:1/0};function MG({equality:t=Pp.equality,eviction:e=Pp.eviction,maxSize:n=Pp.maxSize}=Pp){const r=$G(t);return FG(e,n,r)}function $G(t){switch(t){case"reference":return e=>e;case"value":return e=>$y(e)}throw Ke(`Unrecognized equality policy ${t}`)}function FG(t,e,n){switch(t){case"keep-all":return new LG({mapKey:n});case"lru":return new YC({mapKey:n,maxSize:Lt(e)});case"most-recent":return new YC({mapKey:n,maxSize:1})}throw Ke(`Unrecognized eviction policy ${t}`)}var JO=MG;const{setConfigDeletionHandler:UG}=Tr;function jG(t){var e,n;const r=JO({equality:(e=(n=t.cachePolicyForParams_UNSTABLE)===null||n===void 0?void 0:n.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return i=>{var s,o;const a=r.get(i);if(a!=null)return a;const{cachePolicyForParams_UNSTABLE:l,...c}=t,u="default"in t?t.default:new Promise(()=>{}),d=XO({...c,key:`${t.key}__${(s=$y(i))!==null&&s!==void 0?s:"void"}`,default:typeof u=="function"?u(i):u,retainedBy_UNSTABLE:typeof t.retainedBy_UNSTABLE=="function"?t.retainedBy_UNSTABLE(i):t.retainedBy_UNSTABLE,effects:typeof t.effects=="function"?t.effects(i):typeof t.effects_UNSTABLE=="function"?t.effects_UNSTABLE(i):(o=t.effects)!==null&&o!==void 0?o:t.effects_UNSTABLE});return r.set(i,d),UG(d.key,()=>{r.delete(i)}),d}}var VG=jG;const{setConfigDeletionHandler:BG}=Tr;let zG=0;function WG(t){var e,n;const r=JO({equality:(e=(n=t.cachePolicyForParams_UNSTABLE)===null||n===void 0?void 0:n.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return i=>{var s;let o;try{o=r.get(i)}catch(h){throw Ke(`Problem with cache lookup for selector ${t.key}: ${h.message}`)}if(o!=null)return o;const a=`${t.key}__selectorFamily/${(s=$y(i,{allowFunctions:!0}))!==null&&s!==void 0?s:"void"}/${zG++}`,l=h=>t.get(i)(h),c=t.cachePolicy_UNSTABLE,u=typeof t.retainedBy_UNSTABLE=="function"?t.retainedBy_UNSTABLE(i):t.retainedBy_UNSTABLE;let d;if(t.set!=null){const h=t.set;d=Mc({key:a,get:l,set:(p,y)=>h(i)(p,y),cachePolicy_UNSTABLE:c,dangerouslyAllowMutability:t.dangerouslyAllowMutability,retainedBy_UNSTABLE:u})}else d=Mc({key:a,get:l,cachePolicy_UNSTABLE:c,dangerouslyAllowMutability:t.dangerouslyAllowMutability,retainedBy_UNSTABLE:u});return r.set(i,d),BG(d.key,()=>{r.delete(i)}),d}}var qo=WG;const HG=qo({key:"__constant",get:t=>()=>t,cachePolicyForParams_UNSTABLE:{equality:"reference"}});function GG(t){return HG(t)}var qG=GG;const KG=qo({key:"__error",get:t=>()=>{throw Ke(t)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});function QG(t){return KG(t)}var YG=QG;function XG(t){return t}var JG=XG;const{loadableWithError:ZO,loadableWithPromise:eL,loadableWithValue:tL}=_f;function Fy(t,e){const n=Array(e.length).fill(void 0),r=Array(e.length).fill(void 0);for(const[i,s]of e.entries())try{n[i]=t(s)}catch(o){r[i]=o}return[n,r]}function ZG(t){return t!=null&&!Ct(t)}function Uy(t){return Array.isArray(t)?t:Object.getOwnPropertyNames(t).map(e=>t[e])}function r1(t,e){return Array.isArray(t)?e:Object.getOwnPropertyNames(t).reduce((n,r,i)=>({...n,[r]:e[i]}),{})}function gc(t,e,n){const r=n.map((i,s)=>i==null?tL(e[s]):Ct(i)?eL(i):ZO(i));return r1(t,r)}function eq(t,e){return e.map((n,r)=>n===void 0?t[r]:n)}const tq=qo({key:"__waitForNone",get:t=>({get:e})=>{const n=Uy(t),[r,i]=Fy(e,n);return gc(t,r,i)},dangerouslyAllowMutability:!0}),nq=qo({key:"__waitForAny",get:t=>({get:e})=>{const n=Uy(t),[r,i]=Fy(e,n);return i.some(s=>!Ct(s))?gc(t,r,i):new Promise(s=>{for(const[o,a]of i.entries())Ct(a)&&a.then(l=>{r[o]=l,i[o]=void 0,s(gc(t,r,i))}).catch(l=>{i[o]=l,s(gc(t,r,i))})})},dangerouslyAllowMutability:!0}),rq=qo({key:"__waitForAll",get:t=>({get:e})=>{const n=Uy(t),[r,i]=Fy(e,n);if(i.every(o=>o==null))return r1(t,r);const s=i.find(ZG);if(s!=null)throw s;return Promise.all(i).then(o=>r1(t,eq(r,o)))},dangerouslyAllowMutability:!0}),iq=qo({key:"__waitForAllSettled",get:t=>({get:e})=>{const n=Uy(t),[r,i]=Fy(e,n);return i.every(s=>!Ct(s))?gc(t,r,i):Promise.all(i.map((s,o)=>Ct(s)?s.then(a=>{r[o]=a,i[o]=void 0}).catch(a=>{r[o]=void 0,i[o]=a}):null)).then(()=>gc(t,r,i))},dangerouslyAllowMutability:!0}),sq=qo({key:"__noWait",get:t=>({get:e})=>{try{return Mc.value(tL(e(t)))}catch(n){return Mc.value(Ct(n)?eL(n):ZO(n))}},dangerouslyAllowMutability:!0});var oq={waitForNone:tq,waitForAny:nq,waitForAll:rq,waitForAllSettled:iq,noWait:sq};const{RecoilLoadable:aq}=_f,{DefaultValue:lq}=Tr,{RecoilRoot:cq,useRecoilStoreID:uq}=Ns,{isRecoilValue:dq}=Dc,{retentionZone:hq}=Iy,{freshSnapshot:fq}=Py,{useRecoilState:pq,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:mq,useRecoilStateLoadable:gq,useRecoilValue:yq,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:vq,useRecoilValueLoadable:_q,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:wq,useResetRecoilState:bq,useSetRecoilState:Sq}=PW,{useGotoRecoilSnapshot:Eq,useRecoilSnapshot:xq,useRecoilTransactionObserver:Tq}=FO,{useRecoilCallback:Iq}=BO,{noWait:Cq,waitForAll:kq,waitForAllSettled:Aq,waitForAny:Rq,waitForNone:Nq}=oq;var jy={DefaultValue:lq,isRecoilValue:dq,RecoilLoadable:aq,RecoilEnv:fu,RecoilRoot:cq,useRecoilStoreID:uq,useRecoilBridgeAcrossReactRoots_UNSTABLE:sH,atom:XO,selector:Mc,atomFamily:VG,selectorFamily:qo,constSelector:qG,errorSelector:YG,readOnlySelector:JG,noWait:Cq,waitForNone:Nq,waitForAny:Rq,waitForAll:kq,waitForAllSettled:Aq,useRecoilValue:yq,useRecoilValueLoadable:_q,useRecoilState:pq,useRecoilStateLoadable:gq,useSetRecoilState:Sq,useResetRecoilState:bq,useGetRecoilValueInfo_UNSTABLE:ZW,useRecoilRefresher_UNSTABLE:OH,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:wq,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:vq,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:mq,useRecoilCallback:Iq,useRecoilTransaction_UNSTABLE:UH,useGotoRecoilSnapshot:Eq,useRecoilSnapshot:xq,useRecoilTransactionObserver_UNSTABLE:Tq,snapshot_UNSTABLE:fq,useRetain:BS,retentionZone:hq},Pq=jy.RecoilRoot,Tf=jy.atom,Dq=jy.useRecoilValue,Et=jy.useRecoilState;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nL={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce=function(t,e){if(!t)throw mu(e)},mu=function(t){return new Error("Firebase Database ("+nL.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Oq=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},KS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=s>>2,d=(s&3)<<4|a>>4;let h=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(h=64)),r.push(n[u],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(rL(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Oq(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new Lq;const h=s<<2|a>>4;if(r.push(h),c!==64){const f=a<<4&240|c>>2;if(r.push(f),d!==64){const p=c<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Lq extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const iL=function(t){const e=rL(t);return KS.encodeByteArray(e,!0)},rg=function(t){return iL(t).replace(/\./g,"")},ig=function(t){try{return KS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mq(t){return Sh(void 0,t)}function Sh(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!$q(n)||(t[n]=Sh(t[n],e[n]));return t}function $q(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fq(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uq=()=>Fq().__FIREBASE_DEFAULTS__,jq=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Vq=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ig(t[1]);return e&&JSON.parse(e)},Vy=()=>{try{return Uq()||jq()||Vq()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Bq=t=>{var e,n;return(n=(e=Vy())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},zq=t=>{const e=Bq(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Wq=()=>{var t;return(t=Vy())===null||t===void 0?void 0:t.config},Hq=t=>{var e;return(e=Vy())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[rg(JSON.stringify(n)),rg(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zt())}function By(){var t;const e=(t=Vy())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Gq(){return typeof self=="object"&&self.self===self}function sL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function zy(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function oL(){const t=zt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function aL(){return nL.NODE_ADMIN===!0}function qq(){return!By()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Eh(){try{return typeof indexedDB=="object"}catch{return!1}}function Kq(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qq="FirebaseError";class Hn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Qq,Object.setPrototypeOf(this,Hn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vl.prototype.create)}}class vl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Yq(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Hn(i,a,r)}}function Yq(t,e){return t.replace(Xq,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Xq=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xh(t){return JSON.parse(t)}function sn(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lL=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=xh(ig(s[0])||""),n=xh(ig(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},Jq=function(t){const e=lL(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Zq=function(t){const e=lL(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function qa(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function sg(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function og(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function i1(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(XC(s)&&XC(o)){if(!i1(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function XC(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _l(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function sc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function bd(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eK{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,u;for(let d=0;d<80;d++){d<40?d<20?(c=a^s&(o^a),u=1518500249):(c=s^o^a,u=1859775393):d<60?(c=s&o|a&(s|o),u=2400959708):(c=s^o^a,u=3395469782);const h=(i<<5|i>>>27)+c+l+u+r[d]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function cL(t,e){const n=new tK(t,e);return n.subscribe.bind(n)}class tK{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");nK(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=u0),i.error===void 0&&(i.error=u0),i.complete===void 0&&(i.complete=u0);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nK(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function u0(){}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const je=function(t,e,n,r){let i;if(r<e?i="at least "+e:r>n&&(i=n===0?"none":"no more than "+n),i){const s=t+" failed: Was called with "+r+(r===1?" argument.":" arguments.")+" Expects "+i+".";throw new Error(s)}};function Sr(t,e){return`${t} failed: ${e} argument `}function mn(t,e,n,r){if(!(r&&!n)&&typeof n!="function")throw new Error(Sr(t,e)+"must be a valid function.")}function JC(t,e,n,r){if(!(r&&!n)&&(typeof n!="object"||n===null))throw new Error(Sr(t,e)+"must be a valid context object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rK=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,ce(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Wy=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(t){return t&&t._delegate?t._delegate:t}class sr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new hr;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sK(e))try{this.getOrInitializeService({instanceIdentifier:aa})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=aa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=aa){return this.instances.has(e)}getOptions(e=aa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:iK(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=aa){return this.component?this.component.multipleInstances?e:aa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function iK(t){return t===aa?void 0:t}function sK(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new uL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS=[];var st;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(st||(st={}));const hL={debug:st.DEBUG,verbose:st.VERBOSE,info:st.INFO,warn:st.WARN,error:st.ERROR,silent:st.SILENT},oK=st.INFO,aK={[st.DEBUG]:"log",[st.VERBOSE]:"log",[st.INFO]:"info",[st.WARN]:"warn",[st.ERROR]:"error"},lK=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=aK[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class gu{constructor(e){this.name=e,this._logLevel=oK,this._logHandler=lK,this._userLogHandler=null,XS.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in st))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,st.DEBUG,...e),this._logHandler(this,st.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,st.VERBOSE,...e),this._logHandler(this,st.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,st.INFO,...e),this._logHandler(this,st.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,st.WARN,...e),this._logHandler(this,st.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,st.ERROR,...e),this._logHandler(this,st.ERROR,...e)}}function cK(t){XS.forEach(e=>{e.setLogLevel(t)})}function uK(t,e){for(const n of XS){let r=null;e&&e.level&&(r=hL[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(r??i.logLevel)&&t({level:st[s].toLowerCase(),message:a,args:o,type:i.name})}}}const dK=(t,e)=>e.some(n=>t instanceof n);let ZC,ek;function hK(){return ZC||(ZC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fK(){return ek||(ek=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fL=new WeakMap,s1=new WeakMap,pL=new WeakMap,d0=new WeakMap,JS=new WeakMap;function pK(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(po(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&fL.set(n,t)}).catch(()=>{}),JS.set(e,t),e}function mK(t){if(s1.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});s1.set(t,e)}let o1={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return s1.get(t);if(e==="objectStoreNames")return t.objectStoreNames||pL.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return po(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function gK(t){o1=t(o1)}function yK(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(h0(this),e,...n);return pL.set(r,e.sort?e.sort():[e]),po(r)}:fK().includes(t)?function(...e){return t.apply(h0(this),e),po(fL.get(this))}:function(...e){return po(t.apply(h0(this),e))}}function vK(t){return typeof t=="function"?yK(t):(t instanceof IDBTransaction&&mK(t),dK(t,hK())?new Proxy(t,o1):t)}function po(t){if(t instanceof IDBRequest)return pK(t);if(d0.has(t))return d0.get(t);const e=vK(t);return e!==t&&(d0.set(t,e),JS.set(e,t)),e}const h0=t=>JS.get(t);function _K(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=po(o);return r&&o.addEventListener("upgradeneeded",l=>{r(po(o.result),l.oldVersion,l.newVersion,po(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}const wK=["get","getKey","getAll","getAllKeys","count"],bK=["put","add","delete","clear"],f0=new Map;function tk(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(f0.get(e))return f0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=bK.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||wK.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return f0.set(e,s),s}gK(t=>({...t,get:(e,n,r)=>tk(e,n)||t.get(e,n,r),has:(e,n)=>!!tk(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SK{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(EK(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function EK(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const a1="@firebase/app",nk="0.9.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka=new gu("@firebase/app"),xK="@firebase/app-compat",TK="@firebase/analytics-compat",IK="@firebase/analytics",CK="@firebase/app-check-compat",kK="@firebase/app-check",AK="@firebase/auth",RK="@firebase/auth-compat",NK="@firebase/database",PK="@firebase/database-compat",DK="@firebase/functions",OK="@firebase/functions-compat",LK="@firebase/installations",MK="@firebase/installations-compat",$K="@firebase/messaging",FK="@firebase/messaging-compat",UK="@firebase/performance",jK="@firebase/performance-compat",VK="@firebase/remote-config",BK="@firebase/remote-config-compat",zK="@firebase/storage",WK="@firebase/storage-compat",HK="@firebase/firestore",GK="@firebase/firestore-compat",qK="firebase",KK="9.17.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo="[DEFAULT]",QK={[a1]:"fire-core",[xK]:"fire-core-compat",[IK]:"fire-analytics",[TK]:"fire-analytics-compat",[kK]:"fire-app-check",[CK]:"fire-app-check-compat",[AK]:"fire-auth",[RK]:"fire-auth-compat",[NK]:"fire-rtdb",[PK]:"fire-rtdb-compat",[DK]:"fire-fn",[OK]:"fire-fn-compat",[LK]:"fire-iid",[MK]:"fire-iid-compat",[$K]:"fire-fcm",[FK]:"fire-fcm-compat",[UK]:"fire-perf",[jK]:"fire-perf-compat",[VK]:"fire-rc",[BK]:"fire-rc-compat",[zK]:"fire-gcs",[WK]:"fire-gcs-compat",[HK]:"fire-fst",[GK]:"fire-fst-compat","fire-js":"fire-js",[qK]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo=new Map,Th=new Map;function ag(t,e){try{t.container.addComponent(e)}catch(n){Ka.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function mL(t,e){t.container.addOrOverwriteComponent(e)}function Wi(t){const e=t.name;if(Th.has(e))return Ka.debug(`There were multiple attempts to register component ${e}.`),!1;Th.set(e,t);for(const n of xo.values())ag(n,t);return!0}function ZS(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function YK(t,e,n=Eo){ZS(t,e).clearInstance(n)}function XK(){Th.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JK={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ms=new vl("app","Firebase",JK);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ZK=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new sr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ms.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps=KK;function eE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Eo,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ms.create("bad-app-name",{appName:String(i)});if(n||(n=Wq()),!n)throw ms.create("no-options");const s=xo.get(i);if(s){if(i1(n,s.options)&&i1(r,s.config))return s;throw ms.create("duplicate-app",{appName:i})}const o=new dL(i);for(const l of Th.values())o.addComponent(l);const a=new ZK(n,r,o);return xo.set(i,a),a}function gL(t=Eo){const e=xo.get(t);if(!e&&t===Eo)return eE();if(!e)throw ms.create("no-app",{appName:t});return e}function e9(){return Array.from(xo.values())}async function yL(t){const e=t.name;xo.has(e)&&(xo.delete(e),await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function Er(t,e,n){var r;let i=(r=QK[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ka.warn(a.join(" "));return}Wi(new sr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function vL(t,e){if(t!==null&&typeof t!="function")throw ms.create("invalid-log-argument");uK(t,e)}function _L(t){cK(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t9="firebase-heartbeat-database",n9=1,Ih="firebase-heartbeat-store";let p0=null;function wL(){return p0||(p0=_K(t9,n9,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ih)}}}).catch(t=>{throw ms.create("idb-open",{originalErrorMessage:t.message})})),p0}async function r9(t){try{return(await wL()).transaction(Ih).objectStore(Ih).get(bL(t))}catch(e){if(e instanceof Hn)Ka.warn(e.message);else{const n=ms.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ka.warn(n.message)}}}async function rk(t,e){try{const r=(await wL()).transaction(Ih,"readwrite");return await r.objectStore(Ih).put(e,bL(t)),r.done}catch(n){if(n instanceof Hn)Ka.warn(n.message);else{const r=ms.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ka.warn(r.message)}}}function bL(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i9=1024,s9=30*24*60*60*1e3;class o9{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new l9(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ik();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=s9}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=ik(),{heartbeatsToSend:n,unsentEntries:r}=a9(this._heartbeatsCache.heartbeats),i=rg(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function ik(){return new Date().toISOString().substring(0,10)}function a9(t,e=i9){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),sk(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),sk(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class l9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Eh()?Kq().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await r9(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return rk(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return rk(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function sk(t){return rg(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c9(t){Wi(new sr("platform-logger",e=>new SK(e),"PRIVATE")),Wi(new sr("heartbeat",e=>new o9(e),"PRIVATE")),Er(a1,nk,t),Er(a1,nk,"esm2017"),Er("fire-js","")}c9("");const u9=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Hn,SDK_VERSION:Ps,_DEFAULT_ENTRY_NAME:Eo,_addComponent:ag,_addOrOverwriteComponent:mL,_apps:xo,_clearComponents:XK,_components:Th,_getProvider:ZS,_registerComponent:Wi,_removeServiceInstance:YK,deleteApp:yL,getApp:gL,getApps:e9,initializeApp:eE,onLog:vL,registerVersion:Er,setLogLevel:_L},Symbol.toStringTag,{value:"Module"}));var d9=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ke,tE=tE||{},Ve=d9||self;function lg(){}function Hy(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function If(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function h9(t){return Object.prototype.hasOwnProperty.call(t,m0)&&t[m0]||(t[m0]=++f9)}var m0="closure_uid_"+(1e9*Math.random()>>>0),f9=0;function p9(t,e,n){return t.call.apply(t.bind,arguments)}function m9(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Gn(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Gn=p9:Gn=m9,Gn.apply(null,arguments)}function Dp(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Un(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Wb=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Ko(){this.s=this.s,this.o=this.o}var g9=0;Ko.prototype.s=!1;Ko.prototype.na=function(){!this.s&&(this.s=!0,this.M(),g9!=0)&&h9(this)};Ko.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const SL=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function nE(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function ok(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Hy(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function qn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}qn.prototype.h=function(){this.defaultPrevented=!0};var y9=function(){if(!Ve.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Ve.addEventListener("test",lg,e),Ve.removeEventListener("test",lg,e)}catch{}return t}();function cg(t){return/^[\s\xa0]*$/.test(t)}var ak=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function g0(t,e){return t<e?-1:t>e?1:0}function Gy(){var t=Ve.navigator;return t&&(t=t.userAgent)?t:""}function Ci(t){return Gy().indexOf(t)!=-1}function rE(t){return rE[" "](t),t}rE[" "]=lg;function v9(t){var e=b9;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var _9=Ci("Opera"),$c=Ci("Trident")||Ci("MSIE"),EL=Ci("Edge"),l1=EL||$c,xL=Ci("Gecko")&&!(Gy().toLowerCase().indexOf("webkit")!=-1&&!Ci("Edge"))&&!(Ci("Trident")||Ci("MSIE"))&&!Ci("Edge"),w9=Gy().toLowerCase().indexOf("webkit")!=-1&&!Ci("Edge");function TL(){var t=Ve.document;return t?t.documentMode:void 0}var ug;e:{var y0="",v0=function(){var t=Gy();if(xL)return/rv:([^\);]+)(\)|;)/.exec(t);if(EL)return/Edge\/([\d\.]+)/.exec(t);if($c)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(w9)return/WebKit\/(\S+)/.exec(t);if(_9)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(v0&&(y0=v0?v0[1]:""),$c){var _0=TL();if(_0!=null&&_0>parseFloat(y0)){ug=String(_0);break e}}ug=y0}var b9={};function S9(){return v9(function(){let t=0;const e=ak(String(ug)).split("."),n=ak("9").split("."),r=Math.max(e.length,n.length);for(let o=0;t==0&&o<r;o++){var i=e[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],i[0].length==0&&s[0].length==0)break;t=g0(i[1].length==0?0:parseInt(i[1],10),s[1].length==0?0:parseInt(s[1],10))||g0(i[2].length==0,s[2].length==0)||g0(i[2],s[2]),i=i[3],s=s[3]}while(t==0)}return 0<=t})}var c1;if(Ve.document&&$c){var lk=TL();c1=lk||parseInt(ug,10)||void 0}else c1=void 0;var E9=c1;function Ch(t,e){if(qn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(xL){e:{try{rE(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:x9[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Ch.X.h.call(this)}}Un(Ch,qn);var x9={2:"touch",3:"pen",4:"mouse"};Ch.prototype.h=function(){Ch.X.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Cf="closure_listenable_"+(1e6*Math.random()|0),T9=0;function I9(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ha=i,this.key=++T9,this.ba=this.ea=!1}function qy(t){t.ba=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function iE(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function IL(t){const e={};for(const n in t)e[n]=t[n];return e}const ck="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function CL(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<ck.length;s++)n=ck[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Ky(t){this.src=t,this.g={},this.h=0}Ky.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=d1(t,e,r,i);return-1<o?(e=t[o],n||(e.ea=!1)):(e=new I9(e,this.src,s,!!r,i),e.ea=n,t.push(e)),e};function u1(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=SL(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(qy(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function d1(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.ba&&s.listener==e&&s.capture==!!n&&s.ha==r)return i}return-1}var sE="closure_lm_"+(1e6*Math.random()|0),w0={};function kL(t,e,n,r,i){if(r&&r.once)return RL(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)kL(t,e[s],n,r,i);return null}return n=lE(n),t&&t[Cf]?t.N(e,n,If(r)?!!r.capture:!!r,i):AL(t,e,n,!1,r,i)}function AL(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=If(i)?!!i.capture:!!i,a=aE(t);if(a||(t[sE]=a=new Ky(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=C9(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)y9||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(PL(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function C9(){function t(n){return e.call(t.src,t.listener,n)}const e=k9;return t}function RL(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)RL(t,e[s],n,r,i);return null}return n=lE(n),t&&t[Cf]?t.O(e,n,If(r)?!!r.capture:!!r,i):AL(t,e,n,!0,r,i)}function NL(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)NL(t,e[s],n,r,i);else r=If(r)?!!r.capture:!!r,n=lE(n),t&&t[Cf]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=d1(s,n,r,i),-1<n&&(qy(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=aE(t))&&(e=t.g[e.toString()],t=-1,e&&(t=d1(e,n,r,i)),(n=-1<t?e[t]:null)&&oE(n))}function oE(t){if(typeof t!="number"&&t&&!t.ba){var e=t.src;if(e&&e[Cf])u1(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(PL(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=aE(e))?(u1(n,t),n.h==0&&(n.src=null,e[sE]=null)):qy(t)}}}function PL(t){return t in w0?w0[t]:w0[t]="on"+t}function k9(t,e){if(t.ba)t=!0;else{e=new Ch(e,this);var n=t.listener,r=t.ha||t.src;t.ea&&oE(t),t=n.call(r,e)}return t}function aE(t){return t=t[sE],t instanceof Ky?t:null}var b0="__closure_events_fn_"+(1e9*Math.random()>>>0);function lE(t){return typeof t=="function"?t:(t[b0]||(t[b0]=function(e){return t.handleEvent(e)}),t[b0])}function bn(){Ko.call(this),this.i=new Ky(this),this.P=this,this.I=null}Un(bn,Ko);bn.prototype[Cf]=!0;bn.prototype.removeEventListener=function(t,e,n,r){NL(this,t,e,n,r)};function Pn(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,typeof e=="string")e=new qn(e,t);else if(e instanceof qn)e.target=e.target||t;else{var i=e;e=new qn(r,t),CL(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Op(o,r,!0,e)&&i}if(o=e.g=t,i=Op(o,r,!0,e)&&i,i=Op(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=Op(o,r,!1,e)&&i}bn.prototype.M=function(){if(bn.X.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)qy(n[r]);delete t.g[e],t.h--}}this.I=null};bn.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};bn.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Op(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ba&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.ea&&u1(t.i,o),i=a.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var cE=Ve.JSON.stringify;function A9(){var t=LL;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class R9{constructor(){this.h=this.g=null}add(e,n){const r=DL.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var DL=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new N9,t=>t.reset());class N9{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function P9(t){Ve.setTimeout(()=>{throw t},0)}function OL(t,e){h1||D9(),f1||(h1(),f1=!0),LL.add(t,e)}var h1;function D9(){var t=Ve.Promise.resolve(void 0);h1=function(){t.then(O9)}}var f1=!1,LL=new R9;function O9(){for(var t;t=A9();){try{t.h.call(t.g)}catch(n){P9(n)}var e=DL;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}f1=!1}function Qy(t,e){bn.call(this),this.h=t||1,this.g=e||Ve,this.j=Gn(this.lb,this),this.l=Date.now()}Un(Qy,bn);ke=Qy.prototype;ke.ca=!1;ke.R=null;ke.lb=function(){if(this.ca){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-t):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Pn(this,"tick"),this.ca&&(uE(this),this.start()))}};ke.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function uE(t){t.ca=!1,t.R&&(t.g.clearTimeout(t.R),t.R=null)}ke.M=function(){Qy.X.M.call(this),uE(this),delete this.g};function dE(t,e,n){if(typeof t=="function")n&&(t=Gn(t,n));else if(t&&typeof t.handleEvent=="function")t=Gn(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Ve.setTimeout(t,e||0)}function ML(t){t.g=dE(()=>{t.g=null,t.i&&(t.i=!1,ML(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class L9 extends Ko{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ML(this)}M(){super.M(),this.g&&(Ve.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function kh(t){Ko.call(this),this.h=t,this.g={}}Un(kh,Ko);var uk=[];function $L(t,e,n,r){Array.isArray(n)||(n&&(uk[0]=n.toString()),n=uk);for(var i=0;i<n.length;i++){var s=kL(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function FL(t){iE(t.g,function(e,n){this.g.hasOwnProperty(n)&&oE(e)},t),t.g={}}kh.prototype.M=function(){kh.X.M.call(this),FL(this)};kh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Yy(){this.g=!0}Yy.prototype.Aa=function(){this.g=!1};function M9(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");o=2<=d.length&&d[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function $9(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function oc(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+U9(t,n)+(r?" "+r:"")})}function F9(t,e){t.info(function(){return"TIMEOUT: "+e})}Yy.prototype.info=function(){};function U9(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return cE(n)}catch{return e}}var wl={},dk=null;function Xy(){return dk=dk||new bn}wl.Pa="serverreachability";function UL(t){qn.call(this,wl.Pa,t)}Un(UL,qn);function Ah(t){const e=Xy();Pn(e,new UL(e))}wl.STAT_EVENT="statevent";function jL(t,e){qn.call(this,wl.STAT_EVENT,t),this.stat=e}Un(jL,qn);function tr(t){const e=Xy();Pn(e,new jL(e,t))}wl.Qa="timingevent";function VL(t,e){qn.call(this,wl.Qa,t),this.size=e}Un(VL,qn);function kf(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Ve.setTimeout(function(){t()},e)}var Jy={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},BL={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function hE(){}hE.prototype.h=null;function hk(t){return t.h||(t.h=t.i())}function zL(){}var Af={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function fE(){qn.call(this,"d")}Un(fE,qn);function pE(){qn.call(this,"c")}Un(pE,qn);var p1;function Zy(){}Un(Zy,hE);Zy.prototype.g=function(){return new XMLHttpRequest};Zy.prototype.i=function(){return{}};p1=new Zy;function Rf(t,e,n,r){this.l=t,this.j=e,this.m=n,this.U=r||1,this.S=new kh(this),this.O=j9,t=l1?125:void 0,this.T=new Qy(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new WL}function WL(){this.i=null,this.g="",this.h=!1}var j9=45e3,m1={},dg={};ke=Rf.prototype;ke.setTimeout=function(t){this.O=t};function g1(t,e,n){t.K=1,t.v=tv(xs(e)),t.s=n,t.P=!0,HL(t,null)}function HL(t,e){t.F=Date.now(),Nf(t),t.A=xs(t.v);var n=t.A,r=t.U;Array.isArray(r)||(r=[String(r)]),ZL(n.i,"t",r),t.C=0,n=t.l.H,t.h=new WL,t.g=w2(t.l,n?e:null,!t.s),0<t.N&&(t.L=new L9(Gn(t.La,t,t.g),t.N)),$L(t.S,t.g,"readystatechange",t.ib),e=t.H?IL(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.da(t.A,t.u,t.s,e)):(t.u="GET",t.g.da(t.A,t.u,null,e)),Ah(),M9(t.j,t.u,t.A,t.m,t.U,t.s)}ke.ib=function(t){t=t.target;const e=this.L;e&&ls(t)==3?e.l():this.La(t)};ke.La=function(t){try{if(t==this.g)e:{const u=ls(this.g);var e=this.g.Ea();const d=this.g.aa();if(!(3>u)&&(u!=3||l1||this.g&&(this.h.h||this.g.fa()||gk(this.g)))){this.I||u!=4||e==7||(e==8||0>=d?Ah(3):Ah(2)),ev(this);var n=this.g.aa();this.Y=n;t:if(GL(this)){var r=gk(this.g);t="";var i=r.length,s=ls(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ba(this),jd(this);var o="";break t}this.h.i=new Ve.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=n==200,$9(this.j,this.u,this.A,this.m,this.U,u,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!cg(a)){var c=a;break t}}c=null}if(n=c)oc(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,y1(this,n);else{this.i=!1,this.o=3,tr(12),ba(this),jd(this);break e}}this.P?(qL(this,u,o),l1&&this.i&&u==3&&($L(this.S,this.T,"tick",this.hb),this.T.start())):(oc(this.j,this.m,o,null),y1(this,o)),u==4&&ba(this),this.i&&!this.I&&(u==4?g2(this.l,this):(this.i=!1,Nf(this)))}else n==400&&0<o.indexOf("Unknown SID")?(this.o=3,tr(12)):(this.o=0,tr(13)),ba(this),jd(this)}}}catch{}finally{}};function GL(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Da:!1}function qL(t,e,n){let r=!0,i;for(;!t.I&&t.C<n.length;)if(i=V9(t,n),i==dg){e==4&&(t.o=4,tr(14),r=!1),oc(t.j,t.m,null,"[Incomplete Response]");break}else if(i==m1){t.o=4,tr(15),oc(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else oc(t.j,t.m,i,null),y1(t,i);GL(t)&&i!=dg&&i!=m1&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,tr(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.$&&(t.$=!0,e=t.l,e.g==t&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),bE(e),e.K=!0,tr(11))):(oc(t.j,t.m,n,"[Invalid Chunked Response]"),ba(t),jd(t))}ke.hb=function(){if(this.g){var t=ls(this.g),e=this.g.fa();this.C<e.length&&(ev(this),qL(this,t,e),this.i&&t!=4&&Nf(this))}};function V9(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?dg:(n=Number(e.substring(n,r)),isNaN(n)?m1:(r+=1,r+n>e.length?dg:(e=e.substr(r,n),t.C=r+n,e)))}ke.cancel=function(){this.I=!0,ba(this)};function Nf(t){t.V=Date.now()+t.O,KL(t,t.O)}function KL(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=kf(Gn(t.gb,t),e)}function ev(t){t.B&&(Ve.clearTimeout(t.B),t.B=null)}ke.gb=function(){this.B=null;const t=Date.now();0<=t-this.V?(F9(this.j,this.A),this.K!=2&&(Ah(),tr(17)),ba(this),this.o=2,jd(this)):KL(this,this.V-t)};function jd(t){t.l.G==0||t.I||g2(t.l,t)}function ba(t){ev(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,uE(t.T),FL(t.S),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function y1(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||v1(n.h,t))){if(!t.J&&v1(n.h,t)&&n.G==3){try{var r=n.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)pg(n),iv(n);else break e;wE(n),tr(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&n.A==0&&!n.v&&(n.v=kf(Gn(n.cb,n),6e3));if(1>=n2(n.h)&&n.ja){try{n.ja()}catch{}n.ja=void 0}}else Sa(n,11)}else if((t.J||n.g==t)&&pg(n),!cg(e))for(i=n.Fa.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.T=c[0],c=c[1],n.G==2)if(c[0]=="c"){n.I=c[1],n.ka=c[2];const u=c[3];u!=null&&(n.ma=u,n.j.info("VER="+n.ma));const d=c[4];d!=null&&(n.Ca=d,n.j.info("SVER="+n.Ca));const h=c[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.h;s.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(mE(s,s.h),s.h=null))}if(r.D){const y=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;y&&(r.za=y,Ot(r.F,r.D,y))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-t.F,n.j.info("Handshake RTT: "+n.P+"ms")),r=n;var o=t;if(r.sa=_2(r,r.H?r.ka:null,r.V),o.J){r2(r.h,o);var a=o,l=r.J;l&&a.setTimeout(l),a.B&&(ev(a),Nf(a)),r.g=o}else p2(r);0<n.i.length&&sv(n)}else c[0]!="stop"&&c[0]!="close"||Sa(n,7);else n.G==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Sa(n,7):_E(n):c[0]!="noop"&&n.l&&n.l.wa(c),n.A=0)}}Ah(4)}catch{}}function B9(t){if(t.W&&typeof t.W=="function")return t.W();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Hy(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function z9(t){if(t.oa&&typeof t.oa=="function")return t.oa();if(!t.W||typeof t.W!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Hy(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function QL(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Hy(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=z9(t),r=B9(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var YL=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function W9(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Na(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Na){this.h=e!==void 0?e:t.h,hg(this,t.j),this.s=t.s,this.g=t.g,fg(this,t.m),this.l=t.l,e=t.i;var n=new Rh;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),fk(this,n),this.o=t.o}else t&&(n=String(t).match(YL))?(this.h=!!e,hg(this,n[1]||"",!0),this.s=Sd(n[2]||""),this.g=Sd(n[3]||"",!0),fg(this,n[4]),this.l=Sd(n[5]||"",!0),fk(this,n[6]||"",!0),this.o=Sd(n[7]||"")):(this.h=!!e,this.i=new Rh(null,this.h))}Na.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ed(e,pk,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Ed(e,pk,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Ed(n,n.charAt(0)=="/"?q9:G9,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Ed(n,Q9)),t.join("")};function xs(t){return new Na(t)}function hg(t,e,n){t.j=n?Sd(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function fg(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function fk(t,e,n){e instanceof Rh?(t.i=e,Y9(t.i,t.h)):(n||(e=Ed(e,K9)),t.i=new Rh(e,t.h))}function Ot(t,e,n){t.i.set(e,n)}function tv(t){return Ot(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Sd(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ed(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,H9),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function H9(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var pk=/[#\/\?@]/g,G9=/[#\?:]/g,q9=/[#\?]/g,K9=/[#\?@]/g,Q9=/#/g;function Rh(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Qo(t){t.g||(t.g=new Map,t.h=0,t.i&&W9(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}ke=Rh.prototype;ke.add=function(t,e){Qo(this),this.i=null,t=yu(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function XL(t,e){Qo(t),e=yu(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function JL(t,e){return Qo(t),e=yu(t,e),t.g.has(e)}ke.forEach=function(t,e){Qo(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};ke.oa=function(){Qo(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};ke.W=function(t){Qo(this);let e=[];if(typeof t=="string")JL(this,t)&&(e=e.concat(this.g.get(yu(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};ke.set=function(t,e){return Qo(this),this.i=null,t=yu(this,t),JL(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};ke.get=function(t,e){return t?(t=this.W(t),0<t.length?String(t[0]):e):e};function ZL(t,e,n){XL(t,e),0<n.length&&(t.i=null,t.g.set(yu(t,e),nE(n)),t.h+=n.length)}ke.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.W(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function yu(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Y9(t,e){e&&!t.j&&(Qo(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(XL(this,r),ZL(this,i,n))},t)),t.j=e}var X9=class{constructor(e,n){this.h=e,this.g=n}};function e2(t){this.l=t||J9,Ve.PerformanceNavigationTiming?(t=Ve.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Ve.g&&Ve.g.Ga&&Ve.g.Ga()&&Ve.g.Ga().$b),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var J9=10;function t2(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function n2(t){return t.h?1:t.g?t.g.size:0}function v1(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function mE(t,e){t.g?t.g.add(e):t.h=e}function r2(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}e2.prototype.cancel=function(){if(this.i=i2(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function i2(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return nE(t.i)}function gE(){}gE.prototype.stringify=function(t){return Ve.JSON.stringify(t,void 0)};gE.prototype.parse=function(t){return Ve.JSON.parse(t,void 0)};function Z9(){this.g=new gE}function e7(t,e,n){const r=n||"";try{QL(t,function(i,s){let o=i;If(i)&&(o=cE(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function t7(t,e){const n=new Yy;if(Ve.Image){const r=new Image;r.onload=Dp(Lp,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Dp(Lp,n,r,"TestLoadImage: error",!1,e),r.onabort=Dp(Lp,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Dp(Lp,n,r,"TestLoadImage: timeout",!1,e),Ve.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Lp(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Pf(t){this.l=t.ac||null,this.j=t.jb||!1}Un(Pf,hE);Pf.prototype.g=function(){return new nv(this.l,this.j)};Pf.prototype.i=function(t){return function(){return t}}({});function nv(t,e){bn.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=yE,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Un(nv,bn);var yE=0;ke=nv.prototype;ke.open=function(t,e){if(this.readyState!=yE)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Nh(this)};ke.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Ve).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))};ke.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Df(this)),this.readyState=yE};ke.Wa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Nh(this)),this.g&&(this.readyState=3,Nh(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Ve.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;s2(this)}else t.text().then(this.Va.bind(this),this.ga.bind(this))};function s2(t){t.j.read().then(t.Ta.bind(t)).catch(t.ga.bind(t))}ke.Ta=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Df(this):Nh(this),this.readyState==3&&s2(this)}};ke.Va=function(t){this.g&&(this.response=this.responseText=t,Df(this))};ke.Ua=function(t){this.g&&(this.response=t,Df(this))};ke.ga=function(){this.g&&Df(this)};function Df(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Nh(t)}ke.setRequestHeader=function(t,e){this.v.append(t,e)};ke.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};ke.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Nh(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(nv.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var n7=Ve.JSON.parse;function qt(t){bn.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=o2,this.K=this.L=!1}Un(qt,bn);var o2="",r7=/^https?$/i,i7=["POST","PUT"];ke=qt.prototype;ke.Ka=function(t){this.L=t};ke.da=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():p1.g(),this.C=this.u?hk(this.u):hk(p1),this.g.onreadystatechange=Gn(this.Ha,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(s){mk(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=Ve.FormData&&t instanceof Ve.FormData,!(0<=SL(i7,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{c2(this),0<this.B&&((this.K=s7(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Gn(this.qa,this)):this.A=dE(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){mk(this,s)}};function s7(t){return $c&&S9()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}ke.qa=function(){typeof tE<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Pn(this,"timeout"),this.abort(8))};function mk(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,a2(t),rv(t)}function a2(t){t.D||(t.D=!0,Pn(t,"complete"),Pn(t,"error"))}ke.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Pn(this,"complete"),Pn(this,"abort"),rv(this))};ke.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),rv(this,!0)),qt.X.M.call(this)};ke.Ha=function(){this.s||(this.F||this.v||this.l?l2(this):this.fb())};ke.fb=function(){l2(this)};function l2(t){if(t.h&&typeof tE<"u"&&(!t.C[1]||ls(t)!=4||t.aa()!=2)){if(t.v&&ls(t)==4)dE(t.Ha,0,t);else if(Pn(t,"readystatechange"),ls(t)==4){t.h=!1;try{const a=t.aa();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=a===0){var i=String(t.H).match(YL)[1]||null;if(!i&&Ve.self&&Ve.self.location){var s=Ve.self.location.protocol;i=s.substr(0,s.length-1)}r=!r7.test(i?i.toLowerCase():"")}n=r}if(n)Pn(t,"complete"),Pn(t,"success");else{t.m=6;try{var o=2<ls(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.aa()+"]",a2(t)}}finally{rv(t)}}}}function rv(t,e){if(t.g){c2(t);const n=t.g,r=t.C[0]?lg:null;t.g=null,t.C=null,e||Pn(t,"ready");try{n.onreadystatechange=r}catch{}}}function c2(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Ve.clearTimeout(t.A),t.A=null)}function ls(t){return t.g?t.g.readyState:0}ke.aa=function(){try{return 2<ls(this)?this.g.status:-1}catch{return-1}};ke.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}};ke.Sa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),n7(e)}};function gk(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case o2:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}ke.Ea=function(){return this.m};ke.Oa=function(){return typeof this.j=="string"?this.j:String(this.j)};function u2(t){let e="";return iE(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function vE(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=u2(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Ot(t,e,n))}function Ju(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function d2(t){this.Ca=0,this.i=[],this.j=new Yy,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Ju("failFast",!1,t),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Ju("baseRetryDelayMs",5e3,t),this.bb=Ju("retryDelaySeedMs",1e4,t),this.$a=Ju("forwardChannelMaxRetries",2,t),this.ta=Ju("forwardChannelRequestTimeoutMs",2e4,t),this.ra=t&&t.xmlHttpFactory||void 0,this.Da=t&&t.Zb||!1,this.J=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.I="",this.h=new e2(t&&t.concurrentRequestLimit),this.Fa=new Z9,this.O=t&&t.fastHandshake||!1,this.N=t&&t.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=t&&t.Xb||!1,t&&t.Aa&&this.j.Aa(),t&&t.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&t&&t.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}ke=d2.prototype;ke.ma=8;ke.G=1;function _E(t){if(h2(t),t.G==3){var e=t.U++,n=xs(t.F);Ot(n,"SID",t.I),Ot(n,"RID",e),Ot(n,"TYPE","terminate"),Of(t,n),e=new Rf(t,t.j,e,void 0),e.K=2,e.v=tv(xs(n)),n=!1,Ve.navigator&&Ve.navigator.sendBeacon&&(n=Ve.navigator.sendBeacon(e.v.toString(),"")),!n&&Ve.Image&&(new Image().src=e.v,n=!0),n||(e.g=w2(e.l,null),e.g.da(e.v)),e.F=Date.now(),Nf(e)}v2(t)}function iv(t){t.g&&(bE(t),t.g.cancel(),t.g=null)}function h2(t){iv(t),t.u&&(Ve.clearTimeout(t.u),t.u=null),pg(t),t.h.cancel(),t.m&&(typeof t.m=="number"&&Ve.clearTimeout(t.m),t.m=null)}function sv(t){t2(t.h)||t.m||(t.m=!0,OL(t.Ja,t),t.C=0)}function o7(t,e){return n2(t.h)>=t.h.j-(t.m?1:0)?!1:t.m?(t.i=e.D.concat(t.i),!0):t.G==1||t.G==2||t.C>=(t.Za?0:t.$a)?!1:(t.m=kf(Gn(t.Ja,t,e),y2(t,t.C)),t.C++,!0)}ke.Ja=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const i=new Rf(this,this.j,t,void 0);let s=this.s;if(this.S&&(s?(s=IL(s),CL(s,this.S)):s=this.S),this.o!==null||this.N||(i.H=s,s=null),this.O)e:{for(var e=0,n=0;n<this.i.length;n++){t:{var r=this.i[n];if("__data__"in r.g&&(r=r.g.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=f2(this,i,e),n=xs(this.F),Ot(n,"RID",t),Ot(n,"CVER",22),this.D&&Ot(n,"X-HTTP-Session-Id",this.D),Of(this,n),s&&(this.N?e="headers="+encodeURIComponent(String(u2(s)))+"&"+e:this.o&&vE(n,this.o,s)),mE(this.h,i),this.Ya&&Ot(n,"TYPE","init"),this.O?(Ot(n,"$req",e),Ot(n,"SID","null"),i.Z=!0,g1(i,n,null)):g1(i,n,e),this.G=2}}else this.G==3&&(t?yk(this,t):this.i.length==0||t2(this.h)||yk(this))};function yk(t,e){var n;e?n=e.m:n=t.U++;const r=xs(t.F);Ot(r,"SID",t.I),Ot(r,"RID",n),Ot(r,"AID",t.T),Of(t,r),t.o&&t.s&&vE(r,t.o,t.s),n=new Rf(t,t.j,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.i=e.D.concat(t.i)),e=f2(t,n,1e3),n.setTimeout(Math.round(.5*t.ta)+Math.round(.5*t.ta*Math.random())),mE(t.h,n),g1(n,r,e)}function Of(t,e){t.ia&&iE(t.ia,function(n,r){Ot(e,r,n)}),t.l&&QL({},function(n,r){Ot(e,r,n)})}function f2(t,e,n){n=Math.min(t.i.length,n);var r=t.l?Gn(t.l.Ra,t.l,t):null;e:{var i=t.i;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let c=i[l].h;const u=i[l].g;if(c-=s,0>c)s=Math.max(0,i[l].h-100),a=!1;else try{e7(u,o,"req"+c+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break e}}}return t=t.i.splice(0,n),e.D=t,r}function p2(t){t.g||t.u||(t.Z=1,OL(t.Ia,t),t.A=0)}function wE(t){return t.g||t.u||3<=t.A?!1:(t.Z++,t.u=kf(Gn(t.Ia,t),y2(t,t.A)),t.A++,!0)}ke.Ia=function(){if(this.u=null,m2(this),this.$&&!(this.K||this.g==null||0>=this.P)){var t=2*this.P;this.j.info("BP detection timer enabled: "+t),this.B=kf(Gn(this.eb,this),t)}};ke.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,tr(10),iv(this),m2(this))};function bE(t){t.B!=null&&(Ve.clearTimeout(t.B),t.B=null)}function m2(t){t.g=new Rf(t,t.j,"rpc",t.Z),t.o===null&&(t.g.H=t.s),t.g.N=0;var e=xs(t.sa);Ot(e,"RID","rpc"),Ot(e,"SID",t.I),Ot(e,"CI",t.L?"0":"1"),Ot(e,"AID",t.T),Ot(e,"TYPE","xmlhttp"),Of(t,e),t.o&&t.s&&vE(e,t.o,t.s),t.J&&t.g.setTimeout(t.J);var n=t.g;t=t.ka,n.K=1,n.v=tv(xs(e)),n.s=null,n.P=!0,HL(n,t)}ke.cb=function(){this.v!=null&&(this.v=null,iv(this),wE(this),tr(19))};function pg(t){t.v!=null&&(Ve.clearTimeout(t.v),t.v=null)}function g2(t,e){var n=null;if(t.g==e){pg(t),bE(t),t.g=null;var r=2}else if(v1(t.h,e))n=e.D,r2(t.h,e),r=1;else return;if(t.G!=0){if(t.pa=e.Y,e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;r=Xy(),Pn(r,new VL(r,n)),sv(t)}else p2(t);else if(i=e.o,i==3||i==0&&0<t.pa||!(r==1&&o7(t,e)||r==2&&wE(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),i){case 1:Sa(t,5);break;case 4:Sa(t,10);break;case 3:Sa(t,6);break;default:Sa(t,2)}}}function y2(t,e){let n=t.Xa+Math.floor(Math.random()*t.bb);return t.l||(n*=2),n*e}function Sa(t,e){if(t.j.info("Error code "+e),e==2){var n=null;t.l&&(n=null);var r=Gn(t.kb,t);n||(n=new Na("//www.google.com/images/cleardot.gif"),Ve.location&&Ve.location.protocol=="http"||hg(n,"https"),tv(n)),t7(n.toString(),r)}else tr(2);t.G=0,t.l&&t.l.va(e),v2(t),h2(t)}ke.kb=function(t){t?(this.j.info("Successfully pinged google.com"),tr(2)):(this.j.info("Failed to ping google.com"),tr(1))};function v2(t){if(t.G=0,t.la=[],t.l){const e=i2(t.h);(e.length!=0||t.i.length!=0)&&(ok(t.la,e),ok(t.la,t.i),t.h.i.length=0,nE(t.i),t.i.length=0),t.l.ua()}}function _2(t,e,n){var r=n instanceof Na?xs(n):new Na(n,void 0);if(r.g!="")e&&(r.g=e+"."+r.g),fg(r,r.m);else{var i=Ve.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Na(null,void 0);r&&hg(s,r),e&&(s.g=e),i&&fg(s,i),n&&(s.l=n),r=s}return n=t.D,e=t.za,n&&e&&Ot(r,n,e),Ot(r,"VER",t.ma),Of(t,r),r}function w2(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Da&&!t.ra?new qt(new Pf({jb:!0})):new qt(t.ra),e.Ka(t.H),e}function b2(){}ke=b2.prototype;ke.xa=function(){};ke.wa=function(){};ke.va=function(){};ke.ua=function(){};ke.Ra=function(){};function mg(){if($c&&!(10<=Number(E9)))throw Error("Environmental error: no available transport.")}mg.prototype.g=function(t,e){return new Mr(t,e)};function Mr(t,e){bn.call(this),this.g=new d2(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.S=t,(t=e&&e.Yb)&&!cg(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!cg(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new vu(this)}Un(Mr,bn);Mr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;tr(0),t.V=e,t.ia=n||{},t.L=t.Y,t.F=_2(t,null,t.V),sv(t)};Mr.prototype.close=function(){_E(this.g)};Mr.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=cE(t),t=n);e.i.push(new X9(e.ab++,t)),e.G==3&&sv(e)};Mr.prototype.M=function(){this.g.l=null,delete this.j,_E(this.g),delete this.g,Mr.X.M.call(this)};function S2(t){fE.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Un(S2,fE);function E2(){pE.call(this),this.status=1}Un(E2,pE);function vu(t){this.g=t}Un(vu,b2);vu.prototype.xa=function(){Pn(this.g,"a")};vu.prototype.wa=function(t){Pn(this.g,new S2(t))};vu.prototype.va=function(t){Pn(this.g,new E2)};vu.prototype.ua=function(){Pn(this.g,"b")};mg.prototype.createWebChannel=mg.prototype.g;Mr.prototype.send=Mr.prototype.u;Mr.prototype.open=Mr.prototype.m;Mr.prototype.close=Mr.prototype.close;Jy.NO_ERROR=0;Jy.TIMEOUT=8;Jy.HTTP_ERROR=6;BL.COMPLETE="complete";zL.EventType=Af;Af.OPEN="a";Af.CLOSE="b";Af.ERROR="c";Af.MESSAGE="d";bn.prototype.listen=bn.prototype.N;qt.prototype.listenOnce=qt.prototype.O;qt.prototype.getLastError=qt.prototype.Oa;qt.prototype.getLastErrorCode=qt.prototype.Ea;qt.prototype.getStatus=qt.prototype.aa;qt.prototype.getResponseJson=qt.prototype.Sa;qt.prototype.getResponseText=qt.prototype.fa;qt.prototype.send=qt.prototype.da;qt.prototype.setWithCredentials=qt.prototype.Ka;var a7=function(){return new mg},l7=function(){return Xy()},S0=Jy,c7=BL,u7=wl,vk={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},d7=Pf,Mp=zL,h7=qt;const _k="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};gn.UNAUTHENTICATED=new gn(null),gn.GOOGLE_CREDENTIALS=new gn("google-credentials-uid"),gn.FIRST_PARTY=new gn("first-party-uid"),gn.MOCK_USER=new gn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _u="9.17.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To=new gu("@firebase/firestore");function _1(){return To.logLevel}function f7(t){To.setLogLevel(t)}function se(t,...e){if(To.logLevel<=st.DEBUG){const n=e.map(SE);To.debug(`Firestore (${_u}): ${t}`,...n)}}function Yt(t,...e){if(To.logLevel<=st.ERROR){const n=e.map(SE);To.error(`Firestore (${_u}): ${t}`,...n)}}function Fc(t,...e){if(To.logLevel<=st.WARN){const n=e.map(SE);To.warn(`Firestore (${_u}): ${t}`,...n)}}function SE(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(t="Unexpected state"){const e=`FIRESTORE (${_u}) INTERNAL ASSERTION FAILED: `+t;throw Yt(e),new Error(e)}function Ae(t,e){t||Se()}function p7(t,e){t||Se()}function ge(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};let re=class extends Hn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let x2=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},m7=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(gn.UNAUTHENTICATED))}shutdown(){}},g7=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},y7=class{constructor(e){this.t=e,this.currentUser=gn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new wn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new wn,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new wn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ae(typeof r.accessToken=="string"),new x2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string"),new gn(e)}},v7=class{constructor(e,n,r,i){this.h=e,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=gn.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Ae(!(typeof this.h!="object"||this.h===null||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}},_7=class{constructor(e,n,r,i){this.h=e,this.l=n,this.m=r,this.g=i}getToken(){return Promise.resolve(new v7(this.h,this.l,this.m,this.g))}start(e,n){e.enqueueRetryable(()=>n(gn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},w7=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},b7=class{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,n){const r=s=>{s.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.A;return this.A=s.token,se("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?i(s):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ae(typeof n.token=="string"),this.A=n.token,new w7(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S7(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let T2=class{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=S7(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function Be(t,e){return t<e?-1:t>e?1:0}function Uc(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function I2(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new re(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new re(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new re(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ft.fromMillis(Date.now())}static fromDate(e){return Ft.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ft(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new Ft(0,0))}static max(){return new Ne(new Ft(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,n,r){n===void 0?n=0:n>e.length&&Se(),r===void 0?r=e.length-n:r>e.length-n&&Se(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ph.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ph?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ot extends Ph{construct(e,n,r){return new ot(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new re(Q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ot(n)}static emptyPath(){return new ot([])}}const E7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xt extends Ph{construct(e,n,r){return new Xt(e,n,r)}static isValidIdentifier(e){return E7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Xt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new re(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new re(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new re(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new re(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xt(n)}static emptyPath(){return new Xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.path=e}static fromPath(e){return new fe(ot.fromString(e))}static fromName(e){return new fe(ot.fromString(e).popFirst(5))}static empty(){return new fe(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ot.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fe(new ot(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function w1(t){return t.fields.find(e=>e.kind===2)}function la(t){return t.fields.filter(e=>e.kind!==2)}C2.UNKNOWN_ID=-1;class x7{constructor(e,n){this.fieldPath=e,this.kind=n}}class gg{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new gg(0,$r.min())}}function k2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ne.fromTimestamp(r===1e9?new Ft(n+1,0):new Ft(n,r));return new $r(i,fe.empty(),e)}function A2(t){return new $r(t.readTime,t.key,-1)}class $r{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new $r(Ne.min(),fe.empty(),-1)}static max(){return new $r(Ne.max(),fe.empty(),-1)}}function EE(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=fe.comparator(t.documentKey,e.documentKey),n!==0?n:Be(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class N2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yo(t){if(t.code!==Q.FAILED_PRECONDITION||t.message!==R2)throw t;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Se(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,r)=>{n(e)})}static reject(e){return new q((n,r)=>{r(e)})}static waitFor(e){return new q((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=q.resolve(!1);for(const r of e)n=n.next(i=>i?q.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new q((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new q((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.v=new wn,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{n.error?this.v.reject(new Vd(e,n.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=xE(r.target.error);this.v.reject(new Vd(e,i))}}static open(e,n,r,i){try{return new ov(n,e.transaction(i,r))}catch(s){throw new Vd(n,s)}}get P(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(se("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new I7(n)}}class hi{constructor(e,n,r){this.name=e,this.version=n,this.S=r,hi.D(zt())===12.2&&Yt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return se("SimpleDb","Removing database:",e),da(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!Eh())return!1;if(hi.N())return!0;const e=zt(),n=hi.D(e),r=0<n&&n<10,i=hi.k(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static N(){var e;return typeof process<"u"&&((e=process.env)===null||e===void 0?void 0:e.O)==="YES"}static M(e,n){return e.store(n)}static D(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async F(e){return this.db||(se("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new Vd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new re(Q.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new re(Q.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Vd(e,o))},i.onupgradeneeded=s=>{se("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.S.$(o,i.transaction,s.oldVersion,this.version).next(()=>{se("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.F(e);const a=ov.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(c=>(a.V(),c)).catch(c=>(a.abort(c),q.reject(c))).toPromise();return l.catch(()=>{}),await a.P,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(se("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class T7{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return da(this.q.delete())}}class Vd extends re{constructor(e,n){super(Q.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Xo(t){return t.name==="IndexedDbTransactionError"}class I7{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(se("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(se("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),da(r)}add(e){return se("SimpleDb","ADD",this.store.name,e,e),da(this.store.add(e))}get(e){return da(this.store.get(e)).next(n=>(n===void 0&&(n=null),se("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return se("SimpleDb","DELETE",this.store.name,e),da(this.store.delete(e))}count(){return se("SimpleDb","COUNT",this.store.name),da(this.store.count())}W(e,n){const r=this.options(e,n);if(r.index||typeof this.store.getAll!="function"){const i=this.cursor(r),s=[];return this.H(i,(o,a)=>{s.push(a)}).next(()=>s)}{const i=this.store.getAll(r.range);return new q((s,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{s(a.target.result)}})}}J(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new q((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}Y(e,n){se("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.Z=!1;const i=this.cursor(r);return this.H(i,(s,o,a)=>a.delete())}X(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}tt(e){const n=this.cursor({});return new q((r,i)=>{n.onerror=s=>{const o=xE(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new q((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new T7(a),c=n(a.primaryKey,a.value,l);if(c instanceof q){const u=c.catch(d=>(l.done(),q.reject(d)));r.push(u)}l.isDone?i():l.G===null?a.continue():a.continue(l.G)}}).next(()=>q.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.Z?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function da(t){return new q((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=xE(r.target.error);n(i)}})}let wk=!1;function xE(t){const e=hi.D(zt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return wk||(wk=!0,setTimeout(()=>{throw r},0)),r}}return t}class C7{constructor(e,n){this.asyncQueue=e,this.et=n,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}nt(e){se("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{se("IndexBackiller",`Documents written: ${await this.et.st()}`)}catch(n){Xo(n)?se("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):await Yo(n)}await this.nt(6e4)})}}class k7{constructor(e,n){this.localStore=e,this.persistence=n}async st(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.it(n,e))}it(e,n){const r=new Set;let i=n,s=!0;return q.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return se("IndexBackiller",`Processing collection: ${o}`),this.rt(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}rt(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ot(i,s)).next(a=>(se("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ot(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=A2(s);EE(o,r)>0&&(r=o)}),new $r(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>n.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}pr.at=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A7{constructor(e,n,r,i,s,o,a,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=l}}class Io{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Io("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Io&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bk(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function bl(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function P2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(t){return t==null}function Dh(t){return t===0&&1/t==-1/0}function D2(t){return typeof t=="number"&&Number.isInteger(t)&&!Dh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R7 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N7(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw i instanceof DOMException?new R7("Invalid base64 string: "+i):i}}(e);return new an(n)}static fromUint8Array(e){const n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new an(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}an.EMPTY_BYTE_STRING=new an("");const P7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Co(t){if(Ae(!!t),typeof t=="string"){let e=0;const n=P7.exec(t);if(Ae(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Gt(t.seconds),nanos:Gt(t.nanos)}}function Gt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Qa(t){return typeof t=="string"?an.fromBase64String(t):an.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function O2(t){const e=t.mapValue.fields.__previous_value__;return TE(e)?O2(e):e}function Oh(t){const e=Co(t.mapValue.fields.__local_write_time__.timestampValue);return new Ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},dm={nullValue:"NULL_VALUE"};function Ya(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?TE(t)?4:L2(t)?9007199254740991:10:Se()}function Hi(t,e){if(t===e)return!0;const n=Ya(t);if(n!==Ya(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Oh(t).isEqual(Oh(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Co(r.timestampValue),o=Co(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return Qa(r.bytesValue).isEqual(Qa(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return Gt(r.geoPointValue.latitude)===Gt(i.geoPointValue.latitude)&&Gt(r.geoPointValue.longitude)===Gt(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Gt(r.integerValue)===Gt(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=Gt(r.doubleValue),o=Gt(i.doubleValue);return s===o?Dh(s)===Dh(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return Uc(t.arrayValue.values||[],e.arrayValue.values||[],Hi);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(bk(s)!==bk(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(o[a]===void 0||!Hi(s[a],o[a])))return!1;return!0}(t,e);default:return Se()}}function Lh(t,e){return(t.values||[]).find(n=>Hi(n,e))!==void 0}function ko(t,e){if(t===e)return 0;const n=Ya(t),r=Ya(e);if(n!==r)return Be(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Be(t.booleanValue,e.booleanValue);case 2:return function(i,s){const o=Gt(i.integerValue||i.doubleValue),a=Gt(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return Sk(t.timestampValue,e.timestampValue);case 4:return Sk(Oh(t),Oh(e));case 5:return Be(t.stringValue,e.stringValue);case 6:return function(i,s){const o=Qa(i),a=Qa(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),a=s.split("/");for(let l=0;l<o.length&&l<a.length;l++){const c=Be(o[l],a[l]);if(c!==0)return c}return Be(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const o=Be(Gt(i.latitude),Gt(s.latitude));return o!==0?o:Be(Gt(i.longitude),Gt(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],a=s.values||[];for(let l=0;l<o.length&&l<a.length;++l){const c=ko(o[l],a[l]);if(c)return c}return Be(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Zs.mapValue&&s===Zs.mapValue)return 0;if(i===Zs.mapValue)return 1;if(s===Zs.mapValue)return-1;const o=i.fields||{},a=Object.keys(o),l=s.fields||{},c=Object.keys(l);a.sort(),c.sort();for(let u=0;u<a.length&&u<c.length;++u){const d=Be(a[u],c[u]);if(d!==0)return d;const h=ko(o[a[u]],l[c[u]]);if(h!==0)return h}return Be(a.length,c.length)}(t.mapValue,e.mapValue);default:throw Se()}}function Sk(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Be(t,e);const n=Co(t),r=Co(e),i=Be(n.seconds,r.seconds);return i!==0?i:Be(n.nanos,r.nanos)}function jc(t){return b1(t)}function b1(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=Co(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Qa(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,fe.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=b1(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${b1(r.fields[a])}`;return s+"}"}(t.mapValue):Se();var e,n}function Xa(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function S1(t){return!!t&&"integerValue"in t}function Mh(t){return!!t&&"arrayValue"in t}function Ek(t){return!!t&&"nullValue"in t}function xk(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function hm(t){return!!t&&"mapValue"in t}function Bd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return bl(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Bd(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Bd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function L2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function D7(t){return"nullValue"in t?dm:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Xa(Io.empty(),fe.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:Se()}function O7(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Xa(Io.empty(),fe.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Zs:Se()}function Tk(t,e){const n=ko(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function Ik(t,e){const n=ko(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ao=class{constructor(e,n){this.position=e,this.inclusive=n}};function Ck(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=fe.comparator(fe.fromName(o.referenceValue),n.key):r=ko(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function kk(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Hi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{}let at=class $2 extends M2{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new L7(e,n,r):n==="array-contains"?new F7(e,r):n==="in"?new W2(e,r):n==="not-in"?new U7(e,r):n==="array-contains-any"?new j7(e,r):new $2(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new M7(e,r):new $7(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ko(n,this.value)):n!==null&&Ya(this.value)===Ya(n)&&this.matchesComparison(ko(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}},wt=class F2 extends M2{constructor(e,n){super(),this.filters=e,this.op=n,this.ft=null}static create(e,n){return new F2(e,n)}matches(e){return Vc(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ft!==null||(this.ft=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ft}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.dt(n=>n.isInequality());return e!==null?e.field:null}dt(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}};function Vc(t){return t.op==="and"}function E1(t){return t.op==="or"}function IE(t){return U2(t)&&Vc(t)}function U2(t){for(const e of t.filters)if(e instanceof wt)return!1;return!0}function x1(t){if(t instanceof at)return t.field.canonicalString()+t.op.toString()+jc(t.value);if(IE(t))return t.filters.map(e=>x1(e)).join(",");{const e=t.filters.map(n=>x1(n)).join(",");return`${t.op}(${e})`}}function j2(t,e){return t instanceof at?function(n,r){return r instanceof at&&n.op===r.op&&n.field.isEqual(r.field)&&Hi(n.value,r.value)}(t,e):t instanceof wt?function(n,r){return r instanceof wt&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((i,s,o)=>i&&j2(s,r.filters[o]),!0):!1}(t,e):void Se()}function V2(t,e){const n=t.filters.concat(e);return wt.create(n,t.op)}function B2(t){return t instanceof at?function(e){return`${e.field.canonicalString()} ${e.op} ${jc(e.value)}`}(t):t instanceof wt?function(e){return e.op.toString()+" {"+e.getFilters().map(B2).join(" ,")+"}"}(t):"Filter"}let L7=class extends at{constructor(e,n,r){super(e,n,r),this.key=fe.fromName(r.referenceValue)}matches(e){const n=fe.comparator(e.key,this.key);return this.matchesComparison(n)}},M7=class extends at{constructor(e,n){super(e,"in",n),this.keys=z2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},$7=class extends at{constructor(e,n){super(e,"not-in",n),this.keys=z2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function z2(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>fe.fromName(r.referenceValue))}let F7=class extends at{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Mh(n)&&Lh(n.arrayValue,this.value)}},W2=class extends at{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Lh(this.value.arrayValue,n)}},U7=class extends at{constructor(e,n){super(e,"not-in",n)}matches(e){if(Lh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Lh(this.value.arrayValue,n)}};class j7 extends at{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Mh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Lh(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yc=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function V7(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ln=class T1{constructor(e,n){this.comparator=e,this.root=n||mo.EMPTY}insert(e,n){return new T1(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,mo.BLACK,null,null))}remove(e){return new T1(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mo.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $p(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $p(this.root,e,this.comparator,!1)}getReverseIterator(){return new $p(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $p(this.root,e,this.comparator,!0)}},$p=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},mo=class es{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??es.RED,this.left=i??es.EMPTY,this.right=s??es.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new es(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return es.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return es.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,es.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,es.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Se();const e=this.left.check();if(e!==this.right.check())throw Se();return e+(this.isRed()?0:1)}};mo.EMPTY=null,mo.RED=!0,mo.BLACK=!1;mo.EMPTY=new class{constructor(){this.size=0}get key(){throw Se()}get value(){throw Se()}get color(){throw Se()}get left(){throw Se()}get right(){throw Se()}copy(t,e,n,r,i){return this}insert(t,e,n){return new mo(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let At=class I1{constructor(e){this.comparator=e,this.data=new ln(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ak(this.data.getIterator())}getIteratorFrom(e){return new Ak(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof I1)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new I1(this.comparator);return n.data=e,n}},Ak=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Ml(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this.fields=e,e.sort(Xt.comparator)}static empty(){return new mr([])}unionWith(e){let n=new At(Xt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new mr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Uc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.value=e}static empty(){return new Rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!hm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bd(n)}setAll(e){let n=Xt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Bd(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());hm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Hi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];hm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){bl(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Rn(Bd(this.value))}}function H2(t){const e=[];return bl(t.fields,(n,r)=>{const i=new Xt([n]);if(hm(r)){const s=H2(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new mr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new It(e,0,Ne.min(),Ne.min(),Ne.min(),Rn.empty(),0)}static newFoundDocument(e,n,r,i){return new It(e,1,n,Ne.min(),r,i,0)}static newNoDocument(e,n){return new It(e,2,n,Ne.min(),Ne.min(),Rn.empty(),0)}static newUnknownDocument(e,n){return new It(e,3,n,Ne.min(),Ne.min(),Rn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof It&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new It(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B7{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this._t=null}}function C1(t,e=null,n=[],r=[],i=null,s=null,o=null){return new B7(t,e,n,r,i,s,o)}function Ja(t){const e=ge(t);if(e._t===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>x1(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Lf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>jc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>jc(r)).join(",")),e._t=n}return e._t}function Mf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!V7(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!j2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!kk(t.startAt,e.startAt)&&kk(t.endAt,e.endAt)}function yg(t){return fe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function vg(t,e){return t.filters.filter(n=>n instanceof at&&n.field.isEqual(e))}function Rk(t,e,n){let r=dm,i=!0;for(const s of vg(t,e)){let o=dm,a=!0;switch(s.op){case"<":case"<=":o=D7(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=dm}Tk({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];Tk({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function Nk(t,e,n){let r=Zs,i=!0;for(const s of vg(t,e)){let o=Zs,a=!0;switch(s.op){case">=":case">":o=O7(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Zs}Ik({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];Ik({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.wt=null,this.gt=null,this.startAt,this.endAt}}function G2(t,e,n,r,i,s,o,a){return new Ds(t,e,n,r,i,s,o,a)}function wu(t){return new Ds(t)}function Pk(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function CE(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function av(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function kE(t){return t.collectionGroup!==null}function Pa(t){const e=ge(t);if(e.wt===null){e.wt=[];const n=av(e),r=CE(e);if(n!==null&&r===null)n.isKeyField()||e.wt.push(new yc(n)),e.wt.push(new yc(Xt.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new yc(Xt.keyField(),s))}}}return e.wt}function xr(t){const e=ge(t);if(!e.gt)if(e.limitType==="F")e.gt=C1(e.path,e.collectionGroup,Pa(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of Pa(e)){const o=s.dir==="desc"?"asc":"desc";n.push(new yc(s.field,o))}const r=e.endAt?new Ao(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Ao(e.startAt.position,e.startAt.inclusive):null;e.gt=C1(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e.gt}function k1(t,e){e.getFirstInequalityField(),av(t);const n=t.filters.concat([e]);return new Ds(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function _g(t,e,n){return new Ds(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function $f(t,e){return Mf(xr(t),xr(e))&&t.limitType===e.limitType}function q2(t){return`${Ja(xr(t))}|lt:${t.limitType}`}function A1(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>B2(r)).join(", ")}]`),Lf(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(r)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>jc(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>jc(r)).join(",")),`Target(${n})`}(xr(t))}; limitType=${t.limitType})`}function Ff(t,e){return e.isFoundDocument()&&function(n,r){const i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):fe.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(const i of Pa(n))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(i,s,o){const a=Ck(i,s,o);return i.inclusive?a<=0:a<0}(n.startAt,Pa(n),r)||n.endAt&&!function(i,s,o){const a=Ck(i,s,o);return i.inclusive?a>=0:a>0}(n.endAt,Pa(n),r))}(t,e)}function K2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Q2(t){return(e,n)=>{let r=!1;for(const i of Pa(t)){const s=z7(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function z7(t,e,n){const r=t.field.isKeyField()?fe.comparator(e.key,n.key):function(i,s,o){const a=s.data.field(i),l=o.data.field(i);return a!==null&&l!==null?ko(a,l):Se()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Se()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(t,e){if(t.yt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dh(e)?"-0":e}}function X2(t){return{integerValue:""+t}}function J2(t,e){return D2(e)?X2(e):Y2(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(){this._=void 0}}function W7(t,e,n){return t instanceof Bc?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,e):t instanceof Za?eM(t,e):t instanceof el?tM(t,e):function(r,i){const s=Z2(r,i),o=Dk(s)+Dk(r.It);return S1(s)&&S1(r.It)?X2(o):Y2(r.Tt,o)}(t,e)}function H7(t,e,n){return t instanceof Za?eM(t,e):t instanceof el?tM(t,e):n}function Z2(t,e){return t instanceof zc?S1(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class Bc extends lv{}class Za extends lv{constructor(e){super(),this.elements=e}}function eM(t,e){const n=nM(e);for(const r of t.elements)n.some(i=>Hi(i,r))||n.push(r);return{arrayValue:{values:n}}}class el extends lv{constructor(e){super(),this.elements=e}}function tM(t,e){let n=nM(e);for(const r of t.elements)n=n.filter(i=>!Hi(i,r));return{arrayValue:{values:n}}}class zc extends lv{constructor(e,n){super(),this.Tt=e,this.It=n}}function Dk(t){return Gt(t.integerValue||t.doubleValue)}function nM(t){return Mh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,n){this.field=e,this.transform=n}}function G7(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof Za&&r instanceof Za||n instanceof el&&r instanceof el?Uc(n.elements,r.elements,Hi):n instanceof zc&&r instanceof zc?Hi(n.It,r.It):n instanceof Bc&&r instanceof Bc}(t.transform,e.transform)}class q7{constructor(e,n){this.version=e,this.transformResults=n}}class Mt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Mt}static exists(e){return new Mt(void 0,e)}static updateTime(e){return new Mt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class cv{}function rM(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Su(t.key,Mt.none()):new bu(t.key,t.data,Mt.none());{const n=t.data,r=Rn.empty();let i=new At(Xt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Os(t.key,r,new mr(i.toArray()),Mt.none())}}function K7(t,e,n){t instanceof bu?function(r,i,s){const o=r.value.clone(),a=Lk(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Os?function(r,i,s){if(!fm(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=Lk(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(iM(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):function(r,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function zd(t,e,n,r){return t instanceof bu?function(i,s,o,a){if(!fm(i.precondition,s))return o;const l=i.value.clone(),c=Mk(i.fieldTransforms,a,s);return l.setAll(c),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Os?function(i,s,o,a){if(!fm(i.precondition,s))return o;const l=Mk(i.fieldTransforms,a,s),c=s.data;return c.setAll(iM(i)),c.setAll(l),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(u=>u.field))}(t,e,n,r):function(i,s,o){return fm(i.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(t,e,n)}function Q7(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=Z2(r.transform,i||null);s!=null&&(n===null&&(n=Rn.empty()),n.set(r.field,s))}return n||null}function Ok(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&Uc(n,r,(i,s)=>G7(i,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class bu extends cv{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Os extends cv{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function iM(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Lk(t,e,n){const r=new Map;Ae(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,H7(o,a,n[i]))}return r}function Mk(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,W7(s,o,e))}return r}class Su extends cv{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class AE extends cv{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y7{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zt,it;function sM(t){switch(t){default:return Se();case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0}}function oM(t){if(t===void 0)return Yt("GRPC error has no .code"),Q.UNKNOWN;switch(t){case Zt.OK:return Q.OK;case Zt.CANCELLED:return Q.CANCELLED;case Zt.UNKNOWN:return Q.UNKNOWN;case Zt.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case Zt.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case Zt.INTERNAL:return Q.INTERNAL;case Zt.UNAVAILABLE:return Q.UNAVAILABLE;case Zt.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case Zt.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case Zt.NOT_FOUND:return Q.NOT_FOUND;case Zt.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case Zt.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case Zt.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case Zt.ABORTED:return Q.ABORTED;case Zt.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case Zt.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case Zt.DATA_LOSS:return Q.DATA_LOSS;default:return Se()}}(it=Zt||(Zt={}))[it.OK=0]="OK",it[it.CANCELLED=1]="CANCELLED",it[it.UNKNOWN=2]="UNKNOWN",it[it.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",it[it.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",it[it.NOT_FOUND=5]="NOT_FOUND",it[it.ALREADY_EXISTS=6]="ALREADY_EXISTS",it[it.PERMISSION_DENIED=7]="PERMISSION_DENIED",it[it.UNAUTHENTICATED=16]="UNAUTHENTICATED",it[it.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",it[it.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",it[it.ABORTED=10]="ABORTED",it[it.OUT_OF_RANGE=11]="OUT_OF_RANGE",it[it.UNIMPLEMENTED=12]="UNIMPLEMENTED",it[it.INTERNAL=13]="INTERNAL",it[it.UNAVAILABLE=14]="UNAVAILABLE",it[it.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){bl(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return P2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X7=new ln(fe.comparator);function gr(){return X7}const aM=new ln(fe.comparator);function xd(...t){let e=aM;for(const n of t)e=e.insert(n.key,n);return e}function lM(t){let e=aM;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Di(){return Wd()}function cM(){return Wd()}function Wd(){return new Jo(t=>t.toString(),(t,e)=>t.isEqual(e))}const J7=new ln(fe.comparator),Z7=new At(fe.comparator);function We(...t){let e=Z7;for(const n of t)e=e.add(n);return e}const eQ=new At(Be);function uv(){return eQ}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Vf.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new jf(Ne.min(),i,uv(),gr(),We())}}class Vf{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Vf(r,n,We(),We(),We())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e,n,r,i){this.Et=e,this.removedTargetIds=n,this.key=r,this.At=i}}class uM{constructor(e,n){this.targetId=e,this.Rt=n}}class dM{constructor(e,n,r=an.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class $k{constructor(){this.bt=0,this.vt=Uk(),this.Pt=an.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}get current(){return this.Vt}get resumeToken(){return this.Pt}get Dt(){return this.bt!==0}get Ct(){return this.St}xt(e){e.approximateByteSize()>0&&(this.St=!0,this.Pt=e)}Nt(){let e=We(),n=We(),r=We();return this.vt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Se()}}),new Vf(this.Pt,this.Vt,e,n,r)}kt(){this.St=!1,this.vt=Uk()}Ot(e,n){this.St=!0,this.vt=this.vt.insert(e,n)}Mt(e){this.St=!0,this.vt=this.vt.remove(e)}Ft(){this.bt+=1}$t(){this.bt-=1}Bt(){this.St=!0,this.Vt=!0}}class tQ{constructor(e){this.Lt=e,this.qt=new Map,this.Ut=gr(),this.Kt=Fk(),this.Gt=new At(Be)}Qt(e){for(const n of e.Et)e.At&&e.At.isFoundDocument()?this.jt(n,e.At):this.zt(n,e.key,e.At);for(const n of e.removedTargetIds)this.zt(n,e.key,e.At)}Wt(e){this.forEachTarget(e,n=>{const r=this.Ht(n);switch(e.state){case 0:this.Jt(n)&&r.xt(e.resumeToken);break;case 1:r.$t(),r.Dt||r.kt(),r.xt(e.resumeToken);break;case 2:r.$t(),r.Dt||this.removeTarget(n);break;case 3:this.Jt(n)&&(r.Bt(),r.xt(e.resumeToken));break;case 4:this.Jt(n)&&(this.Yt(n),r.xt(e.resumeToken));break;default:Se()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qt.forEach((r,i)=>{this.Jt(i)&&n(i)})}Zt(e){const n=e.targetId,r=e.Rt.count,i=this.Xt(n);if(i){const s=i.target;if(yg(s))if(r===0){const o=new fe(s.path);this.zt(n,o,It.newNoDocument(o,Ne.min()))}else Ae(r===1);else this.te(n)!==r&&(this.Yt(n),this.Gt=this.Gt.add(n))}}ee(e){const n=new Map;this.qt.forEach((s,o)=>{const a=this.Xt(o);if(a){if(s.current&&yg(a.target)){const l=new fe(a.target.path);this.Ut.get(l)!==null||this.ne(o,l)||this.zt(o,l,It.newNoDocument(l,e))}s.Ct&&(n.set(o,s.Nt()),s.kt())}});let r=We();this.Kt.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Xt(l);return!c||c.purpose===2||(a=!1,!1)}),a&&(r=r.add(s))}),this.Ut.forEach((s,o)=>o.setReadTime(e));const i=new jf(e,n,this.Gt,this.Ut,r);return this.Ut=gr(),this.Kt=Fk(),this.Gt=new At(Be),i}jt(e,n){if(!this.Jt(e))return;const r=this.ne(e,n.key)?2:0;this.Ht(e).Ot(n.key,r),this.Ut=this.Ut.insert(n.key,n),this.Kt=this.Kt.insert(n.key,this.se(n.key).add(e))}zt(e,n,r){if(!this.Jt(e))return;const i=this.Ht(e);this.ne(e,n)?i.Ot(n,1):i.Mt(n),this.Kt=this.Kt.insert(n,this.se(n).delete(e)),r&&(this.Ut=this.Ut.insert(n,r))}removeTarget(e){this.qt.delete(e)}te(e){const n=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ft(e){this.Ht(e).Ft()}Ht(e){let n=this.qt.get(e);return n||(n=new $k,this.qt.set(e,n)),n}se(e){let n=this.Kt.get(e);return n||(n=new At(Be),this.Kt=this.Kt.insert(e,n)),n}Jt(e){const n=this.Xt(e)!==null;return n||se("WatchChangeAggregator","Detected inactive target",e),n}Xt(e){const n=this.qt.get(e);return n&&n.Dt?null:this.Lt.ie(e)}Yt(e){this.qt.set(e,new $k),this.Lt.getRemoteKeysForTarget(e).forEach(n=>{this.zt(e,n,null)})}ne(e,n){return this.Lt.getRemoteKeysForTarget(e).has(n)}}function Fk(){return new ln(fe.comparator)}function Uk(){return new ln(fe.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nQ=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),rQ=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),iQ=(()=>({and:"AND",or:"OR"}))();class sQ{constructor(e,n){this.databaseId=e,this.yt=n}}function Wc(t,e){return t.yt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hM(t,e){return t.yt?e.toBase64():e.toUint8Array()}function oQ(t,e){return Wc(t,e.toTimestamp())}function Jt(t){return Ae(!!t),Ne.fromTimestamp(function(e){const n=Co(e);return new Ft(n.seconds,n.nanos)}(t))}function RE(t,e){return function(n){return new ot(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function fM(t){const e=ot.fromString(t);return Ae(SM(e)),e}function $h(t,e){return RE(t.databaseId,e.path)}function Ui(t,e){const n=fM(e);if(n.get(1)!==t.databaseId.projectId)throw new re(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new re(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new fe(mM(n))}function R1(t,e){return RE(t.databaseId,e)}function pM(t){const e=fM(t);return e.length===4?ot.emptyPath():mM(e)}function Fh(t){return new ot(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function mM(t){return Ae(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function jk(t,e,n){return{name:$h(t,e),fields:n.value.mapValue.fields}}function gM(t,e,n){const r=Ui(t,e.name),i=Jt(e.updateTime),s=e.createTime?Jt(e.createTime):Ne.min(),o=new Rn({mapValue:{fields:e.fields}}),a=It.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function aQ(t,e){return"found"in e?function(n,r){Ae(!!r.found),r.found.name,r.found.updateTime;const i=Ui(n,r.found.name),s=Jt(r.found.updateTime),o=r.found.createTime?Jt(r.found.createTime):Ne.min(),a=new Rn({mapValue:{fields:r.found.fields}});return It.newFoundDocument(i,s,o,a)}(t,e):"missing"in e?function(n,r){Ae(!!r.missing),Ae(!!r.readTime);const i=Ui(n,r.missing),s=Jt(r.readTime);return It.newNoDocument(i,s)}(t,e):Se()}function lQ(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Se()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,c){return l.yt?(Ae(c===void 0||typeof c=="string"),an.fromBase64String(c||"")):(Ae(c===void 0||c instanceof Uint8Array),an.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const c=l.code===void 0?Q.UNKNOWN:oM(l.code);return new re(c,l.message||"")}(o);n=new dM(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ui(t,r.document.name),s=Jt(r.document.updateTime),o=r.document.createTime?Jt(r.document.createTime):Ne.min(),a=new Rn({mapValue:{fields:r.document.fields}}),l=It.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new pm(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ui(t,r.document),s=r.readTime?Jt(r.readTime):Ne.min(),o=It.newNoDocument(i,s),a=r.removedTargetIds||[];n=new pm([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ui(t,r.document),s=r.removedTargetIds||[];n=new pm([],s,i,null)}else{if(!("filter"in e))return Se();{e.filter;const r=e.filter;r.targetId;const i=r.count||0,s=new Y7(i),o=r.targetId;n=new uM(o,s)}}return n}function Uh(t,e){let n;if(e instanceof bu)n={update:jk(t,e.key,e.value)};else if(e instanceof Su)n={delete:$h(t,e.key)};else if(e instanceof Os)n={update:jk(t,e.key,e.data),updateMask:pQ(e.fieldMask)};else{if(!(e instanceof AE))return Se();n={verify:$h(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof Bc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Za)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof el)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof zc)return{fieldPath:s.field.canonicalString(),increment:o.It};throw Se()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:oQ(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Se()}(t,e.precondition)),n}function N1(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?Mt.updateTime(Jt(i.updateTime)):i.exists!==void 0?Mt.exists(i.exists):Mt.none()}(e.currentDocument):Mt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,o){let a=null;if("setToServerValue"in o)Ae(o.setToServerValue==="REQUEST_TIME"),a=new Bc;else if("appendMissingElements"in o){const c=o.appendMissingElements.values||[];a=new Za(c)}else if("removeAllFromArray"in o){const c=o.removeAllFromArray.values||[];a=new el(c)}else"increment"in o?a=new zc(s,o.increment):Se();const l=Xt.fromServerFormat(o.fieldPath);return new Uf(l,a)}(t,i)):[];if(e.update){e.update.name;const i=Ui(t,e.update.name),s=new Rn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(a){const l=a.fieldPaths||[];return new mr(l.map(c=>Xt.fromServerFormat(c)))}(e.updateMask);return new Os(i,s,o,n,r)}return new bu(i,s,n,r)}if(e.delete){const i=Ui(t,e.delete);return new Su(i,n)}if(e.verify){const i=Ui(t,e.verify);return new AE(i,n)}return Se()}function cQ(t,e){return t&&t.length>0?(Ae(e!==void 0),t.map(n=>function(r,i){let s=r.updateTime?Jt(r.updateTime):Jt(i);return s.isEqual(Ne.min())&&(s=Jt(i)),new q7(s,r.transformResults||[])}(n,e))):[]}function yM(t,e){return{documents:[R1(t,e.path)]}}function vM(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=R1(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=R1(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(l){if(l.length!==0)return bM(wt.create(l,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(l){if(l.length!==0)return l.map(c=>function(u){return{field:Vl(u.field),direction:dQ(u.dir)}}(c))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(l,c){return l.yt||Lf(c)?c:{value:c}}(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function _M(t){let e=pM(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ae(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(u){const d=wM(u);return d instanceof wt&&IE(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(u=>function(d){return new yc(Bl(d.field),function(h){switch(h){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction))}(u)));let a=null;n.limit&&(a=function(u){let d;return d=typeof u=="object"?u.value:u,Lf(d)?null:d}(n.limit));let l=null;n.startAt&&(l=function(u){const d=!!u.before,h=u.values||[];return new Ao(h,d)}(n.startAt));let c=null;return n.endAt&&(c=function(u){const d=!u.before,h=u.values||[];return new Ao(h,d)}(n.endAt)),G2(e,i,o,s,a,"F",l,c)}function uQ(t,e){const n=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Se()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function wM(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Bl(e.unaryFilter.field);return at.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Bl(e.unaryFilter.field);return at.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Bl(e.unaryFilter.field);return at.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Bl(e.unaryFilter.field);return at.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Se()}}(t):t.fieldFilter!==void 0?function(e){return at.create(Bl(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Se()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return wt.create(e.compositeFilter.filters.map(n=>wM(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return Se()}}(e.compositeFilter.op))}(t):Se()}function dQ(t){return nQ[t]}function hQ(t){return rQ[t]}function fQ(t){return iQ[t]}function Vl(t){return{fieldPath:t.canonicalString()}}function Bl(t){return Xt.fromServerFormat(t.fieldPath)}function bM(t){return t instanceof at?function(e){if(e.op==="=="){if(xk(e.value))return{unaryFilter:{field:Vl(e.field),op:"IS_NAN"}};if(Ek(e.value))return{unaryFilter:{field:Vl(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(xk(e.value))return{unaryFilter:{field:Vl(e.field),op:"IS_NOT_NAN"}};if(Ek(e.value))return{unaryFilter:{field:Vl(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vl(e.field),op:hQ(e.op),value:e.value}}}(t):t instanceof wt?function(e){const n=e.getFilters().map(r=>bM(r));return n.length===1?n[0]:{compositeFilter:{op:fQ(e.op),filters:n}}}(t):Se()}function pQ(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function SM(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Vk(e)),e=mQ(t.get(n),e);return Vk(e)}function mQ(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function Vk(t){return t+""}function Oi(t){const e=t.length;if(Ae(e>=2),e===2)return Ae(t.charAt(0)===""&&t.charAt(1)===""),ot.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&Se(),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:Se()}s=o+2}return new ot(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mm(t,e){return[t,ir(e)]}function EM(t,e,n){return[t,ir(e),n]}const gQ={},yQ=["prefixPath","collectionGroup","readTime","documentId"],vQ=["prefixPath","collectionGroup","documentId"],_Q=["collectionGroup","readTime","prefixPath","documentId"],wQ=["canonicalId","targetId"],bQ=["targetId","path"],SQ=["path","targetId"],EQ=["collectionId","parent"],xQ=["indexId","uid"],TQ=["uid","sequenceNumber"],IQ=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],CQ=["indexId","uid","orderedDocumentKey"],kQ=["userId","collectionPath","documentId"],AQ=["userId","collectionPath","largestBatchId"],RQ=["userId","collectionGroup","largestBatchId"],xM=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],NQ=[...xM,"documentOverlays"],TM=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],IM=TM,PQ=[...IM,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1 extends N2{constructor(e,n){super(),this.re=e,this.currentSequenceNumber=n}}function xn(t,e){const n=ge(t);return hi.M(n.re,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&K7(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=zd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=zd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=cM();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=rM(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),We())}isEqual(e){return this.batchId===e.batchId&&Uc(this.mutations,e.mutations,(n,r)=>Ok(n,r))&&Uc(this.baseMutations,e.baseMutations,(n,r)=>Ok(n,r))}}class PE{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ae(e.mutations.length===r.length);let i=J7;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new PE(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,n,r,i,s=Ne.min(),o=Ne.min(),a=an.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new go(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new go(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new go(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(e){this.oe=e}}function DQ(t,e){let n;if(e.document)n=gM(t.oe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=fe.fromSegments(e.noDocument.path),i=nl(e.noDocument.readTime);n=It.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Se();{const r=fe.fromSegments(e.unknownDocument.path),i=nl(e.unknownDocument.version);n=It.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(r){const i=new Ft(r[0],r[1]);return Ne.fromTimestamp(i)}(e.readTime)),n}function zk(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:wg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,s){return{name:$h(i,s.key),fields:s.data.value.mapValue.fields,updateTime:Wc(i,s.version.toTimestamp()),createTime:Wc(i,s.createTime.toTimestamp())}}(t.oe,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:tl(e.version)};else{if(!e.isUnknownDocument())return Se();r.unknownDocument={path:n.path.toArray(),version:tl(e.version)}}return r}function wg(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function tl(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function nl(t){const e=new Ft(t.seconds,t.nanoseconds);return Ne.fromTimestamp(e)}function ha(t,e){const n=(e.baseMutations||[]).map(s=>N1(t.oe,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>N1(t.oe,s)),i=Ft.fromMillis(e.localWriteTimeMs);return new NE(e.batchId,i,n,r)}function Td(t){const e=nl(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?nl(t.lastLimboFreeSnapshotVersion):Ne.min();let r;var i;return t.query.documents!==void 0?(Ae((i=t.query).documents.length===1),r=xr(wu(pM(i.documents[0])))):r=function(s){return xr(_M(s))}(t.query),new go(r,t.targetId,0,t.lastListenSequenceNumber,e,n,an.fromBase64String(t.resumeToken))}function kM(t,e){const n=tl(e.snapshotVersion),r=tl(e.lastLimboFreeSnapshotVersion);let i;i=yg(e.target)?yM(t.oe,e.target):vM(t.oe,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ja(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function OE(t){const e=_M({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?_g(e,e.limit,"L"):e}function E0(t,e){return new DE(e.largestBatchId,N1(t.oe,e.overlayMutation))}function Wk(t,e){const n=e.path.lastSegment();return[t,ir(e.path.popLast()),n]}function Hk(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:tl(r.readTime),documentKey:ir(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OQ{getBundleMetadata(e,n){return Gk(e).get(n).next(r=>{if(r)return{id:(i=r).bundleId,createTime:nl(i.createTime),version:i.version};var i})}saveBundleMetadata(e,n){return Gk(e).put({bundleId:(r=n).id,createTime:tl(Jt(r.createTime)),version:r.version});var r}getNamedQuery(e,n){return qk(e).get(n).next(r=>{if(r)return{name:(i=r).name,query:OE(i.bundledQuery),readTime:nl(i.readTime)};var i})}saveNamedQuery(e,n){return qk(e).put(function(r){return{name:r.name,readTime:tl(Jt(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function Gk(t){return xn(t,"bundles")}function qk(t){return xn(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(e,n){this.Tt=e,this.userId=n}static ue(e,n){const r=n.uid||"";return new dv(e,r)}getOverlay(e,n){return Zu(e).get(Wk(this.userId,n)).next(r=>r?E0(this.Tt,r):null)}getOverlays(e,n){const r=Di();return q.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new DE(n,o);i.push(this.ce(e,a))}),q.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(ir(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Zu(e).Y("collectionPathOverlayIndex",a))}),q.waitFor(s)}getOverlaysForCollection(e,n,r){const i=Di(),s=ir(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Zu(e).W("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=E0(this.Tt,l);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=Di();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Zu(e).X({index:"collectionGroupOverlayIndex",range:a},(l,c,u)=>{const d=E0(this.Tt,c);s.size()<i||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):u.done()}).next(()=>s)}ce(e,n){return Zu(e).put(function(r,i,s){const[o,a,l]=Wk(i,s.mutation.key);return{userId:i,collectionPath:a,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Uh(r.oe,s.mutation)}}(this.Tt,this.userId,n))}}function Zu(t){return xn(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(){}ae(e,n){this.he(e,n),n.le()}he(e,n){if("nullValue"in e)this.fe(n,5);else if("booleanValue"in e)this.fe(n,10),n.de(e.booleanValue?1:0);else if("integerValue"in e)this.fe(n,15),n.de(Gt(e.integerValue));else if("doubleValue"in e){const r=Gt(e.doubleValue);isNaN(r)?this.fe(n,13):(this.fe(n,15),Dh(r)?n.de(0):n.de(r))}else if("timestampValue"in e){const r=e.timestampValue;this.fe(n,20),typeof r=="string"?n._e(r):(n._e(`${r.seconds||""}`),n.de(r.nanos||0))}else if("stringValue"in e)this.we(e.stringValue,n),this.me(n);else if("bytesValue"in e)this.fe(n,30),n.ge(Qa(e.bytesValue)),this.me(n);else if("referenceValue"in e)this.ye(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.fe(n,45),n.de(r.latitude||0),n.de(r.longitude||0)}else"mapValue"in e?L2(e)?this.fe(n,Number.MAX_SAFE_INTEGER):(this.pe(e.mapValue,n),this.me(n)):"arrayValue"in e?(this.Ie(e.arrayValue,n),this.me(n)):Se()}we(e,n){this.fe(n,25),this.Te(e,n)}Te(e,n){n._e(e)}pe(e,n){const r=e.fields||{};this.fe(n,55);for(const i of Object.keys(r))this.we(i,n),this.he(r[i],n)}Ie(e,n){const r=e.values||[];this.fe(n,50);for(const i of r)this.he(i,n)}ye(e,n){this.fe(n,37),fe.fromName(e).path.forEach(r=>{this.fe(n,60),this.Te(r,n)})}fe(e,n){e.de(n)}me(e){e.de(2)}}fa.Ee=new fa;function LQ(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function Kk(t){const e=64-function(n){let r=0;for(let i=0;i<8;++i){const s=LQ(255&n[i]);if(r+=s,s!==8)break}return r}(t);return Math.ceil(e/8)}class MQ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ae(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Re(r.value),r=n.next();this.be()}ve(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Pe(r.value),r=n.next();this.Ve()}Se(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Re(r);else if(r<2048)this.Re(960|r>>>6),this.Re(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Re(480|r>>>12),this.Re(128|63&r>>>6),this.Re(128|63&r);else{const i=n.codePointAt(0);this.Re(240|i>>>18),this.Re(128|63&i>>>12),this.Re(128|63&i>>>6),this.Re(128|63&i)}}this.be()}De(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=n.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.Ve()}Ce(e){const n=this.xe(e),r=Kk(n);this.Ne(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}ke(e){const n=this.xe(e),r=Kk(n);this.Ne(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Oe(){this.Me(255),this.Me(255)}Fe(){this.$e(255),this.$e(255)}reset(){this.position=0}seed(e){this.Ne(e.length),this.buffer.set(e,this.position),this.position+=e.length}Be(){return this.buffer.slice(0,this.position)}xe(e){const n=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Re(e){const n=255&e;n===0?(this.Me(0),this.Me(255)):n===255?(this.Me(255),this.Me(0)):this.Me(n)}Pe(e){const n=255&e;n===0?(this.$e(0),this.$e(255)):n===255?(this.$e(255),this.$e(0)):this.$e(e)}be(){this.Me(0),this.Me(1)}Ve(){this.$e(0),this.$e(1)}Me(e){this.Ne(1),this.buffer[this.position++]=e}$e(e){this.Ne(1),this.buffer[this.position++]=~e}Ne(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class $Q{constructor(e){this.Le=e}ge(e){this.Le.Ae(e)}_e(e){this.Le.Se(e)}de(e){this.Le.Ce(e)}le(){this.Le.Oe()}}class FQ{constructor(e){this.Le=e}ge(e){this.Le.ve(e)}_e(e){this.Le.De(e)}de(e){this.Le.ke(e)}le(){this.Le.Fe()}}class ed{constructor(){this.Le=new MQ,this.qe=new $Q(this.Le),this.Ue=new FQ(this.Le)}seed(e){this.Le.seed(e)}Ke(e){return e===0?this.qe:this.Ue}Be(){return this.Le.Be()}reset(){this.Le.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Ge(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new pa(this.indexId,this.documentKey,this.arrayValue,r)}}function js(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=Qk(t.arrayValue,e.arrayValue),n!==0?n:(n=Qk(t.directionalValue,e.directionalValue),n!==0?n:fe.comparator(t.documentKey,e.documentKey)))}function Qk(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UQ{constructor(e){this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Qe=e.orderBy,this.je=[];for(const n of e.filters){const r=n;r.isInequality()?this.ze=r:this.je.push(r)}}We(e){Ae(e.collectionGroup===this.collectionId);const n=w1(e);if(n!==void 0&&!this.He(n))return!1;const r=la(e);let i=0,s=0;for(;i<r.length&&this.He(r[i]);++i);if(i===r.length)return!0;if(this.ze!==void 0){const o=r[i];if(!this.Je(this.ze,o)||!this.Ye(this.Qe[s++],o))return!1;++i}for(;i<r.length;++i){const o=r[i];if(s>=this.Qe.length||!this.Ye(this.Qe[s++],o))return!1}return!0}He(e){for(const n of this.je)if(this.Je(n,e))return!0;return!1}Je(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}Ye(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AM(t){var e,n;if(Ae(t instanceof at||t instanceof wt),t instanceof at){if(t instanceof W2){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>at.create(t.field,"==",s)))||[];return wt.create(i,"or")}return t}const r=t.filters.map(i=>AM(i));return wt.create(r,t.op)}function jQ(t){if(t.getFilters().length===0)return[];const e=L1(AM(t));return Ae(RM(e)),D1(e)||O1(e)?[e]:e.getFilters()}function D1(t){return t instanceof at}function O1(t){return t instanceof wt&&IE(t)}function RM(t){return D1(t)||O1(t)||function(e){if(e instanceof wt&&E1(e)){for(const n of e.getFilters())if(!D1(n)&&!O1(n))return!1;return!0}return!1}(t)}function L1(t){if(Ae(t instanceof at||t instanceof wt),t instanceof at)return t;if(t.filters.length===1)return L1(t.filters[0]);const e=t.filters.map(r=>L1(r));let n=wt.create(e,t.op);return n=bg(n),RM(n)?n:(Ae(n instanceof wt),Ae(Vc(n)),Ae(n.filters.length>1),n.filters.reduce((r,i)=>LE(r,i)))}function LE(t,e){let n;return Ae(t instanceof at||t instanceof wt),Ae(e instanceof at||e instanceof wt),n=t instanceof at?e instanceof at?function(r,i){return wt.create([r,i],"and")}(t,e):Yk(t,e):e instanceof at?Yk(e,t):function(r,i){if(Ae(r.filters.length>0&&i.filters.length>0),Vc(r)&&Vc(i))return V2(r,i.getFilters());const s=E1(r)?r:i,o=E1(r)?i:r,a=s.filters.map(l=>LE(l,o));return wt.create(a,"or")}(t,e),bg(n)}function Yk(t,e){if(Vc(e))return V2(e,t.getFilters());{const n=e.filters.map(r=>LE(t,r));return wt.create(n,"or")}}function bg(t){if(Ae(t instanceof at||t instanceof wt),t instanceof at)return t;const e=t.getFilters();if(e.length===1)return bg(e[0]);if(U2(t))return t;const n=e.map(i=>bg(i)),r=[];return n.forEach(i=>{i instanceof at?r.push(i):i instanceof wt&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:wt.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VQ{constructor(){this.Ze=new ME}addToCollectionParentIndex(e,n){return this.Ze.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.Ze.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve($r.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve($r.min())}updateCollectionGroup(e,n,r){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class ME{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new At(ot.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new At(ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp=new Uint8Array(0);class BQ{constructor(e,n){this.user=e,this.databaseId=n,this.Xe=new ME,this.tn=new Jo(r=>Ja(r),(r,i)=>Mf(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Xe.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.Xe.add(n)});const s={collectionId:r,parent:ir(i)};return Xk(e).put(s)}return q.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[I2(n),""],!1,!0);return Xk(e).W(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(Oi(o.parent))}return r})}addFieldIndex(e,n){const r=Up(e),i=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=nd(e);return s.next(a=>{o.put(Hk(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Up(e),i=nd(e),s=td(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const r=td(e);let i=!0;const s=new Map;return q.forEach(this.en(n),o=>this.nn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=We();const a=[];return q.forEach(s,(l,c)=>{var u;se("IndexedDbIndexManager",`Using index ${u=l,`id=${u.indexId}|cg=${u.collectionGroup}|f=${u.fields.map(_=>`${_.fieldPath}:${_.kind}`).join(",")}`} to execute ${Ja(n)}`);const d=function(_,S){const I=w1(S);if(I===void 0)return null;for(const E of vg(_,I.fieldPath))switch(E.op){case"array-contains-any":return E.value.arrayValue.values||[];case"array-contains":return[E.value]}return null}(c,l),h=function(_,S){const I=new Map;for(const E of la(S))for(const D of vg(_,E.fieldPath))switch(D.op){case"==":case"in":I.set(E.fieldPath.canonicalString(),D.value);break;case"not-in":case"!=":return I.set(E.fieldPath.canonicalString(),D.value),Array.from(I.values())}return null}(c,l),f=function(_,S){const I=[];let E=!0;for(const D of la(S)){const b=D.kind===0?Rk(_,D.fieldPath,_.startAt):Nk(_,D.fieldPath,_.startAt);I.push(b.value),E&&(E=b.inclusive)}return new Ao(I,E)}(c,l),p=function(_,S){const I=[];let E=!0;for(const D of la(S)){const b=D.kind===0?Nk(_,D.fieldPath,_.endAt):Rk(_,D.fieldPath,_.endAt);I.push(b.value),E&&(E=b.inclusive)}return new Ao(I,E)}(c,l),y=this.sn(l,c,f),w=this.sn(l,c,p),m=this.rn(l,c,h),g=this.on(l.indexId,d,y,f.inclusive,w,p.inclusive,m);return q.forEach(g,_=>r.J(_,n.limit).next(S=>{S.forEach(I=>{const E=fe.fromSegments(I.documentKey);o.has(E)||(o=o.add(E),a.push(E))})}))}).next(()=>a)}return q.resolve(null)})}en(e){let n=this.tn.get(e);return n||(e.filters.length===0?n=[e]:n=jQ(wt.create(e.filters,"and")).map(r=>C1(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.tn.set(e,n),n)}on(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),c=l/(n!=null?n.length:1),u=[];for(let d=0;d<l;++d){const h=n?this.un(n[d/c]):Fp,f=this.cn(e,h,r[d%c],i),p=this.an(e,h,s[d%c],o),y=a.map(w=>this.cn(e,h,w,!0));u.push(...this.createRange(f,p,y))}return u}cn(e,n,r,i){const s=new pa(e,fe.empty(),n,r);return i?s:s.Ge()}an(e,n,r,i){const s=new pa(e,fe.empty(),n,r);return i?s.Ge():s}nn(e,n){const r=new UQ(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.We(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.en(n);return q.forEach(i,s=>this.nn(e,s).next(o=>{o?r!==0&&o.fields.length<function(a){let l=new At(Xt.comparator),c=!1;for(const u of a.filters)for(const d of u.getFlattenedFilters())d.field.isKeyField()||(d.op==="array-contains"||d.op==="array-contains-any"?c=!0:l=l.add(d.field));for(const u of a.orderBy)u.field.isKeyField()||(l=l.add(u.field));return l.size+(c?1:0)}(s)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(n)&&i.length>1&&r===2?1:r)}hn(e,n){const r=new ed;for(const i of la(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Ke(i.kind);fa.Ee.ae(s,o)}return r.Be()}un(e){const n=new ed;return fa.Ee.ae(e,n.Ke(0)),n.Be()}ln(e,n){const r=new ed;return fa.Ee.ae(Xa(this.databaseId,n),r.Ke(function(i){const s=la(i);return s.length===0?0:s[s.length-1].kind}(e))),r.Be()}rn(e,n,r){if(r===null)return[];let i=[];i.push(new ed);let s=0;for(const o of la(e)){const a=r[s++];for(const l of i)if(this.fn(n,o.fieldPath)&&Mh(a))i=this.dn(i,o,a);else{const c=l.Ke(o.kind);fa.Ee.ae(a,c)}}return this._n(i)}sn(e,n,r){return this.rn(e,n,r.position)}_n(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Be();return n}dn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new ed;l.seed(a.Be()),fa.Ee.ae(o,l.Ke(n.kind)),s.push(l)}return s}fn(e,n){return!!e.filters.find(r=>r instanceof at&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Up(e),i=nd(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(s=>{const o=[];return q.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(c,u){const d=u?new gg(u.sequenceNumber,new $r(nl(u.readTime),new fe(Oi(u.documentKey)),u.largestBatchId)):gg.empty(),h=c.fields.map(([f,p])=>new x7(Xt.fromServerFormat(f),p));return new C2(c.indexId,c.collectionGroup,h,d)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:Be(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Up(e),s=nd(e);return this.wn(e).next(o=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>q.forEach(a,l=>s.put(Hk(l.indexId,this.user,o,r)))))}updateIndexEntries(e,n){const r=new Map;return q.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?q.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),q.forEach(a,l=>this.mn(e,i,l).next(c=>{const u=this.gn(s,l);return c.isEqual(u)?q.resolve():this.yn(e,s,l,c,u)}))))})}pn(e,n,r,i){return td(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.ln(r,n.key),documentKey:n.key.path.toArray()})}In(e,n,r,i){return td(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.ln(r,n.key),n.key.path.toArray()])}mn(e,n,r){const i=td(e);let s=new At(js);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.ln(r,n)])},(o,a)=>{s=s.add(new pa(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}gn(e,n){let r=new At(js);const i=this.hn(n,e);if(i==null)return r;const s=w1(n);if(s!=null){const o=e.data.field(s.fieldPath);if(Mh(o))for(const a of o.arrayValue.values||[])r=r.add(new pa(n.indexId,e.key,this.un(a),i))}else r=r.add(new pa(n.indexId,e.key,Fp,i));return r}yn(e,n,r,i,s){se("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(a,l,c,u,d){const h=a.getIterator(),f=l.getIterator();let p=Ml(h),y=Ml(f);for(;p||y;){let w=!1,m=!1;if(p&&y){const g=c(p,y);g<0?m=!0:g>0&&(w=!0)}else p!=null?m=!0:w=!0;w?(u(y),y=Ml(f)):m?(d(p),p=Ml(h)):(p=Ml(h),y=Ml(f))}}(i,s,js,a=>{o.push(this.pn(e,n,r,a))},a=>{o.push(this.In(e,n,r,a))}),q.waitFor(o)}wn(e){let n=1;return nd(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>js(o,a)).filter((o,a,l)=>!a||js(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=js(o,e),l=js(o,n);if(a===0)i[0]=e.Ge();else if(a>0&&l<0)i.push(o),i.push(o.Ge());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Tn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Fp,[]],l=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Fp,[]];s.push(IDBKeyRange.bound(a,l))}return s}Tn(e,n){return js(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Jk)}getMinOffset(e,n){return q.mapArray(this.en(n),r=>this.nn(e,r).next(i=>i||Se())).next(Jk)}}function Xk(t){return xn(t,"collectionParents")}function td(t){return xn(t,"indexEntries")}function Up(t){return xn(t,"indexConfiguration")}function nd(t){return xn(t,"indexState")}function Jk(t){Ae(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;EE(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new $r(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class lr{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new lr(e,lr.DEFAULT_COLLECTION_PERCENTILE,lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NM(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.X({range:o},(u,d,h)=>(a++,h.delete()));s.push(l.next(()=>{Ae(a===1)}));const c=[];for(const u of n.mutations){const d=EM(e,u.key.path,n.batchId);s.push(i.delete(d)),c.push(u.key)}return q.waitFor(s).next(()=>c)}function Sg(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Se();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */lr.DEFAULT_COLLECTION_PERCENTILE=10,lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,lr.DEFAULT=new lr(41943040,lr.DEFAULT_COLLECTION_PERCENTILE,lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),lr.DISABLED=new lr(-1,0,0);class hv{constructor(e,n,r,i){this.userId=e,this.Tt=n,this.indexManager=r,this.referenceDelegate=i,this.En={}}static ue(e,n,r,i){Ae(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new hv(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Vs(e).X({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=zl(e),o=Vs(e);return o.add({}).next(a=>{Ae(typeof a=="number");const l=new NE(a,n,r,i),c=function(h,f,p){const y=p.baseMutations.map(m=>Uh(h.oe,m)),w=p.mutations.map(m=>Uh(h.oe,m));return{userId:f,batchId:p.batchId,localWriteTimeMs:p.localWriteTime.toMillis(),baseMutations:y,mutations:w}}(this.Tt,this.userId,l),u=[];let d=new At((h,f)=>Be(h.canonicalString(),f.canonicalString()));for(const h of i){const f=EM(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),u.push(o.put(c)),u.push(s.put(f,gQ))}return d.forEach(h=>{u.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.En[a]=l.keys()}),q.waitFor(u).next(()=>l)})}lookupMutationBatch(e,n){return Vs(e).get(n).next(r=>r?(Ae(r.userId===this.userId),ha(this.Tt,r)):null)}An(e,n){return this.En[n]?q.resolve(this.En[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.En[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Vs(e).X({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(Ae(a.batchId>=r),s=ha(this.Tt,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Vs(e).X({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Vs(e).W("userMutationsIndex",n).next(r=>r.map(i=>ha(this.Tt,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=mm(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return zl(e).X({range:i},(o,a,l)=>{const[c,u,d]=o,h=Oi(u);if(c===this.userId&&n.path.isEqual(h))return Vs(e).get(d).next(f=>{if(!f)throw Se();Ae(f.userId===this.userId),s.push(ha(this.Tt,f))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new At(Be);const i=[];return n.forEach(s=>{const o=mm(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=zl(e).X({range:a},(c,u,d)=>{const[h,f,p]=c,y=Oi(f);h===this.userId&&s.path.isEqual(y)?r=r.add(p):d.done()});i.push(l)}),q.waitFor(i).next(()=>this.Rn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=mm(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new At(Be);return zl(e).X({range:o},(l,c,u)=>{const[d,h,f]=l,p=Oi(h);d===this.userId&&r.isPrefixOf(p)?p.length===i&&(a=a.add(f)):u.done()}).next(()=>this.Rn(e,a))}Rn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Vs(e).get(s).next(o=>{if(o===null)throw Se();Ae(o.userId===this.userId),r.push(ha(this.Tt,o))}))}),q.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return NM(e.re,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.bn(n.batchId)}),q.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}bn(e){delete this.En[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return q.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return zl(e).X({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=Oi(s[1]);i.push(l)}else a.done()}).next(()=>{Ae(i.length===0)})})}containsKey(e,n){return PM(e,this.userId,n)}vn(e){return DM(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function PM(t,e,n){const r=mm(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return zl(t).X({range:s,Z:!0},(a,l,c)=>{const[u,d,h]=a;u===e&&d===i&&(o=!0),c.done()}).next(()=>o)}function Vs(t){return xn(t,"mutations")}function zl(t){return xn(t,"documentMutations")}function DM(t){return xn(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e){this.Pn=e}next(){return this.Pn+=2,this.Pn}static Vn(){return new rl(0)}static Sn(){return new rl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zQ{constructor(e,n){this.referenceDelegate=e,this.Tt=n}allocateTargetId(e){return this.Dn(e).next(n=>{const r=new rl(n.highestTargetId);return n.highestTargetId=r.next(),this.Cn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Dn(e).next(n=>Ne.fromTimestamp(new Ft(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Dn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Dn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Cn(e,i)))}addTargetData(e,n){return this.xn(e,n).next(()=>this.Dn(e).next(r=>(r.targetCount+=1,this.Nn(n,r),this.Cn(e,r))))}updateTargetData(e,n){return this.xn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>$l(e).delete(n.targetId)).next(()=>this.Dn(e)).next(r=>(Ae(r.targetCount>0),r.targetCount-=1,this.Cn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return $l(e).X((o,a)=>{const l=Td(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>q.waitFor(s)).next(()=>i)}forEachTarget(e,n){return $l(e).X((r,i)=>{const s=Td(i);n(s)})}Dn(e){return eA(e).get("targetGlobalKey").next(n=>(Ae(n!==null),n))}Cn(e,n){return eA(e).put("targetGlobalKey",n)}xn(e,n){return $l(e).put(kM(this.Tt,n))}Nn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Dn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Ja(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return $l(e).X({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const c=Td(a);Mf(n,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Qs(e);return n.forEach(o=>{const a=ir(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),q.waitFor(i)}removeMatchingKeys(e,n,r){const i=Qs(e);return q.forEach(n,s=>{const o=ir(s.path);return q.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Qs(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Qs(e);let s=We();return i.X({range:r,Z:!0},(o,a,l)=>{const c=Oi(o[1]),u=new fe(c);s=s.add(u)}).next(()=>s)}containsKey(e,n){const r=ir(n.path),i=IDBKeyRange.bound([r],[I2(r)],!1,!0);let s=0;return Qs(e).X({index:"documentTargetsIndex",Z:!0,range:i},([o,a],l,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}ie(e,n){return $l(e).get(n).next(r=>r?Td(r):null)}}function $l(t){return xn(t,"targets")}function eA(t){return xn(t,"targetGlobal")}function Qs(t){return xn(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tA([t,e],[n,r]){const i=Be(t,n);return i===0?Be(e,r):i}class WQ{constructor(e){this.kn=e,this.buffer=new At(tA),this.On=0}Mn(){return++this.On}Fn(e){const n=[e,this.Mn()];if(this.buffer.size<this.kn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();tA(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class HQ{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.$n=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Bn(6e4)}stop(){this.$n&&(this.$n.cancel(),this.$n=null)}get started(){return this.$n!==null}Bn(e){se("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.$n=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.$n=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Xo(n)?se("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Yo(n)}await this.Bn(3e5)})}}class GQ{constructor(e,n){this.Ln=e,this.params=n}calculateTargetCount(e,n){return this.Ln.qn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return q.resolve(pr.at);const r=new WQ(n);return this.Ln.forEachTarget(e,i=>r.Fn(i.sequenceNumber)).next(()=>this.Ln.Un(e,i=>r.Fn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Ln.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Ln.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(Zk)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Zk):this.Kn(e,n))}getCacheSize(e){return this.Ln.getCacheSize(e)}Kn(e,n){let r,i,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(c=Date.now(),_1()<=st.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qQ{constructor(e,n){this.db=e,this.garbageCollector=function(r,i){return new GQ(r,i)}(this,n)}qn(e){const n=this.Gn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Gn(e){let n=0;return this.Un(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Un(e,n){return this.Qn(e,(r,i)=>n(i))}addReference(e,n,r){return jp(e,r)}removeReference(e,n,r){return jp(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return jp(e,n)}jn(e,n){return function(r,i){let s=!1;return DM(r).tt(o=>PM(r,o,i).next(a=>(a&&(s=!0),q.resolve(!a)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Qn(e,(o,a)=>{if(a<=n){const l=this.jn(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Ne.min()),Qs(e).delete([0,ir(o.path)])))});i.push(l)}}).next(()=>q.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return jp(e,n)}Qn(e,n){const r=Qs(e);let i,s=pr.at;return r.X({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{o===0?(s!==pr.at&&n(new fe(Oi(i)),s),s=c,i=l):s=pr.at}).next(()=>{s!==pr.at&&n(new fe(Oi(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function jp(t,e){return Qs(t).put(function(n,r){return{targetId:0,path:ir(n.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(){this.changes=new Jo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,It.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KQ{constructor(e){this.Tt=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return ia(e).put(r)}removeEntry(e,n,r){return ia(e).delete(function(i,s){const o=i.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],wg(s),o[o.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.zn(e,r)))}getEntry(e,n){let r=It.newInvalidDocument(n);return ia(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(rd(n))},(i,s)=>{r=this.Wn(n,s)}).next(()=>r)}Hn(e,n){let r={size:0,document:It.newInvalidDocument(n)};return ia(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(rd(n))},(i,s)=>{r={document:this.Wn(n,s),size:Sg(s)}}).next(()=>r)}getEntries(e,n){let r=gr();return this.Jn(e,n,(i,s)=>{const o=this.Wn(i,s);r=r.insert(i,o)}).next(()=>r)}Yn(e,n){let r=gr(),i=new ln(fe.comparator);return this.Jn(e,n,(s,o)=>{const a=this.Wn(s,o);r=r.insert(s,a),i=i.insert(s,Sg(o))}).next(()=>({documents:r,Zn:i}))}Jn(e,n,r){if(n.isEmpty())return q.resolve();let i=new At(iA);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(rd(i.first()),rd(i.last())),o=i.getIterator();let a=o.getNext();return ia(e).X({index:"documentKeyIndex",range:s},(l,c,u)=>{const d=fe.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&iA(a,d)<0;)r(a,null),a=o.getNext();a&&a.isEqual(d)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?u.j(rd(a)):u.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i){const s=n.path,o=[s.popLast().toArray(),s.lastSegment(),wg(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ia(e).W(IDBKeyRange.bound(o,a,!0)).next(l=>{let c=gr();for(const u of l){const d=this.Wn(fe.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);d.isFoundDocument()&&(Ff(n,d)||i.has(d.key))&&(c=c.insert(d.key,d))}return c})}getAllFromCollectionGroup(e,n,r,i){let s=gr();const o=rA(n,r),a=rA(n,$r.max());return ia(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,u)=>{const d=this.Wn(fe.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(d.key,d),s.size===i&&u.done()}).next(()=>s)}newChangeBuffer(e){return new QQ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return nA(e).get("remoteDocumentGlobalKey").next(n=>(Ae(!!n),n))}zn(e,n){return nA(e).put("remoteDocumentGlobalKey",n)}Wn(e,n){if(n){const r=DQ(this.Tt,n);if(!(r.isNoDocument()&&r.version.isEqual(Ne.min())))return r}return It.newInvalidDocument(e)}}function LM(t){return new KQ(t)}class QQ extends OM{constructor(e,n){super(),this.Xn=e,this.trackRemovals=n,this.ts=new Jo(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new At((s,o)=>Be(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ts.get(s);if(n.push(this.Xn.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=zk(this.Xn.Tt,o);i=i.add(s.path.popLast());const c=Sg(l);r+=c-a.size,n.push(this.Xn.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=zk(this.Xn.Tt,o.convertToNoDocument(Ne.min()));n.push(this.Xn.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.Xn.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.Xn.updateMetadata(e,r)),q.waitFor(n)}getFromCache(e,n){return this.Xn.Hn(e,n).next(r=>(this.ts.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Xn.Yn(e,n).next(({documents:r,Zn:i})=>(i.forEach((s,o)=>{this.ts.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function nA(t){return xn(t,"remoteDocumentGlobal")}function ia(t){return xn(t,"remoteDocumentsV14")}function rd(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function rA(t,e){const n=e.documentKey.path.toArray();return[t,wg(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function iA(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Be(n[s],r[s]),i)return i;return i=Be(n.length,r.length),i||(i=Be(n[n.length-2],r[r.length-2]),i||Be(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YQ{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&zd(r.mutation,i,mr.empty(),Ft.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,We()).next(()=>r))}getLocalViewOfDocuments(e,n,r=We()){const i=Di();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=xd();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Di();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,We()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=gr();const o=Wd(),a=Wd();return n.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof Os)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),zd(u.mutation,c,u.mutation.getFieldMask(),Ft.now())):o.set(c.key,mr.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var d;return a.set(c,new YQ(u,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Wd();let i=new ln((o,a)=>o-a),s=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||mr.empty();u=a.applyToLocalView(c,u),r.set(l,u);const d=(i.get(a.batchId)||We()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=cM();u.forEach(h=>{if(!s.has(h)){const f=rM(n.get(h),r.get(h));f!==null&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return fe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):kE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):q.resolve(Di());let a=-1,l=s;return o.next(c=>q.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?q.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{l=l.insert(u,h)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,We())).next(u=>({batchId:a,changes:lM(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new fe(n)).next(r=>{let i=xd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=xd();return this.indexManager.getCollectionParents(e,i).next(o=>q.forEach(o,a=>{const l=function(c,u){return new Ds(u,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(n,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(c=>{c.forEach((u,d)=>{s=s.insert(u,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i))).next(s=>{i.forEach((a,l)=>{const c=l.getKey();s.get(c)===null&&(s=s.insert(c,It.newInvalidDocument(c)))});let o=xd();return s.forEach((a,l)=>{const c=i.get(a);c!==void 0&&zd(c.mutation,l,mr.empty(),Ft.now()),Ff(n,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XQ{constructor(e){this.Tt=e,this.es=new Map,this.ns=new Map}getBundleMetadata(e,n){return q.resolve(this.es.get(n))}saveBundleMetadata(e,n){var r;return this.es.set(n.id,{id:(r=n).id,version:r.version,createTime:Jt(r.createTime)}),q.resolve()}getNamedQuery(e,n){return q.resolve(this.ns.get(n))}saveNamedQuery(e,n){return this.ns.set(n.name,function(r){return{name:r.name,query:OE(r.bundledQuery),readTime:Jt(r.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JQ{constructor(){this.overlays=new ln(fe.comparator),this.ss=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Di();return q.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ce(e,n,s)}),q.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.ss.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.ss.delete(r)),q.resolve()}getOverlaysForCollection(e,n,r){const i=Di(),s=n.length+1,o=new fe(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return q.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new ln((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=Di(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Di(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return q.resolve(a)}ce(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.ss.get(i.largestBatchId).delete(r.key);this.ss.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new DE(n,r));let s=this.ss.get(n);s===void 0&&(s=We(),this.ss.set(n,s)),this.ss.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(){this.rs=new At(hn.os),this.us=new At(hn.cs)}isEmpty(){return this.rs.isEmpty()}addReference(e,n){const r=new hn(e,n);this.rs=this.rs.add(r),this.us=this.us.add(r)}hs(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.ls(new hn(e,n))}fs(e,n){e.forEach(r=>this.removeReference(r,n))}ds(e){const n=new fe(new ot([])),r=new hn(n,e),i=new hn(n,e+1),s=[];return this.us.forEachInRange([r,i],o=>{this.ls(o),s.push(o.key)}),s}_s(){this.rs.forEach(e=>this.ls(e))}ls(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}ws(e){const n=new fe(new ot([])),r=new hn(n,e),i=new hn(n,e+1);let s=We();return this.us.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new hn(e,0),r=this.rs.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class hn{constructor(e,n){this.key=e,this.gs=n}static os(e,n){return fe.comparator(e.key,n.key)||Be(e.gs,n.gs)}static cs(e,n){return Be(e.gs,n.gs)||fe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZQ{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.ys=1,this.ps=new At(hn.os)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.ys;this.ys++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new NE(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.ps=this.ps.add(new hn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return q.resolve(o)}lookupMutationBatch(e,n){return q.resolve(this.Is(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Ts(r),s=i<0?0:i;return q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?-1:this.ys-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new hn(n,0),i=new hn(n,Number.POSITIVE_INFINITY),s=[];return this.ps.forEachInRange([r,i],o=>{const a=this.Is(o.gs);s.push(a)}),q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new At(Be);return n.forEach(i=>{const s=new hn(i,0),o=new hn(i,Number.POSITIVE_INFINITY);this.ps.forEachInRange([s,o],a=>{r=r.add(a.gs)})}),q.resolve(this.Es(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;fe.isDocumentKey(s)||(s=s.child(""));const o=new hn(new fe(s),0);let a=new At(Be);return this.ps.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.gs)),!0)},o),q.resolve(this.Es(a))}Es(e){const n=[];return e.forEach(r=>{const i=this.Is(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ae(this.As(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.ps;return q.forEach(n.mutations,i=>{const s=new hn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ps=r})}bn(e){}containsKey(e,n){const r=new hn(n,0),i=this.ps.firstAfterOrEqual(r);return q.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}As(e,n){return this.Ts(e)}Ts(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Is(e){const n=this.Ts(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eY{constructor(e){this.Rs=e,this.docs=new ln(fe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Rs(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return q.resolve(r?r.document.mutableCopy():It.newInvalidDocument(n))}getEntries(e,n){let r=gr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():It.newInvalidDocument(i))}),q.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=gr();const o=n.path,a=new fe(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||EE(A2(u),r)<=0||(i.has(u.key)||Ff(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return q.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Se()}bs(e,n){return q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new tY(this)}getSize(e){return q.resolve(this.size)}}class tY extends OM{constructor(e){super(),this.Xn=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Xn.addEntry(e,i)):this.Xn.removeEntry(r)}),q.waitFor(n)}getFromCache(e,n){return this.Xn.getEntry(e,n)}getAllFromCache(e,n){return this.Xn.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nY{constructor(e){this.persistence=e,this.vs=new Jo(n=>Ja(n),Mf),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.Ps=0,this.Vs=new $E,this.targetCount=0,this.Ss=rl.Vn()}forEachTarget(e,n){return this.vs.forEach((r,i)=>n(i)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.Ps)}allocateTargetId(e){return this.highestTargetId=this.Ss.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Ps&&(this.Ps=n),q.resolve()}xn(e){this.vs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ss=new rl(n),this.highestTargetId=n),e.sequenceNumber>this.Ps&&(this.Ps=e.sequenceNumber)}addTargetData(e,n){return this.xn(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.xn(n),q.resolve()}removeTargetData(e,n){return this.vs.delete(n.target),this.Vs.ds(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.vs.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.vs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),q.waitFor(s).next(()=>i)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const r=this.vs.get(n)||null;return q.resolve(r)}addMatchingKeys(e,n,r){return this.Vs.hs(n,r),q.resolve()}removeMatchingKeys(e,n,r){this.Vs.fs(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),q.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Vs.ds(n),q.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Vs.ws(n);return q.resolve(r)}containsKey(e,n){return q.resolve(this.Vs.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(e,n){this.Ds={},this.overlays={},this.Cs=new pr(0),this.xs=!1,this.xs=!0,this.referenceDelegate=e(this),this.Ns=new nY(this),this.indexManager=new VQ,this.remoteDocumentCache=function(r){return new eY(r)}(r=>this.referenceDelegate.ks(r)),this.Tt=new CM(n),this.Os=new XQ(this.Tt)}start(){return Promise.resolve()}shutdown(){return this.xs=!1,Promise.resolve()}get started(){return this.xs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new JQ,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Ds[e.toKey()];return r||(r=new ZQ(n,this.referenceDelegate),this.Ds[e.toKey()]=r),r}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Os}runTransaction(e,n,r){se("MemoryPersistence","Starting transaction:",e);const i=new rY(this.Cs.next());return this.referenceDelegate.Ms(),r(i).next(s=>this.referenceDelegate.Fs(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}$s(e,n){return q.or(Object.values(this.Ds).map(r=>()=>r.containsKey(e,n)))}}class rY extends N2{constructor(e){super(),this.currentSequenceNumber=e}}class fv{constructor(e){this.persistence=e,this.Bs=new $E,this.Ls=null}static qs(e){return new fv(e)}get Us(){if(this.Ls)return this.Ls;throw Se()}addReference(e,n,r){return this.Bs.addReference(r,n),this.Us.delete(r.toString()),q.resolve()}removeReference(e,n,r){return this.Bs.removeReference(r,n),this.Us.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.Us.add(n.toString()),q.resolve()}removeTarget(e,n){this.Bs.ds(n.targetId).forEach(i=>this.Us.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Us.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ms(){this.Ls=new Set}Fs(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.Us,r=>{const i=fe.fromPath(r);return this.Ks(e,i).next(s=>{s||n.removeEntry(i,Ne.min())})}).next(()=>(this.Ls=null,n.apply(e)))}updateLimboDocument(e,n){return this.Ks(e,n).next(r=>{r?this.Us.delete(n.toString()):this.Us.add(n.toString())})}ks(e){return 0}Ks(e,n){return q.or([()=>q.resolve(this.Bs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.$s(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iY{constructor(e){this.Tt=e}$(e,n,r,i){const s=new ov("createOrUpgrade",n);r<1&&i>=1&&(function(a){a.createObjectStore("owner")}(e),function(a){a.createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Bk,{unique:!0}),a.createObjectStore("documentMutations")}(e),sA(e),function(a){a.createObjectStore("remoteDocuments")}(e));let o=q.resolve();return r<3&&i>=3&&(r!==0&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(e),sA(e)),o=o.next(()=>function(a){const l=a.store("targetGlobal"),c={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ne.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",c)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(a,l){return l.store("mutations").W().next(c=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Bk,{unique:!0});const u=l.store("mutations"),d=c.map(h=>u.put(h));return q.waitFor(d)})}(e,s))),o=o.next(()=>{(function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.Gs(s))),r<6&&i>=6&&(o=o.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(e),this.Qs(s)))),r<7&&i>=7&&(o=o.next(()=>this.js(s))),r<8&&i>=8&&(o=o.next(()=>this.zs(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.Ws(s))),r<11&&i>=11&&(o=o.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(a){const l=a.createObjectStore("documentOverlays",{keyPath:kQ});l.createIndex("collectionPathOverlayIndex",AQ,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",RQ,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(a){const l=a.createObjectStore("remoteDocumentsV14",{keyPath:yQ});l.createIndex("documentKeyIndex",vQ),l.createIndex("collectionGroupIndex",_Q)}(e)).next(()=>this.Hs(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.Js(e,s))),r<15&&i>=15&&(o=o.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:xQ}).createIndex("sequenceNumberIndex",TQ,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:IQ}).createIndex("documentKeyIndex",CQ,{unique:!1})}(e))),o}Qs(e){let n=0;return e.store("remoteDocuments").X((r,i)=>{n+=Sg(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Gs(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>q.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>q.forEach(a,l=>{Ae(l.userId===s.userId);const c=ha(this.Tt,l);return NM(e,s.userId,c).next(()=>{})}))}))}js(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.X((o,a)=>{const l=new ot(o),c=function(u){return[0,ir(u)]}(l);s.push(n.get(c).next(u=>u?q.resolve():(d=>n.put({targetId:0,path:ir(d),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>q.waitFor(s))})}zs(e,n){e.createObjectStore("collectionParents",{keyPath:EQ});const r=n.store("collectionParents"),i=new ME,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:ir(l)})}};return n.store("remoteDocuments").X({Z:!0},(o,a)=>{const l=new ot(o);return s(l.popLast())}).next(()=>n.store("documentMutations").X({Z:!0},([o,a,l],c)=>{const u=Oi(a);return s(u.popLast())}))}Ws(e){const n=e.store("targets");return n.X((r,i)=>{const s=Td(i),o=kM(this.Tt,s);return n.put(o)})}Hs(e,n){const r=n.store("remoteDocuments"),i=[];return r.X((s,o)=>{const a=n.store("remoteDocumentsV14"),l=(c=o,c.document?new fe(ot.fromString(c.document.name).popFirst(5)):c.noDocument?fe.fromSegments(c.noDocument.path):c.unknownDocument?fe.fromSegments(c.unknownDocument.path):Se()).path.toArray();var c;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(u))}).next(()=>q.waitFor(i))}Js(e,n){const r=n.store("mutations"),i=LM(this.Tt),s=new $M(fv.qs,this.Tt.oe);return r.W().next(o=>{const a=new Map;return o.forEach(l=>{var c;let u=(c=a.get(l.userId))!==null&&c!==void 0?c:We();ha(this.Tt,l).keys().forEach(d=>u=u.add(d)),a.set(l.userId,u)}),q.forEach(a,(l,c)=>{const u=new gn(c),d=dv.ue(this.Tt,u),h=s.getIndexManager(u),f=hv.ue(u,this.Tt,h,s.referenceDelegate);return new MM(i,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new P1(n,pr.at),l).next()})})}}function sA(t){t.createObjectStore("targetDocuments",{keyPath:bQ}).createIndex("documentTargetsIndex",SQ,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",wQ,{unique:!0}),t.createObjectStore("targetGlobal")}const x0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class FE{constructor(e,n,r,i,s,o,a,l,c,u,d=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Ys=s,this.window=o,this.document=a,this.Zs=c,this.Xs=u,this.ti=d,this.Cs=null,this.xs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ei=null,this.inForeground=!1,this.ni=null,this.si=null,this.ii=Number.NEGATIVE_INFINITY,this.ri=h=>Promise.resolve(),!FE.C())throw new re(Q.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new qQ(this,i),this.oi=n+"main",this.Tt=new CM(l),this.ui=new hi(this.oi,this.ti,new iY(this.Tt)),this.Ns=new zQ(this.referenceDelegate,this.Tt),this.remoteDocumentCache=LM(this.Tt),this.Os=new OQ,this.window&&this.window.localStorage?this.ci=this.window.localStorage:(this.ci=null,u===!1&&Yt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new re(Q.FAILED_PRECONDITION,x0);return this.hi(),this.li(),this.fi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ns.getHighestSequenceNumber(e))}).then(e=>{this.Cs=new pr(e,this.Zs)}).then(()=>{this.xs=!0}).catch(e=>(this.ui&&this.ui.close(),Promise.reject(e)))}di(e){return this.ri=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.ui.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ys.enqueueAndForget(async()=>{this.started&&await this.ai()}))}ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Vp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this._i(e).next(n=>{n||(this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)))})}).next(()=>this.wi(e)).next(n=>this.isPrimary&&!n?this.mi(e).next(()=>!1):!!n&&this.gi(e).next(()=>!0))).catch(e=>{if(Xo(e))return se("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return se("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ys.enqueueRetryable(()=>this.ri(e)),this.isPrimary=e})}_i(e){return id(e).get("owner").next(n=>q.resolve(this.yi(n)))}pi(e){return Vp(e).delete(this.clientId)}async Ii(){if(this.isPrimary&&!this.Ti(this.ii,18e5)){this.ii=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=xn(n,"clientMetadata");return r.W().next(i=>{const s=this.Ei(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return q.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.ci)for(const n of e)this.ci.removeItem(this.Ai(n.clientId))}}fi(){this.si=this.Ys.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ai().then(()=>this.Ii()).then(()=>this.fi()))}yi(e){return!!e&&e.ownerId===this.clientId}wi(e){return this.Xs?q.resolve(!0):id(e).get("owner").next(n=>{if(n!==null&&this.Ti(n.leaseTimestampMs,5e3)&&!this.Ri(n.ownerId)){if(this.yi(n)&&this.networkEnabled)return!0;if(!this.yi(n)){if(!n.allowTabSynchronization)throw new re(Q.FAILED_PRECONDITION,x0);return!1}}return!(!this.networkEnabled||!this.inForeground)||Vp(e).W().next(r=>this.Ei(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&se("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.xs=!1,this.bi(),this.si&&(this.si.cancel(),this.si=null),this.vi(),this.Pi(),await this.ui.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new P1(e,pr.at);return this.mi(n).next(()=>this.pi(n))}),this.ui.close(),this.Vi()}Ei(e,n){return e.filter(r=>this.Ti(r.updateTimeMs,n)&&!this.Ri(r.clientId))}Si(){return this.runTransaction("getActiveClients","readonly",e=>Vp(e).W().next(n=>this.Ei(n,18e5).map(r=>r.clientId)))}get started(){return this.xs}getMutationQueue(e,n){return hv.ue(e,this.Tt,n,this.referenceDelegate)}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new BQ(e,this.Tt.oe.databaseId)}getDocumentOverlayCache(e){return dv.ue(this.Tt,e)}getBundleCache(){return this.Os}runTransaction(e,n,r){se("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=(o=this.ti)===15?PQ:o===14?IM:o===13?TM:o===12?NQ:o===11?xM:void Se();var o;let a;return this.ui.runTransaction(e,i,s,l=>(a=new P1(l,this.Cs?this.Cs.next():pr.at),n==="readwrite-primary"?this._i(a).next(c=>!!c||this.wi(a)).next(c=>{if(!c)throw Yt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)),new re(Q.FAILED_PRECONDITION,R2);return r(a)}).next(c=>this.gi(a).next(()=>c)):this.Di(a).next(()=>r(a)))).then(l=>(a.raiseOnCommittedEvent(),l))}Di(e){return id(e).get("owner").next(n=>{if(n!==null&&this.Ti(n.leaseTimestampMs,5e3)&&!this.Ri(n.ownerId)&&!this.yi(n)&&!(this.Xs||this.allowTabSynchronization&&n.allowTabSynchronization))throw new re(Q.FAILED_PRECONDITION,x0)})}gi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return id(e).put("owner",n)}static C(){return hi.C()}mi(e){const n=id(e);return n.get("owner").next(r=>this.yi(r)?(se("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):q.resolve())}Ti(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Yt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}hi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ni=()=>{this.Ys.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.ai()))},this.document.addEventListener("visibilitychange",this.ni),this.inForeground=this.document.visibilityState==="visible")}vi(){this.ni&&(this.document.removeEventListener("visibilitychange",this.ni),this.ni=null)}li(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ei=()=>{this.bi(),qq()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Ys.enterRestrictedMode(!0),this.Ys.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ei))}Pi(){this.ei&&(this.window.removeEventListener("pagehide",this.ei),this.ei=null)}Ri(e){var n;try{const r=((n=this.ci)===null||n===void 0?void 0:n.getItem(this.Ai(e)))!==null;return se("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Yt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}bi(){if(this.ci)try{this.ci.setItem(this.Ai(this.clientId),String(Date.now()))}catch(e){Yt("Failed to set zombie client id.",e)}}Vi(){if(this.ci)try{this.ci.removeItem(this.Ai(this.clientId))}catch{}}Ai(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function id(t){return xn(t,"owner")}function Vp(t){return xn(t,"clientMetadata")}function UE(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ci=r,this.xi=i}static Ni(e,n){let r=We(),i=We();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new jE(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(){this.ki=!1}initialize(e,n){this.Oi=e,this.indexManager=n,this.ki=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Mi(e,n).next(s=>s||this.Fi(e,n,i,r)).next(s=>s||this.$i(e,n))}Mi(e,n){if(Pk(n))return q.resolve(null);let r=xr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=_g(n,null,"F"),r=xr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=We(...s);return this.Oi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Bi(n,a);return this.Li(n,c,o,l.readTime)?this.Mi(e,_g(n,null,"F")):this.qi(e,c,n,l)}))})))}Fi(e,n,r,i){return Pk(n)||i.isEqual(Ne.min())?this.$i(e,n):this.Oi.getDocuments(e,r).next(s=>{const o=this.Bi(n,s);return this.Li(n,o,r,i)?this.$i(e,n):(_1()<=st.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),A1(n)),this.qi(e,o,n,k2(i,-1)))})}Bi(e,n){let r=new At(Q2(e));return n.forEach((i,s)=>{Ff(e,s)&&(r=r.add(s))}),r}Li(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}$i(e,n){return _1()<=st.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",A1(n)),this.Oi.getDocumentsMatchingQuery(e,n,$r.min())}qi(e,n,r,i){return this.Oi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sY{constructor(e,n,r,i){this.persistence=e,this.Ui=n,this.Tt=i,this.Ki=new ln(Be),this.Gi=new Jo(s=>Ja(s),Mf),this.Qi=new Map,this.ji=e.getRemoteDocumentCache(),this.Ns=e.getTargetCache(),this.Os=e.getBundleCache(),this.zi(r)}zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new MM(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ki))}}function UM(t,e,n,r){return new sY(t,e,n,r)}async function jM(t,e){const n=ge(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.zi(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=We();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Wi:c,removedBatchIds:o,addedBatchIds:a}))})})}function oY(t,e){const n=ge(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.ji.newChangeBuffer({trackRemovals:!0});return function(o,a,l,c){const u=l.batch,d=u.keys();let h=q.resolve();return d.forEach(f=>{h=h.next(()=>c.getEntry(a,f)).next(p=>{const y=l.docVersions.get(f);Ae(y!==null),p.version.compareTo(y)<0&&(u.applyToRemoteDocument(p,l),p.isValidDocument()&&(p.setReadTime(l.commitVersion),c.addEntry(p)))})}),h.next(()=>o.mutationQueue.removeMutationBatch(a,u))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=We();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function VM(t){const e=ge(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ns.getLastRemoteSnapshotVersion(n))}function aY(t,e){const n=ge(t),r=e.snapshotVersion;let i=n.Ki;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.ji.newChangeBuffer({trackRemovals:!0});i=n.Ki;const a=[];e.targetChanges.forEach((u,d)=>{const h=i.get(d);if(!h)return;a.push(n.Ns.removeMatchingKeys(s,u.removedDocuments,d).next(()=>n.Ns.addMatchingKeys(s,u.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.has(d)?f=f.withResumeToken(an.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,r)),i=i.insert(d,f),function(p,y,w){return p.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(h,f,u)&&a.push(n.Ns.updateTargetData(s,f))});let l=gr(),c=We();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(BM(s,o,e.documentUpdates).next(u=>{l=u.Hi,c=u.Ji})),!r.isEqual(Ne.min())){const u=n.Ns.getLastRemoteSnapshotVersion(s).next(d=>n.Ns.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return q.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.Ki=i,s))}function BM(t,e,n){let r=We(),i=We();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=gr();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Ne.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):se("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Hi:o,Ji:i}})}function lY(t,e){const n=ge(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Hc(t,e){const n=ge(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ns.getTargetData(r,e).next(s=>s?(i=s,q.resolve(i)):n.Ns.allocateTargetId(r).next(o=>(i=new go(e,o,0,r.currentSequenceNumber),n.Ns.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ki.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ki=n.Ki.insert(r.targetId,r),n.Gi.set(e,r.targetId)),r})}async function Gc(t,e,n){const r=ge(t),i=r.Ki.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Xo(o))throw o;se("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ki=r.Ki.remove(e),r.Gi.delete(i.target)}function Eg(t,e,n){const r=ge(t);let i=Ne.min(),s=We();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,l,c){const u=ge(a),d=u.Gi.get(c);return d!==void 0?q.resolve(u.Ki.get(d)):u.Ns.getTargetData(l,c)}(r,o,xr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ns.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Ui.getDocumentsMatchingQuery(o,e,n?i:Ne.min(),n?s:We())).next(a=>(HM(r,K2(e),a),{documents:a,Yi:s})))}function zM(t,e){const n=ge(t),r=ge(n.Ns),i=n.Ki.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ie(s,e).next(o=>o?o.target:null))}function WM(t,e){const n=ge(t),r=n.Qi.get(e)||Ne.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.ji.getAllFromCollectionGroup(i,e,k2(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(HM(n,e,i),i))}function HM(t,e,n){let r=t.Qi.get(e)||Ne.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Qi.set(e,r)}async function cY(t,e,n,r){const i=ge(t);let s=We(),o=gr();for(const c of n){const u=e.Zi(c.metadata.name);c.document&&(s=s.add(u));const d=e.Xi(c);d.setReadTime(e.tr(c.metadata.readTime)),o=o.insert(u,d)}const a=i.ji.newChangeBuffer({trackRemovals:!0}),l=await Hc(i,function(c){return xr(wu(ot.fromString(`__bundle__/docs/${c}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>BM(c,a,o).next(u=>(a.apply(c),u)).next(u=>i.Ns.removeMatchingKeysForTargetId(c,l.targetId).next(()=>i.Ns.addMatchingKeys(c,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,u.Hi,u.Ji)).next(()=>u.Hi)))}async function uY(t,e,n=We()){const r=await Hc(t,xr(OE(e.bundledQuery))),i=ge(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Jt(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Os.saveNamedQuery(s,e);const a=r.withResumeToken(an.EMPTY_BYTE_STRING,o);return i.Ki=i.Ki.insert(a.targetId,a),i.Ns.updateTargetData(s,a).next(()=>i.Ns.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ns.addMatchingKeys(s,n,r.targetId)).next(()=>i.Os.saveNamedQuery(s,e))})}function oA(t,e){return`firestore_clients_${t}_${e}`}function aA(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function T0(t,e){return`firestore_targets_${t}_${e}`}class xg{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static er(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new re(i.error.code,i.error.message))),o?new xg(e,n,i.state,s):(Yt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Hd{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static er(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new re(r.error.code,r.error.message))),s?new Hd(e,r.state,i):(Yt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Tg{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static er(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=uv();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=D2(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new Tg(e,s):(Yt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class VE{constructor(e,n){this.clientId=e,this.onlineState=n}static er(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new VE(n.clientId,n.onlineState):(Yt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class M1{constructor(){this.activeTargetIds=uv()}sr(e){this.activeTargetIds=this.activeTargetIds.add(e)}ir(e){this.activeTargetIds=this.activeTargetIds.delete(e)}nr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class I0{constructor(e,n,r,i,s){this.window=e,this.Ys=n,this.persistenceKey=r,this.rr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ur=this.cr.bind(this),this.ar=new ln(Be),this.started=!1,this.hr=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.lr=oA(this.persistenceKey,this.rr),this.dr=function(a){return`firestore_sequence_number_${a}`}(this.persistenceKey),this.ar=this.ar.insert(this.rr,new M1),this._r=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.wr=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.mr=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.gr=function(a){return`firestore_online_state_${a}`}(this.persistenceKey),this.yr=function(a){return`firestore_bundle_loaded_v2_${a}`}(this.persistenceKey),this.window.addEventListener("storage",this.ur)}static C(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Si();for(const r of e){if(r===this.rr)continue;const i=this.getItem(oA(this.persistenceKey,r));if(i){const s=Tg.er(r,i);s&&(this.ar=this.ar.insert(s.clientId,s))}}this.pr();const n=this.storage.getItem(this.gr);if(n){const r=this.Ir(n);r&&this.Tr(r)}for(const r of this.hr)this.cr(r);this.hr=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.dr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Er(this.ar)}isActiveQueryTarget(e){let n=!1;return this.ar.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ar(e,"pending")}updateMutationState(e,n,r){this.Ar(e,n,r),this.Rr(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(T0(this.persistenceKey,e));if(r){const i=Hd.er(e,r);i&&(n=i.state)}}return this.br.sr(e),this.pr(),n}removeLocalQueryTarget(e){this.br.ir(e),this.pr()}isLocalQueryTarget(e){return this.br.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(T0(this.persistenceKey,e))}updateQueryState(e,n,r){this.vr(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Rr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ur),this.removeItem(this.lr),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return se("SharedClientState","READ",e,n),n}setItem(e,n){se("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){se("SharedClientState","REMOVE",e),this.storage.removeItem(e)}cr(e){const n=e;if(n.storageArea===this.storage){if(se("SharedClientState","EVENT",n.key,n.newValue),n.key===this.lr)return void Yt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ys.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this._r.test(n.key)){if(n.newValue==null){const r=this.Sr(n.key);return this.Dr(r,null)}{const r=this.Cr(n.key,n.newValue);if(r)return this.Dr(r.clientId,r)}}else if(this.wr.test(n.key)){if(n.newValue!==null){const r=this.Nr(n.key,n.newValue);if(r)return this.kr(r)}}else if(this.mr.test(n.key)){if(n.newValue!==null){const r=this.Or(n.key,n.newValue);if(r)return this.Mr(r)}}else if(n.key===this.gr){if(n.newValue!==null){const r=this.Ir(n.newValue);if(r)return this.Tr(r)}}else if(n.key===this.dr){const r=function(i){let s=pr.at;if(i!=null)try{const o=JSON.parse(i);Ae(typeof o=="number"),s=o}catch(o){Yt("SharedClientState","Failed to read sequence number from WebStorage",o)}return s}(n.newValue);r!==pr.at&&this.sequenceNumberHandler(r)}else if(n.key===this.yr){const r=this.Fr(n.newValue);await Promise.all(r.map(i=>this.syncEngine.$r(i)))}}}else this.hr.push(n)})}}get br(){return this.ar.get(this.rr)}pr(){this.setItem(this.lr,this.br.nr())}Ar(e,n,r){const i=new xg(this.currentUser,e,n,r),s=aA(this.persistenceKey,this.currentUser,e);this.setItem(s,i.nr())}Rr(e){const n=aA(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Pr(e){const n={clientId:this.rr,onlineState:e};this.storage.setItem(this.gr,JSON.stringify(n))}vr(e,n,r){const i=T0(this.persistenceKey,e),s=new Hd(e,n,r);this.setItem(i,s.nr())}Vr(e){const n=JSON.stringify(Array.from(e));this.setItem(this.yr,n)}Sr(e){const n=this._r.exec(e);return n?n[1]:null}Cr(e,n){const r=this.Sr(e);return Tg.er(r,n)}Nr(e,n){const r=this.wr.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return xg.er(new gn(s),i,n)}Or(e,n){const r=this.mr.exec(e),i=Number(r[1]);return Hd.er(i,n)}Ir(e){return VE.er(e)}Fr(e){return JSON.parse(e)}async kr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Br(e.batchId,e.state,e.error);se("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Mr(e){return this.syncEngine.Lr(e.targetId,e.state,e.error)}Dr(e,n){const r=n?this.ar.insert(e,n):this.ar.remove(e),i=this.Er(this.ar),s=this.Er(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.qr(o,a).then(()=>{this.ar=r})}Tr(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Er(e){let n=uv();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class GM{constructor(){this.Ur=new M1,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}updateQueryState(e,n,r){this.Kr[e]=n}removeLocalQueryTarget(e){this.Ur.ir(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.Kr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new M1,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dY{Gr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(){this.Qr=()=>this.jr(),this.zr=()=>this.Wr(),this.Hr=[],this.Jr()}Gr(e){this.Hr.push(e)}shutdown(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}Jr(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}jr(){se("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Hr)e(0)}Wr(){se("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Hr)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hY={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fY{constructor(e){this.Yr=e.Yr,this.Zr=e.Zr}Xr(e){this.eo=e}no(e){this.so=e}onMessage(e){this.io=e}close(){this.Zr()}send(e){this.Yr(e)}ro(){this.eo()}oo(e){this.so(e)}uo(e){this.io(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pY extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.co=n+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get ho(){return!1}lo(e,n,r,i,s){const o=this.fo(e,n);se("RestConnection","Sending: ",o,r);const a={};return this._o(a,i,s),this.wo(e,o,a,r).then(l=>(se("RestConnection","Received: ",l),l),l=>{throw Fc("RestConnection",`${e} failed with error: `,l,"url: ",o,"request:",r),l})}mo(e,n,r,i,s,o){return this.lo(e,n,r,i,s)}_o(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+_u,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}fo(e,n){const r=hY[e];return`${this.co}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}wo(e,n,r,i){return new Promise((s,o)=>{const a=new h7;a.setWithCredentials(!0),a.listenOnce(c7.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case S0.NO_ERROR:const c=a.getResponseJson();se("Connection","XHR received:",JSON.stringify(c)),s(c);break;case S0.TIMEOUT:se("Connection",'RPC "'+e+'" timed out'),o(new re(Q.DEADLINE_EXCEEDED,"Request time out"));break;case S0.HTTP_ERROR:const u=a.getStatus();if(se("Connection",'RPC "'+e+'" failed with status:',u,"response text:",a.getResponseText()),u>0){let d=a.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const f=function(p){const y=p.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(y)>=0?y:Q.UNKNOWN}(h.status);o(new re(f,h.message))}else o(new re(Q.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new re(Q.UNAVAILABLE,"Connection failed."));break;default:Se()}}finally{se("Connection",'RPC "'+e+'" completed.')}});const l=JSON.stringify(i);a.send(n,"POST",l,r,15)})}yo(e,n,r){const i=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=a7(),o=l7(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new d7({})),this._o(a.initMessageHeaders,n,r),a.encodeInitMessageHeaders=!0;const l=i.join("");se("Connection","Creating WebChannel: "+l,a);const c=s.createWebChannel(l,a);let u=!1,d=!1;const h=new fY({Yr:p=>{d?se("Connection","Not sending because WebChannel is closed:",p):(u||(se("Connection","Opening WebChannel transport."),c.open(),u=!0),se("Connection","WebChannel sending:",p),c.send(p))},Zr:()=>c.close()}),f=(p,y,w)=>{p.listen(y,m=>{try{w(m)}catch(g){setTimeout(()=>{throw g},0)}})};return f(c,Mp.EventType.OPEN,()=>{d||se("Connection","WebChannel transport opened.")}),f(c,Mp.EventType.CLOSE,()=>{d||(d=!0,se("Connection","WebChannel transport closed"),h.oo())}),f(c,Mp.EventType.ERROR,p=>{d||(d=!0,Fc("Connection","WebChannel transport errored:",p),h.oo(new re(Q.UNAVAILABLE,"The operation could not be completed")))}),f(c,Mp.EventType.MESSAGE,p=>{var y;if(!d){const w=p.data[0];Ae(!!w);const m=w,g=m.error||((y=m[0])===null||y===void 0?void 0:y.error);if(g){se("Connection","WebChannel received error:",g);const _=g.status;let S=function(E){const D=Zt[E];if(D!==void 0)return oM(D)}(_),I=g.message;S===void 0&&(S=Q.INTERNAL,I="Unknown error status: "+_+" with message "+g.message),d=!0,h.oo(new re(S,I)),c.close()}else se("Connection","WebChannel received:",w),h.uo(w)}}),f(o,u7.STAT_EVENT,p=>{p.stat===vk.PROXY?se("Connection","Detected buffering proxy"):p.stat===vk.NOPROXY&&se("Connection","Detected no buffering proxy")}),setTimeout(()=>{h.ro()},0),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qM(){return typeof window<"u"?window:null}function gm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bf(t){return new sQ(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Ys=e,this.timerId=n,this.po=r,this.Io=i,this.To=s,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}reset(){this.Eo=0}bo(){this.Eo=this.To}vo(e){this.cancel();const n=Math.floor(this.Eo+this.Po()),r=Math.max(0,Date.now()-this.Ro),i=Math.max(0,n-r);i>0&&se("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Eo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,i,()=>(this.Ro=Date.now(),e())),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}Vo(){this.Ao!==null&&(this.Ao.skipDelay(),this.Ao=null)}cancel(){this.Ao!==null&&(this.Ao.cancel(),this.Ao=null)}Po(){return(Math.random()-.5)*this.Eo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e,n,r,i,s,o,a,l){this.Ys=e,this.So=r,this.Do=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new BE(e,n)}Oo(){return this.state===1||this.state===5||this.Mo()}Mo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Fo()}async stop(){this.Oo()&&await this.close(0)}$o(){this.state=0,this.ko.reset()}Bo(){this.Mo()&&this.xo===null&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,()=>this.Lo()))}qo(e){this.Uo(),this.stream.send(e)}async Lo(){if(this.Mo())return this.close(0)}Uo(){this.xo&&(this.xo.cancel(),this.xo=null)}Ko(){this.No&&(this.No.cancel(),this.No=null)}async close(e,n){this.Uo(),this.Ko(),this.ko.cancel(),this.Co++,e!==4?this.ko.reset():n&&n.code===Q.RESOURCE_EXHAUSTED?(Yt(n.toString()),Yt("Using maximum backoff delay to prevent overloading the backend."),this.ko.bo()):n&&n.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Go(),this.stream.close(),this.stream=null),this.state=e,await this.listener.no(n)}Go(){}auth(){this.state=1;const e=this.Qo(this.Co),n=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Co===n&&this.jo(r,i)},r=>{e(()=>{const i=new re(Q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.zo(i)})})}jo(e,n){const r=this.Qo(this.Co);this.stream=this.Wo(e,n),this.stream.Xr(()=>{r(()=>(this.state=2,this.No=this.Ys.enqueueAfterDelay(this.Do,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.no(i=>{r(()=>this.zo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Fo(){this.state=5,this.ko.vo(async()=>{this.state=0,this.start()})}zo(e){return se("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Qo(e){return n=>{this.Ys.enqueueAndForget(()=>this.Co===e?n():(se("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class mY extends KM{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.Tt=s}Wo(e,n){return this.connection.yo("Listen",e,n)}onMessage(e){this.ko.reset();const n=lQ(this.Tt,e),r=function(i){if(!("targetChange"in i))return Ne.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?Ne.min():s.readTime?Jt(s.readTime):Ne.min()}(e);return this.listener.Ho(n,r)}Jo(e){const n={};n.database=Fh(this.Tt),n.addTarget=function(i,s){let o;const a=s.target;return o=yg(a)?{documents:yM(i,a)}:{query:vM(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=hM(i,s.resumeToken):s.snapshotVersion.compareTo(Ne.min())>0&&(o.readTime=Wc(i,s.snapshotVersion.toTimestamp())),o}(this.Tt,e);const r=uQ(this.Tt,e);r&&(n.labels=r),this.qo(n)}Yo(e){const n={};n.database=Fh(this.Tt),n.removeTarget=e,this.qo(n)}}class gY extends KM{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.Tt=s,this.Zo=!1}get Xo(){return this.Zo}start(){this.Zo=!1,this.lastStreamToken=void 0,super.start()}Go(){this.Zo&&this.tu([])}Wo(e,n){return this.connection.yo("Write",e,n)}onMessage(e){if(Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Zo){this.ko.reset();const n=cQ(e.writeResults,e.commitTime),r=Jt(e.commitTime);return this.listener.eu(r,n)}return Ae(!e.writeResults||e.writeResults.length===0),this.Zo=!0,this.listener.nu()}su(){const e={};e.database=Fh(this.Tt),this.qo(e)}tu(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Uh(this.Tt,r))};this.qo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yY extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.Tt=i,this.iu=!1}ru(){if(this.iu)throw new re(Q.FAILED_PRECONDITION,"The client has already been terminated.")}lo(e,n,r){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.lo(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new re(Q.UNKNOWN,i.toString())})}mo(e,n,r,i){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.mo(e,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new re(Q.UNKNOWN,s.toString())})}terminate(){this.iu=!0}}class vY{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}au(){this.ou===0&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.uu=null,this.lu("Backend didn't respond within 10 seconds."),this.hu("Offline"),Promise.resolve())))}fu(e){this.state==="Online"?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.hu("Offline")))}set(e){this.du(),this.ou=0,e==="Online"&&(this.cu=!1),this.hu(e)}hu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}lu(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.cu?(Yt(n),this.cu=!1):se("OnlineStateTracker",n)}du(){this.uu!==null&&(this.uu.cancel(),this.uu=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Y{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=s,this.yu.Gr(o=>{r.enqueueAndForget(async()=>{Zo(this)&&(se("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=ge(a);l.mu.add(4),await Eu(l),l.pu.set("Unknown"),l.mu.delete(4),await zf(l)}(this))})}),this.pu=new vY(r,i)}}async function zf(t){if(Zo(t))for(const e of t.gu)await e(!0)}async function Eu(t){for(const e of t.gu)await e(!1)}function pv(t,e){const n=ge(t);n.wu.has(e.targetId)||(n.wu.set(e.targetId,e),HE(n)?WE(n):Tu(n).Mo()&&zE(n,e))}function jh(t,e){const n=ge(t),r=Tu(n);n.wu.delete(e),r.Mo()&&QM(n,e),n.wu.size===0&&(r.Mo()?r.Bo():Zo(n)&&n.pu.set("Unknown"))}function zE(t,e){t.Iu.Ft(e.targetId),Tu(t).Jo(e)}function QM(t,e){t.Iu.Ft(e),Tu(t).Yo(e)}function WE(t){t.Iu=new tQ({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ie:e=>t.wu.get(e)||null}),Tu(t).start(),t.pu.au()}function HE(t){return Zo(t)&&!Tu(t).Oo()&&t.wu.size>0}function Zo(t){return ge(t).mu.size===0}function YM(t){t.Iu=void 0}async function wY(t){t.wu.forEach((e,n)=>{zE(t,e)})}async function bY(t,e){YM(t),HE(t)?(t.pu.fu(e),WE(t)):t.pu.set("Unknown")}async function SY(t,e,n){if(t.pu.set("Online"),e instanceof dM&&e.state===2&&e.cause)try{await async function(r,i){const s=i.cause;for(const o of i.targetIds)r.wu.has(o)&&(await r.remoteSyncer.rejectListen(o,s),r.wu.delete(o),r.Iu.removeTarget(o))}(t,e)}catch(r){se("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ig(t,r)}else if(e instanceof pm?t.Iu.Qt(e):e instanceof uM?t.Iu.Zt(e):t.Iu.Wt(e),!n.isEqual(Ne.min()))try{const r=await VM(t.localStore);n.compareTo(r)>=0&&await function(i,s){const o=i.Iu.ee(s);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const c=i.wu.get(l);c&&i.wu.set(l,c.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach(a=>{const l=i.wu.get(a);if(!l)return;i.wu.set(a,l.withResumeToken(an.EMPTY_BYTE_STRING,l.snapshotVersion)),QM(i,a);const c=new go(l.target,a,1,l.sequenceNumber);zE(i,c)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){se("RemoteStore","Failed to raise snapshot:",r),await Ig(t,r)}}async function Ig(t,e,n){if(!Xo(e))throw e;t.mu.add(1),await Eu(t),t.pu.set("Offline"),n||(n=()=>VM(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{se("RemoteStore","Retrying IndexedDB access"),await n(),t.mu.delete(1),await zf(t)})}function XM(t,e){return e().catch(n=>Ig(t,n,e))}async function xu(t){const e=ge(t),n=Ro(e);let r=e._u.length>0?e._u[e._u.length-1].batchId:-1;for(;EY(e);)try{const i=await lY(e.localStore,r);if(i===null){e._u.length===0&&n.Bo();break}r=i.batchId,xY(e,i)}catch(i){await Ig(e,i)}JM(e)&&ZM(e)}function EY(t){return Zo(t)&&t._u.length<10}function xY(t,e){t._u.push(e);const n=Ro(t);n.Mo()&&n.Xo&&n.tu(e.mutations)}function JM(t){return Zo(t)&&!Ro(t).Oo()&&t._u.length>0}function ZM(t){Ro(t).start()}async function TY(t){Ro(t).su()}async function IY(t){const e=Ro(t);for(const n of t._u)e.tu(n.mutations)}async function CY(t,e,n){const r=t._u.shift(),i=PE.from(r,e,n);await XM(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await xu(t)}async function kY(t,e){e&&Ro(t).Xo&&await async function(n,r){if(i=r.code,sM(i)&&i!==Q.ABORTED){const s=n._u.shift();Ro(n).$o(),await XM(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),await xu(n)}var i}(t,e),JM(t)&&ZM(t)}async function cA(t,e){const n=ge(t);n.asyncQueue.verifyOperationInProgress(),se("RemoteStore","RemoteStore received new credentials");const r=Zo(n);n.mu.add(3),await Eu(n),r&&n.pu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.mu.delete(3),await zf(n)}async function $1(t,e){const n=ge(t);e?(n.mu.delete(2),await zf(n)):e||(n.mu.add(2),await Eu(n),n.pu.set("Unknown"))}function Tu(t){return t.Tu||(t.Tu=function(e,n,r){const i=ge(e);return i.ru(),new mY(n,i.connection,i.authCredentials,i.appCheckCredentials,i.Tt,r)}(t.datastore,t.asyncQueue,{Xr:wY.bind(null,t),no:bY.bind(null,t),Ho:SY.bind(null,t)}),t.gu.push(async e=>{e?(t.Tu.$o(),HE(t)?WE(t):t.pu.set("Unknown")):(await t.Tu.stop(),YM(t))})),t.Tu}function Ro(t){return t.Eu||(t.Eu=function(e,n,r){const i=ge(e);return i.ru(),new gY(n,i.connection,i.authCredentials,i.appCheckCredentials,i.Tt,r)}(t.datastore,t.asyncQueue,{Xr:TY.bind(null,t),no:kY.bind(null,t),nu:IY.bind(null,t),eu:CY.bind(null,t)}),t.gu.push(async e=>{e?(t.Eu.$o(),await xu(t)):(await t.Eu.stop(),t._u.length>0&&(se("RemoteStore",`Stopping write stream with ${t._u.length} pending writes`),t._u=[]))})),t.Eu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new wn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new GE(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Iu(t,e){if(Yt("AsyncQueue",`${e}: ${t}`),Xo(t))return new re(Q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e){this.comparator=e?(n,r)=>e(n,r)||fe.comparator(n.key,r.key):(n,r)=>fe.comparator(n.key,r.key),this.keyedMap=xd(),this.sortedSet=new ln(this.comparator)}static emptySet(e){return new vc(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof vc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new vc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(){this.Au=new ln(fe.comparator)}track(e){const n=e.doc.key,r=this.Au.get(n);r?e.type!==0&&r.type===3?this.Au=this.Au.insert(n,e):e.type===3&&r.type!==1?this.Au=this.Au.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Au=this.Au.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Au=this.Au.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Au=this.Au.remove(n):e.type===1&&r.type===2?this.Au=this.Au.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Au=this.Au.insert(n,{type:2,doc:e.doc}):Se():this.Au=this.Au.insert(n,e)}Ru(){const e=[];return this.Au.inorderTraversal((n,r)=>{e.push(r)}),e}}class qc{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new qc(e,n,vc.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$f(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AY{constructor(){this.bu=void 0,this.listeners=[]}}class RY{constructor(){this.queries=new Jo(e=>q2(e),$f),this.onlineState="Unknown",this.vu=new Set}}async function qE(t,e){const n=ge(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new AY),i)try{s.bu=await n.onListen(r)}catch(o){const a=Iu(o,`Initialization of query '${A1(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.Pu(n.onlineState),s.bu&&e.Vu(s.bu)&&QE(n)}async function KE(t,e){const n=ge(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function NY(t,e){const n=ge(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.Vu(i)&&(r=!0);o.bu=i}}r&&QE(n)}function PY(t,e,n){const r=ge(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function QE(t){t.vu.forEach(e=>{e.next()})}class YE{constructor(e,n,r){this.query=e,this.Su=n,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new qc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Du?this.xu(e)&&(this.Su.next(e),n=!0):this.Nu(e,this.onlineState)&&(this.ku(e),n=!0),this.Cu=e,n}onError(e){this.Su.error(e)}Pu(e){this.onlineState=e;let n=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),n=!0),n}Nu(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Ou||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}xu(e){if(e.docChanges.length>0)return!0;const n=this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ku(e){e=qc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DY{constructor(e,n){this.Mu=e,this.byteLength=n}Fu(){return"metadata"in this.Mu}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e){this.Tt=e}Zi(e){return Ui(this.Tt,e)}Xi(e){return e.metadata.exists?gM(this.Tt,e.document,!1):It.newNoDocument(this.Zi(e.metadata.name),this.tr(e.metadata.readTime))}tr(e){return Jt(e)}}class OY{constructor(e,n,r){this.$u=e,this.localStore=n,this.Tt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=e$(e)}Bu(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Mu.namedQuery)this.queries.push(e.Mu.namedQuery);else if(e.Mu.documentMetadata){this.documents.push({metadata:e.Mu.documentMetadata}),e.Mu.documentMetadata.exists||++n;const r=ot.fromString(e.Mu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Mu.document&&(this.documents[this.documents.length-1].document=e.Mu.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}Lu(e){const n=new Map,r=new dA(this.Tt);for(const i of e)if(i.metadata.queries){const s=r.Zi(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||We()).add(s);n.set(o,a)}}return n}async complete(){const e=await cY(this.localStore,new dA(this.Tt),this.documents,this.$u.id),n=this.Lu(this.documents);for(const r of this.queries)await uY(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,qu:this.collectionGroups,Uu:e}}}function e$(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t${constructor(e){this.key=e}}class n${constructor(e){this.key=e}}class r${constructor(e,n){this.query=e,this.Ku=n,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=We(),this.mutatedKeys=We(),this.ju=Q2(e),this.zu=new vc(this.ju)}get Wu(){return this.Ku}Hu(e,n){const r=n?n.Ju:new uA,i=n?n.zu:this.zu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{const h=i.get(u),f=Ff(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),y=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let w=!1;h&&f?h.data.isEqual(f.data)?p!==y&&(r.track({type:3,doc:f}),w=!0):this.Yu(h,f)||(r.track({type:2,doc:f}),w=!0,(l&&this.ju(f,l)>0||c&&this.ju(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),w=!0):h&&!f&&(r.track({type:1,doc:h}),w=!0,(l||c)&&(a=!0)),w&&(f?(o=o.add(f),s=y?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{zu:o,Ju:r,Li:a,mutatedKeys:s}}Yu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;const s=e.Ju.Ru();s.sort((c,u)=>function(d,h){const f=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se()}};return f(d)-f(h)}(c.type,u.type)||this.ju(c.doc,u.doc)),this.Zu(r);const o=n?this.Xu():[],a=this.Qu.size===0&&this.current?1:0,l=a!==this.Gu;return this.Gu=a,s.length!==0||l?{snapshot:new qc(this.query,e.zu,i,s,e.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),tc:o}:{tc:o}}Pu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new uA,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}ec(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}Zu(e){e&&(e.addedDocuments.forEach(n=>this.Ku=this.Ku.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ku=this.Ku.delete(n)),this.current=e.current)}Xu(){if(!this.current)return[];const e=this.Qu;this.Qu=We(),this.zu.forEach(r=>{this.ec(r.key)&&(this.Qu=this.Qu.add(r.key))});const n=[];return e.forEach(r=>{this.Qu.has(r)||n.push(new n$(r))}),this.Qu.forEach(r=>{e.has(r)||n.push(new t$(r))}),n}nc(e){this.Ku=e.Yi,this.Qu=We();const n=this.Hu(e.documents);return this.applyChanges(n,!0)}sc(){return qc.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,this.Gu===0,this.hasCachedResults)}}class LY{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class MY{constructor(e){this.key=e,this.ic=!1}}class $Y{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.rc={},this.oc=new Jo(a=>q2(a),$f),this.uc=new Map,this.cc=new Set,this.ac=new ln(fe.comparator),this.hc=new Map,this.lc=new $E,this.fc={},this.dc=new Map,this._c=rl.Sn(),this.onlineState="Unknown",this.wc=void 0}get isPrimaryClient(){return this.wc===!0}}async function FY(t,e){const n=tx(t);let r,i;const s=n.oc.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.sc();else{const o=await Hc(n.localStore,xr(e));n.isPrimaryClient&&pv(n.remoteStore,o);const a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await XE(n,e,r,a==="current",o.resumeToken)}return i}async function XE(t,e,n,r,i){t.mc=(d,h,f)=>async function(p,y,w,m){let g=y.view.Hu(w);g.Li&&(g=await Eg(p.localStore,y.query,!1).then(({documents:I})=>y.view.Hu(I,g)));const _=m&&m.targetChanges.get(y.targetId),S=y.view.applyChanges(g,p.isPrimaryClient,_);return F1(p,y.targetId,S.tc),S.snapshot}(t,d,h,f);const s=await Eg(t.localStore,e,!0),o=new r$(e,s.Yi),a=o.Hu(s.documents),l=Vf.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);F1(t,n,c.tc);const u=new LY(e,n,o);return t.oc.set(e,u),t.uc.has(n)?t.uc.get(n).push(e):t.uc.set(n,[e]),c.snapshot}async function UY(t,e){const n=ge(t),r=n.oc.get(e),i=n.uc.get(r.targetId);if(i.length>1)return n.uc.set(r.targetId,i.filter(s=>!$f(s,e))),void n.oc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Gc(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),jh(n.remoteStore,r.targetId),Kc(n,r.targetId)}).catch(Yo)):(Kc(n,r.targetId),await Gc(n.localStore,r.targetId,!0))}async function jY(t,e,n){const r=nx(t);try{const i=await function(s,o){const a=ge(s),l=Ft.now(),c=o.reduce((h,f)=>h.add(f.key),We());let u,d;return a.persistence.runTransaction("Locally write mutations","readwrite",h=>{let f=gr(),p=We();return a.ji.getEntries(h,c).next(y=>{f=y,f.forEach((w,m)=>{m.isValidDocument()||(p=p.add(w))})}).next(()=>a.localDocuments.getOverlayedDocuments(h,f)).next(y=>{u=y;const w=[];for(const m of o){const g=Q7(m,u.get(m.key).overlayedDocument);g!=null&&w.push(new Os(m.key,g,H2(g.value.mapValue),Mt.exists(!0)))}return a.mutationQueue.addMutationBatch(h,l,w,o)}).next(y=>{d=y;const w=y.applyToLocalDocumentSet(u,p);return a.documentOverlayCache.saveOverlays(h,y.batchId,w)})}).then(()=>({batchId:d.batchId,changes:lM(u)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let l=s.fc[s.currentUser.toKey()];l||(l=new ln(Be)),l=l.insert(o,a),s.fc[s.currentUser.toKey()]=l}(r,i.batchId,n),await Ls(r,i.changes),await xu(r.remoteStore)}catch(i){const s=Iu(i,"Failed to persist write");n.reject(s)}}async function i$(t,e){const n=ge(t);try{const r=await aY(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.hc.get(s);o&&(Ae(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.ic=!0:i.modifiedDocuments.size>0?Ae(o.ic):i.removedDocuments.size>0&&(Ae(o.ic),o.ic=!1))}),await Ls(n,r,e)}catch(r){await Yo(r)}}function hA(t,e,n){const r=ge(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.oc.forEach((s,o)=>{const a=o.view.Pu(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){const a=ge(s);a.onlineState=o;let l=!1;a.queries.forEach((c,u)=>{for(const d of u.listeners)d.Pu(o)&&(l=!0)}),l&&QE(a)}(r.eventManager,e),i.length&&r.rc.Ho(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function VY(t,e,n){const r=ge(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.hc.get(e),s=i&&i.key;if(s){let o=new ln(fe.comparator);o=o.insert(s,It.newNoDocument(s,Ne.min()));const a=We().add(s),l=new jf(Ne.min(),new Map,new At(Be),o,a);await i$(r,l),r.ac=r.ac.remove(s),r.hc.delete(e),ex(r)}else await Gc(r.localStore,e,!1).then(()=>Kc(r,e,n)).catch(Yo)}async function BY(t,e){const n=ge(t),r=e.batch.batchId;try{const i=await oY(n.localStore,e);ZE(n,r,null),JE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ls(n,i)}catch(i){await Yo(i)}}async function zY(t,e,n){const r=ge(t);try{const i=await function(s,o){const a=ge(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return a.mutationQueue.lookupMutationBatch(l,o).next(u=>(Ae(u!==null),c=u.keys(),a.mutationQueue.removeMutationBatch(l,u))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,c,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>a.localDocuments.getDocuments(l,c))})}(r.localStore,e);ZE(r,e,n),JE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ls(r,i)}catch(i){await Yo(i)}}async function WY(t,e){const n=ge(t);Zo(n.remoteStore)||se("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(s){const o=ge(s);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",a=>o.mutationQueue.getHighestUnacknowledgedBatchId(a))}(n.localStore);if(r===-1)return void e.resolve();const i=n.dc.get(r)||[];i.push(e),n.dc.set(r,i)}catch(r){const i=Iu(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function JE(t,e){(t.dc.get(e)||[]).forEach(n=>{n.resolve()}),t.dc.delete(e)}function ZE(t,e,n){const r=ge(t);let i=r.fc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.fc[r.currentUser.toKey()]=i}}function Kc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.uc.get(e))t.oc.delete(r),n&&t.rc.gc(r,n);t.uc.delete(e),t.isPrimaryClient&&t.lc.ds(e).forEach(r=>{t.lc.containsKey(r)||s$(t,r)})}function s$(t,e){t.cc.delete(e.path.canonicalString());const n=t.ac.get(e);n!==null&&(jh(t.remoteStore,n),t.ac=t.ac.remove(e),t.hc.delete(n),ex(t))}function F1(t,e,n){for(const r of n)r instanceof t$?(t.lc.addReference(r.key,e),HY(t,r)):r instanceof n$?(se("SyncEngine","Document no longer in limbo: "+r.key),t.lc.removeReference(r.key,e),t.lc.containsKey(r.key)||s$(t,r.key)):Se()}function HY(t,e){const n=e.key,r=n.path.canonicalString();t.ac.get(n)||t.cc.has(r)||(se("SyncEngine","New document in limbo: "+n),t.cc.add(r),ex(t))}function ex(t){for(;t.cc.size>0&&t.ac.size<t.maxConcurrentLimboResolutions;){const e=t.cc.values().next().value;t.cc.delete(e);const n=new fe(ot.fromString(e)),r=t._c.next();t.hc.set(r,new MY(n)),t.ac=t.ac.insert(n,r),pv(t.remoteStore,new go(xr(wu(n.path)),r,2,pr.at))}}async function Ls(t,e,n){const r=ge(t),i=[],s=[],o=[];r.oc.isEmpty()||(r.oc.forEach((a,l)=>{o.push(r.mc(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){i.push(c);const u=jE.Ni(l.targetId,c);s.push(u)}}))}),await Promise.all(o),r.rc.Ho(i),await async function(a,l){const c=ge(a);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>q.forEach(l,d=>q.forEach(d.Ci,h=>c.persistence.referenceDelegate.addReference(u,d.targetId,h)).next(()=>q.forEach(d.xi,h=>c.persistence.referenceDelegate.removeReference(u,d.targetId,h)))))}catch(u){if(!Xo(u))throw u;se("LocalStore","Failed to update sequence numbers: "+u)}for(const u of l){const d=u.targetId;if(!u.fromCache){const h=c.Ki.get(d),f=h.snapshotVersion,p=h.withLastLimboFreeSnapshotVersion(f);c.Ki=c.Ki.insert(d,p)}}}(r.localStore,s))}async function GY(t,e){const n=ge(t);if(!n.currentUser.isEqual(e)){se("SyncEngine","User change. New user:",e.toKey());const r=await jM(n.localStore,e);n.currentUser=e,function(i,s){i.dc.forEach(o=>{o.forEach(a=>{a.reject(new re(Q.CANCELLED,s))})}),i.dc.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ls(n,r.Wi)}}function qY(t,e){const n=ge(t),r=n.hc.get(e);if(r&&r.ic)return We().add(r.key);{let i=We();const s=n.uc.get(e);if(!s)return i;for(const o of s){const a=n.oc.get(o);i=i.unionWith(a.view.Wu)}return i}}async function KY(t,e){const n=ge(t),r=await Eg(n.localStore,e.query,!0),i=e.view.nc(r);return n.isPrimaryClient&&F1(n,e.targetId,i.tc),i}async function QY(t,e){const n=ge(t);return WM(n.localStore,e).then(r=>Ls(n,r))}async function YY(t,e,n,r){const i=ge(t),s=await function(o,a){const l=ge(o),c=ge(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",u=>c.An(u,a).next(d=>d?l.localDocuments.getDocuments(u,d):q.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await xu(i.remoteStore):n==="acknowledged"||n==="rejected"?(ZE(i,e,r||null),JE(i,e),function(o,a){ge(ge(o).mutationQueue).bn(a)}(i.localStore,e)):Se(),await Ls(i,s)):se("SyncEngine","Cannot apply mutation batch with id: "+e)}async function XY(t,e){const n=ge(t);if(tx(n),nx(n),e===!0&&n.wc!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await fA(n,r.toArray());n.wc=!0,await $1(n.remoteStore,!0);for(const s of i)pv(n.remoteStore,s)}else if(e===!1&&n.wc!==!1){const r=[];let i=Promise.resolve();n.uc.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Kc(n,o),Gc(n.localStore,o,!0))),jh(n.remoteStore,o)}),await i,await fA(n,r),function(s){const o=ge(s);o.hc.forEach((a,l)=>{jh(o.remoteStore,l)}),o.lc._s(),o.hc=new Map,o.ac=new ln(fe.comparator)}(n),n.wc=!1,await $1(n.remoteStore,!1)}}async function fA(t,e,n){const r=ge(t),i=[],s=[];for(const o of e){let a;const l=r.uc.get(o);if(l&&l.length!==0){a=await Hc(r.localStore,xr(l[0]));for(const c of l){const u=r.oc.get(c),d=await KY(r,u);d.snapshot&&s.push(d.snapshot)}}else{const c=await zM(r.localStore,o);a=await Hc(r.localStore,c),await XE(r,o$(c),o,!1,a.resumeToken)}i.push(a)}return r.rc.Ho(s),i}function o$(t){return G2(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function JY(t){const e=ge(t);return ge(ge(e.localStore).persistence).Si()}async function ZY(t,e,n,r){const i=ge(t);if(i.wc)return void se("SyncEngine","Ignoring unexpected query state notification.");const s=i.uc.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await WM(i.localStore,K2(s[0])),a=jf.createSynthesizedRemoteEventForCurrentChange(e,n==="current",an.EMPTY_BYTE_STRING);await Ls(i,o,a);break}case"rejected":await Gc(i.localStore,e,!0),Kc(i,e,r);break;default:Se()}}async function eX(t,e,n){const r=tx(t);if(r.wc){for(const i of e){if(r.uc.has(i)){se("SyncEngine","Adding an already active target "+i);continue}const s=await zM(r.localStore,i),o=await Hc(r.localStore,s);await XE(r,o$(s),o.targetId,!1,o.resumeToken),pv(r.remoteStore,o)}for(const i of n)r.uc.has(i)&&await Gc(r.localStore,i,!1).then(()=>{jh(r.remoteStore,i),Kc(r,i)}).catch(Yo)}}function tx(t){const e=ge(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=i$.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qY.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=VY.bind(null,e),e.rc.Ho=NY.bind(null,e.eventManager),e.rc.gc=PY.bind(null,e.eventManager),e}function nx(t){const e=ge(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BY.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zY.bind(null,e),e}function tX(t,e,n){const r=ge(t);(async function(i,s,o){try{const a=await s.getMetadata();if(await function(d,h){const f=ge(d),p=Jt(h.createTime);return f.persistence.runTransaction("hasNewerBundle","readonly",y=>f.Os.getBundleMetadata(y,h.id)).then(y=>!!y&&y.createTime.compareTo(p)>=0)}(i.localStore,a))return await s.close(),o._completeWith(function(d){return{taskState:"Success",documentsLoaded:d.totalDocuments,bytesLoaded:d.totalBytes,totalDocuments:d.totalDocuments,totalBytes:d.totalBytes}}(a)),Promise.resolve(new Set);o._updateProgress(e$(a));const l=new OY(a,i.localStore,s.Tt);let c=await s.yc();for(;c;){const d=await l.Bu(c);d&&o._updateProgress(d),c=await s.yc()}const u=await l.complete();return await Ls(i,u.Uu,void 0),await function(d,h){const f=ge(d);return f.persistence.runTransaction("Save bundle","readwrite",p=>f.Os.saveBundleMetadata(p,h))}(i.localStore,a),o._completeWith(u.progress),Promise.resolve(u.qu)}catch(a){return Fc("SyncEngine",`Loading bundle failed with ${a}`),o._failWith(a),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class a${constructor(){this.synchronizeTabs=!1}async initialize(e){this.Tt=Bf(e.databaseInfo.databaseId),this.sharedClientState=this.Ic(e),this.persistence=this.Tc(e),await this.persistence.start(),this.localStore=this.Ec(e),this.gcScheduler=this.Ac(e,this.localStore),this.indexBackfillerScheduler=this.Rc(e,this.localStore)}Ac(e,n){return null}Rc(e,n){return null}Ec(e){return UM(this.persistence,new FM,e.initialUser,this.Tt)}Tc(e){return new $M(fv.qs,this.Tt)}Ic(e){return new GM}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class l$ extends a${constructor(e,n,r){super(),this.bc=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.bc.initialize(this,e),await nx(this.bc.syncEngine),await xu(this.bc.remoteStore),await this.persistence.di(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}Ec(e){return UM(this.persistence,new FM,e.initialUser,this.Tt)}Ac(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new HQ(r,e.asyncQueue,n)}Rc(e,n){const r=new k7(n,this.persistence);return new C7(e.asyncQueue,r)}Tc(e){const n=UE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?lr.withCacheSize(this.cacheSizeBytes):lr.DEFAULT;return new FE(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,qM(),gm(),this.Tt,this.sharedClientState,!!this.forceOwnership)}Ic(e){return new GM}}class nX extends l${constructor(e,n){super(e,n,!1),this.bc=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.bc.syncEngine;this.sharedClientState instanceof I0&&(this.sharedClientState.syncEngine={Br:YY.bind(null,n),Lr:ZY.bind(null,n),qr:eX.bind(null,n),Si:JY.bind(null,n),$r:QY.bind(null,n)},await this.sharedClientState.start()),await this.persistence.di(async r=>{await XY(this.bc.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Ic(e){const n=qM();if(!I0.C(n))throw new re(Q.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=UE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new I0(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class rx{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>hA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=GY.bind(null,this.syncEngine),await $1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new RY}createDatastore(e){const n=Bf(e.databaseInfo.databaseId),r=(i=e.databaseInfo,new pY(i));var i;return function(s,o,a,l){return new yY(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>hA(this.syncEngine,a,0),o=lA.C()?new lA:new dY,new _Y(n,r,i,s,o);var n,r,i,s,o}createSyncEngine(e,n){return function(r,i,s,o,a,l,c){const u=new $Y(r,i,s,o,a,l);return c&&(u.wc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=ge(e);se("RemoteStore","RemoteStore shutting down."),n.mu.add(5),await Eu(n),n.yu.shutdown(),n.pu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.vc(this.observer.next,e)}error(e){this.observer.error?this.vc(this.observer.error,e):Yt("Uncaught Error in snapshot listener:",e.toString())}Pc(){this.muted=!0}vc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rX{constructor(e,n){this.Vc=e,this.Tt=n,this.metadata=new wn,this.buffer=new Uint8Array,this.Sc=new TextDecoder("utf-8"),this.Dc().then(r=>{r&&r.Fu()?this.metadata.resolve(r.Mu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Mu)}`))},r=>this.metadata.reject(r))}close(){return this.Vc.cancel()}async getMetadata(){return this.metadata.promise}async yc(){return await this.getMetadata(),this.Dc()}async Dc(){const e=await this.Cc();if(e===null)return null;const n=this.Sc.decode(e),r=Number(n);isNaN(r)&&this.xc(`length string (${n}) is not valid number`);const i=await this.Nc(r);return new DY(JSON.parse(i),e.length+r)}kc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async Cc(){for(;this.kc()<0&&!await this.Oc(););if(this.buffer.length===0)return null;const e=this.kc();e<0&&this.xc("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Nc(e){for(;this.buffer.length<e;)await this.Oc()&&this.xc("Reached the end of bundle when more is expected.");const n=this.Sc.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}xc(e){throw this.Vc.cancel(),new Error(`Invalid bundle format: ${e}`)}async Oc(){const e=await this.Vc.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iX{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new re(Q.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=await async function(r,i){const s=ge(r),o=Fh(s.Tt)+"/documents",a={documents:i.map(d=>$h(s.Tt,d))},l=await s.mo("BatchGetDocuments",o,a,i.length),c=new Map;l.forEach(d=>{const h=aQ(s.Tt,d);c.set(h.key.toString(),h)});const u=[];return i.forEach(d=>{const h=c.get(d.toString());Ae(!!h),u.push(h)}),u}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Su(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=fe.fromPath(r);this.mutations.push(new AE(i,this.precondition(i)))}),await async function(n,r){const i=ge(n),s=Fh(i.Tt)+"/documents",o={writes:r.map(a=>Uh(i.Tt,a))};await i.lo("Commit",s,o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Se();n=Ne.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new re(Q.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Ne.min())?Mt.exists(!1):Mt.updateTime(n):Mt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Ne.min()))throw new re(Q.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Mt.updateTime(n)}return Mt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sX{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Mc=r.maxAttempts,this.ko=new BE(this.asyncQueue,"transaction_retry")}run(){this.Mc-=1,this.Fc()}Fc(){this.ko.vo(async()=>{const e=new iX(this.datastore),n=this.$c(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Bc(i)}))}).catch(r=>{this.Bc(r)})})}$c(e){try{const n=this.updateFunction(e);return!Lf(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Bc(e){this.Mc>0&&this.Lc(e)?(this.Mc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Fc(),Promise.resolve()))):this.deferred.reject(e)}Lc(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!sM(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oX{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=gn.UNAUTHENTICATED,this.clientId=T2.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{se("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(se("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new re(Q.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new wn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Iu(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function c$(t,e){t.asyncQueue.verifyOperationInProgress(),se("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await jM(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function u$(t,e){t.asyncQueue.verifyOperationInProgress();const n=await ix(t);se("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>cA(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>cA(e.remoteStore,s)),t.onlineComponents=e}async function ix(t){return t.offlineComponents||(se("FirestoreClient","Using default OfflineComponentProvider"),await c$(t,new a$)),t.offlineComponents}async function gv(t){return t.onlineComponents||(se("FirestoreClient","Using default OnlineComponentProvider"),await u$(t,new rx)),t.onlineComponents}function d$(t){return ix(t).then(e=>e.persistence)}function sx(t){return ix(t).then(e=>e.localStore)}function h$(t){return gv(t).then(e=>e.remoteStore)}function ox(t){return gv(t).then(e=>e.syncEngine)}function aX(t){return gv(t).then(e=>e.datastore)}async function Qc(t){const e=await gv(t),n=e.eventManager;return n.onListen=FY.bind(null,e.syncEngine),n.onUnlisten=UY.bind(null,e.syncEngine),n}function lX(t){return t.asyncQueue.enqueue(async()=>{const e=await d$(t),n=await h$(t);return e.setNetworkEnabled(!0),function(r){const i=ge(r);return i.mu.delete(0),zf(i)}(n)})}function cX(t){return t.asyncQueue.enqueue(async()=>{const e=await d$(t),n=await h$(t);return e.setNetworkEnabled(!1),async function(r){const i=ge(r);i.mu.add(0),await Eu(i),i.pu.set("Offline")}(n)})}function uX(t,e){const n=new wn;return t.asyncQueue.enqueueAndForget(async()=>async function(r,i,s){try{const o=await function(a,l){const c=ge(a);return c.persistence.runTransaction("read document","readonly",u=>c.localDocuments.getDocument(u,l))}(r,i);o.isFoundDocument()?s.resolve(o):o.isNoDocument()?s.resolve(null):s.reject(new re(Q.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const a=Iu(o,`Failed to get document '${i} from cache`);s.reject(a)}}(await sx(t),e,n)),n.promise}function f$(t,e,n={}){const r=new wn;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,l){const c=new mv({next:d=>{s.enqueueAndForget(()=>KE(i,u));const h=d.docs.has(o);!h&&d.fromCache?l.reject(new re(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&a&&a.source==="server"?l.reject(new re(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),u=new YE(wu(o.path),c,{includeMetadataChanges:!0,Ou:!0});return qE(i,u)}(await Qc(t),t.asyncQueue,e,n,r)),r.promise}function dX(t,e){const n=new wn;return t.asyncQueue.enqueueAndForget(async()=>async function(r,i,s){try{const o=await Eg(r,i,!0),a=new r$(i,o.Yi),l=a.Hu(o.documents),c=a.applyChanges(l,!1);s.resolve(c.snapshot)}catch(o){const a=Iu(o,`Failed to execute query '${i} against cache`);s.reject(a)}}(await sx(t),e,n)),n.promise}function p$(t,e,n={}){const r=new wn;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,l){const c=new mv({next:d=>{s.enqueueAndForget(()=>KE(i,u)),d.fromCache&&a.source==="server"?l.reject(new re(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),u=new YE(o,c,{includeMetadataChanges:!0,Ou:!0});return qE(i,u)}(await Qc(t),t.asyncQueue,e,n,r)),r.promise}function hX(t,e){const n=new mv(e);return t.asyncQueue.enqueueAndForget(async()=>function(r,i){ge(r).vu.add(i),i.next()}(await Qc(t),n)),()=>{n.Pc(),t.asyncQueue.enqueueAndForget(async()=>function(r,i){ge(r).vu.delete(i)}(await Qc(t),n))}}function fX(t,e,n,r){const i=function(s,o){let a;return a=typeof s=="string"?new TextEncoder().encode(s):s,function(l,c){return new rX(l,c)}(function(l,c){if(l instanceof Uint8Array)return pA(l,c);if(l instanceof ArrayBuffer)return pA(new Uint8Array(l),c);if(l instanceof ReadableStream)return l.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(a),o)}(n,Bf(e));t.asyncQueue.enqueueAndForget(async()=>{tX(await ox(t),i,r)})}function pX(t,e){return t.asyncQueue.enqueue(async()=>function(n,r){const i=ge(n);return i.persistence.runTransaction("Get named query","readonly",s=>i.Os.getNamedQuery(s,r))}(await sx(t),e))}const mA=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(t,e,n){if(!n)throw new re(Q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function m$(t,e,n,r){if(e===!0&&r===!0)throw new re(Q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function gA(t){if(!fe.isDocumentKey(t))throw new re(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function yA(t){if(fe.isDocumentKey(t))throw new re(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function yv(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Se()}function ct(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new re(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=yv(t);throw new re(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function g$(t,e){if(e<=0)throw new re(Q.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new re(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new re(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,m$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vA({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new re(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new re(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vA(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new m7;switch(n.type){case"gapi":const r=n.client;return new _7(r,n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new re(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=mA.get(e);n&&(se("ComponentProvider","Removing Datastore"),mA.delete(e),n.terminate())}(this),Promise.resolve()}}function mX(t,e,n,r={}){var i;const s=(t=ct(t,Wf))._getSettings();if(s.host!=="firestore.googleapis.com"&&s.host!==e&&Fc("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${n}`,ssl:!1})),r.mockUserToken){let o,a;if(typeof r.mockUserToken=="string")o=r.mockUserToken,a=gn.MOCK_USER;else{o=QS(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new re(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new gn(l)}t._authCredentials=new g7(new x2(o,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ji(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rt(this.firestore,e,this._key)}}class Mn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Mn(this.firestore,e,this._query)}}class ji extends Mn{constructor(e,n,r){super(e,n,wu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rt(this.firestore,null,new fe(e))}withConverter(e){return new ji(this.firestore,e,this._path)}}function y$(t,e,...n){if(t=me(t),ax("collection","path",e),t instanceof Wf){const r=ot.fromString(e,...n);return yA(r),new ji(t,null,r)}{if(!(t instanceof Rt||t instanceof ji))throw new re(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ot.fromString(e,...n));return yA(r),new ji(t.firestore,null,r)}}function gX(t,e){if(t=ct(t,Wf),ax("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new re(Q.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Mn(t,null,function(n){return new Ds(ot.emptyPath(),n)}(e))}function Gi(t,e,...n){if(t=me(t),arguments.length===1&&(e=T2.R()),ax("doc","path",e),t instanceof Wf){const r=ot.fromString(e,...n);return gA(r),new Rt(t,null,new fe(r))}{if(!(t instanceof Rt||t instanceof ji))throw new re(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ot.fromString(e,...n));return gA(r),new Rt(t.firestore,t instanceof ji?t.converter:null,new fe(r))}}function v$(t,e){return t=me(t),e=me(e),(t instanceof Rt||t instanceof ji)&&(e instanceof Rt||e instanceof ji)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function _$(t,e){return t=me(t),e=me(e),t instanceof Mn&&e instanceof Mn&&t.firestore===e.firestore&&$f(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yX{constructor(){this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new BE(this,"async_queue_retry"),this.Hc=()=>{const n=gm();n&&se("AsyncQueue","Visibility state changed to "+n.visibilityState),this.ko.Vo()};const e=gm();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Hc)}get isShuttingDown(){return this.Kc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Jc(),this.Yc(e)}enterRestrictedMode(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;const n=gm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Hc)}}enqueue(e){if(this.Jc(),this.Kc)return new Promise(()=>{});const n=new wn;return this.Yc(()=>this.Kc&&this.zc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Uc.push(e),this.Zc()))}async Zc(){if(this.Uc.length!==0){try{await this.Uc[0](),this.Uc.shift(),this.ko.reset()}catch(e){if(!Xo(e))throw e;se("AsyncQueue","Operation failed with retryable error: "+e)}this.Uc.length>0&&this.ko.vo(()=>this.Zc())}}Yc(e){const n=this.qc.then(()=>(this.jc=!0,e().catch(r=>{this.Qc=r,this.jc=!1;const i=function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),o}(r);throw Yt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.jc=!1,r))));return this.qc=n,n}enqueueAfterDelay(e,n,r){this.Jc(),this.Wc.indexOf(e)>-1&&(n=0);const i=GE.createAndSchedule(this,e,n,r,s=>this.Xc(s));return this.Gc.push(i),i}Jc(){this.Qc&&Se()}verifyOperationInProgress(){}async ta(){let e;do e=this.qc,await e;while(e!==this.qc)}ea(e){for(const n of this.Gc)if(n.timerId===e)return!0;return!1}na(e){return this.ta().then(()=>{this.Gc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Gc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ta()})}sa(e){this.Wc.push(e)}Xc(e){const n=this.Gc.indexOf(e);this.Gc.splice(n,1)}}function U1(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const i of n)if(i in r&&typeof r[i]=="function")return!0;return!1}(t,["next","error","complete"])}class vX{constructor(){this._progressObserver={},this._taskCompletionResolver=new wn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _X=-1;class Kt extends Wf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new yX,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||w$(this),this._firestoreClient.terminate()}}function Tn(t){return t._firestoreClient||w$(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function w$(t){var e;const n=t._freezeSettings(),r=function(i,s,o,a){return new A7(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new oX(t._authCredentials,t._appCheckCredentials,t._queue,r)}function wX(t,e){S$(t=ct(t,Kt));const n=Tn(t),r=t._freezeSettings(),i=new rx;return b$(n,i,new l$(i,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function bX(t){S$(t=ct(t,Kt));const e=Tn(t),n=t._freezeSettings(),r=new rx;return b$(e,r,new nX(r,n.cacheSizeBytes))}function b$(t,e,n){const r=new wn;return t.asyncQueue.enqueue(async()=>{try{await c$(t,n),await u$(t,e),r.resolve()}catch(i){const s=i;if(!function(o){return o.name==="FirebaseError"?o.code===Q.FAILED_PRECONDITION||o.code===Q.UNIMPLEMENTED:typeof DOMException<"u"&&o instanceof DOMException?o.code===22||o.code===20||o.code===11:!0}(s))throw s;Fc("Error enabling offline persistence. Falling back to persistence disabled: "+s),r.reject(s)}}).then(()=>r.promise)}function SX(t){if(t._initialized&&!t._terminated)throw new re(Q.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new wn;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(n){if(!hi.C())return Promise.resolve();const r=n+"main";await hi.delete(r)}(UE(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function EX(t){return function(e){const n=new wn;return e.asyncQueue.enqueueAndForget(async()=>WY(await ox(e),n)),n.promise}(Tn(t=ct(t,Kt)))}function xX(t){return lX(Tn(t=ct(t,Kt)))}function TX(t){return cX(Tn(t=ct(t,Kt)))}function IX(t,e){const n=Tn(t=ct(t,Kt)),r=new vX;return fX(n,t._databaseId,e,r),r}function CX(t,e){return pX(Tn(t=ct(t,Kt)),e).then(n=>n?new Mn(t,null,n.query):null)}function S$(t){if(t._initialized||t._terminated)throw new re(Q.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qi(an.fromBase64String(e))}catch(n){throw new re(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new qi(an.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new re(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new re(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new re(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kX=/^__.*__$/;class AX{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Os(e,this.data,this.fieldMask,n,this.fieldTransforms):new bu(e,this.data,n,this.fieldTransforms)}}class E${constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Os(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function x$(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se()}}class _v{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.Tt=r,this.ignoreUndefinedProperties=i,s===void 0&&this.ia(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ra(){return this.settings.ra}oa(e){return new _v(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ua(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.oa({path:r,ca:!1});return i.aa(e),i}ha(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.oa({path:r,ca:!1});return i.ia(),i}la(e){return this.oa({path:void 0,ca:!0})}fa(e){return Cg(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}ia(){if(this.path)for(let e=0;e<this.path.length;e++)this.aa(this.path.get(e))}aa(e){if(e.length===0)throw this.fa("Document fields must not be empty");if(x$(this.ra)&&kX.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}class RX{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.Tt=r||Bf(e)}wa(e,n,r,i=!1){return new _v({ra:e,methodName:n,_a:r,path:Xt.emptyPath(),ca:!1,da:i},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}function El(t){const e=t._freezeSettings(),n=Bf(t._databaseId);return new RX(t._databaseId,!!e.ignoreUndefinedProperties,n)}function wv(t,e,n,r,i,s={}){const o=t.wa(s.merge||s.mergeFields?2:0,e,n,i);dx("Data must be an object, but it was:",o,r);const a=C$(r,o);let l,c;if(s.merge)l=new mr(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const d of s.mergeFields){const h=j1(e,d,n);if(!o.contains(h))throw new re(Q.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);A$(u,h)||u.push(h)}l=new mr(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new AX(new Rn(a),l,c)}class Hf extends Sl{_toFieldTransform(e){if(e.ra!==2)throw e.ra===1?e.fa(`${this._methodName}() can only appear at the top level of your update data`):e.fa(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hf}}function T$(t,e,n){return new _v({ra:3,_a:e.settings._a,methodName:t._methodName,ca:n},e.databaseId,e.Tt,e.ignoreUndefinedProperties)}class lx extends Sl{_toFieldTransform(e){return new Uf(e.path,new Bc)}isEqual(e){return e instanceof lx}}class NX extends Sl{constructor(e,n){super(e),this.ma=n}_toFieldTransform(e){const n=T$(this,e,!0),r=this.ma.map(s=>xl(s,n)),i=new Za(r);return new Uf(e.path,i)}isEqual(e){return this===e}}class PX extends Sl{constructor(e,n){super(e),this.ma=n}_toFieldTransform(e){const n=T$(this,e,!0),r=this.ma.map(s=>xl(s,n)),i=new el(r);return new Uf(e.path,i)}isEqual(e){return this===e}}class DX extends Sl{constructor(e,n){super(e),this.ga=n}_toFieldTransform(e){const n=new zc(e.Tt,J2(e.Tt,this.ga));return new Uf(e.path,n)}isEqual(e){return this===e}}function cx(t,e,n,r){const i=t.wa(1,e,n);dx("Data must be an object, but it was:",i,r);const s=[],o=Rn.empty();bl(r,(l,c)=>{const u=hx(e,l,n);c=me(c);const d=i.ha(u);if(c instanceof Hf)s.push(u);else{const h=xl(c,d);h!=null&&(s.push(u),o.set(u,h))}});const a=new mr(s);return new E$(o,a,i.fieldTransforms)}function ux(t,e,n,r,i,s){const o=t.wa(1,e,n),a=[j1(e,r,n)],l=[i];if(s.length%2!=0)throw new re(Q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(j1(e,s[h])),l.push(s[h+1]);const c=[],u=Rn.empty();for(let h=a.length-1;h>=0;--h)if(!A$(c,a[h])){const f=a[h];let p=l[h];p=me(p);const y=o.ha(f);if(p instanceof Hf)c.push(f);else{const w=xl(p,y);w!=null&&(c.push(f),u.set(f,w))}}const d=new mr(c);return new E$(u,d,o.fieldTransforms)}function I$(t,e,n,r=!1){return xl(n,t.wa(r?4:3,e))}function xl(t,e){if(k$(t=me(t)))return dx("Unsupported field value:",e,t),C$(t,e);if(t instanceof Sl)return function(n,r){if(!x$(r.ra))throw r.fa(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.fa(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.ca&&e.ra!==4)throw e.fa("Nested arrays are not supported");return function(n,r){const i=[];let s=0;for(const o of n){let a=xl(o,r.la(s));a==null&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if((n=me(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return J2(r.Tt,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Ft.fromDate(n);return{timestampValue:Wc(r.Tt,i)}}if(n instanceof Ft){const i=new Ft(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Wc(r.Tt,i)}}if(n instanceof vv)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof qi)return{bytesValue:hM(r.Tt,n._byteString)};if(n instanceof Rt){const i=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw r.fa(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:RE(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.fa(`Unsupported field value: ${yv(n)}`)}(t,e)}function C$(t,e){const n={};return P2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bl(t,(r,i)=>{const s=xl(i,e.ua(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function k$(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ft||t instanceof vv||t instanceof qi||t instanceof Rt||t instanceof Sl)}function dx(t,e,n){if(!k$(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=yv(n);throw r==="an object"?e.fa(t+" a custom object"):e.fa(t+" "+r)}}function j1(t,e,n){if((e=me(e))instanceof No)return e._internalPath;if(typeof e=="string")return hx(t,e);throw Cg("Field path arguments must be of type string or ",t,!1,void 0,n)}const OX=new RegExp("[~\\*/\\[\\]]");function hx(t,e,n){if(e.search(OX)>=0)throw Cg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new No(...e.split("."))._internalPath}catch{throw Cg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Cg(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new re(Q.INVALID_ARGUMENT,a+t+l)}function A$(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Rt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new LX(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(bv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class LX extends Vh{data(){return super.data()}}function bv(t,e){return typeof e=="string"?hx(t,e):e instanceof No?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R$(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new re(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fx{}class Gf extends fx{}function Bs(t,e,...n){let r=[];e instanceof fx&&r.push(e),r=r.concat(n),function(i){const s=i.filter(a=>a instanceof px).length,o=i.filter(a=>a instanceof Sv).length;if(s>1||s>0&&o>0)throw new re(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Sv extends Gf{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Sv(e,n,r)}_apply(e){const n=this._parse(e);return P$(e._query,n),new Mn(e.firestore,e.converter,k1(e._query,n))}_parse(e){const n=El(e.firestore);return function(i,s,o,a,l,c,u){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new re(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){wA(u,c);const h=[];for(const f of u)h.push(_A(a,i,f));d={arrayValue:{values:h}}}else d=_A(a,i,u)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||wA(u,c),d=I$(o,s,u,c==="in"||c==="not-in");return at.create(l,c,d)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function MX(t,e,n){const r=e,i=bv("where",t);return Sv._create(i,r,n)}class px extends fx{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new px(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:wt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let s=r;const o=i.getFlattenedFilters();for(const a of o)P$(s,a),s=k1(s,a)}(e._query,n),new Mn(e.firestore,e.converter,k1(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class mx extends Gf{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new mx(e,n)}_apply(e){const n=function(r,i,s){if(r.startAt!==null)throw new re(Q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new re(Q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new yc(i,s);return function(a,l){if(CE(a)===null){const c=av(a);c!==null&&D$(a,c,l.field)}}(r,o),o}(e._query,this._field,this._direction);return new Mn(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new Ds(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function $X(t,e="asc"){const n=e,r=bv("orderBy",t);return mx._create(r,n)}class Ev extends Gf{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Ev(e,n,r)}_apply(e){return new Mn(e.firestore,e.converter,_g(e._query,this._limit,this._limitType))}}function FX(t){return g$("limit",t),Ev._create("limit",t,"F")}function UX(t){return g$("limitToLast",t),Ev._create("limitToLast",t,"L")}class xv extends Gf{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new xv(e,n,r)}_apply(e){const n=N$(e,this.type,this._docOrFields,this._inclusive);return new Mn(e.firestore,e.converter,function(r,i){return new Ds(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)}(e._query,n))}}function jX(...t){return xv._create("startAt",t,!0)}function VX(...t){return xv._create("startAfter",t,!1)}class Tv extends Gf{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Tv(e,n,r)}_apply(e){const n=N$(e,this.type,this._docOrFields,this._inclusive);return new Mn(e.firestore,e.converter,function(r,i){return new Ds(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)}(e._query,n))}}function BX(...t){return Tv._create("endBefore",t,!1)}function zX(...t){return Tv._create("endAt",t,!0)}function N$(t,e,n,r){if(n[0]=me(n[0]),n[0]instanceof Vh)return function(i,s,o,a,l){if(!a)throw new re(Q.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const c=[];for(const u of Pa(i))if(u.field.isKeyField())c.push(Xa(s,a.key));else{const d=a.data.field(u.field);if(TE(d))throw new re(Q.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(d===null){const h=u.field.canonicalString();throw new re(Q.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${h}' (used as the orderBy) does not exist.`)}c.push(d)}return new Ao(c,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=El(t.firestore);return function(s,o,a,l,c,u){const d=s.explicitOrderBy;if(c.length>d.length)throw new re(Q.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const h=[];for(let f=0;f<c.length;f++){const p=c[f];if(d[f].field.isKeyField()){if(typeof p!="string")throw new re(Q.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof p}`);if(!kE(s)&&p.indexOf("/")!==-1)throw new re(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${p}' contains a slash.`);const y=s.path.child(ot.fromString(p));if(!fe.isDocumentKey(y))throw new re(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${y}' is not because it contains an odd number of segments.`);const w=new fe(y);h.push(Xa(o,w))}else{const y=I$(a,l,p);h.push(y)}}return new Ao(h,u)}(t._query,t.firestore._databaseId,i,e,n,r)}}function _A(t,e,n){if(typeof(n=me(n))=="string"){if(n==="")throw new re(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kE(e)&&n.indexOf("/")!==-1)throw new re(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ot.fromString(n));if(!fe.isDocumentKey(r))throw new re(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Xa(t,new fe(r))}if(n instanceof Rt)return Xa(t,n._key);throw new re(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yv(n)}.`)}function wA(t,e){if(!Array.isArray(t)||t.length===0)throw new re(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function P$(t,e){if(e.isInequality()){const r=av(t),i=e.field;if(r!==null&&!r.isEqual(i))throw new re(Q.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=CE(t);s!==null&&D$(t,i,s)}const n=function(r,i){for(const s of r)for(const o of s.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new re(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new re(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function D$(t,e,n){if(!n.isEqual(e))throw new re(Q.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class gx{convertValue(e,n="none"){switch(Ya(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Qa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Se()}}convertObject(e,n){const r={};return bl(e.fields,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new vv(Gt(e.latitude),Gt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=O2(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Oh(e));default:return null}}convertTimestamp(e){const n=Co(e);return new Ft(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ot.fromString(e);Ae(SM(r));const i=new Io(r.get(1),r.get(3)),s=new fe(r.popFirst(5));return i.isEqual(n)||Yt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class WX extends gx{constructor(e){super(),this.firestore=e}convertBytes(e){return new qi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Rt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ts extends Vh{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Gd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(bv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Gd extends Ts{data(e={}){return super.data(e)}}class Po{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ea(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Gd(this._firestore,this._userDataWriter,r.key,r,new Ea(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new re(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>{const a=new Gd(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Ea(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const a=new Gd(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Ea(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let l=-1,c=-1;return o.type!==0&&(l=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),c=s.indexOf(o.doc.key)),{type:HX(o.type),doc:a,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function HX(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se()}}function O$(t,e){return t instanceof Ts&&e instanceof Ts?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Po&&e instanceof Po&&t._firestore===e._firestore&&_$(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(t){t=ct(t,Rt);const e=ct(t.firestore,Kt);return f$(Tn(e),t._key).then(n=>yx(e,t,n))}class Tl extends gx{constructor(e){super(),this.firestore=e}convertBytes(e){return new qi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Rt(this.firestore,null,n)}}function GX(t){t=ct(t,Rt);const e=ct(t.firestore,Kt),n=Tn(e),r=new Tl(e);return uX(n,t._key).then(i=>new Ts(e,r,t._key,i,new Ea(i!==null&&i.hasLocalMutations,!0),t.converter))}function qX(t){t=ct(t,Rt);const e=ct(t.firestore,Kt);return f$(Tn(e),t._key,{source:"server"}).then(n=>yx(e,t,n))}function KX(t){t=ct(t,Mn);const e=ct(t.firestore,Kt),n=Tn(e),r=new Tl(e);return R$(t._query),p$(n,t._query).then(i=>new Po(e,r,t,i))}function QX(t){t=ct(t,Mn);const e=ct(t.firestore,Kt),n=Tn(e),r=new Tl(e);return dX(n,t._query).then(i=>new Po(e,r,t,i))}function YX(t){t=ct(t,Mn);const e=ct(t.firestore,Kt),n=Tn(e),r=new Tl(e);return p$(n,t._query,{source:"server"}).then(i=>new Po(e,r,t,i))}function bA(t,e,n){t=ct(t,Rt);const r=ct(t.firestore,Kt),i=Iv(t.converter,e,n);return qf(r,[wv(El(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Mt.none())])}function Do(t,e,n,...r){t=ct(t,Rt);const i=ct(t.firestore,Kt),s=El(i);let o;return o=typeof(e=me(e))=="string"||e instanceof No?ux(s,"updateDoc",t._key,e,n,r):cx(s,"updateDoc",t._key,e),qf(i,[o.toMutation(t._key,Mt.exists(!0))])}function L$(t){return qf(ct(t.firestore,Kt),[new Su(t._key,Mt.none())])}function XX(t,e){const n=ct(t.firestore,Kt),r=Gi(t),i=Iv(t.converter,e);return qf(n,[wv(El(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Mt.exists(!1))]).then(()=>r)}function Xc(t,...e){var n,r,i;t=me(t);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||U1(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(U1(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let l,c,u;if(t instanceof Rt)c=ct(t.firestore,Kt),u=wu(t._key.path),l={next:d=>{e[o]&&e[o](yx(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=ct(t,Mn);c=ct(d.firestore,Kt),u=d._query;const h=new Tl(c);l={next:f=>{e[o]&&e[o](new Po(c,h,d,f))},error:e[o+1],complete:e[o+2]},R$(t._query)}return function(d,h,f,p){const y=new mv(p),w=new YE(h,y,f);return d.asyncQueue.enqueueAndForget(async()=>qE(await Qc(d),w)),()=>{y.Pc(),d.asyncQueue.enqueueAndForget(async()=>KE(await Qc(d),w))}}(Tn(c),u,a,l)}function JX(t,e){return hX(Tn(t=ct(t,Kt)),U1(e)?e:{next:e})}function qf(t,e){return function(n,r){const i=new wn;return n.asyncQueue.enqueueAndForget(async()=>jY(await ox(n),r,i)),i.promise}(Tn(t),e)}function yx(t,e,n){const r=n.docs.get(e._key),i=new Tl(t);return new Ts(t,i,e._key,r,new Ea(n.hasPendingWrites,n.fromCache),e.converter)}const ZX={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eJ{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=El(e)}set(e,n,r){this._verifyNotCommitted();const i=Ys(e,this._firestore),s=Iv(i.converter,n,r),o=wv(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Mt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Ys(e,this._firestore);let o;return o=typeof(n=me(n))=="string"||n instanceof No?ux(this._dataReader,"WriteBatch.update",s._key,n,r,i):cx(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Mt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Ys(e,this._firestore);return this._mutations=this._mutations.concat(new Su(n._key,Mt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new re(Q.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ys(t,e){if((t=me(t)).firestore!==e)throw new re(Q.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tJ extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=El(e)}get(e){const n=Ys(e,this._firestore),r=new WX(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return Se();const s=i[0];if(s.isFoundDocument())return new Vh(this._firestore,r,s.key,s,n.converter);if(s.isNoDocument())return new Vh(this._firestore,r,n._key,null,n.converter);throw Se()})}set(e,n,r){const i=Ys(e,this._firestore),s=Iv(i.converter,n,r),o=wv(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,o),this}update(e,n,r,...i){const s=Ys(e,this._firestore);let o;return o=typeof(n=me(n))=="string"||n instanceof No?ux(this._dataReader,"Transaction.update",s._key,n,r,i):cx(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,o),this}delete(e){const n=Ys(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Ys(e,this._firestore),r=new Tl(this._firestore);return super.get(e).then(i=>new Ts(this._firestore,r,n._key,i._document,new Ea(!1,!1),n.converter))}}function nJ(t,e,n){t=ct(t,Kt);const r=Object.assign(Object.assign({},ZX),n);return function(i){if(i.maxAttempts<1)throw new re(Q.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,s,o){const a=new wn;return i.asyncQueue.enqueueAndForget(async()=>{const l=await aX(i);new sX(i.asyncQueue,l,o,s,a).run()}),a.promise}(Tn(t),i=>e(new tJ(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rJ(){return new Hf("deleteField")}function iJ(){return new lx("serverTimestamp")}function sJ(...t){return new NX("arrayUnion",t)}function oJ(...t){return new PX("arrayRemove",t)}function M$(t){return new DX("increment",t)}(function(t,e=!0){(function(n){_u=n})(Ps),Wi(new sr("firestore",(n,{instanceIdentifier:r,options:i})=>{const s=n.getProvider("app").getImmediate(),o=new Kt(new y7(n.getProvider("auth-internal")),new b7(n.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new re(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Io(a.options.projectId,l)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Er(_k,"3.8.4",t),Er(_k,"3.8.4","esm2017")})();var Bh={},aJ={get exports(){return Bh},set exports(t){Bh=t}},gt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var In=typeof Symbol=="function"&&Symbol.for,vx=In?Symbol.for("react.element"):60103,_x=In?Symbol.for("react.portal"):60106,Cv=In?Symbol.for("react.fragment"):60107,kv=In?Symbol.for("react.strict_mode"):60108,Av=In?Symbol.for("react.profiler"):60114,Rv=In?Symbol.for("react.provider"):60109,Nv=In?Symbol.for("react.context"):60110,wx=In?Symbol.for("react.async_mode"):60111,Pv=In?Symbol.for("react.concurrent_mode"):60111,Dv=In?Symbol.for("react.forward_ref"):60112,Ov=In?Symbol.for("react.suspense"):60113,lJ=In?Symbol.for("react.suspense_list"):60120,Lv=In?Symbol.for("react.memo"):60115,Mv=In?Symbol.for("react.lazy"):60116,cJ=In?Symbol.for("react.block"):60121,uJ=In?Symbol.for("react.fundamental"):60117,dJ=In?Symbol.for("react.responder"):60118,hJ=In?Symbol.for("react.scope"):60119;function Vr(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case vx:switch(t=t.type,t){case wx:case Pv:case Cv:case Av:case kv:case Ov:return t;default:switch(t=t&&t.$$typeof,t){case Nv:case Dv:case Mv:case Lv:case Rv:return t;default:return e}}case _x:return e}}}function $$(t){return Vr(t)===Pv}gt.AsyncMode=wx;gt.ConcurrentMode=Pv;gt.ContextConsumer=Nv;gt.ContextProvider=Rv;gt.Element=vx;gt.ForwardRef=Dv;gt.Fragment=Cv;gt.Lazy=Mv;gt.Memo=Lv;gt.Portal=_x;gt.Profiler=Av;gt.StrictMode=kv;gt.Suspense=Ov;gt.isAsyncMode=function(t){return $$(t)||Vr(t)===wx};gt.isConcurrentMode=$$;gt.isContextConsumer=function(t){return Vr(t)===Nv};gt.isContextProvider=function(t){return Vr(t)===Rv};gt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===vx};gt.isForwardRef=function(t){return Vr(t)===Dv};gt.isFragment=function(t){return Vr(t)===Cv};gt.isLazy=function(t){return Vr(t)===Mv};gt.isMemo=function(t){return Vr(t)===Lv};gt.isPortal=function(t){return Vr(t)===_x};gt.isProfiler=function(t){return Vr(t)===Av};gt.isStrictMode=function(t){return Vr(t)===kv};gt.isSuspense=function(t){return Vr(t)===Ov};gt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Cv||t===Pv||t===Av||t===kv||t===Ov||t===lJ||typeof t=="object"&&t!==null&&(t.$$typeof===Mv||t.$$typeof===Lv||t.$$typeof===Rv||t.$$typeof===Nv||t.$$typeof===Dv||t.$$typeof===uJ||t.$$typeof===dJ||t.$$typeof===hJ||t.$$typeof===cJ)};gt.typeOf=Vr;(function(t){t.exports=gt})(aJ);var fJ=function(e,n,r,i){var s=r?r.call(i,e,n):void 0;if(s!==void 0)return!!s;if(e===n)return!0;if(typeof e!="object"||!e||typeof n!="object"||!n)return!1;var o=Object.keys(e),a=Object.keys(n);if(o.length!==a.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(n),c=0;c<o.length;c++){var u=o[c];if(!l(u))return!1;var d=e[u],h=n[u];if(s=r?r.call(i,d,h,u):void 0,s===!1||s===void 0&&d!==h)return!1}return!0};function pJ(t){function e(P,F,L,j,M){for(var te=0,G=0,ee=0,de=0,ye,oe,De=0,He=0,Ee,Me=Ee=ye=0,ve=0,Le=0,ft=0,qe=0,ut=L.length,Pt=ut-1,et,pe="",Ge="",K="",Y="",X;ve<ut;){if(oe=L.charCodeAt(ve),ve===Pt&&G+de+ee+te!==0&&(G!==0&&(oe=G===47?10:47),de=ee=te=0,ut++,Pt++),G+de+ee+te===0){if(ve===Pt&&(0<Le&&(pe=pe.replace(h,"")),0<pe.trim().length)){switch(oe){case 32:case 9:case 59:case 13:case 10:break;default:pe+=L.charAt(ve)}oe=59}switch(oe){case 123:for(pe=pe.trim(),ye=pe.charCodeAt(0),Ee=1,qe=++ve;ve<ut;){switch(oe=L.charCodeAt(ve)){case 123:Ee++;break;case 125:Ee--;break;case 47:switch(oe=L.charCodeAt(ve+1)){case 42:case 47:e:{for(Me=ve+1;Me<Pt;++Me)switch(L.charCodeAt(Me)){case 47:if(oe===42&&L.charCodeAt(Me-1)===42&&ve+2!==Me){ve=Me+1;break e}break;case 10:if(oe===47){ve=Me+1;break e}}ve=Me}}break;case 91:oe++;case 40:oe++;case 34:case 39:for(;ve++<Pt&&L.charCodeAt(ve)!==oe;);}if(Ee===0)break;ve++}switch(Ee=L.substring(qe,ve),ye===0&&(ye=(pe=pe.replace(d,"").trim()).charCodeAt(0)),ye){case 64:switch(0<Le&&(pe=pe.replace(h,"")),oe=pe.charCodeAt(1),oe){case 100:case 109:case 115:case 45:Le=F;break;default:Le=R}if(Ee=e(F,Le,Ee,oe,M+1),qe=Ee.length,0<U&&(Le=n(R,pe,ft),X=a(3,Ee,Le,F,A,k,qe,oe,M,j),pe=Le.join(""),X!==void 0&&(qe=(Ee=X.trim()).length)===0&&(oe=0,Ee="")),0<qe)switch(oe){case 115:pe=pe.replace(E,o);case 100:case 109:case 45:Ee=pe+"{"+Ee+"}";break;case 107:pe=pe.replace(g,"$1 $2"),Ee=pe+"{"+Ee+"}",Ee=B===1||B===2&&s("@"+Ee,3)?"@-webkit-"+Ee+"@"+Ee:"@"+Ee;break;default:Ee=pe+Ee,j===112&&(Ee=(Ge+=Ee,""))}else Ee="";break;default:Ee=e(F,n(F,pe,ft),Ee,j,M+1)}K+=Ee,Ee=ft=Le=Me=ye=0,pe="",oe=L.charCodeAt(++ve);break;case 125:case 59:if(pe=(0<Le?pe.replace(h,""):pe).trim(),1<(qe=pe.length))switch(Me===0&&(ye=pe.charCodeAt(0),ye===45||96<ye&&123>ye)&&(qe=(pe=pe.replace(" ",":")).length),0<U&&(X=a(1,pe,F,P,A,k,Ge.length,j,M,j))!==void 0&&(qe=(pe=X.trim()).length)===0&&(pe="\0\0"),ye=pe.charCodeAt(0),oe=pe.charCodeAt(1),ye){case 0:break;case 64:if(oe===105||oe===99){Y+=pe+L.charAt(ve);break}default:pe.charCodeAt(qe-1)!==58&&(Ge+=i(pe,ye,oe,pe.charCodeAt(2)))}ft=Le=Me=ye=0,pe="",oe=L.charCodeAt(++ve)}}switch(oe){case 13:case 10:G===47?G=0:1+ye===0&&j!==107&&0<pe.length&&(Le=1,pe+="\0"),0<U*z&&a(0,pe,F,P,A,k,Ge.length,j,M,j),k=1,A++;break;case 59:case 125:if(G+de+ee+te===0){k++;break}default:switch(k++,et=L.charAt(ve),oe){case 9:case 32:if(de+te+G===0)switch(De){case 44:case 58:case 9:case 32:et="";break;default:oe!==32&&(et=" ")}break;case 0:et="\\0";break;case 12:et="\\f";break;case 11:et="\\v";break;case 38:de+G+te===0&&(Le=ft=1,et="\f"+et);break;case 108:if(de+G+te+N===0&&0<Me)switch(ve-Me){case 2:De===112&&L.charCodeAt(ve-3)===58&&(N=De);case 8:He===111&&(N=He)}break;case 58:de+G+te===0&&(Me=ve);break;case 44:G+ee+de+te===0&&(Le=1,et+="\r");break;case 34:case 39:G===0&&(de=de===oe?0:de===0?oe:de);break;case 91:de+G+ee===0&&te++;break;case 93:de+G+ee===0&&te--;break;case 41:de+G+te===0&&ee--;break;case 40:if(de+G+te===0){if(ye===0)switch(2*De+3*He){case 533:break;default:ye=1}ee++}break;case 64:G+ee+de+te+Me+Ee===0&&(Ee=1);break;case 42:case 47:if(!(0<de+te+ee))switch(G){case 0:switch(2*oe+3*L.charCodeAt(ve+1)){case 235:G=47;break;case 220:qe=ve,G=42}break;case 42:oe===47&&De===42&&qe+2!==ve&&(L.charCodeAt(qe+2)===33&&(Ge+=L.substring(qe,ve+1)),et="",G=0)}}G===0&&(pe+=et)}He=De,De=oe,ve++}if(qe=Ge.length,0<qe){if(Le=F,0<U&&(X=a(2,Ge,Le,P,A,k,qe,j,M,j),X!==void 0&&(Ge=X).length===0))return Y+Ge+K;if(Ge=Le.join(",")+"{"+Ge+"}",B*N!==0){switch(B!==2||s(Ge,2)||(N=0),N){case 111:Ge=Ge.replace(S,":-moz-$1")+Ge;break;case 112:Ge=Ge.replace(_,"::-webkit-input-$1")+Ge.replace(_,"::-moz-$1")+Ge.replace(_,":-ms-input-$1")+Ge}N=0}}return Y+Ge+K}function n(P,F,L){var j=F.trim().split(w);F=j;var M=j.length,te=P.length;switch(te){case 0:case 1:var G=0;for(P=te===0?"":P[0]+" ";G<M;++G)F[G]=r(P,F[G],L).trim();break;default:var ee=G=0;for(F=[];G<M;++G)for(var de=0;de<te;++de)F[ee++]=r(P[de]+" ",j[G],L).trim()}return F}function r(P,F,L){var j=F.charCodeAt(0);switch(33>j&&(j=(F=F.trim()).charCodeAt(0)),j){case 38:return F.replace(m,"$1"+P.trim());case 58:return P.trim()+F.replace(m,"$1"+P.trim());default:if(0<1*L&&0<F.indexOf("\f"))return F.replace(m,(P.charCodeAt(0)===58?"":"$1")+P.trim())}return P+F}function i(P,F,L,j){var M=P+";",te=2*F+3*L+4*j;if(te===944){P=M.indexOf(":",9)+1;var G=M.substring(P,M.length-1).trim();return G=M.substring(0,P).trim()+G+";",B===1||B===2&&s(G,1)?"-webkit-"+G+G:G}if(B===0||B===2&&!s(M,1))return M;switch(te){case 1015:return M.charCodeAt(10)===97?"-webkit-"+M+M:M;case 951:return M.charCodeAt(3)===116?"-webkit-"+M+M:M;case 963:return M.charCodeAt(5)===110?"-webkit-"+M+M:M;case 1009:if(M.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+M+M;case 978:return"-webkit-"+M+"-moz-"+M+M;case 1019:case 983:return"-webkit-"+M+"-moz-"+M+"-ms-"+M+M;case 883:if(M.charCodeAt(8)===45)return"-webkit-"+M+M;if(0<M.indexOf("image-set(",11))return M.replace(C,"$1-webkit-$2")+M;break;case 932:if(M.charCodeAt(4)===45)switch(M.charCodeAt(5)){case 103:return"-webkit-box-"+M.replace("-grow","")+"-webkit-"+M+"-ms-"+M.replace("grow","positive")+M;case 115:return"-webkit-"+M+"-ms-"+M.replace("shrink","negative")+M;case 98:return"-webkit-"+M+"-ms-"+M.replace("basis","preferred-size")+M}return"-webkit-"+M+"-ms-"+M+M;case 964:return"-webkit-"+M+"-ms-flex-"+M+M;case 1023:if(M.charCodeAt(8)!==99)break;return G=M.substring(M.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+G+"-webkit-"+M+"-ms-flex-pack"+G+M;case 1005:return p.test(M)?M.replace(f,":-webkit-")+M.replace(f,":-moz-")+M:M;case 1e3:switch(G=M.substring(13).trim(),F=G.indexOf("-")+1,G.charCodeAt(0)+G.charCodeAt(F)){case 226:G=M.replace(I,"tb");break;case 232:G=M.replace(I,"tb-rl");break;case 220:G=M.replace(I,"lr");break;default:return M}return"-webkit-"+M+"-ms-"+G+M;case 1017:if(M.indexOf("sticky",9)===-1)break;case 975:switch(F=(M=P).length-10,G=(M.charCodeAt(F)===33?M.substring(0,F):M).substring(P.indexOf(":",7)+1).trim(),te=G.charCodeAt(0)+(G.charCodeAt(7)|0)){case 203:if(111>G.charCodeAt(8))break;case 115:M=M.replace(G,"-webkit-"+G)+";"+M;break;case 207:case 102:M=M.replace(G,"-webkit-"+(102<te?"inline-":"")+"box")+";"+M.replace(G,"-webkit-"+G)+";"+M.replace(G,"-ms-"+G+"box")+";"+M}return M+";";case 938:if(M.charCodeAt(5)===45)switch(M.charCodeAt(6)){case 105:return G=M.replace("-items",""),"-webkit-"+M+"-webkit-box-"+G+"-ms-flex-"+G+M;case 115:return"-webkit-"+M+"-ms-flex-item-"+M.replace(b,"")+M;default:return"-webkit-"+M+"-ms-flex-line-pack"+M.replace("align-content","").replace(b,"")+M}break;case 973:case 989:if(M.charCodeAt(3)!==45||M.charCodeAt(4)===122)break;case 931:case 953:if(O.test(P)===!0)return(G=P.substring(P.indexOf(":")+1)).charCodeAt(0)===115?i(P.replace("stretch","fill-available"),F,L,j).replace(":fill-available",":stretch"):M.replace(G,"-webkit-"+G)+M.replace(G,"-moz-"+G.replace("fill-",""))+M;break;case 962:if(M="-webkit-"+M+(M.charCodeAt(5)===102?"-ms-"+M:"")+M,L+j===211&&M.charCodeAt(13)===105&&0<M.indexOf("transform",10))return M.substring(0,M.indexOf(";",27)+1).replace(y,"$1-webkit-$2")+M}return M}function s(P,F){var L=P.indexOf(F===1?":":"{"),j=P.substring(0,F!==3?L:10);return L=P.substring(L+1,P.length-1),$(F!==2?j:j.replace(x,"$1"),L,F)}function o(P,F){var L=i(F,F.charCodeAt(0),F.charCodeAt(1),F.charCodeAt(2));return L!==F+";"?L.replace(D," or ($1)").substring(4):"("+F+")"}function a(P,F,L,j,M,te,G,ee,de,ye){for(var oe=0,De=F,He;oe<U;++oe)switch(He=T[oe].call(u,P,De,L,j,M,te,G,ee,de,ye)){case void 0:case!1:case!0:case null:break;default:De=He}if(De!==F)return De}function l(P){switch(P){case void 0:case null:U=T.length=0;break;default:if(typeof P=="function")T[U++]=P;else if(typeof P=="object")for(var F=0,L=P.length;F<L;++F)l(P[F]);else z=!!P|0}return l}function c(P){return P=P.prefix,P!==void 0&&($=null,P?typeof P!="function"?B=1:(B=2,$=P):B=0),c}function u(P,F){var L=P;if(33>L.charCodeAt(0)&&(L=L.trim()),J=L,L=[J],0<U){var j=a(-1,F,L,L,A,k,0,0,0,0);j!==void 0&&typeof j=="string"&&(F=j)}var M=e(R,L,F,0,0);return 0<U&&(j=a(-2,M,L,L,A,k,M.length,0,0,0),j!==void 0&&(M=j)),J="",N=0,k=A=1,M}var d=/^\0+/g,h=/[\0\r\f]/g,f=/: */g,p=/zoo|gra/,y=/([,: ])(transform)/g,w=/,\r+?/g,m=/([\t\r\n ])*\f?&/g,g=/@(k\w+)\s*(\S*)\s*/,_=/::(place)/g,S=/:(read-only)/g,I=/[svh]\w+-[tblr]{2}/,E=/\(\s*(.*)\s*\)/g,D=/([\s\S]*?);/g,b=/-self|flex-/g,x=/[^]*?(:[rp][el]a[\w-]+)[^]*/,O=/stretch|:\s*\w+\-(?:conte|avail)/,C=/([^-])(image-set\()/,k=1,A=1,N=0,B=1,R=[],T=[],U=0,$=null,z=0,J="";return u.use=l,u.set=c,t!==void 0&&c(t),u}var mJ={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function gJ(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var yJ=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,SA=gJ(function(t){return yJ.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),bx=Bh,vJ={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},_J={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},wJ={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},F$={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Sx={};Sx[bx.ForwardRef]=wJ;Sx[bx.Memo]=F$;function EA(t){return bx.isMemo(t)?F$:Sx[t.$$typeof]||vJ}var bJ=Object.defineProperty,SJ=Object.getOwnPropertyNames,xA=Object.getOwnPropertySymbols,EJ=Object.getOwnPropertyDescriptor,xJ=Object.getPrototypeOf,TA=Object.prototype;function U$(t,e,n){if(typeof e!="string"){if(TA){var r=xJ(e);r&&r!==TA&&U$(t,r,n)}var i=SJ(e);xA&&(i=i.concat(xA(e)));for(var s=EA(t),o=EA(e),a=0;a<i.length;++a){var l=i[a];if(!_J[l]&&!(n&&n[l])&&!(o&&o[l])&&!(s&&s[l])){var c=EJ(e,l);try{bJ(t,l,c)}catch{}}}}return t}var j$=U$;function Nr(){return(Nr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var IA=function(t,e){for(var n=[t[0]],r=0,i=e.length;r<i;r+=1)n.push(e[r],t[r+1]);return n},V1=function(t){return t!==null&&typeof t=="object"&&(t.toString?t.toString():Object.prototype.toString.call(t))==="[object Object]"&&!Bh.typeOf(t)},kg=Object.freeze([]),yo=Object.freeze({});function Jc(t){return typeof t=="function"}function B1(t){return t.displayName||t.name||"Component"}function $v(t){return t&&typeof t.styledComponentId=="string"}var Oo=typeof process<"u"&&process.env!==void 0&&({}.REACT_APP_SC_ATTR||{}.SC_ATTR)||"data-styled",TJ="5.3.9",Ex=typeof window<"u"&&"HTMLElement"in window,IJ=Boolean(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&process.env!==void 0&&({}.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==""?{}.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&{}.REACT_APP_SC_DISABLE_SPEEDY:{}.SC_DISABLE_SPEEDY!==void 0&&{}.SC_DISABLE_SPEEDY!==""?{}.SC_DISABLE_SPEEDY!=="false"&&{}.SC_DISABLE_SPEEDY:!1)),CJ={};function fi(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+t+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var kJ=function(){function t(n){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=n}var e=t.prototype;return e.indexOfGroup=function(n){for(var r=0,i=0;i<n;i++)r+=this.groupSizes[i];return r},e.insertRules=function(n,r){if(n>=this.groupSizes.length){for(var i=this.groupSizes,s=i.length,o=s;n>=o;)(o<<=1)<0&&fi(16,""+n);this.groupSizes=new Uint32Array(o),this.groupSizes.set(i),this.length=o;for(var a=s;a<o;a++)this.groupSizes[a]=0}for(var l=this.indexOfGroup(n+1),c=0,u=r.length;c<u;c++)this.tag.insertRule(l,r[c])&&(this.groupSizes[n]++,l++)},e.clearGroup=function(n){if(n<this.length){var r=this.groupSizes[n],i=this.indexOfGroup(n),s=i+r;this.groupSizes[n]=0;for(var o=i;o<s;o++)this.tag.deleteRule(i)}},e.getGroup=function(n){var r="";if(n>=this.length||this.groupSizes[n]===0)return r;for(var i=this.groupSizes[n],s=this.indexOfGroup(n),o=s+i,a=s;a<o;a++)r+=this.tag.getRule(a)+`/*!sc*/
`;return r},t}(),ym=new Map,Ag=new Map,qd=1,Bp=function(t){if(ym.has(t))return ym.get(t);for(;Ag.has(qd);)qd++;var e=qd++;return ym.set(t,e),Ag.set(e,t),e},AJ=function(t){return Ag.get(t)},RJ=function(t,e){e>=qd&&(qd=e+1),ym.set(t,e),Ag.set(e,t)},NJ="style["+Oo+'][data-styled-version="5.3.9"]',PJ=new RegExp("^"+Oo+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),DJ=function(t,e,n){for(var r,i=n.split(","),s=0,o=i.length;s<o;s++)(r=i[s])&&t.registerName(e,r)},OJ=function(t,e){for(var n=(e.textContent||"").split(`/*!sc*/
`),r=[],i=0,s=n.length;i<s;i++){var o=n[i].trim();if(o){var a=o.match(PJ);if(a){var l=0|parseInt(a[1],10),c=a[2];l!==0&&(RJ(c,l),DJ(t,c,a[3]),t.getTag().insertRules(l,r)),r.length=0}else r.push(o)}}},z1=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null},V$=function(t){var e=document.head,n=t||e,r=document.createElement("style"),i=function(a){for(var l=a.childNodes,c=l.length;c>=0;c--){var u=l[c];if(u&&u.nodeType===1&&u.hasAttribute(Oo))return u}}(n),s=i!==void 0?i.nextSibling:null;r.setAttribute(Oo,"active"),r.setAttribute("data-styled-version","5.3.9");var o=z1();return o&&r.setAttribute("nonce",o),n.insertBefore(r,s),r},LJ=function(){function t(n){var r=this.element=V$(n);r.appendChild(document.createTextNode("")),this.sheet=function(i){if(i.sheet)return i.sheet;for(var s=document.styleSheets,o=0,a=s.length;o<a;o++){var l=s[o];if(l.ownerNode===i)return l}fi(17)}(r),this.length=0}var e=t.prototype;return e.insertRule=function(n,r){try{return this.sheet.insertRule(r,n),this.length++,!0}catch{return!1}},e.deleteRule=function(n){this.sheet.deleteRule(n),this.length--},e.getRule=function(n){var r=this.sheet.cssRules[n];return r!==void 0&&typeof r.cssText=="string"?r.cssText:""},t}(),MJ=function(){function t(n){var r=this.element=V$(n);this.nodes=r.childNodes,this.length=0}var e=t.prototype;return e.insertRule=function(n,r){if(n<=this.length&&n>=0){var i=document.createTextNode(r),s=this.nodes[n];return this.element.insertBefore(i,s||null),this.length++,!0}return!1},e.deleteRule=function(n){this.element.removeChild(this.nodes[n]),this.length--},e.getRule=function(n){return n<this.length?this.nodes[n].textContent:""},t}(),$J=function(){function t(n){this.rules=[],this.length=0}var e=t.prototype;return e.insertRule=function(n,r){return n<=this.length&&(this.rules.splice(n,0,r),this.length++,!0)},e.deleteRule=function(n){this.rules.splice(n,1),this.length--},e.getRule=function(n){return n<this.length?this.rules[n]:""},t}(),CA=Ex,FJ={isServer:!Ex,useCSSOMInjection:!IJ},Zc=function(){function t(n,r,i){n===void 0&&(n=yo),r===void 0&&(r={}),this.options=Nr({},FJ,{},n),this.gs=r,this.names=new Map(i),this.server=!!n.isServer,!this.server&&Ex&&CA&&(CA=!1,function(s){for(var o=document.querySelectorAll(NJ),a=0,l=o.length;a<l;a++){var c=o[a];c&&c.getAttribute(Oo)!=="active"&&(OJ(s,c),c.parentNode&&c.parentNode.removeChild(c))}}(this))}t.registerId=function(n){return Bp(n)};var e=t.prototype;return e.reconstructWithOptions=function(n,r){return r===void 0&&(r=!0),new t(Nr({},this.options,{},n),this.gs,r&&this.names||void 0)},e.allocateGSInstance=function(n){return this.gs[n]=(this.gs[n]||0)+1},e.getTag=function(){return this.tag||(this.tag=(i=(r=this.options).isServer,s=r.useCSSOMInjection,o=r.target,n=i?new $J(o):s?new LJ(o):new MJ(o),new kJ(n)));var n,r,i,s,o},e.hasNameForId=function(n,r){return this.names.has(n)&&this.names.get(n).has(r)},e.registerName=function(n,r){if(Bp(n),this.names.has(n))this.names.get(n).add(r);else{var i=new Set;i.add(r),this.names.set(n,i)}},e.insertRules=function(n,r,i){this.registerName(n,r),this.getTag().insertRules(Bp(n),i)},e.clearNames=function(n){this.names.has(n)&&this.names.get(n).clear()},e.clearRules=function(n){this.getTag().clearGroup(Bp(n)),this.clearNames(n)},e.clearTag=function(){this.tag=void 0},e.toString=function(){return function(n){for(var r=n.getTag(),i=r.length,s="",o=0;o<i;o++){var a=AJ(o);if(a!==void 0){var l=n.names.get(a),c=r.getGroup(o);if(l&&c&&l.size){var u=Oo+".g"+o+'[id="'+a+'"]',d="";l!==void 0&&l.forEach(function(h){h.length>0&&(d+=h+",")}),s+=""+c+u+'{content:"'+d+`"}/*!sc*/
`}}}return s}(this)},t}(),UJ=/(a)(d)/gi,kA=function(t){return String.fromCharCode(t+(t>25?39:97))};function W1(t){var e,n="";for(e=Math.abs(t);e>52;e=e/52|0)n=kA(e%52)+n;return(kA(e%52)+n).replace(UJ,"$1-$2")}var ac=function(t,e){for(var n=e.length;n;)t=33*t^e.charCodeAt(--n);return t},B$=function(t){return ac(5381,t)};function z$(t){for(var e=0;e<t.length;e+=1){var n=t[e];if(Jc(n)&&!$v(n))return!1}return!0}var jJ=B$("5.3.9"),VJ=function(){function t(e,n,r){this.rules=e,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&z$(e),this.componentId=n,this.baseHash=ac(jJ,n),this.baseStyle=r,Zc.registerId(n)}return t.prototype.generateAndInjectStyles=function(e,n,r){var i=this.componentId,s=[];if(this.baseStyle&&s.push(this.baseStyle.generateAndInjectStyles(e,n,r)),this.isStatic&&!r.hash)if(this.staticRulesId&&n.hasNameForId(i,this.staticRulesId))s.push(this.staticRulesId);else{var o=il(this.rules,e,n,r).join(""),a=W1(ac(this.baseHash,o)>>>0);if(!n.hasNameForId(i,a)){var l=r(o,"."+a,void 0,i);n.insertRules(i,a,l)}s.push(a),this.staticRulesId=a}else{for(var c=this.rules.length,u=ac(this.baseHash,r.hash),d="",h=0;h<c;h++){var f=this.rules[h];if(typeof f=="string")d+=f;else if(f){var p=il(f,e,n,r),y=Array.isArray(p)?p.join(""):p;u=ac(u,y+h),d+=y}}if(d){var w=W1(u>>>0);if(!n.hasNameForId(i,w)){var m=r(d,"."+w,void 0,i);n.insertRules(i,w,m)}s.push(w)}}return s.join(" ")},t}(),BJ=/^\s*\/\/.*$/gm,zJ=[":","[",".","#"];function W$(t){var e,n,r,i,s=t===void 0?yo:t,o=s.options,a=o===void 0?yo:o,l=s.plugins,c=l===void 0?kg:l,u=new pJ(a),d=[],h=function(y){function w(m){if(m)try{y(m+"}")}catch{}}return function(m,g,_,S,I,E,D,b,x,O){switch(m){case 1:if(x===0&&g.charCodeAt(0)===64)return y(g+";"),"";break;case 2:if(b===0)return g+"/*|*/";break;case 3:switch(b){case 102:case 112:return y(_[0]+g),"";default:return g+(O===0?"/*|*/":"")}case-2:g.split("/*|*/}").forEach(w)}}}(function(y){d.push(y)}),f=function(y,w,m){return w===0&&zJ.indexOf(m[n.length])!==-1||m.match(i)?y:"."+e};function p(y,w,m,g){g===void 0&&(g="&");var _=y.replace(BJ,""),S=w&&m?m+" "+w+" { "+_+" }":_;return e=g,n=w,r=new RegExp("\\"+n+"\\b","g"),i=new RegExp("(\\"+n+"\\b){2,}"),u(m||!w?"":w,S)}return u.use([].concat(c,[function(y,w,m){y===2&&m.length&&m[0].lastIndexOf(n)>0&&(m[0]=m[0].replace(r,f))},h,function(y){if(y===-2){var w=d;return d=[],w}}])),p.hash=c.length?c.reduce(function(y,w){return w.name||fi(15),ac(y,w.name)},5381).toString():"",p}var Fv=Pe.createContext(),WJ=Fv.Consumer,xx=Pe.createContext(),H$=(xx.Consumer,new Zc),H1=W$();function Tx(){return H.useContext(Fv)||H$}function G$(){return H.useContext(xx)||H1}function q$(t){var e=H.useState(t.stylisPlugins),n=e[0],r=e[1],i=Tx(),s=H.useMemo(function(){var a=i;return t.sheet?a=t.sheet:t.target&&(a=a.reconstructWithOptions({target:t.target},!1)),t.disableCSSOMInjection&&(a=a.reconstructWithOptions({useCSSOMInjection:!1})),a},[t.disableCSSOMInjection,t.sheet,t.target]),o=H.useMemo(function(){return W$({options:{prefix:!t.disableVendorPrefixes},plugins:n})},[t.disableVendorPrefixes,n]);return H.useEffect(function(){fJ(n,t.stylisPlugins)||r(t.stylisPlugins)},[t.stylisPlugins]),Pe.createElement(Fv.Provider,{value:s},Pe.createElement(xx.Provider,{value:o},t.children))}var K$=function(){function t(e,n){var r=this;this.inject=function(i,s){s===void 0&&(s=H1);var o=r.name+s.hash;i.hasNameForId(r.id,o)||i.insertRules(r.id,o,s(r.rules,o,"@keyframes"))},this.toString=function(){return fi(12,String(r.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=n}return t.prototype.getName=function(e){return e===void 0&&(e=H1),this.name+e.hash},t}(),HJ=/([A-Z])/,GJ=/([A-Z])/g,qJ=/^ms-/,KJ=function(t){return"-"+t.toLowerCase()};function AA(t){return HJ.test(t)?t.replace(GJ,KJ).replace(qJ,"-ms-"):t}var RA=function(t){return t==null||t===!1||t===""};function il(t,e,n,r){if(Array.isArray(t)){for(var i,s=[],o=0,a=t.length;o<a;o+=1)(i=il(t[o],e,n,r))!==""&&(Array.isArray(i)?s.push.apply(s,i):s.push(i));return s}if(RA(t))return"";if($v(t))return"."+t.styledComponentId;if(Jc(t)){if(typeof(c=t)!="function"||c.prototype&&c.prototype.isReactComponent||!e)return t;var l=t(e);return il(l,e,n,r)}var c;return t instanceof K$?n?(t.inject(n,r),t.getName(r)):t:V1(t)?function u(d,h){var f,p,y=[];for(var w in d)d.hasOwnProperty(w)&&!RA(d[w])&&(Array.isArray(d[w])&&d[w].isCss||Jc(d[w])?y.push(AA(w)+":",d[w],";"):V1(d[w])?y.push.apply(y,u(d[w],w)):y.push(AA(w)+": "+(f=w,(p=d[w])==null||typeof p=="boolean"||p===""?"":typeof p!="number"||p===0||f in mJ?String(p).trim():p+"px")+";"));return h?[h+" {"].concat(y,["}"]):y}(t):t.toString()}var NA=function(t){return Array.isArray(t)&&(t.isCss=!0),t};function Lo(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Jc(t)||V1(t)?NA(il(IA(kg,[t].concat(n)))):n.length===0&&t.length===1&&typeof t[0]=="string"?t:NA(il(IA(t,n)))}var Ix=function(t,e,n){return n===void 0&&(n=yo),t.theme!==n.theme&&t.theme||e||n.theme},QJ=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,YJ=/(^-|-$)/g;function C0(t){return t.replace(QJ,"-").replace(YJ,"")}var Cx=function(t){return W1(B$(t)>>>0)};function zp(t){return typeof t=="string"&&!0}var G1=function(t){return typeof t=="function"||typeof t=="object"&&t!==null&&!Array.isArray(t)},XJ=function(t){return t!=="__proto__"&&t!=="constructor"&&t!=="prototype"};function JJ(t,e,n){var r=t[n];G1(e)&&G1(r)?Q$(r,e):t[n]=e}function Q$(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0,s=n;i<s.length;i++){var o=s[i];if(G1(o))for(var a in o)XJ(a)&&JJ(t,o[a],a)}return t}var Mo=Pe.createContext(),ZJ=Mo.Consumer;function eZ(t){var e=H.useContext(Mo),n=H.useMemo(function(){return function(r,i){if(!r)return fi(14);if(Jc(r)){var s=r(i);return s}return Array.isArray(r)||typeof r!="object"?fi(8):i?Nr({},i,{},r):r}(t.theme,e)},[t.theme,e]);return t.children?Pe.createElement(Mo.Provider,{value:n},t.children):null}var k0={};function Y$(t,e,n){var r=$v(t),i=!zp(t),s=e.attrs,o=s===void 0?kg:s,a=e.componentId,l=a===void 0?function(g,_){var S=typeof g!="string"?"sc":C0(g);k0[S]=(k0[S]||0)+1;var I=S+"-"+Cx("5.3.9"+S+k0[S]);return _?_+"-"+I:I}(e.displayName,e.parentComponentId):a,c=e.displayName,u=c===void 0?function(g){return zp(g)?"styled."+g:"Styled("+B1(g)+")"}(t):c,d=e.displayName&&e.componentId?C0(e.displayName)+"-"+e.componentId:e.componentId||l,h=r&&t.attrs?Array.prototype.concat(t.attrs,o).filter(Boolean):o,f=e.shouldForwardProp;r&&t.shouldForwardProp&&(f=e.shouldForwardProp?function(g,_,S){return t.shouldForwardProp(g,_,S)&&e.shouldForwardProp(g,_,S)}:t.shouldForwardProp);var p,y=new VJ(n,d,r?t.componentStyle:void 0),w=y.isStatic&&o.length===0,m=function(g,_){return function(S,I,E,D){var b=S.attrs,x=S.componentStyle,O=S.defaultProps,C=S.foldedComponentIds,k=S.shouldForwardProp,A=S.styledComponentId,N=S.target,B=function(j,M,te){j===void 0&&(j=yo);var G=Nr({},M,{theme:j}),ee={};return te.forEach(function(de){var ye,oe,De,He=de;for(ye in Jc(He)&&(He=He(G)),He)G[ye]=ee[ye]=ye==="className"?(oe=ee[ye],De=He[ye],oe&&De?oe+" "+De:oe||De):He[ye]}),[G,ee]}(Ix(I,H.useContext(Mo),O)||yo,I,b),R=B[0],T=B[1],U=function(j,M,te,G){var ee=Tx(),de=G$(),ye=M?j.generateAndInjectStyles(yo,ee,de):j.generateAndInjectStyles(te,ee,de);return ye}(x,D,R),$=E,z=T.$as||I.$as||T.as||I.as||N,J=zp(z),P=T!==I?Nr({},I,{},T):I,F={};for(var L in P)L[0]!=="$"&&L!=="as"&&(L==="forwardedAs"?F.as=P[L]:(k?k(L,SA,z):!J||SA(L))&&(F[L]=P[L]));return I.style&&T.style!==I.style&&(F.style=Nr({},I.style,{},T.style)),F.className=Array.prototype.concat(C,A,U!==A?U:null,I.className,T.className).filter(Boolean).join(" "),F.ref=$,H.createElement(z,F)}(p,g,_,w)};return m.displayName=u,(p=Pe.forwardRef(m)).attrs=h,p.componentStyle=y,p.displayName=u,p.shouldForwardProp=f,p.foldedComponentIds=r?Array.prototype.concat(t.foldedComponentIds,t.styledComponentId):kg,p.styledComponentId=d,p.target=r?t.target:t,p.withComponent=function(g){var _=e.componentId,S=function(E,D){if(E==null)return{};var b,x,O={},C=Object.keys(E);for(x=0;x<C.length;x++)b=C[x],D.indexOf(b)>=0||(O[b]=E[b]);return O}(e,["componentId"]),I=_&&_+"-"+(zp(g)?g:C0(B1(g)));return Y$(g,Nr({},S,{attrs:h,componentId:I}),n)},Object.defineProperty(p,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(g){this._foldedDefaultProps=r?Q$({},t.defaultProps,g):g}}),Object.defineProperty(p,"toString",{value:function(){return"."+p.styledComponentId}}),i&&j$(p,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),p}var q1=function(t){return function e(n,r,i){if(i===void 0&&(i=yo),!Bh.isValidElementType(r))return fi(1,String(r));var s=function(){return n(r,i,Lo.apply(void 0,arguments))};return s.withConfig=function(o){return e(n,r,Nr({},i,{},o))},s.attrs=function(o){return e(n,r,Nr({},i,{attrs:Array.prototype.concat(i.attrs,o).filter(Boolean)}))},s}(Y$,t)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(t){q1[t]=q1(t)});var tZ=function(){function t(n,r){this.rules=n,this.componentId=r,this.isStatic=z$(n),Zc.registerId(this.componentId+1)}var e=t.prototype;return e.createStyles=function(n,r,i,s){var o=s(il(this.rules,r,i,s).join(""),""),a=this.componentId+n;i.insertRules(a,a,o)},e.removeStyles=function(n,r){r.clearRules(this.componentId+n)},e.renderStyles=function(n,r,i,s){n>2&&Zc.registerId(this.componentId+n),this.removeStyles(n,i),this.createStyles(n,r,i,s)},t}();function Cu(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=Lo.apply(void 0,[t].concat(n)),s="sc-global-"+Cx(JSON.stringify(i)),o=new tZ(i,s);function a(c){var u=Tx(),d=G$(),h=H.useContext(Mo),f=H.useRef(u.allocateGSInstance(s)).current;return u.server&&l(f,c,u,h,d),H.useLayoutEffect(function(){if(!u.server)return l(f,c,u,h,d),function(){return o.removeStyles(f,u)}},[f,c,u,h,d]),null}function l(c,u,d,h,f){if(o.isStatic)o.renderStyles(c,CJ,d,f);else{var p=Nr({},u,{theme:Ix(u,h,a.defaultProps)});o.renderStyles(c,p,d,f)}}return Pe.memo(a)}function nZ(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=Lo.apply(void 0,[t].concat(n)).join(""),s=Cx(i);return new K$(s,i)}var rZ=function(){function t(){var n=this;this._emitSheetCSS=function(){var r=n.instance.toString();if(!r)return"";var i=z1();return"<style "+[i&&'nonce="'+i+'"',Oo+'="true"','data-styled-version="5.3.9"'].filter(Boolean).join(" ")+">"+r+"</style>"},this.getStyleTags=function(){return n.sealed?fi(2):n._emitSheetCSS()},this.getStyleElement=function(){var r;if(n.sealed)return fi(2);var i=((r={})[Oo]="",r["data-styled-version"]="5.3.9",r.dangerouslySetInnerHTML={__html:n.instance.toString()},r),s=z1();return s&&(i.nonce=s),[Pe.createElement("style",Nr({},i,{key:"sc-0-0"}))]},this.seal=function(){n.sealed=!0},this.instance=new Zc({isServer:!0}),this.sealed=!1}var e=t.prototype;return e.collectStyles=function(n){return this.sealed?fi(2):Pe.createElement(q$,{sheet:this.instance},n)},e.interleaveWithNodeStream=function(n){return fi(3)},t}(),iZ=function(t){var e=Pe.forwardRef(function(n,r){var i=H.useContext(Mo),s=t.defaultProps,o=Ix(n,i,s);return Pe.createElement(t,Nr({},n,{theme:o,ref:r}))});return j$(e,t),e.displayName="WithTheme("+B1(t)+")",e},sZ=function(){return H.useContext(Mo)},oZ={StyleSheet:Zc,masterSheet:H$};const ne=q1,aZ=Object.freeze(Object.defineProperty({__proto__:null,ServerStyleSheet:rZ,StyleSheetConsumer:WJ,StyleSheetContext:Fv,StyleSheetManager:q$,ThemeConsumer:ZJ,ThemeContext:Mo,ThemeProvider:eZ,__PRIVATE__:oZ,createGlobalStyle:Cu,css:Lo,default:ne,isStyledComponent:$v,keyframes:nZ,useTheme:sZ,version:TJ,withTheme:iZ},Symbol.toStringTag,{value:"Module"})),kx=Tf({key:"chatClick",default:!1}),lZ="/assets/chat-bg-f9f7e2e8.svg",cZ="/assets/chat-close-button-c0fb89b0.svg",uZ="/assets/chat-send-e70e75a8.svg",dZ="/assets/chat_reset-fdfcdda8.svg";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hZ{constructor(e,n){this._delegate=e,this.firebase=n,ag(e,new sr("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),yL(this._delegate)))}_getService(e,n=Eo){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=Eo){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){ag(this._delegate,e)}_addOrOverwriteComponent(e){mL(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fZ={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance."},PA=new vl("app-compat","Firebase",fZ);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pZ(t){const e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:Er,setLogLevel:_L,onLog:vL,apps:null,SDK_VERSION:Ps,INTERNAL:{registerComponent:a,removeApp:r,useAsService:l,modularAPIs:u9}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(c){delete e[c]}function i(c){if(c=c||Eo,!Lr(e,c))throw PA.create("no-app",{appName:c});return e[c]}i.App=t;function s(c,u={}){const d=eE(c,u);if(Lr(e,d.name))return e[d.name];const h=new t(d,n);return e[d.name]=h,h}function o(){return Object.keys(e).map(c=>e[c])}function a(c){const u=c.name,d=u.replace("-compat","");if(Wi(c)&&c.type==="PUBLIC"){const h=(f=i())=>{if(typeof f[d]!="function")throw PA.create("invalid-app-argument",{appName:u});return f[d]()};c.serviceProps!==void 0&&Sh(h,c.serviceProps),n[d]=h,t.prototype[d]=function(...f){return this._getService.bind(this,u).apply(this,c.multipleInstances?f:[])}}return c.type==="PUBLIC"?n[d]:null}function l(c,u){return u==="serverAuth"?null:u}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X$(){const t=pZ(hZ);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:X$,extendNamespace:e,createSubscribe:cL,ErrorFactory:vl,deepExtend:Sh});function e(n){Sh(t,n)}return t}const mZ=X$();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA=new gu("@firebase/app-compat"),gZ="@firebase/app-compat",yZ="0.2.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vZ(t){Er(gZ,yZ,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(Gq()&&self.firebase!==void 0){DA.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&DA.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const $n=mZ;vZ();var _Z="firebase",wZ="9.17.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$n.registerVersion(_Z,wZ,"app-compat");function Ax(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}const sd={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Fl={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bZ(){return{["admin-restricted-operation"]:"This operation is restricted to administrators only.",["argument-error"]:"",["app-not-authorized"]:"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.",["app-not-installed"]:"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.",["captcha-check-failed"]:"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.",["code-expired"]:"The SMS code has expired. Please re-send the verification code to try again.",["cordova-not-ready"]:"Cordova framework is not ready.",["cors-unsupported"]:"This browser is not supported.",["credential-already-in-use"]:"This credential is already associated with a different user account.",["custom-token-mismatch"]:"The custom token corresponds to a different audience.",["requires-recent-login"]:"This operation is sensitive and requires recent authentication. Log in again before retrying this request.",["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.",["dynamic-link-not-activated"]:"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.",["email-change-needs-verification"]:"Multi-factor users must always have a verified email.",["email-already-in-use"]:"The email address is already in use by another account.",["emulator-config-failed"]:'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',["expired-action-code"]:"The action code has expired.",["cancelled-popup-request"]:"This operation has been cancelled due to another conflicting popup being opened.",["internal-error"]:"An internal AuthError has occurred.",["invalid-app-credential"]:"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.",["invalid-app-id"]:"The mobile app identifier is not registed for the current project.",["invalid-user-token"]:"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.",["invalid-auth-event"]:"An internal AuthError has occurred.",["invalid-verification-code"]:"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.",["invalid-continue-uri"]:"The continue URL provided in the request is invalid.",["invalid-cordova-configuration"]:"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.",["invalid-custom-token"]:"The custom token format is incorrect. Please check the documentation.",["invalid-dynamic-link-domain"]:"The provided dynamic link domain is not configured or authorized for the current project.",["invalid-email"]:"The email address is badly formatted.",["invalid-emulator-scheme"]:"Emulator URL must start with a valid scheme (http:// or https://).",["invalid-api-key"]:"Your API key is invalid, please check you have copied it correctly.",["invalid-cert-hash"]:"The SHA-1 certificate hash provided is invalid.",["invalid-credential"]:"The supplied auth credential is malformed or has expired.",["invalid-message-payload"]:"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-multi-factor-session"]:"The request does not contain a valid proof of first factor successful sign-in.",["invalid-oauth-provider"]:"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.",["invalid-oauth-client-id"]:"The OAuth client ID provided is either invalid or does not match the specified API key.",["unauthorized-domain"]:"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.",["invalid-action-code"]:"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.",["wrong-password"]:"The password is invalid or the user does not have a password.",["invalid-persistence-type"]:"The specified persistence type is invalid. It can only be local, session or none.",["invalid-phone-number"]:"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].",["invalid-provider-id"]:"The specified provider ID is invalid.",["invalid-recipient-email"]:"The email corresponding to this action failed to send as the provided recipient email address is invalid.",["invalid-sender"]:"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-verification-id"]:"The verification ID used to create the phone auth credential is invalid.",["invalid-tenant-id"]:"The Auth instance's tenant ID is invalid.",["login-blocked"]:"Login blocked by user-provided method: {$originalMessage}",["missing-android-pkg-name"]:"An Android Package Name must be provided if the Android App is required to be installed.",["auth-domain-config-required"]:"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.",["missing-app-credential"]:"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.",["missing-verification-code"]:"The phone auth credential was created with an empty SMS verification code.",["missing-continue-uri"]:"A continue URL must be provided in the request.",["missing-iframe-start"]:"An internal AuthError has occurred.",["missing-ios-bundle-id"]:"An iOS Bundle ID must be provided if an App Store ID is provided.",["missing-or-invalid-nonce"]:"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.",["missing-multi-factor-info"]:"No second factor identifier is provided.",["missing-multi-factor-session"]:"The request is missing proof of first factor successful sign-in.",["missing-phone-number"]:"To send verification codes, provide a phone number for the recipient.",["missing-verification-id"]:"The phone auth credential was created with an empty verification ID.",["app-deleted"]:"This instance of FirebaseApp has been deleted.",["multi-factor-info-not-found"]:"The user does not have a second factor matching the identifier provided.",["multi-factor-auth-required"]:"Proof of ownership of a second factor is required to complete sign-in.",["account-exists-with-different-credential"]:"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.",["network-request-failed"]:"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.",["no-auth-event"]:"An internal AuthError has occurred.",["no-such-provider"]:"User was not linked to an account with the given provider.",["null-user"]:"A null user object was provided as the argument for an operation which requires a non-null user object.",["operation-not-allowed"]:"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.",["operation-not-supported-in-this-environment"]:'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',["popup-blocked"]:"Unable to establish a connection with the popup. It may have been blocked by the browser.",["popup-closed-by-user"]:"The popup has been closed by the user before finalizing the operation.",["provider-already-linked"]:"User can only be linked to one identity for the given provider.",["quota-exceeded"]:"The project's quota for this operation has been exceeded.",["redirect-cancelled-by-user"]:"The redirect operation has been cancelled by the user before finalizing.",["redirect-operation-pending"]:"A redirect sign-in operation is already pending.",["rejected-credential"]:"The request contains malformed or mismatching credentials.",["second-factor-already-in-use"]:"The second factor is already enrolled on this account.",["maximum-second-factor-count-exceeded"]:"The maximum allowed number of second factors on a user has been exceeded.",["tenant-id-mismatch"]:"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.",["user-token-expired"]:"The user's credential is no longer valid. The user must sign in again.",["too-many-requests"]:"We have blocked all requests from this device due to unusual activity. Try again later.",["unauthorized-continue-uri"]:"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.",["unsupported-first-factor"]:"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.",["unsupported-persistence-type"]:"The current environment does not support the specified persistence type.",["unsupported-tenant-operation"]:"This operation is not supported in a multi-tenant context.",["unverified-email"]:"The operation requires a verified email.",["user-cancelled"]:"The user did not grant your application the permissions it requested.",["user-not-found"]:"There is no user record corresponding to this identifier. The user may have been deleted.",["user-disabled"]:"The user account has been disabled by an administrator.",["user-mismatch"]:"The supplied credentials do not correspond to the previously signed in user.",["user-signed-out"]:"",["weak-password"]:"The password must be 6 characters long or more.",["web-storage-unsupported"]:"This browser is not supported or 3rd party cookies and data may be disabled.",["already-initialized"]:"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}}function J$(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const SZ=bZ,EZ=J$,Z$=new vl("auth","Firebase",J$());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA=new gu("@firebase/auth");function vm(t,...e){OA.logLevel<=st.ERROR&&OA.error(`Auth (${Ps}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(t,...e){throw Rx(t,...e)}function Dn(t,...e){return Rx(t,...e)}function eF(t,e,n){const r=Object.assign(Object.assign({},EZ()),{[e]:n});return new vl("auth","Firebase",r).create(e,{appName:t.name})}function ku(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Fn(t,"argument-error"),eF(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Rx(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Z$.create(t,...e)}function le(t,e,...n){if(!t)throw Rx(e,...n)}function Li(t){const e="INTERNAL ASSERTION FAILED: "+t;throw vm(e),new Error(e)}function _i(t,e){t||Li(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA=new Map;function Pr(t){_i(t instanceof Function,"Expected a class definition");let e=LA.get(t);return e?(_i(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,LA.set(t,e),e)}function xZ(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Pr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Nx(){return MA()==="http:"||MA()==="https:"}function MA(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TZ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Nx()||sL()||"connection"in navigator)?navigator.onLine:!0}function IZ(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,n){this.shortDelay=e,this.longDelay=n,_i(n>e,"Short delay should be less than long delay!"),this.isMobile=YS()||zy()}get(){return TZ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(t,e){_i(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tF{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Li("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Li("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Li("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CZ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kZ=new Kf(3e4,6e4);function cn(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Cn(t,e,n,r,i={}){return nF(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=_l(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),tF.fetch()(rF(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function nF(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},CZ),e);try{const i=new AZ(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Id(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Id(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Id(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Id(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw eF(t,u,c);Fn(t,u)}}catch(i){if(i instanceof Hn)throw i;Fn(t,"internal-error",{message:String(i)})}}async function Ms(t,e,n,r,i={}){const s=await Cn(t,e,n,r,i);return"mfaPendingCredential"in s&&Fn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function rF(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Px(t.config,i):`${t.config.apiScheme}://${i}`}class AZ{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Dn(this.auth,"network-request-failed")),kZ.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Id(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Dn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RZ(t,e){return Cn(t,"POST","/v1/accounts:delete",e)}async function NZ(t,e){return Cn(t,"POST","/v1/accounts:update",e)}async function PZ(t,e){return Cn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function DZ(t,e=!1){const n=me(t),r=await n.getIdToken(e),i=Uv(r);le(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Kd(A0(i.auth_time)),issuedAtTime:Kd(A0(i.iat)),expirationTime:Kd(A0(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function A0(t){return Number(t)*1e3}function Uv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return vm("JWT malformed, contained fewer than 3 sections"),null;try{const i=ig(n);return i?JSON.parse(i):(vm("Failed to decode base64 JWT payload"),null)}catch(i){return vm("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function OZ(t){const e=Uv(t);return le(e,"internal-error"),le(typeof e.exp<"u","internal-error"),le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Is(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Hn&&LZ(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function LZ({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MZ{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iF{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kd(this.lastLoginAt),this.creationTime=Kd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wh(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Is(t,PZ(n,{idToken:r}));le(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?UZ(s.providerUserInfo):[],a=FZ(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new iF(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function $Z(t){const e=me(t);await Wh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function FZ(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function UZ(t){return t.map(e=>{var{providerId:n}=e,r=Ax(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jZ(t,e){const n=await nF(t,{},async()=>{const r=_l({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=rF(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",tF.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){le(e.idToken,"internal-error"),le(typeof e.idToken<"u","internal-error"),le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):OZ(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return le(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await jZ(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Hh;return r&&(le(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(le(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(le(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Hh,this.toJSON())}_performRefresh(){return Li("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zs(t,e){le(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Da{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Ax(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new MZ(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new iF(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Is(this,this.stsTokenManager.getToken(this.auth,e));return le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return DZ(this,e)}reload(){return $Z(this)}_assign(e){this!==e&&(le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new Da(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Wh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Is(this,RZ(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,u;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,y=(a=n.tenantId)!==null&&a!==void 0?a:void 0,w=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,m=(c=n.createdAt)!==null&&c!==void 0?c:void 0,g=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:_,emailVerified:S,isAnonymous:I,providerData:E,stsTokenManager:D}=n;le(_&&D,e,"internal-error");const b=Hh.fromJSON(this.name,D);le(typeof _=="string",e,"internal-error"),zs(d,e.name),zs(h,e.name),le(typeof S=="boolean",e,"internal-error"),le(typeof I=="boolean",e,"internal-error"),zs(f,e.name),zs(p,e.name),zs(y,e.name),zs(w,e.name),zs(m,e.name),zs(g,e.name);const x=new Da({uid:_,auth:e,email:h,emailVerified:S,displayName:d,isAnonymous:I,photoURL:p,phoneNumber:f,tenantId:y,stsTokenManager:b,createdAt:m,lastLoginAt:g});return E&&Array.isArray(E)&&(x.providerData=E.map(O=>Object.assign({},O))),w&&(x._redirectEventId=w),x}static async _fromIdTokenResponse(e,n,r=!1){const i=new Hh;i.updateFromServerResponse(n);const s=new Da({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Wh(s),s}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sF{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}sF.type="NONE";const eu=sF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oa(t,e,n){return`firebase:${t}:${e}:${n}`}class _c{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Oa(this.userKey,i.apiKey,s),this.fullPersistenceKey=Oa("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Da._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new _c(Pr(eu),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Pr(eu);const o=Oa(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const d=Da._fromJSON(e,u);c!==s&&(a=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new _c(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new _c(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lF(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(oF(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(cF(e))return"Blackberry";if(uF(e))return"Webos";if(Dx(e))return"Safari";if((e.includes("chrome/")||aF(e))&&!e.includes("edge/"))return"Chrome";if(Qf(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function oF(t=zt()){return/firefox\//i.test(t)}function Dx(t=zt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function aF(t=zt()){return/crios\//i.test(t)}function lF(t=zt()){return/iemobile/i.test(t)}function Qf(t=zt()){return/android/i.test(t)}function cF(t=zt()){return/blackberry/i.test(t)}function uF(t=zt()){return/webos/i.test(t)}function Au(t=zt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function VZ(t=zt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function BZ(t=zt()){var e;return Au(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function zZ(){return oL()&&document.documentMode===10}function dF(t=zt()){return Au(t)||Qf(t)||uF(t)||cF(t)||/windows phone/i.test(t)||lF(t)}function WZ(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hF(t,e=[]){let n;switch(t){case"Browser":n=$A(zt());break;case"Worker":n=`${$A(zt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ps}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HZ{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GZ{constructor(e,n,r){this.app=e,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new FA(this),this.idTokenSubscription=new FA(this),this.beforeStateQueue=new HZ(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Z$,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Pr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await _c.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Wh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=IZ()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?me(e):null;return n&&le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Pr(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new vl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Pr(e)||this._popupRedirectResolver;le(n,this,"argument-error"),this.redirectPersistenceManager=await _c.create(this,[Pr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return le(o,this,"internal-error"),o.then(()=>s(this.currentUser)),typeof n=="function"?e.addObserver(n,r,i):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hF(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());return r&&(n["X-Firebase-Client"]=r),n}}function Sn(t){return me(t)}class FA{constructor(e){this.auth=e,this.observer=null,this.addObserver=cL(n=>this.observer=n)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function qZ(t,e,n){const r=Sn(t);le(r._canInitEmulator,r,"emulator-config-failed"),le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=fF(e),{host:o,port:a}=KZ(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||QZ()}function fF(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function KZ(t){const e=fF(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:UA(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:UA(o)}}}function UA(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function QZ(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Li("not implemented")}_getIdTokenResponse(e){return Li("not implemented")}_linkToIdToken(e,n){return Li("not implemented")}_getReauthenticationResolver(e){return Li("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pF(t,e){return Cn(t,"POST","/v1/accounts:resetPassword",cn(t,e))}async function mF(t,e){return Cn(t,"POST","/v1/accounts:update",e)}async function YZ(t,e){return Cn(t,"POST","/v1/accounts:update",cn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XZ(t,e){return Ms(t,"POST","/v1/accounts:signInWithPassword",cn(t,e))}async function jv(t,e){return Cn(t,"POST","/v1/accounts:sendOobCode",cn(t,e))}async function JZ(t,e){return jv(t,e)}async function ZZ(t,e){return jv(t,e)}async function eee(t,e){return jv(t,e)}async function tee(t,e){return jv(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nee(t,e){return Ms(t,"POST","/v1/accounts:signInWithEmailLink",cn(t,e))}async function ree(t,e){return Ms(t,"POST","/v1/accounts:signInWithEmailLink",cn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh extends Ru{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Gh(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Gh(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return XZ(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return nee(e,{email:this._email,oobCode:this._password});default:Fn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return mF(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return ree(e,{idToken:n,email:this._email,oobCode:this._password});default:Fn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gs(t,e){return Ms(t,"POST","/v1/accounts:signInWithIdp",cn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iee="http://localhost";class Ki extends Ru{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ki(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Fn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Ax(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Ki(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return gs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,gs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,gs(e,n)}buildRequest(){const e={requestUri:iee,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=_l(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function see(t,e){return Cn(t,"POST","/v1/accounts:sendVerificationCode",cn(t,e))}async function oee(t,e){return Ms(t,"POST","/v1/accounts:signInWithPhoneNumber",cn(t,e))}async function aee(t,e){const n=await Ms(t,"POST","/v1/accounts:signInWithPhoneNumber",cn(t,e));if(n.temporaryProof)throw Id(t,"account-exists-with-different-credential",n);return n}const lee={USER_NOT_FOUND:"user-not-found"};async function cee(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Ms(t,"POST","/v1/accounts:signInWithPhoneNumber",cn(t,n),lee)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La extends Ru{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new La({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new La({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return oee(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return aee(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return cee(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new La({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uee(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function dee(t){const e=sc(bd(t)).link,n=e?sc(bd(e)).deep_link_id:null,r=sc(bd(t)).deep_link_id;return(r?sc(bd(r)).link:null)||r||n||e||t}class Vv{constructor(e){var n,r,i,s,o,a;const l=sc(bd(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,d=uee((i=l.mode)!==null&&i!==void 0?i:null);le(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=dee(e);try{return new Vv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(){this.providerId=ea.PROVIDER_ID}static credential(e,n){return Gh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Vv.parseLink(n);return le(r,"argument-error"),Gh._fromEmailAndCode(e,r.code,r.tenantId)}}ea.PROVIDER_ID="password";ea.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ea.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu extends $s{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class wc extends Nu{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return le("providerId"in n&&"signInMethod"in n,"argument-error"),Ki._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return le(e.idToken||e.accessToken,"argument-error"),Ki._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return wc.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return wc.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!n&&!s||!a)return null;try{return new wc(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends Nu{constructor(){super("facebook.com")}static credential(e){return Ki._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ki.credential(e.oauthAccessToken)}catch{return null}}}ki.FACEBOOK_SIGN_IN_METHOD="facebook.com";ki.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends Nu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ki._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ai.credential(n,r)}catch{return null}}}Ai.GOOGLE_SIGN_IN_METHOD="google.com";Ai.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends Nu{constructor(){super("github.com")}static credential(e){return Ki._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ri.credentialFromTaggedObject(e)}static credentialFromError(e){return Ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ri.credential(e.oauthAccessToken)}catch{return null}}}Ri.GITHUB_SIGN_IN_METHOD="github.com";Ri.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hee="http://localhost";class tu extends Ru{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return gs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,gs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,gs(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new tu(r,s)}static _create(e,n){return new tu(e,n)}buildRequest(){return{requestUri:hee,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fee="saml.";class Rg extends $s{constructor(e){le(e.startsWith(fee),"argument-error"),super(e)}static credentialFromResult(e){return Rg.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Rg.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=tu.fromJSON(e);return le(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return tu._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni extends Nu{constructor(){super("twitter.com")}static credential(e,n){return Ki._fromParams({providerId:Ni.PROVIDER_ID,signInMethod:Ni.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ni.credentialFromTaggedObject(e)}static credentialFromError(e){return Ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ni.credential(n,r)}catch{return null}}}Ni.TWITTER_SIGN_IN_METHOD="twitter.com";Ni.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gF(t,e){return Ms(t,"POST","/v1/accounts:signUp",cn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Da._fromIdTokenResponse(e,r,i),o=jA(r);return new ei({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=jA(r);return new ei({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function jA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pee(t){var e;const n=Sn(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new ei({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await gF(n,{returnSecureToken:!0}),i=await ei._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng extends Hn{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Ng.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Ng(e,n,r,i)}}function yF(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ng._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vF(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mee(t,e){const n=me(t);await Bv(!0,n,e);const{providerUserInfo:r}=await NZ(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=vF(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Ox(t,e,n=!1){const r=await Is(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ei._forOperation(t,"link",r)}async function Bv(t,e,n){await Wh(e);const r=vF(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";le(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _F(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await Is(t,yF(r,i,e,t),n);le(s.idToken,r,"internal-error");const o=Uv(s.idToken);le(o,r,"internal-error");const{sub:a}=o;return le(t.uid===a,r,"user-mismatch"),ei._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Fn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wF(t,e,n=!1){const r="signIn",i=await yF(t,r,e),s=await ei._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function zv(t,e){return wF(Sn(t),e)}async function bF(t,e){const n=me(t);return await Bv(!1,n,e.providerId),Ox(n,e)}async function SF(t,e){return _F(me(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gee(t,e){return Ms(t,"POST","/v1/accounts:signInWithCustomToken",cn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yee(t,e){const n=Sn(t),r=await gee(n,{token:e,returnSecureToken:!0}),i=await ei._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?Lx._fromServerResponse(e,n):Fn(e,"internal-error")}}class Lx extends Wv{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new Lx(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(t,e,n){var r;le(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),le(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(le(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(le(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vee(t,e,n){const r=me(t),i={requestType:"PASSWORD_RESET",email:e};n&&Hv(r,i,n),await ZZ(r,i)}async function _ee(t,e,n){await pF(me(t),{oobCode:e,newPassword:n})}async function wee(t,e){await YZ(me(t),{oobCode:e})}async function EF(t,e){const n=me(t),r=await pF(n,{oobCode:e}),i=r.requestType;switch(le(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":le(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":le(r.mfaInfo,n,"internal-error");default:le(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Wv._fromServerResponse(Sn(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function bee(t,e){const{data:n}=await EF(me(t),e);return n.email}async function See(t,e,n){const r=Sn(t),i=await gF(r,{returnSecureToken:!0,email:e,password:n}),s=await ei._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(s.user),s}function Eee(t,e,n){return zv(me(t),ea.credential(e,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xee(t,e,n){const r=me(t),i={requestType:"EMAIL_SIGNIN",email:e};le(n.handleCodeInApp,r,"argument-error"),n&&Hv(r,i,n),await eee(r,i)}function Tee(t,e){const n=Vv.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function Iee(t,e,n){const r=me(t),i=ea.credentialWithLink(e,n||zh());return le(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),zv(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cee(t,e){return Cn(t,"POST","/v1/accounts:createAuthUri",cn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kee(t,e){const n=Nx()?zh():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await Cee(me(t),r);return i||[]}async function Aee(t,e){const n=me(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Hv(n.auth,i,e);const{email:s}=await JZ(n.auth,i);s!==t.email&&await t.reload()}async function Ree(t,e,n){const r=me(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&Hv(r.auth,s,n);const{email:o}=await tee(r.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nee(t,e){return Cn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pee(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=me(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Is(r,Nee(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function Dee(t,e){return xF(me(t),e,null)}function Oee(t,e){return xF(me(t),null,e)}async function xF(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await Is(t,mF(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lee(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const o=(n=(e=Uv(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new bc(s,a)}}if(!r)return null;switch(r){case"facebook.com":return new Mee(s,i);case"github.com":return new $ee(s,i);case"google.com":return new Fee(s,i);case"twitter.com":return new Uee(s,i,t.screenName||null);case"custom":case"anonymous":return new bc(s,null);default:return new bc(s,r,i)}}class bc{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class TF extends bc{constructor(e,n,r,i){super(e,n,r),this.username=i}}class Mee extends bc{constructor(e,n){super(e,"facebook.com",n)}}class $ee extends TF{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class Fee extends bc{constructor(e,n){super(e,"google.com",n)}}class Uee extends TF{constructor(e,n,r){super(e,"twitter.com",n,r)}}function jee(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:Lee(n)}class xa{constructor(e,n,r){this.type=e,this.credential=n,this.auth=r}static _fromIdtoken(e,n){return new xa("enroll",e,n)}static _fromMfaPendingCredential(e){return new xa("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return xa._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return xa._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=Sn(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>Wv._fromServerResponse(r,a));le(i.mfaPendingCredential,r,"internal-error");const o=xa._fromMfaPendingCredential(i.mfaPendingCredential);return new Mx(o,s,async a=>{const l=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const c=Object.assign(Object.assign({},i),{idToken:l.idToken,refreshToken:l.refreshToken});switch(n.operationType){case"signIn":const u=await ei._fromIdTokenResponse(r,n.operationType,c);return await r._updateCurrentUser(u.user),u;case"reauthenticate":return le(n.user,r,"internal-error"),ei._forOperation(n.user,n.operationType,c);default:Fn(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function Vee(t,e){var n;const r=me(t),i=e;return le(e.customData.operationType,r,"argument-error"),le((n=i.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),Mx._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bee(t,e){return Cn(t,"POST","/v2/accounts/mfaEnrollment:start",cn(t,e))}function zee(t,e){return Cn(t,"POST","/v2/accounts/mfaEnrollment:finalize",cn(t,e))}function Wee(t,e){return Cn(t,"POST","/v2/accounts/mfaEnrollment:withdraw",cn(t,e))}class $x{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>Wv._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new $x(e)}async getSession(){return xa._fromIdtoken(await this.user.getIdToken(),this.user.auth)}async enroll(e,n){const r=e,i=await this.getSession(),s=await Is(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await Is(this.user,Wee(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const R0=new WeakMap;function Hee(t){const e=me(t);return R0.has(e)||R0.set(e,$x._fromUser(e)),R0.get(e)}const Pg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IF{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Pg,"1"),this.storage.removeItem(Pg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gee(){const t=zt();return Dx(t)||Au(t)}const qee=1e3,Kee=10;class CF extends IF{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Gee()&&WZ(),this.fallbackToPolling=dF(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);zZ()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Kee):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},qee)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}CF.type="LOCAL";const Fx=CF;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kF extends IF{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}kF.type="SESSION";const sl=kF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qee(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Gv(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await Qee(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Gv.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yee{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Yf("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const h=d;if(h.data.eventId===c)switch(h.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(){return window}function Xee(t){rn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(){return typeof rn().WorkerGlobalScope<"u"&&typeof rn().importScripts=="function"}async function Jee(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Zee(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function ete(){return Ux()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AF="firebaseLocalStorageDb",tte=1,Dg="firebaseLocalStorage",RF="fbase_key";class Xf{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function qv(t,e){return t.transaction([Dg],e?"readwrite":"readonly").objectStore(Dg)}function nte(){const t=indexedDB.deleteDatabase(AF);return new Xf(t).toPromise()}function K1(){const t=indexedDB.open(AF,tte);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Dg,{keyPath:RF})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Dg)?e(r):(r.close(),await nte(),e(await K1()))})})}async function VA(t,e,n){const r=qv(t,!0).put({[RF]:e,value:n});return new Xf(r).toPromise()}async function rte(t,e){const n=qv(t,!1).get(e),r=await new Xf(n).toPromise();return r===void 0?null:r.value}function BA(t,e){const n=qv(t,!0).delete(e);return new Xf(n).toPromise()}const ite=800,ste=3;class NF{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await K1(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>ste)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ux()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gv._getInstance(ete()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Jee(),!this.activeServiceWorker)return;this.sender=new Yee(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Zee()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await K1();return await VA(e,Pg,"1"),await BA(e,Pg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>VA(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>rte(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>BA(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=qv(i,!1).getAll();return new Xf(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ite)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}NF.type="LOCAL";const qh=NF;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ote(t,e){return Cn(t,"POST","/v2/accounts/mfaSignIn:start",cn(t,e))}function ate(t,e){return Cn(t,"POST","/v2/accounts/mfaSignIn:finalize",cn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lte(t){return(await Cn(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cte(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function PF(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Dn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",cte().appendChild(r)})}function DF(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ute=500,dte=6e4,Wp=1e12;class hte{constructor(e){this.auth=e,this.counter=Wp,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new fte(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||Wp;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||Wp;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||Wp;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class fte{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;le(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=pte(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},dte)},ute))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function pte(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0=DF("rcb"),mte=new Kf(3e4,6e4),gte="https://www.google.com/recaptcha/api.js?";class yte{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=rn().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return le(vte(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(rn().grecaptcha):new Promise((r,i)=>{const s=rn().setTimeout(()=>{i(Dn(e,"network-request-failed"))},mte.get());rn()[N0]=()=>{rn().clearTimeout(s),delete rn()[N0];const a=rn().grecaptcha;if(!a){i(Dn(e,"internal-error"));return}const l=a.render;a.render=(c,u)=>{const d=l(c,u);return this.counter++,d},this.hostLanguage=n,r(a)};const o=`${gte}?${_l({onload:N0,render:"explicit",hl:n})}`;PF(o).catch(()=>{clearTimeout(s),i(Dn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=rn().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function vte(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class _te{async load(e){return new hte(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OF="recaptcha",wte={theme:"light",type:"image"};let bte=class{constructor(e,n=Object.assign({},wte),r){this.parameters=n,this.type=OF,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Sn(r),this.isInvisible=this.parameters.size==="invisible",le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof e=="string"?document.getElementById(e):e;le(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new _te:new yte,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){le(!this.parameters.sitekey,this.auth,"argument-error"),le(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=rn()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){le(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){le(Nx()&&!Ux(),this.auth,"internal-error"),await Ste(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await lte(this.auth);le(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return le(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function Ste(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=La._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function Ete(t,e,n){const r=Sn(t),i=await Kv(r,e,me(n));return new jx(i,s=>zv(r,s))}async function xte(t,e,n){const r=me(t);await Bv(!1,r,"phone");const i=await Kv(r.auth,e,me(n));return new jx(i,s=>bF(r,s))}async function Tte(t,e,n){const r=me(t),i=await Kv(r.auth,e,me(n));return new jx(i,s=>SF(r,s))}async function Kv(t,e,n){var r;const i=await n.verify();try{le(typeof i=="string",t,"argument-error"),le(n.type===OF,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s)return le(o.type==="enroll",t,"internal-error"),(await Bee(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{le(o.type==="signin",t,"internal-error");const a=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return le(a,t,"missing-multi-factor-info"),(await ote(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await see(t,{phoneNumber:s.phoneNumber,recaptchaToken:i});return o}}finally{n._reset()}}async function Ite(t,e){await Ox(me(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ol=class _m{constructor(e){this.providerId=_m.PROVIDER_ID,this.auth=Sn(e)}verifyPhoneNumber(e,n){return Kv(this.auth,e,me(n))}static credential(e,n){return La._fromVerification(e,n)}static credentialFromResult(e){const n=e;return _m.credentialFromTaggedObject(n)}static credentialFromError(e){return _m.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?La._fromTokenResponse(n,r):null}};ol.PROVIDER_ID="phone";ol.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Il(t,e){return e?Pr(e):(le(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx extends Ru{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return gs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return gs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return gs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Cte(t){return wF(t.auth,new Vx(t),t.bypassAuthState)}function kte(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),_F(n,new Vx(t),t.bypassAuthState)}async function Ate(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),Ox(n,new Vx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LF{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Cte;case"linkViaPopup":case"linkViaRedirect":return Ate;case"reauthViaPopup":case"reauthViaRedirect":return kte;default:Fn(this.auth,"internal-error")}}resolve(e){_i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rte=new Kf(2e3,1e4);async function Nte(t,e,n){const r=Sn(t);ku(t,e,$s);const i=Il(r,n);return new cs(r,"signInViaPopup",e,i).executeNotNull()}async function Pte(t,e,n){const r=me(t);ku(r.auth,e,$s);const i=Il(r.auth,n);return new cs(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function Dte(t,e,n){const r=me(t);ku(r.auth,e,$s);const i=Il(r.auth,n);return new cs(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class cs extends LF{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,cs.currentPopupAction&&cs.currentPopupAction.cancel(),cs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return le(e,this.auth,"internal-error"),e}async onExecution(){_i(this.filter.length===1,"Popup operations only handle one event");const e=Yf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Dn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Dn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,cs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Dn(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(e,Rte.get())};e()}}cs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ote="pendingRedirect",Qd=new Map;class Lte extends LF{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Qd.get(this.auth._key());if(!e){try{const r=await Mte(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Qd.set(this.auth._key(),e)}return this.bypassAuthState||Qd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Mte(t,e){const n=$F(e),r=MF(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function Bx(t,e){return MF(t)._set($F(e),"true")}function $te(){Qd.clear()}function zx(t,e){Qd.set(t._key(),e)}function MF(t){return Pr(t._redirectPersistence)}function $F(t){return Oa(Ote,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fte(t,e,n){return Ute(t,e,n)}async function Ute(t,e,n){const r=Sn(t);ku(t,e,$s),await r._initializationPromise;const i=Il(r,n);return await Bx(i,r),i._openRedirect(r,e,"signInViaRedirect")}function jte(t,e,n){return Vte(t,e,n)}async function Vte(t,e,n){const r=me(t);ku(r.auth,e,$s),await r.auth._initializationPromise;const i=Il(r.auth,n);await Bx(i,r.auth);const s=await FF(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function Bte(t,e,n){return zte(t,e,n)}async function zte(t,e,n){const r=me(t);ku(r.auth,e,$s),await r.auth._initializationPromise;const i=Il(r.auth,n);await Bv(!1,r,e.providerId),await Bx(i,r.auth);const s=await FF(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function Wte(t,e){return await Sn(t)._initializationPromise,Qv(t,e,!1)}async function Qv(t,e,n=!1){const r=Sn(t),i=Il(r,e),o=await new Lte(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function FF(t){const e=Yf(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hte=10*60*1e3;class UF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Gte(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!jF(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Dn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Hte&&this.cachedEventUids.clear(),this.cachedEventUids.has(zA(e))}saveEventToCache(e){this.cachedEventUids.add(zA(e)),this.lastProcessedEventTime=Date.now()}}function zA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function jF({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Gte(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jF(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VF(t,e={}){return Cn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qte=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Kte=/^https?/;async function Qte(t){if(t.config.emulator)return;const{authorizedDomains:e}=await VF(t);for(const n of e)try{if(Yte(n))return}catch{}Fn(t,"unauthorized-domain")}function Yte(t){const e=zh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Kte.test(n))return!1;if(qte.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xte=new Kf(3e4,6e4);function WA(){const t=rn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Jte(t){return new Promise((e,n)=>{var r,i,s;function o(){WA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{WA(),n(Dn(t,"network-request-failed"))},timeout:Xte.get()})}if(!((i=(r=rn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=rn().gapi)===null||s===void 0)&&s.load)o();else{const a=DF("iframefcb");return rn()[a]=()=>{gapi.load?o():n(Dn(t,"network-request-failed"))},PF(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw wm=null,e})}let wm=null;function Zte(t){return wm=wm||Jte(t),wm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ene=new Kf(5e3,15e3),tne="__/auth/iframe",nne="emulator/auth/iframe",rne={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ine=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sne(t){const e=t.config;le(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Px(e,nne):`https://${t.config.authDomain}/${tne}`,r={apiKey:e.apiKey,appName:t.name,v:Ps},i=ine.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${_l(r).slice(1)}`}async function one(t){const e=await Zte(t),n=rn().gapi;return le(n,t,"internal-error"),e.open({where:document.body,url:sne(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rne,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Dn(t,"network-request-failed"),a=rn().setTimeout(()=>{s(o)},ene.get());function l(){rn().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ane={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},lne=500,cne=600,une="_blank",dne="http://localhost";class HA{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function hne(t,e,n,r=lne,i=cne){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},ane),{width:r.toString(),height:i.toString(),top:s,left:o}),c=zt().toLowerCase();n&&(a=aF(c)?une:n),oF(c)&&(e=e||dne,l.scrollbars="yes");const u=Object.entries(l).reduce((h,[f,p])=>`${h}${f}=${p},`,"");if(BZ(c)&&a!=="_self")return fne(e||"",a),new HA(null);const d=window.open(e||"",a,u);le(d,t,"popup-blocked");try{d.focus()}catch{}return new HA(d)}function fne(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pne="__/auth/handler",mne="emulator/auth/handler";function Q1(t,e,n,r,i,s){le(t.config.authDomain,t,"auth-domain-config-required"),le(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ps,eventId:i};if(e instanceof $s){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",sg(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,c]of Object.entries(s||{}))o[l]=c}if(e instanceof Nu){const l=e.getScopes().filter(c=>c!=="");l.length>0&&(o.scopes=l.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const l of Object.keys(a))a[l]===void 0&&delete a[l];return`${gne(t)}?${_l(a).slice(1)}`}function gne({config:t}){return t.emulator?Px(t,mne):`https://${t.authDomain}/${pne}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0="webStorageSupport";class yne{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sl,this._completeRedirectFn=Qv,this._overrideRedirectResult=zx}async _openPopup(e,n,r,i){var s;_i((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=Q1(e,n,r,zh(),i);return hne(e,o,Yf())}async _openRedirect(e,n,r,i){return await this._originValidation(e),Xee(Q1(e,n,r,zh(),i)),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(_i(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await one(e),r=new UF(e);return n.register("authEvent",i=>(le(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(P0,{type:P0},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[P0];o!==void 0&&n(!!o),Fn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Qte(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return dF()||Dx()||Au()}}const vne=yne;class _ne{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return Li("unexpected MultiFactorSessionType")}}}class Wx extends _ne{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Wx(e)}_finalizeEnroll(e,n,r){return zee(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return ate(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class BF{constructor(){}static assertion(e){return Wx._fromCredential(e)}}BF.FACTOR_ID="phone";var GA="@firebase/auth",qA="0.21.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wne{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bne(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function Sne(t){Wi(new sr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:s,authDomain:o}=r.options;return((a,l)=>{le(s&&!s.includes(":"),"invalid-api-key",{appName:a.name}),le(!(o!=null&&o.includes(":")),"argument-error",{appName:a.name});const c={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hF(t)},u=new GZ(a,l,c);return xZ(u,n),u})(r,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Wi(new sr("auth-internal",e=>{const n=Sn(e.getProvider("auth").getImmediate());return(r=>new wne(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Er(GA,qA,bne(t)),Er(GA,qA,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ene=5*60;Hq("authIdTokenMaxAge");Sne("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function al(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xne=2e3;async function Tne(t,e,n){var r;const{BuildInfo:i}=al();_i(e.sessionId,"AuthEvent did not contain a session ID");const s=await Rne(e.sessionId),o={};return Au()?o.ibi=i.packageName:Qf()?o.apn=i.packageName:Fn(t,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,Q1(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,o)}async function Ine(t){const{BuildInfo:e}=al(),n={};Au()?n.iosBundleId=e.packageName:Qf()?n.androidPackageName=e.packageName:Fn(t,"operation-not-supported-in-this-environment"),await VF(t,n)}function Cne(t){const{cordova:e}=al();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,VZ()?"_blank":"_system","location=yes"),n(i)})})}async function kne(t,e,n){const{cordova:r}=al();let i=()=>{};try{await new Promise((s,o)=>{let a=null;function l(){var d;s();const h=(d=r.plugins.browsertab)===null||d===void 0?void 0:d.close;typeof h=="function"&&h(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function c(){a||(a=window.setTimeout(()=>{o(Dn(t,"redirect-cancelled-by-user"))},xne))}function u(){(document==null?void 0:document.visibilityState)==="visible"&&c()}e.addPassiveListener(l),document.addEventListener("resume",c,!1),Qf()&&document.addEventListener("visibilitychange",u,!1),i=()=>{e.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}})}finally{i()}}function Ane(t){var e,n,r,i,s,o,a,l,c,u;const d=al();le(typeof((e=d==null?void 0:d.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),le(typeof((n=d==null?void 0:d.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),le(typeof((s=(i=(r=d==null?void 0:d.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),le(typeof((l=(a=(o=d==null?void 0:d.cordova)===null||o===void 0?void 0:o.plugins)===null||a===void 0?void 0:a.browsertab)===null||l===void 0?void 0:l.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),le(typeof((u=(c=d==null?void 0:d.cordova)===null||c===void 0?void 0:c.InAppBrowser)===null||u===void 0?void 0:u.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function Rne(t){const e=Nne(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function Nne(t){if(_i(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pne=20;class Dne extends UF{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function One(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:$ne(),postBody:null,tenantId:t.tenantId,error:Dn(t,"no-auth-event")}}function Lne(t,e){return Y1()._set(X1(t),e)}async function KA(t){const e=await Y1()._get(X1(t));return e&&await Y1()._remove(X1(t)),e}function Mne(t,e){var n,r;const i=Une(e);if(i.includes("/__/auth/callback")){const s=bm(i),o=s.firebaseError?Fne(decodeURIComponent(s.firebaseError)):null,a=(r=(n=o==null?void 0:o.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],l=a?Dn(a):null;return l?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:i,postBody:null}}return null}function $ne(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<Pne;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function Y1(){return Pr(Fx)}function X1(t){return Oa("authEvent",t.config.apiKey,t.name)}function Fne(t){try{return JSON.parse(t)}catch{return null}}function Une(t){const e=bm(t),n=e.link?decodeURIComponent(e.link):void 0,r=bm(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return bm(i).link||i||r||n||t}function bm(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return sc(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jne=500;class Vne{constructor(){this._redirectPersistence=sl,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Qv,this._overrideRedirectResult=zx}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new Dne(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){Fn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){Ane(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),$te(),await this._originValidation(e);const o=One(e,r,i);await Lne(e,o);const a=await Tne(e,o,n),l=await Cne(a);return kne(e,s,l)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Ine(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=al(),o=setTimeout(async()=>{await KA(e),n.onEvent(QA())},jne),a=async u=>{clearTimeout(o);const d=await KA(e);let h=null;d&&(u!=null&&u.url)&&(h=Mne(d,u.url)),n.onEvent(h||QA())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,a);const l=i,c=`${s.packageName.toLowerCase()}://`;al().handleOpenURL=async u=>{if(u.toLowerCase().startsWith(c)&&a({url:u}),typeof l=="function")try{l(u)}catch(d){console.error(d)}}}}const Bne=Vne;function QA(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Dn("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zne(t,e){Sn(t)._logFramework(e)}var Wne="@firebase/auth-compat",Hne="0.3.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gne=1e3;function Yd(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function qne(){return Yd()==="http:"||Yd()==="https:"}function zF(t=zt()){return!!((Yd()==="file:"||Yd()==="ionic:"||Yd()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Kne(){return zy()||By()}function Qne(){return oL()&&(document==null?void 0:document.documentMode)===11}function Yne(t=zt()){return/Edge\/\d+/.test(t)}function Xne(t=zt()){return Qne()||Yne(t)}function WF(){try{const t=self.localStorage,e=Yf();if(t)return t.setItem(e,"1"),t.removeItem(e),Xne()?Eh():!0}catch{return Hx()&&Eh()}return!1}function Hx(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function D0(){return(qne()||sL()||zF())&&!Kne()&&WF()&&!Hx()}function HF(){return zF()&&typeof document<"u"}async function Jne(){return HF()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},Gne);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function Zne(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar={LOCAL:"local",NONE:"none",SESSION:"session"},od=le,GF="persistence";function ere(t,e){if(od(Object.values(Ar).includes(e),t,"invalid-persistence-type"),zy()){od(e!==Ar.SESSION,t,"unsupported-persistence-type");return}if(By()){od(e===Ar.NONE,t,"unsupported-persistence-type");return}if(Hx()){od(e===Ar.NONE||e===Ar.LOCAL&&Eh(),t,"unsupported-persistence-type");return}od(e===Ar.NONE||WF(),t,"unsupported-persistence-type")}async function J1(t){await t._initializationPromise;const e=qF(),n=Oa(GF,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function tre(t,e){const n=qF();if(!n)return[];const r=Oa(GF,t,e);switch(n.getItem(r)){case Ar.NONE:return[eu];case Ar.LOCAL:return[qh,sl];case Ar.SESSION:return[sl];default:return[]}}function qF(){var t;try{return((t=Zne())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nre=le;class eo{constructor(){this.browserResolver=Pr(vne),this.cordovaResolver=Pr(Bne),this.underlyingResolver=null,this._redirectPersistence=sl,this._completeRedirectFn=Qv,this._overrideRedirectResult=zx}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return HF()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return nre(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await Jne();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KF(t){return t.unwrap()}function rre(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ire(t){return QF(t)}function sre(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new ore(t,Vee(t,e))}else if(r){const i=QF(e),s=e;i&&(s.credential=i,s.tenantId=r.tenantId||void 0,s.email=r.email||void 0,s.phoneNumber=r.phoneNumber||void 0)}}function QF(t){const{_tokenResponse:e}=t instanceof Hn?t.customData:t;if(!e)return null;if(!(t instanceof Hn)&&"temporaryProof"in e&&"phoneNumber"in e)return ol.credentialFromResult(t);const n=e.providerId;if(!n||n===sd.PASSWORD)return null;let r;switch(n){case sd.GOOGLE:r=Ai;break;case sd.FACEBOOK:r=ki;break;case sd.GITHUB:r=Ri;break;case sd.TWITTER:r=Ni;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:l}=e;return!s&&!o&&!i&&!a?null:a?n.startsWith("saml.")?tu._create(n,a):Ki._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:i,accessToken:s}):new wc(n).credential({idToken:i,accessToken:s,rawNonce:l})}return t instanceof Hn?r.credentialFromError(t):r.credentialFromResult(t)}function cr(t,e){return e.catch(n=>{throw n instanceof Hn&&sre(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:ire(n),additionalUserInfo:jee(n),user:us.getOrCreate(i)}})}async function Z1(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>cr(t,n.confirm(r))}}class ore{constructor(e,n){this.resolver=n,this.auth=rre(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return cr(KF(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e){this._delegate=e,this.multiFactor=Hee(e)}static getOrCreate(e){return us.USER_MAP.has(e)||us.USER_MAP.set(e,new us(e)),us.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return cr(this.auth,bF(this._delegate,e))}async linkWithPhoneNumber(e,n){return Z1(this.auth,xte(this._delegate,e,n))}async linkWithPopup(e){return cr(this.auth,Dte(this._delegate,e,eo))}async linkWithRedirect(e){return await J1(Sn(this.auth)),Bte(this._delegate,e,eo)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return cr(this.auth,SF(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return Z1(this.auth,Tte(this._delegate,e,n))}reauthenticateWithPopup(e){return cr(this.auth,Pte(this._delegate,e,eo))}async reauthenticateWithRedirect(e){return await J1(Sn(this.auth)),jte(this._delegate,e,eo)}sendEmailVerification(e){return Aee(this._delegate,e)}async unlink(e){return await mee(this._delegate,e),this}updateEmail(e){return Dee(this._delegate,e)}updatePassword(e){return Oee(this._delegate,e)}updatePhoneNumber(e){return Ite(this._delegate,e)}updateProfile(e){return Pee(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return Ree(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}us.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ad=le;class eb{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;ad(r,"invalid-api-key",{appName:e.name}),ad(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?eo:void 0;this._delegate=n.initialize({options:{persistence:are(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(SZ),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?us.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){qZ(this._delegate,e,n)}applyActionCode(e){return wee(this._delegate,e)}checkActionCode(e){return EF(this._delegate,e)}confirmPasswordReset(e,n){return _ee(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return cr(this._delegate,See(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return kee(this._delegate,e)}isSignInWithEmailLink(e){return Tee(this._delegate,e)}async getRedirectResult(){ad(D0(),this._delegate,"operation-not-supported-in-this-environment");const e=await Wte(this._delegate,eo);return e?cr(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){zne(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:s,complete:o}=YA(e,n,r);return this._delegate.onAuthStateChanged(i,s,o)}onIdTokenChanged(e,n,r){const{next:i,error:s,complete:o}=YA(e,n,r);return this._delegate.onIdTokenChanged(i,s,o)}sendSignInLinkToEmail(e,n){return xee(this._delegate,e,n)}sendPasswordResetEmail(e,n){return vee(this._delegate,e,n||void 0)}async setPersistence(e){ere(this._delegate,e);let n;switch(e){case Ar.SESSION:n=sl;break;case Ar.LOCAL:n=await Pr(qh)._isAvailable()?qh:Fx;break;case Ar.NONE:n=eu;break;default:return Fn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return cr(this._delegate,pee(this._delegate))}signInWithCredential(e){return cr(this._delegate,zv(this._delegate,e))}signInWithCustomToken(e){return cr(this._delegate,yee(this._delegate,e))}signInWithEmailAndPassword(e,n){return cr(this._delegate,Eee(this._delegate,e,n))}signInWithEmailLink(e,n){return cr(this._delegate,Iee(this._delegate,e,n))}signInWithPhoneNumber(e,n){return Z1(this._delegate,Ete(this._delegate,e,n))}async signInWithPopup(e){return ad(D0(),this._delegate,"operation-not-supported-in-this-environment"),cr(this._delegate,Nte(this._delegate,e,eo))}async signInWithRedirect(e){return ad(D0(),this._delegate,"operation-not-supported-in-this-environment"),await J1(this._delegate),Fte(this._delegate,e,eo)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return bee(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}eb.Persistence=Ar;function YA(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:o=>i(o&&us.getOrCreate(o)),error:e,complete:n}}function are(t,e){const n=tre(t,e);if(typeof self<"u"&&!n.includes(qh)&&n.push(qh),typeof window<"u")for(const r of[Fx,sl])n.includes(r)||n.push(r);return n.includes(eu)||n.push(eu),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(){this.providerId="phone",this._delegate=new ol(KF($n.auth()))}static credential(e,n){return ol.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}Gx.PHONE_SIGN_IN_METHOD=ol.PHONE_SIGN_IN_METHOD;Gx.PROVIDER_ID=ol.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lre=le;class cre{constructor(e,n,r=$n.app()){var i;lre((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new bte(e,n,r.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ure="auth-compat";function dre(t){t.INTERNAL.registerComponent(new sr(ure,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new eb(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Fl.EMAIL_SIGNIN,PASSWORD_RESET:Fl.PASSWORD_RESET,RECOVER_EMAIL:Fl.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Fl.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Fl.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Fl.VERIFY_EMAIL}},EmailAuthProvider:ea,FacebookAuthProvider:ki,GithubAuthProvider:Ri,GoogleAuthProvider:Ai,OAuthProvider:wc,SAMLAuthProvider:Rg,PhoneAuthProvider:Gx,PhoneMultiFactorGenerator:BF,RecaptchaVerifier:cre,TwitterAuthProvider:Ni,Auth:eb,AuthCredential:Ru,Error:Hn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(Wne,Hne)}dre($n);const hre="@firebase/firestore-compat",fre="0.3.4";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qx(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new re("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(){if(typeof Uint8Array>"u")throw new re("unimplemented","Uint8Arrays are not available in this environment.")}function JA(){if(!N7())throw new re("unimplemented","Blobs are unavailable in Firestore in this environment.")}let YF=class tb{constructor(e){this._delegate=e}static fromBase64String(e){return JA(),new tb(qi.fromBase64String(e))}static fromUint8Array(e){return XA(),new tb(qi.fromUint8Array(e))}toBase64(){return JA(),this._delegate.toBase64()}toUint8Array(){return XA(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(t){return pre(t,["next","error","complete"])}function pre(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mre{enableIndexedDbPersistence(e,n){return wX(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return bX(e._delegate)}clearIndexedDbPersistence(e){return SX(e._delegate)}}class XF{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Io||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Fc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){mX(this._delegate,e,n,r)}enableNetwork(){return xX(this._delegate)}disableNetwork(){return TX(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,m$("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return EX(this._delegate)}onSnapshotsInSync(e){return JX(this._delegate,e)}get app(){if(!this._appCompat)throw new re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new nu(this,y$(this._delegate,e))}catch(n){throw Zn(n,"collection()","Firestore.collection()")}}doc(e){try{return new qr(this,Gi(this._delegate,e))}catch(n){throw Zn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Yh(this,gX(this._delegate,e))}catch(n){throw Zn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return nJ(this._delegate,n=>e(new JF(this,n)))}batch(){return Tn(this._delegate),new ZF(new eJ(this._delegate,e=>qf(this._delegate,e)))}loadBundle(e){return IX(this._delegate,e)}namedQuery(e){return CX(this._delegate,e).then(n=>n?new Yh(this,n):null)}}class Yv extends gx{constructor(e){super(),this.firestore=e}convertBytes(e){return new YF(new qi(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return qr.forKey(n,this.firestore,null)}}function gre(t){f7(t)}class JF{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Yv(e)}get(e){const n=Ta(e);return this._delegate.get(n).then(r=>new Kh(this._firestore,new Ts(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Ta(e);return r?(qx("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Ta(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Ta(e);return this._delegate.delete(n),this}}class ZF{constructor(e){this._delegate=e}set(e,n,r){const i=Ta(e);return r?(qx("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Ta(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Ta(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class ll{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Gd(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Qh(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=ll.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new ll(e,new Yv(e),n),i.set(n,s)),s}}ll.INSTANCES=new WeakMap;class qr{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Yv(e)}static forPath(e,n,r){if(e.length%2!==0)throw new re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new qr(n,new Rt(n._delegate,r,new fe(e)))}static forKey(e,n,r){return new qr(n,new Rt(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new nu(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new nu(this.firestore,y$(this._delegate,e))}catch(n){throw Zn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=me(e),e instanceof Rt?v$(this._delegate,e):!1}set(e,n){n=qx("DocumentReference.set",n);try{return n?bA(this._delegate,e,n):bA(this._delegate,e)}catch(r){throw Zn(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?Do(this._delegate,e):Do(this._delegate,e,n,...r)}catch(i){throw Zn(i,"updateDoc()","DocumentReference.update()")}}delete(){return L$(this._delegate)}onSnapshot(...e){const n=eU(e),r=tU(e,i=>new Kh(this.firestore,new Ts(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Xc(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=GX(this._delegate):(e==null?void 0:e.source)==="server"?n=qX(this._delegate):n=Yc(this._delegate),n.then(r=>new Kh(this.firestore,new Ts(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new qr(this.firestore,e?this._delegate.withConverter(ll.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Zn(t,e,n){return t.message=t.message.replace(e,n),t}function eU(t){for(const e of t)if(typeof e=="object"&&!nb(e))return e;return{}}function tU(t,e){var n,r;let i;return nb(t[0])?i=t[0]:nb(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class Kh{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new qr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return O$(this._delegate,e._delegate)}}class Qh extends Kh{data(e){const n=this._delegate.data(e);return p7(n!==void 0),n}}let Yh=class Ei{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Yv(e)}where(e,n,r){try{return new Ei(this.firestore,Bs(this._delegate,MX(e,n,r)))}catch(i){throw Zn(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Ei(this.firestore,Bs(this._delegate,$X(e,n)))}catch(r){throw Zn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ei(this.firestore,Bs(this._delegate,FX(e)))}catch(n){throw Zn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Ei(this.firestore,Bs(this._delegate,UX(e)))}catch(n){throw Zn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ei(this.firestore,Bs(this._delegate,jX(...e)))}catch(n){throw Zn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ei(this.firestore,Bs(this._delegate,VX(...e)))}catch(n){throw Zn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ei(this.firestore,Bs(this._delegate,BX(...e)))}catch(n){throw Zn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ei(this.firestore,Bs(this._delegate,zX(...e)))}catch(n){throw Zn(n,"endAt()","Query.endAt()")}}isEqual(e){return _$(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=QX(this._delegate):(e==null?void 0:e.source)==="server"?n=YX(this._delegate):n=KX(this._delegate),n.then(r=>new rb(this.firestore,new Po(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=eU(e),r=tU(e,i=>new rb(this.firestore,new Po(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Xc(this._delegate,n,r)}withConverter(e){return new Ei(this.firestore,e?this._delegate.withConverter(ll.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};class yre{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Qh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class rb{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Yh(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Qh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new yre(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Qh(this._firestore,r))})}isEqual(e){return O$(this._delegate,e._delegate)}}class nu extends Yh{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new qr(this.firestore,e):null}doc(e){try{return e===void 0?new qr(this.firestore,Gi(this._delegate)):new qr(this.firestore,Gi(this._delegate,e))}catch(n){throw Zn(n,"doc()","CollectionReference.doc()")}}add(e){return XX(this._delegate,e).then(n=>new qr(this.firestore,n))}isEqual(e){return v$(this._delegate,e._delegate)}withConverter(e){return new nu(this.firestore,e?this._delegate.withConverter(ll.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Ta(t){return ct(t,Rt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(...e){this._delegate=new No(...e)}static documentId(){return new Kx(Xt.keyField().canonicalString())}isEqual(e){return e=me(e),e instanceof No?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e){this._delegate=e}static serverTimestamp(){const e=iJ();return e._methodName="FieldValue.serverTimestamp",new ma(e)}static delete(){const e=rJ();return e._methodName="FieldValue.delete",new ma(e)}static arrayUnion(...e){const n=sJ(...e);return n._methodName="FieldValue.arrayUnion",new ma(n)}static arrayRemove(...e){const n=oJ(...e);return n._methodName="FieldValue.arrayRemove",new ma(n)}static increment(e){const n=M$(e);return n._methodName="FieldValue.increment",new ma(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vre={Firestore:XF,GeoPoint:vv,Timestamp:Ft,Blob:YF,Transaction:JF,WriteBatch:ZF,DocumentReference:qr,DocumentSnapshot:Kh,Query:Yh,QueryDocumentSnapshot:Qh,QuerySnapshot:rb,CollectionReference:nu,FieldPath:Kx,FieldValue:ma,setLogLevel:gre,CACHE_SIZE_UNLIMITED:_X};function _re(t,e){t.INTERNAL.registerComponent(new sr("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},vre)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wre(t){_re(t,(e,n)=>new XF(e,n,new mre)),t.registerVersion(hre,fre)}wre($n);const ZA="@firebase/database",eR="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nU="";function rU(t){nU=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bre{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),sn(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:xh(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sre{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Lr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iU=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new bre(e)}}catch{}return new Sre},Ia=iU("localStorage"),ib=iU("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sc=new gu("@firebase/database"),sU=function(){let t=1;return function(){return t++}}(),oU=function(t){const e=rK(t),n=new eK;n.update(e);const r=n.digest();return KS.encodeByteArray(r)},Jf=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Jf.apply(null,r):typeof r=="object"?e+=sn(r):e+=r,e+=" "}return e};let Ma=null,tR=!0;const aU=function(t,e){ce(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Sc.logLevel=st.VERBOSE,Ma=Sc.log.bind(Sc),e&&ib.set("logging_enabled",!0)):typeof t=="function"?Ma=t:(Ma=null,ib.remove("logging_enabled"))},vn=function(...t){if(tR===!0&&(tR=!1,Ma===null&&ib.get("logging_enabled")===!0&&aU(!0)),Ma){const e=Jf.apply(null,t);Ma(e)}},Zf=function(t){return function(...e){vn(t,...e)}},sb=function(...t){const e="FIREBASE INTERNAL ERROR: "+Jf(...t);Sc.error(e)},Qi=function(...t){const e=`FIREBASE FATAL ERROR: ${Jf(...t)}`;throw Sc.error(e),new Error(e)},Kn=function(...t){const e="FIREBASE WARNING: "+Jf(...t);Sc.warn(e)},Ere=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Kn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Xv=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},xre=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},$o="[MIN_NAME]",Cs="[MAX_NAME]",Cl=function(t,e){if(t===e)return 0;if(t===$o||e===Cs)return-1;if(e===$o||t===Cs)return 1;{const n=nR(t),r=nR(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},Tre=function(t,e){return t===e?0:t<e?-1:1},ld=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+sn(e))},Qx=function(t){if(typeof t!="object"||t===null)return sn(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=sn(e[r]),n+=":",n+=Qx(t[e[r]]);return n+="}",n},lU=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function En(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const cU=function(t){ce(!Xv(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,l;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const u=c.join("");let d="";for(l=0;l<64;l+=8){let h=parseInt(u.substr(l,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},Ire=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Cre=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function kre(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const Are=new RegExp("^-?(0*)\\d{1,10}$"),Rre=-2147483648,Nre=2147483647,nR=function(t){if(Are.test(t)){const e=Number(t);if(e>=Rre&&e<=Nre)return e}return null},Pu=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Kn("Exception was thrown by user callback.",n),e},Math.floor(0))}},Pre=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Xd=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dre{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Kn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ore{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(vn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Kn(e)}}class Ec{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Ec.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx="5",uU="v",dU="s",hU="r",fU="f",pU=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,mU="ls",gU="p",ob="ac",yU="websocket",vU="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _U{constructor(e,n,r,i,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ia.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ia.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Lre(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function wU(t,e,n){ce(typeof e=="string","typeof type must == string"),ce(typeof n=="object","typeof params must == object");let r;if(e===yU)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===vU)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Lre(t)&&(n.ns=t.namespace);const i=[];return En(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mre{constructor(){this.counters_={}}incrementCounter(e,n=1){Lr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Mq(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0={},L0={};function Xx(t){const e=t.toString();return O0[e]||(O0[e]=new Mre),O0[e]}function $re(t,e){const n=t.toString();return L0[n]||(L0[n]=e()),L0[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fre{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Pu(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR="start",Ure="close",jre="pLPCommand",Vre="pRTLPCB",bU="id",SU="pw",EU="ser",Bre="cb",zre="seg",Wre="ts",Hre="d",Gre="dframe",xU=1870,TU=30,qre=xU-TU,Kre=25e3,Qre=3e4;class to{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Zf(e),this.stats_=Xx(n),this.urlFn=l=>(this.appCheckToken&&(l[ob]=this.appCheckToken),wU(n,vU,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Fre(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Qre)),xre(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Jx((...s)=>{const[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===rR)this.id=a,this.password=l;else if(o===Ure)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[rR]="t",r[EU]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Bre]=this.scriptTagHolder.uniqueCallbackIdentifier),r[uU]=Yx,this.transportSessionId&&(r[dU]=this.transportSessionId),this.lastSessionId&&(r[mU]=this.lastSessionId),this.applicationId&&(r[gU]=this.applicationId),this.appCheckToken&&(r[ob]=this.appCheckToken),typeof location<"u"&&location.hostname&&pU.test(location.hostname)&&(r[hU]=fU);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){to.forceAllow_=!0}static forceDisallow(){to.forceDisallow_=!0}static isAvailable(){return to.forceAllow_?!0:!to.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Ire()&&!Cre()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=sn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=iL(n),i=lU(r,qre);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[Gre]="t",r[bU]=e,r[SU]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=sn(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Jx{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=sU(),window[jre+this.uniqueCallbackIdentifier]=e,window[Vre+this.uniqueCallbackIdentifier]=n,this.myIFrame=Jx.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){vn("frame writing exception"),a.stack&&vn(a.stack),vn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||vn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[bU]=this.myID,e[SU]=this.myPW,e[EU]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+TU+r.length<=xU;){const o=this.pendingSegs.shift();r=r+"&"+zre+i+"="+o.seg+"&"+Wre+i+"="+o.ts+"&"+Hre+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(Kre)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{vn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yre=16384,Xre=45e3;let Og=null;typeof MozWebSocket<"u"?Og=MozWebSocket:typeof WebSocket<"u"&&(Og=WebSocket);class Hr{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Zf(this.connId),this.stats_=Xx(n),this.connURL=Hr.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[uU]=Yx,typeof location<"u"&&location.hostname&&pU.test(location.hostname)&&(o[hU]=fU),n&&(o[dU]=n),r&&(o[mU]=r),i&&(o[ob]=i),s&&(o[gU]=s),wU(e,yU,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ia.set("previous_websocket_failure",!0);try{let r;aL(),this.mySock=new Og(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){Hr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Og!==null&&!Hr.forceDisallow_}static previouslyFailed(){return Ia.isInMemoryStorage||Ia.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ia.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=xh(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ce(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=sn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=lU(n,Yre);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Xre))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Hr.responsesRequiredToBeHealthy=2;Hr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[to,Hr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Hr&&Hr.isAvailable();let r=n&&!Hr.previouslyFailed();if(e.webSocketOnly&&(n||Kn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Hr];else{const i=this.transports_=[];for(const s of ru.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);ru.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ru.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jre=6e4,Zre=5e3,eie=10*1024,tie=100*1024,M0="t",iR="d",nie="s",sR="r",rie="e",oR="o",aR="a",lR="n",cR="p",iie="h";class sie{constructor(e,n,r,i,s,o,a,l,c,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Zf("c:"+this.id+":"),this.transportManager_=new ru(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Xd(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>tie?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>eie?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(M0 in e){const n=e[M0];n===aR?this.upgradeIfSecondaryHealthy_():n===sR?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===oR&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=ld("t",e),r=ld("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:cR,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:aR,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:lR,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=ld("t",e),r=ld("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=ld(M0,e);if(iR in e){const r=e[iR];if(n===iie){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===lR){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===nie?this.onConnectionShutdown_(r):n===sR?this.onReset_(r):n===rie?sb("Server Error: "+r):n===oR?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):sb("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Yx!==r&&Kn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Xd(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Jre))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Xd(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Zre))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:cR,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ia.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IU{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CU{constructor(e){this.allowedEvents_=e,this.listeners_={},ce(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){ce(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg extends CU{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!YS()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Lg}getInitialEvent(e){return ce(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=32,dR=768;class pt{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function ht(){return new pt("")}function Ye(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Fo(t){return t.pieces_.length-t.pieceNum_}function vt(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new pt(t.pieces_,e)}function Zx(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function oie(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Xh(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function kU(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new pt(e,0)}function $t(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof pt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new pt(n,0)}function Xe(t){return t.pieceNum_>=t.pieces_.length}function nr(t,e){const n=Ye(t),r=Ye(e);if(n===null)return e;if(n===r)return nr(vt(t),vt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function aie(t,e){const n=Xh(t,0),r=Xh(e,0);for(let i=0;i<n.length&&i<r.length;i++){const s=Cl(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function eT(t,e){if(Fo(t)!==Fo(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Kr(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Fo(t)>Fo(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class lie{constructor(e,n){this.errorPrefix_=n,this.parts_=Xh(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Wy(this.parts_[r]);AU(this)}}function cie(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Wy(e),AU(t)}function uie(t){const e=t.parts_.pop();t.byteLength_-=Wy(e),t.parts_.length>0&&(t.byteLength_-=1)}function AU(t){if(t.byteLength_>dR)throw new Error(t.errorPrefix_+"has a key path longer than "+dR+" bytes ("+t.byteLength_+").");if(t.parts_.length>uR)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+uR+") or object contains a cycle "+ca(t))}function ca(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT extends CU{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new tT}getInitialEvent(e){return ce(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cd=1e3,die=60*5*1e3,hR=30*1e3,hie=1.3,fie=3e4,pie="server_kill",fR=3;class ys extends IU{constructor(e,n,r,i,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=ys.nextPersistentConnectionId_++,this.log_=Zf("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=cd,this.maxReconnectDelay_=die,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!aL())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");tT.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Lg.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(sn(s)),ce(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new hr,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),ce(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ce(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,c=a.s;ys.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Lr(e,"w")){const r=qa(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();Kn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Zq(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=hR)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=Jq(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),ce(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+sn(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):sb("Unrecognized action received from server: "+sn(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ce(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=cd,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=cd,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>fie&&(this.reconnectDelay_=cd),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*hie)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+ys.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},c=function(d){ce(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?vn("getToken() completed but was canceled"):(vn("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,a=new sie(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,f=>{Kn(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(pie)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&Kn(d),l())}}}interrupt(e){vn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){vn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],sg(this.interruptReasons_)&&(this.reconnectDelay_=cd,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>Qx(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new pt(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){vn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=fR&&(this.reconnectDelay_=hR,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){vn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=fR&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+nU.replace(/\./g,"-")]=1,YS()?e["framework.cordova"]=1:zy()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Lg.getInstance().currentlyOnline();return sg(this.interruptReasons_)&&e}}ys.nextPersistentConnectionId_=0;ys.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Je(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Je($o,e),i=new Je($o,n);return this.compare(r,i)!==0}minPost(){return Je.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hp;class RU extends Jv{static get __EMPTY_NODE(){return Hp}static set __EMPTY_NODE(e){Hp=e}compare(e,n){return Cl(e.name,n.name)}isDefinedOn(e){throw mu("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Je.MIN}maxPost(){return new Je(Cs,Hp)}makePost(e,n){return ce(typeof e=="string","KeyIndex indexValue must always be a string."),new Je(e,Hp)}toString(){return".key"}}const Vi=new RU;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class yn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??yn.RED,this.left=i??yr.EMPTY_NODE,this.right=s??yr.EMPTY_NODE}copy(e,n,r,i,s){return new yn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return yr.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return yr.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,yn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,yn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}yn.RED=!0;yn.BLACK=!1;class mie{copy(e,n,r,i,s){return this}insert(e,n,r){return new yn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class yr{constructor(e,n=yr.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new yr(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,yn.BLACK,null,null))}remove(e){return new yr(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,yn.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Gp(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Gp(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Gp(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Gp(this.root_,null,this.comparator_,!0,e)}}yr.EMPTY_NODE=new mie;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gie(t,e){return Cl(t.name,e.name)}function nT(t,e){return Cl(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ab;function yie(t){ab=t}const NU=function(t){return typeof t=="number"?"number:"+cU(t):"string:"+t},PU=function(t){if(t.isLeafNode()){const e=t.val();ce(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Lr(e,".sv"),"Priority must be a string or number.")}else ce(t===ab||t.isEmpty(),"priority of unexpected type.");ce(t===ab||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pR;class dn{constructor(e,n=dn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,ce(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),PU(this.priorityNode_)}static set __childrenNodeConstructor(e){pR=e}static get __childrenNodeConstructor(){return pR}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new dn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:dn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Xe(e)?this:Ye(e)===".priority"?this.priorityNode_:dn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:dn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Ye(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(ce(r!==".priority"||Fo(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,dn.__childrenNodeConstructor.EMPTY_NODE.updateChild(vt(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+NU(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=cU(this.value_):e+=this.value_,this.lazyHash_=oU(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===dn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof dn.__childrenNodeConstructor?-1:(ce(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=dn.VALUE_TYPE_ORDER.indexOf(n),s=dn.VALUE_TYPE_ORDER.indexOf(r);return ce(i>=0,"Unknown leaf type: "+n),ce(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}dn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let DU,OU;function vie(t){DU=t}function _ie(t){OU=t}class wie extends Jv{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Cl(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Je.MIN}maxPost(){return new Je(Cs,new dn("[PRIORITY-POST]",OU))}makePost(e,n){const r=DU(e);return new Je(n,new dn("[PRIORITY-POST]",r))}toString(){return".priority"}}const xt=new wie;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bie=Math.log(2);class Sie{constructor(e){const n=s=>parseInt(Math.log(s)/bie,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Mg=function(t,e,n,r){t.sort(e);const i=function(l,c){const u=c-l;let d,h;if(u===0)return null;if(u===1)return d=t[l],h=n?n(d):d,new yn(h,d.node,yn.BLACK,null,null);{const f=parseInt(u/2,10)+l,p=i(l,f),y=i(f+1,c);return d=t[f],h=n?n(d):d,new yn(h,d.node,yn.BLACK,p,y)}},s=function(l){let c=null,u=null,d=t.length;const h=function(p,y){const w=d-p,m=d;d-=p;const g=i(w+1,m),_=t[w],S=n?n(_):_;f(new yn(S,_.node,y,null,g))},f=function(p){c?(c.left=p,c=p):(u=p,c=p)};for(let p=0;p<l.count;++p){const y=l.nextBitIsOne(),w=Math.pow(2,l.count-(p+1));y?h(w,yn.BLACK):(h(w,yn.BLACK),h(w,yn.RED))}return u},o=new Sie(t.length),a=s(o);return new yr(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $0;const Ul={};class ds{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return ce(Ul&&xt,"ChildrenNode.ts has not been loaded"),$0=$0||new ds({".priority":Ul},{".priority":xt}),$0}get(e){const n=qa(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof yr?n:null}hasIndex(e){return Lr(this.indexSet_,e.toString())}addIndex(e,n){ce(e!==Vi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(Je.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Mg(r,e.getCompare()):a=Ul;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new ds(u,c)}addToIndexes(e,n){const r=og(this.indexes_,(i,s)=>{const o=qa(this.indexSet_,s);if(ce(o,"Missing index implementation for "+s),i===Ul)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(Je.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Mg(a,o.getCompare())}else return Ul;else{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new Je(e.name,a))),l.insert(e,e.node)}});return new ds(r,this.indexSet_)}removeFromIndexes(e,n){const r=og(this.indexes_,i=>{if(i===Ul)return i;{const s=n.get(e.name);return s?i.remove(new Je(e.name,s)):i}});return new ds(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ud;class Ue{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&PU(this.priorityNode_),this.children_.isEmpty()&&ce(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ud||(ud=new Ue(new yr(nT),null,ds.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ud}updatePriority(e){return this.children_.isEmpty()?this:new Ue(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?ud:n}}getChild(e){const n=Ye(e);return n===null?this:this.getImmediateChild(n).getChild(vt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(ce(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Je(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?ud:this.priorityNode_;return new Ue(i,o,s)}}updateChild(e,n){const r=Ye(e);if(r===null)return n;{ce(Ye(e)!==".priority"||Fo(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(vt(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(xt,(o,a)=>{n[o]=a.val(e),r++,s&&Ue.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+NU(this.getPriority().val())+":"),this.forEachChild(xt,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":oU(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new Je(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Je(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Je(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,Je.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,Je.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ep?-1:0}withIndex(e){if(e===Vi||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Ue(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Vi||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(xt),i=n.getIterator(xt);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Vi?null:this.indexMap_.get(e.toString())}}Ue.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Eie extends Ue{constructor(){super(new yr(nT),Ue.EMPTY_NODE,ds.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ue.EMPTY_NODE}isEmpty(){return!1}}const ep=new Eie;Object.defineProperties(Je,{MIN:{value:new Je($o,Ue.EMPTY_NODE)},MAX:{value:new Je(Cs,ep)}});RU.__EMPTY_NODE=Ue.EMPTY_NODE;dn.__childrenNodeConstructor=Ue;yie(ep);_ie(ep);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xie=!0;function jt(t,e=null){if(t===null)return Ue.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),ce(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new dn(n,jt(e))}if(!(t instanceof Array)&&xie){const n=[];let r=!1;if(En(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=jt(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new Je(o,l)))}}),n.length===0)return Ue.EMPTY_NODE;const s=Mg(n,gie,o=>o.name,nT);if(r){const o=Mg(n,xt.getCompare());return new Ue(s,jt(e),new ds({".priority":o},{".priority":xt}))}else return new Ue(s,jt(e),ds.Default)}else{let n=Ue.EMPTY_NODE;return En(t,(r,i)=>{if(Lr(t,r)&&r.substring(0,1)!=="."){const s=jt(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(jt(e))}}vie(jt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT extends Jv{constructor(e){super(),this.indexPath_=e,ce(!Xe(e)&&Ye(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Cl(e.name,n.name):s}makePost(e,n){const r=jt(e),i=Ue.EMPTY_NODE.updateChild(this.indexPath_,r);return new Je(n,i)}maxPost(){const e=Ue.EMPTY_NODE.updateChild(this.indexPath_,ep);return new Je(Cs,e)}toString(){return Xh(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tie extends Jv{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Cl(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Je.MIN}maxPost(){return Je.MAX}makePost(e,n){const r=jt(e);return new Je(n,r)}toString(){return".value"}}const iT=new Tie;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LU(t){return{type:"value",snapshotNode:t}}function iu(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Jh(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Zh(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Iie(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){ce(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Jh(n,a)):ce(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(iu(n,r)):o.trackChildChange(Zh(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(xt,(i,s)=>{n.hasChild(i)||r.trackChildChange(Jh(i,s))}),n.isLeafNode()||n.forEachChild(xt,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Zh(i,s,o))}else r.trackChildChange(iu(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?Ue.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e){this.indexedFilter_=new sT(e.getIndex()),this.index_=e.getIndex(),this.startPost_=ef.getStartPost_(e),this.endPost_=ef.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new Je(n,r))||(r=Ue.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=Ue.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(Ue.EMPTY_NODE);const s=this;return n.forEachChild(xt,(o,a)=>{s.matches(new Je(o,a))||(i=i.updateImmediateChild(o,Ue.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cie{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new ef(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new Je(n,r))||(r=Ue.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=Ue.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=Ue.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(Ue.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,Ue.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();const a=e;ce(a.numChildren()===this.limit_,"");const l=new Je(n,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(n)){const d=a.getImmediateChild(n);let h=i.getChildAfterChild(this.index_,c,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);const f=h==null?1:o(h,l);if(u&&!r.isEmpty()&&f>=0)return s!=null&&s.trackChildChange(Zh(n,r,d)),a.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(Jh(n,d));const y=a.updateImmediateChild(n,Ue.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(s!=null&&s.trackChildChange(iu(h.name,h.node)),y.updateImmediateChild(h.name,h.node)):y}}else return r.isEmpty()?e:u&&o(c,l)>=0?(s!=null&&(s.trackChildChange(Jh(c.name,c.node)),s.trackChildChange(iu(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(c.name,Ue.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=xt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ce(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ce(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:$o}hasEnd(){return this.endSet_}getIndexEndValue(){return ce(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ce(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Cs}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ce(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===xt}copy(){const e=new Zv;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function kie(t){return t.loadsAllData()?new sT(t.getIndex()):t.hasLimit()?new Cie(t):new ef(t)}function Aie(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function Rie(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function lb(t,e,n){const r=t.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Nie(t,e,n){let r;return t.index_===Vi||n?r=lb(t,e,n):r=lb(t,e,Cs),r.startAfterSet_=!0,r}function cb(t,e,n){const r=t.copy();return r.endSet_=!0,e===void 0&&(e=null),r.indexEndValue_=e,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Pie(t,e,n){let r;return t.index_===Vi||n?r=cb(t,e,n):r=cb(t,e,$o),r.endBeforeSet_=!0,r}function e_(t,e){const n=t.copy();return n.index_=e,n}function mR(t){const e={};if(t.isDefault())return e;let n;if(t.index_===xt?n="$priority":t.index_===iT?n="$value":t.index_===Vi?n="$key":(ce(t.index_ instanceof rT,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=sn(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=sn(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+sn(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=sn(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+sn(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function gR(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==xt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g extends IU{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Zf("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(ce(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=$g.getListenId_(e,r),a={};this.listens_[o]=a;const l=mR(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let d=u;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(s,d,!1,r),qa(this.listens_,o)===a){let h;c?c===401?h="permission_denied":h="rest_error:"+c:h="ok",i(h,null)}})}unlisten(e,n){const r=$g.getListenId_(e,n);delete this.listens_[r]}get(e){const n=mR(e._queryParams),r=e._path.toString(),i=new hr;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+_l(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=xh(a.responseText)}catch{Kn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&Kn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Die{constructor(){this.rootNode_=Ue.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fg(){return{value:null,children:new Map}}function Du(t,e,n){if(Xe(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Ye(e);t.children.has(r)||t.children.set(r,Fg());const i=t.children.get(r);e=vt(e),Du(i,e,n)}}function ub(t,e){if(Xe(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(xt,(r,i)=>{Du(t,new pt(r),i)}),ub(t,e)}}else if(t.children.size>0){const n=Ye(e);return e=vt(e),t.children.has(n)&&ub(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function db(t,e,n){t.value!==null?n(e,t.value):Oie(t,(r,i)=>{const s=new pt(e.toString()+"/"+r);db(i,s,n)})}function Oie(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lie{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&En(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=10*1e3,Mie=30*1e3,$ie=5*60*1e3;class Fie{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Lie(e);const r=yR+(Mie-yR)*Math.random();Xd(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;En(e,(i,s)=>{s>0&&Lr(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Xd(this.reportStats_.bind(this),Math.floor(Math.random()*2*$ie))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pi;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(pi||(pi={}));function oT(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function aT(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function lT(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=pi.ACK_USER_WRITE,this.source=oT()}operationForChild(e){if(Xe(this.path)){if(this.affectedTree.value!=null)return ce(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new pt(e));return new Ug(ht(),n,this.revert)}}else return ce(Ye(this.path)===e,"operationForChild called for unrelated child."),new Ug(vt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,n){this.source=e,this.path=n,this.type=pi.LISTEN_COMPLETE}operationForChild(e){return Xe(this.path)?new tf(this.source,ht()):new tf(this.source,vt(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=pi.OVERWRITE}operationForChild(e){return Xe(this.path)?new cl(this.source,ht(),this.snap.getImmediateChild(e)):new cl(this.source,vt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=pi.MERGE}operationForChild(e){if(Xe(this.path)){const n=this.children.subtree(new pt(e));return n.isEmpty()?null:n.value?new cl(this.source,ht(),n.value):new su(this.source,ht(),n)}else return ce(Ye(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new su(this.source,vt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Xe(e))return this.isFullyInitialized()&&!this.filtered_;const n=Ye(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uie{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function jie(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(Iie(o.childName,o.snapshotNode))}),dd(t,i,"child_removed",e,r,n),dd(t,i,"child_added",e,r,n),dd(t,i,"child_moved",s,r,n),dd(t,i,"child_changed",e,r,n),dd(t,i,"value",e,r,n),i}function dd(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,l)=>Bie(t,a,l)),o.forEach(a=>{const l=Vie(t,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function Vie(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Bie(t,e,n){if(e.childName==null||n.childName==null)throw mu("Should only compare child_ events.");const r=new Je(e.childName,e.snapshotNode),i=new Je(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t_(t,e){return{eventCache:t,serverCache:e}}function Jd(t,e,n,r){return t_(new Uo(e,n,r),t.serverCache)}function MU(t,e,n,r){return t_(t.eventCache,new Uo(e,n,r))}function jg(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ul(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let F0;const zie=()=>(F0||(F0=new yr(Tre)),F0);class bt{constructor(e,n=zie()){this.value=e,this.children=n}static fromObject(e){let n=new bt(null);return En(e,(r,i)=>{n=n.set(new pt(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:ht(),value:this.value};if(Xe(e))return null;{const r=Ye(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(vt(e),n);return s!=null?{path:$t(new pt(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Xe(e))return this;{const n=Ye(e),r=this.children.get(n);return r!==null?r.subtree(vt(e)):new bt(null)}}set(e,n){if(Xe(e))return new bt(n,this.children);{const r=Ye(e),s=(this.children.get(r)||new bt(null)).set(vt(e),n),o=this.children.insert(r,s);return new bt(this.value,o)}}remove(e){if(Xe(e))return this.children.isEmpty()?new bt(null):new bt(null,this.children);{const n=Ye(e),r=this.children.get(n);if(r){const i=r.remove(vt(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new bt(null):new bt(this.value,s)}else return this}}get(e){if(Xe(e))return this.value;{const n=Ye(e),r=this.children.get(n);return r?r.get(vt(e)):null}}setTree(e,n){if(Xe(e))return n;{const r=Ye(e),s=(this.children.get(r)||new bt(null)).setTree(vt(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new bt(this.value,o)}}fold(e){return this.fold_(ht(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_($t(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,ht(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(Xe(e))return null;{const s=Ye(e),o=this.children.get(s);return o?o.findOnPath_(vt(e),$t(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ht(),n)}foreachOnPath_(e,n,r){if(Xe(e))return this;{this.value&&r(n,this.value);const i=Ye(e),s=this.children.get(i);return s?s.foreachOnPath_(vt(e),$t(n,i),r):new bt(null)}}foreach(e){this.foreach_(ht(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_($t(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this.writeTree_=e}static empty(){return new yi(new bt(null))}}function Zd(t,e,n){if(Xe(e))return new yi(new bt(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=nr(i,e);return s=s.updateChild(o,n),new yi(t.writeTree_.set(i,s))}else{const i=new bt(n),s=t.writeTree_.setTree(e,i);return new yi(s)}}}function hb(t,e,n){let r=t;return En(n,(i,s)=>{r=Zd(r,$t(e,i),s)}),r}function vR(t,e){if(Xe(e))return yi.empty();{const n=t.writeTree_.setTree(e,new bt(null));return new yi(n)}}function fb(t,e){return kl(t,e)!=null}function kl(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(nr(n.path,e)):null}function _R(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(xt,(r,i)=>{e.push(new Je(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Je(r,i.value))}),e}function vo(t,e){if(Xe(e))return t;{const n=kl(t,e);return n!=null?new yi(new bt(n)):new yi(t.writeTree_.subtree(e))}}function pb(t){return t.writeTree_.isEmpty()}function ou(t,e){return $U(ht(),t.writeTree_,e)}function $U(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(ce(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=$U($t(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild($t(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_(t,e){return VU(e,t)}function Wie(t,e,n,r,i){ce(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Zd(t.visibleWrites,e,n)),t.lastWriteId=r}function Hie(t,e,n,r){ce(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=hb(t.visibleWrites,e,n),t.lastWriteId=r}function Gie(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function qie(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);ce(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&Kie(a,r.path)?i=!1:Kr(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return Qie(t),!0;if(r.snap)t.visibleWrites=vR(t.visibleWrites,r.path);else{const a=r.children;En(a,l=>{t.visibleWrites=vR(t.visibleWrites,$t(r.path,l))})}return!0}else return!1}function Kie(t,e){if(t.snap)return Kr(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Kr($t(t.path,n),e))return!0;return!1}function Qie(t){t.visibleWrites=FU(t.allWrites,Yie,ht()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Yie(t){return t.visible}function FU(t,e,n){let r=yi.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)Kr(n,o)?(a=nr(n,o),r=Zd(r,a,s.snap)):Kr(o,n)&&(a=nr(o,n),r=Zd(r,ht(),s.snap.getChild(a)));else if(s.children){if(Kr(n,o))a=nr(n,o),r=hb(r,a,s.children);else if(Kr(o,n))if(a=nr(o,n),Xe(a))r=hb(r,ht(),s.children);else{const l=qa(s.children,Ye(a));if(l){const c=l.getChild(vt(a));r=Zd(r,ht(),c)}}}else throw mu("WriteRecord should have .snap or .children")}}return r}function UU(t,e,n,r,i){if(!r&&!i){const s=kl(t.visibleWrites,e);if(s!=null)return s;{const o=vo(t.visibleWrites,e);if(pb(o))return n;if(n==null&&!fb(o,ht()))return null;{const a=n||Ue.EMPTY_NODE;return ou(o,a)}}}else{const s=vo(t.visibleWrites,e);if(!i&&pb(s))return n;if(!i&&n==null&&!fb(s,ht()))return null;{const o=function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(Kr(c.path,e)||Kr(e,c.path))},a=FU(t.allWrites,o,e),l=n||Ue.EMPTY_NODE;return ou(a,l)}}}function Xie(t,e,n){let r=Ue.EMPTY_NODE;const i=kl(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(xt,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=vo(t.visibleWrites,e);return n.forEachChild(xt,(o,a)=>{const l=ou(vo(s,new pt(o)),a);r=r.updateImmediateChild(o,l)}),_R(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=vo(t.visibleWrites,e);return _R(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function Jie(t,e,n,r,i){ce(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=$t(e,n);if(fb(t.visibleWrites,s))return null;{const o=vo(t.visibleWrites,s);return pb(o)?i.getChild(n):ou(o,i.getChild(n))}}function Zie(t,e,n,r){const i=$t(e,n),s=kl(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=vo(t.visibleWrites,i);return ou(o,r.getNode().getImmediateChild(n))}else return null}function ese(t,e){return kl(t.visibleWrites,e)}function tse(t,e,n,r,i,s,o){let a;const l=vo(t.visibleWrites,e),c=kl(l,ht());if(c!=null)a=c;else if(n!=null)a=ou(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=h.getNext();for(;f&&u.length<i;)d(f,r)!==0&&u.push(f),f=h.getNext();return u}else return[]}function nse(){return{visibleWrites:yi.empty(),allWrites:[],lastWriteId:-1}}function Vg(t,e,n,r){return UU(t.writeTree,t.treePath,e,n,r)}function cT(t,e){return Xie(t.writeTree,t.treePath,e)}function wR(t,e,n,r){return Jie(t.writeTree,t.treePath,e,n,r)}function Bg(t,e){return ese(t.writeTree,$t(t.treePath,e))}function rse(t,e,n,r,i,s){return tse(t.writeTree,t.treePath,e,n,r,i,s)}function uT(t,e,n){return Zie(t.writeTree,t.treePath,e,n)}function jU(t,e){return VU($t(t.treePath,e),t.writeTree)}function VU(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ise{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;ce(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),ce(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Zh(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Jh(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,iu(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Zh(r,e.snapshotNode,i.oldSnap));else throw mu("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sse{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const BU=new sse;class dT{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Uo(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return uT(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ul(this.viewCache_),s=rse(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ose(t){return{filter:t}}function ase(t,e){ce(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),ce(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function lse(t,e,n,r,i){const s=new ise;let o,a;if(n.type===pi.OVERWRITE){const c=n;c.source.fromUser?o=mb(t,e,c.path,c.snap,r,i,s):(ce(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!Xe(c.path),o=zg(t,e,c.path,c.snap,r,i,a,s))}else if(n.type===pi.MERGE){const c=n;c.source.fromUser?o=use(t,e,c.path,c.children,r,i,s):(ce(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=gb(t,e,c.path,c.children,r,i,a,s))}else if(n.type===pi.ACK_USER_WRITE){const c=n;c.revert?o=fse(t,e,c.path,r,i,s):o=dse(t,e,c.path,c.affectedTree,r,i,s)}else if(n.type===pi.LISTEN_COMPLETE)o=hse(t,e,n.path,r,s);else throw mu("Unknown operation type: "+n.type);const l=s.getChanges();return cse(e,o,l),{viewCache:o,changes:l}}function cse(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=jg(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(LU(jg(e)))}}function zU(t,e,n,r,i,s){const o=e.eventCache;if(Bg(r,n)!=null)return e;{let a,l;if(Xe(n))if(ce(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=ul(e),u=c instanceof Ue?c:Ue.EMPTY_NODE,d=cT(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const c=Vg(r,ul(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=Ye(n);if(c===".priority"){ce(Fo(n)===1,"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const d=wR(r,n,u,l);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{const u=vt(n);let d;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const h=wR(r,n,o.getNode(),l);h!=null?d=o.getNode().getImmediateChild(c).updateChild(u,h):d=o.getNode().getImmediateChild(c)}else d=uT(r,c,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),c,d,u,i,s):a=o.getNode()}}return Jd(e,a,o.isFullyInitialized()||Xe(n),t.filter.filtersNodes())}}function zg(t,e,n,r,i,s,o,a){const l=e.serverCache;let c;const u=o?t.filter:t.filter.getIndexedFilter();if(Xe(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const f=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),f,null)}else{const f=Ye(n);if(!l.isCompleteForPath(n)&&Fo(n)>1)return e;const p=vt(n),w=l.getNode().getImmediateChild(f).updateChild(p,r);f===".priority"?c=u.updatePriority(l.getNode(),w):c=u.updateChild(l.getNode(),f,w,p,BU,null)}const d=MU(e,c,l.isFullyInitialized()||Xe(n),u.filtersNodes()),h=new dT(i,d,s);return zU(t,d,n,i,h,a)}function mb(t,e,n,r,i,s,o){const a=e.eventCache;let l,c;const u=new dT(i,e,s);if(Xe(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=Jd(e,c,!0,t.filter.filtersNodes());else{const d=Ye(n);if(d===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),l=Jd(e,c,a.isFullyInitialized(),a.isFiltered());else{const h=vt(n),f=a.getNode().getImmediateChild(d);let p;if(Xe(h))p=r;else{const y=u.getCompleteChild(d);y!=null?Zx(h)===".priority"&&y.getChild(kU(h)).isEmpty()?p=y:p=y.updateChild(h,r):p=Ue.EMPTY_NODE}if(f.equals(p))l=e;else{const y=t.filter.updateChild(a.getNode(),d,p,h,u,o);l=Jd(e,y,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function bR(t,e){return t.eventCache.isCompleteForChild(e)}function use(t,e,n,r,i,s,o){let a=e;return r.foreach((l,c)=>{const u=$t(n,l);bR(e,Ye(u))&&(a=mb(t,a,u,c,i,s,o))}),r.foreach((l,c)=>{const u=$t(n,l);bR(e,Ye(u))||(a=mb(t,a,u,c,i,s,o))}),a}function SR(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function gb(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;Xe(n)?c=r:c=new bt(null).setTree(n,r);const u=e.serverCache.getNode();return c.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const f=e.serverCache.getNode().getImmediateChild(d),p=SR(t,f,h);l=zg(t,l,new pt(d),p,i,s,o,a)}}),c.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){const p=e.serverCache.getNode().getImmediateChild(d),y=SR(t,p,h);l=zg(t,l,new pt(d),y,i,s,o,a)}}),l}function dse(t,e,n,r,i,s,o){if(Bg(i,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(Xe(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return zg(t,e,n,l.getNode().getChild(n),i,s,a,o);if(Xe(n)){let c=new bt(null);return l.getNode().forEachChild(Vi,(u,d)=>{c=c.set(new pt(u),d)}),gb(t,e,n,c,i,s,a,o)}else return e}else{let c=new bt(null);return r.foreach((u,d)=>{const h=$t(n,u);l.isCompleteForPath(h)&&(c=c.set(u,l.getNode().getChild(h)))}),gb(t,e,n,c,i,s,a,o)}}function hse(t,e,n,r,i){const s=e.serverCache,o=MU(e,s.getNode(),s.isFullyInitialized()||Xe(n),s.isFiltered());return zU(t,o,n,r,BU,i)}function fse(t,e,n,r,i,s){let o;if(Bg(r,n)!=null)return e;{const a=new dT(r,e,i),l=e.eventCache.getNode();let c;if(Xe(n)||Ye(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Vg(r,ul(e));else{const d=e.serverCache.getNode();ce(d instanceof Ue,"serverChildren would be complete if leaf node"),u=cT(r,d)}u=u,c=t.filter.updateFullNode(l,u,s)}else{const u=Ye(n);let d=uT(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=l.getImmediateChild(u)),d!=null?c=t.filter.updateChild(l,u,d,vt(n),a,s):e.eventCache.getNode().hasChild(u)?c=t.filter.updateChild(l,u,Ue.EMPTY_NODE,vt(n),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Vg(r,ul(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||Bg(r,ht())!=null,Jd(e,c,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pse{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new sT(r.getIndex()),s=kie(r);this.processor_=ose(s);const o=n.serverCache,a=n.eventCache,l=i.updateFullNode(Ue.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(Ue.EMPTY_NODE,a.getNode(),null),u=new Uo(l,o.isFullyInitialized(),i.filtersNodes()),d=new Uo(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=t_(d,u),this.eventGenerator_=new Uie(this.query_)}get query(){return this.query_}}function mse(t){return t.viewCache_.serverCache.getNode()}function gse(t){return jg(t.viewCache_)}function yse(t,e){const n=ul(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Xe(e)&&!n.getImmediateChild(Ye(e)).isEmpty())?n.getChild(e):null}function ER(t){return t.eventRegistrations_.length===0}function vse(t,e){t.eventRegistrations_.push(e)}function xR(t,e,n){const r=[];if(n){ce(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function TR(t,e,n,r){e.type===pi.MERGE&&e.source.queryId!==null&&(ce(ul(t.viewCache_),"We should always have a full cache before handling merges"),ce(jg(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=lse(t.processor_,i,e,n,r);return ase(t.processor_,s.viewCache),ce(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,WU(t,s.changes,s.viewCache.eventCache.getNode(),null)}function _se(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(xt,(s,o)=>{r.push(iu(s,o))}),n.isFullyInitialized()&&r.push(LU(n.getNode())),WU(t,r,n.getNode(),e)}function WU(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return jie(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wg;class HU{constructor(){this.views=new Map}}function wse(t){ce(!Wg,"__referenceConstructor has already been defined"),Wg=t}function bse(){return ce(Wg,"Reference.ts has not been loaded"),Wg}function Sse(t){return t.views.size===0}function hT(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return ce(s!=null,"SyncTree gave us an op for an invalid query."),TR(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(TR(o,e,n,r));return s}}function GU(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=Vg(n,i?r:null),l=!1;a?l=!0:r instanceof Ue?(a=cT(n,r),l=!1):(a=Ue.EMPTY_NODE,l=!1);const c=t_(new Uo(a,l,!1),new Uo(r,i,!1));return new pse(e,c)}return o}function Ese(t,e,n,r,i,s){const o=GU(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),vse(o,n),_se(o,n)}function xse(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const a=jo(t);if(i==="default")for(const[l,c]of t.views.entries())o=o.concat(xR(c,n,r)),ER(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const l=t.views.get(i);l&&(o=o.concat(xR(l,n,r)),ER(l)&&(t.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!jo(t)&&s.push(new(bse())(e._repo,e._path)),{removed:s,events:o}}function qU(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function _o(t,e){let n=null;for(const r of t.views.values())n=n||yse(r,e);return n}function KU(t,e){if(e._queryParams.loadsAllData())return r_(t);{const r=e._queryIdentifier;return t.views.get(r)}}function QU(t,e){return KU(t,e)!=null}function jo(t){return r_(t)!=null}function r_(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hg;function Tse(t){ce(!Hg,"__referenceConstructor has already been defined"),Hg=t}function Ise(){return ce(Hg,"Reference.ts has not been loaded"),Hg}let Cse=1;class IR{constructor(e){this.listenProvider_=e,this.syncPointTree_=new bt(null),this.pendingWriteTree_=nse(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function fT(t,e,n,r,i){return Wie(t.pendingWriteTree_,e,n,r,i),i?Ou(t,new cl(oT(),e,n)):[]}function kse(t,e,n,r){Hie(t.pendingWriteTree_,e,n,r);const i=bt.fromObject(n);return Ou(t,new su(oT(),e,i))}function no(t,e,n=!1){const r=Gie(t.pendingWriteTree_,e);if(qie(t.pendingWriteTree_,e)){let s=new bt(null);return r.snap!=null?s=s.set(ht(),!0):En(r.children,o=>{s=s.set(new pt(o),!0)}),Ou(t,new Ug(r.path,s,n))}else return[]}function tp(t,e,n){return Ou(t,new cl(aT(),e,n))}function Ase(t,e,n){const r=bt.fromObject(n);return Ou(t,new su(aT(),e,r))}function Rse(t,e){return Ou(t,new tf(aT(),e))}function Nse(t,e,n){const r=pT(t,n);if(r){const i=mT(r),s=i.path,o=i.queryId,a=nr(s,e),l=new tf(lT(o),a);return gT(t,s,l)}else return[]}function Gg(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let a=[];if(o&&(e._queryIdentifier==="default"||QU(o,e))){const l=xse(o,e,n,r);Sse(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const u=c.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(h,f)=>jo(f));if(u&&!d){const h=t.syncPointTree_.subtree(s);if(!h.isEmpty()){const f=Ose(h);for(let p=0;p<f.length;++p){const y=f[p],w=y.query,m=ZU(t,y);t.listenProvider_.startListening(eh(w),nf(t,w),m.hashFn,m.onComplete)}}}!d&&c.length>0&&!r&&(u?t.listenProvider_.stopListening(eh(e),null):c.forEach(h=>{const f=t.queryToTagMap.get(s_(h));t.listenProvider_.stopListening(eh(h),f)}))}Lse(t,c)}return a}function YU(t,e,n,r){const i=pT(t,r);if(i!=null){const s=mT(i),o=s.path,a=s.queryId,l=nr(o,e),c=new cl(lT(a),l,n);return gT(t,o,c)}else return[]}function Pse(t,e,n,r){const i=pT(t,r);if(i){const s=mT(i),o=s.path,a=s.queryId,l=nr(o,e),c=bt.fromObject(n),u=new su(lT(a),l,c);return gT(t,o,u)}else return[]}function yb(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(h,f)=>{const p=nr(h,i);s=s||_o(f,p),o=o||jo(f)});let a=t.syncPointTree_.get(i);a?(o=o||jo(a),s=s||_o(a,ht())):(a=new HU,t.syncPointTree_=t.syncPointTree_.set(i,a));let l;s!=null?l=!0:(l=!1,s=Ue.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((f,p)=>{const y=_o(p,ht());y&&(s=s.updateImmediateChild(f,y))}));const c=QU(a,e);if(!c&&!e._queryParams.loadsAllData()){const h=s_(e);ce(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const f=Mse();t.queryToTagMap.set(h,f),t.tagToQueryMap.set(f,h)}const u=n_(t.pendingWriteTree_,i);let d=Ese(a,e,n,u,s,l);if(!c&&!o&&!r){const h=KU(a,e);d=d.concat($se(t,e,h))}return d}function i_(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=nr(o,e),c=_o(a,l);if(c)return c});return UU(i,e,s,n,!0)}function Dse(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(c,u)=>{const d=nr(c,n);r=r||_o(u,d)});let i=t.syncPointTree_.get(n);i?r=r||_o(i,ht()):(i=new HU,t.syncPointTree_=t.syncPointTree_.set(n,i));const s=r!=null,o=s?new Uo(r,!0,!1):null,a=n_(t.pendingWriteTree_,e._path),l=GU(i,e,a,s?o.getNode():Ue.EMPTY_NODE,s);return gse(l)}function Ou(t,e){return XU(e,t.syncPointTree_,null,n_(t.pendingWriteTree_,ht()))}function XU(t,e,n,r){if(Xe(t.path))return JU(t,e,n,r);{const i=e.get(ht());n==null&&i!=null&&(n=_o(i,ht()));let s=[];const o=Ye(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,u=jU(r,o);s=s.concat(XU(a,l,c,u))}return i&&(s=s.concat(hT(i,t,r,n))),s}}function JU(t,e,n,r){const i=e.get(ht());n==null&&i!=null&&(n=_o(i,ht()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=jU(r,o),u=t.operationForChild(o);u&&(s=s.concat(JU(u,a,l,c)))}),i&&(s=s.concat(hT(i,t,r,n))),s}function ZU(t,e){const n=e.query,r=nf(t,n);return{hashFn:()=>(mse(e)||Ue.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?Nse(t,n._path,r):Rse(t,n._path);{const s=kre(i,n);return Gg(t,n,null,s)}}}}function nf(t,e){const n=s_(e);return t.queryToTagMap.get(n)}function s_(t){return t._path.toString()+"$"+t._queryIdentifier}function pT(t,e){return t.tagToQueryMap.get(e)}function mT(t){const e=t.indexOf("$");return ce(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new pt(t.substr(0,e))}}function gT(t,e,n){const r=t.syncPointTree_.get(e);ce(r,"Missing sync point for query tag that we're tracking");const i=n_(t.pendingWriteTree_,e);return hT(r,n,i,null)}function Ose(t){return t.fold((e,n,r)=>{if(n&&jo(n))return[r_(n)];{let i=[];return n&&(i=qU(n)),En(r,(s,o)=>{i=i.concat(o)}),i}})}function eh(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Ise())(t._repo,t._path):t}function Lse(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=s_(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function Mse(){return Cse++}function $se(t,e,n){const r=e._path,i=nf(t,e),s=ZU(t,n),o=t.listenProvider_.startListening(eh(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)ce(!jo(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,u,d)=>{if(!Xe(c)&&u&&jo(u))return[r_(u).query];{let h=[];return u&&(h=h.concat(qU(u).map(f=>f.query))),En(d,(f,p)=>{h=h.concat(p)}),h}});for(let c=0;c<l.length;++c){const u=l[c];t.listenProvider_.stopListening(eh(u),nf(t,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new yT(n)}node(){return this.node_}}class vT{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=$t(this.path_,e);return new vT(this.syncTree_,n)}node(){return i_(this.syncTree_,this.path_)}}const Fse=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},CR=function(t,e,n){if(!t||typeof t!="object")return t;if(ce(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Use(t[".sv"],e,n);if(typeof t[".sv"]=="object")return jse(t[".sv"],e);ce(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Use=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:ce(!1,"Unexpected server value: "+t)}},jse=function(t,e,n){t.hasOwnProperty("increment")||ce(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&ce(!1,"Unexpected increment value: "+r);const i=e.node();if(ce(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},ej=function(t,e,n,r){return wT(e,new vT(n,t),r)},_T=function(t,e,n){return wT(t,new yT(e),n)};function wT(t,e,n){const r=t.getPriority().val(),i=CR(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=CR(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new dn(a,jt(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new dn(i))),o.forEachChild(xt,(a,l)=>{const c=wT(l,e.getImmediateChild(a),n);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function o_(t,e){let n=e instanceof pt?e:new pt(e),r=t,i=Ye(n);for(;i!==null;){const s=qa(r.node.children,i)||{children:{},childCount:0};r=new bT(i,r,s),n=vt(n),i=Ye(n)}return r}function Al(t){return t.node.value}function ST(t,e){t.node.value=e,vb(t)}function tj(t){return t.node.childCount>0}function Vse(t){return Al(t)===void 0&&!tj(t)}function a_(t,e){En(t.node.children,(n,r)=>{e(new bT(n,t,r))})}function nj(t,e,n,r){n&&!r&&e(t),a_(t,i=>{nj(i,e,!0,r)}),n&&r&&e(t)}function Bse(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function np(t){return new pt(t.parent===null?t.name:np(t.parent)+"/"+t.name)}function vb(t){t.parent!==null&&zse(t.parent,t.name,t)}function zse(t,e,n){const r=Vse(n),i=Lr(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,vb(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,vb(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wse=/[\[\].#$\/\u0000-\u001F\u007F]/,Hse=/[\[\].#$\u0000-\u001F\u007F]/,U0=10*1024*1024,l_=function(t){return typeof t=="string"&&t.length!==0&&!Wse.test(t)},rj=function(t){return typeof t=="string"&&t.length!==0&&!Hse.test(t)},Gse=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),rj(t)},rf=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Xv(t)||t&&typeof t=="object"&&Lr(t,".sv")},Yi=function(t,e,n,r){r&&e===void 0||rp(Sr(t,"value"),e,n)},rp=function(t,e,n){const r=n instanceof pt?new lie(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+ca(r));if(typeof e=="function")throw new Error(t+"contains a function "+ca(r)+" with contents = "+e.toString());if(Xv(e))throw new Error(t+"contains "+e.toString()+" "+ca(r));if(typeof e=="string"&&e.length>U0/3&&Wy(e)>U0)throw new Error(t+"contains a string greater than "+U0+" utf8 bytes "+ca(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(En(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!l_(o)))throw new Error(t+" contains an invalid key ("+o+") "+ca(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);cie(r,o),rp(t,a,r),uie(r)}),i&&s)throw new Error(t+' contains ".value" child '+ca(r)+" in addition to actual children.")}},qse=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const s=Xh(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!l_(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(aie);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&Kr(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},ij=function(t,e,n,r){if(r&&e===void 0)return;const i=Sr(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];En(e,(o,a)=>{const l=new pt(o);if(rp(i,a,$t(n,l)),Zx(l)===".priority"&&!rf(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),qse(i,s)},ET=function(t,e,n){if(!(n&&e===void 0)){if(Xv(e))throw new Error(Sr(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!rf(e))throw new Error(Sr(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ip=function(t,e,n,r){if(!(r&&n===void 0)&&!l_(n))throw new Error(Sr(t,e)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},sf=function(t,e,n,r){if(!(r&&n===void 0)&&!rj(n))throw new Error(Sr(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Kse=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),sf(t,e,n,r)},Qr=function(t,e){if(Ye(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},sj=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!l_(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Gse(n))throw new Error(Sr(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qse{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function c_(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!eT(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function oj(t,e,n){c_(t,n),aj(t,r=>eT(r,e))}function Fr(t,e,n){c_(t,n),aj(t,r=>Kr(r,e)||Kr(e,r))}function aj(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(Yse(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Yse(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Ma&&vn("event: "+n.toString()),Pu(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lj="repo_interrupt",Xse=25;class Jse{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Qse,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Fg(),this.transactionQueueTree_=new bT,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Zse(t,e,n){if(t.stats_=Xx(t.repoInfo_),t.forceRestClient_||Pre())t.server_=new $g(t.repoInfo_,(r,i,s,o)=>{kR(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>AR(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{sn(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new ys(t.repoInfo_,e,(r,i,s,o)=>{kR(t,r,i,s,o)},r=>{AR(t,r)},r=>{eoe(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=$re(t.repoInfo_,()=>new Fie(t.stats_,t.server_)),t.infoData_=new Die,t.infoSyncTree_=new IR({startListening:(r,i,s,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=tp(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),xT(t,"connected",!1),t.serverSyncTree_=new IR({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);Fr(t.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function cj(t){const n=t.infoData_.getNode(new pt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function sp(t){return Fse({timestamp:cj(t)})}function kR(t,e,n,r,i){t.dataUpdateCount++;const s=new pt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const l=og(n,c=>jt(c));o=Pse(t.serverSyncTree_,s,l,i)}else{const l=jt(n);o=YU(t.serverSyncTree_,s,l,i)}else if(r){const l=og(n,c=>jt(c));o=Ase(t.serverSyncTree_,s,l)}else{const l=jt(n);o=tp(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=au(t,s)),Fr(t.eventQueue_,a,o)}function AR(t,e){xT(t,"connected",e),e===!1&&roe(t)}function eoe(t,e){En(e,(n,r)=>{xT(t,n,r)})}function xT(t,e,n){const r=new pt("/.info/"+e),i=jt(n);t.infoData_.updateSnapshot(r,i);const s=tp(t.infoSyncTree_,r,i);Fr(t.eventQueue_,r,s)}function u_(t){return t.nextWriteId_++}function toe(t,e,n){const r=Dse(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{const s=jt(i).withIndex(e._queryParams.getIndex());yb(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=tp(t.serverSyncTree_,e._path,s);else{const a=nf(t.serverSyncTree_,e);o=YU(t.serverSyncTree_,e._path,s,a)}return Fr(t.eventQueue_,e._path,o),Gg(t.serverSyncTree_,e,n,null,!0),s},i=>(Lu(t,"get for query "+sn(e)+" failed: "+i),Promise.reject(new Error(i))))}function TT(t,e,n,r,i){Lu(t,"set",{path:e.toString(),value:n,priority:r});const s=sp(t),o=jt(n,r),a=i_(t.serverSyncTree_,e),l=_T(o,a,s),c=u_(t),u=fT(t.serverSyncTree_,e,l,c,!0);c_(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(h,f)=>{const p=h==="ok";p||Kn("set at "+e+" failed: "+h);const y=no(t.serverSyncTree_,c,!p);Fr(t.eventQueue_,e,y),Vo(t,i,h,f)});const d=CT(t,e);au(t,d),Fr(t.eventQueue_,d,[])}function noe(t,e,n,r){Lu(t,"update",{path:e.toString(),value:n});let i=!0;const s=sp(t),o={};if(En(n,(a,l)=>{i=!1,o[a]=ej($t(e,a),jt(l),t.serverSyncTree_,s)}),i)vn("update() called with empty data.  Don't do anything."),Vo(t,r,"ok",void 0);else{const a=u_(t),l=kse(t.serverSyncTree_,e,o,a);c_(t.eventQueue_,l),t.server_.merge(e.toString(),n,(c,u)=>{const d=c==="ok";d||Kn("update at "+e+" failed: "+c);const h=no(t.serverSyncTree_,a,!d),f=h.length>0?au(t,e):e;Fr(t.eventQueue_,f,h),Vo(t,r,c,u)}),En(n,c=>{const u=CT(t,$t(e,c));au(t,u)}),Fr(t.eventQueue_,e,[])}}function roe(t){Lu(t,"onDisconnectEvents");const e=sp(t),n=Fg();db(t.onDisconnect_,ht(),(i,s)=>{const o=ej(i,s,t.serverSyncTree_,e);Du(n,i,o)});let r=[];db(n,ht(),(i,s)=>{r=r.concat(tp(t.serverSyncTree_,i,s));const o=CT(t,i);au(t,o)}),t.onDisconnect_=Fg(),Fr(t.eventQueue_,ht(),r)}function ioe(t,e,n){t.server_.onDisconnectCancel(e.toString(),(r,i)=>{r==="ok"&&ub(t.onDisconnect_,e),Vo(t,n,r,i)})}function RR(t,e,n,r){const i=jt(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(s,o)=>{s==="ok"&&Du(t.onDisconnect_,e,i),Vo(t,r,s,o)})}function soe(t,e,n,r,i){const s=jt(n,r);t.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{o==="ok"&&Du(t.onDisconnect_,e,s),Vo(t,i,o,a)})}function ooe(t,e,n,r){if(sg(n)){vn("onDisconnect().update() called with empty data.  Don't do anything."),Vo(t,r,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(i,s)=>{i==="ok"&&En(n,(o,a)=>{const l=jt(a);Du(t.onDisconnect_,$t(e,o),l)}),Vo(t,r,i,s)})}function aoe(t,e,n){let r;Ye(e._path)===".info"?r=yb(t.infoSyncTree_,e,n):r=yb(t.serverSyncTree_,e,n),oj(t.eventQueue_,e._path,r)}function _b(t,e,n){let r;Ye(e._path)===".info"?r=Gg(t.infoSyncTree_,e,n):r=Gg(t.serverSyncTree_,e,n),oj(t.eventQueue_,e._path,r)}function uj(t){t.persistentConnection_&&t.persistentConnection_.interrupt(lj)}function loe(t){t.persistentConnection_&&t.persistentConnection_.resume(lj)}function Lu(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),vn(n,...e)}function Vo(t,e,n,r){e&&Pu(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function coe(t,e,n,r,i,s){Lu(t,"transaction on "+e);const o={path:e,update:n,onComplete:r,status:null,order:sU(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=IT(t,e,void 0);o.currentInputSnapshot=a;const l=o.update(a.val());if(l===void 0)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{rp("transaction failed: Data returned ",l,o.path),o.status=0;const c=o_(t.transactionQueueTree_,e),u=Al(c)||[];u.push(o),ST(c,u);let d;typeof l=="object"&&l!==null&&Lr(l,".priority")?(d=qa(l,".priority"),ce(rf(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(i_(t.serverSyncTree_,e)||Ue.EMPTY_NODE).getPriority().val();const h=sp(t),f=jt(l,d),p=_T(f,a,h);o.currentOutputSnapshotRaw=f,o.currentOutputSnapshotResolved=p,o.currentWriteId=u_(t);const y=fT(t.serverSyncTree_,e,p,o.currentWriteId,o.applyLocally);Fr(t.eventQueue_,e,y),d_(t,t.transactionQueueTree_)}}function IT(t,e,n){return i_(t.serverSyncTree_,e,n)||Ue.EMPTY_NODE}function d_(t,e=t.transactionQueueTree_){if(e||h_(t,e),Al(e)){const n=hj(t,e);ce(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&uoe(t,np(e),n)}else tj(e)&&a_(e,n=>{d_(t,n)})}function uoe(t,e,n){const r=n.map(c=>c.currentWriteId),i=IT(t,e,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const u=n[c];ce(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=nr(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,c=>{Lu(t,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(no(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();h_(t,o_(t.transactionQueueTree_,e)),d_(t,t.transactionQueueTree_),Fr(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)Pu(d[h])}else{if(c==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Kn("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}au(t,e)}},o)}function au(t,e){const n=dj(t,e),r=np(n),i=hj(t,n);return doe(t,i,r),r}function doe(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=nr(n,l.path);let u=!1,d;if(ce(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,d=l.abortReason,i=i.concat(no(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=Xse)u=!0,d="maxretry",i=i.concat(no(t.serverSyncTree_,l.currentWriteId,!0));else{const h=IT(t,l.path,o);l.currentInputSnapshot=h;const f=e[a].update(h.val());if(f!==void 0){rp("transaction failed: Data returned ",f,l.path);let p=jt(f);typeof f=="object"&&f!=null&&Lr(f,".priority")||(p=p.updatePriority(h.getPriority()));const w=l.currentWriteId,m=sp(t),g=_T(p,h,m);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=g,l.currentWriteId=u_(t),o.splice(o.indexOf(w),1),i=i.concat(fT(t.serverSyncTree_,l.path,g,l.currentWriteId,l.applyLocally)),i=i.concat(no(t.serverSyncTree_,w,!0))}else u=!0,d="nodata",i=i.concat(no(t.serverSyncTree_,l.currentWriteId,!0))}Fr(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}h_(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Pu(r[a]);d_(t,t.transactionQueueTree_)}function dj(t,e){let n,r=t.transactionQueueTree_;for(n=Ye(e);n!==null&&Al(r)===void 0;)r=o_(r,n),e=vt(e),n=Ye(e);return r}function hj(t,e){const n=[];return fj(t,e,n),n.sort((r,i)=>r.order-i.order),n}function fj(t,e,n){const r=Al(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);a_(e,i=>{fj(t,i,n)})}function h_(t,e){const n=Al(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,ST(e,n.length>0?n:void 0)}a_(e,r=>{h_(t,r)})}function CT(t,e){const n=np(dj(t,e)),r=o_(t.transactionQueueTree_,e);return Bse(r,i=>{j0(t,i)}),j0(t,r),nj(r,i=>{j0(t,i)}),n}function j0(t,e){const n=Al(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(ce(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(ce(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(no(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?ST(e,void 0):n.length=s+1,Fr(t.eventQueue_,np(e),i);for(let o=0;o<r.length;o++)Pu(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hoe(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function foe(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Kn(`Invalid query segment '${n}' in query '${t}'`)}return e}const wb=function(t,e){const n=poe(t),r=n.namespace;n.domain==="firebase.com"&&Qi(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Qi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Ere();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new _U(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new pt(n.pathString)}},poe=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(i=hoe(t.substring(u,d)));const h=foe(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const f=e.slice(0,c);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",moe=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let i;const s=new Array(8);for(i=7;i>=0;i--)s[i]=NR.charAt(n%64),n=Math.floor(n/64);ce(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=NR.charAt(e[i]);return ce(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+sn(this.snapshot.exportVal())}}class mj{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return ce(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let goe=class{constructor(e,n){this._repo=e,this._path=n}cancel(){const e=new hr;return ioe(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Qr("OnDisconnect.remove",this._path);const e=new hr;return RR(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Qr("OnDisconnect.set",this._path),Yi("OnDisconnect.set",e,this._path,!1);const n=new hr;return RR(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){Qr("OnDisconnect.setWithPriority",this._path),Yi("OnDisconnect.setWithPriority",e,this._path,!1),ET("OnDisconnect.setWithPriority",n,!1);const r=new hr;return soe(this._repo,this._path,e,n,r.wrapCallback(()=>{})),r.promise}update(e){Qr("OnDisconnect.update",this._path),ij("OnDisconnect.update",e,this._path,!1);const n=new hr;return ooe(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return Xe(this._path)?null:Zx(this._path)}get ref(){return new ni(this._repo,this._path)}get _queryIdentifier(){const e=gR(this._queryParams),n=Qx(e);return n==="{}"?"default":n}get _queryObject(){return gR(this._queryParams)}isEqual(e){if(e=me(e),!(e instanceof Ir))return!1;const n=this._repo===e._repo,r=eT(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+oie(this._path)}}function f_(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function ta(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Vi){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==$o)throw new Error(r);if(typeof e!="string")throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==Cs)throw new Error(r);if(typeof n!="string")throw new Error(i)}}else if(t.getIndex()===xt){if(e!=null&&!rf(e)||n!=null&&!rf(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(ce(t.getIndex()instanceof rT||t.getIndex()===iT,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function p_(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ni extends Ir{constructor(e,n){super(e,n,new Zv,!1)}get parent(){const e=kU(this._path);return e===null?null:new ni(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}let m_=class bb{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new pt(e),r=dl(this.ref,e);return new bb(this._node.getChild(n),r,xt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new bb(i,dl(this.ref,r),xt)))}hasChild(e){const n=new pt(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function gj(t,e){return t=me(t),t._checkNotDeleted("ref"),e!==void 0?dl(t._root,e):t._root}function PR(t,e){t=me(t),t._checkNotDeleted("refFromURL");const n=wb(e,t._repo.repoInfo_.nodeAdmin);sj("refFromURL",n);const r=n.repoInfo;return!t._repo.repoInfo_.isCustomHost()&&r.host!==t._repo.repoInfo_.host&&Qi("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),gj(t,n.path.toString())}function dl(t,e){return t=me(t),Ye(t._path)===null?Kse("child","path",e,!1):sf("child","path",e,!1),new ni(t._repo,$t(t._path,e))}function yoe(t,e){t=me(t),Qr("push",t._path),Yi("push",e,t._path,!0);const n=cj(t._repo),r=moe(n),i=dl(t,r),s=dl(t,r);let o;return e!=null?o=AT(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function voe(t){return Qr("remove",t._path),AT(t,null)}function AT(t,e){t=me(t),Qr("set",t._path),Yi("set",e,t._path,!1);const n=new hr;return TT(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function _oe(t,e){t=me(t),Qr("setPriority",t._path),ET("setPriority",e,!1);const n=new hr;return TT(t._repo,$t(t._path,".priority"),e,null,n.wrapCallback(()=>{})),n.promise}function woe(t,e,n){if(Qr("setWithPriority",t._path),Yi("setWithPriority",e,t._path,!1),ET("setWithPriority",n,!1),t.key===".length"||t.key===".keys")throw"setWithPriority failed: "+t.key+" is a read-only object.";const r=new hr;return TT(t._repo,t._path,e,n,r.wrapCallback(()=>{})),r.promise}function boe(t,e){ij("update",e,t._path,!1);const n=new hr;return noe(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function Soe(t){t=me(t);const e=new kT(()=>{}),n=new op(e);return toe(t._repo,t,n).then(r=>new m_(r,new ni(t._repo,t._path),t._queryParams.getIndex()))}class op{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new pj("value",this,new m_(e.snapshotNode,new ni(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new mj(this,e,n):null}matches(e){return e instanceof op?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class g_{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new mj(this,e,n):null}createEvent(e,n){ce(e.childName!=null,"Child events should have a childName.");const r=dl(new ni(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new pj(e.type,this,new m_(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof g_?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function ap(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){const l=n,c=(u,d)=>{_b(t._repo,t,a),l(u,d)};c.userCallback=n.userCallback,c.context=n.context,n=c}const o=new kT(n,s||void 0),a=e==="value"?new op(o):new g_(e,o);return aoe(t._repo,t,a),()=>_b(t._repo,t,a)}function Sb(t,e,n,r){return ap(t,"value",e,n,r)}function DR(t,e,n,r){return ap(t,"child_added",e,n,r)}function OR(t,e,n,r){return ap(t,"child_changed",e,n,r)}function LR(t,e,n,r){return ap(t,"child_moved",e,n,r)}function MR(t,e,n,r){return ap(t,"child_removed",e,n,r)}function $R(t,e,n){let r=null;const i=n?new kT(n):null;e==="value"?r=new op(i):e&&(r=new g_(e,i)),_b(t._repo,t,r)}class wi{}class yj extends wi{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){Yi("endAt",this._value,e._path,!0);const n=cb(e._queryParams,this._value,this._key);if(p_(n),ta(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ir(e._repo,e._path,n,e._orderByCalled)}}function Eoe(t,e){return ip("endAt","key",e,!0),new yj(t,e)}class xoe extends wi{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){Yi("endBefore",this._value,e._path,!1);const n=Pie(e._queryParams,this._value,this._key);if(p_(n),ta(n),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ir(e._repo,e._path,n,e._orderByCalled)}}function Toe(t,e){return ip("endBefore","key",e,!0),new xoe(t,e)}class vj extends wi{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){Yi("startAt",this._value,e._path,!0);const n=lb(e._queryParams,this._value,this._key);if(p_(n),ta(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ir(e._repo,e._path,n,e._orderByCalled)}}function Ioe(t=null,e){return ip("startAt","key",e,!0),new vj(t,e)}class Coe extends wi{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){Yi("startAfter",this._value,e._path,!1);const n=Nie(e._queryParams,this._value,this._key);if(p_(n),ta(n),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ir(e._repo,e._path,n,e._orderByCalled)}}function koe(t,e){return ip("startAfter","key",e,!0),new Coe(t,e)}class Aoe extends wi{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ir(e._repo,e._path,Aie(e._queryParams,this._limit),e._orderByCalled)}}function Roe(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Aoe(t)}class Noe extends wi{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ir(e._repo,e._path,Rie(e._queryParams,this._limit),e._orderByCalled)}}function Poe(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Noe(t)}class Doe extends wi{constructor(e){super(),this._path=e}_apply(e){f_(e,"orderByChild");const n=new pt(this._path);if(Xe(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new rT(n),i=e_(e._queryParams,r);return ta(i),new Ir(e._repo,e._path,i,!0)}}function Ooe(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return sf("orderByChild","path",t,!1),new Doe(t)}class Loe extends wi{_apply(e){f_(e,"orderByKey");const n=e_(e._queryParams,Vi);return ta(n),new Ir(e._repo,e._path,n,!0)}}function Moe(){return new Loe}class $oe extends wi{_apply(e){f_(e,"orderByPriority");const n=e_(e._queryParams,xt);return ta(n),new Ir(e._repo,e._path,n,!0)}}function Foe(){return new $oe}class Uoe extends wi{_apply(e){f_(e,"orderByValue");const n=e_(e._queryParams,iT);return ta(n),new Ir(e._repo,e._path,n,!0)}}function joe(){return new Uoe}class Voe extends wi{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){if(Yi("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new yj(this._value,this._key)._apply(new vj(this._value,this._key)._apply(e))}}function Boe(t,e){return ip("equalTo","key",e,!0),new Voe(t,e)}function si(t,...e){let n=me(t);for(const r of e)n=r._apply(n);return n}wse(ni);Tse(ni);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zoe="FIREBASE_DATABASE_EMULATOR_HOST",Eb={};let Woe=!1;function Hoe(t,e,n,r){t.repoInfo_=new _U(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function _j(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Qi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),vn("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=wb(s,i),a=o.repoInfo,l,c;typeof process<"u"&&process.env&&(c=process.env[zoe]),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=wb(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const u=i&&l?new Ec(Ec.OWNER):new Ore(t.name,t.options,e);sj("Invalid Firebase Database URL",o),Xe(o.path)||Qi("Database URL must point to the root of a Firebase Database (not including a child path).");const d=qoe(a,t,u,new Dre(t.name,n));return new Koe(d,t)}function Goe(t,e){const n=Eb[e];(!n||n[t.key]!==t)&&Qi(`Database ${e}(${t.repoInfo_}) has already been deleted.`),uj(t),delete n[t.key]}function qoe(t,e,n,r){let i=Eb[e.name];i||(i={},Eb[e.name]=i);let s=i[t.toURLString()];return s&&Qi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Jse(t,Woe,n,r),i[t.toURLString()]=s,s}let Koe=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Zse(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ni(this._repo,ht())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Goe(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Qi("Cannot call "+e+" on a deleted database.")}};function wj(){ru.IS_TRANSPORT_INITIALIZED&&Kn("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Qoe(){wj(),to.forceDisallow()}function Yoe(){wj(),Hr.forceDisallow(),to.forceAllow()}function Xoe(t,e,n,r={}){t=me(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Qi("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Qi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Ec(Ec.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:QS(r.mockUserToken,t.app.options.projectId);s=new Ec(o)}Hoe(i,e,n,s)}function Joe(t){t=me(t),t._checkNotDeleted("goOffline"),uj(t._repo)}function Zoe(t){t=me(t),t._checkNotDeleted("goOnline"),loe(t._repo)}function eae(t,e){aU(t,e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tae(t){rU(Ps),Wi(new sr("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return _j(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Er(ZA,eR,t),Er(ZA,eR,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nae={".sv":"timestamp"};function rae(){return nae}function iae(t){return{".sv":{increment:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sae=class{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}};function oae(t,e,n){var r;if(t=me(t),Qr("Reference.transaction",t._path),t.key===".length"||t.key===".keys")throw"Reference.transaction failed: "+t.key+" is a read-only object.";const i=(r=n==null?void 0:n.applyLocally)!==null&&r!==void 0?r:!0,s=new hr,o=(l,c,u)=>{let d=null;l?s.reject(l):(d=new m_(u,new ni(t._repo,t._path),xt),s.resolve(new sae(c,d)))},a=Sb(t,()=>{});return coe(t._repo,t._path,e,o,a,i),s.promise}ys.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};ys.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};tae();const aae="@firebase/database-compat",lae="0.3.4";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cae=new gu("@firebase/database-compat"),bj=function(t){const e="FIREBASE WARNING: "+t;cae.warn(e)};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uae=function(t,e,n,r){if(!(r&&n===void 0)&&typeof n!="boolean")throw new Error(Sr(t,e)+"must be a boolean.")},dae=function(t,e,n){if(!(n&&e===void 0))switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Sr(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hae{constructor(e){this._delegate=e}cancel(e){je("OnDisconnect.cancel",0,1,arguments.length),mn("OnDisconnect.cancel","onComplete",e,!0);const n=this._delegate.cancel();return e&&n.then(()=>e(null),r=>e(r)),n}remove(e){je("OnDisconnect.remove",0,1,arguments.length),mn("OnDisconnect.remove","onComplete",e,!0);const n=this._delegate.remove();return e&&n.then(()=>e(null),r=>e(r)),n}set(e,n){je("OnDisconnect.set",1,2,arguments.length),mn("OnDisconnect.set","onComplete",n,!0);const r=this._delegate.set(e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){je("OnDisconnect.setWithPriority",2,3,arguments.length),mn("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,n);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,n){if(je("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,bj("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}mn("OnDisconnect.update","onComplete",n,!0);const r=this._delegate.update(e);return n&&r.then(()=>n(null),i=>n(i)),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fae{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return je("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,n){this._database=e,this._delegate=n}val(){return je("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return je("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return je("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return je("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return je("DataSnapshot.child",0,1,arguments.length),e=String(e),sf("DataSnapshot.child","path",e,!1),new wo(this._database,this._delegate.child(e))}hasChild(e){return je("DataSnapshot.hasChild",1,1,arguments.length),sf("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return je("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return je("DataSnapshot.forEach",1,1,arguments.length),mn("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(n=>e(new wo(this._database,n)))}hasChildren(){return je("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return je("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return je("DataSnapshot.ref",0,0,arguments.length),new Ca(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class kn{constructor(e,n){this.database=e,this._delegate=n}on(e,n,r,i){var s;je("Query.on",2,4,arguments.length),mn("Query.on","callback",n,!1);const o=kn.getCancelAndContextArgs_("Query.on",r,i),a=(c,u)=>{n.call(o.context,new wo(this.database,c),u)};a.userCallback=n,a.context=o.context;const l=(s=o.cancel)===null||s===void 0?void 0:s.bind(o.context);switch(e){case"value":return Sb(this._delegate,a,l),n;case"child_added":return DR(this._delegate,a,l),n;case"child_removed":return MR(this._delegate,a,l),n;case"child_changed":return OR(this._delegate,a,l),n;case"child_moved":return LR(this._delegate,a,l),n;default:throw new Error(Sr("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,n,r){if(je("Query.off",0,3,arguments.length),dae("Query.off",e,!0),mn("Query.off","callback",n,!0),JC("Query.off","context",r,!0),n){const i=()=>{};i.userCallback=n,i.context=r,$R(this._delegate,e,i)}else $R(this._delegate,e)}get(){return Soe(this._delegate).then(e=>new wo(this.database,e))}once(e,n,r,i){je("Query.once",1,4,arguments.length),mn("Query.once","callback",n,!0);const s=kn.getCancelAndContextArgs_("Query.once",r,i),o=new hr,a=(c,u)=>{const d=new wo(this.database,c);n&&n.call(s.context,d,u),o.resolve(d)};a.userCallback=n,a.context=s.context;const l=c=>{s.cancel&&s.cancel.call(s.context,c),o.reject(c)};switch(e){case"value":Sb(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":DR(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":MR(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":OR(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":LR(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error(Sr("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return je("Query.limitToFirst",1,1,arguments.length),new kn(this.database,si(this._delegate,Roe(e)))}limitToLast(e){return je("Query.limitToLast",1,1,arguments.length),new kn(this.database,si(this._delegate,Poe(e)))}orderByChild(e){return je("Query.orderByChild",1,1,arguments.length),new kn(this.database,si(this._delegate,Ooe(e)))}orderByKey(){return je("Query.orderByKey",0,0,arguments.length),new kn(this.database,si(this._delegate,Moe()))}orderByPriority(){return je("Query.orderByPriority",0,0,arguments.length),new kn(this.database,si(this._delegate,Foe()))}orderByValue(){return je("Query.orderByValue",0,0,arguments.length),new kn(this.database,si(this._delegate,joe()))}startAt(e=null,n){return je("Query.startAt",0,2,arguments.length),new kn(this.database,si(this._delegate,Ioe(e,n)))}startAfter(e=null,n){return je("Query.startAfter",0,2,arguments.length),new kn(this.database,si(this._delegate,koe(e,n)))}endAt(e=null,n){return je("Query.endAt",0,2,arguments.length),new kn(this.database,si(this._delegate,Eoe(e,n)))}endBefore(e=null,n){return je("Query.endBefore",0,2,arguments.length),new kn(this.database,si(this._delegate,Toe(e,n)))}equalTo(e,n){return je("Query.equalTo",1,2,arguments.length),new kn(this.database,si(this._delegate,Boe(e,n)))}toString(){return je("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return je("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(je("Query.isEqual",1,1,arguments.length),!(e instanceof kn)){const n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,n,r){const i={cancel:void 0,context:void 0};if(n&&r)i.cancel=n,mn(e,"cancel",i.cancel,!0),i.context=r,JC(e,"context",i.context,!0);else if(n)if(typeof n=="object"&&n!==null)i.context=n;else if(typeof n=="function")i.cancel=n;else throw new Error(Sr(e,"cancelOrContext")+" must either be a cancel callback or a context object.");return i}get ref(){return new Ca(this.database,new ni(this._delegate._repo,this._delegate._path))}}let Ca=class Wl extends kn{constructor(e,n){super(e,new Ir(n._repo,n._path,new Zv,!1)),this.database=e,this._delegate=n}getKey(){return je("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return je("Reference.child",1,1,arguments.length),typeof e=="number"&&(e=String(e)),new Wl(this.database,dl(this._delegate,e))}getParent(){je("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Wl(this.database,e):null}getRoot(){return je("Reference.root",0,0,arguments.length),new Wl(this.database,this._delegate.root)}set(e,n){je("Reference.set",1,2,arguments.length),mn("Reference.set","onComplete",n,!0);const r=AT(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}update(e,n){if(je("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,bj("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Qr("Reference.update",this._delegate._path),mn("Reference.update","onComplete",n,!0);const r=boe(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){je("Reference.setWithPriority",2,3,arguments.length),mn("Reference.setWithPriority","onComplete",r,!0);const i=woe(this._delegate,e,n);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){je("Reference.remove",0,1,arguments.length),mn("Reference.remove","onComplete",e,!0);const n=voe(this._delegate);return e&&n.then(()=>e(null),r=>e(r)),n}transaction(e,n,r){je("Reference.transaction",1,3,arguments.length),mn("Reference.transaction","transactionUpdate",e,!1),mn("Reference.transaction","onComplete",n,!0),uae("Reference.transaction","applyLocally",r,!0);const i=oae(this._delegate,e,{applyLocally:r}).then(s=>new fae(s.committed,new wo(this.database,s.snapshot)));return n&&i.then(s=>n(null,s.committed,s.snapshot),s=>n(s,!1,null)),i}setPriority(e,n){je("Reference.setPriority",1,2,arguments.length),mn("Reference.setPriority","onComplete",n,!0);const r=_oe(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}push(e,n){je("Reference.push",0,2,arguments.length),mn("Reference.push","onComplete",n,!0);const r=yoe(this._delegate,e),i=r.then(o=>new Wl(this.database,o));n&&i.then(()=>n(null),o=>n(o));const s=new Wl(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return Qr("Reference.onDisconnect",this._delegate._path),new hae(new goe(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,n){this._delegate=e,this.app=n,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Qoe,forceLongPolling:Yoe}}useEmulator(e,n,r={}){Xoe(this._delegate,e,n,r)}ref(e){if(je("database.ref",0,1,arguments.length),e instanceof Ca){const n=PR(this._delegate,e.toString());return new Ca(this,n)}else{const n=gj(this._delegate,e);return new Ca(this,n)}}refFromURL(e){je("database.refFromURL",1,1,arguments.length);const r=PR(this._delegate,e);return new Ca(this,r)}goOffline(){return je("database.goOffline",0,0,arguments.length),Joe(this._delegate)}goOnline(){return je("database.goOnline",0,0,arguments.length),Zoe(this._delegate)}}of.ServerValue={TIMESTAMP:rae(),increment:t=>iae(t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pae({app:t,url:e,version:n,customAuthImpl:r,namespace:i,nodeAdmin:s=!1}){rU(n);const o=new uL("auth-internal",new dL("database-standalone"));return o.setComponent(new sr("auth-internal",()=>r,"PRIVATE")),{instance:new of(_j(t,o,void 0,e,s),t),namespace:i}}var mae=Object.freeze({__proto__:null,initStandalone:pae});/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gae=of.ServerValue;function yae(t){t.INTERNAL.registerComponent(new sr("database-compat",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new of(i,r)},"PUBLIC").setServiceProps({Reference:Ca,Query:kn,Database:of,DataSnapshot:wo,enableLogging:eae,INTERNAL:mae,ServerValue:gae}).setMultipleInstances(!0)),t.registerVersion(aae,lae)}yae($n);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sj="firebasestorage.googleapis.com",Ej="storageBucket",vae=2*60*1e3,_ae=10*60*1e3,wae=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt extends Hn{constructor(e,n,r=0){super(V0(e),`Firebase Storage: ${n} (${V0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Wt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return V0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Nt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Nt||(Nt={}));function V0(t){return"storage/"+t}function RT(){const t="An unknown error occurred, please check the error payload for server response.";return new Wt(Nt.UNKNOWN,t)}function bae(t){return new Wt(Nt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Sae(t){return new Wt(Nt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Eae(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Wt(Nt.UNAUTHENTICATED,t)}function xae(){return new Wt(Nt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Tae(t){return new Wt(Nt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function xj(){return new Wt(Nt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Tj(){return new Wt(Nt.CANCELED,"User canceled the upload/download.")}function Iae(t){return new Wt(Nt.INVALID_URL,"Invalid URL '"+t+"'.")}function Cae(t){return new Wt(Nt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function kae(){return new Wt(Nt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Ej+"' property when initializing the app?")}function Ij(){return new Wt(Nt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Aae(){return new Wt(Nt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function Rae(){return new Wt(Nt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Nae(t){return new Wt(Nt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function xc(t){return new Wt(Nt.INVALID_ARGUMENT,t)}function Cj(){return new Wt(Nt.APP_DELETED,"The Firebase app was deleted.")}function kj(t){return new Wt(Nt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function th(t,e){return new Wt(Nt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function hd(t){throw new Wt(Nt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Wn.makeFromUrl(e,n)}catch{return new Wn(e,"")}if(r.path==="")return r;throw Cae(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(S){S.path.charAt(S.path.length-1)==="/"&&(S.path_=S.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(S){S.path_=decodeURIComponent(S.path)}const u="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",f=new RegExp(`^https?://${d}/${u}/b/${i}/o${h}`,"i"),p={bucket:1,path:3},y=n===Sj?"(?:storage.googleapis.com|storage.cloud.google.com)":n,w="([^?#]*)",m=new RegExp(`^https?://${y}/${i}/${w}`,"i"),_=[{regex:a,indices:l,postModify:s},{regex:f,indices:p,postModify:c},{regex:m,indices:{bucket:1,path:2},postModify:c}];for(let S=0;S<_.length;S++){const I=_[S],E=I.regex.exec(e);if(E){const D=E[I.indices.bucket];let b=E[I.indices.path];b||(b=""),r=new Wn(D,b),I.postModify(r);break}}if(r==null)throw Iae(e);return r}}class Pae{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dae(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...w){c||(c=!0,e.apply(null,w))}function d(w){i=setTimeout(()=>{i=null,t(f,l())},w)}function h(){s&&clearTimeout(s)}function f(w,...m){if(c){h();return}if(w){h(),u.call(null,w,...m);return}if(l()||o){h(),u.call(null,w,...m);return}r<64&&(r*=2);let _;a===1?(a=2,_=0):_=(r+Math.random())*1e3,d(_)}let p=!1;function y(w){p||(p=!0,h(),!c&&(i!==null?(w||(a=2),clearTimeout(i),d(0)):w||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,y(!0)},n),y}function Oae(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lae(t){return t!==void 0}function Mae(t){return typeof t=="function"}function $ae(t){return typeof t=="object"&&!Array.isArray(t)}function y_(t){return typeof t=="string"||t instanceof String}function FR(t){return NT()&&t instanceof Blob}function NT(){return typeof Blob<"u"&&!By()}function xb(t,e,n,r){if(r<e)throw xc(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw xc(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function Aj(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $a;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})($a||($a={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rj(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fae{constructor(e,n,r,i,s,o,a,l,c,u,d,h=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,p)=>{this.resolve_=f,this.reject_=p,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new qp(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===$a.NO_ERROR,l=s.getStatus();if(!a||Rj(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===$a.ABORT;r(!1,new qp(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new qp(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());Lae(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=RT();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?Cj():Tj();o(l)}else{const l=xj();o(l)}};this.canceled_?n(!1,new qp(!1,null,!0)):this.backoffId_=Dae(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Oae(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class qp{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Uae(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function jae(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Vae(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Bae(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function zae(t,e,n,r,i,s,o=!0){const a=Aj(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return Vae(c,e),Uae(c,n),jae(c,s),Bae(c,r),new Fae(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wae(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Hae(...t){const e=Wae();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(NT())return new Blob(t);throw new Wt(Nt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Gae(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qae(t){if(typeof atob>"u")throw Nae("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class B0{constructor(e,n){this.data=e,this.contentType=n||null}}function Nj(t,e){switch(t){case Yr.RAW:return new B0(Pj(e));case Yr.BASE64:case Yr.BASE64URL:return new B0(Dj(t,e));case Yr.DATA_URL:return new B0(Qae(e),Yae(e))}throw RT()}function Pj(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Kae(t){let e;try{e=decodeURIComponent(t)}catch{throw th(Yr.DATA_URL,"Malformed data URL.")}return Pj(e)}function Dj(t,e){switch(t){case Yr.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw th(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Yr.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw th(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=qae(e)}catch(i){throw i.message.includes("polyfill")?i:th(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class Oj{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw th(Yr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Xae(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function Qae(t){const e=new Oj(t);return e.base64?Dj(Yr.BASE64,e.rest):Kae(e.rest)}function Yae(t){return new Oj(t).contentType}function Xae(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,n){let r=0,i="";FR(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(FR(this.data_)){const r=this.data_,i=Gae(r,e,n);return i===null?null:new Pi(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Pi(r,!0)}}static getBlob(...e){if(NT()){const n=e.map(r=>r instanceof Pi?r.data_:r);return new Pi(Hae.apply(null,n))}else{const n=e.map(o=>y_(o)?Nj(Yr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Pi(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT(t){let e;try{e=JSON.parse(t)}catch{return null}return $ae(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jae(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Zae(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function Lj(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ele(t,e){return e}class Xn{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||ele}}let Kp=null;function tle(t){return!y_(t)||t.length<2?t:Lj(t)}function lp(){if(Kp)return Kp;const t=[];t.push(new Xn("bucket")),t.push(new Xn("generation")),t.push(new Xn("metageneration")),t.push(new Xn("name","fullPath",!0));function e(s,o){return tle(o)}const n=new Xn("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Xn("size");return i.xform=r,t.push(i),t.push(new Xn("timeCreated")),t.push(new Xn("updated")),t.push(new Xn("md5Hash",null,!0)),t.push(new Xn("cacheControl",null,!0)),t.push(new Xn("contentDisposition",null,!0)),t.push(new Xn("contentEncoding",null,!0)),t.push(new Xn("contentLanguage",null,!0)),t.push(new Xn("contentType",null,!0)),t.push(new Xn("metadata","customMetadata",!0)),Kp=t,Kp}function nle(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Wn(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function rle(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return nle(r,t),r}function Mj(t,e,n){const r=PT(e);return r===null?null:rle(t,r,n)}function ile(t,e,n,r){const i=PT(e);if(i===null||!y_(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const u=t.bucket,d=t.fullPath,h="/b/"+o(u)+"/o/"+o(d),f=na(h,n,r),p=Aj({alt:"media",token:c});return f+p})[0]}function DT(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR="prefixes",jR="items";function sle(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[UR])for(const i of n[UR]){const s=i.replace(/\/$/,""),o=t._makeStorageReference(new Wn(e,s));r.prefixes.push(o)}if(n[jR])for(const i of n[jR]){const s=t._makeStorageReference(new Wn(e,i.name));r.items.push(s)}return r}function ole(t,e,n){const r=PT(n);return r===null?null:sle(t,e,r)}class Fs{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bi(t){if(!t)throw RT()}function v_(t,e){function n(r,i){const s=Mj(t,i,e);return Bi(s!==null),s}return n}function ale(t,e){function n(r,i){const s=ole(t,e,i);return Bi(s!==null),s}return n}function lle(t,e){function n(r,i){const s=Mj(t,i,e);return Bi(s!==null),ile(s,i,t.host,t._protocol)}return n}function Mu(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=xae():i=Eae():n.getStatus()===402?i=Sae(t.bucket):n.getStatus()===403?i=Tae(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function __(t){const e=Mu(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=bae(t.path)),s.serverResponse=i.serverResponse,s}return n}function $j(t,e,n){const r=e.fullServerUrl(),i=na(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new Fs(i,s,v_(t,n),o);return a.errorHandler=__(e),a}function cle(t,e,n,r,i){const s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=e.bucketOnlyServerUrl(),a=na(o,t.host,t._protocol),l="GET",c=t.maxOperationRetryTime,u=new Fs(a,l,ale(t,e.bucket),c);return u.urlParams=s,u.errorHandler=Mu(e),u}function ule(t,e,n){const r=e.fullServerUrl(),i=na(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new Fs(i,s,lle(t,n),o);return a.errorHandler=__(e),a}function dle(t,e,n,r){const i=e.fullServerUrl(),s=na(i,t.host,t._protocol),o="PATCH",a=DT(n,r),l={"Content-Type":"application/json; charset=utf-8"},c=t.maxOperationRetryTime,u=new Fs(s,o,v_(t,r),c);return u.headers=l,u.body=a,u.errorHandler=__(e),u}function hle(t,e){const n=e.fullServerUrl(),r=na(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(l,c){}const a=new Fs(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=__(e),a}function fle(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Fj(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=fle(null,e)),r}function Uj(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let _="";for(let S=0;S<2;S++)_=_+Math.random().toString().slice(2);return _}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=Fj(e,r,i),u=DT(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,h=`\r
--`+l+"--",f=Pi.getBlob(d,r,h);if(f===null)throw Ij();const p={name:c.fullPath},y=na(s,t.host,t._protocol),w="POST",m=t.maxUploadRetryTime,g=new Fs(y,w,v_(t,n),m);return g.urlParams=p,g.headers=o,g.body=f.uploadData(),g.errorHandler=Mu(e),g}class qg{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function OT(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Bi(!1)}return Bi(!!n&&(e||["active"]).indexOf(n)!==-1),n}function ple(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o=Fj(e,r,i),a={name:o.fullPath},l=na(s,t.host,t._protocol),c="POST",u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},d=DT(o,n),h=t.maxUploadRetryTime;function f(y){OT(y);let w;try{w=y.getResponseHeader("X-Goog-Upload-URL")}catch{Bi(!1)}return Bi(y_(w)),w}const p=new Fs(l,c,f,h);return p.urlParams=a,p.headers=u,p.body=d,p.errorHandler=Mu(e),p}function mle(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function s(c){const u=OT(c,["active","final"]);let d=null;try{d=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Bi(!1)}d||Bi(!1);const h=Number(d);return Bi(!isNaN(h)),new qg(h,r.size(),u==="final")}const o="POST",a=t.maxUploadRetryTime,l=new Fs(n,o,s,a);return l.headers=i,l.errorHandler=Mu(e),l}const VR=256*1024;function gle(t,e,n,r,i,s,o,a){const l=new qg(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw Aae();const c=l.total-l.current;let u=c;i>0&&(u=Math.min(u,i));const d=l.current,h=d+u;let f="";u===0?f="finalize":c===u?f="upload, finalize":f="upload";const p={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":`${l.current}`},y=r.slice(d,h);if(y===null)throw Ij();function w(S,I){const E=OT(S,["active","final"]),D=l.current+u,b=r.size();let x;return E==="final"?x=v_(e,s)(S,I):x=null,new qg(D,b,E==="final",x)}const m="POST",g=e.maxUploadRetryTime,_=new Fs(n,m,w,g);return _.headers=p,_.body=y.uploadData(),_.progressCallback=a||null,_.errorHandler=Mu(t),_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yle={STATE_CHANGED:"state_changed"},er={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function z0(t){switch(t){case"running":case"pausing":case"canceling":return er.RUNNING;case"paused":return er.PAUSED;case"success":return er.SUCCESS;case"canceled":return er.CANCELED;case"error":return er.ERROR;default:return er.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vle=class{constructor(e,n,r){if(Mae(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jl(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class _le{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=$a.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=$a.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=$a.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw hd("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw hd("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw hd("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw hd("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw hd("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class wle extends _le{initXhr(){this.xhr_.responseType="text"}}function di(){return new wle}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=lp(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Nt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(Rj(i.status,[]))if(s)i=xj();else{this.sleepTime=Math.max(this.sleepTime*2,wae),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Nt.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=ple(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,di,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=mle(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,di,n,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=VR*this._chunkMultiplier,n=new qg(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=gle(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,di,i,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){VR*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=$j(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,di,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=Uj(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,di,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=Tj(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=z0(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const s=new vle(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(z0(this._state)){case er.SUCCESS:jl(this._resolve.bind(null,this.snapshot))();break;case er.CANCELED:case er.ERROR:const n=this._reject;jl(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(z0(this._state)){case er.RUNNING:case er.PAUSED:e.next&&jl(e.next.bind(e,this.snapshot))();break;case er.SUCCESS:e.complete&&jl(e.complete.bind(e))();break;case er.CANCELED:case er.ERROR:e.error&&jl(e.error.bind(e,this._error))();break;default:e.error&&jl(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e,n){this._service=e,n instanceof Wn?this._location=n:this._location=Wn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new hl(e,n)}get root(){const e=new Wn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Lj(this._location.path)}get storage(){return this._service}get parent(){const e=Jae(this._location.path);if(e===null)return null;const n=new Wn(this._location.bucket,e);return new hl(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw kj(e)}}function ble(t,e,n){t._throwIfRoot("uploadBytes");const r=Uj(t.storage,t._location,lp(),new Pi(e,!0),n);return t.storage.makeRequestWithTokens(r,di).then(i=>({metadata:i,ref:t}))}function Sle(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new jj(t,new Pi(e),n)}function Ele(t){const e={prefixes:[],items:[]};return Vj(t,e).then(()=>e)}async function Vj(t,e,n){const i=await Bj(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&await Vj(t,e,i.nextPageToken)}function Bj(t,e){e!=null&&typeof e.maxResults=="number"&&xb("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=cle(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,di)}function xle(t){t._throwIfRoot("getMetadata");const e=$j(t.storage,t._location,lp());return t.storage.makeRequestWithTokens(e,di)}function Tle(t,e){t._throwIfRoot("updateMetadata");const n=dle(t.storage,t._location,e,lp());return t.storage.makeRequestWithTokens(n,di)}function Ile(t){t._throwIfRoot("getDownloadURL");const e=ule(t.storage,t._location,lp());return t.storage.makeRequestWithTokens(e,di).then(n=>{if(n===null)throw Rae();return n})}function Cle(t){t._throwIfRoot("deleteObject");const e=hle(t.storage,t._location);return t.storage.makeRequestWithTokens(e,di)}function zj(t,e){const n=Zae(t._location.path,e),r=new Wn(t._location.bucket,n);return new hl(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kle(t){return/^[A-Za-z]+:\/\//.test(t)}function Ale(t,e){return new hl(t,e)}function Wj(t,e){if(t instanceof LT){const n=t;if(n._bucket==null)throw kae();const r=new hl(n,n._bucket);return e!=null?Wj(r,e):r}else return e!==void 0?zj(t,e):t}function Rle(t,e){if(e&&kle(e)){if(t instanceof LT)return Ale(t,e);throw xc("To use ref(service, url), the first argument must be a Storage instance.")}else return Wj(t,e)}function BR(t,e){const n=e==null?void 0:e[Ej];return n==null?null:Wn.makeFromBucketSpec(n,t)}function Nle(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:QS(i,t.app.options.projectId))}class LT{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=Sj,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=vae,this._maxUploadRetryTime=_ae,this._requests=new Set,i!=null?this._bucket=Wn.makeFromBucketSpec(i,this._host):this._bucket=BR(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Wn.makeFromBucketSpec(this._url,e):this._bucket=BR(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){xb("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){xb("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new hl(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new Pae(Cj());{const o=zae(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const zR="@firebase/storage",WR="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hj="storage";function Ple(t,e,n){return t=me(t),ble(t,e,n)}function Dle(t,e,n){return t=me(t),Sle(t,e,n)}function Ole(t){return t=me(t),xle(t)}function Lle(t,e){return t=me(t),Tle(t,e)}function Mle(t,e){return t=me(t),Bj(t,e)}function $le(t){return t=me(t),Ele(t)}function Gj(t){return t=me(t),Ile(t)}function Fle(t){return t=me(t),Cle(t)}function Kg(t,e){return t=me(t),Rle(t,e)}function Ule(t,e){return zj(t,e)}function jle(t=gL(),e){t=me(t);const r=ZS(t,Hj).getImmediate({identifier:e}),i=zq("storage");return i&&qj(r,...i),r}function qj(t,e,n,r={}){Nle(t,e,n,r)}function Vle(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new LT(n,r,i,e,Ps)}function Ble(){Wi(new sr(Hj,Vle,"PUBLIC").setMultipleInstances(!0)),Er(zR,WR,""),Er(zR,WR,"esm2017")}Ble();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Qp(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new Qp(r,this,this._ref))},n)}on(e,n,r,i){let s;return n&&(typeof n=="function"?s=o=>n(new Qp(o,this,this._ref)):s={next:n.next?o=>n.next(new Qp(o,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class GR{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new vs(e,this._service))}get items(){return this._delegate.items.map(e=>new vs(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=Ule(this._delegate,e);return new vs(n,this.storage)}get root(){return new vs(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new vs(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new HR(Dle(this._delegate,e,n),this)}putString(e,n=Yr.RAW,r){this._throwIfRoot("putString");const i=Nj(n,e),s=Object.assign({},r);return s.contentType==null&&i.contentType!=null&&(s.contentType=i.contentType),new HR(new jj(this._delegate,new Pi(i.data,!0),s),this)}listAll(){return $le(this._delegate).then(e=>new GR(e,this.storage))}list(e){return Mle(this._delegate,e||void 0).then(n=>new GR(n,this.storage))}getMetadata(){return Ole(this._delegate)}updateMetadata(e){return Lle(this._delegate,e)}getDownloadURL(){return Gj(this._delegate)}delete(){return this._throwIfRoot("delete"),Fle(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw kj(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(qR(e))throw xc("ref() expected a child path but got a URL, use refFromURL instead.");return new vs(Kg(this._delegate,e),this)}refFromURL(e){if(!qR(e))throw xc("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Wn.makeFromUrl(e,this._delegate.host)}catch{throw xc("refFromUrl() expected a valid full URL but got an invalid one.")}return new vs(Kg(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){qj(this._delegate,e,n,r)}}function qR(t){return/^[A-Za-z]+:\/\//.test(t)}const zle="@firebase/storage-compat",Wle="0.3.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hle="storage-compat";function Gle(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new Kj(n,r)}function qle(t){const e={TaskState:er,TaskEvent:yle,StringFormat:Yr,Storage:Kj,Reference:vs};t.INTERNAL.registerComponent(new sr(Hle,Gle,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(zle,Wle)}qle($n);const Kle={apiKey:"AIzaSyAOumwOGF_a3j3v5RqF_OzMEzNrlASGRyE",authDomain:"potato-market-lab18.firebaseapp.com",projectId:"potato-market-lab18",storageBucket:"potato-market-lab18.appspot.com",messagingSenderId:"862520392764",appId:"1:862520392764:web:fa40b5561ca057dcfa5739"};$n.initializeApp(Kle);$n.database();const Qg=$n.auth(),zi=$n.firestore(),Qle=$n.storage(),Sm=zi.collection("users"),w_=zi.collection("UserWrite");var MT={};Object.defineProperty(MT,"__esModule",{value:!0});var Qj=MT.recoilPersist=void 0;const Yle=(t={})=>{if(typeof window>"u")return{persistAtom:()=>{}};const{key:e="recoil-persist",storage:n=localStorage}=t,r=({onSet:l,node:c,trigger:u,setSelf:d})=>{if(u==="get"){const h=s();typeof h.then=="function"&&h.then(f=>{f.hasOwnProperty(c.key)&&d(f[c.key])}),h.hasOwnProperty(c.key)&&d(h[c.key])}l(async(h,f,p)=>{const y=s();typeof y.then=="function"?y.then(w=>i(h,w,c.key,p)):i(h,y,c.key,p)})},i=(l,c,u,d)=>{d?delete c[u]:c[u]=l,a(c)},s=()=>{const l=n.getItem(e);return l==null?{}:typeof l=="string"?o(l):typeof l.then=="function"?l.then(o):{}},o=l=>{if(l===void 0)return{};try{return JSON.parse(l)}catch(c){return console.error(c),{}}},a=l=>{try{typeof n.mergeItem=="function"?n.mergeItem(e,JSON.stringify(l)):n.setItem(e,JSON.stringify(l))}catch(c){console.error(c)}};return{persistAtom:r}};Qj=MT.recoilPersist=Yle;const{persistAtom:Yj}=Qj(),ri=Tf({key:"userId",default:null,effects_UNSTABLE:[Yj]}),Rl=Tf({key:"userInformation",default:{location:"",agree:"",email:"",nickname:"",phoneNumber:"",profileImage:""},effects_UNSTABLE:[Yj]});function Xle(){const t=H.useRef(),[e,n]=H.useState(0),[r]=Et(Rl),[i]=Et(ri),[s,o]=Et(kx);let[a,l]=H.useState({chat:[]});const c=H.useRef(),u=Gi(zi,"comment","kviERzom8LpJItP3g23N"),d=Yc(u),h=zi.collection("comment");e||(d.then(w=>{l(w.data())}),n(1)),H.useEffect(()=>(async()=>{Xc(h,()=>{n(0)})})(),[Xc]),H.useMemo(()=>{s&&setTimeout(()=>{c.current.scrollTop=c.current.scrollHeight},150)},[e,s]);const f=()=>{const w=Gi(zi,"comment","kviERzom8LpJItP3g23N"),m=Yc(w);m.then(g=>{a=g.data(),a.chat.push({id:i?r.nickname:"수상한 고구마",coment:t.current.value,time:Date(),img:i?r.profileImage:"https://firebasestorage.googleapis.com/v0/b/potato-market-lab18.appspot.com/o/default_profile.png?alt=media&token=bdb0de59-063c-42f9-823d-34e5d7b254c3"}),t.current.value="",Do(w,a).then(()=>{m.then(()=>{n(0)})})})},p=w=>{w.key==="Enter"&&f()},y=w=>{w.keyCode===27&&o(!1)};return v.jsx(v.Fragment,{children:s==!0?v.jsxs(Jle,{children:[v.jsxs("div",{className:"header-div",children:[v.jsx("h2",{className:"chat-h2",children:"우리동네 감자 모임"}),v.jsx("button",{className:"reset-button",type:"button",onClick:()=>{Do(u,{chat:[]}).then(()=>{d.then(()=>{n(0)})})}}),v.jsx("button",{className:"chat-false-button",type:"button",onClick:()=>{o(!1)}})]}),v.jsx("div",{className:"div-warpper",children:v.jsx("ul",{ref:c,children:e?a.chat.map((w,m)=>v.jsxs("li",{children:[v.jsx("img",{alt:w.img,src:w.img}),v.jsxs("div",{className:"chat-line",children:[v.jsx("p",{children:w.coment}),v.jsxs("p",{className:"time-class",children:[w.time.slice(7,23)," • ",w.id]})]})]},m)):v.jsx("p",{children:"렌더링중"})})}),v.jsx("div",{className:"comment-div",children:v.jsxs("div",{className:"comment-wrapper-div",children:[v.jsx("input",{ref:t,type:"text",onKeyDown:y,onKeyPress:p}),v.jsx("button",{className:"send-button",type:"button",onClick:f})]})})]}):null})}const Jle=ne.div`
  z-index:9999;
  border-radius: 10px;
  background: #FBF7F2 url(${lZ}) no-repeat ;
  background-position: 0% 100%;
  position: fixed;
  right: 0;
  top: 23%;
  margin-right: 35px;
  width: 432.9px;
  height: 400px;
  box-shadow: 0 3px 7px 3px rgb(0 0 0 / 7%);
  & .header-div{
    width: 100%;
    position: relative;
    justify-content: flex-start;
    display:flex;
    align-items: center;
    border-radius: 10px 10px 0px 0px;
    color:black;
    height: 30px;
    background: #ffffff;
    width: 432.9px;
    font-weight: 500;
    padding: 0 20px;
    box-sizing: border-box;
  }
  & .chat-h2{
    width: 100%;
    height: 30px;
    line-height: 30px;
    margin:0;
    font-size:15px;
  }

  & .chat-false-button, & .reset-button{
    position:absolute;
    border-radius: 50%;
    border:none;
    width: 18px;
    height: 18px;
    background-color: pink;
  }
  & .chat-false-button{
    background: url(${cZ}) no-repeat, 100%;
    background-position: center;
    right:10px;
    background-size: contain;    
  }
  & .reset-button{
    right: 32px;
    background: url(${dZ}) no-repeat, 100%;
    background-position: center;
    background-size: contain;    
  }

  & .time-class{
    font-size:8px;
    position: absolute;
    bottom:-8px;
  }
  & .notice{
    color:white;
    background-color: gray;
  }  

  & ul{
    width: 405px;
    margin:5px 0;
    padding: 10px;
    overflow: auto;
    overflow-x: hidden;
    text-overflow:ellipsis;
    height: 270px;
  }
  & ul::-webkit-scrollbar {
    width: 12px;
  }
  & ul::-webkit-scrollbar-thumb {
    height: 30%;
    background: #AFDBAF;
    border-radius: 10px;
  }
  & ul::-webkit-scrollbar-track {
    background: white;
    border-radius: 10px;
  }
  & li{
    position: relative;
    display:flex;
    align-items: center;
    margin-bottom:8px;
  }
  & li img{
    margin: 10px 10px 0 10px;
    border-radius: 50%;
    width: 35px;
    height: 35px;
  }

  & .chat-line{
    min-height: 20px;
    margin-bottom:5px;
    margin-top: 10px;
    padding:5px;
    border-radius: 10px;
    border: 0.666px solid #F2F3F6;
    display: flex;
    align-items: center;
    background: #FFFFFF;
    max-width: 335px;
    letter-spacing: 1px;
  }
  & .chat-line p{
    max-width: 335px;
  }

  & li p:first-child{
    margin-right: 5px;
    margin-left: 5px;
  }
  & li p:nth{
    margin-right:10px;
  }

  & .comment-div{
    gap:5px;
    display:flex;
    justify-content: center;
    position: relative;
    margin-top: 20px;
    overflow: hidden;
    font-size: 15px;
  }
  & .comment-div input:focus {
    outline: none;
  }  
  & .comment-div input{
    padding:0 37px 0 15px;
    margin:0 auto;
    width: 250px;
    height: 30px;
    border: none;
    border-radius: 15px;
  }
  & .comment-wrapper-div{
    position: relative;
  }
  
  & .send-button{
    position: absolute;
    border: none;
    border-radius: 50%;
    width: 20px;
    height: 20px;
    background: url(${uZ}) no-repeat;
    background-position: center;
    background-size: contain;  
    right: 10px;
    top: 5px;
  }
  & .send-button img{
    width: 100%;
  }
`,Zle="/assets/facebook-abfdc580.svg",ece="/assets/github-7a0dd11e.svg",tce="/assets/instagram-52ecb7f6.svg",nce="/assets/naverblog-0aad2663.svg",rce="/assets/youtube-ca398db9.svg";var Fa={};const ice=VV(aZ);Object.defineProperty(Fa,"__esModule",{value:!0});Fa.default=Fa.Normalize=FT=Fa.normalize=void 0;var Xj=ice,$T=(0,Xj.css)(['html{line-height:1.15;-webkit-text-size-adjust:100%;}body{margin:0;}main{display:block;}h1{font-size:2em;margin:0.67em 0;}hr{box-sizing:content-box;height:0;overflow:visible;}pre{font-family:monospace,monospace;font-size:1em;}a{background-color:transparent;}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted;}b,strong{font-weight:bolder;}code,kbd,samp{font-family:monospace,monospace;font-size:1em;}small{font-size:80%;}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline;}sub{bottom:-0.25em;}sup{top:-0.5em;}img{border-style:none;}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0;}button,input{overflow:visible;}button,select{text-transform:none;}button,[type="button"],[type="reset"],[type="submit"]{-webkit-appearance:button;}button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner{border-style:none;padding:0;}button:-moz-focusring,[type="button"]:-moz-focusring,[type="reset"]:-moz-focusring,[type="submit"]:-moz-focusring{outline:1px dotted ButtonText;}fieldset{padding:0.35em 0.75em 0.625em;}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal;}progress{vertical-align:baseline;}textarea{overflow:auto;}[type="checkbox"],[type="radio"]{box-sizing:border-box;padding:0;}[type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button{height:auto;}[type="search"]{-webkit-appearance:textfield;outline-offset:-2px;}[type="search"]::-webkit-search-decoration{-webkit-appearance:none;}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit;}details{display:block;}summary{display:list-item;}template{display:none;}[hidden]{display:none;}']),FT=Fa.normalize=$T,sce=(0,Xj.createGlobalStyle)($T);Fa.Normalize=sce;var oce=$T;Fa.default=oce;var Jj=globalThis&&globalThis.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},UT=Lo(KR||(KR=Jj([`
/* http://meyerweb.com/eric/tools/css/reset/
   v5.0.1 | 20191019
   License: none (public domain)
*/

html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, menu, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed,
figure, figcaption, footer, header, hgroup,
main, menu, nav, output, ruby, section, summary,
time, mark, audio, video {
  margin: 0;
  padding: 0;
  border: 0;
  font-size: 100%;
  font: inherit;
  vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure,
footer, header, hgroup, main, menu, nav, section {
  display: block;
}
/* HTML5 hidden-attribute fix for newer browsers */
*[hidden] {
    display: none;
}
body {
  line-height: 1;
}
menu, ol, ul {
  list-style: none;
}
blockquote, q {
  quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
  content: '';
  content: none;
}
table {
  border-collapse: collapse;
  border-spacing: 0;
}
`],[`
/* http://meyerweb.com/eric/tools/css/reset/
   v5.0.1 | 20191019
   License: none (public domain)
*/

html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, menu, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed,
figure, figcaption, footer, header, hgroup,
main, menu, nav, output, ruby, section, summary,
time, mark, audio, video {
  margin: 0;
  padding: 0;
  border: 0;
  font-size: 100%;
  font: inherit;
  vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure,
footer, header, hgroup, main, menu, nav, section {
  display: block;
}
/* HTML5 hidden-attribute fix for newer browsers */
*[hidden] {
    display: none;
}
body {
  line-height: 1;
}
menu, ol, ul {
  list-style: none;
}
blockquote, q {
  quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
  content: '';
  content: none;
}
table {
  border-collapse: collapse;
  border-spacing: 0;
}
`])));Cu(QR||(QR=Jj(["",""],["",""])),UT);var KR,QR;const ace=Cu`
  ${UT}
  ${FT}
  html{
    scroll-behavior: smooth;
  }
  body {
    font-family: "Pretendard Variable", Pretendard, -apple-system, BlinkMacSystemFont, system-ui, Roboto, "Helvetica Neue", "Segoe UI", "Apple SD Gothic Neo", "Noto Sans KR", "Malgun Gothic", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
  }

  ::selection {
    background: #CFA36E;
    color: #fff;
  }
  ::-moz-selection {
    background: #CFA36E;
    color: #fff;
  }

  .a11yHidden,
  legend {
    display: inline-block;
    overflow: hidden;
    position: absolute !important;
    clip: rect(0, 0, 0, 0);
    clip-path: inset(50%);
    width: 1px;
    height: 1px;
    margin: -1px;
  }

  fieldset {
    padding: 0;
  }
  button {
    cursor: pointer;
  }
`,On="#CFA36E",cp="#71747A",b_="#868B94",jT="#ADB5BD",lu="#C4C4C4",VT="#D1D3D8",ti="#E9ECEF",cu="#F8F9FA",Nl="#F2F3F6",lce=()=>v.jsxs(cce,{children:[v.jsxs(uce,{children:[v.jsxs("ul",{children:[v.jsx("li",{children:"중고거래"}),v.jsx("li",{children:"매물 등록하기"}),v.jsx("li",{children:"나의 매물보기"}),v.jsx("li",{children:"동네가게"}),v.jsx("li",{children:"채팅하기"})]}),v.jsxs("ul",{children:[v.jsx("li",{children:"당근 비즈니스"}),v.jsx("li",{children:"부동산 직거래"}),v.jsx("li",{children:"중고차 직거래"}),v.jsx("li",{children:"당근알바"}),v.jsx("li",{})]}),v.jsxs("ul",{children:[v.jsx("li",{children:"자주 묻는 질문"}),v.jsx("li",{children:"회사 소개"}),v.jsx("li",{children:"인재 채용"})]}),v.jsxs("div",{className:"download-app",children:[v.jsx("p",{children:"감자마켓 앱 다운로드"}),v.jsx("div",{className:"logobox",children:v.jsx("button",{type:"button",children:"Github"})})]})]}),v.jsxs(dce,{children:[v.jsxs("section",{className:"information",children:[v.jsxs("p",{children:[v.jsx("b",{children:"만든 사람 "}),"김동률 김미경 배상우 안유진 이성령"]}),v.jsxs("p",{children:[v.jsx("b",{children:"주소 "}),"서울특별시 구로구 디지털로 30길 28, 609호 (당근서비스)"]}),v.jsxs("p",{children:[v.jsx("b",{children:"전화 "})," 010-0000-0000"]}),v.jsxs("p",{children:[v.jsx("b",{children:"고객문의 "})," cs@daangnservice.com"]})]}),v.jsxs("section",{className:"snsgroup",children:[v.jsx("img",{alt:"페이스북",src:Zle}),v.jsx("img",{alt:"인스타그램",src:tce}),v.jsx("img",{alt:"유튜브채널",src:rce}),v.jsx("img",{alt:"네이버블로그",src:nce})]})]}),v.jsxs(hce,{children:[v.jsxs("section",{className:"inquirygroup",children:[v.jsx("a",{href:"/",children:"제휴 문의"}),v.jsx("a",{href:"/",children:"광고 문의"}),v.jsx("a",{href:"/",children:"PR 문의"}),v.jsx("a",{href:"/",children:"IR 문의"})]}),v.jsxs("section",{className:"terms",children:[v.jsx("a",{href:"/",children:"이용약관"}),v.jsx("a",{href:"/",children:"개인정보처리방침"}),v.jsx("a",{href:"/",children:"위치기반서비스 이용약관"}),v.jsx("a",{href:"/",children:"이용자보호 비전과 계획"})]})]})]}),cce=ne.footer`
  border-top: 1px solid ${Nl};
  margin-top: 1rem;
  padding-top: 1rem;
  display: flex;
  flex-direction: column;
  position: relative;
`,uce=ne.section` 
  display: flex;
  flex-direction: row;
  width : 64rem;
  height : 16.123rem;
  align-items: flex-start;
  position: relative;
  margin: 0 auto;
  padding-top: 3rem;
  /* justify-content: space-between; */

  ul {
    display: inline-block;
    font-size: 0.875rem;
    margin: 0 2rem;
    position: relative;
    right: 2rem;

    li {
      margin-bottom: 2rem;
    }
    
    a {
      text-decoration: none;
      color: #212325;
    }
  }
  
  .download-app {
    display: block;
    position: absolute;
    right: 10%;
    
    p {
      font-weight: 700;
      font-size: 0.875rem;
    }
        
    .logobox {
      margin-top: 1rem;
      
      button {
        width: 140px;
        height: 40px;
        background-color: ${VT};
        color: #212325;
        background-position: 24px 12px; 
        background-image: url(${ece});
        background-repeat: no-repeat;
        background-size: 16px;
        cursor: pointer;
        vertical-align: middle;
        padding-left: 16px;  
        border: 0;
        border-radius: 6px;
        font-weight: 700;
      }
    }

  }
`,dce=ne.div`
  border-top: 1px solid ${Nl};
  display: flex;
  flex-direction: row;
  width : 64rem;
  height : 5rem;
  align-items: flex-start;
  position: relative;
  margin: 1rem auto;
  justify-content: space-between;
  padding-top: 1rem;

  .information {
    color: #868B94;
    font-size: 0.813rem;
    line-height: 1.25rem;
    /* position: absolute; */
    /* left: 0%; */
  }

  .snsgroup {
    width : 16rem;
    margin-left: 6rem;

    img {
     margin: 0 1rem;
    }
  }
  
`,hce=ne.div`
  width : 64rem;
  margin: 3rem auto;
  /* align-items:; */

  .inquirygroup {
    margin-left: 0.5rem;
    margin-bottom: 1rem;
    position: relative;
    right: 1.5rem;
  }
  .terms {
    margin-left: 0.5rem;
    position: relative;
    right: 1.5rem;

  }
  a {
    text-decoration: none;
    color: #868B94;
    margin: 1rem;
    font-size: 0.813rem;
    line-height: 1.25rem;
    font-weight: 700;
  }
  
  a:hover {
    text-decoration : underline;
  }

`,BT=Tf({key:"toggle",default:!1}),fce="/assets/header_toggle-9dd21ab6.svg",pce=$n.auth(),mce=ne.button`
  background-color: transparent;
  font-size: 1.125rem;
	font-weight: 700;
  border: 0;
  color: #212325;
  padding: 0;
  cursor: pointer;
`;function gce(){const[t,e]=Et(BT),[n,r]=Et(Rl),[i,s]=Et(ri),o=async()=>{try{await pce.signOut(),s(null),r({location:"",agree:"",email:"",nickname:"",phoneNumber:"",profileImage:""}),e(!1),window.location.replace("/")}catch(a){console.error(a)}};return v.jsx(mce,{onClick:o,children:"로그아웃"})}function yce(){const[t,e]=Et(ri);return Et(BT),v.jsx(vce,{children:t===null?v.jsxs("ul",{children:[v.jsx("li",{children:v.jsx(ps,{className:"textLink",to:"/SignIn",children:"로그인"})}),v.jsx("li",{children:v.jsx(ps,{className:"textLink",to:"/SignUp",children:"회원가입"})})]}):v.jsxs("ul",{children:[v.jsx("li",{children:v.jsx(gce,{})}),v.jsx("li",{children:v.jsx(ps,{className:"textLink",to:"/myPage",children:"마이페이지"})})]})})}const vce=ne.div`
  background-image: url(${fce});
	background-position: center;
	background-repeat: no-repeat;
	background-size: cover;
	width: 213px;
	height: 135px;
	position: absolute;
	right: 16px;
	top: 53px;
	padding : 32px 40px;
	box-sizing: border-box;
	z-index: 100;
	
	ul {
		font-size: 1.125rem;
		font-weight: 700;
		line-height: 2.2rem;
	}

	.textLink {
			text-decoration: none;
			color: #212325;

			&:focus, &:hover, &:visited, &:link, &:active {
				text-decoration: none;
			}
	}
	
`,Zj=Tf({key:"searchKeywordState",default:""}),_ce="/assets/defaultProfile-deaa7bc1.svg",wce="/assets/logo(symbol_name)-900da4c3.svg";function bce(){const[t]=Et(ri),[e]=Et(Rl),[n,r]=Et(BT),[i,s]=Et(kx),[o,a]=Et(Zj),l=()=>{r(!n)},c=Rs();return v.jsxs(Sce,{children:[v.jsx(Ece,{className:"a11yHidden",children:"감자마켓"}),v.jsx(ps,{to:"/",children:v.jsx("img",{alt:"",src:wce})}),v.jsx(YR,{as:"a",className:"primary",onClick:()=>c("/hotArticles"),children:"중고거래"}),v.jsx(YR,{as:"a",onClick:()=>c("/writeArticle"),children:"매물 등록하기"}),v.jsx(xce,{children:v.jsx("input",{placeholder:"물품이나 동네를 검색해보세요",type:"text",value:o,onChange:u=>a(u.target.value)})}),v.jsx(Tce,{onClick:()=>{s(!0)},children:"채팅하기"}),v.jsxs(Ice,{children:[v.jsx(Cce,{"aria-label":"마이페이지",login:t,userInfo:e,onClick:l}),n&&v.jsx(yce,{})]})]})}const Sce=ne.header`
  flex-direction: row;
  display: flex;
  height : 64px;
  margin-left: auto;
  margin-right: auto;
  justify-content: center;
  flex-wrap: wrap;
  position: relative;

  .a11yHidden {
    display: inline-block;
    overflow: hidden;
    position: absolute !important;
    clip: rect(0, 0, 0, 0);
    clip-path: inset(50%);
    width: 1px;
    height: 1px;
    margin: -1px;
  }

  img {
    width: 101px;
    height: 26px;
    display: inline-block;
    margin-top: 16px;
    margin-right: 35px;
  }

  .primary {
    color: ${On};
  }
  
  .primary:hover {
    color: ${On};
  }

`,Ece=ne.h1`
  margin-right: 35px;
  `,xce=ne.form`
  margin-left: 5rem;
  margin-right: 3rem;
  margin-top: 12px;
  & input {
    color: ${b_};
    background-color: ${Nl};
    font-size: 16px;
    width: 288px;
    height : 40px;
    border: 0;
    border-radius: 6px;
    text-indent: 6px;
  }

  & input:focus {
    outline: none;
  }
`,YR=ne.button`
  background-color: transparent;
  border: 0;
  color: #4d5159;
  font-weight: 700;
  font-size: 18px;
  margin-right: 35px;
  display: block;
  line-height: 64px;
  cursor: pointer;
  &:hover {
    color: ${ti};
  }
`,Tce=ne.button`
  width: 98px;
  margin-top: 12px;
  margin-right: 2rem;
  margin-left: 2rem;
  height: 40px;
  color: #212124;
  font-weight: 700;
  font-size: 16px;
  background-color: #FFF;
  display: inline-block;
  border: 1px solid #D1D3D8;
  border-radius: 4px;
  cursor: pointer;
  
  &:hover {
    background-color: ${cu};
  }
`,Ice=ne.div`
  position: relative;

`,Cce=ne.button`
  margin-top: 12px;
  margin-right: 21px;
  width: 36px;
  height: 36px;
  background-color: transparent;
  border: 0;
  border-radius: 50%;
  background: ${t=>t.login===null?`url(${_ce}) no-repeat center local`:`url(${t.userInfo.profileImage}) no-repeat center local`};
  background-size: 36px;
  background-clip: border-box;
  cursor: pointer;
`;function kce(){const[t,e]=Et(ri),[n,r]=Et(Rl),[i,s]=H.useState(0);return H.useEffect(()=>{$n.auth().onAuthStateChanged(o=>{o?$n.firestore().collection("users").doc(o.uid).get().then(c=>{console.log(`로그인상태
UID : ${o.uid} 
닉네임 : ${c.data().nickname}`),e(o.uid),r({location:c.data().location,agree:c.data().agree,email:c.data().email,nickname:c.data().nickname,phoneNumber:c.data().phoneNumber,profileImage:c.data().profileImage}),s(1)}):(console.log("로그아웃상태"),s(1))})},[t]),v.jsxs(v.Fragment,{children:[v.jsx(ace,{}),v.jsxs("div",{className:"App",children:[v.jsx(bce,{}),v.jsx(Xle,{}),i?v.jsx(kz,{}):null,v.jsx(lce,{})]})]})}const eV="/assets/errorImg-cc170311.svg";Cu`
  ${UT}
  ${FT}
  html{
    scroll-behavior: smooth;
  }
  body {
    font-family: "Pretendard Variable", Pretendard, -apple-system, BlinkMacSystemFont, system-ui, Roboto, "Helvetica Neue", "Segoe UI", "Apple SD Gothic Neo", "Noto Sans KR", "Malgun Gothic", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
  }

  ::selection {
    background: #CFA36E;
    color: #fff;
  }
  ::-moz-selection {
    background: #CFA36E;
    color: #fff;
  }

  .a11yHidden,
  legend {
    display: inline-block;
    overflow: hidden;
    position: absolute !important;
    clip: rect(0, 0, 0, 0);
    clip-path: inset(50%);
    width: 1px;
    height: 1px;
    margin: -1px;
  }

  fieldset {
    padding: 0;
  }
  button {
    cursor: pointer;
  }
`;const up="#CFA36E",tV="#ADB5BD",Ace="#C4C4C4",zT="#D1D3D8";function Rce(t){const e=Rs();return v.jsxs(Nce,{children:[v.jsx("h2",{children:t.title}),v.jsx(Pce,{alt:"에러 페이지",src:eV}),v.jsx(Dce,{onClick:()=>{e(-1)},children:"뒤로가기"})]})}const Nce=ne.div`
  width: 100%;
  text-align: center;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
`,Pce=ne.img`
  width: 450px;
`,Dce=ne.button`
  display: block;
  width: 100px;
  height: 40px;
  margin: 40px auto;
  border: none;
  border-radius: 4px;
  background: ${up};
  color: white;
  font-weight: bold;
  cursor: pointer;
  font-size: 16px;
  animation: moveBtn 3s infinite;

  @keyframes moveBtn{
    0%{transform: rotate(1deg)}
    3%{transform: rotate(-1deg)}
    6%{transform: rotate(0deg)}
    100%{transform: rotate(0deg)}
  }
`,WT="/assets/default_profile-b36669d6.png",Oce="/assets/question-0f6dad00.svg",Lce="/assets/check-6d24649b.svg",nV="/assets/제품사진-dc45ad40.png",Mce=ne.article`

    display: flex;
    flex-direction: column;
    width: 312px;
    min-width: 312px;
    justify-content: space-between;
    font-family: "Roboto";
    ul,li,ol { list-style: none}
  ;
`,$ce=ne.section`
display: flex;
  align-items: center;
  padding: 0 20px;
  height: 64px;
  border-bottom: 1px solid ${Nl};
  font-weight: bold;

`,Fce=ne.section`
  display: flex;
  justify-content: end;
  align-items: center;
  font-size: .75rem;
  color: ${b_};
  padding: 0 6px;
  height: 44px;
  min-height: 44px;
  border-bottom: 1px solid ${Nl};
    button {
      border: none;
      background: transparent;
      font-size:.75rem;
      justify-items: center;
    }

    img {
      width:18px; 
      height:18px;
    }
  
`,Uce=ne.section`
    li {
    display: flex;
    border-bottom:1px solid ${ti};
    flex-direction:row;
    justify-content: space-between;
    flex: 1 0 0%clg;
    padding: 16px;
    align-items: center;
  }
  div{
    display: flex;
    &:first-child{
      color: ${cp};
      display: flex;
      align-items: center;
      .chat-preview{
        flex-direction: column;
        font-size: 12px;
        div:first-child{
          margin-bottom: 4px;
        }
        .other-name{
          color: #212122;
          font-weight: bold;
          margin-right: 6px;
        }
        
      }
      .last-talk{
        /* overflow-x: hidden;
        text-overflow: ellipsis;
        white-space: nowrap; */
      }
    }
    .product-preview{
      margin-left:10px;
    }
  }
  img.other-profile{
    border-radius:50%;
    margin-right: 10px;
    border: 1px solid ${ti};
  }

  `,jce=ne.div`
    border-top: 1px solid ${ti};
    display: flex;
    align-items: center;
    font-size: 14px;
    height: 56px;
    min-height: 56px;
    padding-left: 10px;
    a {
    text-decoration: none; 
    font-size: 14px;
    color: ${b_};
    margin-right: 4px;
    };

  `,Vce=ne.img.attrs({src:`${Oce}`})`
align-items: center;
width : 15px;
margin-bottom: 3px;
`,Bce=ne.img.attrs({src:`${WT}`})`
    border-radius:50%;
    margin-right: 10px;
    border: 1px solid ${ti};
    width: 40px;
`;function zce(){return v.jsxs(Mce,{children:[v.jsxs("main",{children:[v.jsx($ce,{children:"닉네임"}),v.jsxs(Fce,{children:["안읽은 메세지만 보기",v.jsx("button",{type:"button",children:v.jsx("img",{src:Lce,alt:"안읽은 메세지만 보기"})})]}),v.jsx(Uce,{children:v.jsx("ul",{children:v.jsxs("li",{className:"chat-list",children:[v.jsxs("div",{children:[v.jsx(Bce,{alt:"프로필"}),v.jsxs("div",{className:"chat-preview",children:[v.jsxs("div",{children:[v.jsx("span",{className:"other-name",children:"상대방"}),v.jsx("span",{className:"other-location",children:"지역"}),v.jsx("span",{children:"﹒"}),v.jsx("span",{className:"real-daytime",children:"날짜"})]}),v.jsx("div",{className:"last-talk",children:v.jsx("span",{children:"마지막 대화"})})]})]}),v.jsx("div",{className:"product-preview",children:v.jsx("img",{src:nV,width:"40px",alt:"제품사진"})})]})})})]}),v.jsxs(jce,{children:[v.jsx("a",{href:"#",children:"자주묻는 질문"}),v.jsx(Vce,{})]})]})}const Wce="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFESURBVHgB3ZYxTsNAEEX/XygocwOuwBEsCiQ6bkB6FBGKIEUpSAqwkEHBIvRwAzoKJOQjcAS4gU+wwxja9bJZxSsrr7CLkf3X339nh1Dy4ulKaMcQDtAFlJpiHqaTswXzexWzMkcCVGdh9DJGImh4bvTejY1uBgaJSS6466ldEPKJCAQ80NtyLcFGbDoZVYggLx4bUWctuaW8KVbiLAAVyC/EvFTTaEVOXLVWS3UVGUQQg++p/qSU5LMV+40IDM2+iAzXEtTG9zKLT2mmSx66aj3a+DSn178rjUAtbQtce0r1H7Bl8/6HeNLdH0sN+arrrBGA/G3yoGPOY6ktQ3tpfrfK1MUgwf5Y2hwxTdcPIfTrvILKUiJT6mP7R4xGMCj6G6I2AimRCJ2By52P97fq8OhYTyPo4MM9dIGO+tpEbmeXo/kPThNv/X2CylQAAAAASUVORK5CYII=",Hce="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKDSURBVHgBvVZdchJBEO6e3aCPHAFPAJzAcALhBMJjApZFFVHBh8QHoTRUIZWYPCaeIPEEkBNkPYF7A3nRSoCdtnv5kfCzMxKSrwp2dqa3v5me/kOwQOPwaJvAeQGgtwEpAYTxcAGph4QegfIQgu/VvVddky6MJPr8NQ+K9okgATZA8Enjh/dviuerRZYRtU4TNAwueJiCdcDE6DiZannHn19S8xP15slLCobXa5MJ2CK84et68yi7uJdZsk8nWVD6AjYJVPlaZffbAmFoRjnZxCE2hx66Tnpi3n8mDYLOA5AJ4mN/gCmheKO1J66H1Efx+AmhuD48MHDMgaOgxs5yKQ5sQI9HCaMFWFaB6hJQapUsAmWURsiu1DFw09VKKQNEBTDA1SrzrlLMRclqgqxSgMlVArdPb3ojba4PBvzZ6vsmWUR8jvXD4188XuWdHirdJq1egzkR2Mj23AgyQYoVnIEdbGTjCizApjhXiJfrrs9CCHsmoVunXxaHQE7Ki2zgVyvFwo3TNzqWcClYpmQOWzoWejK7e3t+TcqRPJ8MYlmTHs6jnuK4uTIKEu0ftFrx2l7pCxGm+dcWM0pcSe07aJ3FbZKHJvoRHfh34XESzs3XOCGLDX/L98ZyJhsMq0WjefzTKpdKYQXsAgahVUi7SR7nrZI+f1urlJ654YvcA5LZ/aWwAjGByo8mNM8h2GBy11NpTgD3q/JRGJ9OhtM4xKGTA4sQ+X8yLgADJzN5nRJWqzs+t3xl2DQCpyC6FwhDUmnvkDZzUj4Zh0+h9nb3TgZa3iY2ThOwFXTu0QV4ckWzJ4sknBI/ViO8QMzJQZPi4klJqeizrT7/CcmVQn1p0+r/BfNZKEpiO+kdAAAAAElFTkSuQmCC",Gce="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGcSURBVHgB7VZNUsIwFH4v7QH0BI430BvgDeAEwlKho8zwM4UNXSiOsJBR1uIJ5AjcQI7AEVw6FvvMKxQhkKKWdKPfTGaSL0m/NO+9b4LXnYcXADiCFIAAI5GWGIMAMgJSxr8gIMIEkF5hR9ALskggcm6ldNioOPtIWJBsYmG9IKHXqJ8Po6FbKw4IqAemBHFqDVXOt6d3YErQdc8mKtcql81dabtzn1G5q9t+YpOISRpxurZYwAUkhK2bIKJ8u9uXneApOgBzmrU9PrrM5K0HsuMmZwKYnw82rkHEQaNauuT+Tbd/EBBl476ZzGnYFHzhRcM3670QGoUpQSQqLGdzmMWSg18LsttobI0C8tyqM1J55gj1BhGTpTBB3z4Om3pNctysOy3d1mbF4ZiOvy8o/wp964Svi5sVYA4iH53PwRZIp/ras1Xww1qJTa1WHEuhWWykx25yIRXzNd7aQeSbZiXfOTZx1/VTyFJ5Xi4VYVKMoZbKQlAgDnctxlBLZeE0gWzSyh7BFCgsrz17icgSmMcfeLXJDBpBehh/AnH7r4TtbP5CAAAAAElFTkSuQmCC",qce="/assets/hambuger_menu-c60d0ca7.svg",Kce=ne.button`
border: none;
background-color: transparent;
display: inline-flex;
    justify-content: center;
    align-items: center;
    border-radius: 4px;
    padding: 0 10px;
    width: 24px;
    height: 24px;
  &:hover:active{
    background-color: ${lu};
    background-size: 100%;
    transition: background-color 1s ease-out;
  } 
`,Qce=ne.ul`
    position: absolute;
    right: 0;
    top: 60px;
    border: 1px solid ${jT};
    border-radius: 8px;
    padding: 10px;
    font-size: .875rem;
    background-color:${Nl};
    color: ${cp};
    will-change: opacity;
    animation: 0.3s ease-in 0s 1 normal none running fadeIn;
    z-index: 999;
    li{
      padding: 6px;
    }
`;function Yce({isToggleOpen:t,setIsToggleOpen:e}){const n=()=>{e(!t)};return v.jsxs(v.Fragment,{children:[v.jsx(Kce,{type:"button",onClick:n,children:v.jsx("img",{src:qce,alt:"더보기"})}),t&&v.jsxs(Qce,{children:[v.jsx("li",{children:"알림음 끄기"}),v.jsx("li",{children:"대화상대 차단하기"}),v.jsx("li",{children:"채팅방 나가기"})]})]})}const Xce="_main_1rkv1_1",Jce="_header_1rkv1_11",XR={main:Xce,header:Jce},Zce=ne.section`
  display: flex;
  justify-content: space-between;
  align-items: center;
  height: 70px;
  min-height: 64px;
  border-bottom: 1px solid ${ti};
    div{
      display: flex;
      align-items: center;
        span{
          &:nth-child(2){
            color: ${jT};
            font-size:12px;
            font-weight: 600;
          }
          &:nth-child(3){
          
            border:1px solid ${On};
            border-radius: 1000px;
            color: ${On};
            text-align: center;
            font-size: 10px;
            padding: 3px 5px;
            margin-left: 5px;
          }
      }
  }
`,eue=ne.img.attrs({src:`${WT}`})`
    border-radius:50%;
    margin-right: 10px;
    border: 1px solid ${ti};
    width: 40px;
`,tue=ne.section`
    display: flex;
    flex-direction: row;
    border-bottom: 1px solid ${ti};
    justify-content: space-between;
    align-items: center;
    padding: 10px 20px;
    img{
      margin-right: .75rem;
    }
    div{
      font-size: .875rem;
      .product-name-price{
        display: flex;
        flex-direction: column;
        span {
          margin-bottom: 2px;
          
          &:last-child{
            font-weight: 600;
          }
        }
      }
    }
    .sale-label{
      border: 1px solid ${jT};
      border-radius: 6px;
      padding: 7px;
      font-weight: 600;
    }
    
    a {
      text-decoration: none;
      color: inherit;
      display: flex;
      align-items: center;
    }



`;function nue(){const[t,e]=H.useState(!1);return v.jsxs("article",{className:XR.main,children:[v.jsxs(Zce,{className:XR.header,children:[v.jsxs("div",{children:[v.jsx(eue,{}),v.jsx("span",{children:"상대방이름"}),v.jsx("span",{children:"36.7℃"})]}),v.jsx(Yce,{isToggleOpen:t,setIsToggleOpen:e})]}),v.jsxs(tue,{children:[v.jsx("div",{children:v.jsxs("a",{href:"/",children:[v.jsx("img",{src:nV,width:"40px",alt:"제품사진"}),v.jsxs("div",{className:"product-name-price",children:[v.jsx("span",{children:"제품명"}),v.jsx("span",{children:"제품가격"})]})]})}),v.jsx("div",{className:"sale-label",children:"판매중"})]})]})}const rue="_main_1pocm_5",iue="_chatRecord_1pocm_23",sue="_addMessageBox_1pocm_65",W0={main:rue,chatRecord:iue,addMessageBox:sue},oue=ne.section`
position: relative;
  border: 1px solid ${cu};
  border-radius: 10px;
  padding:20px;
  margin: 20px;
  display: inline-flex;
  justify-content: center;
  align-items: center;
  background-color: ${cu};
  font-size: .875rem;
  color: ${b_};
`,JR=ne.section`
  margin:0 auto;
  border: 1px solid ${VT};
  border-radius: 14px;
  width: fit-content;
  padding: 5px 12px;
  font-size: .875rem;
  color: ${cp};
`,ZR=ne.section`
  display:none;
`,aue=ne.img.attrs({src:`${WT}`})`
    border-radius:50%;
    margin-right: 10px;
    border: 1px solid ${ti};
    width: 40px;
`,lue=ne.div`
  display: flex;
  flex-direction: row;
  align-items: center;
  span{

    padding: 10px 14px;
      max-width: 484px;
      font-size: 14px;
      border-radius: 2px 20px 20px;
      background-color: ${ti};
      color:${cp};
  }  
   
`,cue=ne.div`
  display: flex;
  justify-content: end;
  span{
      padding: 10px 14px;
      margin-top: 10px;
      max-width: 484px;
      font-size: 14px;
      border-radius: 20px 2px 20px 20px;
      background-color:${On};
      color: white;

    }

`,uue=ne.section`
display: flex;
flex-direction: column;
justify-content: end;
form{
  display: flex;
  justify-content: space-between;
    flex-direction: column;
    position: relative;
    border: 1px solid #212121;
    margin-top: 15px;
    border-radius: 8px;
    height: 125px;
}
textarea{
      margin: 15px 15px 0px;
      resize: none;
      font-size: 14px;
      border: none;
      outline: none;
      color: #212121;
} 
div{
  margin: 3px 10px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  img{
    margin-right: 20px;
    width: 20px;
  }
  span{
    display: flex;
    align-items: center;
    margin-right: 10px;
    color:${VT};
  }
}
`,due=ne.button`
  border: none;
  background-color: ${ti};
  border-radius: 4px;
  color: ${cu};
  width: 64px;
  height: 32px;
  margin-left: 10px;
`;function hue(){const[t,e]=H.useState(""),[n,r]=H.useState([]),i=o=>{o.preventDefault(),t.trim()&&(r(a=>[...a,t]),e(""))},s=o=>{e(o.target.value)};return v.jsxs("article",{className:W0.main,children:[v.jsx(nue,{}),v.jsx(oue,{children:v.jsx("span",{children:"000님은 당근페이 사용자예요. 채팅방에서 바로 송금할 수 있어요."})}),v.jsxs("section",{className:W0.chatRecord,children:[v.jsx(JR,{children:"0000년 00월 00일"}),v.jsxs(lue,{children:[v.jsx(aue,{alt:"상대방 프로필 사진"}),v.jsx("span",{children:"채팅내용"})]}),v.jsx(ZR,{children:"오전 1:55"}),v.jsx(JR,{children:"0000년 00월 00일"}),v.jsxs("div",{children:[v.jsx(ZR,{children:"오전 1:55"}),v.jsx(cue,{children:v.jsx("span",{children:"채팅"})})]}),n.map((o,a)=>v.jsx("span",{className:W0.addMessageBox,children:o},a))]}),v.jsx(uue,{children:v.jsxs("form",{onSubmit:i,children:[v.jsx("textarea",{className:"textbox",placeholder:"메세지를 입력해주세요",value:t,maxLength:1e3,onChange:s}),v.jsxs("div",{children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"file-input",children:v.jsx("img",{id:"file-input",src:Gce,alt:"이미지 파일 추가 "})}),v.jsx("label",{htmlFor:"file-input",children:v.jsx("img",{id:"file-input",src:Wce,alt:"단축어"})}),v.jsx("label",{htmlFor:"file-input",children:v.jsx("img",{id:"file-input",src:Hce,alt:"이모티콘"})})]}),v.jsxs("div",{children:[v.jsxs("span",{className:"text-length",children:[t.length,"/1000"]}),v.jsx(due,{type:"submit",children:"전송"})]})]})]})})]})}const fue="_main_1m9u3_15",pue={main:fue};function mue(){return v.jsx(v.Fragment,{children:v.jsxs("main",{className:pue.main,children:[v.jsx(zce,{}),v.jsx(hue,{})]})})}function HT(t){let e=t<0?!1:t;if(t<1e4)return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");let n=["","만","억","조","경"],r=1e4,i=n.length,s=[],o="";for(let a=0;a<i;a++){let l=e%Math.pow(r,a+1)/Math.pow(r,a);l=Math.floor(l),l>0&&(s[a]=l)}for(let a=0;a<s.length;a++)s[a]&&(o=String(s[a])+n[a]+`${o%1e4===0?"":" "}`+o);return o}const gue=ne.a`
& .product{
  display:inline-block;
  width:201px;
  text-decoration:none;
  color:black;
  cursor:pointer;
}
`,yue=ne.div`
  margin-bottom: 7px;
  width:201px;
  display:flex;
  flex-flow: column;
  & > *{
  margin-bottom: 4px;
  }
`,vue=ne.div`
  margin:0;
  & img{
    display:block;
    border-radius: 12px;
    width:201px;
    height: 201px ;
    overflow:hidden;
    object-fit: cover;
  }
`,_ue=ne.div`
  flex-flow: row;

  & span{
    margin-top:5.5px;
    font-size: 12px;
    color: #868E96;
  }
  & span::after{
    content: '•';
    margin : 0 4px;  
  }
  & span:last-child::after{
    content:'';
  }
`,wue=ne.img`
  
  width:100%;
  height:100%;
  
`,bue=ne.h3`
  margin-top : 12px;
  font-weight: 400;
  font-size: 16px;
  height: 20px;
  overflow:hidden;
  white-space:nowrap;
  text-overflow:ellipsis;
`,Sue=ne.span`
font-weight: 700;
margin-top:5px;
`,Eue=ne.span`
font-size: 13px;
margin-top: 5px;
`;function S_({title:t,price:e,heart:n,chat:r,imgsrc:i,id:s,check:o,location:a}){return v.jsx(gue,{children:v.jsxs(ps,{to:`/detailarticle/${s}`,className:"product",rel:"noopener noreferrer",children:[v.jsx(vue,{children:v.jsx("div",{children:v.jsx(wue,{alt:"상품 자세히 보기",src:i[0]!==void 0?i:"https://firebasestorage.googleapis.com/v0/b/patato-market.appspot.com/o/no_image.jpg?alt=media&token=d2d005ba-9dbb-40cb-bd61-4d47f5118b2c"})})}),v.jsxs(yue,{children:[v.jsx(bue,{children:t}),v.jsxs(Sue,{children:[HT(e),"원"]}),v.jsxs(Eue,{children:[a.sido," ",a.sigungu," ",a.bname]})]}),v.jsxs(_ue,{children:[v.jsxs("span",{children:["조회 ",o]}),v.jsxs("span",{children:["관심 ",n]}),v.jsxs("span",{children:["채팅 ",r]})]})]})})}S_.defaultProps={imgsrc:["https://firebasestorage.googleapis.com/v0/b/patato-market.appspot.com/o/%E1%84%80%E1%85%A5%E1%84%8B%E1%85%AE%E1%86%AF%E1%84%85%E1%85%B5%E1%84%8E%E1%85%B5.png?alt=media&token=f23ce701-2450-495f-8166-2e1049699b2b"],title:"상품 이름",price:505445,location:"인천시 부평구 산곡동",heart:0,chat:0};const GT=ne.section`
  margin: 35px auto;
  display: grid;
  gap: 55px;
  grid-template-columns: repeat(4, 1fr);
  grid-template-rows: 309px;
  & .loading{
    left:43%;
    position: absolute;
  }
  @media (max-width: 767px){
    grid-template-columns: repeat(2, 1fr);
  }
  @media (min-width:768px) and (max-width: 1023px){
    grid-template-columns: repeat(3, 1fr);
  }
`;function xue(){const t=Rs(),[e,n]=H.useState(0),[r,i]=H.useState([]),[s,o]=Et(kx);return H.useEffect(()=>{w_.onSnapshot(a=>{const l=a.docs.map(c=>({id:c.id,...c.data()}));l.sort((c,u)=>u.check-c.check),i(l.slice(0,8)),n(1)})},[]),v.jsxs("main",{children:[v.jsx(Tue,{}),v.jsxs(iV,{children:[v.jsxs("div",{className:"home-main-description",children:[v.jsxs("h2",{children:["당신 근처의",v.jsx("br",{}),"감자마켓"]}),v.jsxs("p",{children:["중고 거래부터 동네 정보까지, 이웃과 함께해요. ",v.jsx("br",{}),"가깝고 따뜻한 당신의 근처를 만들어요."]})]}),v.jsx("div",{className:"home-main-image",children:v.jsx("img",{alt:"",src:"https://d1unjqcospf8gs.cloudfront.net/assets/home/main/3x/image-top-68ba12f0da7b5af9a574ed92ca8b3a9c0068db176b566dd374ee50359693358b.png"})})]}),v.jsxs(Iue,{children:[v.jsx("div",{className:"home-main-image",children:v.jsx("img",{alt:"",src:"https://d1unjqcospf8gs.cloudfront.net/assets/home/main/3x/image-1-39ac203e8922f615aa3843337871cb654b81269e872494128bf08236157c5f6a.png"})}),v.jsxs("div",{className:"home-main-description",children:[v.jsxs("h2",{children:["우리 동네",v.jsx("br",{})," 중고 직거래 마켓"]}),v.jsx("p",{children:"동네 주민들과 가깝고 따뜻한 거래를 지금 경험해보세요."}),v.jsxs("div",{className:"link-wrap",children:[v.jsx(ps,{to:"/hotarticles",children:"인기매물 보기"}),v.jsx("button",{onClick:()=>{o(!0)},children:"주민들과 소통하기"})]})]})]}),v.jsxs(Cue,{children:[v.jsx("h2",{children:"중고거래 인기매물"}),v.jsx(GT,{className:"Hot8",children:e?r.map(({content:a,title:l,price:c,side:u,imgsrc:d,id:h,check:f,heart:p},y)=>v.jsx(S_,{check:f,content:a,heart:p,id:h,imgsrc:d,price:c,side:u,title:l},y)):v.jsx("p",{children:"Render Failed"})}),v.jsx(eN,{as:"a",onClick:()=>t("/hotArticles"),children:"인기매물 더보기"})]}),v.jsxs(kue,{children:[v.jsx(eN,{children:"중고거래 인기검색어"}),v.jsxs("ul",{children:[v.jsx("li",{children:v.jsx("a",{href:"/",children:"자전거"})}),v.jsx("li",{children:v.jsx("a",{href:"/",children:"의자"})}),v.jsx("li",{children:v.jsx("a",{href:"/",children:"아이폰"})}),v.jsx("li",{children:v.jsx("a",{href:"/",children:"냉장고"})}),v.jsx("li",{children:v.jsx("a",{href:"/",children:"노트북"})}),v.jsx("li",{children:v.jsx("a",{href:"/",children:"패딩"})}),v.jsx("li",{children:v.jsx("a",{href:"/",children:"아이패드"})}),v.jsx("li",{children:v.jsx("a",{href:"/",children:"모니터"})}),v.jsx("li",{children:v.jsx("a",{href:"/",children:"스타벅스"})}),v.jsx("li",{children:v.jsx("a",{href:"/",children:"책상"})})]})]})]})}const rV="#212529",Tue=Cu`
  body {
    color: ${rV};
    background-color: #FFF;
    min-height: 100vh;
  }
  h2 {
    font-weight: 700;
    font-size: 3rem;
    text-align: center;
  }
  @media (min-width: 768px) and (max-width: 1200px){
    h2 {
      font-size: 2.5rem;
    }
  }
  @media (max-width: 768px){
    h2 {
      font-size: 1.5rem;
    }
  }
`,iV=ne.section`
  background-color: #FBF7F2;
  display: flex;
  justify-content: center;
  max-height: 47.5rem;
  padding: 30px 200px;
  .home-main-description {
    display: flex;
    flex-direction: column;
    justify-content: center;
    h2 {
      line-height: 1.3;
      text-align: left;
      margin-bottom: 30px;
    }
    p {
      font-size: 1rem;
      line-height: 1.5;
    }
  }
  .home-main-image {
    width: 60%;
    margin: auto 0;
    img {
      padding: 50px 0 0 50px;
      width: 100%;
      height: auto;
      box-sizing: border-box;
    }
  }
  @media (max-width: 1200px){
    .home-main-description h2 {
      margin-bottom: 10px;
    }
    .home-main-image img {
      padding: 20px 0 0 20px;
    }
  }
  @media (min-width:768px) and (max-width: 1200px){
    padding: 30px 100px;
  }
  @media (max-width: 768px){
    padding: 50px;
    .home-main-description {
      padding-left: 0;
    }
  }
`,Iue=ne(iV)`
  background-color: #FFF;
  .home-main-image {
    width: 40%;
    img {
      padding: 0;
    }
  }
  .home-main-description {
    width: 60%;
    margin-left: 100px;
  }
  .link-wrap {
    display: flex;
    width: 100%;
    gap: 1.174rem;
    margin-top: 30px;
    a, 
    button {
      color: ${rV};
      font-size: 1.125rem;
      font-weight: 700;
      background-color: ${Nl};
      text-decoration: none;
      padding: 1rem 1.5rem;
      border: 0;
      border-radius: 6px;
      white-space: nowrap;
    }
  }
  @media (max-width: 1200px){
    .link-wrap {
      margin-top: 10px;
    }
  }
  @media (min-width:768px) and (max-width: 1200px){
    .home-main-description {
      margin-left: 50px;
    }
  }
  @media (max-width: 768px){
    .home-main-description {
      margin-left: 20px;
    }
    .link-wrap {
      flex-direction: column;
      width: fit-content;
      a, 
      button {
        padding: 0.5rem 1rem;
        font-size: 1rem;
      }
    }
  }
`,Cue=ne.section`
  background-color: ${cu};
  padding-top: 125px;
  padding-bottom: 5rem;
  margin: 0 auto;
  .Hot8 {
    width: 980px;
    margin: 60px auto 5rem;
  }
  @media (min-width: 768px) and (max-width: 1023px){
    .Hot8 {
      width: 760px;
    }
  }
  @media (max-width: 768px){
    .Hot8 {
      width: 480px;
    }
  }
`,eN=ne.button`
  margin-left: auto;
  margin-right: auto;
  background-color: transparent;
  border: 0;
  font-weight: 700;
  text-decoration: underline;
  display: block;
  text-align: center;
  cursor: pointer;
`,kue=ne.section`
  width: 64rem;
  margin: 1.438rem auto 0;
  padding-bottom: 1rem;
  ul {
    display: flex;
    justify-content: center;
    column-gap: 3.2rem;
    flex-wrap: wrap;
    margin-top: 1rem;
  }
  ul li {
    display: inline-block;
    vertical-align: center;
    a {
      color: #212325;
      text-decoration: none;
      line-height: 30px;
      white-space: nowrap;
    }
  }
  @media (min-width: 768px) and (max-width: 1023px){
    width: 760px;
  }
  @media (max-width: 768px){
    width: 480px;
  }
`,Aue="/assets/loading-spinner-524188d7.gif",Rue=ne.img`
  position: absolute;  
  left:40%;
  width:240px;

`,af=({className:t})=>v.jsx(v.Fragment,{children:v.jsx(Rue,{alt:"로딩 중입니다.",className:t,src:Aue})}),Nue=ne.a`
& .product{
  display:inline-block;
  width:201px;
  text-decoration:none;
  color:black;
  cursor:pointer;
}
`,Pue=ne.div`
  margin-bottom: 7px;
  width:201px;
  display:flex;
  flex-flow: column;
  & > *{
  margin-bottom: 4px;
  }
`,Due=ne.div`
  margin:0;
  & img{
    display:block;
    border-radius: 12px;
    width:201px;
    height: 201px ;
    overflow:hidden;
    object-fit: cover;
  }
`,Oue=ne.div`
  flex-flow: row;

  & span{
    margin-top:5.5px;
    font-size: 12px;
    color: #868E96;
  }
  & span::after{
    content: '•';
    margin : 0 4px;  
  }
  & span:last-child::after{
    content:'';
  }
`,Lue=ne.img`
  
  width:100%;
  height:100%;
  
`,Mue=ne.h3`
  margin-top : 12px;
  font-weight: 400;
  font-size: 16px;
  height: 20px;
  overflow:hidden;
  white-space:nowrap;
  text-overflow:ellipsis;
`,$ue=ne.span`
font-weight: 700;
margin-top:5px;
`,Fue=ne.span`
font-size: 13px;
margin-top: 5px;
`;function sV({title:t,price:e,heart:n,chat:r,imgsrc:i,id:s,check:o,location:a}){return v.jsx(Nue,{children:v.jsxs(ps,{to:`/detailarticle/${s}`,className:"product",rel:"noopener noreferrer",children:[v.jsx(Due,{children:v.jsx("div",{children:v.jsx(Lue,{alt:"상품 자세히 보기",src:i[0]!==void 0?i:"https://firebasestorage.googleapis.com/v0/b/patato-market.appspot.com/o/no_image.jpg?alt=media&token=d2d005ba-9dbb-40cb-bd61-4d47f5118b2c"})})}),v.jsxs(Pue,{children:[v.jsx(Mue,{children:t}),v.jsxs($ue,{children:[HT(e),"원"]}),v.jsxs(Fue,{children:[a.sido," ",a.sigungu," ",a.bname]})]}),v.jsxs(Oue,{children:[v.jsxs("span",{children:["조회 ",o]}),v.jsxs("span",{children:["관심 ",n]}),v.jsxs("span",{children:["채팅 ",r]})]})]})})}sV.defaultProps={imgsrc:["https://firebasestorage.googleapis.com/v0/b/patato-market.appspot.com/o/%E1%84%80%E1%85%A5%E1%84%8B%E1%85%AE%E1%86%AF%E1%84%85%E1%85%B5%E1%84%8E%E1%85%B5.png?alt=media&token=f23ce701-2450-495f-8166-2e1049699b2b"],title:"상품 이름",price:505445,location:"인천시 부평구 산곡동",heart:0,chat:0};const tN=({newArr:t,searchKeyword:e,setHasResults:n})=>{const r=t.filter(({title:i})=>i.toLowerCase().includes(e.toLowerCase()));return r.length===0?(n(!1),v.jsxs(v.Fragment,{children:[v.jsx("img",{src:eV,alt:"Error"}),v.jsx("h1",{children:" 찾는 제품이 없습니다."}),";"]})):(n(!0),r.map(({content:i,title:s,price:o,side:a,imgsrc:l,id:c,check:u,heart:d,location:h},f)=>v.jsx(sV,{check:u,content:i,heart:d,id:c,imgsrc:l,price:o,side:a,title:s,location:h},f)))},qT=Cu`
  .wrapper{
    width: 980px;
    margin: 60px auto;
    @media (max-width: 767px){
      width: 480px
    }
    @media (min-width:768px) and (max-width: 1023px){
      width: 760px
    }
  }
  h2.articleTitle{
    font-size: 32px;
    font-weight: bold;
    text-align: center;
    margin-bottom: 45px;
  }


`,Uue=ne.div`
display: flex;
flex-direction: column;
justify-content: center;
align-items: center;
margin: 0 auto;

`;let fd=[];function jue(){const[t,e]=H.useState(0),n=Dq(Zj),[r,i]=H.useState(!0);return H.useEffect(()=>{window.scrollTo(0,0),fd=[],Xc(w_,s=>{s.docs.map(o=>{const a={id:o.id,...o.data()};fd.push(a),fd.sort((l,c)=>c.date-l.date),e(1)})})},[]),v.jsxs("main",{className:"wrapper",children:[v.jsx(qT,{}),v.jsx("h2",{className:"articleTitle",children:"중고거래 인기매물"}),r?v.jsxs(GT,{children:[v.jsx("h3",{className:"a11yHidden",children:"중고거래 매물리스트"}),t?v.jsx(tN,{newArr:fd,searchKeyword:n,setHasResults:i}):v.jsx(af,{className:"loading"})]}):v.jsxs(Uue,{children:[v.jsx("h3",{className:"a11yHidden",children:"중고거래 매물리스트"}),t?v.jsx(tN,{newArr:fd,searchKeyword:n,setHasResults:i}):v.jsx(af,{className:"loading"})]})]})}const is=ne.button`
  cursor: pointer;
  width: auto;
  min-width: 99px;
  height: 40px;
  color : ${t=>t.filled?"#FFFFFF":"#212124"};
  background: ${t=>t.filled?On:"#FFFFFF"};
  border: 1px solid ${t=>t.filled?"":"#D1D3D8"};
  border-radius: 4px;
  line-height: 40px;
  text-align: center;
  font-weight: 700;
  font-size: 16px;
  &:hover{
    background: ${t=>t.filled?"#A7845B":"#D1D3D8"};
    transition: .5s;
  }
  .BoardDeleteButton {
    border: 1px solid #FFFFFF;
  }
`;function E_(){const[t]=Et(ri),e=Rs();return v.jsxs(Vue,{children:[v.jsx("h2",{className:"error-message",children:t===null?"로그인 후 사용해주세요.":"이미 로그인 한 사용자 입니다."}),v.jsxs("div",{className:"button-div",children:[v.jsx(is,{filled:!0,as:"a",onClick:()=>{e(t===null?"/signin":"/mypage")},children:t===null?"로그인":"마이페이지"}),v.jsx(is,{as:"a",onClick:()=>{e(-1)},children:"뒤로가기"})]})]})}const Vue=ne.main`
  display:flex;
  flex-flow:column;
  justify-content: center;
  align-items: center;
  width: 886px;
  height: 216px;
  margin:60px auto;
  .error-message{
    font-size:32px;
    font-weight: 700;
    margin-bottom:24px;
  }
  & .button-div{
    display:flex;
    gap:12px;
  }
`;function Bue(){const[t,e]=H.useState(!1),[n]=Et(ri),[r]=Et(Rl),[i,s]=H.useState([]);return H.useEffect(()=>{w_.where("userId","==",n).onSnapshot(a=>{const l=a.docs.map(c=>({id:c.id,...c.data()}));l.sort((c,u)=>u.date-c.date),s(l),e(!0)})},[n]),v.jsx(v.Fragment,{children:n==null?v.jsx(E_,{state:"login"}):v.jsxs(zue,{className:"wrapper",children:[v.jsx(qT,{}),v.jsx("h2",{className:"articleTitle",children:"마이페이지"}),v.jsx(Wue,{children:v.jsxs("div",{className:"basicInfo",children:[v.jsx("img",{alt:"내 프로필 사진",className:"profileImage",src:r.profileImage}),v.jsxs("span",{className:"intro",children:[v.jsxs("b",{"aria-label":"내 주소",className:"location",children:['"',r.location.sido," ",r.location.sigungu," ",r.location.bname,'"']}),"에서 🥔를 캐는",v.jsx("br",{}),"나는",v.jsx("b",{"aria-label":"내 닉네임",className:"nickname",children:r.nickname})]}),v.jsxs("span",{"aria-label":"내 UID",className:"uid",children:["#",n]}),v.jsxs(Hue,{children:[v.jsx("img",{alt:"매너온도 아이콘",className:"face",src:"src/assets/icon_temp4.svg"}),v.jsxs("div",{className:"right-box",children:[v.jsx("span",{className:"text",children:"36.5 ℃"}),v.jsx("div",{className:"gauge",children:v.jsx("span",{className:"gauge_bar",style:{width:36+"%"}})})]})]})]})}),v.jsx("h2",{className:"articleTitle",children:"나의 매물"}),v.jsx(GT,{children:t?i.map(({content:o,title:a,price:l,side:c,imgsrc:u,id:d,check:h,heart:f},p)=>v.jsx(S_,{check:h,content:o,heart:f,id:d,imgsrc:u,price:l,side:c,title:a},p)):v.jsx(af,{className:"loading"})})]})})}const zue=ne.main`
  padding: 80px 0 40px;
  h2 {
    line-height: 36px;
    font-size: 32px;
    font-weight: 700;
    text-align: center;
    margin-bottom: 45px;
  }
`,Wue=ne.section`
  .basicInfo {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 640px;
    margin: 0 auto 100px;
    padding: 30px 10px;
    box-sizing: border-box;
    border-radius: 10px;
    box-shadow: 0 3px 7px 3px rgb(0 0 0 / 7%);
    .profileImage {
      width: 100px;
      height: 100px;
      object-fit: cover;
      margin-bottom: 20px;
      border-radius: 50%;
      border: 1px solid ${lu};
    }
    .intro {
      margin-bottom: 6px;
      line-height: 30px;
      font-size: 12px;
      text-align: center;
    }
    .location {
      padding: 0px 4px;
      color: ${On};
      font-size: 16px;
      line-height: 24px;
      margin: 0 3px;
    }
    .nickname {
      padding: 0 4px;
      font-size: 22px;
      font-weight: 700;
      line-height: 30px;
    }
    .uid {
      font-size: 12px;
      color: ${lu};
      vertical-align: top;
    }
    /* button {
      width: auto;
      height: 40px;
      padding: 0 30px;
      line-height: normal;
    } */
    @media screen and (max-width: 767px) {
      width: calc(100% - 60px);
    }
  }
`,Hue=ne.div`
  display: flex;
  width: 360px;
  padding: 20px;
  box-sizing: border-box;
  .face {
    width: 30px;
    height: 30px;
    margin-right: 10px;
  }
  .right-box {
    flex: 1;
  }
  .text {
    color: rgb(49,158,69);
    font-weight: 700;
    font-size: 16px;
  }
  .gauge {
    position: relative;
    width: 100%;
    height: 8px;
    margin: 4px 0;
    border-radius: 2.5px;
    background-color: rgb(233,236,239);
    &_bar {
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      border-radius: 2.5px;
      background-color: rgb(49,158,69);
    }
  }
  @media screen and (max-width: 767px) {
    max-width: 360px;
    width: 100%;
  }
`,Gue="/assets/closebutton-8e17b340.svg";function que({recommend:t}){const[e]=Et(Rl),n=H.useRef(),r=NS(),i=()=>{const s=Gi(zi,"UserWrite",r.id);Yc(s).then(a=>{t=a.data().recommend,t.push({id:e.nickname,time:Date(),content:n.current.value,commendimg:e.profileImage}),n.current.value="",Do(s,{recommend:t}).then(()=>{location.reload()})})};return v.jsxs(Kue,{children:[v.jsxs("h2",{children:["댓글 ",t.length]}),v.jsx("ul",{children:t.length>0?v.jsx(v.Fragment,{children:t.map(({content:s,id:o,time:a,commendimg:l},c)=>v.jsxs("li",{className:"recommend-list",children:[v.jsx("img",{alt:"사진",src:l||"https://firebasestorage.googleapis.com/v0/b/potato-market-lab18.appspot.com/o/default_profile.png?alt=media&token=bdb0de59-063c-42f9-823d-34e5d7b254c3"}),v.jsxs("div",{className:"recommend-wrapper",children:[v.jsx("span",{children:o||"수상한 고구마"}),v.jsx("span",{className:"time-span",children:a.slice(3,23)})]}),v.jsx("span",{className:"content",children:s})]},c))}):v.jsx("p",{children:"아직 댓글이 없습니다."})}),v.jsxs("div",{className:"input-div",children:[v.jsx("img",{alt:"본인 프로필",src:e.profileImage?e.profileImage:"https://firebasestorage.googleapis.com/v0/b/potato-market-lab18.appspot.com/o/default_profile.png?alt=media&token=bdb0de59-063c-42f9-823d-34e5d7b254c3"}),v.jsx("input",{ref:n,type:"text"}),v.jsx("button",{type:"button",onClick:i,children:"게시"})]})]})}const Kue=ne.div`
  padding: 35px 0;
  border-bottom: 1px solid rgb(233, 236, 239);
  img{
    border-radius: 50%;
    width:50px;
    height: 50px;
  }
  span{
    font-weight: 700;
  }
  h2{
    font-weight: 600;
    font-size: 19px;
    margin-bottom: 20px;
  }
  p{
    margin-bottom: 20px;
  }
  .recommend-list{
    height: 75px;
    display: flex;
    position: relative;
  }
  .time-span{
    margin-left: 5px;
    font-weight: 400;
    font-size: 11px;
    color: ${Ace};
    letter-spacing: .5px;
  }
  .recommend-wrapper{
    left: 65px;
    position: absolute;
    display: flex;
    align-items: center;
    gap: 4px;
    margin-top: 6px;
  }
  .input-div{
    margin-top: 10px;
    gap: 15px;
    position: relative;
    display: flex;
    justify-content: center
  }
  .content{
    word-wrap: break-word;
    display: inline;
    margin-left: 15px;
    margin-top: 27px;
    max-width: 580px;
  }
  .input-div input{
    border: 1px solid rgb(209, 211, 216);
    border-radius: 12px;
    width:80%;
    padding:0 70px 0 10px;
  }
  .input-div input:focus{
    outline: none;
  }
  .input-div button{
    padding 10px 15px;
    top: 7px;
    position: absolute;
    right: 10px;
    border: none;
    background-color: inherit;
    color: ${up};
    font-weight: 700;
  }
`;function nN(t){return t!==null&&typeof t=="object"&&"constructor"in t&&t.constructor===Object}function KT(t={},e={}){Object.keys(e).forEach(n=>{typeof t[n]>"u"?t[n]=e[n]:nN(e[n])&&nN(t[n])&&Object.keys(e[n]).length>0&&KT(t[n],e[n])})}const oV={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Pl(){const t=typeof document<"u"?document:{};return KT(t,oV),t}const Que={document:oV,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(t){return typeof setTimeout>"u"?(t(),null):setTimeout(t,0)},cancelAnimationFrame(t){typeof setTimeout>"u"||clearTimeout(t)}};function Br(){const t=typeof window<"u"?window:{};return KT(t,Que),t}function Yue(t){const e=t;Object.keys(e).forEach(n=>{try{e[n]=null}catch{}try{delete e[n]}catch{}})}function Tb(t,e=0){return setTimeout(t,e)}function lf(){return Date.now()}function Xue(t){const e=Br();let n;return e.getComputedStyle&&(n=e.getComputedStyle(t,null)),!n&&t.currentStyle&&(n=t.currentStyle),n||(n=t.style),n}function Jue(t,e="x"){const n=Br();let r,i,s;const o=Xue(t);return n.WebKitCSSMatrix?(i=o.transform||o.webkitTransform,i.split(",").length>6&&(i=i.split(", ").map(a=>a.replace(",",".")).join(", ")),s=new n.WebKitCSSMatrix(i==="none"?"":i)):(s=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),r=s.toString().split(",")),e==="x"&&(n.WebKitCSSMatrix?i=s.m41:r.length===16?i=parseFloat(r[12]):i=parseFloat(r[4])),e==="y"&&(n.WebKitCSSMatrix?i=s.m42:r.length===16?i=parseFloat(r[13]):i=parseFloat(r[5])),i||0}function Yp(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"}function Zue(t){return typeof window<"u"&&typeof window.HTMLElement<"u"?t instanceof HTMLElement:t&&(t.nodeType===1||t.nodeType===11)}function kr(...t){const e=Object(t[0]),n=["__proto__","constructor","prototype"];for(let r=1;r<t.length;r+=1){const i=t[r];if(i!=null&&!Zue(i)){const s=Object.keys(Object(i)).filter(o=>n.indexOf(o)<0);for(let o=0,a=s.length;o<a;o+=1){const l=s[o],c=Object.getOwnPropertyDescriptor(i,l);c!==void 0&&c.enumerable&&(Yp(e[l])&&Yp(i[l])?i[l].__swiper__?e[l]=i[l]:kr(e[l],i[l]):!Yp(e[l])&&Yp(i[l])?(e[l]={},i[l].__swiper__?e[l]=i[l]:kr(e[l],i[l])):e[l]=i[l])}}}return e}function Xp(t,e,n){t.style.setProperty(e,n)}function aV({swiper:t,targetPosition:e,side:n}){const r=Br(),i=-t.translate;let s=null,o;const a=t.params.speed;t.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(t.cssModeFrameID);const l=e>i?"next":"prev",c=(d,h)=>l==="next"&&d>=h||l==="prev"&&d<=h,u=()=>{o=new Date().getTime(),s===null&&(s=o);const d=Math.max(Math.min((o-s)/a,1),0),h=.5-Math.cos(d*Math.PI)/2;let f=i+h*(e-i);if(c(f,e)&&(f=e),t.wrapperEl.scrollTo({[n]:f}),c(f,e)){t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout(()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[n]:f})}),r.cancelAnimationFrame(t.cssModeFrameID);return}t.cssModeFrameID=r.requestAnimationFrame(u)};u()}function Mi(t,e=""){return[...t.children].filter(n=>n.matches(e))}function lV(t,e=[]){const n=document.createElement(t);return n.classList.add(...Array.isArray(e)?e:[e]),n}function ede(t,e){const n=[];for(;t.previousElementSibling;){const r=t.previousElementSibling;e?r.matches(e)&&n.push(r):n.push(r),t=r}return n}function tde(t,e){const n=[];for(;t.nextElementSibling;){const r=t.nextElementSibling;e?r.matches(e)&&n.push(r):n.push(r),t=r}return n}function ro(t,e){return Br().getComputedStyle(t,null).getPropertyValue(e)}function Yg(t){let e=t,n;if(e){for(n=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(n+=1);return n}}function cV(t,e){const n=[];let r=t.parentElement;for(;r;)e?r.matches(e)&&n.push(r):n.push(r),r=r.parentElement;return n}function Ib(t,e,n){const r=Br();return n?t[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(r.getComputedStyle(t,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(r.getComputedStyle(t,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom")):t.offsetWidth}let H0;function nde(){const t=Br(),e=Pl();return{smoothScroll:e.documentElement&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch)}}function uV(){return H0||(H0=nde()),H0}let G0;function rde({userAgent:t}={}){const e=uV(),n=Br(),r=n.navigator.platform,i=t||n.navigator.userAgent,s={ios:!1,android:!1},o=n.screen.width,a=n.screen.height,l=i.match(/(Android);?[\s\/]+([\d.]+)?/);let c=i.match(/(iPad).*OS\s([\d_]+)/);const u=i.match(/(iPod)(.*OS\s([\d_]+))?/),d=!c&&i.match(/(iPhone\sOS|iOS)\s([\d_]+)/),h=r==="Win32";let f=r==="MacIntel";const p=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!c&&f&&e.touch&&p.indexOf(`${o}x${a}`)>=0&&(c=i.match(/(Version)\/([\d.]+)/),c||(c=[0,1,"13_0_0"]),f=!1),l&&!h&&(s.os="android",s.android=!0),(c||d||u)&&(s.os="ios",s.ios=!0),s}function ide(t={}){return G0||(G0=rde(t)),G0}let q0;function sde(){const t=Br();let e=!1;function n(){const r=t.navigator.userAgent.toLowerCase();return r.indexOf("safari")>=0&&r.indexOf("chrome")<0&&r.indexOf("android")<0}if(n()){const r=String(t.navigator.userAgent);if(r.includes("Version/")){const[i,s]=r.split("Version/")[1].split(" ")[0].split(".").map(o=>Number(o));e=i<16||i===16&&s<2}}return{isSafari:e||n(),needPerspectiveFix:e,isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent)}}function ode(){return q0||(q0=sde()),q0}function ade({swiper:t,on:e,emit:n}){const r=Br();let i=null,s=null;const o=()=>{!t||t.destroyed||!t.initialized||(n("beforeResize"),n("resize"))},a=()=>{!t||t.destroyed||!t.initialized||(i=new ResizeObserver(u=>{s=r.requestAnimationFrame(()=>{const{width:d,height:h}=t;let f=d,p=h;u.forEach(({contentBoxSize:y,contentRect:w,target:m})=>{m&&m!==t.el||(f=w?w.width:(y[0]||y).inlineSize,p=w?w.height:(y[0]||y).blockSize)}),(f!==d||p!==h)&&o()})}),i.observe(t.el))},l=()=>{s&&r.cancelAnimationFrame(s),i&&i.unobserve&&t.el&&(i.unobserve(t.el),i=null)},c=()=>{!t||t.destroyed||!t.initialized||n("orientationchange")};e("init",()=>{if(t.params.resizeObserver&&typeof r.ResizeObserver<"u"){a();return}r.addEventListener("resize",o),r.addEventListener("orientationchange",c)}),e("destroy",()=>{l(),r.removeEventListener("resize",o),r.removeEventListener("orientationchange",c)})}function lde({swiper:t,extendParams:e,on:n,emit:r}){const i=[],s=Br(),o=(c,u={})=>{const d=s.MutationObserver||s.WebkitMutationObserver,h=new d(f=>{if(t.__preventObserver__)return;if(f.length===1){r("observerUpdate",f[0]);return}const p=function(){r("observerUpdate",f[0])};s.requestAnimationFrame?s.requestAnimationFrame(p):s.setTimeout(p,0)});h.observe(c,{attributes:typeof u.attributes>"u"?!0:u.attributes,childList:typeof u.childList>"u"?!0:u.childList,characterData:typeof u.characterData>"u"?!0:u.characterData}),i.push(h)},a=()=>{if(t.params.observer){if(t.params.observeParents){const c=cV(t.el);for(let u=0;u<c.length;u+=1)o(c[u])}o(t.el,{childList:t.params.observeSlideChildren}),o(t.wrapperEl,{attributes:!1})}},l=()=>{i.forEach(c=>{c.disconnect()}),i.splice(0,i.length)};e({observer:!1,observeParents:!1,observeSlideChildren:!1}),n("init",a),n("destroy",l)}const cde={on(t,e,n){const r=this;if(!r.eventsListeners||r.destroyed||typeof e!="function")return r;const i=n?"unshift":"push";return t.split(" ").forEach(s=>{r.eventsListeners[s]||(r.eventsListeners[s]=[]),r.eventsListeners[s][i](e)}),r},once(t,e,n){const r=this;if(!r.eventsListeners||r.destroyed||typeof e!="function")return r;function i(...s){r.off(t,i),i.__emitterProxy&&delete i.__emitterProxy,e.apply(r,s)}return i.__emitterProxy=e,r.on(t,i,n)},onAny(t,e){const n=this;if(!n.eventsListeners||n.destroyed||typeof t!="function")return n;const r=e?"unshift":"push";return n.eventsAnyListeners.indexOf(t)<0&&n.eventsAnyListeners[r](t),n},offAny(t){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const n=e.eventsAnyListeners.indexOf(t);return n>=0&&e.eventsAnyListeners.splice(n,1),e},off(t,e){const n=this;return!n.eventsListeners||n.destroyed||!n.eventsListeners||t.split(" ").forEach(r=>{typeof e>"u"?n.eventsListeners[r]=[]:n.eventsListeners[r]&&n.eventsListeners[r].forEach((i,s)=>{(i===e||i.__emitterProxy&&i.__emitterProxy===e)&&n.eventsListeners[r].splice(s,1)})}),n},emit(...t){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsListeners)return e;let n,r,i;return typeof t[0]=="string"||Array.isArray(t[0])?(n=t[0],r=t.slice(1,t.length),i=e):(n=t[0].events,r=t[0].data,i=t[0].context||e),r.unshift(i),(Array.isArray(n)?n:n.split(" ")).forEach(o=>{e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach(a=>{a.apply(i,[o,...r])}),e.eventsListeners&&e.eventsListeners[o]&&e.eventsListeners[o].forEach(a=>{a.apply(i,r)})}),e}};function ude(){const t=this;let e,n;const r=t.el;typeof t.params.width<"u"&&t.params.width!==null?e=t.params.width:e=r.clientWidth,typeof t.params.height<"u"&&t.params.height!==null?n=t.params.height:n=r.clientHeight,!(e===0&&t.isHorizontal()||n===0&&t.isVertical())&&(e=e-parseInt(ro(r,"padding-left")||0,10)-parseInt(ro(r,"padding-right")||0,10),n=n-parseInt(ro(r,"padding-top")||0,10)-parseInt(ro(r,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(n)&&(n=0),Object.assign(t,{width:e,height:n,size:t.isHorizontal()?e:n}))}function dde(){const t=this;function e(C){return t.isHorizontal()?C:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[C]}function n(C,k){return parseFloat(C.getPropertyValue(e(k))||0)}const r=t.params,{wrapperEl:i,slidesEl:s,size:o,rtlTranslate:a,wrongRTL:l}=t,c=t.virtual&&r.virtual.enabled,u=c?t.virtual.slides.length:t.slides.length,d=Mi(s,`.${t.params.slideClass}, swiper-slide`),h=c?t.virtual.slides.length:d.length;let f=[];const p=[],y=[];let w=r.slidesOffsetBefore;typeof w=="function"&&(w=r.slidesOffsetBefore.call(t));let m=r.slidesOffsetAfter;typeof m=="function"&&(m=r.slidesOffsetAfter.call(t));const g=t.snapGrid.length,_=t.slidesGrid.length;let S=r.spaceBetween,I=-w,E=0,D=0;if(typeof o>"u")return;typeof S=="string"&&S.indexOf("%")>=0&&(S=parseFloat(S.replace("%",""))/100*o),t.virtualSize=-S,d.forEach(C=>{a?C.style.marginLeft="":C.style.marginRight="",C.style.marginBottom="",C.style.marginTop=""}),r.centeredSlides&&r.cssMode&&(Xp(i,"--swiper-centered-offset-before",""),Xp(i,"--swiper-centered-offset-after",""));const b=r.grid&&r.grid.rows>1&&t.grid;b&&t.grid.initSlides(h);let x;const O=r.slidesPerView==="auto"&&r.breakpoints&&Object.keys(r.breakpoints).filter(C=>typeof r.breakpoints[C].slidesPerView<"u").length>0;for(let C=0;C<h;C+=1){x=0;let k;if(d[C]&&(k=d[C]),b&&t.grid.updateSlide(C,k,h,e),!(d[C]&&ro(k,"display")==="none")){if(r.slidesPerView==="auto"){O&&(d[C].style[e("width")]="");const A=getComputedStyle(k),N=k.style.transform,B=k.style.webkitTransform;if(N&&(k.style.transform="none"),B&&(k.style.webkitTransform="none"),r.roundLengths)x=t.isHorizontal()?Ib(k,"width",!0):Ib(k,"height",!0);else{const R=n(A,"width"),T=n(A,"padding-left"),U=n(A,"padding-right"),$=n(A,"margin-left"),z=n(A,"margin-right"),J=A.getPropertyValue("box-sizing");if(J&&J==="border-box")x=R+$+z;else{const{clientWidth:P,offsetWidth:F}=k;x=R+T+U+$+z+(F-P)}}N&&(k.style.transform=N),B&&(k.style.webkitTransform=B),r.roundLengths&&(x=Math.floor(x))}else x=(o-(r.slidesPerView-1)*S)/r.slidesPerView,r.roundLengths&&(x=Math.floor(x)),d[C]&&(d[C].style[e("width")]=`${x}px`);d[C]&&(d[C].swiperSlideSize=x),y.push(x),r.centeredSlides?(I=I+x/2+E/2+S,E===0&&C!==0&&(I=I-o/2-S),C===0&&(I=I-o/2-S),Math.abs(I)<1/1e3&&(I=0),r.roundLengths&&(I=Math.floor(I)),D%r.slidesPerGroup===0&&f.push(I),p.push(I)):(r.roundLengths&&(I=Math.floor(I)),(D-Math.min(t.params.slidesPerGroupSkip,D))%t.params.slidesPerGroup===0&&f.push(I),p.push(I),I=I+x+S),t.virtualSize+=x+S,E=x,D+=1}}if(t.virtualSize=Math.max(t.virtualSize,o)+m,a&&l&&(r.effect==="slide"||r.effect==="coverflow")&&(i.style.width=`${t.virtualSize+r.spaceBetween}px`),r.setWrapperSize&&(i.style[e("width")]=`${t.virtualSize+r.spaceBetween}px`),b&&t.grid.updateWrapperSize(x,f,e),!r.centeredSlides){const C=[];for(let k=0;k<f.length;k+=1){let A=f[k];r.roundLengths&&(A=Math.floor(A)),f[k]<=t.virtualSize-o&&C.push(A)}f=C,Math.floor(t.virtualSize-o)-Math.floor(f[f.length-1])>1&&f.push(t.virtualSize-o)}if(c&&r.loop){const C=y[0]+S;if(r.slidesPerGroup>1){const k=Math.ceil((t.virtual.slidesBefore+t.virtual.slidesAfter)/r.slidesPerGroup),A=C*r.slidesPerGroup;for(let N=0;N<k;N+=1)f.push(f[f.length-1]+A)}for(let k=0;k<t.virtual.slidesBefore+t.virtual.slidesAfter;k+=1)r.slidesPerGroup===1&&f.push(f[f.length-1]+C),p.push(p[p.length-1]+C),t.virtualSize+=C}if(f.length===0&&(f=[0]),r.spaceBetween!==0){const C=t.isHorizontal()&&a?"marginLeft":e("marginRight");d.filter((k,A)=>!r.cssMode||r.loop?!0:A!==d.length-1).forEach(k=>{k.style[C]=`${S}px`})}if(r.centeredSlides&&r.centeredSlidesBounds){let C=0;y.forEach(A=>{C+=A+(r.spaceBetween?r.spaceBetween:0)}),C-=r.spaceBetween;const k=C-o;f=f.map(A=>A<0?-w:A>k?k+m:A)}if(r.centerInsufficientSlides){let C=0;if(y.forEach(k=>{C+=k+(r.spaceBetween?r.spaceBetween:0)}),C-=r.spaceBetween,C<o){const k=(o-C)/2;f.forEach((A,N)=>{f[N]=A-k}),p.forEach((A,N)=>{p[N]=A+k})}}if(Object.assign(t,{slides:d,snapGrid:f,slidesGrid:p,slidesSizesGrid:y}),r.centeredSlides&&r.cssMode&&!r.centeredSlidesBounds){Xp(i,"--swiper-centered-offset-before",`${-f[0]}px`),Xp(i,"--swiper-centered-offset-after",`${t.size/2-y[y.length-1]/2}px`);const C=-t.snapGrid[0],k=-t.slidesGrid[0];t.snapGrid=t.snapGrid.map(A=>A+C),t.slidesGrid=t.slidesGrid.map(A=>A+k)}if(h!==u&&t.emit("slidesLengthChange"),f.length!==g&&(t.params.watchOverflow&&t.checkOverflow(),t.emit("snapGridLengthChange")),p.length!==_&&t.emit("slidesGridLengthChange"),r.watchSlidesProgress&&t.updateSlidesOffset(),!c&&!r.cssMode&&(r.effect==="slide"||r.effect==="fade")){const C=`${r.containerModifierClass}backface-hidden`,k=t.el.classList.contains(C);h<=r.maxBackfaceHiddenSlides?k||t.el.classList.add(C):k&&t.el.classList.remove(C)}}function hde(t){const e=this,n=[],r=e.virtual&&e.params.virtual.enabled;let i=0,s;typeof t=="number"?e.setTransition(t):t===!0&&e.setTransition(e.params.speed);const o=a=>r?e.slides.filter(l=>parseInt(l.getAttribute("data-swiper-slide-index"),10)===a)[0]:e.slides[a];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(a=>{n.push(a)});else for(s=0;s<Math.ceil(e.params.slidesPerView);s+=1){const a=e.activeIndex+s;if(a>e.slides.length&&!r)break;n.push(o(a))}else n.push(o(e.activeIndex));for(s=0;s<n.length;s+=1)if(typeof n[s]<"u"){const a=n[s].offsetHeight;i=a>i?a:i}(i||i===0)&&(e.wrapperEl.style.height=`${i}px`)}function fde(){const t=this,e=t.slides,n=t.isElement?t.isHorizontal()?t.wrapperEl.offsetLeft:t.wrapperEl.offsetTop:0;for(let r=0;r<e.length;r+=1)e[r].swiperSlideOffset=(t.isHorizontal()?e[r].offsetLeft:e[r].offsetTop)-n}function pde(t=this&&this.translate||0){const e=this,n=e.params,{slides:r,rtlTranslate:i,snapGrid:s}=e;if(r.length===0)return;typeof r[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let o=-t;i&&(o=t),r.forEach(a=>{a.classList.remove(n.slideVisibleClass)}),e.visibleSlidesIndexes=[],e.visibleSlides=[];for(let a=0;a<r.length;a+=1){const l=r[a];let c=l.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(c-=r[0].swiperSlideOffset);const u=(o+(n.centeredSlides?e.minTranslate():0)-c)/(l.swiperSlideSize+n.spaceBetween),d=(o-s[0]+(n.centeredSlides?e.minTranslate():0)-c)/(l.swiperSlideSize+n.spaceBetween),h=-(o-c),f=h+e.slidesSizesGrid[a];(h>=0&&h<e.size-1||f>1&&f<=e.size||h<=0&&f>=e.size)&&(e.visibleSlides.push(l),e.visibleSlidesIndexes.push(a),r[a].classList.add(n.slideVisibleClass)),l.progress=i?-u:u,l.originalProgress=i?-d:d}}function mde(t){const e=this;if(typeof t>"u"){const u=e.rtlTranslate?-1:1;t=e&&e.translate&&e.translate*u||0}const n=e.params,r=e.maxTranslate()-e.minTranslate();let{progress:i,isBeginning:s,isEnd:o,progressLoop:a}=e;const l=s,c=o;if(r===0)i=0,s=!0,o=!0;else{i=(t-e.minTranslate())/r;const u=Math.abs(t-e.minTranslate())<1,d=Math.abs(t-e.maxTranslate())<1;s=u||i<=0,o=d||i>=1,u&&(i=0),d&&(i=1)}if(n.loop){const u=e.getSlideIndex(e.slides.filter(w=>w.getAttribute("data-swiper-slide-index")==="0")[0]),d=e.getSlideIndex(e.slides.filter(w=>w.getAttribute("data-swiper-slide-index")*1===e.slides.length-1)[0]),h=e.slidesGrid[u],f=e.slidesGrid[d],p=e.slidesGrid[e.slidesGrid.length-1],y=Math.abs(t);y>=h?a=(y-h)/p:a=(y+p-f)/p,a>1&&(a-=1)}Object.assign(e,{progress:i,progressLoop:a,isBeginning:s,isEnd:o}),(n.watchSlidesProgress||n.centeredSlides&&n.autoHeight)&&e.updateSlidesProgress(t),s&&!l&&e.emit("reachBeginning toEdge"),o&&!c&&e.emit("reachEnd toEdge"),(l&&!s||c&&!o)&&e.emit("fromEdge"),e.emit("progress",i)}function gde(){const t=this,{slides:e,params:n,slidesEl:r,activeIndex:i}=t,s=t.virtual&&n.virtual.enabled,o=l=>Mi(r,`.${n.slideClass}${l}, swiper-slide${l}`)[0];e.forEach(l=>{l.classList.remove(n.slideActiveClass,n.slideNextClass,n.slidePrevClass)});let a;if(s)if(n.loop){let l=i-t.virtual.slidesBefore;l<0&&(l=t.virtual.slides.length+l),l>=t.virtual.slides.length&&(l-=t.virtual.slides.length),a=o(`[data-swiper-slide-index="${l}"]`)}else a=o(`[data-swiper-slide-index="${i}"]`);else a=e[i];if(a){a.classList.add(n.slideActiveClass);let l=tde(a,`.${n.slideClass}, swiper-slide`)[0];n.loop&&!l&&(l=e[0]),l&&l.classList.add(n.slideNextClass);let c=ede(a,`.${n.slideClass}, swiper-slide`)[0];n.loop&&!c===0&&(c=e[e.length-1]),c&&c.classList.add(n.slidePrevClass)}t.emitSlidesClasses()}function yde(t){const{slidesGrid:e,params:n}=t,r=t.rtlTranslate?t.translate:-t.translate;let i;for(let s=0;s<e.length;s+=1)typeof e[s+1]<"u"?r>=e[s]&&r<e[s+1]-(e[s+1]-e[s])/2?i=s:r>=e[s]&&r<e[s+1]&&(i=s+1):r>=e[s]&&(i=s);return n.normalizeSlideIndex&&(i<0||typeof i>"u")&&(i=0),i}function vde(t){const e=this,n=e.rtlTranslate?e.translate:-e.translate,{snapGrid:r,params:i,activeIndex:s,realIndex:o,snapIndex:a}=e;let l=t,c;const u=h=>{let f=h-e.virtual.slidesBefore;return f<0&&(f=e.virtual.slides.length+f),f>=e.virtual.slides.length&&(f-=e.virtual.slides.length),f};if(typeof l>"u"&&(l=yde(e)),r.indexOf(n)>=0)c=r.indexOf(n);else{const h=Math.min(i.slidesPerGroupSkip,l);c=h+Math.floor((l-h)/i.slidesPerGroup)}if(c>=r.length&&(c=r.length-1),l===s){c!==a&&(e.snapIndex=c,e.emit("snapIndexChange")),e.params.loop&&e.virtual&&e.params.virtual.enabled&&(e.realIndex=u(l));return}let d;e.virtual&&i.virtual.enabled&&i.loop?d=u(l):e.slides[l]?d=parseInt(e.slides[l].getAttribute("data-swiper-slide-index")||l,10):d=l,Object.assign(e,{snapIndex:c,realIndex:d,previousIndex:s,activeIndex:l}),e.emit("activeIndexChange"),e.emit("snapIndexChange"),o!==d&&e.emit("realIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&e.emit("slideChange")}function _de(t){const e=this,n=e.params,r=t.closest(`.${n.slideClass}, swiper-slide`);let i=!1,s;if(r){for(let o=0;o<e.slides.length;o+=1)if(e.slides[o]===r){i=!0,s=o;break}}if(r&&i)e.clickedSlide=r,e.virtual&&e.params.virtual.enabled?e.clickedIndex=parseInt(r.getAttribute("data-swiper-slide-index"),10):e.clickedIndex=s;else{e.clickedSlide=void 0,e.clickedIndex=void 0;return}n.slideToClickedSlide&&e.clickedIndex!==void 0&&e.clickedIndex!==e.activeIndex&&e.slideToClickedSlide()}const wde={updateSize:ude,updateSlides:dde,updateAutoHeight:hde,updateSlidesOffset:fde,updateSlidesProgress:pde,updateProgress:mde,updateSlidesClasses:gde,updateActiveIndex:vde,updateClickedSlide:_de};function bde(t=this.isHorizontal()?"x":"y"){const e=this,{params:n,rtlTranslate:r,translate:i,wrapperEl:s}=e;if(n.virtualTranslate)return r?-i:i;if(n.cssMode)return i;let o=Jue(s,t);return r&&(o=-o),o||0}function Sde(t,e){const n=this,{rtlTranslate:r,params:i,wrapperEl:s,progress:o}=n;let a=0,l=0;const c=0;n.isHorizontal()?a=r?-t:t:l=t,i.roundLengths&&(a=Math.floor(a),l=Math.floor(l)),i.cssMode?s[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-a:-l:i.virtualTranslate||(s.style.transform=`translate3d(${a}px, ${l}px, ${c}px)`),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?a:l;let u;const d=n.maxTranslate()-n.minTranslate();d===0?u=0:u=(t-n.minTranslate())/d,u!==o&&n.updateProgress(t),n.emit("setTranslate",n.translate,e)}function Ede(){return-this.snapGrid[0]}function xde(){return-this.snapGrid[this.snapGrid.length-1]}function Tde(t=0,e=this.params.speed,n=!0,r=!0,i){const s=this,{params:o,wrapperEl:a}=s;if(s.animating&&o.preventInteractionOnTransition)return!1;const l=s.minTranslate(),c=s.maxTranslate();let u;if(r&&t>l?u=l:r&&t<c?u=c:u=t,s.updateProgress(u),o.cssMode){const d=s.isHorizontal();if(e===0)a[d?"scrollLeft":"scrollTop"]=-u;else{if(!s.support.smoothScroll)return aV({swiper:s,targetPosition:-u,side:d?"left":"top"}),!0;a.scrollTo({[d?"left":"top"]:-u,behavior:"smooth"})}return!0}return e===0?(s.setTransition(0),s.setTranslate(u),n&&(s.emit("beforeTransitionStart",e,i),s.emit("transitionEnd"))):(s.setTransition(e),s.setTranslate(u),n&&(s.emit("beforeTransitionStart",e,i),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(h){!s||s.destroyed||h.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,n&&s.emit("transitionEnd"))}),s.wrapperEl.addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd))),!0}const Ide={getTranslate:bde,setTranslate:Sde,minTranslate:Ede,maxTranslate:xde,translateTo:Tde};function Cde(t,e){const n=this;n.params.cssMode||(n.wrapperEl.style.transitionDuration=`${t}ms`),n.emit("setTransition",t,e)}function dV({swiper:t,runCallbacks:e,direction:n,step:r}){const{activeIndex:i,previousIndex:s}=t;let o=n;if(o||(i>s?o="next":i<s?o="prev":o="reset"),t.emit(`transition${r}`),e&&i!==s){if(o==="reset"){t.emit(`slideResetTransition${r}`);return}t.emit(`slideChangeTransition${r}`),o==="next"?t.emit(`slideNextTransition${r}`):t.emit(`slidePrevTransition${r}`)}}function kde(t=!0,e){const n=this,{params:r}=n;r.cssMode||(r.autoHeight&&n.updateAutoHeight(),dV({swiper:n,runCallbacks:t,direction:e,step:"Start"}))}function Ade(t=!0,e){const n=this,{params:r}=n;n.animating=!1,!r.cssMode&&(n.setTransition(0),dV({swiper:n,runCallbacks:t,direction:e,step:"End"}))}const Rde={setTransition:Cde,transitionStart:kde,transitionEnd:Ade};function Nde(t=0,e=this.params.speed,n=!0,r,i){typeof t=="string"&&(t=parseInt(t,10));const s=this;let o=t;o<0&&(o=0);const{params:a,snapGrid:l,slidesGrid:c,previousIndex:u,activeIndex:d,rtlTranslate:h,wrapperEl:f,enabled:p}=s;if(s.animating&&a.preventInteractionOnTransition||!p&&!r&&!i)return!1;const y=Math.min(s.params.slidesPerGroupSkip,o);let w=y+Math.floor((o-y)/s.params.slidesPerGroup);w>=l.length&&(w=l.length-1);const m=-l[w];if(a.normalizeSlideIndex)for(let _=0;_<c.length;_+=1){const S=-Math.floor(m*100),I=Math.floor(c[_]*100),E=Math.floor(c[_+1]*100);typeof c[_+1]<"u"?S>=I&&S<E-(E-I)/2?o=_:S>=I&&S<E&&(o=_+1):S>=I&&(o=_)}if(s.initialized&&o!==d&&(!s.allowSlideNext&&m<s.translate&&m<s.minTranslate()||!s.allowSlidePrev&&m>s.translate&&m>s.maxTranslate()&&(d||0)!==o))return!1;o!==(u||0)&&n&&s.emit("beforeSlideChangeStart"),s.updateProgress(m);let g;if(o>d?g="next":o<d?g="prev":g="reset",h&&-m===s.translate||!h&&m===s.translate)return s.updateActiveIndex(o),a.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),a.effect!=="slide"&&s.setTranslate(m),g!=="reset"&&(s.transitionStart(n,g),s.transitionEnd(n,g)),!1;if(a.cssMode){const _=s.isHorizontal(),S=h?m:-m;if(e===0){const I=s.virtual&&s.params.virtual.enabled;I&&(s.wrapperEl.style.scrollSnapType="none",s._immediateVirtual=!0),I&&!s._cssModeVirtualInitialSet&&s.params.initialSlide>0?(s._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{f[_?"scrollLeft":"scrollTop"]=S})):f[_?"scrollLeft":"scrollTop"]=S,I&&requestAnimationFrame(()=>{s.wrapperEl.style.scrollSnapType="",s._immediateVirtual=!1})}else{if(!s.support.smoothScroll)return aV({swiper:s,targetPosition:S,side:_?"left":"top"}),!0;f.scrollTo({[_?"left":"top"]:S,behavior:"smooth"})}return!0}return s.setTransition(e),s.setTranslate(m),s.updateActiveIndex(o),s.updateSlidesClasses(),s.emit("beforeTransitionStart",e,r),s.transitionStart(n,g),e===0?s.transitionEnd(n,g):s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(S){!s||s.destroyed||S.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(n,g))}),s.wrapperEl.addEventListener("transitionend",s.onSlideToWrapperTransitionEnd)),!0}function Pde(t=0,e=this.params.speed,n=!0,r){typeof t=="string"&&(t=parseInt(t,10));const i=this;let s=t;return i.params.loop&&(i.virtual&&i.params.virtual.enabled?s=s+i.virtual.slidesBefore:s=i.getSlideIndex(i.slides.filter(o=>o.getAttribute("data-swiper-slide-index")*1===s)[0])),i.slideTo(s,e,n,r)}function Dde(t=this.params.speed,e=!0,n){const r=this,{enabled:i,params:s,animating:o}=r;if(!i)return r;let a=s.slidesPerGroup;s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(a=Math.max(r.slidesPerViewDynamic("current",!0),1));const l=r.activeIndex<s.slidesPerGroupSkip?1:a,c=r.virtual&&s.virtual.enabled;if(s.loop){if(o&&!c&&s.loopPreventsSliding)return!1;r.loopFix({direction:"next"}),r._clientLeft=r.wrapperEl.clientLeft}return s.rewind&&r.isEnd?r.slideTo(0,t,e,n):r.slideTo(r.activeIndex+l,t,e,n)}function Ode(t=this.params.speed,e=!0,n){const r=this,{params:i,snapGrid:s,slidesGrid:o,rtlTranslate:a,enabled:l,animating:c}=r;if(!l)return r;const u=r.virtual&&i.virtual.enabled;if(i.loop){if(c&&!u&&i.loopPreventsSliding)return!1;r.loopFix({direction:"prev"}),r._clientLeft=r.wrapperEl.clientLeft}const d=a?r.translate:-r.translate;function h(m){return m<0?-Math.floor(Math.abs(m)):Math.floor(m)}const f=h(d),p=s.map(m=>h(m));let y=s[p.indexOf(f)-1];if(typeof y>"u"&&i.cssMode){let m;s.forEach((g,_)=>{f>=g&&(m=_)}),typeof m<"u"&&(y=s[m>0?m-1:m])}let w=0;if(typeof y<"u"&&(w=o.indexOf(y),w<0&&(w=r.activeIndex-1),i.slidesPerView==="auto"&&i.slidesPerGroup===1&&i.slidesPerGroupAuto&&(w=w-r.slidesPerViewDynamic("previous",!0)+1,w=Math.max(w,0))),i.rewind&&r.isBeginning){const m=r.params.virtual&&r.params.virtual.enabled&&r.virtual?r.virtual.slides.length-1:r.slides.length-1;return r.slideTo(m,t,e,n)}return r.slideTo(w,t,e,n)}function Lde(t=this.params.speed,e=!0,n){const r=this;return r.slideTo(r.activeIndex,t,e,n)}function Mde(t=this.params.speed,e=!0,n,r=.5){const i=this;let s=i.activeIndex;const o=Math.min(i.params.slidesPerGroupSkip,s),a=o+Math.floor((s-o)/i.params.slidesPerGroup),l=i.rtlTranslate?i.translate:-i.translate;if(l>=i.snapGrid[a]){const c=i.snapGrid[a],u=i.snapGrid[a+1];l-c>(u-c)*r&&(s+=i.params.slidesPerGroup)}else{const c=i.snapGrid[a-1],u=i.snapGrid[a];l-c<=(u-c)*r&&(s-=i.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,i.slidesGrid.length-1),i.slideTo(s,t,e,n)}function $de(){const t=this,{params:e,slidesEl:n}=t,r=e.slidesPerView==="auto"?t.slidesPerViewDynamic():e.slidesPerView;let i=t.clickedIndex,s;const o=t.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(t.animating)return;s=parseInt(t.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?i<t.loopedSlides-r/2||i>t.slides.length-t.loopedSlides+r/2?(t.loopFix(),i=t.getSlideIndex(Mi(n,`${o}[data-swiper-slide-index="${s}"]`)[0]),Tb(()=>{t.slideTo(i)})):t.slideTo(i):i>t.slides.length-r?(t.loopFix(),i=t.getSlideIndex(Mi(n,`${o}[data-swiper-slide-index="${s}"]`)[0]),Tb(()=>{t.slideTo(i)})):t.slideTo(i)}else t.slideTo(i)}const Fde={slideTo:Nde,slideToLoop:Pde,slideNext:Dde,slidePrev:Ode,slideReset:Lde,slideToClosest:Mde,slideToClickedSlide:$de};function Ude(t){const e=this,{params:n,slidesEl:r}=e;if(!n.loop||e.virtual&&e.params.virtual.enabled)return;Mi(r,`.${n.slideClass}, swiper-slide`).forEach((s,o)=>{s.setAttribute("data-swiper-slide-index",o)}),e.loopFix({slideRealIndex:t,direction:n.centeredSlides?void 0:"next"})}function jde({slideRealIndex:t,slideTo:e=!0,direction:n,setTranslate:r,activeSlideIndex:i,byController:s,byMousewheel:o}={}){const a=this;if(!a.params.loop)return;a.emit("beforeLoopFix");const{slides:l,allowSlidePrev:c,allowSlideNext:u,slidesEl:d,params:h}=a;if(a.allowSlidePrev=!0,a.allowSlideNext=!0,a.virtual&&h.virtual.enabled){e&&(!h.centeredSlides&&a.snapIndex===0?a.slideTo(a.virtual.slides.length,0,!1,!0):h.centeredSlides&&a.snapIndex<h.slidesPerView?a.slideTo(a.virtual.slides.length+a.snapIndex,0,!1,!0):a.snapIndex===a.snapGrid.length-1&&a.slideTo(a.virtual.slidesBefore,0,!1,!0)),a.allowSlidePrev=c,a.allowSlideNext=u,a.emit("loopFix");return}const f=h.slidesPerView==="auto"?a.slidesPerViewDynamic():Math.ceil(parseFloat(h.slidesPerView,10));let p=h.loopedSlides||f;p%h.slidesPerGroup!==0&&(p+=h.slidesPerGroup-p%h.slidesPerGroup),a.loopedSlides=p;const y=[],w=[];let m=a.activeIndex;typeof i>"u"?i=a.getSlideIndex(a.slides.filter(E=>E.classList.contains("swiper-slide-active"))[0]):m=i;const g=n==="next"||!n,_=n==="prev"||!n;let S=0,I=0;if(i<p){S=Math.max(p-i,h.slidesPerGroup);for(let E=0;E<p-i;E+=1){const D=E-Math.floor(E/l.length)*l.length;y.push(l.length-D-1)}}else if(i>a.slides.length-p*2){I=Math.max(i-(a.slides.length-p*2),h.slidesPerGroup);for(let E=0;E<I;E+=1){const D=E-Math.floor(E/l.length)*l.length;w.push(D)}}if(_&&y.forEach(E=>{d.prepend(a.slides[E])}),g&&w.forEach(E=>{d.append(a.slides[E])}),a.recalcSlides(),h.watchSlidesProgress&&a.updateSlidesOffset(),e){if(y.length>0&&_)if(typeof t>"u"){const E=a.slidesGrid[m],b=a.slidesGrid[m+S]-E;o?a.setTranslate(a.translate-b):(a.slideTo(m+S,0,!1,!0),r&&(a.touches[a.isHorizontal()?"startX":"startY"]+=b))}else r&&a.slideToLoop(t,0,!1,!0);else if(w.length>0&&g)if(typeof t>"u"){const E=a.slidesGrid[m],b=a.slidesGrid[m-I]-E;o?a.setTranslate(a.translate-b):(a.slideTo(m-I,0,!1,!0),r&&(a.touches[a.isHorizontal()?"startX":"startY"]+=b))}else a.slideToLoop(t,0,!1,!0)}if(a.allowSlidePrev=c,a.allowSlideNext=u,a.controller&&a.controller.control&&!s){const E={slideRealIndex:t,slideTo:!1,direction:n,setTranslate:r,activeSlideIndex:i,byController:!0};Array.isArray(a.controller.control)?a.controller.control.forEach(D=>{D.params.loop&&D.loopFix(E)}):a.controller.control instanceof a.constructor&&a.controller.control.params.loop&&a.controller.control.loopFix(E)}a.emit("loopFix")}function Vde(){const t=this,{slides:e,params:n,slidesEl:r}=t;if(!n.loop||t.virtual&&t.params.virtual.enabled)return;t.recalcSlides();const i=[];e.forEach(s=>{const o=typeof s.swiperSlideIndex>"u"?s.getAttribute("data-swiper-slide-index")*1:s.swiperSlideIndex;i[o]=s}),e.forEach(s=>{s.removeAttribute("data-swiper-slide-index")}),i.forEach(s=>{r.append(s)}),t.recalcSlides(),t.slideTo(t.realIndex,0)}const Bde={loopCreate:Ude,loopFix:jde,loopDestroy:Vde};function zde(t){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const n=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),n.style.cursor="move",n.style.cursor=t?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function Wde(){const t=this;t.params.watchOverflow&&t.isLocked||t.params.cssMode||(t.isElement&&(t.__preventObserver__=!0),t[t.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1}))}const Hde={setGrabCursor:zde,unsetGrabCursor:Wde};function Gde(t,e=this){function n(r){if(!r||r===Pl()||r===Br())return null;r.assignedSlot&&(r=r.assignedSlot);const i=r.closest(t);return!i&&!r.getRootNode?null:i||n(r.getRootNode().host)}return n(e)}function qde(t){const e=this,n=Pl(),r=Br(),i=e.touchEventsData;i.evCache.push(t);const{params:s,touches:o,enabled:a}=e;if(!a||!s.simulateTouch&&t.pointerType==="mouse"||e.animating&&s.preventInteractionOnTransition)return;!e.animating&&s.cssMode&&s.loop&&e.loopFix();let l=t;l.originalEvent&&(l=l.originalEvent);let c=l.target;if(s.touchEventsTarget==="wrapper"&&!e.wrapperEl.contains(c)||"which"in l&&l.which===3||"button"in l&&l.button>0||i.isTouched&&i.isMoved)return;const u=!!s.noSwipingClass&&s.noSwipingClass!=="",d=t.composedPath?t.composedPath():t.path;u&&l.target&&l.target.shadowRoot&&d&&(c=d[0]);const h=s.noSwipingSelector?s.noSwipingSelector:`.${s.noSwipingClass}`,f=!!(l.target&&l.target.shadowRoot);if(s.noSwiping&&(f?Gde(h,c):c.closest(h))){e.allowClick=!0;return}if(s.swipeHandler&&!c.closest(s.swipeHandler))return;o.currentX=l.pageX,o.currentY=l.pageY;const p=o.currentX,y=o.currentY,w=s.edgeSwipeDetection||s.iOSEdgeSwipeDetection,m=s.edgeSwipeThreshold||s.iOSEdgeSwipeThreshold;if(w&&(p<=m||p>=r.innerWidth-m))if(w==="prevent")t.preventDefault();else return;Object.assign(i,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=p,o.startY=y,i.touchStartTime=lf(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,s.threshold>0&&(i.allowThresholdMove=!1);let g=!0;c.matches(i.focusableElements)&&(g=!1,c.nodeName==="SELECT"&&(i.isTouched=!1)),n.activeElement&&n.activeElement.matches(i.focusableElements)&&n.activeElement!==c&&n.activeElement.blur();const _=g&&e.allowTouchMove&&s.touchStartPreventDefault;(s.touchStartForcePreventDefault||_)&&!c.isContentEditable&&l.preventDefault(),e.params.freeMode&&e.params.freeMode.enabled&&e.freeMode&&e.animating&&!s.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",l)}function Kde(t){const e=Pl(),n=this,r=n.touchEventsData,{params:i,touches:s,rtlTranslate:o,enabled:a}=n;if(!a||!i.simulateTouch&&t.pointerType==="mouse")return;let l=t;if(l.originalEvent&&(l=l.originalEvent),!r.isTouched){r.startMoving&&r.isScrolling&&n.emit("touchMoveOpposite",l);return}const c=r.evCache.findIndex(E=>E.pointerId===l.pointerId);c>=0&&(r.evCache[c]=l);const u=r.evCache.length>1?r.evCache[0]:l,d=u.pageX,h=u.pageY;if(l.preventedByNestedSwiper){s.startX=d,s.startY=h;return}if(!n.allowTouchMove){l.target.matches(r.focusableElements)||(n.allowClick=!1),r.isTouched&&(Object.assign(s,{startX:d,startY:h,prevX:n.touches.currentX,prevY:n.touches.currentY,currentX:d,currentY:h}),r.touchStartTime=lf());return}if(i.touchReleaseOnEdges&&!i.loop){if(n.isVertical()){if(h<s.startY&&n.translate<=n.maxTranslate()||h>s.startY&&n.translate>=n.minTranslate()){r.isTouched=!1,r.isMoved=!1;return}}else if(d<s.startX&&n.translate<=n.maxTranslate()||d>s.startX&&n.translate>=n.minTranslate())return}if(e.activeElement&&l.target===e.activeElement&&l.target.matches(r.focusableElements)){r.isMoved=!0,n.allowClick=!1;return}if(r.allowTouchCallbacks&&n.emit("touchMove",l),l.targetTouches&&l.targetTouches.length>1)return;s.currentX=d,s.currentY=h;const f=s.currentX-s.startX,p=s.currentY-s.startY;if(n.params.threshold&&Math.sqrt(f**2+p**2)<n.params.threshold)return;if(typeof r.isScrolling>"u"){let E;n.isHorizontal()&&s.currentY===s.startY||n.isVertical()&&s.currentX===s.startX?r.isScrolling=!1:f*f+p*p>=25&&(E=Math.atan2(Math.abs(p),Math.abs(f))*180/Math.PI,r.isScrolling=n.isHorizontal()?E>i.touchAngle:90-E>i.touchAngle)}if(r.isScrolling&&n.emit("touchMoveOpposite",l),typeof r.startMoving>"u"&&(s.currentX!==s.startX||s.currentY!==s.startY)&&(r.startMoving=!0),r.isScrolling||n.zoom&&n.params.zoom&&n.params.zoom.enabled&&r.evCache.length>1){r.isTouched=!1;return}if(!r.startMoving)return;n.allowClick=!1,!i.cssMode&&l.cancelable&&l.preventDefault(),i.touchMoveStopPropagation&&!i.nested&&l.stopPropagation();let y=n.isHorizontal()?f:p,w=n.isHorizontal()?s.currentX-s.previousX:s.currentY-s.previousY;i.oneWayMovement&&(y=Math.abs(y)*(o?1:-1),w=Math.abs(w)*(o?1:-1)),s.diff=y,y*=i.touchRatio,o&&(y=-y,w=-w);const m=n.touchesDirection;n.swipeDirection=y>0?"prev":"next",n.touchesDirection=w>0?"prev":"next";const g=n.params.loop&&!i.cssMode;if(!r.isMoved){if(g&&n.loopFix({direction:n.swipeDirection}),r.startTranslate=n.getTranslate(),n.setTransition(0),n.animating){const E=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});n.wrapperEl.dispatchEvent(E)}r.allowMomentumBounce=!1,i.grabCursor&&(n.allowSlideNext===!0||n.allowSlidePrev===!0)&&n.setGrabCursor(!0),n.emit("sliderFirstMove",l)}let _;r.isMoved&&m!==n.touchesDirection&&g&&Math.abs(y)>=1&&(n.loopFix({direction:n.swipeDirection,setTranslate:!0}),_=!0),n.emit("sliderMove",l),r.isMoved=!0,r.currentTranslate=y+r.startTranslate;let S=!0,I=i.resistanceRatio;if(i.touchReleaseOnEdges&&(I=0),y>0?(g&&!_&&r.currentTranslate>(i.centeredSlides?n.minTranslate()-n.size/2:n.minTranslate())&&n.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),r.currentTranslate>n.minTranslate()&&(S=!1,i.resistance&&(r.currentTranslate=n.minTranslate()-1+(-n.minTranslate()+r.startTranslate+y)**I))):y<0&&(g&&!_&&r.currentTranslate<(i.centeredSlides?n.maxTranslate()+n.size/2:n.maxTranslate())&&n.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:n.slides.length-(i.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(parseFloat(i.slidesPerView,10)))}),r.currentTranslate<n.maxTranslate()&&(S=!1,i.resistance&&(r.currentTranslate=n.maxTranslate()+1-(n.maxTranslate()-r.startTranslate-y)**I))),S&&(l.preventedByNestedSwiper=!0),!n.allowSlideNext&&n.swipeDirection==="next"&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!n.allowSlidePrev&&n.swipeDirection==="prev"&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),!n.allowSlidePrev&&!n.allowSlideNext&&(r.currentTranslate=r.startTranslate),i.threshold>0)if(Math.abs(y)>i.threshold||r.allowThresholdMove){if(!r.allowThresholdMove){r.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,r.currentTranslate=r.startTranslate,s.diff=n.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY;return}}else{r.currentTranslate=r.startTranslate;return}!i.followFinger||i.cssMode||((i.freeMode&&i.freeMode.enabled&&n.freeMode||i.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),n.params.freeMode&&i.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(r.currentTranslate),n.setTranslate(r.currentTranslate))}function Qde(t){const e=this,n=e.touchEventsData,r=n.evCache.findIndex(_=>_.pointerId===t.pointerId);if(r>=0&&n.evCache.splice(r,1),["pointercancel","pointerout","pointerleave"].includes(t.type)&&!(t.type==="pointercancel"&&(e.browser.isSafari||e.browser.isWebView)))return;const{params:i,touches:s,rtlTranslate:o,slidesGrid:a,enabled:l}=e;if(!l||!i.simulateTouch&&t.pointerType==="mouse")return;let c=t;if(c.originalEvent&&(c=c.originalEvent),n.allowTouchCallbacks&&e.emit("touchEnd",c),n.allowTouchCallbacks=!1,!n.isTouched){n.isMoved&&i.grabCursor&&e.setGrabCursor(!1),n.isMoved=!1,n.startMoving=!1;return}i.grabCursor&&n.isMoved&&n.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const u=lf(),d=u-n.touchStartTime;if(e.allowClick){const _=c.path||c.composedPath&&c.composedPath();e.updateClickedSlide(_&&_[0]||c.target),e.emit("tap click",c),d<300&&u-n.lastClickTime<300&&e.emit("doubleTap doubleClick",c)}if(n.lastClickTime=lf(),Tb(()=>{e.destroyed||(e.allowClick=!0)}),!n.isTouched||!n.isMoved||!e.swipeDirection||s.diff===0||n.currentTranslate===n.startTranslate){n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;return}n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;let h;if(i.followFinger?h=o?e.translate:-e.translate:h=-n.currentTranslate,i.cssMode)return;if(e.params.freeMode&&i.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:h});return}let f=0,p=e.slidesSizesGrid[0];for(let _=0;_<a.length;_+=_<i.slidesPerGroupSkip?1:i.slidesPerGroup){const S=_<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;typeof a[_+S]<"u"?h>=a[_]&&h<a[_+S]&&(f=_,p=a[_+S]-a[_]):h>=a[_]&&(f=_,p=a[a.length-1]-a[a.length-2])}let y=null,w=null;i.rewind&&(e.isBeginning?w=e.params.virtual&&e.params.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(y=0));const m=(h-a[f])/p,g=f<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;if(d>i.longSwipesMs){if(!i.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(m>=i.longSwipesRatio?e.slideTo(i.rewind&&e.isEnd?y:f+g):e.slideTo(f)),e.swipeDirection==="prev"&&(m>1-i.longSwipesRatio?e.slideTo(f+g):w!==null&&m<0&&Math.abs(m)>i.longSwipesRatio?e.slideTo(w):e.slideTo(f))}else{if(!i.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(c.target===e.navigation.nextEl||c.target===e.navigation.prevEl)?c.target===e.navigation.nextEl?e.slideTo(f+g):e.slideTo(f):(e.swipeDirection==="next"&&e.slideTo(y!==null?y:f+g),e.swipeDirection==="prev"&&e.slideTo(w!==null?w:f))}}let rN;function iN(){const t=this,{params:e,el:n}=t;if(n&&n.offsetWidth===0)return;e.breakpoints&&t.setBreakpoint();const{allowSlideNext:r,allowSlidePrev:i,snapGrid:s}=t,o=t.virtual&&t.params.virtual.enabled;t.allowSlideNext=!0,t.allowSlidePrev=!0,t.updateSize(),t.updateSlides(),t.updateSlidesClasses();const a=o&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&t.isEnd&&!t.isBeginning&&!t.params.centeredSlides&&!a?t.slideTo(t.slides.length-1,0,!1,!0):t.params.loop&&!o?t.slideToLoop(t.realIndex,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0),t.autoplay&&t.autoplay.running&&t.autoplay.paused&&(clearTimeout(rN),rN=setTimeout(()=>{t.autoplay&&t.autoplay.running&&t.autoplay.paused&&t.autoplay.resume()},500)),t.allowSlidePrev=i,t.allowSlideNext=r,t.params.watchOverflow&&s!==t.snapGrid&&t.checkOverflow()}function Yde(t){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&t.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(t.stopPropagation(),t.stopImmediatePropagation())))}function Xde(){const t=this,{wrapperEl:e,rtlTranslate:n,enabled:r}=t;if(!r)return;t.previousTranslate=t.translate,t.isHorizontal()?t.translate=-e.scrollLeft:t.translate=-e.scrollTop,t.translate===0&&(t.translate=0),t.updateActiveIndex(),t.updateSlidesClasses();let i;const s=t.maxTranslate()-t.minTranslate();s===0?i=0:i=(t.translate-t.minTranslate())/s,i!==t.progress&&t.updateProgress(n?-t.translate:t.translate),t.emit("setTranslate",t.translate,!1)}const Em=(t,e)=>{if(!t||t.destroyed||!t.params)return;const n=()=>t.isElement?"swiper-slide":`.${t.params.slideClass}`,r=e.closest(n());if(r){const i=r.querySelector(`.${t.params.lazyPreloaderClass}`);i&&i.remove()}};function Jde(t){const e=this;Em(e,t.target),e.update()}let sN=!1;function Zde(){}const hV=(t,e)=>{const n=Pl(),{params:r,el:i,wrapperEl:s,device:o}=t,a=!!r.nested,l=e==="on"?"addEventListener":"removeEventListener",c=e;i[l]("pointerdown",t.onTouchStart,{passive:!1}),n[l]("pointermove",t.onTouchMove,{passive:!1,capture:a}),n[l]("pointerup",t.onTouchEnd,{passive:!0}),n[l]("pointercancel",t.onTouchEnd,{passive:!0}),n[l]("pointerout",t.onTouchEnd,{passive:!0}),n[l]("pointerleave",t.onTouchEnd,{passive:!0}),(r.preventClicks||r.preventClicksPropagation)&&i[l]("click",t.onClick,!0),r.cssMode&&s[l]("scroll",t.onScroll),r.updateOnWindowResize?t[c](o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",iN,!0):t[c]("observerUpdate",iN,!0),i[l]("load",t.onLoad,{capture:!0})};function ehe(){const t=this,e=Pl(),{params:n}=t;t.onTouchStart=qde.bind(t),t.onTouchMove=Kde.bind(t),t.onTouchEnd=Qde.bind(t),n.cssMode&&(t.onScroll=Xde.bind(t)),t.onClick=Yde.bind(t),t.onLoad=Jde.bind(t),sN||(e.addEventListener("touchstart",Zde),sN=!0),hV(t,"on")}function the(){hV(this,"off")}const nhe={attachEvents:ehe,detachEvents:the},oN=(t,e)=>t.grid&&e.grid&&e.grid.rows>1;function rhe(){const t=this,{realIndex:e,initialized:n,params:r,el:i}=t,s=r.breakpoints;if(!s||s&&Object.keys(s).length===0)return;const o=t.getBreakpoint(s,t.params.breakpointsBase,t.el);if(!o||t.currentBreakpoint===o)return;const l=(o in s?s[o]:void 0)||t.originalParams,c=oN(t,r),u=oN(t,l),d=r.enabled;c&&!u?(i.classList.remove(`${r.containerModifierClass}grid`,`${r.containerModifierClass}grid-column`),t.emitContainerClasses()):!c&&u&&(i.classList.add(`${r.containerModifierClass}grid`),(l.grid.fill&&l.grid.fill==="column"||!l.grid.fill&&r.grid.fill==="column")&&i.classList.add(`${r.containerModifierClass}grid-column`),t.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(y=>{const w=r[y]&&r[y].enabled,m=l[y]&&l[y].enabled;w&&!m&&t[y].disable(),!w&&m&&t[y].enable()});const h=l.direction&&l.direction!==r.direction,f=r.loop&&(l.slidesPerView!==r.slidesPerView||h);h&&n&&t.changeDirection(),kr(t.params,l);const p=t.params.enabled;Object.assign(t,{allowTouchMove:t.params.allowTouchMove,allowSlideNext:t.params.allowSlideNext,allowSlidePrev:t.params.allowSlidePrev}),d&&!p?t.disable():!d&&p&&t.enable(),t.currentBreakpoint=o,t.emit("_beforeBreakpoint",l),f&&n&&(t.loopDestroy(),t.loopCreate(e),t.updateSlides()),t.emit("breakpoint",l)}function ihe(t,e="window",n){if(!t||e==="container"&&!n)return;let r=!1;const i=Br(),s=e==="window"?i.innerHeight:n.clientHeight,o=Object.keys(t).map(a=>{if(typeof a=="string"&&a.indexOf("@")===0){const l=parseFloat(a.substr(1));return{value:s*l,point:a}}return{value:a,point:a}});o.sort((a,l)=>parseInt(a.value,10)-parseInt(l.value,10));for(let a=0;a<o.length;a+=1){const{point:l,value:c}=o[a];e==="window"?i.matchMedia(`(min-width: ${c}px)`).matches&&(r=l):c<=n.clientWidth&&(r=l)}return r||"max"}const she={setBreakpoint:rhe,getBreakpoint:ihe};function ohe(t,e){const n=[];return t.forEach(r=>{typeof r=="object"?Object.keys(r).forEach(i=>{r[i]&&n.push(e+i)}):typeof r=="string"&&n.push(e+r)}),n}function ahe(){const t=this,{classNames:e,params:n,rtl:r,el:i,device:s}=t,o=ohe(["initialized",n.direction,{"free-mode":t.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:r},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&n.grid.fill==="column"},{android:s.android},{ios:s.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);e.push(...o),i.classList.add(...e),t.emitContainerClasses()}function lhe(){const t=this,{el:e,classNames:n}=t;e.classList.remove(...n),t.emitContainerClasses()}const che={addClasses:ahe,removeClasses:lhe};function uhe(){const t=this,{isLocked:e,params:n}=t,{slidesOffsetBefore:r}=n;if(r){const i=t.slides.length-1,s=t.slidesGrid[i]+t.slidesSizesGrid[i]+r*2;t.isLocked=t.size>s}else t.isLocked=t.snapGrid.length===1;n.allowSlideNext===!0&&(t.allowSlideNext=!t.isLocked),n.allowSlidePrev===!0&&(t.allowSlidePrev=!t.isLocked),e&&e!==t.isLocked&&(t.isEnd=!1),e!==t.isLocked&&t.emit(t.isLocked?"lock":"unlock")}const dhe={checkOverflow:uhe},aN={init:!0,direction:"horizontal",oneWayMovement:!1,touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopedSlides:null,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",runCallbacksOnInit:!0,_emitClasses:!1};function hhe(t,e){return function(r={}){const i=Object.keys(r)[0],s=r[i];if(typeof s!="object"||s===null){kr(e,r);return}if(["navigation","pagination","scrollbar"].indexOf(i)>=0&&t[i]===!0&&(t[i]={auto:!0}),!(i in t&&"enabled"in s)){kr(e,r);return}t[i]===!0&&(t[i]={enabled:!0}),typeof t[i]=="object"&&!("enabled"in t[i])&&(t[i].enabled=!0),t[i]||(t[i]={enabled:!1}),kr(e,r)}}const K0={eventsEmitter:cde,update:wde,translate:Ide,transition:Rde,slide:Fde,loop:Bde,grabCursor:Hde,events:nhe,breakpoints:she,checkOverflow:dhe,classes:che},Q0={};let cf=class ts{constructor(...e){let n,r;e.length===1&&e[0].constructor&&Object.prototype.toString.call(e[0]).slice(8,-1)==="Object"?r=e[0]:[n,r]=e,r||(r={}),r=kr({},r),n&&!r.el&&(r.el=n);const i=Pl();if(r.el&&typeof r.el=="string"&&i.querySelectorAll(r.el).length>1){const l=[];return i.querySelectorAll(r.el).forEach(c=>{const u=kr({},r,{el:c});l.push(new ts(u))}),l}const s=this;s.__swiper__=!0,s.support=uV(),s.device=ide({userAgent:r.userAgent}),s.browser=ode(),s.eventsListeners={},s.eventsAnyListeners=[],s.modules=[...s.__modules__],r.modules&&Array.isArray(r.modules)&&s.modules.push(...r.modules);const o={};s.modules.forEach(l=>{l({params:r,swiper:s,extendParams:hhe(r,o),on:s.on.bind(s),once:s.once.bind(s),off:s.off.bind(s),emit:s.emit.bind(s)})});const a=kr({},aN,o);return s.params=kr({},a,Q0,r),s.originalParams=kr({},s.params),s.passedParams=kr({},r),s.params&&s.params.on&&Object.keys(s.params.on).forEach(l=>{s.on(l,s.params.on[l])}),s.params&&s.params.onAny&&s.onAny(s.params.onAny),Object.assign(s,{enabled:s.params.enabled,el:n,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return s.params.direction==="horizontal"},isVertical(){return s.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:s.params.allowSlideNext,allowSlidePrev:s.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:s.params.focusableElements,lastClickTime:lf(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,evCache:[]},allowClick:!0,allowTouchMove:s.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),s.emit("_swiper"),s.params.init&&s.init(),s}getSlideIndex(e){const{slidesEl:n,params:r}=this,i=Mi(n,`.${r.slideClass}, swiper-slide`),s=Yg(i[0]);return Yg(e)-s}recalcSlides(){const e=this,{slidesEl:n,params:r}=e;e.slides=Mi(n,`.${r.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,n){const r=this;e=Math.min(Math.max(e,0),1);const i=r.minTranslate(),o=(r.maxTranslate()-i)*e+i;r.translateTo(o,typeof n>"u"?0:n),r.updateActiveIndex(),r.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const n=e.el.className.split(" ").filter(r=>r.indexOf("swiper")===0||r.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",n.join(" "))}getSlideClasses(e){const n=this;return n.destroyed?"":e.className.split(" ").filter(r=>r.indexOf("swiper-slide")===0||r.indexOf(n.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const n=[];e.slides.forEach(r=>{const i=e.getSlideClasses(r);n.push({slideEl:r,classNames:i}),e.emit("_slideClass",r,i)}),e.emit("_slideClasses",n)}slidesPerViewDynamic(e="current",n=!1){const r=this,{params:i,slides:s,slidesGrid:o,slidesSizesGrid:a,size:l,activeIndex:c}=r;let u=1;if(i.centeredSlides){let d=s[c].swiperSlideSize,h;for(let f=c+1;f<s.length;f+=1)s[f]&&!h&&(d+=s[f].swiperSlideSize,u+=1,d>l&&(h=!0));for(let f=c-1;f>=0;f-=1)s[f]&&!h&&(d+=s[f].swiperSlideSize,u+=1,d>l&&(h=!0))}else if(e==="current")for(let d=c+1;d<s.length;d+=1)(n?o[d]+a[d]-o[c]<l:o[d]-o[c]<l)&&(u+=1);else for(let d=c-1;d>=0;d-=1)o[c]-o[d]<l&&(u+=1);return u}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:n,params:r}=e;r.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(o=>{o.complete&&Em(e,o)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function i(){const o=e.rtlTranslate?e.translate*-1:e.translate,a=Math.min(Math.max(o,e.maxTranslate()),e.minTranslate());e.setTranslate(a),e.updateActiveIndex(),e.updateSlidesClasses()}let s;e.params.freeMode&&e.params.freeMode.enabled?(i(),e.params.autoHeight&&e.updateAutoHeight()):((e.params.slidesPerView==="auto"||e.params.slidesPerView>1)&&e.isEnd&&!e.params.centeredSlides?s=e.slideTo(e.slides.length-1,0,!1,!0):s=e.slideTo(e.activeIndex,0,!1,!0),s||i()),r.watchOverflow&&n!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,n=!0){const r=this,i=r.params.direction;return e||(e=i==="horizontal"?"vertical":"horizontal"),e===i||e!=="horizontal"&&e!=="vertical"||(r.el.classList.remove(`${r.params.containerModifierClass}${i}`),r.el.classList.add(`${r.params.containerModifierClass}${e}`),r.emitContainerClasses(),r.params.direction=e,r.slides.forEach(s=>{e==="vertical"?s.style.width="":s.style.height=""}),r.emit("changeDirection"),n&&r.update()),r}changeLanguageDirection(e){const n=this;n.rtl&&e==="rtl"||!n.rtl&&e==="ltr"||(n.rtl=e==="rtl",n.rtlTranslate=n.params.direction==="horizontal"&&n.rtl,n.rtl?(n.el.classList.add(`${n.params.containerModifierClass}rtl`),n.el.dir="rtl"):(n.el.classList.remove(`${n.params.containerModifierClass}rtl`),n.el.dir="ltr"),n.update())}mount(e){const n=this;if(n.mounted)return!0;let r=e||n.params.el;if(typeof r=="string"&&(r=document.querySelector(r)),!r)return!1;r.swiper=n,r.shadowEl&&(n.isElement=!0);const i=()=>`.${(n.params.wrapperClass||"").trim().split(" ").join(".")}`;let o=(()=>r&&r.shadowRoot&&r.shadowRoot.querySelector?r.shadowRoot.querySelector(i()):Mi(r,i())[0])();return!o&&n.params.createElements&&(o=lV("div",n.params.wrapperClass),r.append(o),Mi(r,`.${n.params.slideClass}`).forEach(a=>{o.append(a)})),Object.assign(n,{el:r,wrapperEl:o,slidesEl:n.isElement?r:o,mounted:!0,rtl:r.dir.toLowerCase()==="rtl"||ro(r,"direction")==="rtl",rtlTranslate:n.params.direction==="horizontal"&&(r.dir.toLowerCase()==="rtl"||ro(r,"direction")==="rtl"),wrongRTL:ro(o,"display")==="-webkit-box"}),!0}init(e){const n=this;return n.initialized||n.mount(e)===!1||(n.emit("beforeInit"),n.params.breakpoints&&n.setBreakpoint(),n.addClasses(),n.updateSize(),n.updateSlides(),n.params.watchOverflow&&n.checkOverflow(),n.params.grabCursor&&n.enabled&&n.setGrabCursor(),n.params.loop&&n.virtual&&n.params.virtual.enabled?n.slideTo(n.params.initialSlide+n.virtual.slidesBefore,0,n.params.runCallbacksOnInit,!1,!0):n.slideTo(n.params.initialSlide,0,n.params.runCallbacksOnInit,!1,!0),n.params.loop&&n.loopCreate(),n.attachEvents(),[...n.el.querySelectorAll('[loading="lazy"]')].forEach(i=>{i.complete?Em(n,i):i.addEventListener("load",s=>{Em(n,s.target)})}),n.initialized=!0,n.emit("init"),n.emit("afterInit")),n}destroy(e=!0,n=!0){const r=this,{params:i,el:s,wrapperEl:o,slides:a}=r;return typeof r.params>"u"||r.destroyed||(r.emit("beforeDestroy"),r.initialized=!1,r.detachEvents(),i.loop&&r.loopDestroy(),n&&(r.removeClasses(),s.removeAttribute("style"),o.removeAttribute("style"),a&&a.length&&a.forEach(l=>{l.classList.remove(i.slideVisibleClass,i.slideActiveClass,i.slideNextClass,i.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),r.emit("destroy"),Object.keys(r.eventsListeners).forEach(l=>{r.off(l)}),e!==!1&&(r.el.swiper=null,Yue(r)),r.destroyed=!0),null}static extendDefaults(e){kr(Q0,e)}static get extendedDefaults(){return Q0}static get defaults(){return aN}static installModule(e){ts.prototype.__modules__||(ts.prototype.__modules__=[]);const n=ts.prototype.__modules__;typeof e=="function"&&n.indexOf(e)<0&&n.push(e)}static use(e){return Array.isArray(e)?(e.forEach(n=>ts.installModule(n)),ts):(ts.installModule(e),ts)}};Object.keys(K0).forEach(t=>{Object.keys(K0[t]).forEach(e=>{cf.prototype[e]=K0[t][e]})});cf.use([ade,lde]);function fhe(t,e,n,r){return t.params.createElements&&Object.keys(r).forEach(i=>{if(!n[i]&&n.auto===!0){let s=Mi(t.el,`.${r[i]}`)[0];s||(s=lV("div",r[i]),s.className=r[i],t.el.append(s)),n[i]=s,e[i]=s}}),n}function pd(t=""){return`.${t.trim().replace(/([\.:!\/])/g,"\\$1").replace(/ /g,".")}`}function phe({swiper:t,extendParams:e,on:n,emit:r}){const i="swiper-pagination";e({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:m=>m,formatFractionTotal:m=>m,bulletClass:`${i}-bullet`,bulletActiveClass:`${i}-bullet-active`,modifierClass:`${i}-`,currentClass:`${i}-current`,totalClass:`${i}-total`,hiddenClass:`${i}-hidden`,progressbarFillClass:`${i}-progressbar-fill`,progressbarOppositeClass:`${i}-progressbar-opposite`,clickableClass:`${i}-clickable`,lockClass:`${i}-lock`,horizontalClass:`${i}-horizontal`,verticalClass:`${i}-vertical`,paginationDisabledClass:`${i}-disabled`}}),t.pagination={el:null,bullets:[]};let s,o=0;const a=m=>(Array.isArray(m)||(m=[m].filter(g=>!!g)),m);function l(){return!t.params.pagination.el||!t.pagination.el||Array.isArray(t.pagination.el)&&t.pagination.el.length===0}function c(m,g){const{bulletActiveClass:_}=t.params.pagination;m&&(m=m[`${g==="prev"?"previous":"next"}ElementSibling`],m&&(m.classList.add(`${_}-${g}`),m=m[`${g==="prev"?"previous":"next"}ElementSibling`],m&&m.classList.add(`${_}-${g}-${g}`)))}function u(m){const g=m.target.closest(pd(t.params.pagination.bulletClass));if(!g)return;m.preventDefault();const _=Yg(g)*t.params.slidesPerGroup;if(t.params.loop){if(t.realIndex===_)return;(_<t.loopedSlides||_>t.slides.length-t.loopedSlides)&&t.loopFix({direction:_<t.loopedSlides?"prev":"next",activeSlideIndex:_,slideTo:!1}),t.slideToLoop(_)}else t.slideTo(_)}function d(){const m=t.rtl,g=t.params.pagination;if(l())return;let _=t.pagination.el;_=a(_);let S;const I=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length,E=t.params.loop?Math.ceil(I/t.params.slidesPerGroup):t.snapGrid.length;if(t.params.loop?S=t.params.slidesPerGroup>1?Math.floor(t.realIndex/t.params.slidesPerGroup):t.realIndex:typeof t.snapIndex<"u"?S=t.snapIndex:S=t.activeIndex||0,g.type==="bullets"&&t.pagination.bullets&&t.pagination.bullets.length>0){const D=t.pagination.bullets;let b,x,O;if(g.dynamicBullets&&(s=Ib(D[0],t.isHorizontal()?"width":"height",!0),_.forEach(C=>{C.style[t.isHorizontal()?"width":"height"]=`${s*(g.dynamicMainBullets+4)}px`}),g.dynamicMainBullets>1&&t.previousIndex!==void 0&&(o+=S-(t.previousIndex||0),o>g.dynamicMainBullets-1?o=g.dynamicMainBullets-1:o<0&&(o=0)),b=Math.max(S-o,0),x=b+(Math.min(D.length,g.dynamicMainBullets)-1),O=(x+b)/2),D.forEach(C=>{C.classList.remove(...["","-next","-next-next","-prev","-prev-prev","-main"].map(k=>`${g.bulletActiveClass}${k}`))}),_.length>1)D.forEach(C=>{const k=Yg(C);k===S&&C.classList.add(g.bulletActiveClass),g.dynamicBullets&&(k>=b&&k<=x&&C.classList.add(`${g.bulletActiveClass}-main`),k===b&&c(C,"prev"),k===x&&c(C,"next"))});else{const C=D[S];if(C&&C.classList.add(g.bulletActiveClass),g.dynamicBullets){const k=D[b],A=D[x];for(let N=b;N<=x;N+=1)D[N]&&D[N].classList.add(`${g.bulletActiveClass}-main`);c(k,"prev"),c(A,"next")}}if(g.dynamicBullets){const C=Math.min(D.length,g.dynamicMainBullets+4),k=(s*C-s)/2-O*s,A=m?"right":"left";D.forEach(N=>{N.style[t.isHorizontal()?A:"top"]=`${k}px`})}}_.forEach((D,b)=>{if(g.type==="fraction"&&(D.querySelectorAll(pd(g.currentClass)).forEach(x=>{x.textContent=g.formatFractionCurrent(S+1)}),D.querySelectorAll(pd(g.totalClass)).forEach(x=>{x.textContent=g.formatFractionTotal(E)})),g.type==="progressbar"){let x;g.progressbarOpposite?x=t.isHorizontal()?"vertical":"horizontal":x=t.isHorizontal()?"horizontal":"vertical";const O=(S+1)/E;let C=1,k=1;x==="horizontal"?C=O:k=O,D.querySelectorAll(pd(g.progressbarFillClass)).forEach(A=>{A.style.transform=`translate3d(0,0,0) scaleX(${C}) scaleY(${k})`,A.style.transitionDuration=`${t.params.speed}ms`})}g.type==="custom"&&g.renderCustom?(D.innerHTML=g.renderCustom(t,S+1,E),b===0&&r("paginationRender",D)):(b===0&&r("paginationRender",D),r("paginationUpdate",D)),t.params.watchOverflow&&t.enabled&&D.classList[t.isLocked?"add":"remove"](g.lockClass)})}function h(){const m=t.params.pagination;if(l())return;const g=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length;let _=t.pagination.el;_=a(_);let S="";if(m.type==="bullets"){let I=t.params.loop?Math.ceil(g/t.params.slidesPerGroup):t.snapGrid.length;t.params.freeMode&&t.params.freeMode.enabled&&I>g&&(I=g);for(let E=0;E<I;E+=1)m.renderBullet?S+=m.renderBullet.call(t,E,m.bulletClass):S+=`<${m.bulletElement} class="${m.bulletClass}"></${m.bulletElement}>`}m.type==="fraction"&&(m.renderFraction?S=m.renderFraction.call(t,m.currentClass,m.totalClass):S=`<span class="${m.currentClass}"></span> / <span class="${m.totalClass}"></span>`),m.type==="progressbar"&&(m.renderProgressbar?S=m.renderProgressbar.call(t,m.progressbarFillClass):S=`<span class="${m.progressbarFillClass}"></span>`),_.forEach(I=>{m.type!=="custom"&&(I.innerHTML=S||""),m.type==="bullets"&&(t.pagination.bullets=[...I.querySelectorAll(pd(m.bulletClass))])}),m.type!=="custom"&&r("paginationRender",_[0])}function f(){t.params.pagination=fhe(t,t.originalParams.pagination,t.params.pagination,{el:"swiper-pagination"});const m=t.params.pagination;if(!m.el)return;let g;typeof m.el=="string"&&t.isElement&&(g=t.el.shadowRoot.querySelector(m.el)),!g&&typeof m.el=="string"&&(g=[...document.querySelectorAll(m.el)]),g||(g=m.el),!(!g||g.length===0)&&(t.params.uniqueNavElements&&typeof m.el=="string"&&Array.isArray(g)&&g.length>1&&(g=[...t.el.querySelectorAll(m.el)],g.length>1&&(g=g.filter(_=>cV(_,".swiper")[0]===t.el)[0])),Array.isArray(g)&&g.length===1&&(g=g[0]),Object.assign(t.pagination,{el:g}),g=a(g),g.forEach(_=>{m.type==="bullets"&&m.clickable&&_.classList.add(m.clickableClass),_.classList.add(m.modifierClass+m.type),_.classList.add(t.isHorizontal()?m.horizontalClass:m.verticalClass),m.type==="bullets"&&m.dynamicBullets&&(_.classList.add(`${m.modifierClass}${m.type}-dynamic`),o=0,m.dynamicMainBullets<1&&(m.dynamicMainBullets=1)),m.type==="progressbar"&&m.progressbarOpposite&&_.classList.add(m.progressbarOppositeClass),m.clickable&&_.addEventListener("click",u),t.enabled||_.classList.add(m.lockClass)}))}function p(){const m=t.params.pagination;if(l())return;let g=t.pagination.el;g&&(g=a(g),g.forEach(_=>{_.classList.remove(m.hiddenClass),_.classList.remove(m.modifierClass+m.type),_.classList.remove(t.isHorizontal()?m.horizontalClass:m.verticalClass),m.clickable&&_.removeEventListener("click",u)})),t.pagination.bullets&&t.pagination.bullets.forEach(_=>_.classList.remove(m.bulletActiveClass))}n("init",()=>{t.params.pagination.enabled===!1?w():(f(),h(),d())}),n("activeIndexChange",()=>{typeof t.snapIndex>"u"&&d()}),n("snapIndexChange",()=>{d()}),n("snapGridLengthChange",()=>{h(),d()}),n("destroy",()=>{p()}),n("enable disable",()=>{let{el:m}=t.pagination;m&&(m=a(m),m.forEach(g=>g.classList[t.enabled?"remove":"add"](t.params.pagination.lockClass)))}),n("lock unlock",()=>{d()}),n("click",(m,g)=>{const _=g.target;let{el:S}=t.pagination;if(Array.isArray(S)||(S=[S].filter(I=>!!I)),t.params.pagination.el&&t.params.pagination.hideOnClick&&S&&S.length>0&&!_.classList.contains(t.params.pagination.bulletClass)){if(t.navigation&&(t.navigation.nextEl&&_===t.navigation.nextEl||t.navigation.prevEl&&_===t.navigation.prevEl))return;const I=S[0].classList.contains(t.params.pagination.hiddenClass);r(I===!0?"paginationShow":"paginationHide"),S.forEach(E=>E.classList.toggle(t.params.pagination.hiddenClass))}});const y=()=>{t.el.classList.remove(t.params.pagination.paginationDisabledClass);let{el:m}=t.pagination;m&&(m=a(m),m.forEach(g=>g.classList.remove(t.params.pagination.paginationDisabledClass))),f(),h(),d()},w=()=>{t.el.classList.add(t.params.pagination.paginationDisabledClass);let{el:m}=t.pagination;m&&(m=a(m),m.forEach(g=>g.classList.add(t.params.pagination.paginationDisabledClass))),p()};Object.assign(t.pagination,{enable:y,disable:w,render:h,update:d,init:f,destroy:p})}function fl(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"}function io(t,e){const n=["__proto__","constructor","prototype"];Object.keys(e).filter(r=>n.indexOf(r)<0).forEach(r=>{typeof t[r]>"u"?t[r]=e[r]:fl(e[r])&&fl(t[r])&&Object.keys(e[r]).length>0?e[r].__swiper__?t[r]=e[r]:io(t[r],e[r]):t[r]=e[r]})}function fV(t={}){return t.navigation&&typeof t.navigation.nextEl>"u"&&typeof t.navigation.prevEl>"u"}function pV(t={}){return t.pagination&&typeof t.pagination.el>"u"}function mV(t={}){return t.scrollbar&&typeof t.scrollbar.el>"u"}function gV(t=""){const e=t.split(" ").map(r=>r.trim()).filter(r=>!!r),n=[];return e.forEach(r=>{n.indexOf(r)<0&&n.push(r)}),n.join(" ")}function mhe(t=""){return t?t.includes("swiper-wrapper")?t:`swiper-wrapper ${t}`:"swiper-wrapper"}const yV=["modules","init","_direction","oneWayMovement","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopedSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideNextClass","slidePrevClass","wrapperClass","lazyPreloaderClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control","injectStyles","injectStylesUrls"];function ghe(t={},e=!0){const n={on:{}},r={},i={};io(n,cf.defaults),io(n,cf.extendedDefaults),n._emitClasses=!0,n.init=!1;const s={},o=yV.map(l=>l.replace(/_/,"")),a=Object.assign({},t);return Object.keys(a).forEach(l=>{typeof t[l]>"u"||(o.indexOf(l)>=0?fl(t[l])?(n[l]={},i[l]={},io(n[l],t[l]),io(i[l],t[l])):(n[l]=t[l],i[l]=t[l]):l.search(/on[A-Z]/)===0&&typeof t[l]=="function"?e?r[`${l[2].toLowerCase()}${l.substr(3)}`]=t[l]:n.on[`${l[2].toLowerCase()}${l.substr(3)}`]=t[l]:s[l]=t[l])}),["navigation","pagination","scrollbar"].forEach(l=>{n[l]===!0&&(n[l]={}),n[l]===!1&&delete n[l]}),{params:n,passedParams:i,rest:s,events:r}}function yhe({el:t,nextEl:e,prevEl:n,paginationEl:r,scrollbarEl:i,swiper:s},o){fV(o)&&e&&n&&(s.params.navigation.nextEl=e,s.originalParams.navigation.nextEl=e,s.params.navigation.prevEl=n,s.originalParams.navigation.prevEl=n),pV(o)&&r&&(s.params.pagination.el=r,s.originalParams.pagination.el=r),mV(o)&&i&&(s.params.scrollbar.el=i,s.originalParams.scrollbar.el=i),s.init(t)}function vhe(t,e,n,r,i){const s=[];if(!e)return s;const o=l=>{s.indexOf(l)<0&&s.push(l)};if(n&&r){const l=r.map(i),c=n.map(i);l.join("")!==c.join("")&&o("children"),r.length!==n.length&&o("children")}return yV.filter(l=>l[0]==="_").map(l=>l.replace(/_/,"")).forEach(l=>{if(l in t&&l in e)if(fl(t[l])&&fl(e[l])){const c=Object.keys(t[l]),u=Object.keys(e[l]);c.length!==u.length?o(l):(c.forEach(d=>{t[l][d]!==e[l][d]&&o(l)}),u.forEach(d=>{t[l][d]!==e[l][d]&&o(l)}))}else t[l]!==e[l]&&o(l)}),s}function vV(t){return t.type&&t.type.displayName&&t.type.displayName.includes("SwiperSlide")}function _V(t){const e=[];return Pe.Children.toArray(t).forEach(n=>{vV(n)?e.push(n):n.props&&n.props.children&&_V(n.props.children).forEach(r=>e.push(r))}),e}function _he(t){const e=[],n={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return Pe.Children.toArray(t).forEach(r=>{if(vV(r))e.push(r);else if(r.props&&r.props.slot&&n[r.props.slot])n[r.props.slot].push(r);else if(r.props&&r.props.children){const i=_V(r.props.children);i.length>0?i.forEach(s=>e.push(s)):n["container-end"].push(r)}else n["container-end"].push(r)}),{slides:e,slots:n}}function whe({swiper:t,slides:e,passedParams:n,changedParams:r,nextEl:i,prevEl:s,scrollbarEl:o,paginationEl:a}){const l=r.filter(b=>b!=="children"&&b!=="direction"&&b!=="wrapperClass"),{params:c,pagination:u,navigation:d,scrollbar:h,virtual:f,thumbs:p}=t;let y,w,m,g,_,S,I,E;r.includes("thumbs")&&n.thumbs&&n.thumbs.swiper&&c.thumbs&&!c.thumbs.swiper&&(y=!0),r.includes("controller")&&n.controller&&n.controller.control&&c.controller&&!c.controller.control&&(w=!0),r.includes("pagination")&&n.pagination&&(n.pagination.el||a)&&(c.pagination||c.pagination===!1)&&u&&!u.el&&(m=!0),r.includes("scrollbar")&&n.scrollbar&&(n.scrollbar.el||o)&&(c.scrollbar||c.scrollbar===!1)&&h&&!h.el&&(g=!0),r.includes("navigation")&&n.navigation&&(n.navigation.prevEl||s)&&(n.navigation.nextEl||i)&&(c.navigation||c.navigation===!1)&&d&&!d.prevEl&&!d.nextEl&&(_=!0);const D=b=>{t[b]&&(t[b].destroy(),b==="navigation"?(t.isElement&&(t[b].prevEl.remove(),t[b].nextEl.remove()),c[b].prevEl=void 0,c[b].nextEl=void 0,t[b].prevEl=void 0,t[b].nextEl=void 0):(t.isElement&&t[b].el.remove(),c[b].el=void 0,t[b].el=void 0))};r.includes("loop")&&t.isElement&&(c.loop&&!n.loop?S=!0:!c.loop&&n.loop?I=!0:E=!0),l.forEach(b=>{if(fl(c[b])&&fl(n[b]))io(c[b],n[b]);else{const x=n[b];(x===!0||x===!1)&&(b==="navigation"||b==="pagination"||b==="scrollbar")?x===!1&&D(b):c[b]=n[b]}}),l.includes("controller")&&!w&&t.controller&&t.controller.control&&c.controller&&c.controller.control&&(t.controller.control=c.controller.control),r.includes("children")&&e&&f&&c.virtual.enabled&&(f.slides=e,f.update(!0)),r.includes("children")&&e&&c.loop&&(E=!0),y&&p.init()&&p.update(!0),w&&(t.controller.control=c.controller.control),m&&(t.isElement&&(!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-pagination"),t.el.shadowEl.appendChild(a)),a&&(c.pagination.el=a),u.init(),u.render(),u.update()),g&&(t.isElement&&(!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-scrollbar"),t.el.shadowEl.appendChild(o)),o&&(c.scrollbar.el=o),h.init(),h.updateSize(),h.setTranslate()),_&&(t.isElement&&((!i||typeof i=="string")&&(i=document.createElement("div"),i.classList.add("swiper-button-next"),t.el.shadowEl.appendChild(i)),(!s||typeof s=="string")&&(s=document.createElement("div"),s.classList.add("swiper-button-prev"),t.el.shadowEl.appendChild(s))),i&&(c.navigation.nextEl=i),s&&(c.navigation.prevEl=s),d.init(),d.update()),r.includes("allowSlideNext")&&(t.allowSlideNext=n.allowSlideNext),r.includes("allowSlidePrev")&&(t.allowSlidePrev=n.allowSlidePrev),r.includes("direction")&&t.changeDirection(n.direction,!1),(S||E)&&t.loopDestroy(),(I||E)&&t.loopCreate(),t.update()}function bhe(t,e,n){if(!n)return null;const r=u=>{let d=u;return u<0?d=e.length+u:d>=e.length&&(d=d-e.length),d},i=t.isHorizontal()?{[t.rtlTranslate?"right":"left"]:`${n.offset}px`}:{top:`${n.offset}px`},{from:s,to:o}=n,a=t.params.loop?-e.length:0,l=t.params.loop?e.length*2:e.length,c=[];for(let u=a;u<l;u+=1)u>=s&&u<=o&&c.push(e[r(u)]);return c.map(u=>Pe.cloneElement(u,{swiper:t,style:i}))}const She=t=>{!t||t.destroyed||!t.params.virtual||t.params.virtual&&!t.params.virtual.enabled||(t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.parallax&&t.params.parallax&&t.params.parallax.enabled&&t.parallax.setTranslate())};function nh(t,e){return typeof window>"u"?H.useEffect(t,e):H.useLayoutEffect(t,e)}const lN=H.createContext(null),Ehe=H.createContext(null);function Cb(){return Cb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cb.apply(this,arguments)}const wV=H.forwardRef(function(t,e){let{className:n,tag:r="div",wrapperTag:i="div",children:s,onSwiper:o,...a}=t===void 0?{}:t,l=!1;const[c,u]=H.useState("swiper"),[d,h]=H.useState(null),[f,p]=H.useState(!1),y=H.useRef(!1),w=H.useRef(null),m=H.useRef(null),g=H.useRef(null),_=H.useRef(null),S=H.useRef(null),I=H.useRef(null),E=H.useRef(null),D=H.useRef(null),{params:b,passedParams:x,rest:O,events:C}=ghe(a),{slides:k,slots:A}=_he(s),N=()=>{p(!f)};Object.assign(b.on,{_containerClasses($,z){u(z)}});const B=()=>{Object.assign(b.on,C),l=!0;const $={...b};if(delete $.wrapperClass,m.current=new cf($),m.current.virtual&&m.current.params.virtual.enabled){m.current.virtual.slides=k;const z={cache:!1,slides:k,renderExternal:h,renderExternalUpdate:!1};io(m.current.params.virtual,z),io(m.current.originalParams.virtual,z)}};w.current||B(),m.current&&m.current.on("_beforeBreakpoint",N);const R=()=>{l||!C||!m.current||Object.keys(C).forEach($=>{m.current.on($,C[$])})},T=()=>{!C||!m.current||Object.keys(C).forEach($=>{m.current.off($,C[$])})};H.useEffect(()=>()=>{m.current&&m.current.off("_beforeBreakpoint",N)}),H.useEffect(()=>{!y.current&&m.current&&(m.current.emitSlidesClasses(),y.current=!0)}),nh(()=>{if(e&&(e.current=w.current),!!w.current)return m.current.destroyed&&B(),yhe({el:w.current,nextEl:S.current,prevEl:I.current,paginationEl:E.current,scrollbarEl:D.current,swiper:m.current},b),o&&o(m.current),()=>{m.current&&!m.current.destroyed&&m.current.destroy(!0,!1)}},[]),nh(()=>{R();const $=vhe(x,g.current,k,_.current,z=>z.key);return g.current=x,_.current=k,$.length&&m.current&&!m.current.destroyed&&whe({swiper:m.current,slides:k,passedParams:x,changedParams:$,nextEl:S.current,prevEl:I.current,scrollbarEl:D.current,paginationEl:E.current}),()=>{T()}}),nh(()=>{She(m.current)},[d]);function U(){return b.virtual?bhe(m.current,k,d):k.map(($,z)=>Pe.cloneElement($,{swiper:m.current,swiperSlideIndex:z}))}return Pe.createElement(r,Cb({ref:w,className:gV(`${c}${n?` ${n}`:""}`)},O),Pe.createElement(Ehe.Provider,{value:m.current},A["container-start"],Pe.createElement(i,{className:mhe(b.wrapperClass)},A["wrapper-start"],U(),A["wrapper-end"]),fV(b)&&Pe.createElement(Pe.Fragment,null,Pe.createElement("div",{ref:I,className:"swiper-button-prev"}),Pe.createElement("div",{ref:S,className:"swiper-button-next"})),mV(b)&&Pe.createElement("div",{ref:D,className:"swiper-scrollbar"}),pV(b)&&Pe.createElement("div",{ref:E,className:"swiper-pagination"}),A["container-end"]))});wV.displayName="Swiper";function kb(){return kb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kb.apply(this,arguments)}const Ab=H.forwardRef(function(t,e){let{tag:n="div",children:r,className:i="",swiper:s,zoom:o,lazy:a,virtualIndex:l,swiperSlideIndex:c,...u}=t===void 0?{}:t;const d=H.useRef(null),[h,f]=H.useState("swiper-slide"),[p,y]=H.useState(!1);function w(S,I,E){I===d.current&&f(E)}nh(()=>{if(typeof c<"u"&&(d.current.swiperSlideIndex=c),e&&(e.current=d.current),!(!d.current||!s)){if(s.destroyed){h!=="swiper-slide"&&f("swiper-slide");return}return s.on("_slideClass",w),()=>{s&&s.off("_slideClass",w)}}}),nh(()=>{s&&d.current&&!s.destroyed&&f(s.getSlideClasses(d.current))},[s]);const m={isActive:h.indexOf("swiper-slide-active")>=0,isVisible:h.indexOf("swiper-slide-visible")>=0,isPrev:h.indexOf("swiper-slide-prev")>=0,isNext:h.indexOf("swiper-slide-next")>=0},g=()=>typeof r=="function"?r(m):r,_=()=>{y(!0)};return Pe.createElement(n,kb({ref:d,className:gV(`${h}${i?` ${i}`:""}`),"data-swiper-slide-index":l,onLoad:_},u),o&&Pe.createElement(lN.Provider,{value:m},Pe.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof o=="number"?o:void 0},g(),a&&!p&&Pe.createElement("div",{className:"swiper-lazy-preloader"}))),!o&&Pe.createElement(lN.Provider,{value:m},g(),a&&!p&&Pe.createElement("div",{className:"swiper-lazy-preloader"})))});Ab.displayName="SwiperSlide";function cN({imgsrc:t}){return v.jsx(wV,{modules:[phe],pagination:{clickable:!0},slidesPerView:1,spaceBetween:50,onSlideChange:()=>"slide change",onSwiper:e=>e,children:t[0]!=="h"?t.map(e=>v.jsx(Ab,{children:v.jsx("img",{alt:"이미지 사진",src:e})},e)):v.jsx(Ab,{children:v.jsx("img",{alt:"이미지 사진",src:t})})})}function xhe(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}function bV(t,e){return new Promise(function(n,r){let i;return The(t).then(function(s){try{return i=s,n(new Blob([e.slice(0,2),i,e.slice(2)],{type:"image/jpeg"}))}catch(o){return r(o)}},r)})}const The=t=>new Promise((e,n)=>{const r=new FileReader;r.addEventListener("load",({target:{result:i}})=>{const s=new DataView(i);let o=0;if(s.getUint16(o)!==65496)return n("not a valid JPEG");for(o+=2;;){const a=s.getUint16(o);if(a===65498)break;const l=s.getUint16(o+2);if(a===65505&&s.getUint32(o+4)===1165519206){const c=o+10;let u;switch(s.getUint16(c)){case 18761:u=!0;break;case 19789:u=!1;break;default:return n("TIFF header contains invalid endian")}if(s.getUint16(c+2,u)!==42)return n("TIFF header contains invalid version");const d=s.getUint32(c+4,u),h=c+d+2+12*s.getUint16(c+d,u);for(let f=c+d+2;f<h;f+=12)if(s.getUint16(f,u)==274){if(s.getUint16(f+2,u)!==3)return n("Orientation data type is invalid");if(s.getUint32(f+4,u)!==1)return n("Orientation data count is invalid");s.setUint16(f+8,1,u);break}return e(i.slice(o,o+2+l))}o+=2+l}return e(new Blob)}),r.readAsArrayBuffer(t)});var Xg={},Ihe={get exports(){return Xg},set exports(t){Xg=t}};(function(t){var e,n,r={};Ihe.exports=r,r.parse=function(i,s){for(var o=r.bin.readUshort,a=r.bin.readUint,l=0,c={},u=new Uint8Array(i),d=u.length-4;a(u,d)!=101010256;)d--;l=d,l+=4;var h=o(u,l+=4);o(u,l+=2);var f=a(u,l+=2),p=a(u,l+=4);l+=4,l=p;for(var y=0;y<h;y++){a(u,l),l+=4,l+=4,l+=4,a(u,l+=4),f=a(u,l+=4);var w=a(u,l+=4),m=o(u,l+=4),g=o(u,l+2),_=o(u,l+4);l+=6;var S=a(u,l+=8);l+=4,l+=m+g+_,r._readLocal(u,S,c,f,w,s)}return c},r._readLocal=function(i,s,o,a,l,c){var u=r.bin.readUshort,d=r.bin.readUint;d(i,s),u(i,s+=4),u(i,s+=2);var h=u(i,s+=2);d(i,s+=2),d(i,s+=4),s+=4;var f=u(i,s+=8),p=u(i,s+=2);s+=2;var y=r.bin.readUTF8(i,s,f);if(s+=f,s+=p,c)o[y]={size:l,csize:a};else{var w=new Uint8Array(i.buffer,s);if(h==0)o[y]=new Uint8Array(w.buffer.slice(s,s+a));else{if(h!=8)throw"unknown compression method: "+h;var m=new Uint8Array(l);r.inflateRaw(w,m),o[y]=m}}},r.inflateRaw=function(i,s){return r.F.inflate(i,s)},r.inflate=function(i,s){return i[0],i[1],r.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),s)},r.deflate=function(i,s){s==null&&(s={level:6});var o=0,a=new Uint8Array(50+Math.floor(1.1*i.length));a[o]=120,a[o+1]=156,o+=2,o=r.F.deflateRaw(i,a,o,s.level);var l=r.adler(i,0,i.length);return a[o+0]=l>>>24&255,a[o+1]=l>>>16&255,a[o+2]=l>>>8&255,a[o+3]=l>>>0&255,new Uint8Array(a.buffer,0,o+4)},r.deflateRaw=function(i,s){s==null&&(s={level:6});var o=new Uint8Array(50+Math.floor(1.1*i.length)),a=r.F.deflateRaw(i,o,a,s.level);return new Uint8Array(o.buffer,0,a)},r.encode=function(i,s){s==null&&(s=!1);var o=0,a=r.bin.writeUint,l=r.bin.writeUshort,c={};for(var u in i){var d=!r._noNeed(u)&&!s,h=i[u],f=r.crc.crc(h,0,h.length);c[u]={cpr:d,usize:h.length,crc:f,file:d?r.deflateRaw(h):h}}for(var u in c)o+=c[u].file.length+30+46+2*r.bin.sizeUTF8(u);o+=22;var p=new Uint8Array(o),y=0,w=[];for(var u in c){var m=c[u];w.push(y),y=r._writeHeader(p,y,u,m,0)}var g=0,_=y;for(var u in c)m=c[u],w.push(y),y=r._writeHeader(p,y,u,m,1,w[g++]);var S=y-_;return a(p,y,101010256),y+=4,l(p,y+=4,g),l(p,y+=2,g),a(p,y+=2,S),a(p,y+=4,_),y+=4,y+=2,p.buffer},r._noNeed=function(i){var s=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(s)!=-1},r._writeHeader=function(i,s,o,a,l,c){var u=r.bin.writeUint,d=r.bin.writeUshort,h=a.file;return u(i,s,l==0?67324752:33639248),s+=4,l==1&&(s+=2),d(i,s,20),d(i,s+=2,0),d(i,s+=2,a.cpr?8:0),u(i,s+=2,0),u(i,s+=4,a.crc),u(i,s+=4,h.length),u(i,s+=4,a.usize),d(i,s+=4,r.bin.sizeUTF8(o)),d(i,s+=2,0),s+=2,l==1&&(s+=2,s+=2,u(i,s+=6,c),s+=4),s+=r.bin.writeUTF8(i,s,o),l==0&&(i.set(h,s),s+=h.length),s},r.crc={table:function(){for(var i=new Uint32Array(256),s=0;s<256;s++){for(var o=s,a=0;a<8;a++)1&o?o=3988292384^o>>>1:o>>>=1;i[s]=o}return i}(),update:function(i,s,o,a){for(var l=0;l<a;l++)i=r.crc.table[255&(i^s[o+l])]^i>>>8;return i},crc:function(i,s,o){return 4294967295^r.crc.update(4294967295,i,s,o)}},r.adler=function(i,s,o){for(var a=1,l=0,c=s,u=s+o;c<u;){for(var d=Math.min(c+5552,u);c<d;)l+=a+=i[c++];a%=65521,l%=65521}return l<<16|a},r.bin={readUshort:function(i,s){return i[s]|i[s+1]<<8},writeUshort:function(i,s,o){i[s]=255&o,i[s+1]=o>>8&255},readUint:function(i,s){return 16777216*i[s+3]+(i[s+2]<<16|i[s+1]<<8|i[s])},writeUint:function(i,s,o){i[s]=255&o,i[s+1]=o>>8&255,i[s+2]=o>>16&255,i[s+3]=o>>24&255},readASCII:function(i,s,o){for(var a="",l=0;l<o;l++)a+=String.fromCharCode(i[s+l]);return a},writeASCII:function(i,s,o){for(var a=0;a<o.length;a++)i[s+a]=o.charCodeAt(a)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,s,o){for(var a,l="",c=0;c<o;c++)l+="%"+r.bin.pad(i[s+c].toString(16));try{a=decodeURIComponent(l)}catch{return r.bin.readASCII(i,s,o)}return a},writeUTF8:function(i,s,o){for(var a=o.length,l=0,c=0;c<a;c++){var u=o.charCodeAt(c);if(!(4294967168&u))i[s+l]=u,l++;else if(!(4294965248&u))i[s+l]=192|u>>6,i[s+l+1]=128|u>>0&63,l+=2;else if(!(4294901760&u))i[s+l]=224|u>>12,i[s+l+1]=128|u>>6&63,i[s+l+2]=128|u>>0&63,l+=3;else{if(4292870144&u)throw"e";i[s+l]=240|u>>18,i[s+l+1]=128|u>>12&63,i[s+l+2]=128|u>>6&63,i[s+l+3]=128|u>>0&63,l+=4}}return l},sizeUTF8:function(i){for(var s=i.length,o=0,a=0;a<s;a++){var l=i.charCodeAt(a);if(!(4294967168&l))o++;else if(!(4294965248&l))o+=2;else if(!(4294901760&l))o+=3;else{if(4292870144&l)throw"e";o+=4}}return o}},r.F={},r.F.deflateRaw=function(i,s,o,a){var l=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][a],c=r.F.U,u=r.F._goodIndex;r.F._hash;var d=r.F._putsE,h=0,f=o<<3,p=0,y=i.length;if(a==0){for(;h<y;)d(s,f,h+(C=Math.min(65535,y-h))==y?1:0),f=r.F._copyExact(i,h,C,s,f+8),h+=C;return f>>>3}var w=c.lits,m=c.strt,g=c.prev,_=0,S=0,I=0,E=0,D=0,b=0;for(y>2&&(m[b=r.F._hash(i,0)]=0),h=0;h<y;h++){if(D=b,h+1<y-2){b=r.F._hash(i,h+1);var x=h+1&32767;g[x]=m[b],m[b]=x}if(p<=h){(_>14e3||S>26697)&&y-h>100&&(p<h&&(w[_]=h-p,_+=2,p=h),f=r.F._writeBlock(h==y-1||p==y?1:0,w,_,E,i,I,h-I,s,f),_=S=E=0,I=h);var O=0;h<y-2&&(O=r.F._bestMatch(i,h,g,D,Math.min(l[2],y-h),l[3]));var C=O>>>16,k=65535&O;if(O!=0){k=65535&O;var A=u(C=O>>>16,c.of0);c.lhst[257+A]++;var N=u(k,c.df0);c.dhst[N]++,E+=c.exb[A]+c.dxb[N],w[_]=C<<23|h-p,w[_+1]=k<<16|A<<8|N,_+=2,p=h+C}else c.lhst[i[h]]++;S++}}for(I==h&&i.length!=0||(p<h&&(w[_]=h-p,_+=2,p=h),f=r.F._writeBlock(1,w,_,E,i,I,h-I,s,f),_=0,S=0,_=S=E=0,I=h);7&f;)f++;return f>>>3},r.F._bestMatch=function(i,s,o,a,l,c){var u=32767&s,d=o[u],h=u-d+32768&32767;if(d==u||a!=r.F._hash(i,s-h))return 0;for(var f=0,p=0,y=Math.min(32767,s);h<=y&&--c!=0&&d!=u;){if(f==0||i[s+f]==i[s+f-h]){var w=r.F._howLong(i,s,h);if(w>f){if(p=h,(f=w)>=l)break;h+2<w&&(w=h+2);for(var m=0,g=0;g<w-2;g++){var _=s-h+g+32768&32767,S=_-o[_]+32768&32767;S>m&&(m=S,d=_)}}}h+=(u=d)-(d=o[u])+32768&32767}return f<<16|p},r.F._howLong=function(i,s,o){if(i[s]!=i[s-o]||i[s+1]!=i[s+1-o]||i[s+2]!=i[s+2-o])return 0;var a=s,l=Math.min(i.length,s+258);for(s+=3;s<l&&i[s]==i[s-o];)s++;return s-a},r.F._hash=function(i,s){return(i[s]<<8|i[s+1])+(i[s+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(i,s,o,a,l,c,u,d,h){var f,p,y,w,m,g,_,S,I,E=r.F.U,D=r.F._putsF,b=r.F._putsE;E.lhst[256]++,p=(f=r.F.getTrees())[0],y=f[1],w=f[2],m=f[3],g=f[4],_=f[5],S=f[6],I=f[7];var x=32+(h+3&7?8-(h+3&7):0)+(u<<3),O=a+r.F.contSize(E.fltree,E.lhst)+r.F.contSize(E.fdtree,E.dhst),C=a+r.F.contSize(E.ltree,E.lhst)+r.F.contSize(E.dtree,E.dhst);C+=14+3*_+r.F.contSize(E.itree,E.ihst)+(2*E.ihst[16]+3*E.ihst[17]+7*E.ihst[18]);for(var k=0;k<286;k++)E.lhst[k]=0;for(k=0;k<30;k++)E.dhst[k]=0;for(k=0;k<19;k++)E.ihst[k]=0;var A=x<O&&x<C?0:O<C?1:2;if(D(d,h,i),D(d,h+1,A),h+=3,A==0){for(;7&h;)h++;h=r.F._copyExact(l,c,u,d,h)}else{var N,B;if(A==1&&(N=E.fltree,B=E.fdtree),A==2){r.F.makeCodes(E.ltree,p),r.F.revCodes(E.ltree,p),r.F.makeCodes(E.dtree,y),r.F.revCodes(E.dtree,y),r.F.makeCodes(E.itree,w),r.F.revCodes(E.itree,w),N=E.ltree,B=E.dtree,b(d,h,m-257),b(d,h+=5,g-1),b(d,h+=5,_-4),h+=4;for(var R=0;R<_;R++)b(d,h+3*R,E.itree[1+(E.ordr[R]<<1)]);h+=3*_,h=r.F._codeTiny(S,E.itree,d,h),h=r.F._codeTiny(I,E.itree,d,h)}for(var T=c,U=0;U<o;U+=2){for(var $=s[U],z=$>>>23,J=T+(8388607&$);T<J;)h=r.F._writeLit(l[T++],N,d,h);if(z!=0){var P=s[U+1],F=P>>16,L=P>>8&255,j=255&P;b(d,h=r.F._writeLit(257+L,N,d,h),z-E.of0[L]),h+=E.exb[L],D(d,h=r.F._writeLit(j,B,d,h),F-E.df0[j]),h+=E.dxb[j],T+=z}}h=r.F._writeLit(256,N,d,h)}return h},r.F._copyExact=function(i,s,o,a,l){var c=l>>>3;return a[c]=o,a[c+1]=o>>>8,a[c+2]=255-a[c],a[c+3]=255-a[c+1],c+=4,a.set(new Uint8Array(i.buffer,s,o),c),l+(o+4<<3)},r.F.getTrees=function(){for(var i=r.F.U,s=r.F._hufTree(i.lhst,i.ltree,15),o=r.F._hufTree(i.dhst,i.dtree,15),a=[],l=r.F._lenCodes(i.ltree,a),c=[],u=r.F._lenCodes(i.dtree,c),d=0;d<a.length;d+=2)i.ihst[a[d]]++;for(d=0;d<c.length;d+=2)i.ihst[c[d]]++;for(var h=r.F._hufTree(i.ihst,i.itree,7),f=19;f>4&&i.itree[1+(i.ordr[f-1]<<1)]==0;)f--;return[s,o,h,l,u,f,a,c]},r.F.getSecond=function(i){for(var s=[],o=0;o<i.length;o+=2)s.push(i[o+1]);return s},r.F.nonZero=function(i){for(var s="",o=0;o<i.length;o+=2)i[o+1]!=0&&(s+=(o>>1)+",");return s},r.F.contSize=function(i,s){for(var o=0,a=0;a<s.length;a++)o+=s[a]*i[1+(a<<1)];return o},r.F._codeTiny=function(i,s,o,a){for(var l=0;l<i.length;l+=2){var c=i[l],u=i[l+1];a=r.F._writeLit(c,s,o,a);var d=c==16?2:c==17?3:7;c>15&&(r.F._putsE(o,a,u,d),a+=d)}return a},r.F._lenCodes=function(i,s){for(var o=i.length;o!=2&&i[o-1]==0;)o-=2;for(var a=0;a<o;a+=2){var l=i[a+1],c=a+3<o?i[a+3]:-1,u=a+5<o?i[a+5]:-1,d=a==0?-1:i[a-1];if(l==0&&c==l&&u==l){for(var h=a+5;h+2<o&&i[h+2]==l;)h+=2;(f=Math.min(h+1-a>>>1,138))<11?s.push(17,f-3):s.push(18,f-11),a+=2*f-2}else if(l==d&&c==l&&u==l){for(h=a+5;h+2<o&&i[h+2]==l;)h+=2;var f=Math.min(h+1-a>>>1,6);s.push(16,f-3),a+=2*f-2}else s.push(l,0)}return o>>>1},r.F._hufTree=function(i,s,o){var a=[],l=i.length,c=s.length,u=0;for(u=0;u<c;u+=2)s[u]=0,s[u+1]=0;for(u=0;u<l;u++)i[u]!=0&&a.push({lit:u,f:i[u]});var d=a.length,h=a.slice(0);if(d==0)return 0;if(d==1){var f=a[0].lit;return h=f==0?1:0,s[1+(f<<1)]=1,s[1+(h<<1)]=1,1}a.sort(function(S,I){return S.f-I.f});var p=a[0],y=a[1],w=0,m=1,g=2;for(a[0]={lit:-1,f:p.f+y.f,l:p,r:y,d:0};m!=d-1;)p=w!=m&&(g==d||a[w].f<a[g].f)?a[w++]:a[g++],y=w!=m&&(g==d||a[w].f<a[g].f)?a[w++]:a[g++],a[m++]={lit:-1,f:p.f+y.f,l:p,r:y};var _=r.F.setDepth(a[m-1],0);for(_>o&&(r.F.restrictDepth(h,o,_),_=o),u=0;u<d;u++)s[1+(h[u].lit<<1)]=h[u].d;return _},r.F.setDepth=function(i,s){return i.lit!=-1?(i.d=s,s):Math.max(r.F.setDepth(i.l,s+1),r.F.setDepth(i.r,s+1))},r.F.restrictDepth=function(i,s,o){var a=0,l=1<<o-s,c=0;for(i.sort(function(d,h){return h.d==d.d?d.f-h.f:h.d-d.d}),a=0;a<i.length&&i[a].d>s;a++){var u=i[a].d;i[a].d=s,c+=l-(1<<o-u)}for(c>>>=o-s;c>0;)(u=i[a].d)<s?(i[a].d++,c-=1<<s-u-1):a++;for(;a>=0;a--)i[a].d==s&&c<0&&(i[a].d--,c++);c!=0&&console.log("debt left")},r.F._goodIndex=function(i,s){var o=0;return s[16|o]<=i&&(o|=16),s[8|o]<=i&&(o|=8),s[4|o]<=i&&(o|=4),s[2|o]<=i&&(o|=2),s[1|o]<=i&&(o|=1),o},r.F._writeLit=function(i,s,o,a){return r.F._putsF(o,a,s[i<<1]),a+s[1+(i<<1)]},r.F.inflate=function(i,s){var o=Uint8Array;if(i[0]==3&&i[1]==0)return s||new o(0);var a=r.F,l=a._bitsF,c=a._bitsE,u=a._decodeTiny,d=a.makeCodes,h=a.codes2map,f=a._get17,p=a.U,y=s==null;y&&(s=new o(i.length>>>2<<3));for(var w,m,g=0,_=0,S=0,I=0,E=0,D=0,b=0,x=0,O=0;g==0;)if(g=l(i,O,1),_=l(i,O+1,2),O+=3,_!=0){if(y&&(s=r.F._check(s,x+(1<<17))),_==1&&(w=p.flmap,m=p.fdmap,D=511,b=31),_==2){S=c(i,O,5)+257,I=c(i,O+5,5)+1,E=c(i,O+10,4)+4,O+=14;for(var C=0;C<38;C+=2)p.itree[C]=0,p.itree[C+1]=0;var k=1;for(C=0;C<E;C++){var A=c(i,O+3*C,3);p.itree[1+(p.ordr[C]<<1)]=A,A>k&&(k=A)}O+=3*E,d(p.itree,k),h(p.itree,k,p.imap),w=p.lmap,m=p.dmap,O=u(p.imap,(1<<k)-1,S+I,i,O,p.ttree);var N=a._copyOut(p.ttree,0,S,p.ltree);D=(1<<N)-1;var B=a._copyOut(p.ttree,S,I,p.dtree);b=(1<<B)-1,d(p.ltree,N),h(p.ltree,N,w),d(p.dtree,B),h(p.dtree,B,m)}for(;;){var R=w[f(i,O)&D];O+=15&R;var T=R>>>4;if(!(T>>>8))s[x++]=T;else{if(T==256)break;var U=x+T-254;if(T>264){var $=p.ldef[T-257];U=x+($>>>3)+c(i,O,7&$),O+=7&$}var z=m[f(i,O)&b];O+=15&z;var J=z>>>4,P=p.ddef[J],F=(P>>>4)+l(i,O,15&P);for(O+=15&P,y&&(s=r.F._check(s,x+(1<<17)));x<U;)s[x]=s[x++-F],s[x]=s[x++-F],s[x]=s[x++-F],s[x]=s[x++-F];x=U}}}else{7&O&&(O+=8-(7&O));var L=4+(O>>>3),j=i[L-4]|i[L-3]<<8;y&&(s=r.F._check(s,x+j)),s.set(new o(i.buffer,i.byteOffset+L,j),x),O=L+j<<3,x+=j}return s.length==x?s:s.slice(0,x)},r.F._check=function(i,s){var o=i.length;if(s<=o)return i;var a=new Uint8Array(Math.max(o<<1,s));return a.set(i,0),a},r.F._decodeTiny=function(i,s,o,a,l,c){for(var u=r.F._bitsE,d=r.F._get17,h=0;h<o;){var f=i[d(a,l)&s];l+=15&f;var p=f>>>4;if(p<=15)c[h]=p,h++;else{var y=0,w=0;p==16?(w=3+u(a,l,2),l+=2,y=c[h-1]):p==17?(w=3+u(a,l,3),l+=3):p==18&&(w=11+u(a,l,7),l+=7);for(var m=h+w;h<m;)c[h]=y,h++}}return l},r.F._copyOut=function(i,s,o,a){for(var l=0,c=0,u=a.length>>>1;c<o;){var d=i[c+s];a[c<<1]=0,a[1+(c<<1)]=d,d>l&&(l=d),c++}for(;c<u;)a[c<<1]=0,a[1+(c<<1)]=0,c++;return l},r.F.makeCodes=function(i,s){for(var o,a,l,c,u=r.F.U,d=i.length,h=u.bl_count,f=0;f<=s;f++)h[f]=0;for(f=1;f<d;f+=2)h[i[f]]++;var p=u.next_code;for(o=0,h[0]=0,a=1;a<=s;a++)o=o+h[a-1]<<1,p[a]=o;for(l=0;l<d;l+=2)(c=i[l+1])!=0&&(i[l]=p[c],p[c]++)},r.F.codes2map=function(i,s,o){for(var a=i.length,l=r.F.U.rev15,c=0;c<a;c+=2)if(i[c+1]!=0)for(var u=c>>1,d=i[c+1],h=u<<4|d,f=s-d,p=i[c]<<f,y=p+(1<<f);p!=y;)o[l[p]>>>15-s]=h,p++},r.F.revCodes=function(i,s){for(var o=r.F.U.rev15,a=15-s,l=0;l<i.length;l+=2){var c=i[l]<<s-i[l+1];i[l]=o[c]>>>a}},r.F._putsE=function(i,s,o){o<<=7&s;var a=s>>>3;i[a]|=o,i[a+1]|=o>>>8},r.F._putsF=function(i,s,o){o<<=7&s;var a=s>>>3;i[a]|=o,i[a+1]|=o>>>8,i[a+2]|=o>>>16},r.F._bitsE=function(i,s,o){return(i[s>>>3]|i[1+(s>>>3)]<<8)>>>(7&s)&(1<<o)-1},r.F._bitsF=function(i,s,o){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16)>>>(7&s)&(1<<o)-1},r.F._get17=function(i,s){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16)>>>(7&s)},r.F._get25=function(i,s){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16|i[3+(s>>>3)]<<24)>>>(7&s)},r.F.U=(e=Uint16Array,n=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var i=r.F.U,s=0;s<32768;s++){var o=s;o=(4278255360&(o=(4042322160&(o=(3435973836&(o=(2863311530&o)>>>1|(1431655765&o)<<1))>>>2|(858993459&o)<<2))>>>4|(252645135&o)<<4))>>>8|(16711935&o)<<8,i.rev15[s]=(o>>>16|o<<16)>>>17}function a(l,c,u){for(;c--!=0;)l.push(0,u)}for(s=0;s<32;s++)i.ldef[s]=i.of0[s]<<3|i.exb[s],i.ddef[s]=i.df0[s]<<4|i.dxb[s];a(i.fltree,144,8),a(i.fltree,112,9),a(i.fltree,24,7),a(i.fltree,8,8),r.F.makeCodes(i.fltree,9),r.F.codes2map(i.fltree,9,i.flmap),r.F.revCodes(i.fltree,9),a(i.fdtree,32,5),r.F.makeCodes(i.fdtree,5),r.F.codes2map(i.fdtree,5,i.fdmap),r.F.revCodes(i.fdtree,5),a(i.itree,19,0),a(i.ltree,286,0),a(i.dtree,30,0),a(i.ttree,320,0)}()})();var Che=xhe({__proto__:null,default:Xg},[Xg]);const ai=function(){var t={nextZero(u,d){for(;u[d]!=0;)d++;return d},readUshort:(u,d)=>u[d]<<8|u[d+1],writeUshort(u,d,h){u[d]=h>>8&255,u[d+1]=255&h},readUint:(u,d)=>16777216*u[d]+(u[d+1]<<16|u[d+2]<<8|u[d+3]),writeUint(u,d,h){u[d]=h>>24&255,u[d+1]=h>>16&255,u[d+2]=h>>8&255,u[d+3]=255&h},readASCII(u,d,h){let f="";for(let p=0;p<h;p++)f+=String.fromCharCode(u[d+p]);return f},writeASCII(u,d,h){for(let f=0;f<h.length;f++)u[d+f]=h.charCodeAt(f)},readBytes(u,d,h){const f=[];for(let p=0;p<h;p++)f.push(u[d+p]);return f},pad:u=>u.length<2?`0${u}`:u,readUTF8(u,d,h){let f,p="";for(let y=0;y<h;y++)p+=`%${t.pad(u[d+y].toString(16))}`;try{f=decodeURIComponent(p)}catch{return t.readASCII(u,d,h)}return f}};function e(u,d,h,f){const p=d*h,y=s(f),w=Math.ceil(d*y/8),m=new Uint8Array(4*p),g=new Uint32Array(m.buffer),{ctype:_}=f,{depth:S}=f,I=t.readUshort;if(_==6){const $=p<<2;if(S==8)for(var E=0;E<$;E+=4)m[E]=u[E],m[E+1]=u[E+1],m[E+2]=u[E+2],m[E+3]=u[E+3];if(S==16)for(E=0;E<$;E++)m[E]=u[E<<1]}else if(_==2){const $=f.tabs.tRNS;if($==null){if(S==8)for(E=0;E<p;E++){var D=3*E;g[E]=255<<24|u[D+2]<<16|u[D+1]<<8|u[D]}if(S==16)for(E=0;E<p;E++)D=6*E,g[E]=255<<24|u[D+4]<<16|u[D+2]<<8|u[D]}else{var b=$[0];const z=$[1],J=$[2];if(S==8)for(E=0;E<p;E++){var x=E<<2;D=3*E,g[E]=255<<24|u[D+2]<<16|u[D+1]<<8|u[D],u[D]==b&&u[D+1]==z&&u[D+2]==J&&(m[x+3]=0)}if(S==16)for(E=0;E<p;E++)x=E<<2,D=6*E,g[E]=255<<24|u[D+4]<<16|u[D+2]<<8|u[D],I(u,D)==b&&I(u,D+2)==z&&I(u,D+4)==J&&(m[x+3]=0)}}else if(_==3){const $=f.tabs.PLTE,z=f.tabs.tRNS,J=z?z.length:0;if(S==1)for(var O=0;O<h;O++){var C=O*w,k=O*d;for(E=0;E<d;E++){x=k+E<<2;var A=3*(N=u[C+(E>>3)]>>7-((7&E)<<0)&1);m[x]=$[A],m[x+1]=$[A+1],m[x+2]=$[A+2],m[x+3]=N<J?z[N]:255}}if(S==2)for(O=0;O<h;O++)for(C=O*w,k=O*d,E=0;E<d;E++)x=k+E<<2,A=3*(N=u[C+(E>>2)]>>6-((3&E)<<1)&3),m[x]=$[A],m[x+1]=$[A+1],m[x+2]=$[A+2],m[x+3]=N<J?z[N]:255;if(S==4)for(O=0;O<h;O++)for(C=O*w,k=O*d,E=0;E<d;E++)x=k+E<<2,A=3*(N=u[C+(E>>1)]>>4-((1&E)<<2)&15),m[x]=$[A],m[x+1]=$[A+1],m[x+2]=$[A+2],m[x+3]=N<J?z[N]:255;if(S==8)for(E=0;E<p;E++){var N;x=E<<2,A=3*(N=u[E]),m[x]=$[A],m[x+1]=$[A+1],m[x+2]=$[A+2],m[x+3]=N<J?z[N]:255}}else if(_==4){if(S==8)for(E=0;E<p;E++){x=E<<2;var B=u[R=E<<1];m[x]=B,m[x+1]=B,m[x+2]=B,m[x+3]=u[R+1]}if(S==16)for(E=0;E<p;E++){var R;x=E<<2,B=u[R=E<<2],m[x]=B,m[x+1]=B,m[x+2]=B,m[x+3]=u[R+2]}}else if(_==0)for(b=f.tabs.tRNS?f.tabs.tRNS:-1,O=0;O<h;O++){const $=O*w,z=O*d;if(S==1)for(var T=0;T<d;T++){var U=(B=255*(u[$+(T>>>3)]>>>7-(7&T)&1))==255*b?0:255;g[z+T]=U<<24|B<<16|B<<8|B}else if(S==2)for(T=0;T<d;T++)U=(B=85*(u[$+(T>>>2)]>>>6-((3&T)<<1)&3))==85*b?0:255,g[z+T]=U<<24|B<<16|B<<8|B;else if(S==4)for(T=0;T<d;T++)U=(B=17*(u[$+(T>>>1)]>>>4-((1&T)<<2)&15))==17*b?0:255,g[z+T]=U<<24|B<<16|B<<8|B;else if(S==8)for(T=0;T<d;T++)U=(B=u[$+T])==b?0:255,g[z+T]=U<<24|B<<16|B<<8|B;else if(S==16)for(T=0;T<d;T++)B=u[$+(T<<1)],U=I(u,$+(T<<1))==b?0:255,g[z+T]=U<<24|B<<16|B<<8|B}return m}function n(u,d,h,f){const p=s(u),y=Math.ceil(h*p/8),w=new Uint8Array((y+1+u.interlace)*f);return d=u.tabs.CgBI?i(d,w):r(d,w),u.interlace==0?d=o(d,u,0,h,f):u.interlace==1&&(d=function(g,_){const S=_.width,I=_.height,E=s(_),D=E>>3,b=Math.ceil(S*E/8),x=new Uint8Array(I*b);let O=0;const C=[0,0,4,0,2,0,1],k=[0,4,0,2,0,1,0],A=[8,8,8,4,4,2,2],N=[8,8,4,4,2,2,1];let B=0;for(;B<7;){const T=A[B],U=N[B];let $=0,z=0,J=C[B];for(;J<I;)J+=T,z++;let P=k[B];for(;P<S;)P+=U,$++;const F=Math.ceil($*E/8);o(g,_,O,$,z);let L=0,j=C[B];for(;j<I;){let M=k[B],te=O+L*F<<3;for(;M<S;){var R;if(E==1&&(R=(R=g[te>>3])>>7-(7&te)&1,x[j*b+(M>>3)]|=R<<7-((7&M)<<0)),E==2&&(R=(R=g[te>>3])>>6-(7&te)&3,x[j*b+(M>>2)]|=R<<6-((3&M)<<1)),E==4&&(R=(R=g[te>>3])>>4-(7&te)&15,x[j*b+(M>>1)]|=R<<4-((1&M)<<2)),E>=8){const G=j*b+M*D;for(let ee=0;ee<D;ee++)x[G+ee]=g[(te>>3)+ee]}te+=E,M+=U}L++,j+=T}$*z!=0&&(O+=z*(1+F)),B+=1}return x}(d,u)),d}function r(u,d){return i(new Uint8Array(u.buffer,2,u.length-6),d)}var i=function(){const u={H:{}};return u.H.N=function(d,h){const f=Uint8Array;let p,y,w=0,m=0,g=0,_=0,S=0,I=0,E=0,D=0,b=0;if(d[0]==3&&d[1]==0)return h||new f(0);const x=u.H,O=x.b,C=x.e,k=x.R,A=x.n,N=x.A,B=x.Z,R=x.m,T=h==null;for(T&&(h=new f(d.length>>>2<<5));w==0;)if(w=O(d,b,1),m=O(d,b+1,2),b+=3,m!=0){if(T&&(h=u.H.W(h,D+(1<<17))),m==1&&(p=R.J,y=R.h,I=511,E=31),m==2){g=C(d,b,5)+257,_=C(d,b+5,5)+1,S=C(d,b+10,4)+4,b+=14;let $=1;for(var U=0;U<38;U+=2)R.Q[U]=0,R.Q[U+1]=0;for(U=0;U<S;U++){const P=C(d,b+3*U,3);R.Q[1+(R.X[U]<<1)]=P,P>$&&($=P)}b+=3*S,A(R.Q,$),N(R.Q,$,R.u),p=R.w,y=R.d,b=k(R.u,(1<<$)-1,g+_,d,b,R.v);const z=x.V(R.v,0,g,R.C);I=(1<<z)-1;const J=x.V(R.v,g,_,R.D);E=(1<<J)-1,A(R.C,z),N(R.C,z,p),A(R.D,J),N(R.D,J,y)}for(;;){const $=p[B(d,b)&I];b+=15&$;const z=$>>>4;if(!(z>>>8))h[D++]=z;else{if(z==256)break;{let J=D+z-254;if(z>264){const M=R.q[z-257];J=D+(M>>>3)+C(d,b,7&M),b+=7&M}const P=y[B(d,b)&E];b+=15&P;const F=P>>>4,L=R.c[F],j=(L>>>4)+O(d,b,15&L);for(b+=15&L;D<J;)h[D]=h[D++-j],h[D]=h[D++-j],h[D]=h[D++-j],h[D]=h[D++-j];D=J}}}}else{7&b&&(b+=8-(7&b));const $=4+(b>>>3),z=d[$-4]|d[$-3]<<8;T&&(h=u.H.W(h,D+z)),h.set(new f(d.buffer,d.byteOffset+$,z),D),b=$+z<<3,D+=z}return h.length==D?h:h.slice(0,D)},u.H.W=function(d,h){const f=d.length;if(h<=f)return d;const p=new Uint8Array(f<<1);return p.set(d,0),p},u.H.R=function(d,h,f,p,y,w){const m=u.H.e,g=u.H.Z;let _=0;for(;_<f;){const S=d[g(p,y)&h];y+=15&S;const I=S>>>4;if(I<=15)w[_]=I,_++;else{let E=0,D=0;I==16?(D=3+m(p,y,2),y+=2,E=w[_-1]):I==17?(D=3+m(p,y,3),y+=3):I==18&&(D=11+m(p,y,7),y+=7);const b=_+D;for(;_<b;)w[_]=E,_++}}return y},u.H.V=function(d,h,f,p){let y=0,w=0;const m=p.length>>>1;for(;w<f;){const g=d[w+h];p[w<<1]=0,p[1+(w<<1)]=g,g>y&&(y=g),w++}for(;w<m;)p[w<<1]=0,p[1+(w<<1)]=0,w++;return y},u.H.n=function(d,h){const f=u.H.m,p=d.length;let y,w,m,g;const _=f.j;for(var S=0;S<=h;S++)_[S]=0;for(S=1;S<p;S+=2)_[d[S]]++;const I=f.K;for(y=0,_[0]=0,w=1;w<=h;w++)y=y+_[w-1]<<1,I[w]=y;for(m=0;m<p;m+=2)g=d[m+1],g!=0&&(d[m]=I[g],I[g]++)},u.H.A=function(d,h,f){const p=d.length,y=u.H.m.r;for(let w=0;w<p;w+=2)if(d[w+1]!=0){const m=w>>1,g=d[w+1],_=m<<4|g,S=h-g;let I=d[w]<<S;const E=I+(1<<S);for(;I!=E;)f[y[I]>>>15-h]=_,I++}},u.H.l=function(d,h){const f=u.H.m.r,p=15-h;for(let y=0;y<d.length;y+=2){const w=d[y]<<h-d[y+1];d[y]=f[w]>>>p}},u.H.M=function(d,h,f){f<<=7&h;const p=h>>>3;d[p]|=f,d[p+1]|=f>>>8},u.H.I=function(d,h,f){f<<=7&h;const p=h>>>3;d[p]|=f,d[p+1]|=f>>>8,d[p+2]|=f>>>16},u.H.e=function(d,h,f){return(d[h>>>3]|d[1+(h>>>3)]<<8)>>>(7&h)&(1<<f)-1},u.H.b=function(d,h,f){return(d[h>>>3]|d[1+(h>>>3)]<<8|d[2+(h>>>3)]<<16)>>>(7&h)&(1<<f)-1},u.H.Z=function(d,h){return(d[h>>>3]|d[1+(h>>>3)]<<8|d[2+(h>>>3)]<<16)>>>(7&h)},u.H.i=function(d,h){return(d[h>>>3]|d[1+(h>>>3)]<<8|d[2+(h>>>3)]<<16|d[3+(h>>>3)]<<24)>>>(7&h)},u.H.m=function(){const d=Uint16Array,h=Uint32Array;return{K:new d(16),j:new d(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new d(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new h(32),J:new d(512),_:[],h:new d(32),$:[],w:new d(32768),C:[],v:[],d:new d(32768),D:[],u:new d(512),Q:[],r:new d(32768),s:new h(286),Y:new h(30),a:new h(19),t:new h(15e3),k:new d(65536),g:new d(32768)}}(),function(){const d=u.H.m;for(var h=0;h<32768;h++){let p=h;p=(2863311530&p)>>>1|(1431655765&p)<<1,p=(3435973836&p)>>>2|(858993459&p)<<2,p=(4042322160&p)>>>4|(252645135&p)<<4,p=(4278255360&p)>>>8|(16711935&p)<<8,d.r[h]=(p>>>16|p<<16)>>>17}function f(p,y,w){for(;y--!=0;)p.push(0,w)}for(h=0;h<32;h++)d.q[h]=d.S[h]<<3|d.T[h],d.c[h]=d.p[h]<<4|d.z[h];f(d._,144,8),f(d._,112,9),f(d._,24,7),f(d._,8,8),u.H.n(d._,9),u.H.A(d._,9,d.J),u.H.l(d._,9),f(d.$,32,5),u.H.n(d.$,5),u.H.A(d.$,5,d.h),u.H.l(d.$,5),f(d.Q,19,0),f(d.C,286,0),f(d.D,30,0),f(d.v,320,0)}(),u.H.N}();function s(u){return[1,null,3,1,2,null,4][u.ctype]*u.depth}function o(u,d,h,f,p){let y=s(d);const w=Math.ceil(f*y/8);let m,g;y=Math.ceil(y/8);let _=u[h],S=0;if(_>1&&(u[h]=[0,0,1][_-2]),_==3)for(S=y;S<w;S++)u[S+1]=u[S+1]+(u[S+1-y]>>>1)&255;for(let I=0;I<p;I++)if(m=h+I*w,g=m+I+1,_=u[g-1],S=0,_==0)for(;S<w;S++)u[m+S]=u[g+S];else if(_==1){for(;S<y;S++)u[m+S]=u[g+S];for(;S<w;S++)u[m+S]=u[g+S]+u[m+S-y]}else if(_==2)for(;S<w;S++)u[m+S]=u[g+S]+u[m+S-w];else if(_==3){for(;S<y;S++)u[m+S]=u[g+S]+(u[m+S-w]>>>1);for(;S<w;S++)u[m+S]=u[g+S]+(u[m+S-w]+u[m+S-y]>>>1)}else{for(;S<y;S++)u[m+S]=u[g+S]+a(0,u[m+S-w],0);for(;S<w;S++)u[m+S]=u[g+S]+a(u[m+S-y],u[m+S-w],u[m+S-y-w])}return u}function a(u,d,h){const f=u+d-h,p=f-u,y=f-d,w=f-h;return p*p<=y*y&&p*p<=w*w?u:y*y<=w*w?d:h}function l(u,d,h){h.width=t.readUint(u,d),d+=4,h.height=t.readUint(u,d),d+=4,h.depth=u[d],d++,h.ctype=u[d],d++,h.compress=u[d],d++,h.filter=u[d],d++,h.interlace=u[d],d++}function c(u,d,h,f,p,y,w,m,g){const _=Math.min(d,p),S=Math.min(h,y);let I=0,E=0;for(let B=0;B<S;B++)for(let R=0;R<_;R++)if(w>=0&&m>=0?(I=B*d+R<<2,E=(m+B)*p+w+R<<2):(I=(-m+B)*d-w+R<<2,E=B*p+R<<2),g==0)f[E]=u[I],f[E+1]=u[I+1],f[E+2]=u[I+2],f[E+3]=u[I+3];else if(g==1){var D=u[I+3]*.00392156862745098,b=u[I]*D,x=u[I+1]*D,O=u[I+2]*D,C=f[E+3]*(1/255),k=f[E]*C,A=f[E+1]*C,N=f[E+2]*C;const T=1-D,U=D+C*T,$=U==0?0:1/U;f[E+3]=255*U,f[E+0]=(b+k*T)*$,f[E+1]=(x+A*T)*$,f[E+2]=(O+N*T)*$}else if(g==2)D=u[I+3],b=u[I],x=u[I+1],O=u[I+2],C=f[E+3],k=f[E],A=f[E+1],N=f[E+2],D==C&&b==k&&x==A&&O==N?(f[E]=0,f[E+1]=0,f[E+2]=0,f[E+3]=0):(f[E]=b,f[E+1]=x,f[E+2]=O,f[E+3]=D);else if(g==3){if(D=u[I+3],b=u[I],x=u[I+1],O=u[I+2],C=f[E+3],k=f[E],A=f[E+1],N=f[E+2],D==C&&b==k&&x==A&&O==N)continue;if(D<220&&C>20)return!1}return!0}return{decode:function(d){const h=new Uint8Array(d);let f=8;const p=t,y=p.readUshort,w=p.readUint,m={tabs:{},frames:[]},g=new Uint8Array(h.length);let _,S=0,I=0;const E=[137,80,78,71,13,10,26,10];for(var D=0;D<8;D++)if(h[D]!=E[D])throw"The input is not a PNG file!";for(;f<h.length;){const B=p.readUint(h,f);f+=4;const R=p.readASCII(h,f,4);if(f+=4,R=="IHDR")l(h,f,m);else if(R=="iCCP"){for(var b=f;h[b]!=0;)b++;p.readASCII(h,f,b-f),h[b+1];const T=h.slice(b+2,f+B);let U=null;try{U=r(T)}catch{U=i(T)}m.tabs[R]=U}else if(R=="CgBI")m.tabs[R]=h.slice(f,f+4);else if(R=="IDAT"){for(D=0;D<B;D++)g[S+D]=h[f+D];S+=B}else if(R=="acTL")m.tabs[R]={num_frames:w(h,f),num_plays:w(h,f+4)},_=new Uint8Array(h.length);else if(R=="fcTL"){I!=0&&((N=m.frames[m.frames.length-1]).data=n(m,_.slice(0,I),N.rect.width,N.rect.height),I=0);const T={x:w(h,f+12),y:w(h,f+16),width:w(h,f+4),height:w(h,f+8)};let U=y(h,f+22);U=y(h,f+20)/(U==0?100:U);const $={rect:T,delay:Math.round(1e3*U),dispose:h[f+24],blend:h[f+25]};m.frames.push($)}else if(R=="fdAT"){for(D=0;D<B-4;D++)_[I+D]=h[f+D+4];I+=B-4}else if(R=="pHYs")m.tabs[R]=[p.readUint(h,f),p.readUint(h,f+4),h[f+8]];else if(R=="cHRM")for(m.tabs[R]=[],D=0;D<8;D++)m.tabs[R].push(p.readUint(h,f+4*D));else if(R=="tEXt"||R=="zTXt"){m.tabs[R]==null&&(m.tabs[R]={});var x=p.nextZero(h,f),O=p.readASCII(h,f,x-f),C=f+B-x-1;if(R=="tEXt")A=p.readASCII(h,x+1,C);else{var k=r(h.slice(x+2,x+2+C));A=p.readUTF8(k,0,k.length)}m.tabs[R][O]=A}else if(R=="iTXt"){m.tabs[R]==null&&(m.tabs[R]={}),x=0,b=f,x=p.nextZero(h,b),O=p.readASCII(h,b,x-b);const T=h[b=x+1];var A;h[b+1],b+=2,x=p.nextZero(h,b),p.readASCII(h,b,x-b),b=x+1,x=p.nextZero(h,b),p.readUTF8(h,b,x-b),C=B-((b=x+1)-f),T==0?A=p.readUTF8(h,b,C):(k=r(h.slice(b,b+C)),A=p.readUTF8(k,0,k.length)),m.tabs[R][O]=A}else if(R=="PLTE")m.tabs[R]=p.readBytes(h,f,B);else if(R=="hIST"){const T=m.tabs.PLTE.length/3;for(m.tabs[R]=[],D=0;D<T;D++)m.tabs[R].push(y(h,f+2*D))}else if(R=="tRNS")m.ctype==3?m.tabs[R]=p.readBytes(h,f,B):m.ctype==0?m.tabs[R]=y(h,f):m.ctype==2&&(m.tabs[R]=[y(h,f),y(h,f+2),y(h,f+4)]);else if(R=="gAMA")m.tabs[R]=p.readUint(h,f)/1e5;else if(R=="sRGB")m.tabs[R]=h[f];else if(R=="bKGD")m.ctype==0||m.ctype==4?m.tabs[R]=[y(h,f)]:m.ctype==2||m.ctype==6?m.tabs[R]=[y(h,f),y(h,f+2),y(h,f+4)]:m.ctype==3&&(m.tabs[R]=h[f]);else if(R=="IEND")break;f+=B,p.readUint(h,f),f+=4}var N;return I!=0&&((N=m.frames[m.frames.length-1]).data=n(m,_.slice(0,I),N.rect.width,N.rect.height)),m.data=n(m,g,m.width,m.height),delete m.compress,delete m.interlace,delete m.filter,m},toRGBA8:function(d){const h=d.width,f=d.height;if(d.tabs.acTL==null)return[e(d.data,h,f,d).buffer];const p=[];d.frames[0].data==null&&(d.frames[0].data=d.data);const y=h*f*4,w=new Uint8Array(y),m=new Uint8Array(y),g=new Uint8Array(y);for(let S=0;S<d.frames.length;S++){const I=d.frames[S],E=I.rect.x,D=I.rect.y,b=I.rect.width,x=I.rect.height,O=e(I.data,b,x,d);if(S!=0)for(var _=0;_<y;_++)g[_]=w[_];if(I.blend==0?c(O,b,x,w,h,f,E,D,0):I.blend==1&&c(O,b,x,w,h,f,E,D,1),p.push(w.buffer.slice(0)),I.dispose!=0){if(I.dispose==1)c(m,b,x,w,h,f,E,D,0);else if(I.dispose==2)for(_=0;_<y;_++)w[_]=g[_]}}return p},_paeth:a,_copyTile:c,_bin:t}}();(function(){const{_copyTile:t}=ai,{_bin:e}=ai,n=ai._paeth;var r={table:function(){const b=new Uint32Array(256);for(let x=0;x<256;x++){let O=x;for(let C=0;C<8;C++)1&O?O=3988292384^O>>>1:O>>>=1;b[x]=O}return b}(),update(b,x,O,C){for(let k=0;k<C;k++)b=r.table[255&(b^x[O+k])]^b>>>8;return b},crc:(b,x,O)=>4294967295^r.update(4294967295,b,x,O)};function i(b,x,O,C){x[O]+=b[0]*C>>4,x[O+1]+=b[1]*C>>4,x[O+2]+=b[2]*C>>4,x[O+3]+=b[3]*C>>4}function s(b){return Math.max(0,Math.min(255,b))}function o(b,x){const O=b[0]-x[0],C=b[1]-x[1],k=b[2]-x[2],A=b[3]-x[3];return O*O+C*C+k*k+A*A}function a(b,x,O,C,k,A,N){N==null&&(N=1);const B=C.length,R=[];for(var T=0;T<B;T++){const j=C[T];R.push([j>>>0&255,j>>>8&255,j>>>16&255,j>>>24&255])}for(T=0;T<B;T++){let j=4294967295;for(var U=0,$=0;$<B;$++){var z=o(R[T],R[$]);$!=T&&z<j&&(j=z,U=$)}}const J=new Uint32Array(k.buffer),P=new Int16Array(x*O*4),F=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(T=0;T<F.length;T++)F[T]=255*((F[T]+.5)/16-.5);for(let j=0;j<O;j++)for(let M=0;M<x;M++){var L;T=4*(j*x+M),N!=2?L=[s(b[T]+P[T]),s(b[T+1]+P[T+1]),s(b[T+2]+P[T+2]),s(b[T+3]+P[T+3])]:(z=F[4*(3&j)+(3&M)],L=[s(b[T]+z),s(b[T+1]+z),s(b[T+2]+z),s(b[T+3]+z)]),U=0;let te=16777215;for($=0;$<B;$++){const de=o(L,R[$]);de<te&&(te=de,U=$)}const G=R[U],ee=[L[0]-G[0],L[1]-G[1],L[2]-G[2],L[3]-G[3]];N==1&&(M!=x-1&&i(ee,P,T+4,7),j!=O-1&&(M!=0&&i(ee,P,T+4*x-4,3),i(ee,P,T+4*x,5),M!=x-1&&i(ee,P,T+4*x+4,1))),A[T>>2]=U,J[T>>2]=C[U]}}function l(b,x,O,C,k){k==null&&(k={});const{crc:A}=r,N=e.writeUint,B=e.writeUshort,R=e.writeASCII;let T=8;const U=b.frames.length>1;let $,z=!1,J=33+(U?20:0);if(k.sRGB!=null&&(J+=13),k.pHYs!=null&&(J+=21),k.iCCP!=null&&($=pako.deflate(k.iCCP),J+=21+$.length+4),b.ctype==3){for(var P=b.plte.length,F=0;F<P;F++)b.plte[F]>>>24!=255&&(z=!0);J+=8+3*P+4+(z?8+1*P+4:0)}for(var L=0;L<b.frames.length;L++)U&&(J+=38),J+=(G=b.frames[L]).cimg.length+12,L!=0&&(J+=4);J+=12;const j=new Uint8Array(J),M=[137,80,78,71,13,10,26,10];for(F=0;F<8;F++)j[F]=M[F];if(N(j,T,13),T+=4,R(j,T,"IHDR"),T+=4,N(j,T,x),T+=4,N(j,T,O),T+=4,j[T]=b.depth,T++,j[T]=b.ctype,T++,j[T]=0,T++,j[T]=0,T++,j[T]=0,T++,N(j,T,A(j,T-17,17)),T+=4,k.sRGB!=null&&(N(j,T,1),T+=4,R(j,T,"sRGB"),T+=4,j[T]=k.sRGB,T++,N(j,T,A(j,T-5,5)),T+=4),k.iCCP!=null){const ee=13+$.length;N(j,T,ee),T+=4,R(j,T,"iCCP"),T+=4,R(j,T,"ICC profile"),T+=11,T+=2,j.set($,T),T+=$.length,N(j,T,A(j,T-(ee+4),ee+4)),T+=4}if(k.pHYs!=null&&(N(j,T,9),T+=4,R(j,T,"pHYs"),T+=4,N(j,T,k.pHYs[0]),T+=4,N(j,T,k.pHYs[1]),T+=4,j[T]=k.pHYs[2],T++,N(j,T,A(j,T-13,13)),T+=4),U&&(N(j,T,8),T+=4,R(j,T,"acTL"),T+=4,N(j,T,b.frames.length),T+=4,N(j,T,k.loop!=null?k.loop:0),T+=4,N(j,T,A(j,T-12,12)),T+=4),b.ctype==3){for(N(j,T,3*(P=b.plte.length)),T+=4,R(j,T,"PLTE"),T+=4,F=0;F<P;F++){const ee=3*F,de=b.plte[F],ye=255&de,oe=de>>>8&255,De=de>>>16&255;j[T+ee+0]=ye,j[T+ee+1]=oe,j[T+ee+2]=De}if(T+=3*P,N(j,T,A(j,T-3*P-4,3*P+4)),T+=4,z){for(N(j,T,P),T+=4,R(j,T,"tRNS"),T+=4,F=0;F<P;F++)j[T+F]=b.plte[F]>>>24&255;T+=P,N(j,T,A(j,T-P-4,P+4)),T+=4}}let te=0;for(L=0;L<b.frames.length;L++){var G=b.frames[L];U&&(N(j,T,26),T+=4,R(j,T,"fcTL"),T+=4,N(j,T,te++),T+=4,N(j,T,G.rect.width),T+=4,N(j,T,G.rect.height),T+=4,N(j,T,G.rect.x),T+=4,N(j,T,G.rect.y),T+=4,B(j,T,C[L]),T+=2,B(j,T,1e3),T+=2,j[T]=G.dispose,T++,j[T]=G.blend,T++,N(j,T,A(j,T-30,30)),T+=4);const ee=G.cimg;N(j,T,(P=ee.length)+(L==0?0:4)),T+=4;const de=T;R(j,T,L==0?"IDAT":"fdAT"),T+=4,L!=0&&(N(j,T,te++),T+=4),j.set(ee,T),T+=P,N(j,T,A(j,de,T-de)),T+=4}return N(j,T,0),T+=4,R(j,T,"IEND"),T+=4,N(j,T,A(j,T-4,4)),T+=4,j.buffer}function c(b,x,O){for(let C=0;C<b.frames.length;C++){const k=b.frames[C];k.rect.width;const A=k.rect.height,N=new Uint8Array(A*k.bpl+A);k.cimg=f(k.img,A,k.bpp,k.bpl,N,x,O)}}function u(b,x,O,C,k){const A=k[0],N=k[1],B=k[2],R=k[3],T=k[4],U=k[5];let $=6,z=8,J=255;for(var P=0;P<b.length;P++){const Me=new Uint8Array(b[P]);for(var F=Me.length,L=0;L<F;L+=4)J&=Me[L+3]}const j=J!=255,M=function(ve,Le,ft,qe,ut,Pt){const et=[];for(var pe=0;pe<ve.length;pe++){const _e=new Uint8Array(ve[pe]),Re=new Uint32Array(_e.buffer);var Ge;let Te=0,Fe=0,we=Le,W=ft,V=qe?1:0;if(pe!=0){const Z=Pt||qe||pe==1||et[pe-2].dispose!=0?1:2;let ie=0,ue=1e9;for(let he=0;he<Z;he++){var K=new Uint8Array(ve[pe-1-he]);const Oe=new Uint32Array(ve[pe-1-he]);let Ie=Le,Ce=ft,$e=-1,nt=-1;for(let Ze=0;Ze<ft;Ze++)for(let yt=0;yt<Le;yt++)Re[X=Ze*Le+yt]!=Oe[X]&&(yt<Ie&&(Ie=yt),yt>$e&&($e=yt),Ze<Ce&&(Ce=Ze),Ze>nt&&(nt=Ze));$e==-1&&(Ie=Ce=$e=nt=0),ut&&((1&Ie)==1&&Ie--,(1&Ce)==1&&Ce--);const rt=($e-Ie+1)*(nt-Ce+1);rt<ue&&(ue=rt,ie=he,Te=Ie,Fe=Ce,we=$e-Ie+1,W=nt-Ce+1)}K=new Uint8Array(ve[pe-1-ie]),ie==1&&(et[pe-1].dispose=2),Ge=new Uint8Array(we*W*4),t(K,Le,ft,Ge,we,W,-Te,-Fe,0),V=t(_e,Le,ft,Ge,we,W,-Te,-Fe,3)?1:0,V==1?h(_e,Le,ft,Ge,{x:Te,y:Fe,width:we,height:W}):t(_e,Le,ft,Ge,we,W,-Te,-Fe,0)}else Ge=_e.slice(0);et.push({rect:{x:Te,y:Fe,width:we,height:W},img:Ge,blend:V,dispose:0})}if(qe)for(pe=0;pe<et.length;pe++){if((be=et[pe]).blend==1)continue;const _e=be.rect,Re=et[pe-1].rect,Te=Math.min(_e.x,Re.x),Fe=Math.min(_e.y,Re.y),we={x:Te,y:Fe,width:Math.max(_e.x+_e.width,Re.x+Re.width)-Te,height:Math.max(_e.y+_e.height,Re.y+Re.height)-Fe};et[pe-1].dispose=1,pe-1!=0&&d(ve,Le,ft,et,pe-1,we,ut),d(ve,Le,ft,et,pe,we,ut)}let Y=0;if(ve.length!=1)for(var X=0;X<et.length;X++){var be;Y+=(be=et[X]).rect.width*be.rect.height}return et}(b,x,O,A,N,B),te={},G=[],ee=[];if(C!=0){const Me=[];for(L=0;L<M.length;L++)Me.push(M[L].img.buffer);const ve=function(ut){let Pt=0;for(var et=0;et<ut.length;et++)Pt+=ut[et].byteLength;const pe=new Uint8Array(Pt);let Ge=0;for(et=0;et<ut.length;et++){const K=new Uint8Array(ut[et]),Y=K.length;for(let X=0;X<Y;X+=4){let be=K[X],_e=K[X+1],Re=K[X+2];const Te=K[X+3];Te==0&&(be=_e=Re=0),pe[Ge+X]=be,pe[Ge+X+1]=_e,pe[Ge+X+2]=Re,pe[Ge+X+3]=Te}Ge+=Y}return pe.buffer}(Me),Le=y(ve,C);for(L=0;L<Le.plte.length;L++)G.push(Le.plte[L].est.rgba);let ft=0;for(L=0;L<M.length;L++){const qe=(ye=M[L]).img.length;var de=new Uint8Array(Le.inds.buffer,ft>>2,qe>>2);ee.push(de);const ut=new Uint8Array(Le.abuf,ft,qe);U&&a(ye.img,ye.rect.width,ye.rect.height,G,ut,de),ye.img.set(ut),ft+=qe}}else for(P=0;P<M.length;P++){var ye=M[P];const Me=new Uint32Array(ye.img.buffer);var oe=ye.rect.width;for(F=Me.length,de=new Uint8Array(F),ee.push(de),L=0;L<F;L++){const ve=Me[L];if(L!=0&&ve==Me[L-1])de[L]=de[L-1];else if(L>oe&&ve==Me[L-oe])de[L]=de[L-oe];else{let Le=te[ve];if(Le==null&&(te[ve]=Le=G.length,G.push(ve),G.length>=300))break;de[L]=Le}}}const De=G.length;for(De<=256&&T==0&&(z=De<=2?1:De<=4?2:De<=16?4:8,z=Math.max(z,R)),P=0;P<M.length;P++){(ye=M[P]).rect.x,ye.rect.y,oe=ye.rect.width;const Me=ye.rect.height;let ve=ye.img;new Uint32Array(ve.buffer);let Le=4*oe,ft=4;if(De<=256&&T==0){Le=Math.ceil(z*oe/8);var He=new Uint8Array(Le*Me);const qe=ee[P];for(let ut=0;ut<Me;ut++){L=ut*Le;const Pt=ut*oe;if(z==8)for(var Ee=0;Ee<oe;Ee++)He[L+Ee]=qe[Pt+Ee];else if(z==4)for(Ee=0;Ee<oe;Ee++)He[L+(Ee>>1)]|=qe[Pt+Ee]<<4-4*(1&Ee);else if(z==2)for(Ee=0;Ee<oe;Ee++)He[L+(Ee>>2)]|=qe[Pt+Ee]<<6-2*(3&Ee);else if(z==1)for(Ee=0;Ee<oe;Ee++)He[L+(Ee>>3)]|=qe[Pt+Ee]<<7-1*(7&Ee)}ve=He,$=3,ft=1}else if(j==0&&M.length==1){He=new Uint8Array(oe*Me*3);const qe=oe*Me;for(L=0;L<qe;L++){const ut=3*L,Pt=4*L;He[ut]=ve[Pt],He[ut+1]=ve[Pt+1],He[ut+2]=ve[Pt+2]}ve=He,$=2,ft=3,Le=3*oe}ye.img=ve,ye.bpl=Le,ye.bpp=ft}return{ctype:$,depth:z,plte:G,frames:M}}function d(b,x,O,C,k,A,N){const B=Uint8Array,R=Uint32Array,T=new B(b[k-1]),U=new R(b[k-1]),$=k+1<b.length?new B(b[k+1]):null,z=new B(b[k]),J=new R(z.buffer);let P=x,F=O,L=-1,j=-1;for(let te=0;te<A.height;te++)for(let G=0;G<A.width;G++){const ee=A.x+G,de=A.y+te,ye=de*x+ee,oe=J[ye];oe==0||C[k-1].dispose==0&&U[ye]==oe&&($==null||$[4*ye+3]!=0)||(ee<P&&(P=ee),ee>L&&(L=ee),de<F&&(F=de),de>j&&(j=de))}L==-1&&(P=F=L=j=0),N&&((1&P)==1&&P--,(1&F)==1&&F--),A={x:P,y:F,width:L-P+1,height:j-F+1};const M=C[k];M.rect=A,M.blend=1,M.img=new Uint8Array(A.width*A.height*4),C[k-1].dispose==0?(t(T,x,O,M.img,A.width,A.height,-A.x,-A.y,0),h(z,x,O,M.img,A)):t(z,x,O,M.img,A.width,A.height,-A.x,-A.y,0)}function h(b,x,O,C,k){t(b,x,O,C,k.width,k.height,-k.x,-k.y,2)}function f(b,x,O,C,k,A,N){const B=[];let R,T=[0,1,2,3,4];A!=-1?T=[A]:(x*C>5e5||O==1)&&(T=[0]),N&&(R={level:0});const U=Che;for(var $=0;$<T.length;$++){for(let P=0;P<x;P++)p(k,b,P,C,O,T[$]);B.push(U.deflate(k,R))}let z,J=1e9;for($=0;$<B.length;$++)B[$].length<J&&(z=$,J=B[$].length);return B[z]}function p(b,x,O,C,k,A){const N=O*C;let B=N+O;if(b[B]=A,B++,A==0)if(C<500)for(var R=0;R<C;R++)b[B+R]=x[N+R];else b.set(new Uint8Array(x.buffer,N,C),B);else if(A==1){for(R=0;R<k;R++)b[B+R]=x[N+R];for(R=k;R<C;R++)b[B+R]=x[N+R]-x[N+R-k]+256&255}else if(O==0){for(R=0;R<k;R++)b[B+R]=x[N+R];if(A==2)for(R=k;R<C;R++)b[B+R]=x[N+R];if(A==3)for(R=k;R<C;R++)b[B+R]=x[N+R]-(x[N+R-k]>>1)+256&255;if(A==4)for(R=k;R<C;R++)b[B+R]=x[N+R]-n(x[N+R-k],0,0)+256&255}else{if(A==2)for(R=0;R<C;R++)b[B+R]=x[N+R]+256-x[N+R-C]&255;if(A==3){for(R=0;R<k;R++)b[B+R]=x[N+R]+256-(x[N+R-C]>>1)&255;for(R=k;R<C;R++)b[B+R]=x[N+R]+256-(x[N+R-C]+x[N+R-k]>>1)&255}if(A==4){for(R=0;R<k;R++)b[B+R]=x[N+R]+256-n(0,x[N+R-C],0)&255;for(R=k;R<C;R++)b[B+R]=x[N+R]+256-n(x[N+R-k],x[N+R-C],x[N+R-k-C])&255}}}function y(b,x){const O=new Uint8Array(b),C=O.slice(0),k=new Uint32Array(C.buffer),A=w(C,x),N=A[0],B=A[1],R=O.length,T=new Uint8Array(R>>2);let U;if(O.length<2e7)for(var $=0;$<R;$+=4)U=m(N,z=O[$]*(1/255),J=O[$+1]*(1/255),P=O[$+2]*(1/255),F=O[$+3]*(1/255)),T[$>>2]=U.ind,k[$>>2]=U.est.rgba;else for($=0;$<R;$+=4){var z=O[$]*.00392156862745098,J=O[$+1]*(1/255),P=O[$+2]*(1/255),F=O[$+3]*(1/255);for(U=N;U.left;)U=g(U.est,z,J,P,F)<=0?U.left:U.right;T[$>>2]=U.ind,k[$>>2]=U.est.rgba}return{abuf:C.buffer,inds:T,plte:B}}function w(b,x,O){O==null&&(O=1e-4);const C=new Uint32Array(b.buffer),k={i0:0,i1:b.length,bst:null,est:null,tdst:0,left:null,right:null};k.bst=I(b,k.i0,k.i1),k.est=E(k.bst);const A=[k];for(;A.length<x;){let B=0,R=0;for(var N=0;N<A.length;N++)A[N].est.L>B&&(B=A[N].est.L,R=N);if(B<O)break;const T=A[R],U=_(b,C,T.i0,T.i1,T.est.e,T.est.eMq255);if(T.i0>=U||T.i1<=U){T.est.L=0;continue}const $={i0:T.i0,i1:U,bst:null,est:null,tdst:0,left:null,right:null};$.bst=I(b,$.i0,$.i1),$.est=E($.bst);const z={i0:U,i1:T.i1,bst:null,est:null,tdst:0,left:null,right:null};for(z.bst={R:[],m:[],N:T.bst.N-$.bst.N},N=0;N<16;N++)z.bst.R[N]=T.bst.R[N]-$.bst.R[N];for(N=0;N<4;N++)z.bst.m[N]=T.bst.m[N]-$.bst.m[N];z.est=E(z.bst),T.left=$,T.right=z,A[R]=$,A.push(z)}for(A.sort((B,R)=>R.bst.N-B.bst.N),N=0;N<A.length;N++)A[N].ind=N;return[k,A]}function m(b,x,O,C,k){if(b.left==null)return b.tdst=function($,z,J,P,F){const L=z-$[0],j=J-$[1],M=P-$[2],te=F-$[3];return L*L+j*j+M*M+te*te}(b.est.q,x,O,C,k),b;const A=g(b.est,x,O,C,k);let N=b.left,B=b.right;A>0&&(N=b.right,B=b.left);const R=m(N,x,O,C,k);if(R.tdst<=A*A)return R;const T=m(B,x,O,C,k);return T.tdst<R.tdst?T:R}function g(b,x,O,C,k){const{e:A}=b;return A[0]*x+A[1]*O+A[2]*C+A[3]*k-b.eMq}function _(b,x,O,C,k,A){for(C-=4;O<C;){for(;S(b,O,k)<=A;)O+=4;for(;S(b,C,k)>A;)C-=4;if(O>=C)break;const N=x[O>>2];x[O>>2]=x[C>>2],x[C>>2]=N,O+=4,C-=4}for(;S(b,O,k)>A;)O-=4;return O+4}function S(b,x,O){return b[x]*O[0]+b[x+1]*O[1]+b[x+2]*O[2]+b[x+3]*O[3]}function I(b,x,O){const C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],k=[0,0,0,0],A=O-x>>2;for(let N=x;N<O;N+=4){const B=b[N]*.00392156862745098,R=b[N+1]*(1/255),T=b[N+2]*(1/255),U=b[N+3]*(1/255);k[0]+=B,k[1]+=R,k[2]+=T,k[3]+=U,C[0]+=B*B,C[1]+=B*R,C[2]+=B*T,C[3]+=B*U,C[5]+=R*R,C[6]+=R*T,C[7]+=R*U,C[10]+=T*T,C[11]+=T*U,C[15]+=U*U}return C[4]=C[1],C[8]=C[2],C[9]=C[6],C[12]=C[3],C[13]=C[7],C[14]=C[11],{R:C,m:k,N:A}}function E(b){const{R:x}=b,{m:O}=b,{N:C}=b,k=O[0],A=O[1],N=O[2],B=O[3],R=C==0?0:1/C,T=[x[0]-k*k*R,x[1]-k*A*R,x[2]-k*N*R,x[3]-k*B*R,x[4]-A*k*R,x[5]-A*A*R,x[6]-A*N*R,x[7]-A*B*R,x[8]-N*k*R,x[9]-N*A*R,x[10]-N*N*R,x[11]-N*B*R,x[12]-B*k*R,x[13]-B*A*R,x[14]-B*N*R,x[15]-B*B*R],U=T,$=D;let z=[Math.random(),Math.random(),Math.random(),Math.random()],J=0,P=0;if(C!=0)for(let L=0;L<16&&(z=$.multVec(U,z),P=Math.sqrt($.dot(z,z)),z=$.sml(1/P,z),!(L!=0&&Math.abs(P-J)<1e-9));L++)J=P;const F=[k*R,A*R,N*R,B*R];return{Cov:T,q:F,e:z,L:J,eMq255:$.dot($.sml(255,F),z),eMq:$.dot(z,F),rgba:(Math.round(255*F[3])<<24|Math.round(255*F[2])<<16|Math.round(255*F[1])<<8|Math.round(255*F[0])<<0)>>>0}}var D={multVec:(b,x)=>[b[0]*x[0]+b[1]*x[1]+b[2]*x[2]+b[3]*x[3],b[4]*x[0]+b[5]*x[1]+b[6]*x[2]+b[7]*x[3],b[8]*x[0]+b[9]*x[1]+b[10]*x[2]+b[11]*x[3],b[12]*x[0]+b[13]*x[1]+b[14]*x[2]+b[15]*x[3]],dot:(b,x)=>b[0]*x[0]+b[1]*x[1]+b[2]*x[2]+b[3]*x[3],sml:(b,x)=>[b*x[0],b*x[1],b*x[2],b*x[3]]};ai.encode=function(x,O,C,k,A,N,B){k==null&&(k=0),B==null&&(B=!1);const R=u(x,O,C,k,[!1,!1,!1,0,B,!1]);return c(R,-1),l(R,O,C,A,N)},ai.encodeLL=function(x,O,C,k,A,N,B,R){const T={ctype:0+(k==1?0:2)+(A==0?0:4),depth:N,frames:[]},U=(k+A)*N,$=U*O;for(let z=0;z<x.length;z++)T.frames.push({rect:{x:0,y:0,width:O,height:C},img:new Uint8Array(x[z]),blend:0,dispose:1,bpp:Math.ceil(U/8),bpl:Math.ceil($/8)});return c(T,0,!0),l(T,O,C,B,R)},ai.encode.compress=u,ai.encode.dither=a,ai.quantize=y,ai.quantize.getKDtree=w,ai.quantize.getNearest=m})();const SV={toArrayBuffer(t,e){const n=t.width,r=t.height,i=n<<2,s=t.getContext("2d").getImageData(0,0,n,r),o=new Uint32Array(s.data.buffer),a=(32*n+31)/32<<2,l=a*r,c=122+l,u=new ArrayBuffer(c),d=new DataView(u),h=1<<20;let f,p,y,w,m=h,g=0,_=0,S=0;function I(b){d.setUint16(_,b,!0),_+=2}function E(b){d.setUint32(_,b,!0),_+=4}function D(b){_+=b}I(19778),E(c),D(4),E(122),E(108),E(n),E(-r>>>0),I(1),I(32),E(3),E(l),E(2835),E(2835),D(8),E(16711680),E(65280),E(255),E(4278190080),E(1466527264),function b(){for(;g<r&&m>0;){for(w=122+g*a,f=0;f<i;)m--,p=o[S++],y=p>>>24,d.setUint32(w+f,p<<8|y),f+=4;g++}S<o.length?(m=h,setTimeout(b,SV._dly)):e(u)}()},toBlob(t,e){this.toArrayBuffer(t,n=>{e(new Blob([n],{type:"image/bmp"}))})},_dly:9};var dr={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},khe={[dr.CHROME]:16384,[dr.FIREFOX]:11180,[dr.DESKTOP_SAFARI]:16384,[dr.IE]:8192,[dr.IOS]:4096,[dr.ETC]:8192};const QT=typeof window<"u",EV=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Jg=QT&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),Ahe=(QT||EV)&&(Jg&&Jg.getOriginalSymbol(window,"File")||typeof File<"u"&&File),xV=(QT||EV)&&(Jg&&Jg.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function YT(t,e,n=Date.now()){return new Promise(r=>{const i=t.split(","),s=i[0].match(/:(.*?);/)[1],o=globalThis.atob(i[1]);let a=o.length;const l=new Uint8Array(a);for(;a--;)l[a]=o.charCodeAt(a);const c=new Blob([l],{type:s});c.name=e,c.lastModified=n,r(c)})}function TV(t){return new Promise((e,n)=>{const r=new xV;r.onload=()=>e(r.result),r.onerror=i=>n(i),r.readAsDataURL(t)})}function IV(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>e(r),r.onerror=i=>n(i),r.src=t})}function ka(){if(ka.cachedResult!==void 0)return ka.cachedResult;let t=dr.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?t=dr.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?t=dr.IOS:/Safari/i.test(e)?t=dr.DESKTOP_SAFARI:/Firefox/i.test(e)?t=dr.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(t=dr.IE),ka.cachedResult=t,ka.cachedResult}function CV(t,e){const n=ka(),r=khe[n];let i=t,s=e,o=i*s;const a=i>s?s/i:i/s;for(;o>r*r;){const l=(r+i)/2,c=(r+s)/2;l<c?(s=c,i=c*a):(s=l*a,i=l),o=i*s}return{width:i,height:s}}function x_(t,e){let n,r;try{if(n=new OffscreenCanvas(t,e),r=n.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),r=n.getContext("2d")}return n.width=t,n.height=e,[n,r]}function kV(t,e){const{width:n,height:r}=CV(t.width,t.height),[i,s]=x_(n,r);return e&&/jpe?g/.test(e)&&(s.fillStyle="white",s.fillRect(0,0,i.width,i.height)),s.drawImage(t,0,0,i.width,i.height),i}function xm(){return xm.cachedResult!==void 0||(xm.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),xm.cachedResult}function Zg(t,e={}){return new Promise(function(n,r){let i,s;var o=function(){try{return s=kV(i,e.fileType||t.type),n([i,s])}catch(l){return r(l)}},a=function(l){try{var c=function(u){try{throw u}catch(d){return r(d)}};try{let u;return TV(t).then(function(d){try{return u=d,IV(u).then(function(h){try{return i=h,function(){try{return o()}catch(f){return r(f)}}()}catch(f){return c(f)}},c)}catch(h){return c(h)}},c)}catch(u){c(u)}}catch(u){return r(u)}};try{if(xm()||[dr.DESKTOP_SAFARI,dr.MOBILE_SAFARI].includes(ka()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(t).then(function(l){try{return i=l,o()}catch{return a()}},a)}catch{a()}})}function ey(t,e,n,r,i=1){return new Promise(function(s,o){let a;if(e==="image/png"){let d,h,f;return d=t.getContext("2d"),{data:h}=d.getImageData(0,0,t.width,t.height),f=ai.encode([h.buffer],t.width,t.height,4096*i),a=new Blob([f],{type:e}),a.name=n,a.lastModified=r,l.call(this)}{let d=function(){return l.call(this)};var c=d;if(e==="image/bmp")return new Promise(h=>SV.toBlob(t,h)).then(function(h){try{return a=h,a.name=n,a.lastModified=r,d.call(this)}catch(f){return o(f)}}.bind(this),o);{let h=function(){return d.call(this)};var u=h;if(typeof OffscreenCanvas=="function"&&t instanceof OffscreenCanvas)return t.convertToBlob({type:e,quality:i}).then(function(f){try{return a=f,a.name=n,a.lastModified=r,h.call(this)}catch(p){return o(p)}}.bind(this),o);{let f;return f=t.toDataURL(e,i),YT(f,n,r).then(function(p){try{return a=p,h.call(this)}catch(y){return o(y)}}.bind(this),o)}}}function l(){return s(a)}})}function Ti(t){t.width=0,t.height=0}function lc(){return new Promise(function(t,e){let n,r,i,s;return lc.cachedResult!==void 0?t(lc.cachedResult):YT("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(o){try{return n=o,Zg(n).then(function(a){try{return r=a[1],ey(r,n.type,n.name,n.lastModified).then(function(l){try{return i=l,Ti(r),Zg(i).then(function(c){try{return s=c[0],lc.cachedResult=s.width===1&&s.height===2,t(lc.cachedResult)}catch(u){return e(u)}},e)}catch(c){return e(c)}},e)}catch(l){return e(l)}},e)}catch(a){return e(a)}},e)})}function AV(t){return new Promise((e,n)=>{const r=new xV;r.onload=i=>{const s=new DataView(i.target.result);if(s.getUint16(0,!1)!=65496)return e(-2);const o=s.byteLength;let a=2;for(;a<o;){if(s.getUint16(a+2,!1)<=8)return e(-1);const l=s.getUint16(a,!1);if(a+=2,l==65505){if(s.getUint32(a+=2,!1)!=1165519206)return e(-1);const c=s.getUint16(a+=6,!1)==18761;a+=s.getUint32(a+4,c);const u=s.getUint16(a,c);a+=2;for(let d=0;d<u;d++)if(s.getUint16(a+12*d,c)==274)return e(s.getUint16(a+12*d+8,c))}else{if((65280&l)!=65280)break;a+=s.getUint16(a,!1)}}return e(-1)},r.onerror=i=>n(i),r.readAsArrayBuffer(t)})}function RV(t,e){const{width:n}=t,{height:r}=t,{maxWidthOrHeight:i}=e;let s,o=t;return isFinite(i)&&(n>i||r>i)&&([o,s]=x_(n,r),n>r?(o.width=i,o.height=r/n*i):(o.width=n/r*i,o.height=i),s.drawImage(t,0,0,o.width,o.height),Ti(t)),o}function NV(t,e){const{width:n}=t,{height:r}=t,[i,s]=x_(n,r);switch(e>4&&e<9?(i.width=r,i.height=n):(i.width=n,i.height=r),e){case 2:s.transform(-1,0,0,1,n,0);break;case 3:s.transform(-1,0,0,-1,n,r);break;case 4:s.transform(1,0,0,-1,0,r);break;case 5:s.transform(0,1,1,0,0,0);break;case 6:s.transform(0,1,-1,0,r,0);break;case 7:s.transform(0,-1,-1,0,r,n);break;case 8:s.transform(0,-1,1,0,0,n)}return s.drawImage(t,0,0,n,r),Ti(t),i}function uN(t,e,n=0){return new Promise(function(r,i){let s,o,a,l,c,u,d,h,f,p,y,w,m,g,_,S,I,E,D,b;function x(C=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;s+=C,e.onProgress(Math.min(s,100))}function O(C){if(e.signal&&e.signal.aborted)throw e.signal.reason;s=Math.min(Math.max(C,s),100),e.onProgress(s)}return s=n,o=e.maxIteration||10,a=1024*e.maxSizeMB*1024,x(),Zg(t,e).then(function(C){try{return[,l]=C,x(),c=RV(l,e),x(),new Promise(function(k,A){var N;if(!(N=e.exifOrientation))return AV(t).then(function(R){try{return N=R,B.call(this)}catch(T){return A(T)}}.bind(this),A);function B(){return k(N)}return B.call(this)}).then(function(k){try{return u=k,x(),lc().then(function(A){try{return d=A?c:NV(c,u),x(),h=e.initialQuality||1,f=e.fileType||t.type,ey(d,f,t.name,t.lastModified,h).then(function(N){try{{let U=function(){if(o--&&(_>a||_>m)){let z,J;return z=b?.95*D.width:D.width,J=b?.95*D.height:D.height,[I,E]=x_(z,J),E.drawImage(D,0,0,z,J),h*=f==="image/png"?.85:.95,ey(I,f,t.name,t.lastModified,h).then(function(P){try{return S=P,Ti(D),D=I,_=S.size,O(Math.min(99,Math.floor((g-_)/(g-a)*100))),U}catch(F){return i(F)}},i)}return[1]},$=function(){return Ti(D),Ti(I),Ti(c),Ti(d),Ti(l),O(100),r(S)};var R=U,T=$;if(p=N,x(),y=p.size>a,w=p.size>t.size,!y&&!w)return O(100),r(p);var B;return m=t.size,g=p.size,_=g,D=d,b=!e.alwaysKeepResolution&&y,(B=function(z){for(;z;){if(z.then)return void z.then(B,i);try{if(z.pop){if(z.length)return z.pop()?$.call(this):z;z=U}else z=z.call(this)}catch(J){return i(J)}}}.bind(this))(U)}}catch(U){return i(U)}}.bind(this),i)}catch(N){return i(N)}}.bind(this),i)}catch(A){return i(A)}}.bind(this),i)}catch(k){return i(k)}}.bind(this),i)})}const Rhe=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Y0;function Nhe(t,e){return new Promise((n,r)=>{Y0||(Y0=function(o){const a=[];return typeof o=="function"?a.push(`(${o})()`):a.push(o),URL.createObjectURL(new Blob(a))}(Rhe));const i=new Worker(Y0);i.addEventListener("message",function(o){if(e.signal&&e.signal.aborted)i.terminate();else if(o.data.progress===void 0){if(o.data.error)return r(new Error(o.data.error)),void i.terminate();n(o.data.file),i.terminate()}else e.onProgress(o.data.progress)}),i.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",()=>{r(e.signal.reason),i.terminate()}),i.postMessage({file:t,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function un(t,e){return new Promise(function(n,r){let i,s,o,a,l,c;if(i={...e},o=0,{onProgress:a}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,l=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=f=>{o=f,typeof a=="function"&&a(o)},!(t instanceof Blob||t instanceof Ahe))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return r(new Error("The file given is not an image"));if(c=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!l||typeof Worker!="function"||c)return uN(t,i).then(function(f){try{return s=f,h.call(this)}catch(p){return r(p)}}.bind(this),r);var u=function(){try{return h.call(this)}catch(f){return r(f)}}.bind(this),d=function(f){try{return uN(t,i).then(function(p){try{return s=p,u()}catch(y){return r(y)}},r)}catch(p){return r(p)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",Nhe(t,i).then(function(f){try{return s=f,u()}catch{return d()}},d)}catch{d()}function h(){try{s.name=t.name,s.lastModified=t.lastModified}catch{}try{i.preserveExif&&t.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===t.type)&&(s=bV(t,s))}catch{}return n(s)}})}un.getDataUrlFromFile=TV,un.getFilefromDataUrl=YT,un.loadImage=IV,un.drawImageInCanvas=kV,un.drawFileInCanvas=Zg,un.canvasToFile=ey,un.getExifOrientation=AV,un.handleMaxWidthOrHeight=RV,un.followExifOrientation=NV,un.cleanupCanvasMemory=Ti,un.isAutoOrientationInBrowser=lc,un.approximateBelowMaximumCanvasSizeOfBrowser=CV,un.copyExifWithoutOrientation=bV,un.getBrowserName=ka,un.version="2.0.2";function Phe({myinputRef:t,name:e,required:n,postImg:r,setPostImg:i,previewImg:s,setPreviewImg:o}){const a=async c=>{const u=c.target.files,d=[],h={maxSizeMB:.5,maxWidthOrHeight:1920,useWebWorker:!0};let f=u.length>5?5:u.length;for(let p=0;p<f;p++){const y=u[p];try{const w=await un(y,h);d.push(w)}catch(w){console.log(w)}}i(d)};H.useEffect(()=>{const c=r.map(u=>un.getDataUrlFromFile(u));Promise.all(c).then(u=>{o(u)})},[r]);const l=c=>{const u=[...r];u.splice(c,1),i(u);const d=[...s];d.splice(c,1),o(d)};return v.jsxs(Dhe,{children:[v.jsxs(Lhe,{children:[v.jsx(Ua,{accept:".png, .jpeg, .jpg, .svg",multiple:!0,myinputRef:t,name:e,required:n,type:"file",onChange:a,onClick:c=>c.target.value=null}),s.map((c,u)=>v.jsxs(dN,{children:[v.jsx("button",{type:"button",onClick:()=>l(u),children:v.jsx("img",{alt:"업로드 이미지 제거",src:"/src/assets/icon-close-button.svg"})}),v.jsx("img",{alt:c,src:c})]},c)),s.length>=5?"":v.jsx(dN,{})]}),v.jsx(Ohe,{children:"• 판매할 상품의 사진을 업로드해주세요."})]})}const Dhe=ne.div`
  width: 886px;
  margin: 0 auto;
`,Ohe=ne.span`
  display: inline-block;
  font-size: 12px;
  color: ${up};
  margin-bottom: 30px;
`,Lhe=ne.div`
  display: flex;
  gap 20px;
  padding: 10px 0;
  
  & label{
    display: inline-block;
    width: 90px;
    height: 90px;
    background: url('/src/assets/icon-add-photo.svg') no-repeat;
    background-position: center;
    border: 1px solid ${zT};
    border-radius: 10px;
    cursor: pointer;
  }
  
  input{
    display: none;
  }
  
  div{
    width: 90px;
    height: 90px;
    border-radius: 10px;
  }
`,dN=ne.div`
  border: 1px dashed ${zT};
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
  overflow: hidden;

  button{
    position: absolute;
    right: 0;
    top: 5px;
    background: none;
    border: none;
    cursor: pointer;
  }

  img{
    width: 100%;
  }
`,Mhe=$n.firestore(),hN=jle();function $he(){const t=H.useRef(),e=Rs(),[n,r]=H.useState(0),[i]=Et(ri),[s]=Et(Rl),[o,a]=H.useState([]),[l,c]=H.useState([]),[u,d]=H.useState({title:"",side:"물품 종류",price:" - ",content:"",nickname:"",profileImage:"",imgsrc:""});u.price>1e9&&(u.price=999999999);const h=p=>{d({...u,[p.target.name]:p.target.value})},f=p=>{r(1),p.preventDefault();const y=o,w=[];for(let m=0;m<y.length;m++){const g=Kg(hN,"writeimages/"+y[m].name);w.push(Ple(g,y[m]))}Promise.all(w).then(()=>{const m=[];for(let g=0;g<y.length;g++){const _=Kg(hN,"writeimages/"+y[g].name);m.push(Gj(_))}Promise.all(m).then(g=>{Mhe.collection("UserWrite").add({title:u.title,side:"중고 거래 ",price:u.price,content:u.content,date:new Date,imgsrc:g,chat:0,check:0,heart:0,userId:i,nickname:s.nickname,profileImage:s.profileImage,location:s.location,recommend:[]}).then(()=>{e("/HotArticles")})})})};return v.jsxs("section",{children:[v.jsx("h3",{className:"a11yHidden",children:"게시글 작성란"}),v.jsx(Fhe,{children:v.jsxs("fieldset",{children:[v.jsx(Phe,{myinputRef:t,name:"imgsrc",postImg:o,previewImg:l,required:!0,setPostImg:a,setPreviewImg:c}),v.jsx("legend",{children:"게시글 등록 폼"}),v.jsx(Ua,{name:"title",placeholder:"제목을 입력해주세요",required:!0,type:"text",value:u.title,onChange:h}),v.jsxs(Uhe,{className:"userRegion",children:[v.jsx("span",{children:s.location.sido}),v.jsx("span",{children:s.location.sigungu}),v.jsx("span",{children:s.location.bname})]}),v.jsxs(Bhe,{children:[v.jsx(Ua,{name:"price",placeholder:"상품 가격을 입력해주세요",required:!0,type:"number",value:u.price,onChange:h}),v.jsxs("span",{className:"productPrice",children:["판매 가격 : ",u.price.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),"원"]})]}),v.jsx(Ua,{content:!0,name:"content",placeholder:"내용을 입력해주세요",required:!0,type:"text",value:u.content,onChange:h}),v.jsxs(zhe,{children:[v.jsx(fN,{onClick:()=>{e("/HotArticles")},children:"취소"}),v.jsx(fN,{disabled:n||!l[0]||!u.title||!u.price||!u.content,type:"submit",onClick:f,children:"완료"})]})]})})]})}function Ua({className:t,placeholder:e,disabled:n,type:r,content:i,value:s,accept:o,required:a,onChange:l,name:c,multiple:u,myinputRef:d,onClick:h}){return v.jsx("label",{children:i?v.jsx(Vhe,{ref:d,className:t,name:c,placeholder:e,required:a,type:r,value:s,onChange:l}):v.jsx(jhe,{ref:d,accept:o,className:t,disabled:n,multiple:u,name:c,placeholder:e,required:a,type:r,value:s,onChange:l,onClick:h})})}const XT=Lo`
  margin-bottom: 20px;
  border-radius: 5px;
  border: 1px solid ${tV};
  box-sizing: border-box;
  padding: 0 12px;
  font-size: 15px;
`,Fhe=ne.form`
  width: 886px;
  display: flex;
  flex-flow: column nowrap;
  margin-left: auto;
  margin-right: auto;

  fieldset{
    padding: 0;
  }
`,Uhe=ne.div`
  display: flex;
  gap: 20px;
  justify-content: space-between;
  
  & span{
    ${XT}
    width: 100%;
    line-height: 36px;    
    cursor: default;
  }
`,jhe=ne.input`
  ${XT}
  width: 100%;
  height: 37px;
`,Vhe=ne.textarea`
  ${XT}
  width: 100%;
  height: 290px;
  padding: 12px;
  resize: none;
`,Bhe=ne.div`
  width: 886px;
  display: flex;
  justify-content: space-between;
  gap: 50px;

  input{
    width: 585px;
    border: none;
    border-radius: 0;
    border-bottom: 1px solid ${tV};
  }

  input::-webkit-inner-spin-button {
    appearance: none;
  }

  span{    
    width: 250px;
    line-height: 36px;
    text-align: center;
    font-weight: bold;
    font-size: 18px;
    letter-spacing: .5px;
  }
`,zhe=ne.div`
  width: 218px;
  height: 40px;
  margin: 40px auto 80px auto;
  display: flex;
  justify-content: space-between;
  gap: 20px;
`,fN=ne.button`
  width: 100%;
  border: none;
  border-radius: 4px;
  background: ${up};
  color: white;
  font-weight: bold;
  cursor: pointer;
  
  &[disabled]{
    cursor: not-allowed;
    background: ${zT};
  }
`,Whe="/assets/icon_temp4-151e43f9.svg";function Hhe(){const[t,e]=H.useState({title:null,side:null,date:null,price:null,content:null,heart:null,chat:null,check:null,imgsrc:null,userId:null,nickname:null,profileImage:null,location:null}),n=NS(),[r,i]=H.useState(0);let[s]=H.useState(0);const o=Gi(zi,"UserWrite",n.id),a=Yc(o),[l]=Et(ri);return l==t.userId&&(s=1),H.useEffect(()=>{window.scrollTo(0,0);const c={check:M$(1)};Do(o,c).then(()=>{a.then(u=>{e(u.data()),i(1)})})},[n]),v.jsx(v.Fragment,{children:r?v.jsx(PV,{chat:t.chat,check:t.check,content:t.content,data:t.data,heart:t.heart,imgsrc:t.imgsrc,location:t.location,nickname:t.nickname,price:t.price,profileImage:t.profileImage,recommend:t.recommend,side:t.side,state:s,title:t.title}):v.jsx(af,{})})}function PV({recommend:t,state:e,title:n,side:r,nickname:i,profileImage:s,location:o,temperature:a,date:l,price:c,content:u,heart:d,chat:h,check:f,imgsrc:p}){const y=Rs(),[w,m]=H.useState(!1),[g,_]=H.useState(0),[S,I]=H.useState(0),[E,D]=H.useState(0),[b,x]=H.useState([]),O=()=>{m(w?0:1)},C=NS(),k=Gi(zi,"UserWrite",C.id),A=Yc(k),[N,B]=H.useState({modifiedTitle:n,modifiedPrice:c,modifiedContent:u}),R=U=>{B($=>({...$,[U.target.name]:U.target.value}))};H.useEffect(()=>{Xc(w_,U=>{const $=U.docs.map(z=>({id:z.id,...z.data()}));$.sort((z,J)=>J.heart-z.heart),x($.slice(0,6)),_(1)})},[]);const T=()=>{I(1),Do(k,{title:n,price:c,content:u})};return v.jsxs(Khe,{children:[v.jsxs(X0,{children:[v.jsx("button",{"aria-label":"화면 클릭 하면 확대가능합니다.",className:"image-button",type:"button",onClick:O,children:v.jsx(cN,{imgsrc:p[0]!==void 0?p:"https://firebasestorage.googleapis.com/v0/b/patato-market.appspot.com/o/no_image.jpg?alt=media&token=d2d005ba-9dbb-40cb-bd61-4d47f5118b2c"})}),w?v.jsxs("div",{className:"module-swiper",children:[v.jsx("button",{className:"a11yhidden-button",type:"button",onClick:O,children:v.jsx("img",{alt:"닫기 버튼",src:Gue})}),v.jsx(cN,{imgsrc:p[0]!==void 0?p:"https://firebasestorage.googleapis.com/v0/b/patato-market.appspot.com/o/no_image.jpg?alt=media&token=d2d005ba-9dbb-40cb-bd61-4d47f5118b2c"})]}):null,v.jsxs(ps,{className:"profile",href:"naver.com",rel:"noopener noreferrer",target:"_blank",to:"/HotArticles",children:[v.jsxs("div",{className:"left-profile",children:[v.jsx("img",{alt:"프로필 사진",className:"profile-image",src:s}),v.jsxs("div",{children:[v.jsx("span",{className:"nickname",children:i}),v.jsxs("span",{className:"address",children:[o.sido," ",o.sigungu," ",o.bname]})]})]}),v.jsxs("div",{className:"right-profile",children:[v.jsxs("div",{children:[v.jsxs("span",{className:"temperature",children:[a," ℃"]}),v.jsx("span",{className:"thermometer"})]}),v.jsx("img",{alt:"당근 온도 이모티콘",className:"temperature-image",src:Whe})]})]}),v.jsxs("div",{className:"article",children:[v.jsx("h2",{className:"title",children:n}),v.jsxs("div",{className:"side-title",children:[v.jsx("span",{children:r}),v.jsxs("span",{children:[l,"일 전"]})]}),v.jsxs("p",{className:"price",children:[HT(c),"원"]}),v.jsx("p",{className:"content",children:u}),v.jsxs("div",{className:"counting-group",children:[v.jsxs("span",{children:["관심 ",d," "]}),v.jsxs("span",{children:["채팅 ",h," "]}),v.jsxs("span",{children:["조회 ",f," "]})]}),v.jsx("div",{className:"button-list",children:e?v.jsxs(v.Fragment,{children:[v.jsx(is,{onClick:T,children:"수정"}),v.jsx(is,{filled:!0,onClick:()=>{D(1)},children:"삭제"})]}):v.jsx(is,{children:"채팅하기"})})]})]}),v.jsx(X0,{children:v.jsx(que,{recommend:t})}),v.jsxs(X0,{children:[v.jsxs("div",{className:"best-product-group",children:[v.jsx("h2",{children:"당근마켓 인기중고"}),v.jsx(ps,{rel:"noopener noreferrer",to:"/HotArticles",children:"더 구경하기"})]}),v.jsx("div",{className:"best-product",children:g?b.map(({content:U,title:$,price:z,side:J,imgsrc:P,location:F,id:L,heart:j,check:M},te)=>v.jsx(S_,{check:M,content:U,heart:j,id:L,imgsrc:P,location:F,price:z,side:J,title:$},te)):v.jsx(af,{className:"loading"})})]}),E?v.jsx(Ghe,{children:v.jsxs("form",{children:[v.jsx("h3",{children:"정말로 삭제하시겠습니까?"}),v.jsxs("div",{className:"button-wrapper",children:[v.jsx(is,{red:!0,onClick:U=>{U.preventDefault(),L$(Gi(zi,"UserWrite",C.id)).then(()=>{y("/HotArticles")})},children:"삭제"}),v.jsx(is,{onClick:()=>{D(0)},children:"취소"})]})]})}):null,S?v.jsx(qhe,{children:v.jsxs("form",{children:[v.jsx("h2",{children:"게시글 수정"}),v.jsxs("div",{className:"input-wrapper",children:[v.jsx(Ua,{className:"title-input",name:"modifiedTitle",type:"text",value:N.modifiedTitle,onChange:R}),v.jsx(Ua,{className:"price-input",name:"modifiedPrice",type:"number",value:N.modifiedPrice,onChange:R})]}),v.jsx(Ua,{content:!0,className:"content-input",name:"modifiedContent",type:"text",value:N.modifiedContent,onChange:R}),v.jsxs("div",{className:"button-wrapper",children:[v.jsx(is,{onClick:()=>{I(0)},children:"취소"}),v.jsx(is,{className:"modifie-button",onClick:()=>{const U={content:N.modifiedContent,price:N.modifiedPrice,title:N.modifiedTitle};Do(k,U).then(()=>{A.then(()=>{o.reload()})})},children:"수정"})]})]})}):null]})}PV.defaultProps={title:"제목을 입력해주세요.",side:"가구",nickname:"닉네임",address:"인천시 부평구 산곡동",temperature:"36.5",date:"1",price:"500",content:"판매 완료",heart:"0",chat:"0",check:"0",imgsrc:["https://firebasestorage.googleapis.com/v0/b/patato-market.appspot.com/o/%E1%84%80%E1%85%A5%E1%84%8B%E1%85%AE%E1%86%AF%E1%84%85%E1%85%B5%E1%84%8E%E1%85%B5.png?alt=media&token=f23ce701-2450-495f-8166-2e1049699b2b","https://firebasestorage.googleapis.com/v0/b/patato-market.appspot.com/o/%E1%84%80%E1%85%A5%E1%84%8B%E1%85%AE%E1%86%AF%E1%84%85%E1%85%B5%E1%84%8E%E1%85%B5.png?alt=media&token=f23ce701-2450-495f-8166-2e1049699b2b","https://firebasestorage.googleapis.com/v0/b/patato-market.appspot.com/o/%E1%84%80%E1%85%A5%E1%84%8B%E1%85%AE%E1%86%AF%E1%84%85%E1%85%B5%E1%84%8E%E1%85%B5.png?alt=media&token=f23ce701-2450-495f-8166-2e1049699b2b","https://firebasestorage.googleapis.com/v0/b/patato-market.appspot.com/o/%E1%84%80%E1%85%A5%E1%84%8B%E1%85%AE%E1%86%AF%E1%84%85%E1%85%B5%E1%84%8E%E1%85%B5.png?alt=media&token=f23ce701-2450-495f-8166-2e1049699b2b"]};const Ghe=ne.div`
  display: flex;
  align-items: center;
  justify-content: center;
  top:0;
  width:100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.54);
  position: fixed;
  z-index:100;
  & .button-wrapper{
    display:flex;
    gap:20px;
  }
  button:first-child{
    border: none;
  }
  & h3{
    font-weight: 900;
    font-size: 20px;
    margin-bottom: 24px;
  }
  & form{
    border-radius: 20px;
    background-color: white;
    width: 503px;
    height: 100px;
    padding: 40px 0px;
    display: flex;
    align-items: center;
    flex-flow: column;
  }
`,qhe=ne.div`
  display: flex;
  align-items: center;
  justify-content: center;
  top:0;
  width:100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.54);
  position: fixed;
  z-index:100;
  & .input-wrapper{
    display:flex;
    width:100%;
    justify-content: center;
    gap:20px;
  }
  & .title-input{
    width: 507px;
    height: 38px;
  }
  & .price-input{
    width: 150px;
  }
  & .content-input{
    width: 673.5px;
    height: 288px;
    margin-bottom: 40px;
  }
  & .button-wrapper{
    display:flex;
    gap:20px;
  }
  & .modifie-button{
    background: #CFA36E;
    color:white;
  }
  & .modifie-button:hover{
    background: #a58258;
  }
  & form{
    border-radius: 20px;
    background-color: white;
    width: 803px;
    height: 500px;
    padding: 40px 0px;
    display: flex;
    align-items: center;
    flex-flow: column;
  }
  & h2{
    font-weight: 600;
    font-size: 32px;
    margin-bottom: 24px;
  }
`,Khe=ne.main`
  & a{
    color:black;
  }
  display:flex;
  flex-flow:column;
  align-items: center;
  width: 100%;
    height: auto;
  margin-top: 40px;
  margin-bottom: 40px;
`,X0=ne.section`
    min-width:375px;
    max-width:670px;
    width: 100%;
    height: auto;
  & .swiper{
    height: 500px;
    border-radius: 8px;
    overflow:hidden;
  }
  & .swiper img{
    width:100%;
    height: 100%;
    object-fit: cover;
  }
  & .profile{
    text-decoration: none;
    margin: 24px 0;
    height: 42px;
    display:flex;
    flex-flow:row;
    justify-content: space-between;
  }
  & .profile span{
    display:inline-block;
  }
  & .left-profile, & .right-profile{
    display:flex;
    align-items: center;     
    flex-flow:row;
  }
  & .right-profile{
    text-align: right;
  }
  & .right-profile div{
    gap:8px;
  }
  & .left-profile div,& .right-profile div{
    display:flex;
    flex-flow:column;
  }
  & .left-profile div{
    margin-left: 8px;
  }
  .nickname{
    font-weight: 600;
    font-size: 15px;
    margin-bottom: 5px;
  }
  .address{
    font-weight: 400;
    font-size: 13px;
  }
  & .right-profile div{
    margin-right:8px;
  }
  .temperature{
    font-size: 16px;
    font-weight: 700;
    color: #319E45;
  }
  & .profile-image{
    width: 40px;
    height: 40px;
    border-radius: 50%;
    margin-right: 3px;
  }
  & .temperature-image{
    width: 30px;
    height: 30px;
    border-radius: 20px;
  }

  & .best-product{
    display:inline-block;
    margin-top: 10px;
  }
  & .best-product .product{
    margin:30px 11px;
  }
  & .article{
    position:relative;
    padding: 36px 0;
    border-bottom: 1px solid #E9ECEF;
    border-top: 1px solid #E9ECEF;
  }
  & .title{
    font-weight: 600;
    font-size: 22px;
    margin-bottom: 8px;
  }
  & .side-title{
    font-weight: 400;
    font-size: 13px;
    color: #868E96;
    margin-bottom:12px;
  }
  & .side-title span:first-child::after{
    content: '•';
    margin-right:5px;
  }
  & .price{
    font-weight: 700;
    font-size: 17px;
    margin-bottom:22px;
  }
  & .content{
    font-weight: 400;
    font-size: 17px;
    margin-bottom: 50px;
  }
  & .counting-group{
    color: #868E96;
    font-weight: 400;
    font-size: 13px;
  }
  & .counting-group span::after{
    content:'•';
  }
  & .counting-group span:last-child::after{
    content:'';
  }
  & .best-product-group{
    display:flex;
    justify-content: space-between;
    margin-top:35.45px;
  }
  & .best-product-group h2{
    font-weight: 600;
    font-size: 20px;
  }
  & .best-product-group a{
    color: #CFA36E;
    font-weight: 400;
    font-size: 15px;
    text-decoration: none;
  }

  & .thermometer{
    background: rgb(49,158,69);
    background: linear-gradient(90deg, rgba(49,158,69,1) 50%, rgba(233,236,239,1) 38%);
    width: 100px;
    height: 4px;
  }
  & .button-list{
    position: absolute;
    right:0;
    bottom:27px;
  }
  & .button-list button{
    margin-left:18px;    
  }
  & .button-list button:nth-child(2){
    border: none;
  }
  & .module-swiper{
    top:0;
    left:0;
    z-index:999;
    position:fixed;
    width:100%;
    height:100%;
  }
  & .module-swiper .swiper{
    background-color: black;
    height:100%;
  }
  & .module-swiper .swiper-slide-active{
    text-align: center;
  }
  & .module-swiper img{
    max-width:1200px;
    max-height:100%;
    width:100%;
    height:auto;
  }
  & .module-swiper .swiper-pagination-bullet{
    position: relative;
    bottom:10px;
    width:50px;
    height:50px; 
  }
  & .a11yhidden-button{
    border:0;
    position:absolute;
    right:20%;
    color:white;
    font-size:80px;
    top:0;
    z-index:9999;
    background-color: inherit;
  }
  & .image-button{
    cursor:pointer;
    background-color: inherit;
    border:0;
    width:100%;
  }
`,Qhe=({profileUrl:t,setProfileUrl:e})=>{const[n,r]=H.useState(t||"../src/assets/default_profile.png"),i=async s=>{const o=s.target.files[0],a={maxSizeMB:.1,maxWidthOrHeight:100,useWebWorker:!0};if(o){const l=await un(o,a),c=URL.createObjectURL(l);r(c),e(l)}};return v.jsxs(v.Fragment,{children:[v.jsx(JT,{htmlFor:"profileImage",children:"프로필 사진"}),v.jsxs(ZT,{children:[v.jsx("img",{alt:"프로필 이미지사진 미리보기",className:"profile-image-preview",src:n}),v.jsx("input",{accept:".png, .jpg, .jpeg, .svg",id:"profileImage",type:"file",onChange:i})]})]})},Yhe=({setOpenPostcode:t,fullAddress:e})=>{const n=()=>{t(r=>!r)};return v.jsxs(v.Fragment,{children:[v.jsx(JT,{htmlFor:"userLocation",children:"주소"}),v.jsxs(ZT,{children:[v.jsxs("div",{className:"loca",children:[v.jsx("input",{readOnly:!0,id:"userLocation",name:"userLocation",type:"text",value:e==="undefined undefined undefined"?"":e,onClick:n}),v.jsx(DV,{type:"button",onClick:n,children:"검색"})]}),v.jsx(eI,{children:"주소에 따라서 내 동네가 설정됩니다"})]})]})},ga=({id:t,type:e,onChange:n,value:r,placeholder:i,text:s,desc:o,valid:a,label:l,button:c})=>v.jsxs(v.Fragment,{children:[l?v.jsx(JT,{htmlFor:t,children:s}):v.jsx("label",{className:"a11yHidden",htmlFor:t,children:s}),v.jsxs(ZT,{children:[v.jsx("input",{id:t,name:t,placeholder:i,type:e,value:r,onChange:n}),o&&v.jsx(eI,{children:o}),a&&v.jsx(Xhe,{children:a})]}),c&&v.jsx(DV,{type:"button",children:c})]}),JT=ne.label`
  display: inline-block;
  flex-shrink: 0;
  width: 139px;
  font-weight: 700;
  line-height: 44px;
  cursor: pointer;
  @media screen and (max-width: 700px) {
    width: 100%;
  }
`,ZT=ne.div`
  display: flex;
  flex-direction: column;
  gap: 8px;
  max-width: 493px;

  input[type="text"],
  input[type="password"],
  input[type="tel"],
  input[type="email"],
  input[type="file"]::file-selector-button {
    width: 340px;
    height: 44px;
    padding: 9px 20px;
    background-color: #fff;
    border: 1px solid ${lu};
    border-radius: 4px;
    box-sizing: border-box;
  }
  input[type="file"] {
    width: 340px;
    &::file-selector-button {
      border: 1px solid ${On};
      color: ${On};
      font-weight: 600;
      cursor: pointer;
    }
  }
  button {
    width: 340px;
  }
  .profile-image-preview {
    width: 100px;
    height: 100px;
    margin: 0 auto;
    object-fit: cover;
    border-radius: 50%;
    border: 1px solid ${lu};
  }
  .loca {
    display: flex;
    button {
      width: 147px;
      margin-left: 8px;
    }
  }
  @media screen and (max-width: 700px) {
    width: 100%;
    max-width: none;
    input[type="text"],
    input[type="password"],
    input[type="tel"],
    input[type="email"],
    input[type="file"],
    input[type="file"]::file-selector-button,
    button {
      width: 100%;
    }
  }
`,eI=ne.p`
  margin-top: 4px;
  font-size: 14px;
  line-height: 19px;
`,Xhe=ne(eI)`
  color: #da3a06;
`,DV=ne.button`
  flex: 1 0 auto;
  width: 143px;
  height: 44px;
  background-color: #fff;
  border: 1px solid ${On};
  border-radius: 4px;
  font-weight: 700;
  color: ${On};
  @media screen and (max-width: 700px) {
    width: 100%;
    max-width: 340px;
    max-width: none;
  }
`;function Rb({text:t,onClose:e}){return v.jsx(Jhe,{children:v.jsxs("div",{className:"pop",children:[v.jsx("p",{children:t}),v.jsx("button",{type:"button",onClick:e,children:"확인"})]})})}const Jhe=ne.div`
  z-index: 100;
  position: fixed;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: rgba(0,0,0,.4);
  .pop {
    width: 320px;
    min-height: 80px;
    background-color: white;
    border-radius: 10px;
    p {
      text-align: center;
      font-size: 14px;
      font-weight: 700;
      line-height: 30px;
      padding: 20px 0;
    }
    button {
      display: block;
      border: none;
      border-top: 1px solid ${cu};
      background-color: white;
      text-align: center;
      color: ${up};
      width: 100%;
      line-height: 30px;
      font-weight: 700;
      margin: 10px 0;
    }
  }
`,Nb=ne.button`
  display: block;
  width: 340px;
  height: 54px;
  margin: 12px auto 0;
  box-sizing: border-box;
  border-radius: 4px;
  line-height: 54px;
  font-size: 16px;
  font-weight: 700;
  text-align: center;
  cursor: pointer;
  ${t=>t.primary&&Lo`
      background-color: ${On};
      color: #fff;
      border: none;
    `||Lo`
      background-color: #fff;
      color: ${On};
      border: 1px solid ${On};
    `};
`;function Zhe(){const t=Rs(),[e]=Et(ri),[n,r]=H.useState(!1),[i,s]=H.useState({email:"",password:""}),o=async l=>{l.preventDefault();try{await Qg.setPersistence($n.auth.Auth.Persistence.SESSION),await Qg.signInWithEmailAndPassword(i.email,i.password),(await Sm.where("email","==",i.email).get()).size>0&&t(-1)}catch{r(!0)}},a=l=>{s(c=>({...c,[l.target.name]:l.target.value}))};return v.jsx(v.Fragment,{children:e!==null?v.jsx(E_,{}):v.jsxs(efe,{children:[v.jsx("h2",{children:"로그인"}),v.jsx(tfe,{id:"loginForm",onSubmit:o,children:v.jsxs("fieldset",{children:[v.jsx("legend",{children:"회원 로그인 폼"}),v.jsxs("ul",{className:"form-list",children:[v.jsx("li",{children:v.jsx(ga,{id:"email",placeholder:"이메일을 입력해주세요",text:"이메일",type:"email",value:i.email,onChange:a})}),v.jsx("li",{children:v.jsx(ga,{id:"password",placeholder:"비밀번호를 입력해주세요",text:"비밀번호",type:"password",value:i.password,onChange:a})})]}),v.jsx(Nb,{primary:!0,type:"submit",children:"로그인"}),v.jsx(Nb,{as:"a",onClick:()=>t("/signup"),children:"회원가입"})]})}),n&&v.jsx(Rb,{text:"아이디, 비밀번호를 확인해주세요.",onClose:()=>{r(!1)}})]})})}const efe=ne.section`
  padding: 80px 0 70px;
  h2 {
    line-height: 36px;
    font-size: 32px;
    font-weight: 500;
    text-align: center;
  }
`,tfe=ne.form`
  width: 340px;
  margin: 32px auto 10px;
  .form-list li {
    margin-top: 12px;
  }
  /* .account-find {
    display: flex;
    justify-content: flex-end;
    margin: 12px 0 28px;
    line-height: 19px;
    font-size: 14px;
    li:nth-child(2)::before {
      content: "|";
      display: inline-block;
      padding: 0 4px;
    }
    a {
      color: black;
      text-decoration: none;
    }
  } */
`;var OV={},LV={},T_={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.postcodeScriptUrl=void 0;var e="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js";t.postcodeScriptUrl="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js";var n=function(){var i=null;return function(){var s=0<arguments.length&&arguments[0]!==void 0?arguments[0]:e;return i||(i=new Promise(function(o,a){var l=document.createElement("script");l.src=s,l.onload=function(){var c,u;return(c=window)!==null&&c!==void 0&&(u=c.daum)!==null&&u!==void 0&&u.Postcode?o(window.daum.Postcode):void a(new Error("Script is loaded successfully, but cannot find Postcode module. Check your scriptURL property."))},l.onerror=function(c){return a(c)},l.id="daum_postcode_script",document.body.appendChild(l)}),i)}}(),r=n;t.default=r})(T_);(function(t){function e(C){return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},e(C)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(H),r=o(T_),i=["scriptUrl","className","style","defaultQuery","autoClose","errorMessage","onComplete","onClose","onResize","onSearch"];function s(C){if(typeof WeakMap!="function")return null;var k=new WeakMap,A=new WeakMap;return(s=function(N){return N?A:k})(C)}function o(C,k){if(!k&&C&&C.__esModule)return C;if(C===null||e(C)!=="object"&&typeof C!="function")return{default:C};var A=s(k);if(A&&A.has(C))return A.get(C);var N={},B=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var R in C)if(R!="default"&&Object.prototype.hasOwnProperty.call(C,R)){var T=B?Object.getOwnPropertyDescriptor(C,R):null;T&&(T.get||T.set)?Object.defineProperty(N,R,T):N[R]=C[R]}return N.default=C,A&&A.set(C,N),N}function a(C,k){var A=Object.keys(C);if(Object.getOwnPropertySymbols){var N=Object.getOwnPropertySymbols(C);k&&(N=N.filter(function(B){return Object.getOwnPropertyDescriptor(C,B).enumerable})),A.push.apply(A,N)}return A}function l(C){for(var k,A=1;A<arguments.length;A++)k=arguments[A]==null?{}:arguments[A],A%2?a(Object(k),!0).forEach(function(N){I(C,N,k[N])}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(k)):a(Object(k)).forEach(function(N){Object.defineProperty(C,N,Object.getOwnPropertyDescriptor(k,N))});return C}function c(C,k){if(C==null)return{};var A,N,B=u(C,k);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(C);for(N=0;N<R.length;N++)A=R[N],0<=k.indexOf(A)||Object.prototype.propertyIsEnumerable.call(C,A)&&(B[A]=C[A])}return B}function u(C,k){if(C==null)return{};var A,N,B={},R=Object.keys(C);for(N=0;N<R.length;N++)A=R[N],0<=k.indexOf(A)||(B[A]=C[A]);return B}function d(C,k){if(!(C instanceof k))throw new TypeError("Cannot call a class as a function")}function h(C,k){for(var A,N=0;N<k.length;N++)A=k[N],A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(C,A.key,A)}function f(C,k,A){return k&&h(C.prototype,k),A&&h(C,A),C}function p(C,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function");C.prototype=Object.create(k&&k.prototype,{constructor:{value:C,writable:!0,configurable:!0}}),k&&y(C,k)}function y(C,k){return y=Object.setPrototypeOf||function(A,N){return A.__proto__=N,A},y(C,k)}function w(C){var k=_();return function(){var A,N=S(C);if(k){var B=S(this).constructor;A=Reflect.construct(N,arguments,B)}else A=N.apply(this,arguments);return m(this,A)}}function m(C,k){return k&&(e(k)==="object"||typeof k=="function")?k:g(C)}function g(C){if(C===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C}function _(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function S(C){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)},S(C)}function I(C,k,A){return k in C?Object.defineProperty(C,k,{value:A,enumerable:!0,configurable:!0,writable:!0}):C[k]=A,C}var E=n.default.createElement("p",null,"현재 Daum 우편번호 서비스를 이용할 수 없습니다. 잠시 후 다시 시도해주세요."),D={width:"100%",height:400},b={scriptUrl:r.postcodeScriptUrl,errorMessage:E,autoClose:!0},x=function(C){function k(){var N;d(this,k);for(var B=arguments.length,R=Array(B),T=0;T<B;T++)R[T]=arguments[T];return N=A.call.apply(A,[this].concat(R)),I(g(N),"wrap",(0,n.createRef)()),I(g(N),"state",{hasError:!1}),I(g(N),"initiate",function(U){if(N.wrap.current){var $=N.props;$.scriptUrl,$.className,$.style;var z=$.defaultQuery,J=$.autoClose;$.errorMessage;var P=$.onComplete,F=$.onClose,L=$.onResize,j=$.onSearch,M=c($,i),te=new U(l(l({},M),{},{oncomplete:function(ee){P&&P(ee),J&&N.wrap.current&&N.wrap.current.remove()},onsearch:j,onresize:L,onclose:F,width:"100%",height:"100%"}));te.embed(N.wrap.current,{q:z,autoClose:J})}}),I(g(N),"onError",function(U){console.error(U),N.setState({hasError:!0})}),N}p(k,C);var A=w(k);return f(k,[{key:"componentDidMount",value:function(){var B=this.initiate,R=this.onError,T=this.props.scriptUrl;T&&(0,r.default)(T).then(B).catch(R)}},{key:"render",value:function(){var B=this.props,R=B.className,T=B.style,U=B.errorMessage,$=this.state.hasError;return n.default.createElement("div",{ref:this.wrap,className:R,style:l(l({},D),T)},$&&U)}}]),k}(n.Component);I(x,"defaultProps",b);var O=x;t.default=O})(LV);var MV={};(function(t){function e(p){return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},e(p)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=H,r=o(T_),i=["defaultQuery","left","top","popupKey","popupTitle","autoClose","onComplete","onResize","onClose","onSearch","onError"];function s(p){if(typeof WeakMap!="function")return null;var y=new WeakMap,w=new WeakMap;return(s=function(m){return m?w:y})(p)}function o(p,y){if(!y&&p&&p.__esModule)return p;if(p===null||e(p)!=="object"&&typeof p!="function")return{default:p};var w=s(y);if(w&&w.has(p))return w.get(p);var m={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _ in p)if(_!="default"&&Object.prototype.hasOwnProperty.call(p,_)){var S=g?Object.getOwnPropertyDescriptor(p,_):null;S&&(S.get||S.set)?Object.defineProperty(m,_,S):m[_]=p[_]}return m.default=p,w&&w.set(p,m),m}function a(p,y){var w=Object.keys(p);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(p);y&&(m=m.filter(function(g){return Object.getOwnPropertyDescriptor(p,g).enumerable})),w.push.apply(w,m)}return w}function l(p){for(var y,w=1;w<arguments.length;w++)y=arguments[w]==null?{}:arguments[w],w%2?a(Object(y),!0).forEach(function(m){c(p,m,y[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(y)):a(Object(y)).forEach(function(m){Object.defineProperty(p,m,Object.getOwnPropertyDescriptor(y,m))});return p}function c(p,y,w){return y in p?Object.defineProperty(p,y,{value:w,enumerable:!0,configurable:!0,writable:!0}):p[y]=w,p}function u(p,y){if(p==null)return{};var w,m,g=d(p,y);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(p);for(m=0;m<_.length;m++)w=_[m],0<=y.indexOf(w)||Object.prototype.propertyIsEnumerable.call(p,w)&&(g[w]=p[w])}return g}function d(p,y){if(p==null)return{};var w,m,g={},_=Object.keys(p);for(m=0;m<_.length;m++)w=_[m],0<=y.indexOf(w)||(g[w]=p[w]);return g}function h(){var p=0<arguments.length&&arguments[0]!==void 0?arguments[0]:r.postcodeScriptUrl;(0,n.useEffect)(function(){(0,r.default)(p)},[p]);var y=(0,n.useCallback)(function(w){var m=l({},w),g=m.defaultQuery,_=m.left,S=m.top,I=m.popupKey,E=m.popupTitle,D=m.autoClose,b=m.onComplete,x=m.onResize,O=m.onClose,C=m.onSearch,k=m.onError,A=u(m,i);return(0,r.default)(p).then(function(N){var B=new N(l(l({},A),{},{oncomplete:b,onsearch:C,onresize:x,onclose:O}));B.open({q:g,left:_,top:S,popupTitle:E,popupKey:I,autoClose:D})}).catch(k)},[p]);return y}var f=h;t.default=f})(MV);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DaumPostcodeEmbed",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"useDaumPostcodePopup",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"loadPostcode",{enumerable:!0,get:function(){return r.default}}),t.default=void 0;var e=i(LV),n=i(MV),r=i(T_);function i(o){return o&&o.__esModule?o:{default:o}}var s=e.default;t.default=s})(OV);const nfe=Pb(OV),rfe=({location:t,setLocation:e})=>{const[n,r]=H.useState(!1),i=s=>{e(o=>({...o,sido:s.sido,sigungu:s.sigungu,bname:s.bname})),r(!1)};return v.jsxs(v.Fragment,{children:[v.jsx(Yhe,{fullAddress:`${t.sido} ${t.sigungu} ${t.bname}`,setOpenPostcode:r}),n&&v.jsx(nfe,{autoClose:!1,defaultQuery:"",onComplete:i})]})},$V=ne.label`
  flex-grow: 1;
  position: relative;
  display: flex;
  align-items: center;
  flex-wrap: nowrap;
  padding: 12px 0;
  cursor: pointer;
  box-sizing: border-box;
`,ife=ne($V)`
  padding: 0 0 14px;
  align-items: start;
  i {
    margin-top: 4px;
  }
`,sfe=ne.div`
  display: flex;
  label {
    flex-grow: 1;
    position: relative;
    display: flex;
    align-items: center;
    flex-wrap: nowrap;
    padding: 12px 0;
    cursor: pointer;
    box-sizing: border-box;
  }
`,pN=ne.input`
  position: absolute;
  width: 1px;
  height: 1px;
  clip: rect(0px, 0px, 0px, 0px);
  overflow: hidden;
  box-sizing: border-box;
  padding: 0px;

  &:checked + i {
    background: url("../src/assets/checkbox-checked.svg") no-repeat;
  }

  &:focus-visible + i {
    outline-offset: 1px;
    outline: 2px solid black;
  }

  & + i {
    flex-shrink: 0;
    display: inline-block;
    width: 24px;
    height: 24px;
    background: url("../src/assets/checkbox.svg") no-repeat;
    border-radius: 50%;
  }
`,FV=ne.span`
  padding: 0 8px;
  margin-right: auto;
`,ofe=ne(FV)`
  flex-grow: 1;
  position: relative;
  font-size: 21px;
  line-height: 32px;
  font-weight: 700;

  span {
    display: block;
    margin-top: 4px;
    color: ${lu};
    font-size: 14px;
    font-weight: 400;
    line-height: 19px;
    letter-spacing: -.4px;
  }
`,afe=ne.button`
  position: relative;
  min-width: 80px;
  background-color: #fff;
  border: 0;
  color: ${On};
  font-size: 14px;

  &::after {
    content: "";
    position: absolute;
    top: 50%;
    right: 6px;
    width: 5px;
    height: 5px;
    border: 1px solid ${On};
    border-width: 1px 1px 0 0;
    transform: rotate(45deg) translateY(-50%);
  }
`,md=({id:t,text:e,all:n,checked:r,onChange:i})=>v.jsx(v.Fragment,{children:n?v.jsxs(ife,{htmlFor:t,children:[v.jsx(pN,{id:t,name:t,type:"checkbox",checked:r,onChange:i}),v.jsx("i",{}),v.jsxs(ofe,{"aria-labelledby":t,children:["전체 동의합니다.",v.jsx("span",{children:"선택항목에 동의하지 않은 경우도 회원가입 및 일반적인 서비스를 이용할 수 있습니다."})]})]}):v.jsxs(sfe,{children:[v.jsxs($V,{htmlFor:t,children:[v.jsx(pN,{id:t,name:t,type:"checkbox",checked:r,onChange:i}),v.jsx("i",{}),v.jsx(FV,{"aria-labelledby":t,children:e})]}),v.jsx(afe,{type:"button",children:"약관보기"})]})});function lfe(){const t=Rs(),[e]=Et(ri),[n,r]=H.useState(!1),[i,s]=H.useState(!1),[o,a]=H.useState(!1),[l,c]=H.useState(!1),[u,d]=H.useState(!1),[h,f]=H.useState({}),[p,y]=H.useState({phoneNumber:"",email:"",password:"",confirmPassword:"",nickname:"",Agree:l?"무료배송, 할인쿠폰 등 혜택/정보 수신 동의함":""}),[w,m]=H.useState(""),[g,_]=H.useState(""),[S,I]=H.useState(""),[E,D]=H.useState(!1),b=!p.phoneNumber||!p.email||!p.password||!p.confirmPassword||!p.nickname,x=async T=>{if(T.preventDefault(),!i||!o||!u){D("필수 이용 약관에 동의하셔야합니다.");return}if((await Sm.where("nickname","==",p.nickname).get()).empty)_("");else{_("중복된 닉네임입니다.");return}try{const $=await Qg.createUserWithEmailAndPassword(p.email,p.password);let z="https://firebasestorage.googleapis.com/v0/b/potato-market-lab18.appspot.com/o/default_profile.png?alt=media&token=bdb0de59-063c-42f9-823d-34e5d7b254c3";S&&(z=await Qle.ref().child("profileImages/"+(new Date().getTime()+Math.random().toString(36).substr(2,5))).put(S).then(j=>j.ref.getDownloadURL()));const J=Sm.doc($.user.uid),P=zi.batch();P.set(J,{email:p.email,phoneNumber:p.phoneNumber,nickname:p.nickname,profileImage:z,agree:l,location:{sido:h.sido,sigungu:h.sigungu,bname:h.bname}}),await P.commit(),D(!0)}catch($){const z=O($,i,o,u,b);D(z)}},O=(T,U,$,z,J)=>{if(J)return"모든 필수 항목을 입력해주세요.";if(!U||!$||!z)return"필수 이용 약관에 동의하셔야합니다.";switch(T.code){case"auth/user-not-found":case"auth/wrong-password":return"이메일 혹은 비밀번호가 일치하지 않습니다.";case"auth/email-already-in-use":return"이미 사용 중인 이메일입니다.";case"auth/weak-password":return"비밀번호는 6글자 이상이어야 합니다.";case"auth/network-request-failed":return"네트워크 연결에 실패 하였습니다.";case"auth/invalid-email":return"잘못된 이메일 형식입니다.";case"auth/internal-error":return"잘못된 요청입니다.";default:return"회원가입에 실패 하였습니다."}},C=T=>{y(U=>({...U,[T.target.name]:T.target.value}))},k=T=>{const U=T.target.checked;r(U),s(!!U),a(!!U),c(!!U),d(!!U)},A=T=>{s(T.target.checked),T.target.checked||r(!1)},N=T=>{a(T.target.checked),T.target.checked||r(!1)},B=T=>{c(T.target.checked),T.target.checked||r(!1);const U=Qg.currentUser;U&&Sm.doc(U.uid).update({agree:T.target.checked},{merge:!0}).catch(z=>{m(z.message)})},R=T=>{d(T.target.checked),T.target.checked||r(!1)};return v.jsx(v.Fragment,{children:e!==null?v.jsx(E_,{}):v.jsxs(cfe,{children:[v.jsx("h2",{children:"회원가입"}),v.jsx(ufe,{onSubmit:x,children:v.jsxs("fieldset",{children:[v.jsx("legend",{children:"신규 회원가입 폼"}),v.jsxs("ul",{className:"form-list",children:[v.jsx("li",{className:"form-item",children:v.jsx(ga,{label:!0,button:"인증번호 받기",id:"phoneNumber",placeholder:"숫자만 입력해주세요",text:"휴대폰",type:"tel",value:p.phoneNumber,onChange:C})}),v.jsx("li",{className:"form-item",children:v.jsx(ga,{label:!0,button:"인증번호 받기",id:"email",placeholder:"이메일을 입력해주세요",text:"이메일",type:"email",value:p.email,onChange:C})}),v.jsx("li",{className:"form-item",children:v.jsx(ga,{label:!0,id:"password",placeholder:"비밀번호를 입력해주세요",text:"비밀번호",type:"password",valid:p.password&&(p.password.length<6||p.password.length>8)?"최소 6자 이상 8자 이하로 입력해주세요.":"",onChange:C})}),v.jsx("li",{className:"form-item",children:v.jsx(ga,{label:!0,id:"confirmPassword",placeholder:"비밀번호를 한번 더 입력해주세요",text:"비밀번호 확인",type:"password",valid:p.confirmPassword&&p.password!==p.confirmPassword?"비밀번호가 일치 하지 않습니다.":"",onChange:C})}),v.jsx("li",{className:"form-item",children:v.jsx(ga,{label:!0,id:"nickname",placeholder:"닉네임을 입력해주세요",text:"닉네임",type:"text",valid:g,value:p.nickname,onChange:C})}),v.jsx("li",{className:"form-item",children:v.jsx(Qhe,{profileUrl:S,setProfileUrl:I})}),v.jsx("li",{className:"form-item",children:v.jsx(rfe,{location:h,setLocation:f})})]}),v.jsxs("div",{className:"term-list",children:[v.jsx("span",{className:"term-title",children:"이용약관동의"}),v.jsxs("div",{className:"term-check",children:[v.jsx(md,{all:!0,checked:n,onChange:k}),v.jsx(md,{checked:i,id:"term1",text:"이용약관 동의 (필수)",onChange:A}),v.jsx(md,{checked:o,id:"term2",text:"개인정보 수집 · 이용 동의 (필수)",onChange:N}),v.jsx(md,{checked:l,id:"term3",text:"무료배송, 할인쿠폰 등 혜택/정보 수신 동의 (선택)",value:p.agree,onChange:B}),v.jsx(md,{checked:u,id:"term4",text:"본인은 만 14세 이상입니다. (필수)",onChange:R})]})]}),E&&v.jsx(Rb,{setShowPopup:D,showPopup:E,text:O(w,i,o,u,b)}),v.jsx(Nb,{primary:!0,disabled:b,type:"submit",style:{backgroundColor:b?ti:On,pointerEvents:b?"none":"auto"},onClick:x,children:"가입하기"})]})}),E&&v.jsx(Rb,{text:"회원가입에 성공했습니다! 어서오세요!",onClose:()=>{D(!1),t("/"),window.location.reload()}})]})})}const cfe=ne.section`
  padding: 80px 0 40px;
  h2 {
    line - height: 36px;
    font-size: 32px;
    font-weight: 500;
    text-align: center;
  }
`,ufe=ne.form`
  position: relative;
  width: 640px;
  margin: 44px auto;
  .form-list {
    display: block;
    border-top: 2px solid black;
  }
  .form-item {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    min-height: 84px;
    padding: 20px 0;
    box-sizing: border-box;
  }
  .term-list {
    display: flex;
    gap: 8px;
    padding: 12px 0 20px;
    margin-bottom: 40px;
    border-top: 1px solid black;
    border-bottom: 1px solid ${cp};
  }
  .term-title {
    flex - shrink: 0;
    width: 139px;
    font-weight: 700;
    line-height: 32px;
  }
  .term-check {
    width: 100%;
  }
  @media screen and (max-width: 700px) {
    width: calc(100% - 60px);
    margin: 44px 30px;
    .form-item {
      flex - direction: column;
    }
    .term-list {
      flex - direction: column;
    }
  }
      `;function dfe(){const[t,e]=Et(ri);return v.jsxs(v.Fragment,{children:[v.jsx(qT,{}),t==null?v.jsx(E_,{state:"login"}):v.jsxs(hfe,{className:"wrapper",children:[v.jsx("h2",{className:"articleTitle",children:"게시글 작성"}),v.jsx($he,{})]})]})}const hfe=ne.main`
  display:flex;
  flex-flow:column;
  justify-content: center;
  align-items: center;
  width: 886px;
  margin: 0 auto;
  & .error-massage{
    font-size:32px;
    font-weight: 700;
    margin-bottom:24px;
  }
  & .button-div{
    display:flex;
    gap:12px;
  }
`,ffe=Mz([{path:"/",element:v.jsx(kce,{}),errorElement:v.jsx(Rce,{title:"페이지에 접근할 수 없습니다."}),children:[{path:"",element:v.jsx(xue,{})},{path:"hotarticles",element:v.jsx(jue,{})},{path:"detailarticle/:id",element:v.jsx(Hhe,{})},{path:"writearticle",element:v.jsx(dfe,{})},{path:"mypage",element:v.jsx(Bue,{})},{path:"signin",element:v.jsx(Zhe,{})},{path:"signup",element:v.jsx(lfe,{})},{path:"chat",element:v.jsx(mue,{})}]}]);Z0.createRoot(document.getElementById("root")).render(v.jsx(Pq,{children:v.jsx(Cz,{router:ffe})}));
