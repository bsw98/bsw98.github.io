function q3(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Fb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function K3(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){if(this instanceof r){var i=[null];i.push.apply(i,arguments);var s=Function.bind.apply(e,i);return new s}return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var v={},Q3={get exports(){return v},set exports(t){v=t}},ny={},H={},Y3={get exports(){return H},set exports(t){H=t}},tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var df=Symbol.for("react.element"),X3=Symbol.for("react.portal"),J3=Symbol.for("react.fragment"),Z3=Symbol.for("react.strict_mode"),eV=Symbol.for("react.profiler"),tV=Symbol.for("react.provider"),nV=Symbol.for("react.context"),rV=Symbol.for("react.forward_ref"),iV=Symbol.for("react.suspense"),sV=Symbol.for("react.memo"),oV=Symbol.for("react.lazy"),oI=Symbol.iterator;function aV(t){return t===null||typeof t!="object"?null:(t=oI&&t[oI]||t["@@iterator"],typeof t=="function"?t:null)}var wN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},bN=Object.assign,SN={};function cu(t,e,n){this.props=t,this.context=e,this.refs=SN,this.updater=n||wN}cu.prototype.isReactComponent={};cu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};cu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function EN(){}EN.prototype=cu.prototype;function Ub(t,e,n){this.props=t,this.context=e,this.refs=SN,this.updater=n||wN}var jb=Ub.prototype=new EN;jb.constructor=Ub;bN(jb,cu.prototype);jb.isPureReactComponent=!0;var aI=Array.isArray,xN=Object.prototype.hasOwnProperty,Vb={current:null},TN={key:!0,ref:!0,__self:!0,__source:!0};function IN(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)xN.call(e,r)&&!TN.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:df,type:t,key:s,ref:o,props:i,_owner:Vb.current}}function lV(t,e){return{$$typeof:df,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Bb(t){return typeof t=="object"&&t!==null&&t.$$typeof===df}function cV(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var lI=/\/+/g;function N_(t,e){return typeof t=="object"&&t!==null&&t.key!=null?cV(""+t.key):e.toString(36)}function tm(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case df:case X3:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+N_(o,0):r,aI(i)?(n="",t!=null&&(n=t.replace(lI,"$&/")+"/"),tm(i,e,n,"",function(c){return c})):i!=null&&(Bb(i)&&(i=lV(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(lI,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",aI(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+N_(s,a);o+=tm(s,e,n,l,i)}else if(l=aV(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+N_(s,a++),o+=tm(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function pp(t,e,n){if(t==null)return t;var r=[],i=0;return tm(t,r,"","",function(s){return e.call(n,s,i++)}),r}function uV(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var or={current:null},nm={transition:null},dV={ReactCurrentDispatcher:or,ReactCurrentBatchConfig:nm,ReactCurrentOwner:Vb};tt.Children={map:pp,forEach:function(t,e,n){pp(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return pp(t,function(){e++}),e},toArray:function(t){return pp(t,function(e){return e})||[]},only:function(t){if(!Bb(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};tt.Component=cu;tt.Fragment=J3;tt.Profiler=eV;tt.PureComponent=Ub;tt.StrictMode=Z3;tt.Suspense=iV;tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dV;tt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=bN({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Vb.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)xN.call(e,l)&&!TN.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:df,type:t.type,key:i,ref:s,props:r,_owner:o}};tt.createContext=function(t){return t={$$typeof:nV,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:tV,_context:t},t.Consumer=t};tt.createElement=IN;tt.createFactory=function(t){var e=IN.bind(null,t);return e.type=t,e};tt.createRef=function(){return{current:null}};tt.forwardRef=function(t){return{$$typeof:rV,render:t}};tt.isValidElement=Bb;tt.lazy=function(t){return{$$typeof:oV,_payload:{_status:-1,_result:t},_init:uV}};tt.memo=function(t,e){return{$$typeof:sV,type:t,compare:e===void 0?null:e}};tt.startTransition=function(t){var e=nm.transition;nm.transition={};try{t()}finally{nm.transition=e}};tt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};tt.useCallback=function(t,e){return or.current.useCallback(t,e)};tt.useContext=function(t){return or.current.useContext(t)};tt.useDebugValue=function(){};tt.useDeferredValue=function(t){return or.current.useDeferredValue(t)};tt.useEffect=function(t,e){return or.current.useEffect(t,e)};tt.useId=function(){return or.current.useId()};tt.useImperativeHandle=function(t,e,n){return or.current.useImperativeHandle(t,e,n)};tt.useInsertionEffect=function(t,e){return or.current.useInsertionEffect(t,e)};tt.useLayoutEffect=function(t,e){return or.current.useLayoutEffect(t,e)};tt.useMemo=function(t,e){return or.current.useMemo(t,e)};tt.useReducer=function(t,e,n){return or.current.useReducer(t,e,n)};tt.useRef=function(t){return or.current.useRef(t)};tt.useState=function(t){return or.current.useState(t)};tt.useSyncExternalStore=function(t,e,n){return or.current.useSyncExternalStore(t,e,n)};tt.useTransition=function(){return or.current.useTransition()};tt.version="18.2.0";(function(t){t.exports=tt})(Y3);const Pe=Fb(H),rw=q3({__proto__:null,default:Pe},[H]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hV=H,fV=Symbol.for("react.element"),pV=Symbol.for("react.fragment"),mV=Object.prototype.hasOwnProperty,gV=hV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yV={key:!0,ref:!0,__self:!0,__source:!0};function CN(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)mV.call(e,r)&&!yV.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:fV,type:t,key:s,ref:o,props:i,_owner:gV.current}}ny.Fragment=pV;ny.jsx=CN;ny.jsxs=CN;(function(t){t.exports=ny})(Q3);var iw={},Cm={},vV={get exports(){return Cm},set exports(t){Cm=t}},Vr={},sw={},_V={get exports(){return sw},set exports(t){sw=t}},kN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,$){var z=U.length;U.push($);e:for(;0<z;){var J=z-1>>>1,P=U[J];if(0<i(P,$))U[J]=$,U[z]=P,z=J;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var $=U[0],z=U.pop();if(z!==$){U[0]=z;e:for(var J=0,P=U.length,F=P>>>1;J<F;){var L=2*(J+1)-1,j=U[L],M=L+1,ne=U[M];if(0>i(j,z))M<P&&0>i(ne,j)?(U[J]=ne,U[M]=z,J=M):(U[J]=j,U[L]=z,J=L);else if(M<P&&0>i(ne,z))U[J]=ne,U[M]=z,J=M;else break e}}return $}function i(U,$){var z=U.sortIndex-$.sortIndex;return z!==0?z:U.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,h=3,f=!1,p=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(U){for(var $=n(c);$!==null;){if($.callback===null)r(c);else if($.startTime<=U)r(c),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(c)}}function b(U){if(y=!1,_(U),!p)if(n(l)!==null)p=!0,R(x);else{var $=n(c);$!==null&&I(b,$.startTime-U)}}function x(U,$){p=!1,y&&(y=!1,m(S),S=-1),f=!0;var z=h;try{for(_($),d=n(l);d!==null&&(!(d.expirationTime>$)||U&&!C());){var J=d.callback;if(typeof J=="function"){d.callback=null,h=d.priorityLevel;var P=J(d.expirationTime<=$);$=t.unstable_now(),typeof P=="function"?d.callback=P:d===n(l)&&r(l),_($)}else r(l);d=n(l)}if(d!==null)var F=!0;else{var L=n(c);L!==null&&I(b,L.startTime-$),F=!1}return F}finally{d=null,h=z,f=!1}}var E=!1,D=null,S=-1,T=5,O=-1;function C(){return!(t.unstable_now()-O<T)}function k(){if(D!==null){var U=t.unstable_now();O=U;var $=!0;try{$=D(!0,U)}finally{$?A():(E=!1,D=null)}}else E=!1}var A;if(typeof g=="function")A=function(){g(k)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,B=N.port2;N.port1.onmessage=k,A=function(){B.postMessage(null)}}else A=function(){w(k,0)};function R(U){D=U,E||(E=!0,A())}function I(U,$){S=w(function(){U(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,R(x))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var z=h;h=$;try{return U()}finally{h=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,$){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var z=h;h=U;try{return $()}finally{h=z}},t.unstable_scheduleCallback=function(U,$,z){var J=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?J+z:J):z=J,U){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=z+P,U={id:u++,callback:$,priorityLevel:U,startTime:z,expirationTime:P,sortIndex:-1},z>J?(U.sortIndex=z,e(c,U),n(l)===null&&U===n(c)&&(y?(m(S),S=-1):y=!0,I(b,z-J))):(U.sortIndex=P,e(l,U),p||f||(p=!0,R(x))),U},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(U){var $=h;return function(){var z=h;h=$;try{return U.apply(this,arguments)}finally{h=z}}}})(kN);(function(t){t.exports=kN})(_V);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AN=H,Or=sw;function ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var RN=new Set,rh={};function gl(t,e){Ic(t,e),Ic(t+"Capture",e)}function Ic(t,e){for(rh[t]=e,t=0;t<e.length;t++)RN.add(e[t])}var _s=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ow=Object.prototype.hasOwnProperty,wV=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cI={},uI={};function bV(t){return ow.call(uI,t)?!0:ow.call(cI,t)?!1:wV.test(t)?uI[t]=!0:(cI[t]=!0,!1)}function SV(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function EV(t,e,n,r){if(e===null||typeof e>"u"||SV(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ar(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ln={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ln[t]=new ar(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ln[e]=new ar(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ln[t]=new ar(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ln[t]=new ar(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ln[t]=new ar(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ln[t]=new ar(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ln[t]=new ar(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ln[t]=new ar(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ln[t]=new ar(t,5,!1,t.toLowerCase(),null,!1,!1)});var zb=/[\-:]([a-z])/g;function Wb(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(zb,Wb);Ln[e]=new ar(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(zb,Wb);Ln[e]=new ar(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(zb,Wb);Ln[e]=new ar(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ln[t]=new ar(t,1,!1,t.toLowerCase(),null,!1,!1)});Ln.xlinkHref=new ar("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ln[t]=new ar(t,1,!1,t.toLowerCase(),null,!0,!0)});function Hb(t,e,n,r){var i=Ln.hasOwnProperty(e)?Ln[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(EV(e,n,i,r)&&(n=null),r||i===null?bV(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ks=AN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,mp=Symbol.for("react.element"),Gl=Symbol.for("react.portal"),ql=Symbol.for("react.fragment"),Gb=Symbol.for("react.strict_mode"),aw=Symbol.for("react.profiler"),NN=Symbol.for("react.provider"),PN=Symbol.for("react.context"),qb=Symbol.for("react.forward_ref"),lw=Symbol.for("react.suspense"),cw=Symbol.for("react.suspense_list"),Kb=Symbol.for("react.memo"),Hs=Symbol.for("react.lazy"),DN=Symbol.for("react.offscreen"),dI=Symbol.iterator;function Mu(t){return t===null||typeof t!="object"?null:(t=dI&&t[dI]||t["@@iterator"],typeof t=="function"?t:null)}var Bt=Object.assign,P_;function md(t){if(P_===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);P_=e&&e[1]||""}return`
`+P_+t}var D_=!1;function O_(t,e){if(!t||D_)return"";D_=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{D_=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?md(t):""}function xV(t){switch(t.tag){case 5:return md(t.type);case 16:return md("Lazy");case 13:return md("Suspense");case 19:return md("SuspenseList");case 0:case 2:case 15:return t=O_(t.type,!1),t;case 11:return t=O_(t.type.render,!1),t;case 1:return t=O_(t.type,!0),t;default:return""}}function uw(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ql:return"Fragment";case Gl:return"Portal";case aw:return"Profiler";case Gb:return"StrictMode";case lw:return"Suspense";case cw:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case PN:return(t.displayName||"Context")+".Consumer";case NN:return(t._context.displayName||"Context")+".Provider";case qb:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Kb:return e=t.displayName||null,e!==null?e:uw(t.type)||"Memo";case Hs:e=t._payload,t=t._init;try{return uw(t(e))}catch{}}return null}function TV(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return uw(e);case 8:return e===Gb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function So(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ON(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function IV(t){var e=ON(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function gp(t){t._valueTracker||(t._valueTracker=IV(t))}function LN(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=ON(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function km(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function dw(t,e){var n=e.checked;return Bt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function hI(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=So(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function MN(t,e){e=e.checked,e!=null&&Hb(t,"checked",e,!1)}function hw(t,e){MN(t,e);var n=So(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?fw(t,e.type,n):e.hasOwnProperty("defaultValue")&&fw(t,e.type,So(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function fI(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function fw(t,e,n){(e!=="number"||km(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var gd=Array.isArray;function uc(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+So(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function pw(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ae(91));return Bt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function pI(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ae(92));if(gd(n)){if(1<n.length)throw Error(ae(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:So(n)}}function $N(t,e){var n=So(e.value),r=So(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function mI(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function FN(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mw(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?FN(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var yp,UN=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(yp=yp||document.createElement("div"),yp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=yp.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ih(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Id={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},CV=["Webkit","ms","Moz","O"];Object.keys(Id).forEach(function(t){CV.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Id[e]=Id[t]})});function jN(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Id.hasOwnProperty(t)&&Id[t]?(""+e).trim():e+"px"}function VN(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=jN(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var kV=Bt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gw(t,e){if(e){if(kV[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ae(62))}}function yw(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vw=null;function Qb(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _w=null,dc=null,hc=null;function gI(t){if(t=pf(t)){if(typeof _w!="function")throw Error(ae(280));var e=t.stateNode;e&&(e=ay(e),_w(t.stateNode,t.type,e))}}function BN(t){dc?hc?hc.push(t):hc=[t]:dc=t}function zN(){if(dc){var t=dc,e=hc;if(hc=dc=null,gI(t),e)for(t=0;t<e.length;t++)gI(e[t])}}function WN(t,e){return t(e)}function HN(){}var L_=!1;function GN(t,e,n){if(L_)return t(e,n);L_=!0;try{return WN(t,e,n)}finally{L_=!1,(dc!==null||hc!==null)&&(HN(),zN())}}function sh(t,e){var n=t.stateNode;if(n===null)return null;var r=ay(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ae(231,e,typeof n));return n}var ww=!1;if(_s)try{var $u={};Object.defineProperty($u,"passive",{get:function(){ww=!0}}),window.addEventListener("test",$u,$u),window.removeEventListener("test",$u,$u)}catch{ww=!1}function AV(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Cd=!1,Am=null,Rm=!1,bw=null,RV={onError:function(t){Cd=!0,Am=t}};function NV(t,e,n,r,i,s,o,a,l){Cd=!1,Am=null,AV.apply(RV,arguments)}function PV(t,e,n,r,i,s,o,a,l){if(NV.apply(this,arguments),Cd){if(Cd){var c=Am;Cd=!1,Am=null}else throw Error(ae(198));Rm||(Rm=!0,bw=c)}}function yl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function qN(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function yI(t){if(yl(t)!==t)throw Error(ae(188))}function DV(t){var e=t.alternate;if(!e){if(e=yl(t),e===null)throw Error(ae(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return yI(i),t;if(s===r)return yI(i),e;s=s.sibling}throw Error(ae(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(ae(189))}}if(n.alternate!==r)throw Error(ae(190))}if(n.tag!==3)throw Error(ae(188));return n.stateNode.current===n?t:e}function KN(t){return t=DV(t),t!==null?QN(t):null}function QN(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=QN(t);if(e!==null)return e;t=t.sibling}return null}var YN=Or.unstable_scheduleCallback,vI=Or.unstable_cancelCallback,OV=Or.unstable_shouldYield,LV=Or.unstable_requestPaint,Qt=Or.unstable_now,MV=Or.unstable_getCurrentPriorityLevel,Yb=Or.unstable_ImmediatePriority,XN=Or.unstable_UserBlockingPriority,Nm=Or.unstable_NormalPriority,$V=Or.unstable_LowPriority,JN=Or.unstable_IdlePriority,ry=null,Fi=null;function FV(t){if(Fi&&typeof Fi.onCommitFiberRoot=="function")try{Fi.onCommitFiberRoot(ry,t,void 0,(t.current.flags&128)===128)}catch{}}var gi=Math.clz32?Math.clz32:VV,UV=Math.log,jV=Math.LN2;function VV(t){return t>>>=0,t===0?32:31-(UV(t)/jV|0)|0}var vp=64,_p=4194304;function yd(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Pm(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=yd(a):(s&=o,s!==0&&(r=yd(s)))}else o=n&~i,o!==0?r=yd(o):s!==0&&(r=yd(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-gi(e),i=1<<n,r|=t[n],e&=~i;return r}function BV(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zV(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-gi(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=BV(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Sw(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ZN(){var t=vp;return vp<<=1,!(vp&4194240)&&(vp=64),t}function M_(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function hf(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-gi(e),t[e]=n}function WV(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-gi(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Xb(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-gi(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var mt=0;function eP(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var tP,Jb,nP,rP,iP,Ew=!1,wp=[],oo=null,ao=null,lo=null,oh=new Map,ah=new Map,Ks=[],HV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _I(t,e){switch(t){case"focusin":case"focusout":oo=null;break;case"dragenter":case"dragleave":ao=null;break;case"mouseover":case"mouseout":lo=null;break;case"pointerover":case"pointerout":oh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ah.delete(e.pointerId)}}function Fu(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=pf(e),e!==null&&Jb(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function GV(t,e,n,r,i){switch(e){case"focusin":return oo=Fu(oo,t,e,n,r,i),!0;case"dragenter":return ao=Fu(ao,t,e,n,r,i),!0;case"mouseover":return lo=Fu(lo,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return oh.set(s,Fu(oh.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ah.set(s,Fu(ah.get(s)||null,t,e,n,r,i)),!0}return!1}function sP(t){var e=va(t.target);if(e!==null){var n=yl(e);if(n!==null){if(e=n.tag,e===13){if(e=qN(n),e!==null){t.blockedOn=e,iP(t.priority,function(){nP(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function rm(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=xw(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);vw=r,n.target.dispatchEvent(r),vw=null}else return e=pf(n),e!==null&&Jb(e),t.blockedOn=n,!1;e.shift()}return!0}function wI(t,e,n){rm(t)&&n.delete(e)}function qV(){Ew=!1,oo!==null&&rm(oo)&&(oo=null),ao!==null&&rm(ao)&&(ao=null),lo!==null&&rm(lo)&&(lo=null),oh.forEach(wI),ah.forEach(wI)}function Uu(t,e){t.blockedOn===e&&(t.blockedOn=null,Ew||(Ew=!0,Or.unstable_scheduleCallback(Or.unstable_NormalPriority,qV)))}function lh(t){function e(i){return Uu(i,t)}if(0<wp.length){Uu(wp[0],t);for(var n=1;n<wp.length;n++){var r=wp[n];r.blockedOn===t&&(r.blockedOn=null)}}for(oo!==null&&Uu(oo,t),ao!==null&&Uu(ao,t),lo!==null&&Uu(lo,t),oh.forEach(e),ah.forEach(e),n=0;n<Ks.length;n++)r=Ks[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ks.length&&(n=Ks[0],n.blockedOn===null);)sP(n),n.blockedOn===null&&Ks.shift()}var fc=ks.ReactCurrentBatchConfig,Dm=!0;function KV(t,e,n,r){var i=mt,s=fc.transition;fc.transition=null;try{mt=1,Zb(t,e,n,r)}finally{mt=i,fc.transition=s}}function QV(t,e,n,r){var i=mt,s=fc.transition;fc.transition=null;try{mt=4,Zb(t,e,n,r)}finally{mt=i,fc.transition=s}}function Zb(t,e,n,r){if(Dm){var i=xw(t,e,n,r);if(i===null)G_(t,e,r,Om,n),_I(t,r);else if(GV(i,t,e,n,r))r.stopPropagation();else if(_I(t,r),e&4&&-1<HV.indexOf(t)){for(;i!==null;){var s=pf(i);if(s!==null&&tP(s),s=xw(t,e,n,r),s===null&&G_(t,e,r,Om,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else G_(t,e,r,null,n)}}var Om=null;function xw(t,e,n,r){if(Om=null,t=Qb(r),t=va(t),t!==null)if(e=yl(t),e===null)t=null;else if(n=e.tag,n===13){if(t=qN(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Om=t,null}function oP(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(MV()){case Yb:return 1;case XN:return 4;case Nm:case $V:return 16;case JN:return 536870912;default:return 16}default:return 16}}var Js=null,eS=null,im=null;function aP(){if(im)return im;var t,e=eS,n=e.length,r,i="value"in Js?Js.value:Js.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return im=i.slice(t,1<r?1-r:void 0)}function sm(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function bp(){return!0}function bI(){return!1}function Br(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?bp:bI,this.isPropagationStopped=bI,this}return Bt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=bp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=bp)},persist:function(){},isPersistent:bp}),e}var uu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tS=Br(uu),ff=Bt({},uu,{view:0,detail:0}),YV=Br(ff),$_,F_,ju,iy=Bt({},ff,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nS,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ju&&(ju&&t.type==="mousemove"?($_=t.screenX-ju.screenX,F_=t.screenY-ju.screenY):F_=$_=0,ju=t),$_)},movementY:function(t){return"movementY"in t?t.movementY:F_}}),SI=Br(iy),XV=Bt({},iy,{dataTransfer:0}),JV=Br(XV),ZV=Bt({},ff,{relatedTarget:0}),U_=Br(ZV),eB=Bt({},uu,{animationName:0,elapsedTime:0,pseudoElement:0}),tB=Br(eB),nB=Bt({},uu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),rB=Br(nB),iB=Bt({},uu,{data:0}),EI=Br(iB),sB={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oB={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aB={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lB(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=aB[t])?!!e[t]:!1}function nS(){return lB}var cB=Bt({},ff,{key:function(t){if(t.key){var e=sB[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=sm(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?oB[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nS,charCode:function(t){return t.type==="keypress"?sm(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?sm(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),uB=Br(cB),dB=Bt({},iy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xI=Br(dB),hB=Bt({},ff,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nS}),fB=Br(hB),pB=Bt({},uu,{propertyName:0,elapsedTime:0,pseudoElement:0}),mB=Br(pB),gB=Bt({},iy,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),yB=Br(gB),vB=[9,13,27,32],rS=_s&&"CompositionEvent"in window,kd=null;_s&&"documentMode"in document&&(kd=document.documentMode);var _B=_s&&"TextEvent"in window&&!kd,lP=_s&&(!rS||kd&&8<kd&&11>=kd),TI=String.fromCharCode(32),II=!1;function cP(t,e){switch(t){case"keyup":return vB.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uP(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Kl=!1;function wB(t,e){switch(t){case"compositionend":return uP(e);case"keypress":return e.which!==32?null:(II=!0,TI);case"textInput":return t=e.data,t===TI&&II?null:t;default:return null}}function bB(t,e){if(Kl)return t==="compositionend"||!rS&&cP(t,e)?(t=aP(),im=eS=Js=null,Kl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return lP&&e.locale!=="ko"?null:e.data;default:return null}}var SB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function CI(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!SB[t.type]:e==="textarea"}function dP(t,e,n,r){BN(r),e=Lm(e,"onChange"),0<e.length&&(n=new tS("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ad=null,ch=null;function EB(t){SP(t,0)}function sy(t){var e=Xl(t);if(LN(e))return t}function xB(t,e){if(t==="change")return e}var hP=!1;if(_s){var j_;if(_s){var V_="oninput"in document;if(!V_){var kI=document.createElement("div");kI.setAttribute("oninput","return;"),V_=typeof kI.oninput=="function"}j_=V_}else j_=!1;hP=j_&&(!document.documentMode||9<document.documentMode)}function AI(){Ad&&(Ad.detachEvent("onpropertychange",fP),ch=Ad=null)}function fP(t){if(t.propertyName==="value"&&sy(ch)){var e=[];dP(e,ch,t,Qb(t)),GN(EB,e)}}function TB(t,e,n){t==="focusin"?(AI(),Ad=e,ch=n,Ad.attachEvent("onpropertychange",fP)):t==="focusout"&&AI()}function IB(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return sy(ch)}function CB(t,e){if(t==="click")return sy(e)}function kB(t,e){if(t==="input"||t==="change")return sy(e)}function AB(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var _i=typeof Object.is=="function"?Object.is:AB;function uh(t,e){if(_i(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ow.call(e,i)||!_i(t[i],e[i]))return!1}return!0}function RI(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function NI(t,e){var n=RI(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=RI(n)}}function pP(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?pP(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function mP(){for(var t=window,e=km();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=km(t.document)}return e}function iS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function RB(t){var e=mP(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&pP(n.ownerDocument.documentElement,n)){if(r!==null&&iS(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=NI(n,s);var o=NI(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var NB=_s&&"documentMode"in document&&11>=document.documentMode,Ql=null,Tw=null,Rd=null,Iw=!1;function PI(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Iw||Ql==null||Ql!==km(r)||(r=Ql,"selectionStart"in r&&iS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Rd&&uh(Rd,r)||(Rd=r,r=Lm(Tw,"onSelect"),0<r.length&&(e=new tS("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ql)))}function Sp(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Yl={animationend:Sp("Animation","AnimationEnd"),animationiteration:Sp("Animation","AnimationIteration"),animationstart:Sp("Animation","AnimationStart"),transitionend:Sp("Transition","TransitionEnd")},B_={},gP={};_s&&(gP=document.createElement("div").style,"AnimationEvent"in window||(delete Yl.animationend.animation,delete Yl.animationiteration.animation,delete Yl.animationstart.animation),"TransitionEvent"in window||delete Yl.transitionend.transition);function oy(t){if(B_[t])return B_[t];if(!Yl[t])return t;var e=Yl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in gP)return B_[t]=e[n];return t}var yP=oy("animationend"),vP=oy("animationiteration"),_P=oy("animationstart"),wP=oy("transitionend"),bP=new Map,DI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zo(t,e){bP.set(t,e),gl(e,[t])}for(var z_=0;z_<DI.length;z_++){var W_=DI[z_],PB=W_.toLowerCase(),DB=W_[0].toUpperCase()+W_.slice(1);zo(PB,"on"+DB)}zo(yP,"onAnimationEnd");zo(vP,"onAnimationIteration");zo(_P,"onAnimationStart");zo("dblclick","onDoubleClick");zo("focusin","onFocus");zo("focusout","onBlur");zo(wP,"onTransitionEnd");Ic("onMouseEnter",["mouseout","mouseover"]);Ic("onMouseLeave",["mouseout","mouseover"]);Ic("onPointerEnter",["pointerout","pointerover"]);Ic("onPointerLeave",["pointerout","pointerover"]);gl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));gl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));gl("onBeforeInput",["compositionend","keypress","textInput","paste"]);gl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));gl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));gl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OB=new Set("cancel close invalid load scroll toggle".split(" ").concat(vd));function OI(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,PV(r,e,void 0,t),t.currentTarget=null}function SP(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;OI(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;OI(i,a,c),s=l}}}if(Rm)throw t=bw,Rm=!1,bw=null,t}function Tt(t,e){var n=e[Nw];n===void 0&&(n=e[Nw]=new Set);var r=t+"__bubble";n.has(r)||(EP(e,t,2,!1),n.add(r))}function H_(t,e,n){var r=0;e&&(r|=4),EP(n,t,r,e)}var Ep="_reactListening"+Math.random().toString(36).slice(2);function dh(t){if(!t[Ep]){t[Ep]=!0,RN.forEach(function(n){n!=="selectionchange"&&(OB.has(n)||H_(n,!1,t),H_(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ep]||(e[Ep]=!0,H_("selectionchange",!1,e))}}function EP(t,e,n,r){switch(oP(e)){case 1:var i=KV;break;case 4:i=QV;break;default:i=Zb}n=i.bind(null,e,n,t),i=void 0,!ww||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function G_(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=va(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}GN(function(){var c=s,u=Qb(n),d=[];e:{var h=bP.get(t);if(h!==void 0){var f=tS,p=t;switch(t){case"keypress":if(sm(n)===0)break e;case"keydown":case"keyup":f=uB;break;case"focusin":p="focus",f=U_;break;case"focusout":p="blur",f=U_;break;case"beforeblur":case"afterblur":f=U_;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=SI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=JV;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=fB;break;case yP:case vP:case _P:f=tB;break;case wP:f=mB;break;case"scroll":f=YV;break;case"wheel":f=yB;break;case"copy":case"cut":case"paste":f=rB;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=xI}var y=(e&4)!==0,w=!y&&t==="scroll",m=y?h!==null?h+"Capture":null:h;y=[];for(var g=c,_;g!==null;){_=g;var b=_.stateNode;if(_.tag===5&&b!==null&&(_=b,m!==null&&(b=sh(g,m),b!=null&&y.push(hh(g,b,_)))),w)break;g=g.return}0<y.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:y}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==vw&&(p=n.relatedTarget||n.fromElement)&&(va(p)||p[ws]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=c,p=p?va(p):null,p!==null&&(w=yl(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=c),f!==p)){if(y=SI,b="onMouseLeave",m="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(y=xI,b="onPointerLeave",m="onPointerEnter",g="pointer"),w=f==null?h:Xl(f),_=p==null?h:Xl(p),h=new y(b,g+"leave",f,n,u),h.target=w,h.relatedTarget=_,b=null,va(u)===c&&(y=new y(m,g+"enter",p,n,u),y.target=_,y.relatedTarget=w,b=y),w=b,f&&p)t:{for(y=f,m=p,g=0,_=y;_;_=Ll(_))g++;for(_=0,b=m;b;b=Ll(b))_++;for(;0<g-_;)y=Ll(y),g--;for(;0<_-g;)m=Ll(m),_--;for(;g--;){if(y===m||m!==null&&y===m.alternate)break t;y=Ll(y),m=Ll(m)}y=null}else y=null;f!==null&&LI(d,h,f,y,!1),p!==null&&w!==null&&LI(d,w,p,y,!0)}}e:{if(h=c?Xl(c):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var x=xB;else if(CI(h))if(hP)x=kB;else{x=IB;var E=TB}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(x=CB);if(x&&(x=x(t,c))){dP(d,x,n,u);break e}E&&E(t,h,c),t==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&fw(h,"number",h.value)}switch(E=c?Xl(c):window,t){case"focusin":(CI(E)||E.contentEditable==="true")&&(Ql=E,Tw=c,Rd=null);break;case"focusout":Rd=Tw=Ql=null;break;case"mousedown":Iw=!0;break;case"contextmenu":case"mouseup":case"dragend":Iw=!1,PI(d,n,u);break;case"selectionchange":if(NB)break;case"keydown":case"keyup":PI(d,n,u)}var D;if(rS)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Kl?cP(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(lP&&n.locale!=="ko"&&(Kl||S!=="onCompositionStart"?S==="onCompositionEnd"&&Kl&&(D=aP()):(Js=u,eS="value"in Js?Js.value:Js.textContent,Kl=!0)),E=Lm(c,S),0<E.length&&(S=new EI(S,t,null,n,u),d.push({event:S,listeners:E}),D?S.data=D:(D=uP(n),D!==null&&(S.data=D)))),(D=_B?wB(t,n):bB(t,n))&&(c=Lm(c,"onBeforeInput"),0<c.length&&(u=new EI("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=D))}SP(d,e)})}function hh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Lm(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=sh(t,n),s!=null&&r.unshift(hh(t,s,i)),s=sh(t,e),s!=null&&r.push(hh(t,s,i))),t=t.return}return r}function Ll(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function LI(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=sh(n,s),l!=null&&o.unshift(hh(n,l,a))):i||(l=sh(n,s),l!=null&&o.push(hh(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var LB=/\r\n?/g,MB=/\u0000|\uFFFD/g;function MI(t){return(typeof t=="string"?t:""+t).replace(LB,`
`).replace(MB,"")}function xp(t,e,n){if(e=MI(e),MI(t)!==e&&n)throw Error(ae(425))}function Mm(){}var Cw=null,kw=null;function Aw(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Rw=typeof setTimeout=="function"?setTimeout:void 0,$B=typeof clearTimeout=="function"?clearTimeout:void 0,$I=typeof Promise=="function"?Promise:void 0,FB=typeof queueMicrotask=="function"?queueMicrotask:typeof $I<"u"?function(t){return $I.resolve(null).then(t).catch(UB)}:Rw;function UB(t){setTimeout(function(){throw t})}function q_(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),lh(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);lh(e)}function co(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function FI(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var du=Math.random().toString(36).slice(2),Ci="__reactFiber$"+du,fh="__reactProps$"+du,ws="__reactContainer$"+du,Nw="__reactEvents$"+du,jB="__reactListeners$"+du,VB="__reactHandles$"+du;function va(t){var e=t[Ci];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ws]||n[Ci]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=FI(t);t!==null;){if(n=t[Ci])return n;t=FI(t)}return e}t=n,n=t.parentNode}return null}function pf(t){return t=t[Ci]||t[ws],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Xl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ae(33))}function ay(t){return t[fh]||null}var Pw=[],Jl=-1;function Wo(t){return{current:t}}function kt(t){0>Jl||(t.current=Pw[Jl],Pw[Jl]=null,Jl--)}function Et(t,e){Jl++,Pw[Jl]=t.current,t.current=e}var Eo={},Qn=Wo(Eo),vr=Wo(!1),Va=Eo;function Cc(t,e){var n=t.type.contextTypes;if(!n)return Eo;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function _r(t){return t=t.childContextTypes,t!=null}function $m(){kt(vr),kt(Qn)}function UI(t,e,n){if(Qn.current!==Eo)throw Error(ae(168));Et(Qn,e),Et(vr,n)}function xP(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ae(108,TV(t)||"Unknown",i));return Bt({},n,r)}function Fm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Eo,Va=Qn.current,Et(Qn,t),Et(vr,vr.current),!0}function jI(t,e,n){var r=t.stateNode;if(!r)throw Error(ae(169));n?(t=xP(t,e,Va),r.__reactInternalMemoizedMergedChildContext=t,kt(vr),kt(Qn),Et(Qn,t)):kt(vr),Et(vr,n)}var ss=null,ly=!1,K_=!1;function TP(t){ss===null?ss=[t]:ss.push(t)}function BB(t){ly=!0,TP(t)}function Ho(){if(!K_&&ss!==null){K_=!0;var t=0,e=mt;try{var n=ss;for(mt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ss=null,ly=!1}catch(i){throw ss!==null&&(ss=ss.slice(t+1)),YN(Yb,Ho),i}finally{mt=e,K_=!1}}return null}var Zl=[],ec=0,Um=null,jm=0,Hr=[],Gr=0,Ba=null,os=1,as="";function oa(t,e){Zl[ec++]=jm,Zl[ec++]=Um,Um=t,jm=e}function IP(t,e,n){Hr[Gr++]=os,Hr[Gr++]=as,Hr[Gr++]=Ba,Ba=t;var r=os;t=as;var i=32-gi(r)-1;r&=~(1<<i),n+=1;var s=32-gi(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,os=1<<32-gi(e)+i|n<<i|r,as=s+t}else os=1<<s|n<<i|r,as=t}function sS(t){t.return!==null&&(oa(t,1),IP(t,1,0))}function oS(t){for(;t===Um;)Um=Zl[--ec],Zl[ec]=null,jm=Zl[--ec],Zl[ec]=null;for(;t===Ba;)Ba=Hr[--Gr],Hr[Gr]=null,as=Hr[--Gr],Hr[Gr]=null,os=Hr[--Gr],Hr[Gr]=null}var Dr=null,Rr=null,Dt=!1,di=null;function CP(t,e){var n=Kr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function VI(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Dr=t,Rr=co(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Dr=t,Rr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ba!==null?{id:os,overflow:as}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Kr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Dr=t,Rr=null,!0):!1;default:return!1}}function Dw(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ow(t){if(Dt){var e=Rr;if(e){var n=e;if(!VI(t,e)){if(Dw(t))throw Error(ae(418));e=co(n.nextSibling);var r=Dr;e&&VI(t,e)?CP(r,n):(t.flags=t.flags&-4097|2,Dt=!1,Dr=t)}}else{if(Dw(t))throw Error(ae(418));t.flags=t.flags&-4097|2,Dt=!1,Dr=t}}}function BI(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Dr=t}function Tp(t){if(t!==Dr)return!1;if(!Dt)return BI(t),Dt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Aw(t.type,t.memoizedProps)),e&&(e=Rr)){if(Dw(t))throw kP(),Error(ae(418));for(;e;)CP(t,e),e=co(e.nextSibling)}if(BI(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Rr=co(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Rr=null}}else Rr=Dr?co(t.stateNode.nextSibling):null;return!0}function kP(){for(var t=Rr;t;)t=co(t.nextSibling)}function kc(){Rr=Dr=null,Dt=!1}function aS(t){di===null?di=[t]:di.push(t)}var zB=ks.ReactCurrentBatchConfig;function li(t,e){if(t&&t.defaultProps){e=Bt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Vm=Wo(null),Bm=null,tc=null,lS=null;function cS(){lS=tc=Bm=null}function uS(t){var e=Vm.current;kt(Vm),t._currentValue=e}function Lw(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function pc(t,e){Bm=t,lS=tc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(fr=!0),t.firstContext=null)}function ei(t){var e=t._currentValue;if(lS!==t)if(t={context:t,memoizedValue:e,next:null},tc===null){if(Bm===null)throw Error(ae(308));tc=t,Bm.dependencies={lanes:0,firstContext:t}}else tc=tc.next=t;return e}var _a=null;function dS(t){_a===null?_a=[t]:_a.push(t)}function AP(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,dS(e)):(n.next=i.next,i.next=n),e.interleaved=n,bs(t,r)}function bs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Gs=!1;function hS(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function RP(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function hs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function uo(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,lt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,bs(t,n)}return i=r.interleaved,i===null?(e.next=e,dS(r)):(e.next=i.next,i.next=e),r.interleaved=e,bs(t,n)}function om(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Xb(t,n)}}function zI(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function zm(t,e,n,r){var i=t.updateQueue;Gs=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,u=c=l=null,a=s;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,y=a;switch(h=e,f=n,y.tag){case 1:if(p=y.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=y.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=Bt({},d,h);break e;case 2:Gs=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Wa|=o,t.lanes=o,t.memoizedState=d}}function WI(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ae(191,i));i.call(r)}}}var NP=new AN.Component().refs;function Mw(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Bt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var cy={isMounted:function(t){return(t=t._reactInternals)?yl(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=rr(),i=fo(t),s=hs(r,i);s.payload=e,n!=null&&(s.callback=n),e=uo(t,s,i),e!==null&&(yi(e,t,i,r),om(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=rr(),i=fo(t),s=hs(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=uo(t,s,i),e!==null&&(yi(e,t,i,r),om(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=rr(),r=fo(t),i=hs(n,r);i.tag=2,e!=null&&(i.callback=e),e=uo(t,i,r),e!==null&&(yi(e,t,r,n),om(e,t,r))}};function HI(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!uh(n,r)||!uh(i,s):!0}function PP(t,e,n){var r=!1,i=Eo,s=e.contextType;return typeof s=="object"&&s!==null?s=ei(s):(i=_r(e)?Va:Qn.current,r=e.contextTypes,s=(r=r!=null)?Cc(t,i):Eo),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=cy,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function GI(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&cy.enqueueReplaceState(e,e.state,null)}function $w(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=NP,hS(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=ei(s):(s=_r(e)?Va:Qn.current,i.context=Cc(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Mw(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&cy.enqueueReplaceState(i,i.state,null),zm(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Vu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ae(309));var r=n.stateNode}if(!r)throw Error(ae(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===NP&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(ae(284));if(!n._owner)throw Error(ae(290,t))}return t}function Ip(t,e){throw t=Object.prototype.toString.call(e),Error(ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function qI(t){var e=t._init;return e(t._payload)}function DP(t){function e(m,g){if(t){var _=m.deletions;_===null?(m.deletions=[g],m.flags|=16):_.push(g)}}function n(m,g){if(!t)return null;for(;g!==null;)e(m,g),g=g.sibling;return null}function r(m,g){for(m=new Map;g!==null;)g.key!==null?m.set(g.key,g):m.set(g.index,g),g=g.sibling;return m}function i(m,g){return m=po(m,g),m.index=0,m.sibling=null,m}function s(m,g,_){return m.index=_,t?(_=m.alternate,_!==null?(_=_.index,_<g?(m.flags|=2,g):_):(m.flags|=2,g)):(m.flags|=1048576,g)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,g,_,b){return g===null||g.tag!==6?(g=t0(_,m.mode,b),g.return=m,g):(g=i(g,_),g.return=m,g)}function l(m,g,_,b){var x=_.type;return x===ql?u(m,g,_.props.children,b,_.key):g!==null&&(g.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Hs&&qI(x)===g.type)?(b=i(g,_.props),b.ref=Vu(m,g,_),b.return=m,b):(b=hm(_.type,_.key,_.props,null,m.mode,b),b.ref=Vu(m,g,_),b.return=m,b)}function c(m,g,_,b){return g===null||g.tag!==4||g.stateNode.containerInfo!==_.containerInfo||g.stateNode.implementation!==_.implementation?(g=n0(_,m.mode,b),g.return=m,g):(g=i(g,_.children||[]),g.return=m,g)}function u(m,g,_,b,x){return g===null||g.tag!==7?(g=Na(_,m.mode,b,x),g.return=m,g):(g=i(g,_),g.return=m,g)}function d(m,g,_){if(typeof g=="string"&&g!==""||typeof g=="number")return g=t0(""+g,m.mode,_),g.return=m,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case mp:return _=hm(g.type,g.key,g.props,null,m.mode,_),_.ref=Vu(m,null,g),_.return=m,_;case Gl:return g=n0(g,m.mode,_),g.return=m,g;case Hs:var b=g._init;return d(m,b(g._payload),_)}if(gd(g)||Mu(g))return g=Na(g,m.mode,_,null),g.return=m,g;Ip(m,g)}return null}function h(m,g,_,b){var x=g!==null?g.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return x!==null?null:a(m,g,""+_,b);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case mp:return _.key===x?l(m,g,_,b):null;case Gl:return _.key===x?c(m,g,_,b):null;case Hs:return x=_._init,h(m,g,x(_._payload),b)}if(gd(_)||Mu(_))return x!==null?null:u(m,g,_,b,null);Ip(m,_)}return null}function f(m,g,_,b,x){if(typeof b=="string"&&b!==""||typeof b=="number")return m=m.get(_)||null,a(g,m,""+b,x);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case mp:return m=m.get(b.key===null?_:b.key)||null,l(g,m,b,x);case Gl:return m=m.get(b.key===null?_:b.key)||null,c(g,m,b,x);case Hs:var E=b._init;return f(m,g,_,E(b._payload),x)}if(gd(b)||Mu(b))return m=m.get(_)||null,u(g,m,b,x,null);Ip(g,b)}return null}function p(m,g,_,b){for(var x=null,E=null,D=g,S=g=0,T=null;D!==null&&S<_.length;S++){D.index>S?(T=D,D=null):T=D.sibling;var O=h(m,D,_[S],b);if(O===null){D===null&&(D=T);break}t&&D&&O.alternate===null&&e(m,D),g=s(O,g,S),E===null?x=O:E.sibling=O,E=O,D=T}if(S===_.length)return n(m,D),Dt&&oa(m,S),x;if(D===null){for(;S<_.length;S++)D=d(m,_[S],b),D!==null&&(g=s(D,g,S),E===null?x=D:E.sibling=D,E=D);return Dt&&oa(m,S),x}for(D=r(m,D);S<_.length;S++)T=f(D,m,S,_[S],b),T!==null&&(t&&T.alternate!==null&&D.delete(T.key===null?S:T.key),g=s(T,g,S),E===null?x=T:E.sibling=T,E=T);return t&&D.forEach(function(C){return e(m,C)}),Dt&&oa(m,S),x}function y(m,g,_,b){var x=Mu(_);if(typeof x!="function")throw Error(ae(150));if(_=x.call(_),_==null)throw Error(ae(151));for(var E=x=null,D=g,S=g=0,T=null,O=_.next();D!==null&&!O.done;S++,O=_.next()){D.index>S?(T=D,D=null):T=D.sibling;var C=h(m,D,O.value,b);if(C===null){D===null&&(D=T);break}t&&D&&C.alternate===null&&e(m,D),g=s(C,g,S),E===null?x=C:E.sibling=C,E=C,D=T}if(O.done)return n(m,D),Dt&&oa(m,S),x;if(D===null){for(;!O.done;S++,O=_.next())O=d(m,O.value,b),O!==null&&(g=s(O,g,S),E===null?x=O:E.sibling=O,E=O);return Dt&&oa(m,S),x}for(D=r(m,D);!O.done;S++,O=_.next())O=f(D,m,S,O.value,b),O!==null&&(t&&O.alternate!==null&&D.delete(O.key===null?S:O.key),g=s(O,g,S),E===null?x=O:E.sibling=O,E=O);return t&&D.forEach(function(k){return e(m,k)}),Dt&&oa(m,S),x}function w(m,g,_,b){if(typeof _=="object"&&_!==null&&_.type===ql&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case mp:e:{for(var x=_.key,E=g;E!==null;){if(E.key===x){if(x=_.type,x===ql){if(E.tag===7){n(m,E.sibling),g=i(E,_.props.children),g.return=m,m=g;break e}}else if(E.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Hs&&qI(x)===E.type){n(m,E.sibling),g=i(E,_.props),g.ref=Vu(m,E,_),g.return=m,m=g;break e}n(m,E);break}else e(m,E);E=E.sibling}_.type===ql?(g=Na(_.props.children,m.mode,b,_.key),g.return=m,m=g):(b=hm(_.type,_.key,_.props,null,m.mode,b),b.ref=Vu(m,g,_),b.return=m,m=b)}return o(m);case Gl:e:{for(E=_.key;g!==null;){if(g.key===E)if(g.tag===4&&g.stateNode.containerInfo===_.containerInfo&&g.stateNode.implementation===_.implementation){n(m,g.sibling),g=i(g,_.children||[]),g.return=m,m=g;break e}else{n(m,g);break}else e(m,g);g=g.sibling}g=n0(_,m.mode,b),g.return=m,m=g}return o(m);case Hs:return E=_._init,w(m,g,E(_._payload),b)}if(gd(_))return p(m,g,_,b);if(Mu(_))return y(m,g,_,b);Ip(m,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,g!==null&&g.tag===6?(n(m,g.sibling),g=i(g,_),g.return=m,m=g):(n(m,g),g=t0(_,m.mode,b),g.return=m,m=g),o(m)):n(m,g)}return w}var Ac=DP(!0),OP=DP(!1),mf={},Ui=Wo(mf),ph=Wo(mf),mh=Wo(mf);function wa(t){if(t===mf)throw Error(ae(174));return t}function fS(t,e){switch(Et(mh,e),Et(ph,t),Et(Ui,mf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:mw(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=mw(e,t)}kt(Ui),Et(Ui,e)}function Rc(){kt(Ui),kt(ph),kt(mh)}function LP(t){wa(mh.current);var e=wa(Ui.current),n=mw(e,t.type);e!==n&&(Et(ph,t),Et(Ui,n))}function pS(t){ph.current===t&&(kt(Ui),kt(ph))}var Ut=Wo(0);function Wm(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Q_=[];function mS(){for(var t=0;t<Q_.length;t++)Q_[t]._workInProgressVersionPrimary=null;Q_.length=0}var am=ks.ReactCurrentDispatcher,Y_=ks.ReactCurrentBatchConfig,za=0,Vt=null,rn=null,fn=null,Hm=!1,Nd=!1,gh=0,WB=0;function Vn(){throw Error(ae(321))}function gS(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!_i(t[n],e[n]))return!1;return!0}function yS(t,e,n,r,i,s){if(za=s,Vt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,am.current=t===null||t.memoizedState===null?KB:QB,t=n(r,i),Nd){s=0;do{if(Nd=!1,gh=0,25<=s)throw Error(ae(301));s+=1,fn=rn=null,e.updateQueue=null,am.current=YB,t=n(r,i)}while(Nd)}if(am.current=Gm,e=rn!==null&&rn.next!==null,za=0,fn=rn=Vt=null,Hm=!1,e)throw Error(ae(300));return t}function vS(){var t=gh!==0;return gh=0,t}function Ti(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?Vt.memoizedState=fn=t:fn=fn.next=t,fn}function ti(){if(rn===null){var t=Vt.alternate;t=t!==null?t.memoizedState:null}else t=rn.next;var e=fn===null?Vt.memoizedState:fn.next;if(e!==null)fn=e,rn=t;else{if(t===null)throw Error(ae(310));rn=t,t={memoizedState:rn.memoizedState,baseState:rn.baseState,baseQueue:rn.baseQueue,queue:rn.queue,next:null},fn===null?Vt.memoizedState=fn=t:fn=fn.next=t}return fn}function yh(t,e){return typeof e=="function"?e(t):e}function X_(t){var e=ti(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var r=rn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((za&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Vt.lanes|=u,Wa|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,_i(r,e.memoizedState)||(fr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Vt.lanes|=s,Wa|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function J_(t){var e=ti(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);_i(s,e.memoizedState)||(fr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function MP(){}function $P(t,e){var n=Vt,r=ti(),i=e(),s=!_i(r.memoizedState,i);if(s&&(r.memoizedState=i,fr=!0),r=r.queue,_S(jP.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||fn!==null&&fn.memoizedState.tag&1){if(n.flags|=2048,vh(9,UP.bind(null,n,r,i,e),void 0,null),_n===null)throw Error(ae(349));za&30||FP(n,e,i)}return i}function FP(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Vt.updateQueue,e===null?(e={lastEffect:null,stores:null},Vt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function UP(t,e,n,r){e.value=n,e.getSnapshot=r,VP(e)&&BP(t)}function jP(t,e,n){return n(function(){VP(e)&&BP(t)})}function VP(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!_i(t,n)}catch{return!0}}function BP(t){var e=bs(t,1);e!==null&&yi(e,t,1,-1)}function KI(t){var e=Ti();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yh,lastRenderedState:t},e.queue=t,t=t.dispatch=qB.bind(null,Vt,t),[e.memoizedState,t]}function vh(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Vt.updateQueue,e===null?(e={lastEffect:null,stores:null},Vt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function zP(){return ti().memoizedState}function lm(t,e,n,r){var i=Ti();Vt.flags|=t,i.memoizedState=vh(1|e,n,void 0,r===void 0?null:r)}function uy(t,e,n,r){var i=ti();r=r===void 0?null:r;var s=void 0;if(rn!==null){var o=rn.memoizedState;if(s=o.destroy,r!==null&&gS(r,o.deps)){i.memoizedState=vh(e,n,s,r);return}}Vt.flags|=t,i.memoizedState=vh(1|e,n,s,r)}function QI(t,e){return lm(8390656,8,t,e)}function _S(t,e){return uy(2048,8,t,e)}function WP(t,e){return uy(4,2,t,e)}function HP(t,e){return uy(4,4,t,e)}function GP(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function qP(t,e,n){return n=n!=null?n.concat([t]):null,uy(4,4,GP.bind(null,e,t),n)}function wS(){}function KP(t,e){var n=ti();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gS(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function QP(t,e){var n=ti();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gS(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function YP(t,e,n){return za&21?(_i(n,e)||(n=ZN(),Vt.lanes|=n,Wa|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,fr=!0),t.memoizedState=n)}function HB(t,e){var n=mt;mt=n!==0&&4>n?n:4,t(!0);var r=Y_.transition;Y_.transition={};try{t(!1),e()}finally{mt=n,Y_.transition=r}}function XP(){return ti().memoizedState}function GB(t,e,n){var r=fo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},JP(t))ZP(e,n);else if(n=AP(t,e,n,r),n!==null){var i=rr();yi(n,t,r,i),eD(n,e,r)}}function qB(t,e,n){var r=fo(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(JP(t))ZP(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,_i(a,o)){var l=e.interleaved;l===null?(i.next=i,dS(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=AP(t,e,i,r),n!==null&&(i=rr(),yi(n,t,r,i),eD(n,e,r))}}function JP(t){var e=t.alternate;return t===Vt||e!==null&&e===Vt}function ZP(t,e){Nd=Hm=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function eD(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Xb(t,n)}}var Gm={readContext:ei,useCallback:Vn,useContext:Vn,useEffect:Vn,useImperativeHandle:Vn,useInsertionEffect:Vn,useLayoutEffect:Vn,useMemo:Vn,useReducer:Vn,useRef:Vn,useState:Vn,useDebugValue:Vn,useDeferredValue:Vn,useTransition:Vn,useMutableSource:Vn,useSyncExternalStore:Vn,useId:Vn,unstable_isNewReconciler:!1},KB={readContext:ei,useCallback:function(t,e){return Ti().memoizedState=[t,e===void 0?null:e],t},useContext:ei,useEffect:QI,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,lm(4194308,4,GP.bind(null,e,t),n)},useLayoutEffect:function(t,e){return lm(4194308,4,t,e)},useInsertionEffect:function(t,e){return lm(4,2,t,e)},useMemo:function(t,e){var n=Ti();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ti();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=GB.bind(null,Vt,t),[r.memoizedState,t]},useRef:function(t){var e=Ti();return t={current:t},e.memoizedState=t},useState:KI,useDebugValue:wS,useDeferredValue:function(t){return Ti().memoizedState=t},useTransition:function(){var t=KI(!1),e=t[0];return t=HB.bind(null,t[1]),Ti().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Vt,i=Ti();if(Dt){if(n===void 0)throw Error(ae(407));n=n()}else{if(n=e(),_n===null)throw Error(ae(349));za&30||FP(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,QI(jP.bind(null,r,s,t),[t]),r.flags|=2048,vh(9,UP.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Ti(),e=_n.identifierPrefix;if(Dt){var n=as,r=os;n=(r&~(1<<32-gi(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=gh++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=WB++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},QB={readContext:ei,useCallback:KP,useContext:ei,useEffect:_S,useImperativeHandle:qP,useInsertionEffect:WP,useLayoutEffect:HP,useMemo:QP,useReducer:X_,useRef:zP,useState:function(){return X_(yh)},useDebugValue:wS,useDeferredValue:function(t){var e=ti();return YP(e,rn.memoizedState,t)},useTransition:function(){var t=X_(yh)[0],e=ti().memoizedState;return[t,e]},useMutableSource:MP,useSyncExternalStore:$P,useId:XP,unstable_isNewReconciler:!1},YB={readContext:ei,useCallback:KP,useContext:ei,useEffect:_S,useImperativeHandle:qP,useInsertionEffect:WP,useLayoutEffect:HP,useMemo:QP,useReducer:J_,useRef:zP,useState:function(){return J_(yh)},useDebugValue:wS,useDeferredValue:function(t){var e=ti();return rn===null?e.memoizedState=t:YP(e,rn.memoizedState,t)},useTransition:function(){var t=J_(yh)[0],e=ti().memoizedState;return[t,e]},useMutableSource:MP,useSyncExternalStore:$P,useId:XP,unstable_isNewReconciler:!1};function Nc(t,e){try{var n="",r=e;do n+=xV(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Z_(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Fw(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var XB=typeof WeakMap=="function"?WeakMap:Map;function tD(t,e,n){n=hs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Km||(Km=!0,Kw=r),Fw(t,e)},n}function nD(t,e,n){n=hs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Fw(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Fw(t,e),typeof r!="function"&&(ho===null?ho=new Set([this]):ho.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function YI(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new XB;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=d4.bind(null,t,e,n),e.then(t,t))}function XI(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function JI(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=hs(-1,1),e.tag=2,uo(n,e,1))),n.lanes|=1),t)}var JB=ks.ReactCurrentOwner,fr=!1;function Jn(t,e,n,r){e.child=t===null?OP(e,null,n,r):Ac(e,t.child,n,r)}function ZI(t,e,n,r,i){n=n.render;var s=e.ref;return pc(e,i),r=yS(t,e,n,r,s,i),n=vS(),t!==null&&!fr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ss(t,e,i)):(Dt&&n&&sS(e),e.flags|=1,Jn(t,e,r,i),e.child)}function eC(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!kS(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,rD(t,e,s,r,i)):(t=hm(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:uh,n(o,r)&&t.ref===e.ref)return Ss(t,e,i)}return e.flags|=1,t=po(s,r),t.ref=e.ref,t.return=e,e.child=t}function rD(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(uh(s,r)&&t.ref===e.ref)if(fr=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(fr=!0);else return e.lanes=t.lanes,Ss(t,e,i)}return Uw(t,e,n,r,i)}function iD(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Et(rc,Cr),Cr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Et(rc,Cr),Cr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Et(rc,Cr),Cr|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Et(rc,Cr),Cr|=r;return Jn(t,e,i,n),e.child}function sD(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Uw(t,e,n,r,i){var s=_r(n)?Va:Qn.current;return s=Cc(e,s),pc(e,i),n=yS(t,e,n,r,s,i),r=vS(),t!==null&&!fr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ss(t,e,i)):(Dt&&r&&sS(e),e.flags|=1,Jn(t,e,n,i),e.child)}function tC(t,e,n,r,i){if(_r(n)){var s=!0;Fm(e)}else s=!1;if(pc(e,i),e.stateNode===null)cm(t,e),PP(e,n,r),$w(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=ei(c):(c=_r(n)?Va:Qn.current,c=Cc(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&GI(e,o,r,c),Gs=!1;var h=e.memoizedState;o.state=h,zm(e,r,o,i),l=e.memoizedState,a!==r||h!==l||vr.current||Gs?(typeof u=="function"&&(Mw(e,n,u,r),l=e.memoizedState),(a=Gs||HI(e,n,a,r,h,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,RP(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:li(e.type,a),o.props=c,d=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=ei(l):(l=_r(n)?Va:Qn.current,l=Cc(e,l));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&GI(e,o,r,l),Gs=!1,h=e.memoizedState,o.state=h,zm(e,r,o,i);var p=e.memoizedState;a!==d||h!==p||vr.current||Gs?(typeof f=="function"&&(Mw(e,n,f,r),p=e.memoizedState),(c=Gs||HI(e,n,c,r,h,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return jw(t,e,n,r,s,i)}function jw(t,e,n,r,i,s){sD(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&jI(e,n,!1),Ss(t,e,s);r=e.stateNode,JB.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ac(e,t.child,null,s),e.child=Ac(e,null,a,s)):Jn(t,e,a,s),e.memoizedState=r.state,i&&jI(e,n,!0),e.child}function oD(t){var e=t.stateNode;e.pendingContext?UI(t,e.pendingContext,e.pendingContext!==e.context):e.context&&UI(t,e.context,!1),fS(t,e.containerInfo)}function nC(t,e,n,r,i){return kc(),aS(i),e.flags|=256,Jn(t,e,n,r),e.child}var Vw={dehydrated:null,treeContext:null,retryLane:0};function Bw(t){return{baseLanes:t,cachePool:null,transitions:null}}function aD(t,e,n){var r=e.pendingProps,i=Ut.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Et(Ut,i&1),t===null)return Ow(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=fy(o,r,0,null),t=Na(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Bw(n),e.memoizedState=Vw,t):bS(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return ZB(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=po(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=po(a,s):(s=Na(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Bw(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Vw,r}return s=t.child,t=s.sibling,r=po(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function bS(t,e){return e=fy({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Cp(t,e,n,r){return r!==null&&aS(r),Ac(e,t.child,null,n),t=bS(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ZB(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Z_(Error(ae(422))),Cp(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=fy({mode:"visible",children:r.children},i,0,null),s=Na(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ac(e,t.child,null,o),e.child.memoizedState=Bw(o),e.memoizedState=Vw,s);if(!(e.mode&1))return Cp(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(ae(419)),r=Z_(s,r,void 0),Cp(t,e,o,r)}if(a=(o&t.childLanes)!==0,fr||a){if(r=_n,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,bs(t,i),yi(r,t,i,-1))}return CS(),r=Z_(Error(ae(421))),Cp(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=h4.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Rr=co(i.nextSibling),Dr=e,Dt=!0,di=null,t!==null&&(Hr[Gr++]=os,Hr[Gr++]=as,Hr[Gr++]=Ba,os=t.id,as=t.overflow,Ba=e),e=bS(e,r.children),e.flags|=4096,e)}function rC(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Lw(t.return,e,n)}function e0(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function lD(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Jn(t,e,r.children,n),r=Ut.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&rC(t,n,e);else if(t.tag===19)rC(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Et(Ut,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Wm(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),e0(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Wm(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}e0(e,!0,n,null,s);break;case"together":e0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function cm(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ss(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Wa|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ae(153));if(e.child!==null){for(t=e.child,n=po(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=po(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function e4(t,e,n){switch(e.tag){case 3:oD(e),kc();break;case 5:LP(e);break;case 1:_r(e.type)&&Fm(e);break;case 4:fS(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Et(Vm,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Et(Ut,Ut.current&1),e.flags|=128,null):n&e.child.childLanes?aD(t,e,n):(Et(Ut,Ut.current&1),t=Ss(t,e,n),t!==null?t.sibling:null);Et(Ut,Ut.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return lD(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Et(Ut,Ut.current),r)break;return null;case 22:case 23:return e.lanes=0,iD(t,e,n)}return Ss(t,e,n)}var cD,zw,uD,dD;cD=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};zw=function(){};uD=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,wa(Ui.current);var s=null;switch(n){case"input":i=dw(t,i),r=dw(t,r),s=[];break;case"select":i=Bt({},i,{value:void 0}),r=Bt({},r,{value:void 0}),s=[];break;case"textarea":i=pw(t,i),r=pw(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Mm)}gw(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(rh.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(rh.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Tt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};dD=function(t,e,n,r){n!==r&&(e.flags|=4)};function Bu(t,e){if(!Dt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Bn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function t4(t,e,n){var r=e.pendingProps;switch(oS(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bn(e),null;case 1:return _r(e.type)&&$m(),Bn(e),null;case 3:return r=e.stateNode,Rc(),kt(vr),kt(Qn),mS(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Tp(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,di!==null&&(Xw(di),di=null))),zw(t,e),Bn(e),null;case 5:pS(e);var i=wa(mh.current);if(n=e.type,t!==null&&e.stateNode!=null)uD(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ae(166));return Bn(e),null}if(t=wa(Ui.current),Tp(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Ci]=e,r[fh]=s,t=(e.mode&1)!==0,n){case"dialog":Tt("cancel",r),Tt("close",r);break;case"iframe":case"object":case"embed":Tt("load",r);break;case"video":case"audio":for(i=0;i<vd.length;i++)Tt(vd[i],r);break;case"source":Tt("error",r);break;case"img":case"image":case"link":Tt("error",r),Tt("load",r);break;case"details":Tt("toggle",r);break;case"input":hI(r,s),Tt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Tt("invalid",r);break;case"textarea":pI(r,s),Tt("invalid",r)}gw(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&xp(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&xp(r.textContent,a,t),i=["children",""+a]):rh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Tt("scroll",r)}switch(n){case"input":gp(r),fI(r,s,!0);break;case"textarea":gp(r),mI(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Mm)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=FN(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Ci]=e,t[fh]=r,cD(t,e,!1,!1),e.stateNode=t;e:{switch(o=yw(n,r),n){case"dialog":Tt("cancel",t),Tt("close",t),i=r;break;case"iframe":case"object":case"embed":Tt("load",t),i=r;break;case"video":case"audio":for(i=0;i<vd.length;i++)Tt(vd[i],t);i=r;break;case"source":Tt("error",t),i=r;break;case"img":case"image":case"link":Tt("error",t),Tt("load",t),i=r;break;case"details":Tt("toggle",t),i=r;break;case"input":hI(t,r),i=dw(t,r),Tt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Bt({},r,{value:void 0}),Tt("invalid",t);break;case"textarea":pI(t,r),i=pw(t,r),Tt("invalid",t);break;default:i=r}gw(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?VN(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&UN(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ih(t,l):typeof l=="number"&&ih(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(rh.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Tt("scroll",t):l!=null&&Hb(t,s,l,o))}switch(n){case"input":gp(t),fI(t,r,!1);break;case"textarea":gp(t),mI(t);break;case"option":r.value!=null&&t.setAttribute("value",""+So(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?uc(t,!!r.multiple,s,!1):r.defaultValue!=null&&uc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Mm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Bn(e),null;case 6:if(t&&e.stateNode!=null)dD(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ae(166));if(n=wa(mh.current),wa(Ui.current),Tp(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ci]=e,(s=r.nodeValue!==n)&&(t=Dr,t!==null))switch(t.tag){case 3:xp(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&xp(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ci]=e,e.stateNode=r}return Bn(e),null;case 13:if(kt(Ut),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Dt&&Rr!==null&&e.mode&1&&!(e.flags&128))kP(),kc(),e.flags|=98560,s=!1;else if(s=Tp(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(ae(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ae(317));s[Ci]=e}else kc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Bn(e),s=!1}else di!==null&&(Xw(di),di=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ut.current&1?an===0&&(an=3):CS())),e.updateQueue!==null&&(e.flags|=4),Bn(e),null);case 4:return Rc(),zw(t,e),t===null&&dh(e.stateNode.containerInfo),Bn(e),null;case 10:return uS(e.type._context),Bn(e),null;case 17:return _r(e.type)&&$m(),Bn(e),null;case 19:if(kt(Ut),s=e.memoizedState,s===null)return Bn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Bu(s,!1);else{if(an!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Wm(t),o!==null){for(e.flags|=128,Bu(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Et(Ut,Ut.current&1|2),e.child}t=t.sibling}s.tail!==null&&Qt()>Pc&&(e.flags|=128,r=!0,Bu(s,!1),e.lanes=4194304)}else{if(!r)if(t=Wm(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Bu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Dt)return Bn(e),null}else 2*Qt()-s.renderingStartTime>Pc&&n!==1073741824&&(e.flags|=128,r=!0,Bu(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Qt(),e.sibling=null,n=Ut.current,Et(Ut,r?n&1|2:n&1),e):(Bn(e),null);case 22:case 23:return IS(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Cr&1073741824&&(Bn(e),e.subtreeFlags&6&&(e.flags|=8192)):Bn(e),null;case 24:return null;case 25:return null}throw Error(ae(156,e.tag))}function n4(t,e){switch(oS(e),e.tag){case 1:return _r(e.type)&&$m(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Rc(),kt(vr),kt(Qn),mS(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return pS(e),null;case 13:if(kt(Ut),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ae(340));kc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return kt(Ut),null;case 4:return Rc(),null;case 10:return uS(e.type._context),null;case 22:case 23:return IS(),null;case 24:return null;default:return null}}var kp=!1,zn=!1,r4=typeof WeakSet=="function"?WeakSet:Set,xe=null;function nc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ht(t,e,r)}else n.current=null}function Ww(t,e,n){try{n()}catch(r){Ht(t,e,r)}}var iC=!1;function i4(t,e){if(Cw=Dm,t=mP(),iS(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++c===i&&(a=o),h===s&&++u===r&&(l=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(kw={focusedElem:t,selectionRange:n},Dm=!1,xe=e;xe!==null;)if(e=xe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,xe=t;else for(;xe!==null;){e=xe;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var y=p.memoizedProps,w=p.memoizedState,m=e.stateNode,g=m.getSnapshotBeforeUpdate(e.elementType===e.type?y:li(e.type,y),w);m.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(b){Ht(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,xe=t;break}xe=e.return}return p=iC,iC=!1,p}function Pd(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Ww(e,n,s)}i=i.next}while(i!==r)}}function dy(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Hw(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function hD(t){var e=t.alternate;e!==null&&(t.alternate=null,hD(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ci],delete e[fh],delete e[Nw],delete e[jB],delete e[VB])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function fD(t){return t.tag===5||t.tag===3||t.tag===4}function sC(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||fD(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Gw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Mm));else if(r!==4&&(t=t.child,t!==null))for(Gw(t,e,n),t=t.sibling;t!==null;)Gw(t,e,n),t=t.sibling}function qw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(qw(t,e,n),t=t.sibling;t!==null;)qw(t,e,n),t=t.sibling}var Rn=null,ci=!1;function js(t,e,n){for(n=n.child;n!==null;)pD(t,e,n),n=n.sibling}function pD(t,e,n){if(Fi&&typeof Fi.onCommitFiberUnmount=="function")try{Fi.onCommitFiberUnmount(ry,n)}catch{}switch(n.tag){case 5:zn||nc(n,e);case 6:var r=Rn,i=ci;Rn=null,js(t,e,n),Rn=r,ci=i,Rn!==null&&(ci?(t=Rn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Rn.removeChild(n.stateNode));break;case 18:Rn!==null&&(ci?(t=Rn,n=n.stateNode,t.nodeType===8?q_(t.parentNode,n):t.nodeType===1&&q_(t,n),lh(t)):q_(Rn,n.stateNode));break;case 4:r=Rn,i=ci,Rn=n.stateNode.containerInfo,ci=!0,js(t,e,n),Rn=r,ci=i;break;case 0:case 11:case 14:case 15:if(!zn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Ww(n,e,o),i=i.next}while(i!==r)}js(t,e,n);break;case 1:if(!zn&&(nc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ht(n,e,a)}js(t,e,n);break;case 21:js(t,e,n);break;case 22:n.mode&1?(zn=(r=zn)||n.memoizedState!==null,js(t,e,n),zn=r):js(t,e,n);break;default:js(t,e,n)}}function oC(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new r4),e.forEach(function(r){var i=f4.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ii(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Rn=a.stateNode,ci=!1;break e;case 3:Rn=a.stateNode.containerInfo,ci=!0;break e;case 4:Rn=a.stateNode.containerInfo,ci=!0;break e}a=a.return}if(Rn===null)throw Error(ae(160));pD(s,o,i),Rn=null,ci=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Ht(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)mD(e,t),e=e.sibling}function mD(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ii(e,t),Ei(t),r&4){try{Pd(3,t,t.return),dy(3,t)}catch(y){Ht(t,t.return,y)}try{Pd(5,t,t.return)}catch(y){Ht(t,t.return,y)}}break;case 1:ii(e,t),Ei(t),r&512&&n!==null&&nc(n,n.return);break;case 5:if(ii(e,t),Ei(t),r&512&&n!==null&&nc(n,n.return),t.flags&32){var i=t.stateNode;try{ih(i,"")}catch(y){Ht(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&MN(i,s),yw(a,o);var c=yw(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?VN(i,d):u==="dangerouslySetInnerHTML"?UN(i,d):u==="children"?ih(i,d):Hb(i,u,d,c)}switch(a){case"input":hw(i,s);break;case"textarea":$N(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?uc(i,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?uc(i,!!s.multiple,s.defaultValue,!0):uc(i,!!s.multiple,s.multiple?[]:"",!1))}i[fh]=s}catch(y){Ht(t,t.return,y)}}break;case 6:if(ii(e,t),Ei(t),r&4){if(t.stateNode===null)throw Error(ae(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(y){Ht(t,t.return,y)}}break;case 3:if(ii(e,t),Ei(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{lh(e.containerInfo)}catch(y){Ht(t,t.return,y)}break;case 4:ii(e,t),Ei(t);break;case 13:ii(e,t),Ei(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(xS=Qt())),r&4&&oC(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(zn=(c=zn)||u,ii(e,t),zn=c):ii(e,t),Ei(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(xe=t,u=t.child;u!==null;){for(d=xe=u;xe!==null;){switch(h=xe,f=h.child,h.tag){case 0:case 11:case 14:case 15:Pd(4,h,h.return);break;case 1:nc(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(y){Ht(r,n,y)}}break;case 5:nc(h,h.return);break;case 22:if(h.memoizedState!==null){lC(d);continue}}f!==null?(f.return=h,xe=f):lC(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=jN("display",o))}catch(y){Ht(t,t.return,y)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(y){Ht(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ii(e,t),Ei(t),r&4&&oC(t);break;case 21:break;default:ii(e,t),Ei(t)}}function Ei(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(fD(n)){var r=n;break e}n=n.return}throw Error(ae(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ih(i,""),r.flags&=-33);var s=sC(t);qw(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=sC(t);Gw(t,a,o);break;default:throw Error(ae(161))}}catch(l){Ht(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function s4(t,e,n){xe=t,gD(t)}function gD(t,e,n){for(var r=(t.mode&1)!==0;xe!==null;){var i=xe,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||kp;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||zn;a=kp;var c=zn;if(kp=o,(zn=l)&&!c)for(xe=i;xe!==null;)o=xe,l=o.child,o.tag===22&&o.memoizedState!==null?cC(i):l!==null?(l.return=o,xe=l):cC(i);for(;s!==null;)xe=s,gD(s),s=s.sibling;xe=i,kp=a,zn=c}aC(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,xe=s):aC(t)}}function aC(t){for(;xe!==null;){var e=xe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:zn||dy(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!zn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:li(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&WI(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}WI(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&lh(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}zn||e.flags&512&&Hw(e)}catch(h){Ht(e,e.return,h)}}if(e===t){xe=null;break}if(n=e.sibling,n!==null){n.return=e.return,xe=n;break}xe=e.return}}function lC(t){for(;xe!==null;){var e=xe;if(e===t){xe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,xe=n;break}xe=e.return}}function cC(t){for(;xe!==null;){var e=xe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{dy(4,e)}catch(l){Ht(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ht(e,i,l)}}var s=e.return;try{Hw(e)}catch(l){Ht(e,s,l)}break;case 5:var o=e.return;try{Hw(e)}catch(l){Ht(e,o,l)}}}catch(l){Ht(e,e.return,l)}if(e===t){xe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,xe=a;break}xe=e.return}}var o4=Math.ceil,qm=ks.ReactCurrentDispatcher,SS=ks.ReactCurrentOwner,Zr=ks.ReactCurrentBatchConfig,lt=0,_n=null,tn=null,Pn=0,Cr=0,rc=Wo(0),an=0,_h=null,Wa=0,hy=0,ES=0,Dd=null,ur=null,xS=0,Pc=1/0,rs=null,Km=!1,Kw=null,ho=null,Ap=!1,Zs=null,Qm=0,Od=0,Qw=null,um=-1,dm=0;function rr(){return lt&6?Qt():um!==-1?um:um=Qt()}function fo(t){return t.mode&1?lt&2&&Pn!==0?Pn&-Pn:zB.transition!==null?(dm===0&&(dm=ZN()),dm):(t=mt,t!==0||(t=window.event,t=t===void 0?16:oP(t.type)),t):1}function yi(t,e,n,r){if(50<Od)throw Od=0,Qw=null,Error(ae(185));hf(t,n,r),(!(lt&2)||t!==_n)&&(t===_n&&(!(lt&2)&&(hy|=n),an===4&&Qs(t,Pn)),wr(t,r),n===1&&lt===0&&!(e.mode&1)&&(Pc=Qt()+500,ly&&Ho()))}function wr(t,e){var n=t.callbackNode;zV(t,e);var r=Pm(t,t===_n?Pn:0);if(r===0)n!==null&&vI(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&vI(n),e===1)t.tag===0?BB(uC.bind(null,t)):TP(uC.bind(null,t)),FB(function(){!(lt&6)&&Ho()}),n=null;else{switch(eP(r)){case 1:n=Yb;break;case 4:n=XN;break;case 16:n=Nm;break;case 536870912:n=JN;break;default:n=Nm}n=xD(n,yD.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function yD(t,e){if(um=-1,dm=0,lt&6)throw Error(ae(327));var n=t.callbackNode;if(mc()&&t.callbackNode!==n)return null;var r=Pm(t,t===_n?Pn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ym(t,r);else{e=r;var i=lt;lt|=2;var s=_D();(_n!==t||Pn!==e)&&(rs=null,Pc=Qt()+500,Ra(t,e));do try{c4();break}catch(a){vD(t,a)}while(1);cS(),qm.current=s,lt=i,tn!==null?e=0:(_n=null,Pn=0,e=an)}if(e!==0){if(e===2&&(i=Sw(t),i!==0&&(r=i,e=Yw(t,i))),e===1)throw n=_h,Ra(t,0),Qs(t,r),wr(t,Qt()),n;if(e===6)Qs(t,r);else{if(i=t.current.alternate,!(r&30)&&!a4(i)&&(e=Ym(t,r),e===2&&(s=Sw(t),s!==0&&(r=s,e=Yw(t,s))),e===1))throw n=_h,Ra(t,0),Qs(t,r),wr(t,Qt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ae(345));case 2:aa(t,ur,rs);break;case 3:if(Qs(t,r),(r&130023424)===r&&(e=xS+500-Qt(),10<e)){if(Pm(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){rr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Rw(aa.bind(null,t,ur,rs),e);break}aa(t,ur,rs);break;case 4:if(Qs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-gi(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Qt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*o4(r/1960))-r,10<r){t.timeoutHandle=Rw(aa.bind(null,t,ur,rs),r);break}aa(t,ur,rs);break;case 5:aa(t,ur,rs);break;default:throw Error(ae(329))}}}return wr(t,Qt()),t.callbackNode===n?yD.bind(null,t):null}function Yw(t,e){var n=Dd;return t.current.memoizedState.isDehydrated&&(Ra(t,e).flags|=256),t=Ym(t,e),t!==2&&(e=ur,ur=n,e!==null&&Xw(e)),t}function Xw(t){ur===null?ur=t:ur.push.apply(ur,t)}function a4(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!_i(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Qs(t,e){for(e&=~ES,e&=~hy,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-gi(e),r=1<<n;t[n]=-1,e&=~r}}function uC(t){if(lt&6)throw Error(ae(327));mc();var e=Pm(t,0);if(!(e&1))return wr(t,Qt()),null;var n=Ym(t,e);if(t.tag!==0&&n===2){var r=Sw(t);r!==0&&(e=r,n=Yw(t,r))}if(n===1)throw n=_h,Ra(t,0),Qs(t,e),wr(t,Qt()),n;if(n===6)throw Error(ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,aa(t,ur,rs),wr(t,Qt()),null}function TS(t,e){var n=lt;lt|=1;try{return t(e)}finally{lt=n,lt===0&&(Pc=Qt()+500,ly&&Ho())}}function Ha(t){Zs!==null&&Zs.tag===0&&!(lt&6)&&mc();var e=lt;lt|=1;var n=Zr.transition,r=mt;try{if(Zr.transition=null,mt=1,t)return t()}finally{mt=r,Zr.transition=n,lt=e,!(lt&6)&&Ho()}}function IS(){Cr=rc.current,kt(rc)}function Ra(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,$B(n)),tn!==null)for(n=tn.return;n!==null;){var r=n;switch(oS(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&$m();break;case 3:Rc(),kt(vr),kt(Qn),mS();break;case 5:pS(r);break;case 4:Rc();break;case 13:kt(Ut);break;case 19:kt(Ut);break;case 10:uS(r.type._context);break;case 22:case 23:IS()}n=n.return}if(_n=t,tn=t=po(t.current,null),Pn=Cr=e,an=0,_h=null,ES=hy=Wa=0,ur=Dd=null,_a!==null){for(e=0;e<_a.length;e++)if(n=_a[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}_a=null}return t}function vD(t,e){do{var n=tn;try{if(cS(),am.current=Gm,Hm){for(var r=Vt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Hm=!1}if(za=0,fn=rn=Vt=null,Nd=!1,gh=0,SS.current=null,n===null||n.return===null){an=1,_h=e,tn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Pn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=XI(o);if(f!==null){f.flags&=-257,JI(f,o,a,s,e),f.mode&1&&YI(s,c,e),e=f,l=c;var p=e.updateQueue;if(p===null){var y=new Set;y.add(l),e.updateQueue=y}else p.add(l);break e}else{if(!(e&1)){YI(s,c,e),CS();break e}l=Error(ae(426))}}else if(Dt&&a.mode&1){var w=XI(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),JI(w,o,a,s,e),aS(Nc(l,a));break e}}s=l=Nc(l,a),an!==4&&(an=2),Dd===null?Dd=[s]:Dd.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=tD(s,l,e);zI(s,m);break e;case 1:a=l;var g=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(ho===null||!ho.has(_)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=nD(s,a,e);zI(s,b);break e}}s=s.return}while(s!==null)}bD(n)}catch(x){e=x,tn===n&&n!==null&&(tn=n=n.return);continue}break}while(1)}function _D(){var t=qm.current;return qm.current=Gm,t===null?Gm:t}function CS(){(an===0||an===3||an===2)&&(an=4),_n===null||!(Wa&268435455)&&!(hy&268435455)||Qs(_n,Pn)}function Ym(t,e){var n=lt;lt|=2;var r=_D();(_n!==t||Pn!==e)&&(rs=null,Ra(t,e));do try{l4();break}catch(i){vD(t,i)}while(1);if(cS(),lt=n,qm.current=r,tn!==null)throw Error(ae(261));return _n=null,Pn=0,an}function l4(){for(;tn!==null;)wD(tn)}function c4(){for(;tn!==null&&!OV();)wD(tn)}function wD(t){var e=ED(t.alternate,t,Cr);t.memoizedProps=t.pendingProps,e===null?bD(t):tn=e,SS.current=null}function bD(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=n4(n,e),n!==null){n.flags&=32767,tn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{an=6,tn=null;return}}else if(n=t4(n,e,Cr),n!==null){tn=n;return}if(e=e.sibling,e!==null){tn=e;return}tn=e=t}while(e!==null);an===0&&(an=5)}function aa(t,e,n){var r=mt,i=Zr.transition;try{Zr.transition=null,mt=1,u4(t,e,n,r)}finally{Zr.transition=i,mt=r}return null}function u4(t,e,n,r){do mc();while(Zs!==null);if(lt&6)throw Error(ae(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ae(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(WV(t,s),t===_n&&(tn=_n=null,Pn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ap||(Ap=!0,xD(Nm,function(){return mc(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Zr.transition,Zr.transition=null;var o=mt;mt=1;var a=lt;lt|=4,SS.current=null,i4(t,n),mD(n,t),RB(kw),Dm=!!Cw,kw=Cw=null,t.current=n,s4(n),LV(),lt=a,mt=o,Zr.transition=s}else t.current=n;if(Ap&&(Ap=!1,Zs=t,Qm=i),s=t.pendingLanes,s===0&&(ho=null),FV(n.stateNode),wr(t,Qt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Km)throw Km=!1,t=Kw,Kw=null,t;return Qm&1&&t.tag!==0&&mc(),s=t.pendingLanes,s&1?t===Qw?Od++:(Od=0,Qw=t):Od=0,Ho(),null}function mc(){if(Zs!==null){var t=eP(Qm),e=Zr.transition,n=mt;try{if(Zr.transition=null,mt=16>t?16:t,Zs===null)var r=!1;else{if(t=Zs,Zs=null,Qm=0,lt&6)throw Error(ae(331));var i=lt;for(lt|=4,xe=t.current;xe!==null;){var s=xe,o=s.child;if(xe.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(xe=c;xe!==null;){var u=xe;switch(u.tag){case 0:case 11:case 15:Pd(8,u,s)}var d=u.child;if(d!==null)d.return=u,xe=d;else for(;xe!==null;){u=xe;var h=u.sibling,f=u.return;if(hD(u),u===c){xe=null;break}if(h!==null){h.return=f,xe=h;break}xe=f}}}var p=s.alternate;if(p!==null){var y=p.child;if(y!==null){p.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}xe=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,xe=o;else e:for(;xe!==null;){if(s=xe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Pd(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,xe=m;break e}xe=s.return}}var g=t.current;for(xe=g;xe!==null;){o=xe;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,xe=_;else e:for(o=g;xe!==null;){if(a=xe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:dy(9,a)}}catch(x){Ht(a,a.return,x)}if(a===o){xe=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,xe=b;break e}xe=a.return}}if(lt=i,Ho(),Fi&&typeof Fi.onPostCommitFiberRoot=="function")try{Fi.onPostCommitFiberRoot(ry,t)}catch{}r=!0}return r}finally{mt=n,Zr.transition=e}}return!1}function dC(t,e,n){e=Nc(n,e),e=tD(t,e,1),t=uo(t,e,1),e=rr(),t!==null&&(hf(t,1,e),wr(t,e))}function Ht(t,e,n){if(t.tag===3)dC(t,t,n);else for(;e!==null;){if(e.tag===3){dC(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ho===null||!ho.has(r))){t=Nc(n,t),t=nD(e,t,1),e=uo(e,t,1),t=rr(),e!==null&&(hf(e,1,t),wr(e,t));break}}e=e.return}}function d4(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=rr(),t.pingedLanes|=t.suspendedLanes&n,_n===t&&(Pn&n)===n&&(an===4||an===3&&(Pn&130023424)===Pn&&500>Qt()-xS?Ra(t,0):ES|=n),wr(t,e)}function SD(t,e){e===0&&(t.mode&1?(e=_p,_p<<=1,!(_p&130023424)&&(_p=4194304)):e=1);var n=rr();t=bs(t,e),t!==null&&(hf(t,e,n),wr(t,n))}function h4(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),SD(t,n)}function f4(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ae(314))}r!==null&&r.delete(e),SD(t,n)}var ED;ED=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||vr.current)fr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return fr=!1,e4(t,e,n);fr=!!(t.flags&131072)}else fr=!1,Dt&&e.flags&1048576&&IP(e,jm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;cm(t,e),t=e.pendingProps;var i=Cc(e,Qn.current);pc(e,n),i=yS(null,e,r,t,i,n);var s=vS();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,_r(r)?(s=!0,Fm(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,hS(e),i.updater=cy,e.stateNode=i,i._reactInternals=e,$w(e,r,t,n),e=jw(null,e,r,!0,s,n)):(e.tag=0,Dt&&s&&sS(e),Jn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(cm(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=m4(r),t=li(r,t),i){case 0:e=Uw(null,e,r,t,n);break e;case 1:e=tC(null,e,r,t,n);break e;case 11:e=ZI(null,e,r,t,n);break e;case 14:e=eC(null,e,r,li(r.type,t),n);break e}throw Error(ae(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:li(r,i),Uw(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:li(r,i),tC(t,e,r,i,n);case 3:e:{if(oD(e),t===null)throw Error(ae(387));r=e.pendingProps,s=e.memoizedState,i=s.element,RP(t,e),zm(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Nc(Error(ae(423)),e),e=nC(t,e,r,n,i);break e}else if(r!==i){i=Nc(Error(ae(424)),e),e=nC(t,e,r,n,i);break e}else for(Rr=co(e.stateNode.containerInfo.firstChild),Dr=e,Dt=!0,di=null,n=OP(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(kc(),r===i){e=Ss(t,e,n);break e}Jn(t,e,r,n)}e=e.child}return e;case 5:return LP(e),t===null&&Ow(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Aw(r,i)?o=null:s!==null&&Aw(r,s)&&(e.flags|=32),sD(t,e),Jn(t,e,o,n),e.child;case 6:return t===null&&Ow(e),null;case 13:return aD(t,e,n);case 4:return fS(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ac(e,null,r,n):Jn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:li(r,i),ZI(t,e,r,i,n);case 7:return Jn(t,e,e.pendingProps,n),e.child;case 8:return Jn(t,e,e.pendingProps.children,n),e.child;case 12:return Jn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Et(Vm,r._currentValue),r._currentValue=o,s!==null)if(_i(s.value,o)){if(s.children===i.children&&!vr.current){e=Ss(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=hs(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Lw(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ae(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Lw(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Jn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,pc(e,n),i=ei(i),r=r(i),e.flags|=1,Jn(t,e,r,n),e.child;case 14:return r=e.type,i=li(r,e.pendingProps),i=li(r.type,i),eC(t,e,r,i,n);case 15:return rD(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:li(r,i),cm(t,e),e.tag=1,_r(r)?(t=!0,Fm(e)):t=!1,pc(e,n),PP(e,r,i),$w(e,r,i,n),jw(null,e,r,!0,t,n);case 19:return lD(t,e,n);case 22:return iD(t,e,n)}throw Error(ae(156,e.tag))};function xD(t,e){return YN(t,e)}function p4(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kr(t,e,n,r){return new p4(t,e,n,r)}function kS(t){return t=t.prototype,!(!t||!t.isReactComponent)}function m4(t){if(typeof t=="function")return kS(t)?1:0;if(t!=null){if(t=t.$$typeof,t===qb)return 11;if(t===Kb)return 14}return 2}function po(t,e){var n=t.alternate;return n===null?(n=Kr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function hm(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")kS(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ql:return Na(n.children,i,s,e);case Gb:o=8,i|=8;break;case aw:return t=Kr(12,n,e,i|2),t.elementType=aw,t.lanes=s,t;case lw:return t=Kr(13,n,e,i),t.elementType=lw,t.lanes=s,t;case cw:return t=Kr(19,n,e,i),t.elementType=cw,t.lanes=s,t;case DN:return fy(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case NN:o=10;break e;case PN:o=9;break e;case qb:o=11;break e;case Kb:o=14;break e;case Hs:o=16,r=null;break e}throw Error(ae(130,t==null?t:typeof t,""))}return e=Kr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Na(t,e,n,r){return t=Kr(7,t,r,e),t.lanes=n,t}function fy(t,e,n,r){return t=Kr(22,t,r,e),t.elementType=DN,t.lanes=n,t.stateNode={isHidden:!1},t}function t0(t,e,n){return t=Kr(6,t,null,e),t.lanes=n,t}function n0(t,e,n){return e=Kr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function g4(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=M_(0),this.expirationTimes=M_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=M_(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function AS(t,e,n,r,i,s,o,a,l){return t=new g4(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Kr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},hS(s),t}function y4(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function TD(t){if(!t)return Eo;t=t._reactInternals;e:{if(yl(t)!==t||t.tag!==1)throw Error(ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(_r(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ae(171))}if(t.tag===1){var n=t.type;if(_r(n))return xP(t,n,e)}return e}function ID(t,e,n,r,i,s,o,a,l){return t=AS(n,r,!0,t,i,s,o,a,l),t.context=TD(null),n=t.current,r=rr(),i=fo(n),s=hs(r,i),s.callback=e??null,uo(n,s,i),t.current.lanes=i,hf(t,i,r),wr(t,r),t}function py(t,e,n,r){var i=e.current,s=rr(),o=fo(i);return n=TD(n),e.context===null?e.context=n:e.pendingContext=n,e=hs(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=uo(i,e,o),t!==null&&(yi(t,i,o,s),om(t,i,o)),o}function Xm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function hC(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function RS(t,e){hC(t,e),(t=t.alternate)&&hC(t,e)}function v4(){return null}var CD=typeof reportError=="function"?reportError:function(t){console.error(t)};function NS(t){this._internalRoot=t}my.prototype.render=NS.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ae(409));py(t,e,null,null)};my.prototype.unmount=NS.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ha(function(){py(null,t,null,null)}),e[ws]=null}};function my(t){this._internalRoot=t}my.prototype.unstable_scheduleHydration=function(t){if(t){var e=rP();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ks.length&&e!==0&&e<Ks[n].priority;n++);Ks.splice(n,0,t),n===0&&sP(t)}};function PS(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function gy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function fC(){}function _4(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Xm(o);s.call(c)}}var o=ID(e,r,t,0,null,!1,!1,"",fC);return t._reactRootContainer=o,t[ws]=o.current,dh(t.nodeType===8?t.parentNode:t),Ha(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Xm(l);a.call(c)}}var l=AS(t,0,!1,null,null,!1,!1,"",fC);return t._reactRootContainer=l,t[ws]=l.current,dh(t.nodeType===8?t.parentNode:t),Ha(function(){py(e,l,n,r)}),l}function yy(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Xm(o);a.call(l)}}py(e,o,t,i)}else o=_4(n,e,t,i,r);return Xm(o)}tP=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=yd(e.pendingLanes);n!==0&&(Xb(e,n|1),wr(e,Qt()),!(lt&6)&&(Pc=Qt()+500,Ho()))}break;case 13:Ha(function(){var r=bs(t,1);if(r!==null){var i=rr();yi(r,t,1,i)}}),RS(t,1)}};Jb=function(t){if(t.tag===13){var e=bs(t,134217728);if(e!==null){var n=rr();yi(e,t,134217728,n)}RS(t,134217728)}};nP=function(t){if(t.tag===13){var e=fo(t),n=bs(t,e);if(n!==null){var r=rr();yi(n,t,e,r)}RS(t,e)}};rP=function(){return mt};iP=function(t,e){var n=mt;try{return mt=t,e()}finally{mt=n}};_w=function(t,e,n){switch(e){case"input":if(hw(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ay(r);if(!i)throw Error(ae(90));LN(r),hw(r,i)}}}break;case"textarea":$N(t,n);break;case"select":e=n.value,e!=null&&uc(t,!!n.multiple,e,!1)}};WN=TS;HN=Ha;var w4={usingClientEntryPoint:!1,Events:[pf,Xl,ay,BN,zN,TS]},zu={findFiberByHostInstance:va,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},b4={bundleType:zu.bundleType,version:zu.version,rendererPackageName:zu.rendererPackageName,rendererConfig:zu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ks.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=KN(t),t===null?null:t.stateNode},findFiberByHostInstance:zu.findFiberByHostInstance||v4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rp.isDisabled&&Rp.supportsFiber)try{ry=Rp.inject(b4),Fi=Rp}catch{}}Vr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=w4;Vr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!PS(e))throw Error(ae(200));return y4(t,e,null,n)};Vr.createRoot=function(t,e){if(!PS(t))throw Error(ae(299));var n=!1,r="",i=CD;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=AS(t,1,!1,null,null,n,!1,r,i),t[ws]=e.current,dh(t.nodeType===8?t.parentNode:t),new NS(e)};Vr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ae(188)):(t=Object.keys(t).join(","),Error(ae(268,t)));return t=KN(e),t=t===null?null:t.stateNode,t};Vr.flushSync=function(t){return Ha(t)};Vr.hydrate=function(t,e,n){if(!gy(e))throw Error(ae(200));return yy(null,t,e,!0,n)};Vr.hydrateRoot=function(t,e,n){if(!PS(t))throw Error(ae(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=CD;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=ID(e,null,t,1,n??null,i,!1,s,o),t[ws]=e.current,dh(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new my(e)};Vr.render=function(t,e,n){if(!gy(e))throw Error(ae(200));return yy(null,t,e,!1,n)};Vr.unmountComponentAtNode=function(t){if(!gy(t))throw Error(ae(40));return t._reactRootContainer?(Ha(function(){yy(null,null,t,!1,function(){t._reactRootContainer=null,t[ws]=null})}),!0):!1};Vr.unstable_batchedUpdates=TS;Vr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!gy(n))throw Error(ae(200));if(t==null||t._reactInternals===void 0)throw Error(ae(38));return yy(t,e,n,!1,r)};Vr.version="18.2.0-next-9e3b772b8-20220608";(function(t){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}e(),t.exports=Vr})(vV);const S4=Fb(Cm);var pC=Cm;iw.createRoot=pC.createRoot,iw.hydrateRoot=pC.hydrateRoot;/**
 * @remix-run/router v1.3.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dt(){return dt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dt.apply(this,arguments)}var en;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(en||(en={}));const mC="popstate";function E4(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return wh("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Es(i)}return T4(e,n,null,t)}function Qe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function x4(){return Math.random().toString(36).substr(2,8)}function gC(t,e){return{usr:t.state,key:t.key,idx:e}}function wh(t,e,n,r){return n===void 0&&(n=null),dt({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?As(e):e,{state:n,key:e&&e.key||r||x4()})}function Es(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function As(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function T4(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=en.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(dt({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=en.Pop;let w=u(),m=w==null?null:w-c;c=w,l&&l({action:a,location:y.location,delta:m})}function h(w,m){a=en.Push;let g=wh(y.location,w,m);n&&n(g,w),c=u()+1;let _=gC(g,c),b=y.createHref(g);try{o.pushState(_,"",b)}catch{i.location.assign(b)}s&&l&&l({action:a,location:y.location,delta:1})}function f(w,m){a=en.Replace;let g=wh(y.location,w,m);n&&n(g,w),c=u();let _=gC(g,c),b=y.createHref(g);o.replaceState(_,"",b),s&&l&&l({action:a,location:y.location,delta:0})}function p(w){let m=i.location.origin!=="null"?i.location.origin:i.location.href,g=typeof w=="string"?w:Es(w);return Qe(m,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,m)}let y={get action(){return a},get location(){return t(i,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(mC,d),l=w,()=>{i.removeEventListener(mC,d),l=null}},createHref(w){return e(i,w)},createURL:p,encodeLocation(w){let m=p(w);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:h,replace:f,go(w){return o.go(w)}};return y}var pn;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(pn||(pn={}));function I4(t){return t.index===!0}function kD(t,e,n){return e===void 0&&(e=[]),n===void 0&&(n=new Set),t.map((r,i)=>{let s=[...e,i],o=typeof r.id=="string"?r.id:s.join("-");return Qe(r.index!==!0||!r.children,"Cannot specify children on an index route"),Qe(!n.has(o),'Found a route id collision on id "'+o+`".  Route id's must be globally unique within Data Router usages`),n.add(o),I4(r)?dt({},r,{id:o}):dt({},r,{id:o,children:r.children?kD(r.children,s,n):void 0})})}function ic(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?As(e):e,i=gf(r.pathname||"/",n);if(i==null)return null;let s=AD(t);C4(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=M4(s[a],U4(i));return o}function AD(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Qe(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=fs([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(Qe(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),AD(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:O4(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of RD(s.path))i(s,o,l)}),e}function RD(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=RD(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function C4(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:L4(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const k4=/^:\w+$/,A4=3,R4=2,N4=1,P4=10,D4=-2,yC=t=>t==="*";function O4(t,e){let n=t.split("/"),r=n.length;return n.some(yC)&&(r+=D4),e&&(r+=R4),n.filter(i=>!yC(i)).reduce((i,s)=>i+(k4.test(s)?A4:s===""?N4:P4),r)}function L4(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function M4(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=i==="/"?e:e.slice(i.length)||"/",u=$4({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!u)return null;Object.assign(r,u.params);let d=a.route;s.push({params:r,pathname:fs([i,u.pathname]),pathnameBase:z4(fs([i,u.pathnameBase])),route:d}),u.pathnameBase!=="/"&&(i=fs([i,u.pathnameBase]))}return s}function $4(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=F4(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,d)=>{if(u==="*"){let h=a[d]||"";o=s.slice(0,s.length-h.length).replace(/(.)\/+$/,"$1")}return c[u]=j4(a[d]||"",u),c},{}),pathname:s,pathnameBase:o,pattern:t}}function F4(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),bh(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function U4(t){try{return decodeURI(t)}catch(e){return bh(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function j4(t,e){try{return decodeURIComponent(t)}catch(n){return bh(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function gf(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function bh(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function V4(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?As(t):t;return{pathname:n?n.startsWith("/")?n:B4(n,e):e,search:W4(r),hash:H4(i)}}function B4(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function r0(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function vy(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function DS(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=As(t):(i=dt({},t),Qe(!i.pathname||!i.pathname.includes("?"),r0("?","pathname","search",i)),Qe(!i.pathname||!i.pathname.includes("#"),r0("#","pathname","hash",i)),Qe(!i.search||!i.search.includes("#"),r0("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(r||o==null)a=n;else{let d=e.length-1;if(o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}a=d>=0?e[d]:"/"}let l=V4(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const fs=t=>t.join("/").replace(/\/\/+/g,"/"),z4=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),W4=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,H4=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class vC extends Error{}class G4{constructor(e,n){this.pendingKeysSet=new Set,this.subscribers=new Set,this.deferredKeys=[],Qe(e&&typeof e=="object"&&!Array.isArray(e),"defer() only accepts plain objects");let r;this.abortPromise=new Promise((s,o)=>r=o),this.controller=new AbortController;let i=()=>r(new vC("Deferred data aborted"));this.unlistenAbortSignal=()=>this.controller.signal.removeEventListener("abort",i),this.controller.signal.addEventListener("abort",i),this.data=Object.entries(e).reduce((s,o)=>{let[a,l]=o;return Object.assign(s,{[a]:this.trackPromise(a,l)})},{}),this.done&&this.unlistenAbortSignal(),this.init=n}trackPromise(e,n){if(!(n instanceof Promise))return n;this.deferredKeys.push(e),this.pendingKeysSet.add(e);let r=Promise.race([n,this.abortPromise]).then(i=>this.onSettle(r,e,null,i),i=>this.onSettle(r,e,i));return r.catch(()=>{}),Object.defineProperty(r,"_tracked",{get:()=>!0}),r}onSettle(e,n,r,i){return this.controller.signal.aborted&&r instanceof vC?(this.unlistenAbortSignal(),Object.defineProperty(e,"_error",{get:()=>r}),Promise.reject(r)):(this.pendingKeysSet.delete(n),this.done&&this.unlistenAbortSignal(),r?(Object.defineProperty(e,"_error",{get:()=>r}),this.emit(!1,n),Promise.reject(r)):(Object.defineProperty(e,"_data",{get:()=>i}),this.emit(!1,n),i))}emit(e,n){this.subscribers.forEach(r=>r(e,n))}subscribe(e){return this.subscribers.add(e),()=>this.subscribers.delete(e)}cancel(){this.controller.abort(),this.pendingKeysSet.forEach((e,n)=>this.pendingKeysSet.delete(n)),this.emit(!0)}async resolveData(e){let n=!1;if(!this.done){let r=()=>this.cancel();e.addEventListener("abort",r),n=await new Promise(i=>{this.subscribe(s=>{e.removeEventListener("abort",r),(s||this.done)&&i(s)})})}return n}get done(){return this.pendingKeysSet.size===0}get unwrappedData(){return Qe(this.data!==null&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce((e,n)=>{let[r,i]=n;return Object.assign(e,{[r]:K4(i)})},{})}get pendingKeys(){return Array.from(this.pendingKeysSet)}}function q4(t){return t instanceof Promise&&t._tracked===!0}function K4(t){if(!q4(t))return t;if(t._error)throw t._error;return t._data}class OS{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function ND(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const PD=["post","put","patch","delete"],Q4=new Set(PD),Y4=["get",...PD],X4=new Set(Y4),J4=new Set([301,302,303,307,308]),Z4=new Set([307,308]),i0={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},ez={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},_C={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},DD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,OD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",tz=!OD;function nz(t){Qe(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let e=kD(t.routes),n,r=null,i=new Set,s=null,o=null,a=null,l=t.hydrationData!=null,c=ic(e,t.history.location,t.basename),u=null;if(c==null){let K=es(404,{pathname:t.history.location.pathname}),{matches:Y,route:X}=TC(e);c=Y,u={[X.id]:K}}let d=!c.some(K=>K.route.loader)||t.hydrationData!=null,h,f={historyAction:t.history.action,location:t.history.location,matches:c,initialized:d,navigation:i0,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||u,fetchers:new Map,blockers:new Map},p=en.Pop,y=!1,w,m=!1,g=!1,_=[],b=[],x=new Map,E=0,D=-1,S=new Map,T=new Set,O=new Map,C=new Map,k=new Map,A=!1;function N(){return r=t.history.listen(K=>{let{action:Y,location:X,delta:be}=K;if(A){A=!1;return}bh(k.size===0||be!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let _e=qe({currentLocation:f.location,nextLocation:X,historyAction:Y});if(_e&&be!=null){A=!0,t.history.go(be*-1),ft(_e,{state:"blocked",location:X,proceed(){ft(_e,{state:"proceeding",proceed:void 0,reset:void 0,location:X}),t.history.go(be)},reset(){Le(_e),I({blockers:new Map(h.state.blockers)})}});return}return J(Y,X)}),f.initialized||J(en.Pop,f.location),h}function B(){r&&r(),i.clear(),w&&w.abort(),f.fetchers.forEach((K,Y)=>oe(Y)),f.blockers.forEach((K,Y)=>Le(Y))}function R(K){return i.add(K),()=>i.delete(K)}function I(K){f=dt({},f,K),i.forEach(Y=>Y(f))}function U(K,Y){var X,be;let _e=f.actionData!=null&&f.navigation.formMethod!=null&&is(f.navigation.formMethod)&&f.navigation.state==="loading"&&((X=K.state)==null?void 0:X._isRedirect)!==!0,Re;Y.actionData?Object.keys(Y.actionData).length>0?Re=Y.actionData:Re=null:_e?Re=f.actionData:Re=null;let Te=Y.loaderData?xC(f.loaderData,Y.loaderData,Y.matches||[],Y.errors):f.loaderData;for(let[we]of k)Le(we);let Fe=y===!0||f.navigation.formMethod!=null&&is(f.navigation.formMethod)&&((be=K.state)==null?void 0:be._isRedirect)!==!0;n&&(e=n,n=void 0),I(dt({},Y,{actionData:Re,loaderData:Te,historyAction:p,location:K,initialized:!0,navigation:i0,revalidation:"idle",restoreScrollPosition:pe(K,Y.matches||f.matches),preventScrollReset:Fe,blockers:new Map(f.blockers)})),m||p===en.Pop||(p===en.Push?t.history.push(K,K.state):p===en.Replace&&t.history.replace(K,K.state)),p=en.Pop,y=!1,m=!1,g=!1,_=[],b=[]}async function $(K,Y){if(typeof K=="number"){t.history.go(K);return}let{path:X,submission:be,error:_e}=wC(K,Y),Re=f.location,Te=wh(f.location,X,Y&&Y.state);Te=dt({},Te,t.history.encodeLocation(Te));let Fe=Y&&Y.replace!=null?Y.replace:void 0,we=en.Push;Fe===!0?we=en.Replace:Fe===!1||be!=null&&is(be.formMethod)&&be.formAction===f.location.pathname+f.location.search&&(we=en.Replace);let W=Y&&"preventScrollReset"in Y?Y.preventScrollReset===!0:void 0,V=qe({currentLocation:Re,nextLocation:Te,historyAction:we});if(V){ft(V,{state:"blocked",location:Te,proceed(){ft(V,{state:"proceeding",proceed:void 0,reset:void 0,location:Te}),$(K,Y)},reset(){Le(V),I({blockers:new Map(f.blockers)})}});return}return await J(we,Te,{submission:be,pendingError:_e,preventScrollReset:W,replace:Y&&Y.replace})}function z(){if(de(),I({revalidation:"loading"}),f.navigation.state!=="submitting"){if(f.navigation.state==="idle"){J(f.historyAction,f.location,{startUninterruptedRevalidation:!0});return}J(p||f.historyAction,f.navigation.location,{overrideNavigation:f.navigation})}}async function J(K,Y,X){w&&w.abort(),w=null,p=K,m=(X&&X.startUninterruptedRevalidation)===!0,et(f.location,f.matches),y=(X&&X.preventScrollReset)===!0;let be=n||e,_e=X&&X.overrideNavigation,Re=ic(be,Y,t.basename);if(!Re){let ie=es(404,{pathname:Y.pathname}),{matches:ue,route:he}=TC(be);ut(),U(Y,{matches:ue,loaderData:{},errors:{[he.id]:ie}});return}if(az(f.location,Y)&&!(X&&X.submission&&is(X.submission.formMethod))){U(Y,{matches:Re});return}w=new AbortController;let Te=Hu(t.history,Y,w.signal,X&&X.submission),Fe,we;if(X&&X.pendingError)we={[sc(Re).route.id]:X.pendingError};else if(X&&X.submission&&is(X.submission.formMethod)){let ie=await P(Te,Y,X.submission,Re,{replace:X.replace});if(ie.shortCircuited)return;Fe=ie.pendingActionData,we=ie.pendingActionError,_e=dt({state:"loading",location:Y},X.submission),Te=new Request(Te.url,{signal:Te.signal})}let{shortCircuited:W,loaderData:V,errors:Z}=await F(Te,Y,Re,_e,X&&X.submission,X&&X.replace,Fe,we);W||(w=null,U(Y,dt({matches:Re},Fe?{actionData:Fe}:{},{loaderData:V,errors:Z})))}async function P(K,Y,X,be,_e){de();let Re=dt({state:"submitting",location:Y},X);I({navigation:Re});let Te,Fe=Jw(be,Y);if(!Fe.route.action)Te={type:pn.error,error:es(405,{method:K.method,pathname:Y.pathname,routeId:Fe.route.id})};else if(Te=await Wu("action",K,Fe,be,h.basename),K.signal.aborted)return{shortCircuited:!0};if(gc(Te)){let we;return _e&&_e.replace!=null?we=_e.replace:we=Te.location===f.location.pathname+f.location.search,await G(f,Te,{submission:X,replace:we}),{shortCircuited:!0}}if(Ld(Te)){let we=sc(be,Fe.route.id);return(_e&&_e.replace)!==!0&&(p=en.Push),{pendingActionData:{},pendingActionError:{[we.route.id]:Te.error}}}if(ba(Te))throw es(400,{type:"defer-action"});return{pendingActionData:{[Fe.route.id]:Te.data}}}async function F(K,Y,X,be,_e,Re,Te,Fe){let we=be;we||(we=dt({state:"loading",location:Y,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},_e));let W=_e||(we.formMethod&&we.formAction&&we.formData&&we.formEncType?{formMethod:we.formMethod,formAction:we.formAction,formData:we.formData,formEncType:we.formEncType}:void 0),V=n||e,[Z,ie]=bC(t.history,f,X,W,Y,g,_,b,O,V,t.basename,Te,Fe);if(ut(rt=>!(X&&X.some(Ze=>Ze.route.id===rt))||Z&&Z.some(Ze=>Ze.route.id===rt)),Z.length===0&&ie.length===0)return U(Y,dt({matches:X,loaderData:{},errors:Fe||null},Te?{actionData:Te}:{})),{shortCircuited:!0};if(!m){ie.forEach(Ze=>{let yt=f.fetchers.get(Ze.key),jn={state:"loading",data:yt&&yt.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};f.fetchers.set(Ze.key,jn)});let rt=Te||f.actionData;I(dt({navigation:we},rt?Object.keys(rt).length===0?{actionData:null}:{actionData:rt}:{},ie.length>0?{fetchers:new Map(f.fetchers)}:{}))}D=++E,ie.forEach(rt=>x.set(rt.key,w));let{results:ue,loaderResults:he,fetcherResults:Oe}=await te(f.matches,X,Z,ie,K);if(K.signal.aborted)return{shortCircuited:!0};ie.forEach(rt=>x.delete(rt.key));let Ie=IC(ue);if(Ie)return await G(f,Ie,{replace:Re}),{shortCircuited:!0};let{loaderData:Ce,errors:$e}=EC(f,X,Z,he,Fe,ie,Oe,C);C.forEach((rt,Ze)=>{rt.subscribe(yt=>{(yt||rt.done)&&C.delete(Ze)})}),Ee();let nt=Me(D);return dt({loaderData:Ce,errors:$e},nt||ie.length>0?{fetchers:new Map(f.fetchers)}:{})}function L(K){return f.fetchers.get(K)||ez}function j(K,Y,X,be){if(tz)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");x.has(K)&&De(K);let Re=ic(n||e,X,t.basename);if(!Re){ye(K,Y,es(404,{pathname:X}));return}let{path:Te,submission:Fe}=wC(X,be,!0),we=Jw(Re,Te);if(y=(be&&be.preventScrollReset)===!0,Fe&&is(Fe.formMethod)){M(K,Y,Te,we,Re,Fe);return}O.set(K,{routeId:Y,path:Te}),ne(K,Y,Te,we,Re,Fe)}async function M(K,Y,X,be,_e,Re){if(de(),O.delete(K),!be.route.action){let Yn=es(405,{method:Re.formMethod,pathname:X,routeId:Y});ye(K,Y,Yn);return}let Te=f.fetchers.get(K),Fe=dt({state:"submitting"},Re,{data:Te&&Te.data," _hasFetcherDoneAnything ":!0});f.fetchers.set(K,Fe),I({fetchers:new Map(f.fetchers)});let we=new AbortController,W=Hu(t.history,X,we.signal,Re);x.set(K,we);let V=await Wu("action",W,be,_e,h.basename);if(W.signal.aborted){x.get(K)===we&&x.delete(K);return}if(gc(V)){x.delete(K),T.add(K);let Yn=dt({state:"loading"},Re,{data:void 0," _hasFetcherDoneAnything ":!0});return f.fetchers.set(K,Yn),I({fetchers:new Map(f.fetchers)}),G(f,V,{isFetchActionRedirect:!0})}if(Ld(V)){ye(K,Y,V.error);return}if(ba(V))throw es(400,{type:"defer-action"});let Z=f.navigation.location||f.location,ie=Hu(t.history,Z,we.signal),ue=n||e,he=f.navigation.state!=="idle"?ic(ue,f.navigation.location,t.basename):f.matches;Qe(he,"Didn't find any matches after fetcher action");let Oe=++E;S.set(K,Oe);let Ie=dt({state:"loading",data:V.data},Re,{" _hasFetcherDoneAnything ":!0});f.fetchers.set(K,Ie);let[Ce,$e]=bC(t.history,f,he,Re,Z,g,_,b,O,ue,t.basename,{[be.route.id]:V.data},void 0);$e.filter(Yn=>Yn.key!==K).forEach(Yn=>{let R_=Yn.key,sI=f.fetchers.get(R_),G3={state:"loading",data:sI&&sI.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};f.fetchers.set(R_,G3),x.set(R_,we)}),I({fetchers:new Map(f.fetchers)});let{results:nt,loaderResults:rt,fetcherResults:Ze}=await te(f.matches,he,Ce,$e,ie);if(we.signal.aborted)return;S.delete(K),x.delete(K),$e.forEach(Yn=>x.delete(Yn.key));let yt=IC(nt);if(yt)return G(f,yt);let{loaderData:jn,errors:Si}=EC(f,f.matches,Ce,rt,void 0,$e,Ze,C),Ol={state:"idle",data:V.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};f.fetchers.set(K,Ol);let ia=Me(Oe);f.navigation.state==="loading"&&Oe>D?(Qe(p,"Expected pending action"),w&&w.abort(),U(f.navigation.location,{matches:he,loaderData:jn,errors:Si,fetchers:new Map(f.fetchers)})):(I(dt({errors:Si,loaderData:xC(f.loaderData,jn,he,Si)},ia?{fetchers:new Map(f.fetchers)}:{})),g=!1)}async function ne(K,Y,X,be,_e,Re){let Te=f.fetchers.get(K),Fe=dt({state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},Re,{data:Te&&Te.data," _hasFetcherDoneAnything ":!0});f.fetchers.set(K,Fe),I({fetchers:new Map(f.fetchers)});let we=new AbortController,W=Hu(t.history,X,we.signal);x.set(K,we);let V=await Wu("loader",W,be,_e,h.basename);if(ba(V)&&(V=await FD(V,W.signal,!0)||V),x.get(K)===we&&x.delete(K),W.signal.aborted)return;if(gc(V)){await G(f,V);return}if(Ld(V)){let ie=sc(f.matches,Y);f.fetchers.delete(K),I({fetchers:new Map(f.fetchers),errors:{[ie.route.id]:V.error}});return}Qe(!ba(V),"Unhandled fetcher deferred data");let Z={state:"idle",data:V.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};f.fetchers.set(K,Z),I({fetchers:new Map(f.fetchers)})}async function G(K,Y,X){var be;let{submission:_e,replace:Re,isFetchActionRedirect:Te}=X===void 0?{}:X;Y.revalidate&&(g=!0);let Fe=wh(K.location,Y.location,dt({_isRedirect:!0},Te?{_isFetchActionRedirect:!0}:{}));if(Qe(Fe,"Expected a location on the redirect navigation"),DD.test(Y.location)&&OD&&typeof((be=window)==null?void 0:be.location)<"u"){let ue=t.history.createURL(Y.location),he=gf(ue.pathname,t.basename||"/")==null;if(window.location.origin!==ue.origin||he){Re?window.location.replace(Y.location):window.location.assign(Y.location);return}}w=null;let we=Re===!0?en.Replace:en.Push,{formMethod:W,formAction:V,formEncType:Z,formData:ie}=K.navigation;!_e&&W&&V&&ie&&Z&&(_e={formMethod:W,formAction:V,formEncType:Z,formData:ie}),Z4.has(Y.status)&&_e&&is(_e.formMethod)?await J(we,Fe,{submission:dt({},_e,{formAction:Y.location}),preventScrollReset:y}):await J(we,Fe,{overrideNavigation:{state:"loading",location:Fe,formMethod:_e?_e.formMethod:void 0,formAction:_e?_e.formAction:void 0,formEncType:_e?_e.formEncType:void 0,formData:_e?_e.formData:void 0},preventScrollReset:y})}async function te(K,Y,X,be,_e){let Re=await Promise.all([...X.map(we=>Wu("loader",_e,we,Y,h.basename)),...be.map(we=>we.matches&&we.match?Wu("loader",Hu(t.history,we.path,_e.signal),we.match,we.matches,h.basename):{type:pn.error,error:es(404,{pathname:we.path})})]),Te=Re.slice(0,X.length),Fe=Re.slice(X.length);return await Promise.all([CC(K,X,Te,_e.signal,!1,f.loaderData),CC(K,be.map(we=>we.match),Fe,_e.signal,!0)]),{results:Re,loaderResults:Te,fetcherResults:Fe}}function de(){g=!0,_.push(...ut()),O.forEach((K,Y)=>{x.has(Y)&&(b.push(Y),De(Y))})}function ye(K,Y,X){let be=sc(f.matches,Y);oe(K),I({errors:{[be.route.id]:X},fetchers:new Map(f.fetchers)})}function oe(K){x.has(K)&&De(K),O.delete(K),S.delete(K),T.delete(K),f.fetchers.delete(K)}function De(K){let Y=x.get(K);Qe(Y,"Expected fetch controller: "+K),Y.abort(),x.delete(K)}function He(K){for(let Y of K){let be={state:"idle",data:L(Y).data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};f.fetchers.set(Y,be)}}function Ee(){let K=[];for(let Y of T){let X=f.fetchers.get(Y);Qe(X,"Expected fetcher: "+Y),X.state==="loading"&&(T.delete(Y),K.push(Y))}He(K)}function Me(K){let Y=[];for(let[X,be]of S)if(be<K){let _e=f.fetchers.get(X);Qe(_e,"Expected fetcher: "+X),_e.state==="loading"&&(De(X),S.delete(X),Y.push(X))}return He(Y),Y.length>0}function ve(K,Y){let X=f.blockers.get(K)||_C;return k.get(K)!==Y&&k.set(K,Y),X}function Le(K){f.blockers.delete(K),k.delete(K)}function ft(K,Y){let X=f.blockers.get(K)||_C;Qe(X.state==="unblocked"&&Y.state==="blocked"||X.state==="blocked"&&Y.state==="blocked"||X.state==="blocked"&&Y.state==="proceeding"||X.state==="blocked"&&Y.state==="unblocked"||X.state==="proceeding"&&Y.state==="unblocked","Invalid blocker state transition: "+X.state+" -> "+Y.state),f.blockers.set(K,Y),I({blockers:new Map(f.blockers)})}function qe(K){let{currentLocation:Y,nextLocation:X,historyAction:be}=K;if(k.size===0)return;k.size>1&&bh(!1,"A router only supports one blocker at a time");let _e=Array.from(k.entries()),[Re,Te]=_e[_e.length-1],Fe=f.blockers.get(Re);if(!(Fe&&Fe.state==="proceeding")&&Te({currentLocation:Y,nextLocation:X,historyAction:be}))return Re}function ut(K){let Y=[];return C.forEach((X,be)=>{(!K||K(be))&&(X.cancel(),Y.push(be),C.delete(be))}),Y}function Pt(K,Y,X){if(s=K,a=Y,o=X||(be=>be.key),!l&&f.navigation===i0){l=!0;let be=pe(f.location,f.matches);be!=null&&I({restoreScrollPosition:be})}return()=>{s=null,a=null,o=null}}function et(K,Y){if(s&&o&&a){let X=Y.map(_e=>kC(_e,f.loaderData)),be=o(K,X)||K.key;s[be]=a()}}function pe(K,Y){if(s&&o&&a){let X=Y.map(Re=>kC(Re,f.loaderData)),be=o(K,X)||K.key,_e=s[be];if(typeof _e=="number")return _e}return null}function Ge(K){n=K}return h={get basename(){return t.basename},get state(){return f},get routes(){return e},initialize:N,subscribe:R,enableScrollRestoration:Pt,navigate:$,fetch:j,revalidate:z,createHref:K=>t.history.createHref(K),encodeLocation:K=>t.history.encodeLocation(K),getFetcher:L,deleteFetcher:oe,dispose:B,getBlocker:ve,deleteBlocker:Le,_internalFetchControllers:x,_internalActiveDeferreds:C,_internalSetRoutes:Ge},h}function rz(t){return t!=null&&"formData"in t}function wC(t,e,n){n===void 0&&(n=!1);let r=typeof t=="string"?t:Es(t);if(!e||!rz(e))return{path:r};if(e.formMethod&&!cz(e.formMethod))return{path:r,error:es(405,{method:e.formMethod})};let i;if(e.formData&&(i={formMethod:e.formMethod||"get",formAction:$D(r),formEncType:e&&e.formEncType||"application/x-www-form-urlencoded",formData:e.formData},is(i.formMethod)))return{path:r,submission:i};let s=As(r),o=MD(e.formData);return n&&s.search&&UD(s.search)&&o.append("index",""),s.search="?"+o,{path:Es(s),submission:i}}function iz(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function bC(t,e,n,r,i,s,o,a,l,c,u,d,h){let f=h?Object.values(h)[0]:d?Object.values(d)[0]:void 0,p=t.createURL(e.location),y=t.createURL(i),w=s||p.toString()===y.toString()||p.search!==y.search,m=h?Object.keys(h)[0]:void 0,_=iz(n,m).filter((x,E)=>{if(x.route.loader==null)return!1;if(sz(e.loaderData,e.matches[E],x)||o.some(T=>T===x.route.id))return!0;let D=e.matches[E],S=x;return SC(x,dt({currentUrl:p,currentParams:D.params,nextUrl:y,nextParams:S.params},r,{actionResult:f,defaultShouldRevalidate:w||LD(D,S)}))}),b=[];return l.forEach((x,E)=>{if(!n.some(O=>O.route.id===x.routeId))return;let D=ic(c,x.path,u);if(!D){b.push(dt({key:E},x,{matches:null,match:null}));return}let S=Jw(D,x.path);if(a.includes(E)){b.push(dt({key:E,matches:D,match:S},x));return}SC(S,dt({currentUrl:p,currentParams:e.matches[e.matches.length-1].params,nextUrl:y,nextParams:n[n.length-1].params},r,{actionResult:f,defaultShouldRevalidate:w}))&&b.push(dt({key:E,matches:D,match:S},x))}),[_,b]}function sz(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function LD(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function SC(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function Wu(t,e,n,r,i,s,o,a){i===void 0&&(i="/"),s===void 0&&(s=!1),o===void 0&&(o=!1);let l,c,u,d=new Promise((y,w)=>u=w),h=()=>u();e.signal.addEventListener("abort",h);try{let y=n.route[t];Qe(y,"Could not find the "+t+' to run on the "'+n.route.id+'" route'),c=await Promise.race([y({request:e,params:n.params,context:a}),d]),Qe(c!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(y){l=pn.error,c=y}finally{e.signal.removeEventListener("abort",h)}if(lz(c)){let y=c.status;if(J4.has(y)){let g=c.headers.get("Location");if(Qe(g,"Redirects returned/thrown from loaders/actions must have a Location header"),DD.test(g)){if(!s){let _=new URL(e.url),b=g.startsWith("//")?new URL(_.protocol+g):new URL(g),x=gf(b.pathname,i)!=null;b.origin===_.origin&&x&&(g=b.pathname+b.search+b.hash)}}else{let _=r.slice(0,r.indexOf(n)+1),b=vy(_).map(E=>E.pathnameBase),x=DS(g,b,new URL(e.url).pathname);if(Qe(Es(x),"Unable to resolve redirect location: "+g),i){let E=x.pathname;x.pathname=E==="/"?i:fs([i,E])}g=Es(x)}if(s)throw c.headers.set("Location",g),c;return{type:pn.redirect,status:y,location:g,revalidate:c.headers.get("X-Remix-Revalidate")!==null}}if(o)throw{type:l||pn.data,response:c};let w,m=c.headers.get("Content-Type");return m&&/\bapplication\/json\b/.test(m)?w=await c.json():w=await c.text(),l===pn.error?{type:l,error:new OS(y,c.statusText,w),headers:c.headers}:{type:pn.data,data:w,statusCode:c.status,headers:c.headers}}if(l===pn.error)return{type:l,error:c};if(c instanceof G4){var f,p;return{type:pn.deferred,deferredData:c,statusCode:(f=c.init)==null?void 0:f.status,headers:((p=c.init)==null?void 0:p.headers)&&new Headers(c.init.headers)}}return{type:pn.data,data:c}}function Hu(t,e,n,r){let i=t.createURL($D(e)).toString(),s={signal:n};if(r&&is(r.formMethod)){let{formMethod:o,formEncType:a,formData:l}=r;s.method=o.toUpperCase(),s.body=a==="application/x-www-form-urlencoded"?MD(l):l}return new Request(i,s)}function MD(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,r instanceof File?r.name:r);return e}function oz(t,e,n,r,i){let s={},o=null,a,l=!1,c={};return n.forEach((u,d)=>{let h=e[d].route.id;if(Qe(!gc(u),"Cannot handle redirect results in processLoaderData"),Ld(u)){let f=sc(t,h),p=u.error;r&&(p=Object.values(r)[0],r=void 0),o=o||{},o[f.route.id]==null&&(o[f.route.id]=p),s[h]=void 0,l||(l=!0,a=ND(u.error)?u.error.status:500),u.headers&&(c[h]=u.headers)}else ba(u)?(i.set(h,u.deferredData),s[h]=u.deferredData.data):s[h]=u.data,u.statusCode!=null&&u.statusCode!==200&&!l&&(a=u.statusCode),u.headers&&(c[h]=u.headers)}),r&&(o=r,s[Object.keys(r)[0]]=void 0),{loaderData:s,errors:o,statusCode:a||200,loaderHeaders:c}}function EC(t,e,n,r,i,s,o,a){let{loaderData:l,errors:c}=oz(e,n,r,i,a);for(let u=0;u<s.length;u++){let{key:d,match:h}=s[u];Qe(o!==void 0&&o[u]!==void 0,"Did not find corresponding fetcher result");let f=o[u];if(Ld(f)){let p=sc(t.matches,h==null?void 0:h.route.id);c&&c[p.route.id]||(c=dt({},c,{[p.route.id]:f.error})),t.fetchers.delete(d)}else if(gc(f))Qe(!1,"Unhandled fetcher revalidation redirect");else if(ba(f))Qe(!1,"Unhandled fetcher deferred data");else{let p={state:"idle",data:f.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};t.fetchers.set(d,p)}}return{loaderData:l,errors:c}}function xC(t,e,n,r){let i=dt({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function sc(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function TC(t){let e=t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function es(t,e){let{pathname:n,routeId:r,method:i,type:s}=e===void 0?{}:e,o="Unknown Server Error",a="Unknown @remix-run/router error";return t===400?(o="Bad Request",i&&n&&r?a="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"&&(a="defer() is not supported in actions")):t===403?(o="Forbidden",a='Route "'+r+'" does not match URL "'+n+'"'):t===404?(o="Not Found",a='No route matches URL "'+n+'"'):t===405&&(o="Method Not Allowed",i&&n&&r?a="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(a='Invalid request method "'+i.toUpperCase()+'"')),new OS(t||500,o,new Error(a),!0)}function IC(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(gc(n))return n}}function $D(t){let e=typeof t=="string"?As(t):t;return Es(dt({},e,{hash:""}))}function az(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.hash!==e.hash}function ba(t){return t.type===pn.deferred}function Ld(t){return t.type===pn.error}function gc(t){return(t&&t.type)===pn.redirect}function lz(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function cz(t){return X4.has(t)}function is(t){return Q4.has(t)}async function CC(t,e,n,r,i,s){for(let o=0;o<n.length;o++){let a=n[o],l=e[o];if(!l)continue;let c=t.find(d=>d.route.id===l.route.id),u=c!=null&&!LD(c,l)&&(s&&s[l.route.id])!==void 0;ba(a)&&(i||u)&&await FD(a,r,i).then(d=>{d&&(n[o]=d||n[o])})}}async function FD(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:pn.data,data:t.deferredData.unwrappedData}}catch(i){return{type:pn.error,error:i}}return{type:pn.data,data:t.deferredData.data}}}function UD(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function kC(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function Jw(t,e){let n=typeof e=="string"?As(e).search:e.search;if(t[t.length-1].route.index&&UD(n||""))return t[t.length-1];let r=vy(t);return r[r.length-1]}/**
 * React Router v6.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jm(){return Jm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jm.apply(this,arguments)}function uz(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}const dz=typeof Object.is=="function"?Object.is:uz,{useState:hz,useEffect:fz,useLayoutEffect:pz,useDebugValue:mz}=rw;function gz(t,e,n){const r=e(),[{inst:i},s]=hz({inst:{value:r,getSnapshot:e}});return pz(()=>{i.value=r,i.getSnapshot=e,s0(i)&&s({inst:i})},[t,r,e]),fz(()=>(s0(i)&&s({inst:i}),t(()=>{s0(i)&&s({inst:i})})),[t]),mz(r),r}function s0(t){const e=t.getSnapshot,n=t.value;try{const r=e();return!dz(n,r)}catch{return!0}}function yz(t,e,n){return e()}const vz=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_z=!vz,wz=_z?yz:gz,bz="useSyncExternalStore"in rw?(t=>t.useSyncExternalStore)(rw):wz,LS=H.createContext(null),MS=H.createContext(null),yf=H.createContext(null),_y=H.createContext(null),Go=H.createContext({outlet:null,matches:[]}),jD=H.createContext(null);function Sz(t,e){let{relative:n}=e===void 0?{}:e;vf()||Qe(!1);let{basename:r,navigator:i}=H.useContext(yf),{hash:s,pathname:o,search:a}=VD(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:fs([r,o])),i.createHref({pathname:l,search:a,hash:s})}function vf(){return H.useContext(_y)!=null}function wy(){return vf()||Qe(!1),H.useContext(_y).location}function Rs(){vf()||Qe(!1);let{basename:t,navigator:e}=H.useContext(yf),{matches:n}=H.useContext(Go),{pathname:r}=wy(),i=JSON.stringify(vy(n).map(a=>a.pathnameBase)),s=H.useRef(!1);return H.useEffect(()=>{s.current=!0}),H.useCallback(function(a,l){if(l===void 0&&(l={}),!s.current)return;if(typeof a=="number"){e.go(a);return}let c=DS(a,JSON.parse(i),r,l.relative==="path");t!=="/"&&(c.pathname=c.pathname==="/"?t:fs([t,c.pathname])),(l.replace?e.replace:e.push)(c,l.state,l)},[t,e,i,r])}const Ez=H.createContext(null);function xz(t){let e=H.useContext(Go).outlet;return e&&H.createElement(Ez.Provider,{value:t},e)}function $S(){let{matches:t}=H.useContext(Go),e=t[t.length-1];return e?e.params:{}}function VD(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=H.useContext(Go),{pathname:i}=wy(),s=JSON.stringify(vy(r).map(o=>o.pathnameBase));return H.useMemo(()=>DS(t,JSON.parse(s),i,n==="path"),[t,s,i,n])}function Tz(t,e){vf()||Qe(!1);let{navigator:n}=H.useContext(yf),r=H.useContext(MS),{matches:i}=H.useContext(Go),s=i[i.length-1],o=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let l=wy(),c;if(e){var u;let y=typeof e=="string"?As(e):e;a==="/"||(u=y.pathname)!=null&&u.startsWith(a)||Qe(!1),c=y}else c=l;let d=c.pathname||"/",h=a==="/"?d:d.slice(a.length)||"/",f=ic(t,{pathname:h}),p=Az(f&&f.map(y=>Object.assign({},y,{params:Object.assign({},o,y.params),pathname:fs([a,n.encodeLocation?n.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?a:fs([a,n.encodeLocation?n.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,r||void 0);return e&&p?H.createElement(_y.Provider,{value:{location:Jm({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:en.Pop}},p):p}function Iz(){let t=Dz(),e=ND(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},e),n?H.createElement("pre",{style:i},n):null,s)}class Cz extends H.Component{constructor(e){super(e),this.state={location:e.location,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location?{error:e.error,location:e.location}:{error:e.error||n.error,location:n.location}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?H.createElement(Go.Provider,{value:this.props.routeContext},H.createElement(jD.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function kz(t){let{routeContext:e,match:n,children:r}=t,i=H.useContext(LS);return i&&i.static&&i.staticContext&&n.route.errorElement&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),H.createElement(Go.Provider,{value:e},r)}function Az(t,e,n){if(e===void 0&&(e=[]),t==null)if(n!=null&&n.errors)t=n.matches;else return null;let r=t,i=n==null?void 0:n.errors;if(i!=null){let s=r.findIndex(o=>o.route.id&&(i==null?void 0:i[o.route.id]));s>=0||Qe(!1),r=r.slice(0,Math.min(r.length,s+1))}return r.reduceRight((s,o,a)=>{let l=o.route.id?i==null?void 0:i[o.route.id]:null,c=n?o.route.errorElement||H.createElement(Iz,null):null,u=e.concat(r.slice(0,a+1)),d=()=>H.createElement(kz,{match:o,routeContext:{outlet:s,matches:u}},l?c:o.route.element!==void 0?o.route.element:s);return n&&(o.route.errorElement||a===0)?H.createElement(Cz,{location:n.location,component:c,error:l,children:d(),routeContext:{outlet:null,matches:u}}):d()},null)}var AC;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator"})(AC||(AC={}));var Zm;(function(t){t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator"})(Zm||(Zm={}));function Rz(t){let e=H.useContext(MS);return e||Qe(!1),e}function Nz(t){let e=H.useContext(Go);return e||Qe(!1),e}function Pz(t){let e=Nz(),n=e.matches[e.matches.length-1];return n.route.id||Qe(!1),n.route.id}function Dz(){var t;let e=H.useContext(jD),n=Rz(Zm.UseRouteError),r=Pz(Zm.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function Oz(t){let{fallbackElement:e,router:n}=t,r=bz(n.subscribe,()=>n.state,()=>n.state),i=H.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:o=>n.navigate(o),push:(o,a,l)=>n.navigate(o,{state:a,preventScrollReset:l==null?void 0:l.preventScrollReset}),replace:(o,a,l)=>n.navigate(o,{replace:!0,state:a,preventScrollReset:l==null?void 0:l.preventScrollReset})}),[n]),s=n.basename||"/";return H.createElement(H.Fragment,null,H.createElement(LS.Provider,{value:{router:n,navigator:i,static:!1,basename:s}},H.createElement(MS.Provider,{value:r},H.createElement($z,{basename:n.basename,location:n.state.location,navigationType:n.state.historyAction,navigator:i},n.state.initialized?H.createElement(Fz,null):e))),null)}function Lz(t){return xz(t.context)}function Mz(t){Qe(!1)}function $z(t){let{basename:e="/",children:n=null,location:r,navigationType:i=en.Pop,navigator:s,static:o=!1}=t;vf()&&Qe(!1);let a=e.replace(/^\/*/,"/"),l=H.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof r=="string"&&(r=As(r));let{pathname:c="/",search:u="",hash:d="",state:h=null,key:f="default"}=r,p=H.useMemo(()=>{let y=gf(c,a);return y==null?null:{pathname:y,search:u,hash:d,state:h,key:f}},[a,c,u,d,h,f]);return p==null?null:H.createElement(yf.Provider,{value:l},H.createElement(_y.Provider,{children:n,value:{location:p,navigationType:i}}))}function Fz(t){let{children:e,location:n}=t,r=H.useContext(LS),i=r&&!e?r.router.routes:Zw(e);return Tz(i,n)}var RC;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(RC||(RC={}));new Promise(()=>{});function Zw(t,e){e===void 0&&(e=[]);let n=[];return H.Children.forEach(t,(r,i)=>{if(!H.isValidElement(r))return;if(r.type===H.Fragment){n.push.apply(n,Zw(r.props.children,e));return}r.type!==Mz&&Qe(!1),!r.props.index||!r.props.children||Qe(!1);let s=[...e,i],o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,hasErrorBoundary:r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle};r.props.children&&(o.children=Zw(r.props.children,s)),n.push(o)}),n}function BD(t){return t.map(e=>{let n=Jm({},e);return n.hasErrorBoundary==null&&(n.hasErrorBoundary=n.errorElement!=null),n.children&&(n.children=BD(n.children)),n})}/**
 * React Router DOM v6.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function eg(){return eg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eg.apply(this,arguments)}function Uz(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function jz(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Vz(t,e){return t.button===0&&(!e||e==="_self")&&!jz(t)}const Bz=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function zz(t,e){return nz({basename:e==null?void 0:e.basename,history:E4({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||Wz(),routes:BD(t)}).initialize()}function Wz(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=eg({},e,{errors:Hz(e.errors)})),e}function Hz(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new OS(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){let s=new Error(i.message);s.stack="",n[r]=s}else n[r]=i;return n}const Gz=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",qz=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ps=H.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u}=e,d=Uz(e,Bz),{basename:h}=H.useContext(yf),f,p=!1;if(typeof c=="string"&&qz.test(c)&&(f=c,Gz)){let g=new URL(window.location.href),_=c.startsWith("//")?new URL(g.protocol+c):new URL(c),b=gf(_.pathname,h);_.origin===g.origin&&b!=null?c=b+_.search+_.hash:p=!0}let y=Sz(c,{relative:i}),w=Kz(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i});function m(g){r&&r(g),g.defaultPrevented||w(g)}return H.createElement("a",eg({},d,{href:f||y,onClick:p||s?r:m,ref:n,target:l}))});var NC;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmitImpl="useSubmitImpl",t.UseFetcher="useFetcher"})(NC||(NC={}));var PC;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(PC||(PC={}));function Kz(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o}=e===void 0?{}:e,a=Rs(),l=wy(),c=VD(t,{relative:o});return H.useCallback(u=>{if(Vz(u,n)){u.preventDefault();let d=r!==void 0?r:Es(l)===Es(c);a(t,{replace:d,state:i,preventScrollReset:s,relative:o})}},[l,a,c,r,i,n,t,s,o])}function Qz(t){const e=new Error(t);if(e.stack===void 0)try{throw e}catch{}return e}var Yz=Qz,Ke=Yz;function Xz(t){return!!t&&typeof t.then=="function"}var Ct=Xz;function Jz(t,e){if(t!=null)return t;throw Ke(e??"Got unexpected null or undefined")}var Lt=Jz;function ze(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class by{getValue(){throw Ke("BaseLoadable")}toPromise(){throw Ke("BaseLoadable")}valueMaybe(){throw Ke("BaseLoadable")}valueOrThrow(){throw Ke(`Loadable expected value, but in "${this.state}" state`)}promiseMaybe(){throw Ke("BaseLoadable")}promiseOrThrow(){throw Ke(`Loadable expected promise, but in "${this.state}" state`)}errorMaybe(){throw Ke("BaseLoadable")}errorOrThrow(){throw Ke(`Loadable expected error, but in "${this.state}" state`)}is(e){return e.state===this.state&&e.contents===this.contents}map(e){throw Ke("BaseLoadable")}}class Zz extends by{constructor(e){super(),ze(this,"state","hasValue"),ze(this,"contents",void 0),this.contents=e}getValue(){return this.contents}toPromise(){return Promise.resolve(this.contents)}valueMaybe(){return this.contents}valueOrThrow(){return this.contents}promiseMaybe(){}errorMaybe(){}map(e){try{const n=e(this.contents);return Ct(n)?Ga(n):Dc(n)?n:_f(n)}catch(n){return Ct(n)?Ga(n.next(()=>this.map(e))):Sy(n)}}}class e5 extends by{constructor(e){super(),ze(this,"state","hasError"),ze(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return Promise.reject(this.contents)}valueMaybe(){}promiseMaybe(){}errorMaybe(){return this.contents}errorOrThrow(){return this.contents}map(e){return this}}class zD extends by{constructor(e){super(),ze(this,"state","loading"),ze(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return this.contents}valueMaybe(){}promiseMaybe(){return this.contents}promiseOrThrow(){return this.contents}errorMaybe(){}map(e){return Ga(this.contents.then(n=>{const r=e(n);if(Dc(r)){const i=r;switch(i.state){case"hasValue":return i.contents;case"hasError":throw i.contents;case"loading":return i.contents}}return r}).catch(n=>{if(Ct(n))return n.then(()=>this.map(e).contents);throw n}))}}function _f(t){return Object.freeze(new Zz(t))}function Sy(t){return Object.freeze(new e5(t))}function Ga(t){return Object.freeze(new zD(t))}function WD(){return Object.freeze(new zD(new Promise(()=>{})))}function t5(t){return t.every(e=>e.state==="hasValue")?_f(t.map(e=>e.contents)):t.some(e=>e.state==="hasError")?Sy(Lt(t.find(e=>e.state==="hasError"),"Invalid loadable passed to loadableAll").contents):Ga(Promise.all(t.map(e=>e.contents)))}function HD(t){const n=(Array.isArray(t)?t:Object.getOwnPropertyNames(t).map(i=>t[i])).map(i=>Dc(i)?i:Ct(i)?Ga(i):_f(i)),r=t5(n);return Array.isArray(t)?r:r.map(i=>Object.getOwnPropertyNames(t).reduce((s,o,a)=>({...s,[o]:i[a]}),{}))}function Dc(t){return t instanceof by}const n5={of:t=>Ct(t)?Ga(t):Dc(t)?t:_f(t),error:t=>Sy(t),loading:()=>WD(),all:HD,isLoadable:Dc};var vl={loadableWithValue:_f,loadableWithError:Sy,loadableWithPromise:Ga,loadableLoading:WD,loadableAll:HD,isLoadable:Dc,RecoilLoadable:n5},r5=vl.loadableWithValue,i5=vl.loadableWithError,s5=vl.loadableWithPromise,o5=vl.loadableLoading,a5=vl.loadableAll,l5=vl.isLoadable,c5=vl.RecoilLoadable,wf=Object.freeze({__proto__:null,loadableWithValue:r5,loadableWithError:i5,loadableWithPromise:s5,loadableLoading:o5,loadableAll:a5,isLoadable:l5,RecoilLoadable:c5});const e1={RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED:!0,RECOIL_GKS_ENABLED:new Set(["recoil_hamt_2020","recoil_sync_external_store","recoil_suppress_rerender_in_callback","recoil_memory_managament_2020"])};function u5(t,e){var n,r;const i=(n=process.env[t])===null||n===void 0||(r=n.toLowerCase())===null||r===void 0?void 0:r.trim();if(i==null||i==="")return;if(!["true","false"].includes(i))throw Ke(`({}).${t} value must be 'true', 'false', or empty: ${i}`);e(i==="true")}function d5(t,e){var n;const r=(n=process.env[t])===null||n===void 0?void 0:n.trim();r==null||r===""||e(r.split(/\s*,\s*|\s+/))}function h5(){var t;typeof process>"u"||((t=process)===null||t===void 0?void 0:t.env)!=null&&(u5("RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED",e=>{e1.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED=e}),d5("RECOIL_GKS_ENABLED",e=>{e.forEach(n=>{e1.RECOIL_GKS_ENABLED.add(n)})}))}h5();var hu=e1;function Ey(t){return hu.RECOIL_GKS_ENABLED.has(t)}Ey.setPass=t=>{hu.RECOIL_GKS_ENABLED.add(t)};Ey.setFail=t=>{hu.RECOIL_GKS_ENABLED.delete(t)};Ey.clear=()=>{hu.RECOIL_GKS_ENABLED.clear()};var _t=Ey;function f5(t,e,{error:n}={}){return null}var p5=f5,FS=p5,o0,a0,l0;const m5=(o0=Pe.createMutableSource)!==null&&o0!==void 0?o0:Pe.unstable_createMutableSource,GD=(a0=Pe.useMutableSource)!==null&&a0!==void 0?a0:Pe.unstable_useMutableSource,qD=(l0=Pe.useSyncExternalStore)!==null&&l0!==void 0?l0:Pe.unstable_useSyncExternalStore;function g5(){var t;const{ReactCurrentDispatcher:e,ReactCurrentOwner:n}=Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;return((t=e==null?void 0:e.current)!==null&&t!==void 0?t:n.currentDispatcher).useSyncExternalStore!=null}function y5(){return _t("recoil_transition_support")?{mode:"TRANSITION_SUPPORT",early:!0,concurrent:!0}:_t("recoil_sync_external_store")&&qD!=null?{mode:"SYNC_EXTERNAL_STORE",early:!0,concurrent:!1}:_t("recoil_mutable_source")&&GD!=null&&typeof window<"u"&&!window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE?_t("recoil_suppress_rerender_in_callback")?{mode:"MUTABLE_SOURCE",early:!0,concurrent:!0}:{mode:"MUTABLE_SOURCE",early:!1,concurrent:!1}:_t("recoil_suppress_rerender_in_callback")?{mode:"LEGACY",early:!0,concurrent:!1}:{mode:"LEGACY",early:!1,concurrent:!1}}function v5(){return!1}var bf={createMutableSource:m5,useMutableSource:GD,useSyncExternalStore:qD,currentRendererSupportsUseSyncExternalStore:g5,reactMode:y5,isFastRefreshEnabled:v5};class US{constructor(e){ze(this,"key",void 0),this.key=e}toJSON(){return{key:this.key}}}class KD extends US{}class QD extends US{}function _5(t){return t instanceof KD||t instanceof QD}var xy={AbstractRecoilValue:US,RecoilState:KD,RecoilValueReadOnly:QD,isRecoilValue:_5},w5=xy.AbstractRecoilValue,b5=xy.RecoilState,S5=xy.RecoilValueReadOnly,E5=xy.isRecoilValue,Oc=Object.freeze({__proto__:null,AbstractRecoilValue:w5,RecoilState:b5,RecoilValueReadOnly:S5,isRecoilValue:E5});function x5(t,e){return function*(){let n=0;for(const r of t)yield e(r,n++)}()}var Ty=x5;class YD{}const T5=new YD,qa=new Map,jS=new Map;function I5(t){return Ty(t,e=>Lt(jS.get(e)))}function C5(t){if(qa.has(t)){const e=`Duplicate atom key "${t}". This is a FATAL ERROR in
      production. But it is safe to ignore this warning if it occurred because of
      hot module replacement.`;console.warn(e)}}function k5(t){hu.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED&&C5(t.key),qa.set(t.key,t);const e=t.set==null?new Oc.RecoilValueReadOnly(t.key):new Oc.RecoilState(t.key);return jS.set(t.key,e),e}class XD extends Error{}function A5(t){const e=qa.get(t);if(e==null)throw new XD(`Missing definition for RecoilValue: "${t}""`);return e}function R5(t){return qa.get(t)}const tg=new Map;function N5(t){var e;if(!_t("recoil_memory_managament_2020"))return;const n=qa.get(t);if(n!=null&&(e=n.shouldDeleteConfigOnRelease)!==null&&e!==void 0&&e.call(n)){var r;qa.delete(t),(r=JD(t))===null||r===void 0||r(),tg.delete(t)}}function P5(t,e){_t("recoil_memory_managament_2020")&&(e===void 0?tg.delete(t):tg.set(t,e))}function JD(t){return tg.get(t)}var Tr={nodes:qa,recoilValues:jS,registerNode:k5,getNode:A5,getNodeMaybe:R5,deleteNodeConfigIfPossible:N5,setConfigDeletionHandler:P5,getConfigDeletionHandler:JD,recoilValuesForKeys:I5,NodeMissingError:XD,DefaultValue:YD,DEFAULT_VALUE:T5};function D5(t,e){e()}var O5={enqueueExecution:D5};function L5(t,e){return e={exports:{}},t(e,e.exports),e.exports}var M5=L5(function(t){var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},n={},r=5,i=Math.pow(2,r),s=i-1,o=i/2,a=i/4,l={},c=function(V){return function(){return V}},u=n.hash=function(W){var V=typeof W>"u"?"undefined":e(W);if(V==="number")return W;V!=="string"&&(W+="");for(var Z=0,ie=0,ue=W.length;ie<ue;++ie){var he=W.charCodeAt(ie);Z=(Z<<5)-Z+he|0}return Z},d=function(V){return V-=V>>1&1431655765,V=(V&858993459)+(V>>2&858993459),V=V+(V>>4)&252645135,V+=V>>8,V+=V>>16,V&127},h=function(V,Z){return Z>>>V&s},f=function(V){return 1<<V},p=function(V,Z){return d(V&Z-1)},y=function(V,Z,ie,ue){var he=ue;if(!V){var Oe=ue.length;he=new Array(Oe);for(var Ie=0;Ie<Oe;++Ie)he[Ie]=ue[Ie]}return he[Z]=ie,he},w=function(V,Z,ie){var ue=ie.length-1,he=0,Oe=0,Ie=ie;if(V)he=Oe=Z;else for(Ie=new Array(ue);he<Z;)Ie[Oe++]=ie[he++];for(++he;he<=ue;)Ie[Oe++]=ie[he++];return V&&(Ie.length=ue),Ie},m=function(V,Z,ie,ue){var he=ue.length;if(V){for(var Oe=he;Oe>=Z;)ue[Oe--]=ue[Oe];return ue[Z]=ie,ue}for(var Ie=0,Ce=0,$e=new Array(he+1);Ie<Z;)$e[Ce++]=ue[Ie++];for($e[Z]=ie;Ie<he;)$e[++Ce]=ue[Ie++];return $e},g=1,_=2,b=3,x=4,E={__hamt_isEmpty:!0},D=function(V){return V===E||V&&V.__hamt_isEmpty},S=function(V,Z,ie,ue){return{type:g,edit:V,hash:Z,key:ie,value:ue,_modify:U}},T=function(V,Z,ie){return{type:_,edit:V,hash:Z,children:ie,_modify:$}},O=function(V,Z,ie){return{type:b,edit:V,mask:Z,children:ie,_modify:z}},C=function(V,Z,ie){return{type:x,edit:V,size:Z,children:ie,_modify:J}},k=function(V){return V===E||V.type===g||V.type===_},A=function(V,Z,ie,ue,he){for(var Oe=[],Ie=ue,Ce=0,$e=0;Ie;++$e)Ie&1&&(Oe[$e]=he[Ce++]),Ie>>>=1;return Oe[Z]=ie,C(V,Ce+1,Oe)},N=function(V,Z,ie,ue){for(var he=new Array(Z-1),Oe=0,Ie=0,Ce=0,$e=ue.length;Ce<$e;++Ce)if(Ce!==ie){var nt=ue[Ce];nt&&!D(nt)&&(he[Oe++]=nt,Ie|=1<<Ce)}return O(V,Ie,he)},B=function W(V,Z,ie,ue,he,Oe){if(ie===he)return T(V,ie,[Oe,ue]);var Ie=h(Z,ie),Ce=h(Z,he);return O(V,f(Ie)|f(Ce),Ie===Ce?[W(V,Z+r,ie,ue,he,Oe)]:Ie<Ce?[ue,Oe]:[Oe,ue])},R=function(V,Z,ie,ue,he,Oe,Ie,Ce){for(var $e=he.length,nt=0;nt<$e;++nt){var rt=he[nt];if(ie(Ie,rt.key)){var Ze=rt.value,yt=Oe(Ze);return yt===Ze?he:yt===l?(--Ce.value,w(V,nt,he)):y(V,nt,S(Z,ue,Ie,yt),he)}}var jn=Oe();return jn===l?he:(++Ce.value,y(V,$e,S(Z,ue,Ie,jn),he))},I=function(V,Z){return V===Z.edit},U=function(V,Z,ie,ue,he,Oe,Ie){if(Z(Oe,this.key)){var Ce=ue(this.value);return Ce===this.value?this:Ce===l?(--Ie.value,E):I(V,this)?(this.value=Ce,this):S(V,he,Oe,Ce)}var $e=ue();return $e===l?this:(++Ie.value,B(V,ie,this.hash,this,he,S(V,he,Oe,$e)))},$=function(V,Z,ie,ue,he,Oe,Ie){if(he===this.hash){var Ce=I(V,this),$e=R(Ce,V,Z,this.hash,this.children,ue,Oe,Ie);return $e===this.children?this:$e.length>1?T(V,this.hash,$e):$e[0]}var nt=ue();return nt===l?this:(++Ie.value,B(V,ie,this.hash,this,he,S(V,he,Oe,nt)))},z=function(V,Z,ie,ue,he,Oe,Ie){var Ce=this.mask,$e=this.children,nt=h(ie,he),rt=f(nt),Ze=p(Ce,rt),yt=Ce&rt,jn=yt?$e[Ze]:E,Si=jn._modify(V,Z,ie+r,ue,he,Oe,Ie);if(jn===Si)return this;var Ol=I(V,this),ia=Ce,Yn=void 0;if(yt&&D(Si)){if(ia&=~rt,!ia)return E;if($e.length<=2&&k($e[Ze^1]))return $e[Ze^1];Yn=w(Ol,Ze,$e)}else if(!yt&&!D(Si)){if($e.length>=o)return A(V,nt,Si,Ce,$e);ia|=rt,Yn=m(Ol,Ze,Si,$e)}else Yn=y(Ol,Ze,Si,$e);return Ol?(this.mask=ia,this.children=Yn,this):O(V,ia,Yn)},J=function(V,Z,ie,ue,he,Oe,Ie){var Ce=this.size,$e=this.children,nt=h(ie,he),rt=$e[nt],Ze=(rt||E)._modify(V,Z,ie+r,ue,he,Oe,Ie);if(rt===Ze)return this;var yt=I(V,this),jn=void 0;if(D(rt)&&!D(Ze))++Ce,jn=y(yt,nt,Ze,$e);else if(!D(rt)&&D(Ze)){if(--Ce,Ce<=a)return N(V,Ce,nt,$e);jn=y(yt,nt,E,$e)}else jn=y(yt,nt,Ze,$e);return yt?(this.size=Ce,this.children=jn,this):C(V,Ce,jn)};E._modify=function(W,V,Z,ie,ue,he,Oe){var Ie=ie();return Ie===l?E:(++Oe.value,S(W,ue,he,Ie))};function P(W,V,Z,ie,ue){this._editable=W,this._edit=V,this._config=Z,this._root=ie,this._size=ue}P.prototype.setTree=function(W,V){return this._editable?(this._root=W,this._size=V,this):W===this._root?this:new P(this._editable,this._edit,this._config,W,V)};var F=n.tryGetHash=function(W,V,Z,ie){for(var ue=ie._root,he=0,Oe=ie._config.keyEq;;)switch(ue.type){case g:return Oe(Z,ue.key)?ue.value:W;case _:{if(V===ue.hash)for(var Ie=ue.children,Ce=0,$e=Ie.length;Ce<$e;++Ce){var nt=Ie[Ce];if(Oe(Z,nt.key))return nt.value}return W}case b:{var rt=h(he,V),Ze=f(rt);if(ue.mask&Ze){ue=ue.children[p(ue.mask,Ze)],he+=r;break}return W}case x:{if(ue=ue.children[h(he,V)],ue){he+=r;break}return W}default:return W}};P.prototype.tryGetHash=function(W,V,Z){return F(W,V,Z,this)};var L=n.tryGet=function(W,V,Z){return F(W,Z._config.hash(V),V,Z)};P.prototype.tryGet=function(W,V){return L(W,V,this)};var j=n.getHash=function(W,V,Z){return F(void 0,W,V,Z)};P.prototype.getHash=function(W,V){return j(W,V,this)},n.get=function(W,V){return F(void 0,V._config.hash(W),W,V)},P.prototype.get=function(W,V){return L(V,W,this)};var M=n.has=function(W,V,Z){return F(l,W,V,Z)!==l};P.prototype.hasHash=function(W,V){return M(W,V,this)};var ne=n.has=function(W,V){return M(V._config.hash(W),W,V)};P.prototype.has=function(W){return ne(W,this)};var G=function(V,Z){return V===Z};n.make=function(W){return new P(0,0,{keyEq:W&&W.keyEq||G,hash:W&&W.hash||u},E,0)},n.empty=n.make();var te=n.isEmpty=function(W){return W&&!!D(W._root)};P.prototype.isEmpty=function(){return te(this)};var de=n.modifyHash=function(W,V,Z,ie){var ue={value:ie._size},he=ie._root._modify(ie._editable?ie._edit:NaN,ie._config.keyEq,0,W,V,Z,ue);return ie.setTree(he,ue.value)};P.prototype.modifyHash=function(W,V,Z){return de(Z,W,V,this)};var ye=n.modify=function(W,V,Z){return de(W,Z._config.hash(V),V,Z)};P.prototype.modify=function(W,V){return ye(V,W,this)};var oe=n.setHash=function(W,V,Z,ie){return de(c(Z),W,V,ie)};P.prototype.setHash=function(W,V,Z){return oe(W,V,Z,this)};var De=n.set=function(W,V,Z){return oe(Z._config.hash(W),W,V,Z)};P.prototype.set=function(W,V){return De(W,V,this)};var He=c(l),Ee=n.removeHash=function(W,V,Z){return de(He,W,V,Z)};P.prototype.removeHash=P.prototype.deleteHash=function(W,V){return Ee(W,V,this)};var Me=n.remove=function(W,V){return Ee(V._config.hash(W),W,V)};P.prototype.remove=P.prototype.delete=function(W){return Me(W,this)};var ve=n.beginMutation=function(W){return new P(W._editable+1,W._edit+1,W._config,W._root,W._size)};P.prototype.beginMutation=function(){return ve(this)};var Le=n.endMutation=function(W){return W._editable=W._editable&&W._editable-1,W};P.prototype.endMutation=function(){return Le(this)};var ft=n.mutate=function(W,V){var Z=ve(V);return W(Z),Le(Z)};P.prototype.mutate=function(W){return ft(W,this)};var qe=function(V){return V&&ut(V[0],V[1],V[2],V[3],V[4])},ut=function(V,Z,ie,ue,he){for(;ie<V;){var Oe=Z[ie++];if(Oe&&!D(Oe))return Pt(Oe,ue,[V,Z,ie,ue,he])}return qe(he)},Pt=function(V,Z,ie){switch(V.type){case g:return{value:Z(V),rest:ie};case _:case x:case b:var ue=V.children;return ut(ue.length,ue,0,Z,ie);default:return qe(ie)}},et={done:!0};function pe(W){this.v=W}pe.prototype.next=function(){if(!this.v)return et;var W=this.v;return this.v=qe(W.rest),W},pe.prototype[Symbol.iterator]=function(){return this};var Ge=function(V,Z){return new pe(Pt(V._root,Z))},K=function(V){return[V.key,V.value]},Y=n.entries=function(W){return Ge(W,K)};P.prototype.entries=P.prototype[Symbol.iterator]=function(){return Y(this)};var X=function(V){return V.key},be=n.keys=function(W){return Ge(W,X)};P.prototype.keys=function(){return be(this)};var _e=function(V){return V.value},Re=n.values=P.prototype.values=function(W){return Ge(W,_e)};P.prototype.values=function(){return Re(this)};var Te=n.fold=function(W,V,Z){var ie=Z._root;if(ie.type===g)return W(V,ie.value,ie.key);for(var ue=[ie.children],he=void 0;he=ue.pop();)for(var Oe=0,Ie=he.length;Oe<Ie;){var Ce=he[Oe++];Ce&&Ce.type&&(Ce.type===g?V=W(V,Ce.value,Ce.key):ue.push(Ce.children))}return V};P.prototype.fold=function(W,V){return Te(W,V,this)};var Fe=n.forEach=function(W,V){return Te(function(Z,ie,ue){return W(ie,ue,V)},null,V)};P.prototype.forEach=function(W){return Fe(W,this)};var we=n.count=function(W){return W._size};P.prototype.count=function(){return we(this)},Object.defineProperty(P.prototype,"size",{get:P.prototype.count}),t.exports?t.exports=n:(void 0).hamt=n});class $5{constructor(e){ze(this,"_map",void 0),this._map=new Map(e==null?void 0:e.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(e){return this._map.get(e)}has(e){return this._map.has(e)}set(e,n){return this._map.set(e,n),this}delete(e){return this._map.delete(e),this}clone(){return BS(this)}toMap(){return new Map(this._map)}}class VS{constructor(e){if(ze(this,"_hamt",M5.empty.beginMutation()),e instanceof VS){const n=e._hamt.endMutation();e._hamt=n.beginMutation(),this._hamt=n.beginMutation()}else if(e)for(const[n,r]of e.entries())this._hamt.set(n,r)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(e){return this._hamt.get(e)}has(e){return this._hamt.has(e)}set(e,n){return this._hamt.set(e,n),this}delete(e){return this._hamt.delete(e),this}clone(){return BS(this)}toMap(){return new Map(this._hamt)}}function BS(t){return _t("recoil_hamt_2020")?new VS(t):new $5(t)}var F5={persistentMap:BS},U5=F5.persistentMap,j5=Object.freeze({__proto__:null,persistentMap:U5});function V5(t,...e){const n=new Set;e:for(const r of t){for(const i of e)if(i.has(r))continue e;n.add(r)}return n}var Md=V5;function B5(t,e){const n=new Map;return t.forEach((r,i)=>{n.set(i,e(r,i))}),n}var ng=B5;function z5(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}}function W5(t){return{nodeDeps:ng(t.nodeDeps,e=>new Set(e)),nodeToNodeSubscriptions:ng(t.nodeToNodeSubscriptions,e=>new Set(e))}}function c0(t,e,n,r){const{nodeDeps:i,nodeToNodeSubscriptions:s}=n,o=i.get(t);if(o&&r&&o!==r.nodeDeps.get(t))return;i.set(t,e);const a=o==null?e:Md(e,o);for(const l of a)s.has(l)||s.set(l,new Set),Lt(s.get(l)).add(t);if(o){const l=Md(o,e);for(const c of l){if(!s.has(c))return;const u=Lt(s.get(c));u.delete(t),u.size===0&&s.delete(c)}}}function H5(t,e,n,r){var i,s,o,a;const l=n.getState();r===l.currentTree.version||r===((i=l.nextTree)===null||i===void 0?void 0:i.version)||((s=l.previousTree)===null||s===void 0||s.version);const c=n.getGraph(r);if(c0(t,e,c),r===((o=l.previousTree)===null||o===void 0?void 0:o.version)){const d=n.getGraph(l.currentTree.version);c0(t,e,d,c)}if(r===((a=l.previousTree)===null||a===void 0?void 0:a.version)||r===l.currentTree.version){var u;const d=(u=l.nextTree)===null||u===void 0?void 0:u.version;if(d!==void 0){const h=n.getGraph(d);c0(t,e,h,c)}}}var Sf={cloneGraph:W5,graph:z5,saveDepsToStore:H5};let G5=0;const q5=()=>G5++;let K5=0;const Q5=()=>K5++;let Y5=0;const X5=()=>Y5++;var Iy={getNextTreeStateVersion:q5,getNextStoreID:Q5,getNextComponentID:X5};const{persistentMap:DC}=j5,{graph:J5}=Sf,{getNextTreeStateVersion:ZD}=Iy;function eO(){const t=ZD();return{version:t,stateID:t,transactionMetadata:{},dirtyAtoms:new Set,atomValues:DC(),nonvalidatedAtoms:DC()}}function Z5(){const t=eO();return{currentTree:t,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(t.version,J5()),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}var tO={makeEmptyTreeState:eO,makeEmptyStoreState:Z5,getNextTreeStateVersion:ZD};class nO{}function e8(){return new nO}var Cy={RetentionZone:nO,retentionZone:e8};function t8(t,e){const n=new Set(t);return n.add(e),n}function n8(t,e){const n=new Set(t);return n.delete(e),n}function r8(t,e,n){const r=new Map(t);return r.set(e,n),r}function i8(t,e,n){const r=new Map(t);return r.set(e,n(r.get(e))),r}function s8(t,e){const n=new Map(t);return n.delete(e),n}function o8(t,e){const n=new Map(t);return e.forEach(r=>n.delete(r)),n}var rO={setByAddingToSet:t8,setByDeletingFromSet:n8,mapBySettingInMap:r8,mapByUpdatingInMap:i8,mapByDeletingFromMap:s8,mapByDeletingMultipleFromMap:o8};function*a8(t,e){let n=0;for(const r of t)e(r,n++)&&(yield r)}var zS=a8;function l8(t,e){return new Proxy(t,{get:(r,i)=>(!(i in r)&&i in e&&(r[i]=e[i]()),r[i]),ownKeys:r=>Object.keys(r)})}var iO=l8;const{getNode:Ef,getNodeMaybe:c8,recoilValuesForKeys:OC}=Tr,{RetentionZone:LC}=Cy,{setByAddingToSet:u8}=rO,d8=Object.freeze(new Set);class h8 extends Error{}function f8(t,e,n){if(!_t("recoil_memory_managament_2020"))return()=>{};const{nodesRetainedByZone:r}=t.getState().retention;function i(s){let o=r.get(s);o||r.set(s,o=new Set),o.add(e)}if(n instanceof LC)i(n);else if(Array.isArray(n))for(const s of n)i(s);return()=>{if(!_t("recoil_memory_managament_2020"))return;const{retention:s}=t.getState();function o(a){const l=s.nodesRetainedByZone.get(a);l==null||l.delete(e),l&&l.size===0&&s.nodesRetainedByZone.delete(a)}if(n instanceof LC)o(n);else if(Array.isArray(n))for(const a of n)o(a)}}function WS(t,e,n,r){const i=t.getState();if(i.nodeCleanupFunctions.has(n))return;const s=Ef(n),o=f8(t,n,s.retainedBy),a=s.init(t,e,r);i.nodeCleanupFunctions.set(n,()=>{a(),o()})}function p8(t,e,n){WS(t,t.getState().currentTree,e,n)}function m8(t,e){var n;const r=t.getState();(n=r.nodeCleanupFunctions.get(e))===null||n===void 0||n(),r.nodeCleanupFunctions.delete(e)}function g8(t,e,n){return WS(t,e,n,"get"),Ef(n).get(t,e)}function sO(t,e,n){return Ef(n).peek(t,e)}function y8(t,e,n){var r;const i=c8(e);return i==null||(r=i.invalidate)===null||r===void 0||r.call(i,t),{...t,atomValues:t.atomValues.clone().delete(e),nonvalidatedAtoms:t.nonvalidatedAtoms.clone().set(e,n),dirtyAtoms:u8(t.dirtyAtoms,e)}}function v8(t,e,n,r){const i=Ef(n);if(i.set==null)throw new h8(`Attempt to set read-only RecoilValue: ${n}`);const s=i.set;return WS(t,e,n,"set"),s(t,e,r)}function _8(t,e,n){const r=t.getState(),i=t.getGraph(e.version),s=Ef(n).nodeType;return iO({type:s},{loadable:()=>sO(t,e,n),isActive:()=>r.knownAtoms.has(n)||r.knownSelectors.has(n),isSet:()=>s==="selector"?!1:e.atomValues.has(n),isModified:()=>e.dirtyAtoms.has(n),deps:()=>{var o;return OC((o=i.nodeDeps.get(n))!==null&&o!==void 0?o:[])},subscribers:()=>{var o,a;return{nodes:OC(zS(oO(t,e,new Set([n])),l=>l!==n)),components:Ty((o=(a=r.nodeToComponentSubscriptions.get(n))===null||a===void 0?void 0:a.values())!==null&&o!==void 0?o:[],([l])=>({name:l}))}}})}function oO(t,e,n){const r=new Set,i=Array.from(n),s=t.getGraph(e.version);for(let a=i.pop();a;a=i.pop()){var o;r.add(a);const l=(o=s.nodeToNodeSubscriptions.get(a))!==null&&o!==void 0?o:d8;for(const c of l)r.has(c)||i.push(c)}return r}var qo={getNodeLoadable:g8,peekNodeLoadable:sO,setNodeValue:v8,initializeNode:p8,cleanUpNode:m8,setUnvalidatedAtomValue_DEPRECATED:y8,peekNodeInfo:_8,getDownstreamNodes:oO};let aO=null;function w8(t){aO=t}function b8(){var t;(t=aO)===null||t===void 0||t()}var lO={setInvalidateMemoizedSnapshot:w8,invalidateMemoizedSnapshot:b8};const{getDownstreamNodes:S8,getNodeLoadable:cO,setNodeValue:E8}=qo,{getNextComponentID:x8}=Iy,{getNode:T8,getNodeMaybe:uO}=Tr,{DefaultValue:HS}=Tr,{reactMode:I8}=bf,{AbstractRecoilValue:C8,RecoilState:k8,RecoilValueReadOnly:A8,isRecoilValue:R8}=Oc,{invalidateMemoizedSnapshot:N8}=lO;function P8(t,{key:e},n=t.getState().currentTree){var r,i;const s=t.getState();n.version===s.currentTree.version||n.version===((r=s.nextTree)===null||r===void 0?void 0:r.version)||(n.version,(i=s.previousTree)===null||i===void 0||i.version);const o=cO(t,n,e);return o.state==="loading"&&o.contents.catch(()=>{}),o}function D8(t,e){const n=t.clone();return e.forEach((r,i)=>{r.state==="hasValue"&&r.contents instanceof HS?n.delete(i):n.set(i,r)}),n}function O8(t,e,{key:n},r){if(typeof r=="function"){const i=cO(t,e,n);if(i.state==="loading"){const s=`Tried to set atom or selector "${n}" using an updater function while the current state is pending, this is not currently supported.`;throw Ke(s)}else if(i.state==="hasError")throw i.contents;return r(i.contents)}else return r}function L8(t,e,n){if(n.type==="set"){const{recoilValue:i,valueOrUpdater:s}=n,o=O8(t,e,i,s),a=E8(t,e,i.key,o);for(const[l,c]of a.entries())t1(e,l,c)}else if(n.type==="setLoadable"){const{recoilValue:{key:i},loadable:s}=n;t1(e,i,s)}else if(n.type==="markModified"){const{recoilValue:{key:i}}=n;e.dirtyAtoms.add(i)}else if(n.type==="setUnvalidated"){var r;const{recoilValue:{key:i},unvalidatedValue:s}=n,o=uO(i);o==null||(r=o.invalidate)===null||r===void 0||r.call(o,e),e.atomValues.delete(i),e.nonvalidatedAtoms.set(i,s),e.dirtyAtoms.add(i)}else FS(`Unknown action ${n.type}`)}function t1(t,e,n){n.state==="hasValue"&&n.contents instanceof HS?t.atomValues.delete(e):t.atomValues.set(e,n),t.dirtyAtoms.add(e),t.nonvalidatedAtoms.delete(e)}function dO(t,e){t.replaceState(n=>{const r=hO(n);for(const i of e)L8(t,r,i);return fO(t,r),N8(),r})}function ky(t,e){if($d.length){const n=$d[$d.length-1];let r=n.get(t);r||n.set(t,r=[]),r.push(e)}else dO(t,[e])}const $d=[];function M8(){const t=new Map;return $d.push(t),()=>{for(const[e,n]of t)dO(e,n);$d.pop()}}function hO(t){return{...t,atomValues:t.atomValues.clone(),nonvalidatedAtoms:t.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(t.dirtyAtoms)}}function fO(t,e){const n=S8(t,e,e.dirtyAtoms);for(const s of n){var r,i;(r=uO(s))===null||r===void 0||(i=r.invalidate)===null||i===void 0||i.call(r,e)}}function pO(t,e,n){ky(t,{type:"set",recoilValue:e,valueOrUpdater:n})}function $8(t,e,n){if(n instanceof HS)return pO(t,e,n);ky(t,{type:"setLoadable",recoilValue:e,loadable:n})}function F8(t,e){ky(t,{type:"markModified",recoilValue:e})}function U8(t,e,n){ky(t,{type:"setUnvalidated",recoilValue:e,unvalidatedValue:n})}function j8(t,{key:e},n,r=null){const i=x8(),s=t.getState();s.nodeToComponentSubscriptions.has(e)||s.nodeToComponentSubscriptions.set(e,new Map),Lt(s.nodeToComponentSubscriptions.get(e)).set(i,[r??"<not captured>",n]);const o=I8();if(o.early&&(o.mode==="LEGACY"||o.mode==="MUTABLE_SOURCE")){const a=t.getState().nextTree;a&&a.dirtyAtoms.has(e)&&n(a)}return{release:()=>{const a=t.getState(),l=a.nodeToComponentSubscriptions.get(e);l===void 0||!l.has(i)||(l.delete(i),l.size===0&&a.nodeToComponentSubscriptions.delete(e))}}}function V8(t,e){var n;const{currentTree:r}=t.getState(),i=T8(e.key);(n=i.clearCache)===null||n===void 0||n.call(i,t,r)}var Ji={RecoilValueReadOnly:A8,AbstractRecoilValue:C8,RecoilState:k8,getRecoilValueAsLoadable:P8,setRecoilValue:pO,setRecoilValueLoadable:$8,markRecoilValueModified:F8,setUnvalidatedRecoilValue:U8,subscribeToRecoilValue:j8,isRecoilValue:R8,applyAtomValueWrites:D8,batchStart:M8,writeLoadableToTreeState:t1,invalidateDownstreams:fO,copyTreeState:hO,refreshRecoilValue:V8};function B8(t,e,n){const r=t.entries();let i=r.next();for(;!i.done;){const s=i.value;if(e.call(n,s[1],s[0],t))return!0;i=r.next()}return!1}var z8=B8;const{cleanUpNode:W8}=qo,{deleteNodeConfigIfPossible:H8,getNode:mO}=Tr,{RetentionZone:gO}=Cy,G8=12e4,yO=new Set;function vO(t,e){const n=t.getState(),r=n.currentTree;if(n.nextTree)return;const i=new Set;for(const o of e)if(o instanceof gO)for(const a of Y8(n,o))i.add(a);else i.add(o);const s=q8(t,i);for(const o of s)Q8(t,r,o)}function q8(t,e){const n=t.getState(),r=n.currentTree,i=t.getGraph(r.version),s=new Set,o=new Set;return a(e),s;function a(l){const c=new Set,u=K8(t,r,l,s,o);for(const p of u){var d;if(mO(p).retainedBy==="recoilRoot"){o.add(p);continue}if(((d=n.retention.referenceCounts.get(p))!==null&&d!==void 0?d:0)>0){o.add(p);continue}if(_O(p).some(w=>n.retention.referenceCounts.get(w))){o.add(p);continue}const y=i.nodeToNodeSubscriptions.get(p);if(y&&z8(y,w=>o.has(w))){o.add(p);continue}s.add(p),c.add(p)}const h=new Set;for(const p of c)for(const y of(f=i.nodeDeps.get(p))!==null&&f!==void 0?f:yO){var f;s.has(y)||h.add(y)}h.size&&a(h)}}function K8(t,e,n,r,i){const s=t.getGraph(e.version),o=[],a=new Set;for(;n.size>0;)l(Lt(n.values().next().value));return o;function l(c){if(r.has(c)||i.has(c)){n.delete(c);return}if(a.has(c))return;const u=s.nodeToNodeSubscriptions.get(c);if(u)for(const d of u)l(d);a.add(c),n.delete(c),o.push(c)}}function Q8(t,e,n){if(!_t("recoil_memory_managament_2020"))return;W8(t,n);const r=t.getState();r.knownAtoms.delete(n),r.knownSelectors.delete(n),r.nodeTransactionSubscriptions.delete(n),r.retention.referenceCounts.delete(n);const i=_O(n);for(const l of i){var s;(s=r.retention.nodesRetainedByZone.get(l))===null||s===void 0||s.delete(n)}e.atomValues.delete(n),e.dirtyAtoms.delete(n),e.nonvalidatedAtoms.delete(n);const o=r.graphsByVersion.get(e.version);if(o){const l=o.nodeDeps.get(n);if(l!==void 0){o.nodeDeps.delete(n);for(const c of l){var a;(a=o.nodeToNodeSubscriptions.get(c))===null||a===void 0||a.delete(n)}}o.nodeToNodeSubscriptions.delete(n)}H8(n)}function Y8(t,e){var n;return(n=t.retention.nodesRetainedByZone.get(e))!==null&&n!==void 0?n:yO}function _O(t){const e=mO(t).retainedBy;return e===void 0||e==="components"||e==="recoilRoot"?[]:e instanceof gO?[e]:e}function X8(t,e){const n=t.getState();n.nextTree?n.retention.retainablesToCheckForRelease.add(e):vO(t,new Set([e]))}function J8(t,e,n){var r;if(!_t("recoil_memory_managament_2020"))return;const i=t.getState().retention.referenceCounts,s=((r=i.get(e))!==null&&r!==void 0?r:0)+n;s===0?wO(t,e):i.set(e,s)}function wO(t,e){if(!_t("recoil_memory_managament_2020"))return;t.getState().retention.referenceCounts.delete(e),X8(t,e)}function Z8(t){if(!_t("recoil_memory_managament_2020"))return;const e=t.getState();vO(t,e.retention.retainablesToCheckForRelease),e.retention.retainablesToCheckForRelease.clear()}function e6(t){return t===void 0?"recoilRoot":t}var _l={SUSPENSE_TIMEOUT_MS:G8,updateRetainCount:J8,updateRetainCountToZero:wO,releaseScheduledRetainablesNow:Z8,retainedByOptionWithDefault:e6};const{unstable_batchedUpdates:t6}=S4;var n6={unstable_batchedUpdates:t6};const{unstable_batchedUpdates:r6}=n6;var i6={unstable_batchedUpdates:r6};const{batchStart:s6}=Ji,{unstable_batchedUpdates:o6}=i6;let GS=o6||(t=>t());const a6=t=>{GS=t},l6=()=>GS,c6=t=>{GS(()=>{let e=()=>{};try{e=s6(),t()}finally{e()}})};var Ay={getBatcher:l6,setBatcher:a6,batchUpdates:c6};function*u6(t){for(const e of t)for(const n of e)yield n}var bO=u6;const SO=typeof Window>"u"||typeof window>"u",d6=t=>!SO&&(t===window||t instanceof Window),h6=typeof navigator<"u"&&navigator.product==="ReactNative";var Ry={isSSR:SO,isReactNative:h6,isWindow:d6};function f6(t,e){let n;return(...r)=>{n||(n={});const i=e(...r);return Object.hasOwnProperty.call(n,i)||(n[i]=t(...r)),n[i]}}function p6(t,e){let n,r;return(...i)=>{const s=e(...i);return n===s||(n=s,r=t(...i)),r}}function m6(t,e){let n,r;return[(...o)=>{const a=e(...o);return n===a||(n=a,r=t(...o)),r},()=>{n=null}]}var g6={memoizeWithArgsHash:f6,memoizeOneWithArgsHash:p6,memoizeOneWithArgsHashAndInvalidation:m6};const{batchUpdates:n1}=Ay,{initializeNode:y6,peekNodeInfo:v6}=qo,{graph:_6}=Sf,{getNextStoreID:w6}=Iy,{DEFAULT_VALUE:b6,recoilValues:MC,recoilValuesForKeys:$C}=Tr,{AbstractRecoilValue:S6,getRecoilValueAsLoadable:E6,setRecoilValue:FC,setUnvalidatedRecoilValue:x6}=Ji,{updateRetainCount:fm}=_l,{setInvalidateMemoizedSnapshot:T6}=lO,{getNextTreeStateVersion:I6,makeEmptyStoreState:C6}=tO,{isSSR:k6}=Ry,{memoizeOneWithArgsHashAndInvalidation:A6}=g6;class Ny{constructor(e,n){ze(this,"_store",void 0),ze(this,"_refCount",1),ze(this,"getLoadable",r=>(this.checkRefCount_INTERNAL(),E6(this._store,r))),ze(this,"getPromise",r=>(this.checkRefCount_INTERNAL(),this.getLoadable(r).toPromise())),ze(this,"getNodes_UNSTABLE",r=>{if(this.checkRefCount_INTERNAL(),(r==null?void 0:r.isModified)===!0){if((r==null?void 0:r.isInitialized)===!1)return[];const o=this._store.getState().currentTree;return $C(o.dirtyAtoms)}const i=this._store.getState().knownAtoms,s=this._store.getState().knownSelectors;return(r==null?void 0:r.isInitialized)==null?MC.values():r.isInitialized===!0?$C(bO([i,s])):zS(MC.values(),({key:o})=>!i.has(o)&&!s.has(o))}),ze(this,"getInfo_UNSTABLE",({key:r})=>(this.checkRefCount_INTERNAL(),v6(this._store,this._store.getState().currentTree,r))),ze(this,"map",r=>{this.checkRefCount_INTERNAL();const i=new r1(this,n1);return r(i),i}),ze(this,"asyncMap",async r=>{this.checkRefCount_INTERNAL();const i=new r1(this,n1);return i.retain(),await r(i),i.autoRelease_INTERNAL(),i}),this._store={storeID:w6(),parentStoreID:n,getState:()=>e,replaceState:r=>{e.currentTree=r(e.currentTree)},getGraph:r=>{const i=e.graphsByVersion;if(i.has(r))return Lt(i.get(r));const s=_6();return i.set(r,s),s},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw Ke("Cannot subscribe to Snapshots")}};for(const r of this._store.getState().knownAtoms)y6(this._store,r,"get"),fm(this._store,r,1);this.autoRelease_INTERNAL()}retain(){this._refCount<=0,this._refCount++;let e=!1;return()=>{e||(e=!0,this._release())}}autoRelease_INTERNAL(){k6||window.setTimeout(()=>this._release(),10)}_release(){if(this._refCount--,this._refCount===0){if(this._store.getState().nodeCleanupFunctions.forEach(e=>e()),this._store.getState().nodeCleanupFunctions.clear(),!_t("recoil_memory_managament_2020"))return}else this._refCount<0}isRetained(){return this._refCount>0}checkRefCount_INTERNAL(){_t("recoil_memory_managament_2020")&&this._refCount<=0}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}getStoreID(){return this.checkRefCount_INTERNAL(),this._store.storeID}}function EO(t,e,n=!1){const r=t.getState(),i=n?I6():e.version;return{currentTree:{version:n?i:e.version,stateID:n?i:e.stateID,transactionMetadata:{...e.transactionMetadata},dirtyAtoms:new Set(e.dirtyAtoms),atomValues:e.atomValues.clone(),nonvalidatedAtoms:e.nonvalidatedAtoms.clone()},commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(r.knownAtoms),knownSelectors:new Set(r.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(i,t.getGraph(e.version)),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map(Ty(r.nodeCleanupFunctions.entries(),([s])=>[s,()=>{}]))}}function R6(t){const e=new Ny(C6());return t!=null?e.map(t):e}const[UC,xO]=A6((t,e)=>{var n;const r=t.getState(),i=e==="latest"?(n=r.nextTree)!==null&&n!==void 0?n:r.currentTree:Lt(r.previousTree);return new Ny(EO(t,i),t.storeID)},(t,e)=>{var n,r;return String(e)+String(t.storeID)+String((n=t.getState().nextTree)===null||n===void 0?void 0:n.version)+String(t.getState().currentTree.version)+String((r=t.getState().previousTree)===null||r===void 0?void 0:r.version)});T6(xO);function N6(t,e="latest"){const n=UC(t,e);return n.isRetained()?n:(xO(),UC(t,e))}class r1 extends Ny{constructor(e,n){super(EO(e.getStore_INTERNAL(),e.getStore_INTERNAL().getState().currentTree,!0),e.getStoreID()),ze(this,"_batch",void 0),ze(this,"set",(r,i)=>{this.checkRefCount_INTERNAL();const s=this.getStore_INTERNAL();this._batch(()=>{fm(s,r.key,1),FC(this.getStore_INTERNAL(),r,i)})}),ze(this,"reset",r=>{this.checkRefCount_INTERNAL();const i=this.getStore_INTERNAL();this._batch(()=>{fm(i,r.key,1),FC(this.getStore_INTERNAL(),r,b6)})}),ze(this,"setUnvalidatedAtomValues_DEPRECATED",r=>{this.checkRefCount_INTERNAL();const i=this.getStore_INTERNAL();n1(()=>{for(const[s,o]of r.entries())fm(i,s,1),x6(i,new S6(s),o)})}),this._batch=n}}var Py={Snapshot:Ny,MutableSnapshot:r1,freshSnapshot:R6,cloneSnapshot:N6},P6=Py.Snapshot,D6=Py.MutableSnapshot,O6=Py.freshSnapshot,L6=Py.cloneSnapshot,Dy=Object.freeze({__proto__:null,Snapshot:P6,MutableSnapshot:D6,freshSnapshot:O6,cloneSnapshot:L6});function M6(...t){const e=new Set;for(const n of t)for(const r of n)e.add(r);return e}var $6=M6;const{useRef:F6}=Pe;function U6(t){const e=F6(t);return e.current===t&&typeof t=="function"&&(e.current=t()),e}var jC=U6;const{getNextTreeStateVersion:j6,makeEmptyStoreState:TO}=tO,{cleanUpNode:V6,getDownstreamNodes:B6,initializeNode:z6,setNodeValue:W6,setUnvalidatedAtomValue_DEPRECATED:H6}=qo,{graph:G6}=Sf,{cloneGraph:q6}=Sf,{getNextStoreID:IO}=Iy,{createMutableSource:u0,reactMode:CO}=bf,{applyAtomValueWrites:K6}=Ji,{releaseScheduledRetainablesNow:kO}=_l,{freshSnapshot:Q6}=Dy,{useCallback:Y6,useContext:AO,useEffect:i1,useMemo:X6,useRef:J6,useState:Z6}=Pe;function Gu(){throw Ke("This component must be used inside a <RecoilRoot> component.")}const RO=Object.freeze({storeID:IO(),getState:Gu,replaceState:Gu,getGraph:Gu,subscribeToTransactions:Gu,addTransactionMetadata:Gu});let s1=!1;function VC(t){if(s1)throw Ke("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");const e=t.getState();if(e.nextTree===null){_t("recoil_memory_managament_2020")&&_t("recoil_release_on_cascading_update_killswitch_2021")&&e.commitDepth>0&&kO(t);const n=e.currentTree.version,r=j6();e.nextTree={...e.currentTree,version:r,stateID:r,dirtyAtoms:new Set,transactionMetadata:{}},e.graphsByVersion.set(r,q6(Lt(e.graphsByVersion.get(n))))}}const NO=Pe.createContext({current:RO}),Oy=()=>AO(NO),PO=Pe.createContext(null);function eW(){return AO(PO)}function qS(t,e,n){const r=B6(t,n,n.dirtyAtoms);for(const i of r){const s=e.nodeToComponentSubscriptions.get(i);if(s)for(const[o,[a,l]]of s)l(n)}}function DO(t){const e=t.getState(),n=e.currentTree,r=n.dirtyAtoms;if(r.size){for(const[i,s]of e.nodeTransactionSubscriptions)if(r.has(i))for(const[o,a]of s)a(t);for(const[i,s]of e.transactionSubscriptions)s(t);(!CO().early||e.suspendedComponentResolvers.size>0)&&(qS(t,e,n),e.suspendedComponentResolvers.forEach(i=>i()),e.suspendedComponentResolvers.clear())}e.queuedComponentCallbacks_DEPRECATED.forEach(i=>i(n)),e.queuedComponentCallbacks_DEPRECATED.splice(0,e.queuedComponentCallbacks_DEPRECATED.length)}function tW(t){const e=t.getState();e.commitDepth++;try{const{nextTree:n}=e;if(n==null)return;e.previousTree=e.currentTree,e.currentTree=n,e.nextTree=null,DO(t),e.previousTree!=null?e.graphsByVersion.delete(e.previousTree.version):FS("Ended batch with no previous state, which is unexpected","recoil"),e.previousTree=null,_t("recoil_memory_managament_2020")&&n==null&&kO(t)}finally{e.commitDepth--}}function nW({setNotifyBatcherOfChange:t}){const e=Oy(),[,n]=Z6([]);return t(()=>n({})),i1(()=>(t(()=>n({})),()=>{t(()=>{})}),[t]),i1(()=>{O5.enqueueExecution("Batcher",()=>{tW(e.current)})}),null}function rW(t,e){const n=TO();return e({set:(r,i)=>{const s=n.currentTree,o=W6(t,s,r.key,i),a=new Set(o.keys()),l=s.nonvalidatedAtoms.clone();for(const c of a)l.delete(c);n.currentTree={...s,dirtyAtoms:$6(s.dirtyAtoms,a),atomValues:K6(s.atomValues,o),nonvalidatedAtoms:l}},setUnvalidatedAtomValues:r=>{r.forEach((i,s)=>{n.currentTree=H6(n.currentTree,s,i)})}}),n}function iW(t){const e=Q6(t),n=e.getStore_INTERNAL().getState();return e.retain(),n.nodeCleanupFunctions.forEach(r=>r()),n.nodeCleanupFunctions.clear(),n}let BC=0;function sW({initializeState_DEPRECATED:t,initializeState:e,store_INTERNAL:n,children:r}){let i;const s=f=>{const p=i.current.graphsByVersion;if(p.has(f))return Lt(p.get(f));const y=G6();return p.set(f,y),y},o=(f,p)=>{if(p==null){const{transactionSubscriptions:y}=d.current.getState(),w=BC++;return y.set(w,f),{release:()=>{y.delete(w)}}}else{const{nodeTransactionSubscriptions:y}=d.current.getState();y.has(p)||y.set(p,new Map);const w=BC++;return Lt(y.get(p)).set(w,f),{release:()=>{const m=y.get(p);m&&(m.delete(w),m.size===0&&y.delete(p))}}}},a=f=>{VC(d.current);for(const p of Object.keys(f))Lt(d.current.getState().nextTree).transactionMetadata[p]=f[p]},l=f=>{VC(d.current);const p=Lt(i.current.nextTree);let y;try{s1=!0,y=f(p)}finally{s1=!1}y!==p&&(i.current.nextTree=y,CO().early&&qS(d.current,i.current,y),Lt(c.current)())},c=J6(null),u=Y6(f=>{c.current=f},[c]),d=jC(()=>n??{storeID:IO(),getState:()=>i.current,replaceState:l,getGraph:s,subscribeToTransactions:o,addTransactionMetadata:a});n!=null&&(d.current=n),i=jC(()=>t!=null?rW(d.current,t):e!=null?iW(e):TO());const h=X6(()=>u0==null?void 0:u0(i,()=>i.current.currentTree.version),[i]);return i1(()=>{const f=d.current;for(const p of new Set(f.getState().knownAtoms))z6(f,p,"get");return()=>{for(const p of f.getState().knownAtoms)V6(f,p)}},[d]),Pe.createElement(NO.Provider,{value:d},Pe.createElement(PO.Provider,{value:h},Pe.createElement(nW,{setNotifyBatcherOfChange:u}),r))}function oW(t){const{override:e,...n}=t,r=Oy();return e===!1&&r.current!==RO?t.children:Pe.createElement(sW,n)}function aW(){return Oy().current.storeID}var Ns={RecoilRoot:oW,useStoreRef:Oy,useRecoilMutableSource:eW,useRecoilStoreID:aW,notifyComponents_FOR_TESTING:qS,sendEndOfBatchNotifications_FOR_TESTING:DO};function lW(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}var cW=lW;const{useEffect:uW,useRef:dW}=Pe;function hW(t){const e=dW();return uW(()=>{e.current=t}),e.current}var OO=hW;const{useStoreRef:fW}=Ns,{SUSPENSE_TIMEOUT_MS:pW}=_l,{updateRetainCount:qu}=_l,{RetentionZone:mW}=Cy,{useEffect:gW,useRef:yW}=Pe,{isSSR:zC}=Ry;function vW(t){if(_t("recoil_memory_managament_2020"))return _W(t)}function _W(t){const n=(Array.isArray(t)?t:[t]).map(o=>o instanceof mW?o:o.key),r=fW();gW(()=>{if(!_t("recoil_memory_managament_2020"))return;const o=r.current;if(i.current&&!zC)window.clearTimeout(i.current),i.current=null;else for(const a of n)qu(o,a,1);return()=>{for(const a of n)qu(o,a,-1)}},[r,...n]);const i=yW(),s=OO(n);if(!zC&&(s===void 0||!cW(s,n))){const o=r.current;for(const a of n)qu(o,a,1);if(s)for(const a of s)qu(o,a,-1);i.current&&window.clearTimeout(i.current),i.current=window.setTimeout(()=>{i.current=null;for(const a of n)qu(o,a,-1)},pW)}}var KS=vW;function wW(){return"<component name not available>"}var xf=wW;const{batchUpdates:bW}=Ay,{DEFAULT_VALUE:LO}=Tr,{currentRendererSupportsUseSyncExternalStore:SW,reactMode:fu,useMutableSource:EW,useSyncExternalStore:xW}=bf,{useRecoilMutableSource:TW,useStoreRef:Zi}=Ns,{AbstractRecoilValue:o1,getRecoilValueAsLoadable:Tf,setRecoilValue:rg,setUnvalidatedRecoilValue:IW,subscribeToRecoilValue:Lc}=Ji,{useCallback:br,useEffect:Mc,useMemo:MO,useRef:Fd,useState:QS}=Pe,{setByAddingToSet:CW}=rO,{isSSR:kW}=Ry;function YS(t,e,n){if(t.state==="hasValue")return t.contents;throw t.state==="loading"?new Promise(i=>{const s=n.current.getState().suspendedComponentResolvers;s.add(i),kW&&Ct(t.contents)&&t.contents.finally(()=>{s.delete(i)})}):t.state==="hasError"?t.contents:Ke(`Invalid value of loadable atom "${e.key}"`)}function AW(){const t=xf(),e=Zi(),[,n]=QS([]),r=Fd(new Set);r.current=new Set;const i=Fd(new Set),s=Fd(new Map),o=br(l=>{const c=s.current.get(l);c&&(c.release(),s.current.delete(l))},[s]),a=br((l,c)=>{s.current.has(c)&&n([])},[]);return Mc(()=>{const l=e.current;Md(r.current,i.current).forEach(c=>{if(s.current.has(c))return;const u=Lc(l,new o1(c),h=>a(h,c),t);s.current.set(c,u),l.getState().nextTree?l.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{a(l.getState(),c)}):a(l.getState(),c)}),Md(i.current,r.current).forEach(c=>{o(c)}),i.current=r.current}),Mc(()=>{const l=s.current;return Md(r.current,new Set(l.keys())).forEach(c=>{const u=Lc(e.current,new o1(c),d=>a(d,c),t);l.set(c,u)}),()=>l.forEach((c,u)=>o(u))},[t,e,o,a]),MO(()=>{function l(p){return y=>{rg(e.current,p,y)}}function c(p){return()=>rg(e.current,p,LO)}function u(p){var y;r.current.has(p.key)||(r.current=CW(r.current,p.key));const w=e.current.getState();return Tf(e.current,p,fu().early&&(y=w.nextTree)!==null&&y!==void 0?y:w.currentTree)}function d(p){const y=u(p);return YS(y,p,e)}function h(p){return[d(p),l(p)]}function f(p){return[u(p),l(p)]}return{getRecoilValue:d,getRecoilValueLoadable:u,getRecoilState:h,getRecoilStateLoadable:f,getSetRecoilState:l,getResetRecoilState:c}},[r,e])}const RW={current:0};function NW(t){const e=Zi(),n=xf(),r=br(()=>{var a;const l=e.current,c=l.getState(),u=fu().early&&(a=c.nextTree)!==null&&a!==void 0?a:c.currentTree;return{loadable:Tf(l,t,u),key:t.key}},[e,t]),i=br(a=>{let l;return()=>{var c,u;const d=a();return(c=l)!==null&&c!==void 0&&c.loadable.is(d.loadable)&&((u=l)===null||u===void 0?void 0:u.key)===d.key?l:(l=d,d)}},[]),s=MO(()=>i(r),[r,i]),o=br(a=>{const l=e.current;return Lc(l,t,a,n).release},[e,t,n]);return xW(o,s,s).loadable}function PW(t){const e=Zi(),n=br(()=>{var c;const u=e.current,d=u.getState(),h=fu().early&&(c=d.nextTree)!==null&&c!==void 0?c:d.currentTree;return Tf(u,t,h)},[e,t]),r=br(()=>n(),[n]),i=xf(),s=br((c,u)=>{const d=e.current;return Lc(d,t,()=>{if(!_t("recoil_suppress_rerender_in_callback"))return u();const f=n();l.current.is(f)||u(),l.current=f},i).release},[e,t,i,n]),o=TW();if(o==null)throw Ke("Recoil hooks must be used in components contained within a <RecoilRoot> component.");const a=EW(o,r,s),l=Fd(a);return Mc(()=>{l.current=a}),a}function a1(t){const e=Zi(),n=xf(),r=br(()=>{var l;const c=e.current,u=c.getState(),d=fu().early&&(l=u.nextTree)!==null&&l!==void 0?l:u.currentTree;return Tf(c,t,d)},[e,t]),i=br(()=>({loadable:r(),key:t.key}),[r,t.key]),s=br(l=>{const c=i();return l.loadable.is(c.loadable)&&l.key===c.key?l:c},[i]);Mc(()=>{const l=Lc(e.current,t,c=>{a(s)},n);return a(s),l.release},[n,t,e,s]);const[o,a]=QS(i);return o.key!==t.key?i().loadable:o.loadable}function DW(t){const e=Zi(),[,n]=QS([]),r=xf(),i=br(()=>{var a;const l=e.current,c=l.getState(),u=fu().early&&(a=c.nextTree)!==null&&a!==void 0?a:c.currentTree;return Tf(l,t,u)},[e,t]),s=i(),o=Fd(s);return Mc(()=>{o.current=s}),Mc(()=>{const a=e.current,l=a.getState(),c=Lc(a,t,d=>{var h;if(!_t("recoil_suppress_rerender_in_callback"))return n([]);const f=i();(h=o.current)!==null&&h!==void 0&&h.is(f)||n(f),o.current=f},r);if(l.nextTree)a.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{o.current=null,n([])});else{var u;if(!_t("recoil_suppress_rerender_in_callback"))return n([]);const d=i();(u=o.current)!==null&&u!==void 0&&u.is(d)||n(d),o.current=d}return c.release},[r,i,t,e]),s}function XS(t){return _t("recoil_memory_managament_2020")&&KS(t),{TRANSITION_SUPPORT:a1,SYNC_EXTERNAL_STORE:SW()?NW:a1,MUTABLE_SOURCE:PW,LEGACY:DW}[fu().mode](t)}function $O(t){const e=Zi(),n=XS(t);return YS(n,t,e)}function Ly(t){const e=Zi();return br(n=>{rg(e.current,t,n)},[e,t])}function OW(t){const e=Zi();return br(()=>{rg(e.current,t,LO)},[e,t])}function LW(t){return[$O(t),Ly(t)]}function MW(t){return[XS(t),Ly(t)]}function $W(){const t=Zi();return(e,n={})=>{bW(()=>{t.current.addTransactionMetadata(n),e.forEach((r,i)=>IW(t.current,new o1(i),r))})}}function FO(t){return _t("recoil_memory_managament_2020")&&KS(t),a1(t)}function UO(t){const e=Zi(),n=FO(t);return YS(n,t,e)}function FW(t){return[UO(t),Ly(t)]}var UW={recoilComponentGetRecoilValueCount_FOR_TESTING:RW,useRecoilInterface:AW,useRecoilState:LW,useRecoilStateLoadable:MW,useRecoilValue:$O,useRecoilValueLoadable:XS,useResetRecoilState:OW,useSetRecoilState:Ly,useSetUnvalidatedAtomValues:$W,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:FO,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:UO,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:FW};function jW(t,e){const n=new Map;for(const[r,i]of t)e(i,r)&&n.set(r,i);return n}var VW=jW;function BW(t,e){const n=new Set;for(const r of t)e(r)&&n.add(r);return n}var zW=BW;function WW(...t){const e=new Map;for(let n=0;n<t.length;n++){const r=t[n].keys();let i;for(;!(i=r.next()).done;)e.set(i.value,t[n].get(i.value))}return e}var HW=WW;const{batchUpdates:GW}=Ay,{DEFAULT_VALUE:qW,getNode:jO,nodes:KW}=Tr,{useStoreRef:JS}=Ns,{AbstractRecoilValue:QW,setRecoilValueLoadable:YW}=Ji,{SUSPENSE_TIMEOUT_MS:XW}=_l,{cloneSnapshot:ig}=Dy,{useCallback:My,useEffect:VO,useRef:WC,useState:JW}=Pe,{isSSR:HC}=Ry;function $y(t){const e=JS();VO(()=>e.current.subscribeToTransactions(t).release,[t,e])}function GC(t){const e=t.atomValues.toMap(),n=ng(VW(e,(r,i)=>{const o=jO(i).persistence_UNSTABLE;return o!=null&&o.type!=="none"&&r.state==="hasValue"}),r=>r.contents);return HW(t.nonvalidatedAtoms.toMap(),n)}function ZW(t){$y(My(e=>{let n=e.getState().previousTree;const r=e.getState().currentTree;n||(n=e.getState().currentTree);const i=GC(r),s=GC(n),o=ng(KW,l=>{var c,u,d,h;return{persistence_UNSTABLE:{type:(c=(u=l.persistence_UNSTABLE)===null||u===void 0?void 0:u.type)!==null&&c!==void 0?c:"none",backButton:(d=(h=l.persistence_UNSTABLE)===null||h===void 0?void 0:h.backButton)!==null&&d!==void 0?d:!1}}}),a=zW(r.dirtyAtoms,l=>i.has(l)||s.has(l));t({atomValues:i,previousAtomValues:s,atomInfo:o,modifiedAtoms:a,transactionMetadata:{...r.transactionMetadata}})},[t]))}function eH(t){$y(My(e=>{const n=ig(e,"latest"),r=ig(e,"previous");t({snapshot:n,previousSnapshot:r})},[t]))}function tH(){const t=JS(),[e,n]=JW(()=>ig(t.current)),r=OO(e),i=WC(),s=WC();if($y(My(a=>n(ig(a)),[])),VO(()=>{const a=e.retain();if(i.current&&!HC){var l;window.clearTimeout(i.current),i.current=null,(l=s.current)===null||l===void 0||l.call(s),s.current=null}return()=>{window.setTimeout(a,10)}},[e]),r!==e&&!HC){if(i.current){var o;window.clearTimeout(i.current),i.current=null,(o=s.current)===null||o===void 0||o.call(s),s.current=null}s.current=e.retain(),i.current=window.setTimeout(()=>{var a;i.current=null,(a=s.current)===null||a===void 0||a.call(s),s.current=null},XW)}return e}function BO(t,e){var n;const r=t.getState(),i=(n=r.nextTree)!==null&&n!==void 0?n:r.currentTree,s=e.getStore_INTERNAL().getState().currentTree;GW(()=>{const o=new Set;for(const c of[i.atomValues.keys(),s.atomValues.keys()])for(const u of c){var a,l;((a=i.atomValues.get(u))===null||a===void 0?void 0:a.contents)!==((l=s.atomValues.get(u))===null||l===void 0?void 0:l.contents)&&jO(u).shouldRestoreFromSnapshots&&o.add(u)}o.forEach(c=>{YW(t,new QW(c),s.atomValues.has(c)?Lt(s.atomValues.get(c)):qW)}),t.replaceState(c=>({...c,stateID:e.getID()}))})}function nH(){const t=JS();return My(e=>BO(t.current,e),[t])}var zO={useRecoilSnapshot:tH,gotoSnapshot:BO,useGotoRecoilSnapshot:nH,useRecoilTransactionObserver:eH,useTransactionObservation_DEPRECATED:ZW,useTransactionSubscription_DEPRECATED:$y};const{peekNodeInfo:rH}=qo,{useStoreRef:iH}=Ns;function sH(){const t=iH();return({key:e})=>rH(t.current,t.current.getState().currentTree,e)}var oH=sH;const{reactMode:aH}=bf,{RecoilRoot:lH,useStoreRef:cH}=Ns,{useMemo:uH}=Pe;function dH(){aH().mode==="MUTABLE_SOURCE"&&console.warn("Warning: There are known issues using useRecoilBridgeAcrossReactRoots() in recoil_mutable_source rendering mode.  Please consider upgrading to recoil_sync_external_store mode.");const t=cH().current;return uH(()=>{function e({children:n}){return Pe.createElement(lH,{store_INTERNAL:t},n)}return e},[t])}var hH=dH;const{loadableWithValue:fH}=wf,{initializeNode:pH}=qo,{DEFAULT_VALUE:mH,getNode:gH}=Tr,{copyTreeState:yH,getRecoilValueAsLoadable:vH,invalidateDownstreams:_H,writeLoadableToTreeState:wH}=Ji;function qC(t){return gH(t.key).nodeType==="atom"}class bH{constructor(e,n){ze(this,"_store",void 0),ze(this,"_treeState",void 0),ze(this,"_changes",void 0),ze(this,"get",r=>{if(this._changes.has(r.key))return this._changes.get(r.key);if(!qC(r))throw Ke("Reading selectors within atomicUpdate is not supported");const i=vH(this._store,r,this._treeState);if(i.state==="hasValue")return i.contents;throw i.state==="hasError"?i.contents:Ke(`Expected Recoil atom ${r.key} to have a value, but it is in a loading state.`)}),ze(this,"set",(r,i)=>{if(!qC(r))throw Ke("Setting selectors within atomicUpdate is not supported");if(typeof i=="function"){const s=this.get(r);this._changes.set(r.key,i(s))}else pH(this._store,r.key,"set"),this._changes.set(r.key,i)}),ze(this,"reset",r=>{this.set(r,mH)}),this._store=e,this._treeState=n,this._changes=new Map}newTreeState_INTERNAL(){if(this._changes.size===0)return this._treeState;const e=yH(this._treeState);for(const[n,r]of this._changes)wH(e,n,fH(r));return _H(this._store,e),e}}function SH(t){return e=>{t.replaceState(n=>{const r=new bH(t,n);return e(r),r.newTreeState_INTERNAL()})}}var EH={atomicUpdater:SH},xH=EH.atomicUpdater,WO=Object.freeze({__proto__:null,atomicUpdater:xH});function TH(t,e){if(!t)throw new Error(e)}var IH=TH,_d=IH;const{atomicUpdater:CH}=WO,{batchUpdates:kH}=Ay,{DEFAULT_VALUE:AH}=Tr,{useStoreRef:RH}=Ns,{refreshRecoilValue:NH,setRecoilValue:KC}=Ji,{cloneSnapshot:PH}=Dy,{gotoSnapshot:DH}=zO,{useCallback:OH}=Pe;class HO{}const LH=new HO;function GO(t,e,n,r){let i=LH,s;if(kH(()=>{const a="useRecoilCallback() expects a function that returns a function: it accepts a function of the type (RecoilInterface) => (Args) => ReturnType and returns a callback function (Args) => ReturnType, where RecoilInterface is an object {snapshot, set, ...} and Args and ReturnType are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if(typeof e!="function")throw Ke(a);const l=iO({...r??{},set:(u,d)=>KC(t,u,d),reset:u=>KC(t,u,AH),refresh:u=>NH(t,u),gotoSnapshot:u=>DH(t,u),transact_UNSTABLE:u=>CH(t)(u)},{snapshot:()=>{const u=PH(t);return s=u.retain(),u}}),c=e(l);if(typeof c!="function")throw Ke(a);i=c(...n)}),i instanceof HO&&_d(!1),Ct(i))i=i.finally(()=>{var a;(a=s)===null||a===void 0||a()});else{var o;(o=s)===null||o===void 0||o()}return i}function MH(t,e){const n=RH();return OH((...r)=>GO(n.current,t,r),e!=null?[...e,n]:void 0)}var qO={recoilCallback:GO,useRecoilCallback:MH};const{useStoreRef:$H}=Ns,{refreshRecoilValue:FH}=Ji,{useCallback:UH}=Pe;function jH(t){const e=$H();return UH(()=>{const n=e.current;FH(n,t)},[t,e])}var VH=jH;const{atomicUpdater:BH}=WO,{useStoreRef:zH}=Ns,{useMemo:WH}=Pe;function HH(t,e){const n=zH();return WH(()=>(...r)=>{BH(n.current)(s=>{t(s)(...r)})},e!=null?[...e,n]:void 0)}var GH=HH;class qH{constructor(e){ze(this,"value",void 0),this.value=e}}var KH={WrappedValue:qH},QH=KH.WrappedValue,KO=Object.freeze({__proto__:null,WrappedValue:QH});const{isFastRefreshEnabled:YH}=bf;class QC extends Error{}class XH{constructor(e){var n,r,i;ze(this,"_name",void 0),ze(this,"_numLeafs",void 0),ze(this,"_root",void 0),ze(this,"_onHit",void 0),ze(this,"_onSet",void 0),ze(this,"_mapNodeValue",void 0),this._name=e==null?void 0:e.name,this._numLeafs=0,this._root=null,this._onHit=(n=e==null?void 0:e.onHit)!==null&&n!==void 0?n:()=>{},this._onSet=(r=e==null?void 0:e.onSet)!==null&&r!==void 0?r:()=>{},this._mapNodeValue=(i=e==null?void 0:e.mapNodeValue)!==null&&i!==void 0?i:s=>s}size(){return this._numLeafs}root(){return this._root}get(e,n){var r;return(r=this.getLeafNode(e,n))===null||r===void 0?void 0:r.value}getLeafNode(e,n){if(this._root==null)return;let r=this._root;for(;r;){if(n==null||n.onNodeVisit(r),r.type==="leaf")return this._onHit(r),r;const i=this._mapNodeValue(e(r.nodeKey));r=r.branches.get(i)}}set(e,n,r){const i=()=>{var s,o,a,l;let c,u;for(const[w,m]of e){var d,h,f;const g=this._root;if((g==null?void 0:g.type)==="leaf")throw this.invalidCacheError();const _=c;if(c=_?_.branches.get(u):g,c=(d=c)!==null&&d!==void 0?d:{type:"branch",nodeKey:w,parent:_,branches:new Map,branchKey:u},c.type!=="branch"||c.nodeKey!==w)throw this.invalidCacheError();_==null||_.branches.set(u,c),r==null||(h=r.onNodeVisit)===null||h===void 0||h.call(r,c),u=this._mapNodeValue(m),this._root=(f=this._root)!==null&&f!==void 0?f:c}const p=c?(s=c)===null||s===void 0?void 0:s.branches.get(u):this._root;if(p!=null&&(p.type!=="leaf"||p.branchKey!==u))throw this.invalidCacheError();const y={type:"leaf",value:n,parent:c,branchKey:u};(o=c)===null||o===void 0||o.branches.set(u,y),this._root=(a=this._root)!==null&&a!==void 0?a:y,this._numLeafs++,this._onSet(y),r==null||(l=r.onNodeVisit)===null||l===void 0||l.call(r,y)};try{i()}catch(s){if(s instanceof QC)this.clear(),i();else throw s}}delete(e){const n=this.root();if(!n)return!1;if(e===n)return this._root=null,this._numLeafs=0,!0;let r=e.parent,i=e.branchKey;for(;r;){var s;if(r.branches.delete(i),r===n)return r.branches.size===0?(this._root=null,this._numLeafs=0):this._numLeafs--,!0;if(r.branches.size>0)break;i=(s=r)===null||s===void 0?void 0:s.branchKey,r=r.parent}for(;r!==n;r=r.parent)if(r==null)return!1;return this._numLeafs--,!0}clear(){this._numLeafs=0,this._root=null}invalidCacheError(){const e=YH()?"Possible Fast Refresh module reload detected.  This may also be caused by an selector returning inconsistent values. Resetting cache.":"Invalid cache values.  This happens when selectors do not return consistent values for the same input dependency values.  That may also be caused when using Fast Refresh to change a selector implementation.  Resetting cache.";throw FS(e+(this._name!=null?` - ${this._name}`:"")),new QC}}var JH={TreeCache:XH},ZH=JH.TreeCache,QO=Object.freeze({__proto__:null,TreeCache:ZH});class eG{constructor(e){var n;ze(this,"_maxSize",void 0),ze(this,"_size",void 0),ze(this,"_head",void 0),ze(this,"_tail",void 0),ze(this,"_map",void 0),ze(this,"_keyMapper",void 0),this._maxSize=e.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=(n=e.mapKey)!==null&&n!==void 0?n:r=>r}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(e){return this._map.has(this._keyMapper(e))}get(e){const n=this._keyMapper(e),r=this._map.get(n);if(r)return this.set(e,r.value),r.value}set(e,n){const r=this._keyMapper(e);this._map.get(r)&&this.delete(e);const s=this.head(),o={key:e,right:s,left:null,value:n};s?s.left=o:this._tail=o,this._map.set(r,o),this._head=o,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){const e=this.tail();e&&this.delete(e.key)}delete(e){const n=this._keyMapper(e);if(!this._size||!this._map.has(n))return;const r=Lt(this._map.get(n)),i=r.right,s=r.left;i&&(i.left=r.left),s&&(s.right=r.right),r===this.head()&&(this._head=i),r===this.tail()&&(this._tail=s),this._map.delete(n),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}}var tG={LRUCache:eG},nG=tG.LRUCache,YO=Object.freeze({__proto__:null,LRUCache:nG});const{LRUCache:rG}=YO,{TreeCache:iG}=QO;function sG({name:t,maxSize:e,mapNodeValue:n=r=>r}){const r=new rG({maxSize:e}),i=new iG({name:t,mapNodeValue:n,onHit:s=>{r.set(s,!0)},onSet:s=>{const o=r.tail();r.set(s,!0),o&&i.size()>e&&i.delete(o.key)}});return i}var YC=sG;function oi(t,e,n){if(typeof t=="string"&&!t.includes('"')&&!t.includes("\\"))return`"${t}"`;switch(typeof t){case"undefined":return"";case"boolean":return t?"true":"false";case"number":case"symbol":return String(t);case"string":return JSON.stringify(t);case"function":if((e==null?void 0:e.allowFunctions)!==!0)throw Ke("Attempt to serialize function in a Recoil cache key");return`__FUNCTION(${t.name})__`}if(t===null)return"null";if(typeof t!="object"){var r;return(r=JSON.stringify(t))!==null&&r!==void 0?r:""}if(Ct(t))return"__PROMISE__";if(Array.isArray(t))return`[${t.map((i,s)=>oi(i,e,s.toString()))}]`;if(typeof t.toJSON=="function")return oi(t.toJSON(n),e,n);if(t instanceof Map){const i={};for(const[s,o]of t)i[typeof s=="string"?s:oi(s,e)]=o;return oi(i,e,n)}return t instanceof Set?oi(Array.from(t).sort((i,s)=>oi(i,e).localeCompare(oi(s,e))),e,n):Symbol!==void 0&&t[Symbol.iterator]!=null&&typeof t[Symbol.iterator]=="function"?oi(Array.from(t),e,n):`{${Object.keys(t).filter(i=>t[i]!==void 0).sort().map(i=>`${oi(i,e)}:${oi(t[i],e,i)}`).join(",")}}`}function oG(t,e={allowFunctions:!1}){return oi(t,e)}var Fy=oG;const{TreeCache:aG}=QO,Np={equality:"reference",eviction:"keep-all",maxSize:1/0};function lG({equality:t=Np.equality,eviction:e=Np.eviction,maxSize:n=Np.maxSize}=Np,r){const i=cG(t);return uG(e,n,i,r)}function cG(t){switch(t){case"reference":return e=>e;case"value":return e=>Fy(e)}throw Ke(`Unrecognized equality policy ${t}`)}function uG(t,e,n,r){switch(t){case"keep-all":return new aG({name:r,mapNodeValue:n});case"lru":return YC({name:r,maxSize:Lt(e),mapNodeValue:n});case"most-recent":return YC({name:r,maxSize:1,mapNodeValue:n})}throw Ke(`Unrecognized eviction policy ${t}`)}var dG=lG;function hG(t){return()=>null}var fG={startPerfBlock:hG};const{isLoadable:pG,loadableWithError:Pp,loadableWithPromise:mG,loadableWithValue:d0}=wf,{WrappedValue:XO}=KO,{getNodeLoadable:Dp,peekNodeLoadable:gG,setNodeValue:yG}=qo,{saveDepsToStore:vG}=Sf,{DEFAULT_VALUE:_G,getConfigDeletionHandler:wG,getNode:bG,registerNode:XC}=Tr,{isRecoilValue:SG}=Oc,{markRecoilValueModified:JC}=Ji,{retainedByOptionWithDefault:EG}=_l,{recoilCallback:xG}=qO,{startPerfBlock:TG}=fG;class JO{}const Ku=new JO,Qu=[],Op=new Map,IG=(()=>{let t=0;return()=>t++})();function ZO(t){let e=null;const{key:n,get:r,cachePolicy_UNSTABLE:i}=t,s=t.set!=null?t.set:void 0,o=new Set,a=dG(i??{equality:"reference",eviction:"keep-all"},n),l=EG(t.retainedBy_UNSTABLE),c=new Map;let u=0;function d(){return!_t("recoil_memory_managament_2020")||u>0}function h(P){return P.getState().knownSelectors.add(n),u++,()=>{u--}}function f(){return wG(n)!==void 0&&!d()}function p(P,F,L,j,M){R(F,j,M),y(P,L)}function y(P,F){N(P,F)&&A(P),m(F,!0)}function w(P,F){N(P,F)&&(Lt(O(P)).stateVersions.clear(),m(F,!1))}function m(P,F){const L=Op.get(P);if(L!=null){for(const j of L)JC(j,Lt(e));F&&Op.delete(P)}}function g(P,F){let L=Op.get(F);L==null&&Op.set(F,L=new Set),L.add(P)}function _(P,F,L,j,M,ne){return F.then(G=>{if(!d())throw A(P),Ku;const te=d0(G);return p(P,L,M,te,j),G}).catch(G=>{if(!d())throw A(P),Ku;if(Ct(G))return b(P,G,L,j,M,ne);const te=Pp(G);throw p(P,L,M,te,j),G})}function b(P,F,L,j,M,ne){return F.then(G=>{if(!d())throw A(P),Ku;ne.loadingDepKey!=null&&ne.loadingDepPromise===F?L.atomValues.set(ne.loadingDepKey,d0(G)):P.getState().knownSelectors.forEach(oe=>{L.atomValues.delete(oe)});const te=D(P,L);if(te&&te.state!=="loading"){if((N(P,M)||O(P)==null)&&y(P,M),te.state==="hasValue")return te.contents;throw te.contents}if(!N(P,M)){const oe=T(P,L);if(oe!=null)return oe.loadingLoadable.contents}const[de,ye]=E(P,L,M);if(de.state!=="loading"&&p(P,L,M,de,ye),de.state==="hasError")throw de.contents;return de.contents}).catch(G=>{if(G instanceof JO)throw Ku;if(!d())throw A(P),Ku;const te=Pp(G);throw p(P,L,M,te,j),G})}function x(P,F,L,j){var M,ne,G,te;if(N(P,j)||F.version===((M=P.getState())===null||M===void 0||(ne=M.currentTree)===null||ne===void 0?void 0:ne.version)||F.version===((G=P.getState())===null||G===void 0||(te=G.nextTree)===null||te===void 0?void 0:te.version)){var de,ye,oe;vG(n,L,P,(de=(ye=P.getState())===null||ye===void 0||(oe=ye.nextTree)===null||oe===void 0?void 0:oe.version)!==null&&de!==void 0?de:P.getState().currentTree.version)}for(const De of L)o.add(De)}function E(P,F,L){const j=TG(n);let M=!0,ne=!0;const G=()=>{j(),ne=!1};let te,de=!1,ye;const oe={loadingDepKey:null,loadingDepPromise:null},De=new Map;function He({key:Me}){const ve=Dp(P,F,Me);switch(De.set(Me,ve),M||(x(P,F,new Set(De.keys()),L),w(P,L)),ve.state){case"hasValue":return ve.contents;case"hasError":throw ve.contents;case"loading":throw oe.loadingDepKey=Me,oe.loadingDepPromise=ve.contents,ve.contents}throw Ke("Invalid Loadable state")}const Ee=Me=>(...ve)=>{if(ne)throw Ke("Callbacks from getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can work with Recoil state without a subscription.");return e==null&&_d(!1),xG(P,Me,ve,{node:e})};try{te=r({get:He,getCallback:Ee}),te=SG(te)?He(te):te,pG(te)&&(te.state==="hasError"&&(de=!0),te=te.contents),Ct(te)?te=_(P,te,F,De,L,oe).finally(G):G(),te=te instanceof XO?te.value:te}catch(Me){te=Me,Ct(te)?te=b(P,te,F,De,L,oe).finally(G):(de=!0,G())}return de?ye=Pp(te):Ct(te)?ye=mG(te):ye=d0(te),M=!1,k(P,L,De),x(P,F,new Set(De.keys()),L),[ye,De]}function D(P,F){let L=F.atomValues.get(n);if(L!=null)return L;const j=new Set;try{L=a.get(ne=>(typeof ne!="string"&&_d(!1),Dp(P,F,ne).contents),{onNodeVisit:ne=>{ne.type==="branch"&&ne.nodeKey!==n&&j.add(ne.nodeKey)}})}catch(ne){throw Ke(`Problem with cache lookup for selector "${n}": ${ne.message}`)}if(L){var M;F.atomValues.set(n,L),x(P,F,j,(M=O(P))===null||M===void 0?void 0:M.executionID)}return L}function S(P,F){const L=D(P,F);if(L!=null)return A(P),L;const j=T(P,F);if(j!=null){var M;return((M=j.loadingLoadable)===null||M===void 0?void 0:M.state)==="loading"&&g(P,j.executionID),j.loadingLoadable}const ne=IG(),[G,te]=E(P,F,ne);return G.state==="loading"?(C(P,ne,G,te,F),g(P,ne)):(A(P),R(F,G,te)),G}function T(P,F){const L=bO([c.has(P)?[Lt(c.get(P))]:[],Ty(zS(c,([M])=>M!==P),([,M])=>M)]);function j(M){for(const[ne,G]of M)if(!Dp(P,F,ne).is(G))return!0;return!1}for(const M of L){if(M.stateVersions.get(F.version)||!j(M.depValuesDiscoveredSoFarDuringAsyncWork))return M.stateVersions.set(F.version,!0),M;M.stateVersions.set(F.version,!1)}}function O(P){return c.get(P)}function C(P,F,L,j,M){c.set(P,{depValuesDiscoveredSoFarDuringAsyncWork:j,executionID:F,loadingLoadable:L,stateVersions:new Map([[M.version,!0]])})}function k(P,F,L){if(N(P,F)){const j=O(P);j!=null&&(j.depValuesDiscoveredSoFarDuringAsyncWork=L)}}function A(P){c.delete(P)}function N(P,F){var L;return F===((L=O(P))===null||L===void 0?void 0:L.executionID)}function B(P){return Array.from(P.entries()).map(([F,L])=>[F,L.contents])}function R(P,F,L){P.atomValues.set(n,F);try{a.set(B(L),F)}catch(j){throw Ke(`Problem with setting cache for selector "${n}": ${j.message}`)}}function I(P){if(Qu.includes(n)){const F=`Recoil selector has circular dependencies: ${Qu.slice(Qu.indexOf(n)).join(" → ")}`;return Pp(Ke(F))}Qu.push(n);try{return P()}finally{Qu.pop()}}function U(P,F){const L=F.atomValues.get(n);return L??a.get(j=>{var M;return typeof j!="string"&&_d(!1),(M=gG(P,F,j))===null||M===void 0?void 0:M.contents})}function $(P,F){return I(()=>S(P,F))}function z(P){P.atomValues.delete(n)}function J(P,F){e==null&&_d(!1);for(const j of o){var L;const M=bG(j);(L=M.clearCache)===null||L===void 0||L.call(M,P,F)}o.clear(),z(F),a.clear(),JC(P,e)}return s!=null?e=XC({key:n,nodeType:"selector",peek:U,get:$,set:(F,L,j)=>{let M=!1;const ne=new Map;function G({key:oe}){if(M)throw Ke("Recoil: Async selector sets are not currently supported.");const De=Dp(F,L,oe);if(De.state==="hasValue")return De.contents;if(De.state==="loading"){const He=`Getting value of asynchronous atom or selector "${oe}" in a pending state while setting selector "${n}" is not yet supported.`;throw Ke(He)}else throw De.contents}function te(oe,De){if(M)throw Ke("Recoil: Async selector sets are not currently supported.");const He=typeof De=="function"?De(G(oe)):De;yG(F,L,oe.key,He).forEach((Me,ve)=>ne.set(ve,Me))}function de(oe){te(oe,_G)}const ye=s({set:te,get:G,reset:de},j);if(ye!==void 0)throw Ct(ye)?Ke("Recoil: Async selector sets are not currently supported."):Ke("Recoil: selector set should be a void function.");return M=!0,ne},init:h,invalidate:z,clearCache:J,shouldDeleteConfigOnRelease:f,dangerouslyAllowMutability:t.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:l}):e=XC({key:n,nodeType:"selector",peek:U,get:$,init:h,invalidate:z,clearCache:J,shouldDeleteConfigOnRelease:f,dangerouslyAllowMutability:t.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:l})}ZO.value=t=>new XO(t);var $c=ZO;const{isLoadable:CG,loadableWithError:h0,loadableWithPromise:f0,loadableWithValue:Ml}=wf,{WrappedValue:eL}=KO,{peekNodeInfo:kG}=qo,{DEFAULT_VALUE:da,DefaultValue:qs,getConfigDeletionHandler:tL,registerNode:AG,setConfigDeletionHandler:RG}=Tr,{isRecoilValue:NG}=Oc,{getRecoilValueAsLoadable:PG,markRecoilValueModified:DG,setRecoilValue:ZC,setRecoilValueLoadable:OG}=Ji,{retainedByOptionWithDefault:LG}=_l,Yu=t=>t instanceof eL?t.value:t;function MG(t){const{key:e,persistence_UNSTABLE:n}=t,r=LG(t.retainedBy_UNSTABLE);let i=0;function s(g){return f0(g.then(_=>(o=Ml(_),_)).catch(_=>{throw o=h0(_),_}))}let o=Ct(t.default)?s(t.default):CG(t.default)?t.default.state==="loading"?s(t.default.contents):t.default:Ml(Yu(t.default));o.contents;let a;const l=new Map;function c(g){return g}function u(g,_){const b=_.then(x=>{var E,D;return((D=((E=g.getState().nextTree)!==null&&E!==void 0?E:g.getState().currentTree).atomValues.get(e))===null||D===void 0?void 0:D.contents)===b&&ZC(g,m,x),x}).catch(x=>{var E,D;throw((D=((E=g.getState().nextTree)!==null&&E!==void 0?E:g.getState().currentTree).atomValues.get(e))===null||D===void 0?void 0:D.contents)===b&&OG(g,m,h0(x)),x});return b}function d(g,_,b){var x;i++;const E=()=>{var A;i--,(A=l.get(g))===null||A===void 0||A.forEach(N=>N()),l.delete(g)};if(g.getState().knownAtoms.add(e),o.state==="loading"){const A=()=>{var N;((N=g.getState().nextTree)!==null&&N!==void 0?N:g.getState().currentTree).atomValues.has(e)||DG(g,m)};o.contents.finally(A)}const D=(x=t.effects)!==null&&x!==void 0?x:t.effects_UNSTABLE;if(D!=null){let I=function(F){if(N&&F.key===e){const L=A;return L instanceof qs?h(g,_):Ct(L)?f0(L.then(j=>j instanceof qs?o.toPromise():j)):Ml(L)}return PG(g,F)},U=function(F){return I(F).toPromise()},$=function(F){var L;const j=kG(g,(L=g.getState().nextTree)!==null&&L!==void 0?L:g.getState().currentTree,F.key);return N&&F.key===e&&!(A instanceof qs)?{...j,isSet:!0,loadable:I(F)}:j};var O=I,C=U,k=$;let A=da,N=!0,B=!1,R=null;const z=F=>L=>{if(N){const j=I(m),M=j.state==="hasValue"?j.contents:da;A=typeof L=="function"?L(M):L,Ct(A)&&(A=A.then(ne=>(R={effect:F,value:ne},ne)))}else{if(Ct(L))throw Ke("Setting atoms to async values is not implemented.");typeof L!="function"&&(R={effect:F,value:Yu(L)}),ZC(g,m,typeof L=="function"?j=>{const M=Yu(L(j));return R={effect:F,value:M},M}:Yu(L))}},J=F=>()=>z(F)(da),P=F=>L=>{var j;const{release:M}=g.subscribeToTransactions(ne=>{var G;let{currentTree:te,previousTree:de}=ne.getState();de||(de=te);const ye=(G=te.atomValues.get(e))!==null&&G!==void 0?G:o;if(ye.state==="hasValue"){var oe,De,He,Ee;const Me=ye.contents,ve=(oe=de.atomValues.get(e))!==null&&oe!==void 0?oe:o,Le=ve.state==="hasValue"?ve.contents:da;((De=R)===null||De===void 0?void 0:De.effect)!==F||((He=R)===null||He===void 0?void 0:He.value)!==Me?L(Me,Le,!te.atomValues.has(e)):((Ee=R)===null||Ee===void 0?void 0:Ee.effect)===F&&(R=null)}},e);l.set(g,[...(j=l.get(g))!==null&&j!==void 0?j:[],M])};for(const F of D)try{const L=F({node:m,storeID:g.storeID,parentStoreID_UNSTABLE:g.parentStoreID,trigger:b,setSelf:z(F),resetSelf:J(F),onSet:P(F),getPromise:U,getLoadable:I,getInfo_UNSTABLE:$});if(L!=null){var S;l.set(g,[...(S=l.get(g))!==null&&S!==void 0?S:[],L])}}catch(L){A=L,B=!0}if(N=!1,!(A instanceof qs)){var T;const F=B?h0(A):Ct(A)?f0(u(g,A)):Ml(Yu(A));F.contents,_.atomValues.set(e,F),(T=g.getState().nextTree)===null||T===void 0||T.atomValues.set(e,F)}}return E}function h(g,_){var b,x;return(b=(x=_.atomValues.get(e))!==null&&x!==void 0?x:a)!==null&&b!==void 0?b:o}function f(g,_){if(_.atomValues.has(e))return Lt(_.atomValues.get(e));if(_.nonvalidatedAtoms.has(e)){if(a!=null)return a;if(n==null)return o;const b=_.nonvalidatedAtoms.get(e),x=n.validator(b,da);return a=x instanceof qs?o:Ml(x),a}else return o}function p(){a=void 0}function y(g,_,b){if(_.atomValues.has(e)){const x=Lt(_.atomValues.get(e));if(x.state==="hasValue"&&b===x.contents)return new Map}else if(!_.nonvalidatedAtoms.has(e)&&b instanceof qs)return new Map;return a=void 0,new Map().set(e,Ml(b))}function w(){return tL(e)!==void 0&&i<=0}const m=AG({key:e,nodeType:"atom",peek:h,get:f,set:y,init:d,invalidate:p,shouldDeleteConfigOnRelease:w,dangerouslyAllowMutability:t.dangerouslyAllowMutability,persistence_UNSTABLE:t.persistence_UNSTABLE?{type:t.persistence_UNSTABLE.type,backButton:t.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:r});return m}function ZS(t){const{...e}=t,n="default"in t?t.default:new Promise(()=>{});return NG(n)?$G({...e,default:n}):MG({...e,default:n})}function $G(t){const e=ZS({...t,default:da,persistence_UNSTABLE:t.persistence_UNSTABLE===void 0?void 0:{...t.persistence_UNSTABLE,validator:r=>r instanceof qs?r:Lt(t.persistence_UNSTABLE).validator(r,da)},effects:t.effects,effects_UNSTABLE:t.effects_UNSTABLE}),n=$c({key:`${t.key}__withFallback`,get:({get:r})=>{const i=r(e);return i instanceof qs?t.default:i},set:({set:r},i)=>r(e,i),cachePolicy_UNSTABLE:{eviction:"most-recent"},dangerouslyAllowMutability:t.dangerouslyAllowMutability});return RG(n.key,tL(t.key)),n}ZS.value=t=>new eL(t);var nL=ZS;class FG{constructor(e){var n;ze(this,"_map",void 0),ze(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=(n=e==null?void 0:e.mapKey)!==null&&n!==void 0?n:r=>r}size(){return this._map.size}has(e){return this._map.has(this._keyMapper(e))}get(e){return this._map.get(this._keyMapper(e))}set(e,n){this._map.set(this._keyMapper(e),n)}delete(e){this._map.delete(this._keyMapper(e))}clear(){this._map.clear()}}var UG={MapCache:FG},jG=UG.MapCache,VG=Object.freeze({__proto__:null,MapCache:jG});const{LRUCache:ek}=YO,{MapCache:BG}=VG,Lp={equality:"reference",eviction:"none",maxSize:1/0};function zG({equality:t=Lp.equality,eviction:e=Lp.eviction,maxSize:n=Lp.maxSize}=Lp){const r=WG(t);return HG(e,n,r)}function WG(t){switch(t){case"reference":return e=>e;case"value":return e=>Fy(e)}throw Ke(`Unrecognized equality policy ${t}`)}function HG(t,e,n){switch(t){case"keep-all":return new BG({mapKey:n});case"lru":return new ek({mapKey:n,maxSize:Lt(e)});case"most-recent":return new ek({mapKey:n,maxSize:1})}throw Ke(`Unrecognized eviction policy ${t}`)}var rL=zG;const{setConfigDeletionHandler:GG}=Tr;function qG(t){var e,n;const r=rL({equality:(e=(n=t.cachePolicyForParams_UNSTABLE)===null||n===void 0?void 0:n.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return i=>{var s,o;const a=r.get(i);if(a!=null)return a;const{cachePolicyForParams_UNSTABLE:l,...c}=t,u="default"in t?t.default:new Promise(()=>{}),d=nL({...c,key:`${t.key}__${(s=Fy(i))!==null&&s!==void 0?s:"void"}`,default:typeof u=="function"?u(i):u,retainedBy_UNSTABLE:typeof t.retainedBy_UNSTABLE=="function"?t.retainedBy_UNSTABLE(i):t.retainedBy_UNSTABLE,effects:typeof t.effects=="function"?t.effects(i):typeof t.effects_UNSTABLE=="function"?t.effects_UNSTABLE(i):(o=t.effects)!==null&&o!==void 0?o:t.effects_UNSTABLE});return r.set(i,d),GG(d.key,()=>{r.delete(i)}),d}}var KG=qG;const{setConfigDeletionHandler:QG}=Tr;let YG=0;function XG(t){var e,n;const r=rL({equality:(e=(n=t.cachePolicyForParams_UNSTABLE)===null||n===void 0?void 0:n.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return i=>{var s;let o;try{o=r.get(i)}catch(h){throw Ke(`Problem with cache lookup for selector ${t.key}: ${h.message}`)}if(o!=null)return o;const a=`${t.key}__selectorFamily/${(s=Fy(i,{allowFunctions:!0}))!==null&&s!==void 0?s:"void"}/${YG++}`,l=h=>t.get(i)(h),c=t.cachePolicy_UNSTABLE,u=typeof t.retainedBy_UNSTABLE=="function"?t.retainedBy_UNSTABLE(i):t.retainedBy_UNSTABLE;let d;if(t.set!=null){const h=t.set;d=$c({key:a,get:l,set:(p,y)=>h(i)(p,y),cachePolicy_UNSTABLE:c,dangerouslyAllowMutability:t.dangerouslyAllowMutability,retainedBy_UNSTABLE:u})}else d=$c({key:a,get:l,cachePolicy_UNSTABLE:c,dangerouslyAllowMutability:t.dangerouslyAllowMutability,retainedBy_UNSTABLE:u});return r.set(i,d),QG(d.key,()=>{r.delete(i)}),d}}var Ko=XG;const JG=Ko({key:"__constant",get:t=>()=>t,cachePolicyForParams_UNSTABLE:{equality:"reference"}});function ZG(t){return JG(t)}var eq=ZG;const tq=Ko({key:"__error",get:t=>()=>{throw Ke(t)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});function nq(t){return tq(t)}var rq=nq;function iq(t){return t}var sq=iq;const{loadableWithError:iL,loadableWithPromise:sL,loadableWithValue:oL}=wf;function Uy(t,e){const n=Array(e.length).fill(void 0),r=Array(e.length).fill(void 0);for(const[i,s]of e.entries())try{n[i]=t(s)}catch(o){r[i]=o}return[n,r]}function oq(t){return t!=null&&!Ct(t)}function jy(t){return Array.isArray(t)?t:Object.getOwnPropertyNames(t).map(e=>t[e])}function l1(t,e){return Array.isArray(t)?e:Object.getOwnPropertyNames(t).reduce((n,r,i)=>({...n,[r]:e[i]}),{})}function yc(t,e,n){const r=n.map((i,s)=>i==null?oL(e[s]):Ct(i)?sL(i):iL(i));return l1(t,r)}function aq(t,e){return e.map((n,r)=>n===void 0?t[r]:n)}const lq=Ko({key:"__waitForNone",get:t=>({get:e})=>{const n=jy(t),[r,i]=Uy(e,n);return yc(t,r,i)},dangerouslyAllowMutability:!0}),cq=Ko({key:"__waitForAny",get:t=>({get:e})=>{const n=jy(t),[r,i]=Uy(e,n);return i.some(s=>!Ct(s))?yc(t,r,i):new Promise(s=>{for(const[o,a]of i.entries())Ct(a)&&a.then(l=>{r[o]=l,i[o]=void 0,s(yc(t,r,i))}).catch(l=>{i[o]=l,s(yc(t,r,i))})})},dangerouslyAllowMutability:!0}),uq=Ko({key:"__waitForAll",get:t=>({get:e})=>{const n=jy(t),[r,i]=Uy(e,n);if(i.every(o=>o==null))return l1(t,r);const s=i.find(oq);if(s!=null)throw s;return Promise.all(i).then(o=>l1(t,aq(r,o)))},dangerouslyAllowMutability:!0}),dq=Ko({key:"__waitForAllSettled",get:t=>({get:e})=>{const n=jy(t),[r,i]=Uy(e,n);return i.every(s=>!Ct(s))?yc(t,r,i):Promise.all(i.map((s,o)=>Ct(s)?s.then(a=>{r[o]=a,i[o]=void 0}).catch(a=>{r[o]=void 0,i[o]=a}):null)).then(()=>yc(t,r,i))},dangerouslyAllowMutability:!0}),hq=Ko({key:"__noWait",get:t=>({get:e})=>{try{return $c.value(oL(e(t)))}catch(n){return $c.value(Ct(n)?sL(n):iL(n))}},dangerouslyAllowMutability:!0});var fq={waitForNone:lq,waitForAny:cq,waitForAll:uq,waitForAllSettled:dq,noWait:hq};const{RecoilLoadable:pq}=wf,{DefaultValue:mq}=Tr,{RecoilRoot:gq,useRecoilStoreID:yq}=Ns,{isRecoilValue:vq}=Oc,{retentionZone:_q}=Cy,{freshSnapshot:wq}=Dy,{useRecoilState:bq,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:Sq,useRecoilStateLoadable:Eq,useRecoilValue:xq,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:Tq,useRecoilValueLoadable:Iq,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:Cq,useResetRecoilState:kq,useSetRecoilState:Aq}=UW,{useGotoRecoilSnapshot:Rq,useRecoilSnapshot:Nq,useRecoilTransactionObserver:Pq}=zO,{useRecoilCallback:Dq}=qO,{noWait:Oq,waitForAll:Lq,waitForAllSettled:Mq,waitForAny:$q,waitForNone:Fq}=fq;var Vy={DefaultValue:mq,isRecoilValue:vq,RecoilLoadable:pq,RecoilEnv:hu,RecoilRoot:gq,useRecoilStoreID:yq,useRecoilBridgeAcrossReactRoots_UNSTABLE:hH,atom:nL,selector:$c,atomFamily:KG,selectorFamily:Ko,constSelector:eq,errorSelector:rq,readOnlySelector:sq,noWait:Oq,waitForNone:Fq,waitForAny:$q,waitForAll:Lq,waitForAllSettled:Mq,useRecoilValue:xq,useRecoilValueLoadable:Iq,useRecoilState:bq,useRecoilStateLoadable:Eq,useSetRecoilState:Aq,useResetRecoilState:kq,useGetRecoilValueInfo_UNSTABLE:oH,useRecoilRefresher_UNSTABLE:VH,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:Cq,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:Tq,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:Sq,useRecoilCallback:Dq,useRecoilTransaction_UNSTABLE:GH,useGotoRecoilSnapshot:Rq,useRecoilSnapshot:Nq,useRecoilTransactionObserver_UNSTABLE:Pq,snapshot_UNSTABLE:wq,useRetain:KS,retentionZone:_q},Uq=Vy.RecoilRoot,If=Vy.atom,jq=Vy.useRecoilValue,wt=Vy.useRecoilState;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aL={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce=function(t,e){if(!t)throw pu(e)},pu=function(t){return new Error("Firebase Database ("+aL.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lL=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Vq=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},eE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=s>>2,d=(s&3)<<4|a>>4;let h=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(h=64)),r.push(n[u],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(lL(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Vq(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new Bq;const h=s<<2|a>>4;if(r.push(h),c!==64){const f=a<<4&240|c>>2;if(r.push(f),d!==64){const p=c<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Bq extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cL=function(t){const e=lL(t);return eE.encodeByteArray(e,!0)},sg=function(t){return cL(t).replace(/\./g,"")},og=function(t){try{return eE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zq(t){return Sh(void 0,t)}function Sh(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Wq(n)||(t[n]=Sh(t[n],e[n]));return t}function Wq(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hq(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gq=()=>Hq().__FIREBASE_DEFAULTS__,qq=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Kq=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&og(t[1]);return e&&JSON.parse(e)},By=()=>{try{return Gq()||qq()||Kq()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Qq=t=>{var e,n;return(n=(e=By())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Yq=t=>{const e=Qq(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Xq=()=>{var t;return(t=By())===null||t===void 0?void 0:t.config},Jq=t=>{var e;return(e=By())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[sg(JSON.stringify(n)),sg(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zt())}function zy(){var t;const e=(t=By())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Zq(){return typeof self=="object"&&self.self===self}function uL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Wy(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dL(){const t=zt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function hL(){return aL.NODE_ADMIN===!0}function eK(){return!zy()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Eh(){try{return typeof indexedDB=="object"}catch{return!1}}function tK(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nK="FirebaseError";class Hn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=nK,Object.setPrototypeOf(this,Hn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wl.prototype.create)}}class wl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?rK(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Hn(i,a,r)}}function rK(t,e){return t.replace(iK,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const iK=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xh(t){return JSON.parse(t)}function on(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fL=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=xh(og(s[0])||""),n=xh(og(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},sK=function(t){const e=fL(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},oK=function(t){const e=fL(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ka(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function ag(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function lg(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function c1(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(tk(s)&&tk(o)){if(!c1(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function tk(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function oc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function wd(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aK{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,u;for(let d=0;d<80;d++){d<40?d<20?(c=a^s&(o^a),u=1518500249):(c=s^o^a,u=1859775393):d<60?(c=s&o|a&(s|o),u=2400959708):(c=s^o^a,u=3395469782);const h=(i<<5|i>>>27)+c+l+u+r[d]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function pL(t,e){const n=new lK(t,e);return n.subscribe.bind(n)}class lK{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");cK(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=p0),i.error===void 0&&(i.error=p0),i.complete===void 0&&(i.complete=p0);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cK(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function p0(){}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const je=function(t,e,n,r){let i;if(r<e?i="at least "+e:r>n&&(i=n===0?"none":"no more than "+n),i){const s=t+" failed: Was called with "+r+(r===1?" argument.":" arguments.")+" Expects "+i+".";throw new Error(s)}};function Sr(t,e){return`${t} failed: ${e} argument `}function mn(t,e,n,r){if(!(r&&!n)&&typeof n!="function")throw new Error(Sr(t,e)+"must be a valid function.")}function nk(t,e,n,r){if(!(r&&!n)&&(typeof n!="object"||n===null))throw new Error(Sr(t,e)+"must be a valid context object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uK=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,ce(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Hy=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(t){return t&&t._delegate?t._delegate:t}class sr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new hr;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(hK(e))try{this.getOrInitializeService({instanceIdentifier:la})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=la){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=la){return this.instances.has(e)}getOptions(e=la){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:dK(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=la){return this.component?this.component.multipleInstances?e:la:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dK(t){return t===la?void 0:t}function hK(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new mL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE=[];var st;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(st||(st={}));const yL={debug:st.DEBUG,verbose:st.VERBOSE,info:st.INFO,warn:st.WARN,error:st.ERROR,silent:st.SILENT},fK=st.INFO,pK={[st.DEBUG]:"log",[st.VERBOSE]:"log",[st.INFO]:"info",[st.WARN]:"warn",[st.ERROR]:"error"},mK=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=pK[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class mu{constructor(e){this.name=e,this._logLevel=fK,this._logHandler=mK,this._userLogHandler=null,rE.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in st))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,st.DEBUG,...e),this._logHandler(this,st.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,st.VERBOSE,...e),this._logHandler(this,st.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,st.INFO,...e),this._logHandler(this,st.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,st.WARN,...e),this._logHandler(this,st.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,st.ERROR,...e),this._logHandler(this,st.ERROR,...e)}}function gK(t){rE.forEach(e=>{e.setLogLevel(t)})}function yK(t,e){for(const n of rE){let r=null;e&&e.level&&(r=yL[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(r??i.logLevel)&&t({level:st[s].toLowerCase(),message:a,args:o,type:i.name})}}}const vK=(t,e)=>e.some(n=>t instanceof n);let rk,ik;function _K(){return rk||(rk=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wK(){return ik||(ik=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vL=new WeakMap,u1=new WeakMap,_L=new WeakMap,m0=new WeakMap,iE=new WeakMap;function bK(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(mo(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&vL.set(n,t)}).catch(()=>{}),iE.set(e,t),e}function SK(t){if(u1.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});u1.set(t,e)}let d1={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return u1.get(t);if(e==="objectStoreNames")return t.objectStoreNames||_L.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return mo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function EK(t){d1=t(d1)}function xK(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(g0(this),e,...n);return _L.set(r,e.sort?e.sort():[e]),mo(r)}:wK().includes(t)?function(...e){return t.apply(g0(this),e),mo(vL.get(this))}:function(...e){return mo(t.apply(g0(this),e))}}function TK(t){return typeof t=="function"?xK(t):(t instanceof IDBTransaction&&SK(t),vK(t,_K())?new Proxy(t,d1):t)}function mo(t){if(t instanceof IDBRequest)return bK(t);if(m0.has(t))return m0.get(t);const e=TK(t);return e!==t&&(m0.set(t,e),iE.set(e,t)),e}const g0=t=>iE.get(t);function IK(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=mo(o);return r&&o.addEventListener("upgradeneeded",l=>{r(mo(o.result),l.oldVersion,l.newVersion,mo(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}const CK=["get","getKey","getAll","getAllKeys","count"],kK=["put","add","delete","clear"],y0=new Map;function sk(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(y0.get(e))return y0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=kK.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||CK.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return y0.set(e,s),s}EK(t=>({...t,get:(e,n,r)=>sk(e,n)||t.get(e,n,r),has:(e,n)=>!!sk(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AK{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(RK(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function RK(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const h1="@firebase/app",ok="0.9.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa=new mu("@firebase/app"),NK="@firebase/app-compat",PK="@firebase/analytics-compat",DK="@firebase/analytics",OK="@firebase/app-check-compat",LK="@firebase/app-check",MK="@firebase/auth",$K="@firebase/auth-compat",FK="@firebase/database",UK="@firebase/database-compat",jK="@firebase/functions",VK="@firebase/functions-compat",BK="@firebase/installations",zK="@firebase/installations-compat",WK="@firebase/messaging",HK="@firebase/messaging-compat",GK="@firebase/performance",qK="@firebase/performance-compat",KK="@firebase/remote-config",QK="@firebase/remote-config-compat",YK="@firebase/storage",XK="@firebase/storage-compat",JK="@firebase/firestore",ZK="@firebase/firestore-compat",e9="firebase",t9="9.17.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo="[DEFAULT]",n9={[h1]:"fire-core",[NK]:"fire-core-compat",[DK]:"fire-analytics",[PK]:"fire-analytics-compat",[LK]:"fire-app-check",[OK]:"fire-app-check-compat",[MK]:"fire-auth",[$K]:"fire-auth-compat",[FK]:"fire-rtdb",[UK]:"fire-rtdb-compat",[jK]:"fire-fn",[VK]:"fire-fn-compat",[BK]:"fire-iid",[zK]:"fire-iid-compat",[WK]:"fire-fcm",[HK]:"fire-fcm-compat",[GK]:"fire-perf",[qK]:"fire-perf-compat",[KK]:"fire-rc",[QK]:"fire-rc-compat",[YK]:"fire-gcs",[XK]:"fire-gcs-compat",[JK]:"fire-fst",[ZK]:"fire-fst-compat","fire-js":"fire-js",[e9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To=new Map,Th=new Map;function cg(t,e){try{t.container.addComponent(e)}catch(n){Qa.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function wL(t,e){t.container.addOrOverwriteComponent(e)}function Hi(t){const e=t.name;if(Th.has(e))return Qa.debug(`There were multiple attempts to register component ${e}.`),!1;Th.set(e,t);for(const n of To.values())cg(n,t);return!0}function sE(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function r9(t,e,n=xo){sE(t,e).clearInstance(n)}function i9(){Th.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s9={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ms=new wl("app","Firebase",s9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let o9=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new sr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ms.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps=t9;function oE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:xo,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ms.create("bad-app-name",{appName:String(i)});if(n||(n=Xq()),!n)throw ms.create("no-options");const s=To.get(i);if(s){if(c1(n,s.options)&&c1(r,s.config))return s;throw ms.create("duplicate-app",{appName:i})}const o=new gL(i);for(const l of Th.values())o.addComponent(l);const a=new o9(n,r,o);return To.set(i,a),a}function bL(t=xo){const e=To.get(t);if(!e&&t===xo)return oE();if(!e)throw ms.create("no-app",{appName:t});return e}function a9(){return Array.from(To.values())}async function SL(t){const e=t.name;To.has(e)&&(To.delete(e),await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function Er(t,e,n){var r;let i=(r=n9[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qa.warn(a.join(" "));return}Hi(new sr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function EL(t,e){if(t!==null&&typeof t!="function")throw ms.create("invalid-log-argument");yK(t,e)}function xL(t){gK(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l9="firebase-heartbeat-database",c9=1,Ih="firebase-heartbeat-store";let v0=null;function TL(){return v0||(v0=IK(l9,c9,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ih)}}}).catch(t=>{throw ms.create("idb-open",{originalErrorMessage:t.message})})),v0}async function u9(t){try{return(await TL()).transaction(Ih).objectStore(Ih).get(IL(t))}catch(e){if(e instanceof Hn)Qa.warn(e.message);else{const n=ms.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Qa.warn(n.message)}}}async function ak(t,e){try{const r=(await TL()).transaction(Ih,"readwrite");return await r.objectStore(Ih).put(e,IL(t)),r.done}catch(n){if(n instanceof Hn)Qa.warn(n.message);else{const r=ms.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Qa.warn(r.message)}}}function IL(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d9=1024,h9=30*24*60*60*1e3;class f9{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new m9(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=lk();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=h9}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=lk(),{heartbeatsToSend:n,unsentEntries:r}=p9(this._heartbeatsCache.heartbeats),i=sg(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function lk(){return new Date().toISOString().substring(0,10)}function p9(t,e=d9){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),ck(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ck(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class m9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Eh()?tK().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await u9(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ak(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ak(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function ck(t){return sg(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g9(t){Hi(new sr("platform-logger",e=>new AK(e),"PRIVATE")),Hi(new sr("heartbeat",e=>new f9(e),"PRIVATE")),Er(h1,ok,t),Er(h1,ok,"esm2017"),Er("fire-js","")}g9("");const y9=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Hn,SDK_VERSION:Ps,_DEFAULT_ENTRY_NAME:xo,_addComponent:cg,_addOrOverwriteComponent:wL,_apps:To,_clearComponents:i9,_components:Th,_getProvider:sE,_registerComponent:Hi,_removeServiceInstance:r9,deleteApp:SL,getApp:bL,getApps:a9,initializeApp:oE,onLog:EL,registerVersion:Er,setLogLevel:xL},Symbol.toStringTag,{value:"Module"}));var v9=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ke,aE=aE||{},Ve=v9||self;function ug(){}function Gy(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Cf(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function _9(t){return Object.prototype.hasOwnProperty.call(t,_0)&&t[_0]||(t[_0]=++w9)}var _0="closure_uid_"+(1e9*Math.random()>>>0),w9=0;function b9(t,e,n){return t.call.apply(t.bind,arguments)}function S9(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Gn(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Gn=b9:Gn=S9,Gn.apply(null,arguments)}function Mp(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Un(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Wb=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Qo(){this.s=this.s,this.o=this.o}var E9=0;Qo.prototype.s=!1;Qo.prototype.na=function(){!this.s&&(this.s=!0,this.M(),E9!=0)&&_9(this)};Qo.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const CL=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function lE(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function uk(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Gy(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function qn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}qn.prototype.h=function(){this.defaultPrevented=!0};var x9=function(){if(!Ve.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Ve.addEventListener("test",ug,e),Ve.removeEventListener("test",ug,e)}catch{}return t}();function dg(t){return/^[\s\xa0]*$/.test(t)}var dk=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function w0(t,e){return t<e?-1:t>e?1:0}function qy(){var t=Ve.navigator;return t&&(t=t.userAgent)?t:""}function ki(t){return qy().indexOf(t)!=-1}function cE(t){return cE[" "](t),t}cE[" "]=ug;function T9(t){var e=k9;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var I9=ki("Opera"),Fc=ki("Trident")||ki("MSIE"),kL=ki("Edge"),f1=kL||Fc,AL=ki("Gecko")&&!(qy().toLowerCase().indexOf("webkit")!=-1&&!ki("Edge"))&&!(ki("Trident")||ki("MSIE"))&&!ki("Edge"),C9=qy().toLowerCase().indexOf("webkit")!=-1&&!ki("Edge");function RL(){var t=Ve.document;return t?t.documentMode:void 0}var hg;e:{var b0="",S0=function(){var t=qy();if(AL)return/rv:([^\);]+)(\)|;)/.exec(t);if(kL)return/Edge\/([\d\.]+)/.exec(t);if(Fc)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(C9)return/WebKit\/(\S+)/.exec(t);if(I9)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(S0&&(b0=S0?S0[1]:""),Fc){var E0=RL();if(E0!=null&&E0>parseFloat(b0)){hg=String(E0);break e}}hg=b0}var k9={};function A9(){return T9(function(){let t=0;const e=dk(String(hg)).split("."),n=dk("9").split("."),r=Math.max(e.length,n.length);for(let o=0;t==0&&o<r;o++){var i=e[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],i[0].length==0&&s[0].length==0)break;t=w0(i[1].length==0?0:parseInt(i[1],10),s[1].length==0?0:parseInt(s[1],10))||w0(i[2].length==0,s[2].length==0)||w0(i[2],s[2]),i=i[3],s=s[3]}while(t==0)}return 0<=t})}var p1;if(Ve.document&&Fc){var hk=RL();p1=hk||parseInt(hg,10)||void 0}else p1=void 0;var R9=p1;function Ch(t,e){if(qn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(AL){e:{try{cE(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:N9[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Ch.X.h.call(this)}}Un(Ch,qn);var N9={2:"touch",3:"pen",4:"mouse"};Ch.prototype.h=function(){Ch.X.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var kf="closure_listenable_"+(1e6*Math.random()|0),P9=0;function D9(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ha=i,this.key=++P9,this.ba=this.ea=!1}function Ky(t){t.ba=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function uE(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function NL(t){const e={};for(const n in t)e[n]=t[n];return e}const fk="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function PL(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<fk.length;s++)n=fk[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Qy(t){this.src=t,this.g={},this.h=0}Qy.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=g1(t,e,r,i);return-1<o?(e=t[o],n||(e.ea=!1)):(e=new D9(e,this.src,s,!!r,i),e.ea=n,t.push(e)),e};function m1(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=CL(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Ky(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function g1(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.ba&&s.listener==e&&s.capture==!!n&&s.ha==r)return i}return-1}var dE="closure_lm_"+(1e6*Math.random()|0),x0={};function DL(t,e,n,r,i){if(r&&r.once)return LL(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)DL(t,e[s],n,r,i);return null}return n=pE(n),t&&t[kf]?t.N(e,n,Cf(r)?!!r.capture:!!r,i):OL(t,e,n,!1,r,i)}function OL(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Cf(i)?!!i.capture:!!i,a=fE(t);if(a||(t[dE]=a=new Qy(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=O9(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)x9||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent($L(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function O9(){function t(n){return e.call(t.src,t.listener,n)}const e=L9;return t}function LL(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)LL(t,e[s],n,r,i);return null}return n=pE(n),t&&t[kf]?t.O(e,n,Cf(r)?!!r.capture:!!r,i):OL(t,e,n,!0,r,i)}function ML(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)ML(t,e[s],n,r,i);else r=Cf(r)?!!r.capture:!!r,n=pE(n),t&&t[kf]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=g1(s,n,r,i),-1<n&&(Ky(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=fE(t))&&(e=t.g[e.toString()],t=-1,e&&(t=g1(e,n,r,i)),(n=-1<t?e[t]:null)&&hE(n))}function hE(t){if(typeof t!="number"&&t&&!t.ba){var e=t.src;if(e&&e[kf])m1(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent($L(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=fE(e))?(m1(n,t),n.h==0&&(n.src=null,e[dE]=null)):Ky(t)}}}function $L(t){return t in x0?x0[t]:x0[t]="on"+t}function L9(t,e){if(t.ba)t=!0;else{e=new Ch(e,this);var n=t.listener,r=t.ha||t.src;t.ea&&hE(t),t=n.call(r,e)}return t}function fE(t){return t=t[dE],t instanceof Qy?t:null}var T0="__closure_events_fn_"+(1e9*Math.random()>>>0);function pE(t){return typeof t=="function"?t:(t[T0]||(t[T0]=function(e){return t.handleEvent(e)}),t[T0])}function Sn(){Qo.call(this),this.i=new Qy(this),this.P=this,this.I=null}Un(Sn,Qo);Sn.prototype[kf]=!0;Sn.prototype.removeEventListener=function(t,e,n,r){ML(this,t,e,n,r)};function Dn(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,typeof e=="string")e=new qn(e,t);else if(e instanceof qn)e.target=e.target||t;else{var i=e;e=new qn(r,t),PL(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=$p(o,r,!0,e)&&i}if(o=e.g=t,i=$p(o,r,!0,e)&&i,i=$p(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=$p(o,r,!1,e)&&i}Sn.prototype.M=function(){if(Sn.X.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Ky(n[r]);delete t.g[e],t.h--}}this.I=null};Sn.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Sn.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function $p(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ba&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.ea&&m1(t.i,o),i=a.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var mE=Ve.JSON.stringify;function M9(){var t=jL;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class $9{constructor(){this.h=this.g=null}add(e,n){const r=FL.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var FL=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new F9,t=>t.reset());class F9{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function U9(t){Ve.setTimeout(()=>{throw t},0)}function UL(t,e){y1||j9(),v1||(y1(),v1=!0),jL.add(t,e)}var y1;function j9(){var t=Ve.Promise.resolve(void 0);y1=function(){t.then(V9)}}var v1=!1,jL=new $9;function V9(){for(var t;t=M9();){try{t.h.call(t.g)}catch(n){U9(n)}var e=FL;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}v1=!1}function Yy(t,e){Sn.call(this),this.h=t||1,this.g=e||Ve,this.j=Gn(this.lb,this),this.l=Date.now()}Un(Yy,Sn);ke=Yy.prototype;ke.ca=!1;ke.R=null;ke.lb=function(){if(this.ca){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-t):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Dn(this,"tick"),this.ca&&(gE(this),this.start()))}};ke.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function gE(t){t.ca=!1,t.R&&(t.g.clearTimeout(t.R),t.R=null)}ke.M=function(){Yy.X.M.call(this),gE(this),delete this.g};function yE(t,e,n){if(typeof t=="function")n&&(t=Gn(t,n));else if(t&&typeof t.handleEvent=="function")t=Gn(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Ve.setTimeout(t,e||0)}function VL(t){t.g=yE(()=>{t.g=null,t.i&&(t.i=!1,VL(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class B9 extends Qo{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:VL(this)}M(){super.M(),this.g&&(Ve.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function kh(t){Qo.call(this),this.h=t,this.g={}}Un(kh,Qo);var pk=[];function BL(t,e,n,r){Array.isArray(n)||(n&&(pk[0]=n.toString()),n=pk);for(var i=0;i<n.length;i++){var s=DL(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function zL(t){uE(t.g,function(e,n){this.g.hasOwnProperty(n)&&hE(e)},t),t.g={}}kh.prototype.M=function(){kh.X.M.call(this),zL(this)};kh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Xy(){this.g=!0}Xy.prototype.Aa=function(){this.g=!1};function z9(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");o=2<=d.length&&d[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function W9(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function ac(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+G9(t,n)+(r?" "+r:"")})}function H9(t,e){t.info(function(){return"TIMEOUT: "+e})}Xy.prototype.info=function(){};function G9(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return mE(n)}catch{return e}}var Sl={},mk=null;function Jy(){return mk=mk||new Sn}Sl.Pa="serverreachability";function WL(t){qn.call(this,Sl.Pa,t)}Un(WL,qn);function Ah(t){const e=Jy();Dn(e,new WL(e))}Sl.STAT_EVENT="statevent";function HL(t,e){qn.call(this,Sl.STAT_EVENT,t),this.stat=e}Un(HL,qn);function tr(t){const e=Jy();Dn(e,new HL(e,t))}Sl.Qa="timingevent";function GL(t,e){qn.call(this,Sl.Qa,t),this.size=e}Un(GL,qn);function Af(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Ve.setTimeout(function(){t()},e)}var Zy={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},qL={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function vE(){}vE.prototype.h=null;function gk(t){return t.h||(t.h=t.i())}function KL(){}var Rf={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function _E(){qn.call(this,"d")}Un(_E,qn);function wE(){qn.call(this,"c")}Un(wE,qn);var _1;function ev(){}Un(ev,vE);ev.prototype.g=function(){return new XMLHttpRequest};ev.prototype.i=function(){return{}};_1=new ev;function Nf(t,e,n,r){this.l=t,this.j=e,this.m=n,this.U=r||1,this.S=new kh(this),this.O=q9,t=f1?125:void 0,this.T=new Yy(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new QL}function QL(){this.i=null,this.g="",this.h=!1}var q9=45e3,w1={},fg={};ke=Nf.prototype;ke.setTimeout=function(t){this.O=t};function b1(t,e,n){t.K=1,t.v=nv(xs(e)),t.s=n,t.P=!0,YL(t,null)}function YL(t,e){t.F=Date.now(),Pf(t),t.A=xs(t.v);var n=t.A,r=t.U;Array.isArray(r)||(r=[String(r)]),i2(n.i,"t",r),t.C=0,n=t.l.H,t.h=new QL,t.g=T2(t.l,n?e:null,!t.s),0<t.N&&(t.L=new B9(Gn(t.La,t,t.g),t.N)),BL(t.S,t.g,"readystatechange",t.ib),e=t.H?NL(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.da(t.A,t.u,t.s,e)):(t.u="GET",t.g.da(t.A,t.u,null,e)),Ah(),z9(t.j,t.u,t.A,t.m,t.U,t.s)}ke.ib=function(t){t=t.target;const e=this.L;e&&ls(t)==3?e.l():this.La(t)};ke.La=function(t){try{if(t==this.g)e:{const u=ls(this.g);var e=this.g.Ea();const d=this.g.aa();if(!(3>u)&&(u!=3||f1||this.g&&(this.h.h||this.g.fa()||wk(this.g)))){this.I||u!=4||e==7||(e==8||0>=d?Ah(3):Ah(2)),tv(this);var n=this.g.aa();this.Y=n;t:if(XL(this)){var r=wk(this.g);t="";var i=r.length,s=ls(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Sa(this),Ud(this);var o="";break t}this.h.i=new Ve.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=n==200,W9(this.j,this.u,this.A,this.m,this.U,u,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!dg(a)){var c=a;break t}}c=null}if(n=c)ac(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,S1(this,n);else{this.i=!1,this.o=3,tr(12),Sa(this),Ud(this);break e}}this.P?(JL(this,u,o),f1&&this.i&&u==3&&(BL(this.S,this.T,"tick",this.hb),this.T.start())):(ac(this.j,this.m,o,null),S1(this,o)),u==4&&Sa(this),this.i&&!this.I&&(u==4?b2(this.l,this):(this.i=!1,Pf(this)))}else n==400&&0<o.indexOf("Unknown SID")?(this.o=3,tr(12)):(this.o=0,tr(13)),Sa(this),Ud(this)}}}catch{}finally{}};function XL(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Da:!1}function JL(t,e,n){let r=!0,i;for(;!t.I&&t.C<n.length;)if(i=K9(t,n),i==fg){e==4&&(t.o=4,tr(14),r=!1),ac(t.j,t.m,null,"[Incomplete Response]");break}else if(i==w1){t.o=4,tr(15),ac(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else ac(t.j,t.m,i,null),S1(t,i);XL(t)&&i!=fg&&i!=w1&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,tr(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.$&&(t.$=!0,e=t.l,e.g==t&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),CE(e),e.K=!0,tr(11))):(ac(t.j,t.m,n,"[Invalid Chunked Response]"),Sa(t),Ud(t))}ke.hb=function(){if(this.g){var t=ls(this.g),e=this.g.fa();this.C<e.length&&(tv(this),JL(this,t,e),this.i&&t!=4&&Pf(this))}};function K9(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?fg:(n=Number(e.substring(n,r)),isNaN(n)?w1:(r+=1,r+n>e.length?fg:(e=e.substr(r,n),t.C=r+n,e)))}ke.cancel=function(){this.I=!0,Sa(this)};function Pf(t){t.V=Date.now()+t.O,ZL(t,t.O)}function ZL(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Af(Gn(t.gb,t),e)}function tv(t){t.B&&(Ve.clearTimeout(t.B),t.B=null)}ke.gb=function(){this.B=null;const t=Date.now();0<=t-this.V?(H9(this.j,this.A),this.K!=2&&(Ah(),tr(17)),Sa(this),this.o=2,Ud(this)):ZL(this,this.V-t)};function Ud(t){t.l.G==0||t.I||b2(t.l,t)}function Sa(t){tv(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,gE(t.T),zL(t.S),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function S1(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||E1(n.h,t))){if(!t.J&&E1(n.h,t)&&n.G==3){try{var r=n.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)gg(n),sv(n);else break e;IE(n),tr(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&n.A==0&&!n.v&&(n.v=Af(Gn(n.cb,n),6e3));if(1>=a2(n.h)&&n.ja){try{n.ja()}catch{}n.ja=void 0}}else Ea(n,11)}else if((t.J||n.g==t)&&gg(n),!dg(e))for(i=n.Fa.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.T=c[0],c=c[1],n.G==2)if(c[0]=="c"){n.I=c[1],n.ka=c[2];const u=c[3];u!=null&&(n.ma=u,n.j.info("VER="+n.ma));const d=c[4];d!=null&&(n.Ca=d,n.j.info("SVER="+n.Ca));const h=c[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.h;s.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(bE(s,s.h),s.h=null))}if(r.D){const y=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;y&&(r.za=y,Ot(r.F,r.D,y))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-t.F,n.j.info("Handshake RTT: "+n.P+"ms")),r=n;var o=t;if(r.sa=x2(r,r.H?r.ka:null,r.V),o.J){l2(r.h,o);var a=o,l=r.J;l&&a.setTimeout(l),a.B&&(tv(a),Pf(a)),r.g=o}else _2(r);0<n.i.length&&ov(n)}else c[0]!="stop"&&c[0]!="close"||Ea(n,7);else n.G==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Ea(n,7):TE(n):c[0]!="noop"&&n.l&&n.l.wa(c),n.A=0)}}Ah(4)}catch{}}function Q9(t){if(t.W&&typeof t.W=="function")return t.W();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Gy(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function Y9(t){if(t.oa&&typeof t.oa=="function")return t.oa();if(!t.W||typeof t.W!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Gy(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function e2(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Gy(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=Y9(t),r=Q9(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var t2=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function X9(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Pa(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Pa){this.h=e!==void 0?e:t.h,pg(this,t.j),this.s=t.s,this.g=t.g,mg(this,t.m),this.l=t.l,e=t.i;var n=new Rh;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),yk(this,n),this.o=t.o}else t&&(n=String(t).match(t2))?(this.h=!!e,pg(this,n[1]||"",!0),this.s=bd(n[2]||""),this.g=bd(n[3]||"",!0),mg(this,n[4]),this.l=bd(n[5]||"",!0),yk(this,n[6]||"",!0),this.o=bd(n[7]||"")):(this.h=!!e,this.i=new Rh(null,this.h))}Pa.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Sd(e,vk,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Sd(e,vk,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Sd(n,n.charAt(0)=="/"?e7:Z9,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Sd(n,n7)),t.join("")};function xs(t){return new Pa(t)}function pg(t,e,n){t.j=n?bd(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function mg(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function yk(t,e,n){e instanceof Rh?(t.i=e,r7(t.i,t.h)):(n||(e=Sd(e,t7)),t.i=new Rh(e,t.h))}function Ot(t,e,n){t.i.set(e,n)}function nv(t){return Ot(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function bd(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Sd(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,J9),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function J9(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var vk=/[#\/\?@]/g,Z9=/[#\?:]/g,e7=/[#\?]/g,t7=/[#\?@]/g,n7=/#/g;function Rh(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Yo(t){t.g||(t.g=new Map,t.h=0,t.i&&X9(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}ke=Rh.prototype;ke.add=function(t,e){Yo(this),this.i=null,t=gu(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function n2(t,e){Yo(t),e=gu(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function r2(t,e){return Yo(t),e=gu(t,e),t.g.has(e)}ke.forEach=function(t,e){Yo(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};ke.oa=function(){Yo(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};ke.W=function(t){Yo(this);let e=[];if(typeof t=="string")r2(this,t)&&(e=e.concat(this.g.get(gu(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};ke.set=function(t,e){return Yo(this),this.i=null,t=gu(this,t),r2(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};ke.get=function(t,e){return t?(t=this.W(t),0<t.length?String(t[0]):e):e};function i2(t,e,n){n2(t,e),0<n.length&&(t.i=null,t.g.set(gu(t,e),lE(n)),t.h+=n.length)}ke.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.W(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function gu(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function r7(t,e){e&&!t.j&&(Yo(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(n2(this,r),i2(this,i,n))},t)),t.j=e}var i7=class{constructor(e,n){this.h=e,this.g=n}};function s2(t){this.l=t||s7,Ve.PerformanceNavigationTiming?(t=Ve.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Ve.g&&Ve.g.Ga&&Ve.g.Ga()&&Ve.g.Ga().$b),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var s7=10;function o2(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function a2(t){return t.h?1:t.g?t.g.size:0}function E1(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function bE(t,e){t.g?t.g.add(e):t.h=e}function l2(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}s2.prototype.cancel=function(){if(this.i=c2(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function c2(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return lE(t.i)}function SE(){}SE.prototype.stringify=function(t){return Ve.JSON.stringify(t,void 0)};SE.prototype.parse=function(t){return Ve.JSON.parse(t,void 0)};function o7(){this.g=new SE}function a7(t,e,n){const r=n||"";try{e2(t,function(i,s){let o=i;Cf(i)&&(o=mE(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function l7(t,e){const n=new Xy;if(Ve.Image){const r=new Image;r.onload=Mp(Fp,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Mp(Fp,n,r,"TestLoadImage: error",!1,e),r.onabort=Mp(Fp,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Mp(Fp,n,r,"TestLoadImage: timeout",!1,e),Ve.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Fp(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Df(t){this.l=t.ac||null,this.j=t.jb||!1}Un(Df,vE);Df.prototype.g=function(){return new rv(this.l,this.j)};Df.prototype.i=function(t){return function(){return t}}({});function rv(t,e){Sn.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=EE,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Un(rv,Sn);var EE=0;ke=rv.prototype;ke.open=function(t,e){if(this.readyState!=EE)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Nh(this)};ke.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Ve).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))};ke.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Of(this)),this.readyState=EE};ke.Wa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Nh(this)),this.g&&(this.readyState=3,Nh(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Ve.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;u2(this)}else t.text().then(this.Va.bind(this),this.ga.bind(this))};function u2(t){t.j.read().then(t.Ta.bind(t)).catch(t.ga.bind(t))}ke.Ta=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Of(this):Nh(this),this.readyState==3&&u2(this)}};ke.Va=function(t){this.g&&(this.response=this.responseText=t,Of(this))};ke.Ua=function(t){this.g&&(this.response=t,Of(this))};ke.ga=function(){this.g&&Of(this)};function Of(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Nh(t)}ke.setRequestHeader=function(t,e){this.v.append(t,e)};ke.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};ke.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Nh(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(rv.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var c7=Ve.JSON.parse;function qt(t){Sn.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=d2,this.K=this.L=!1}Un(qt,Sn);var d2="",u7=/^https?$/i,d7=["POST","PUT"];ke=qt.prototype;ke.Ka=function(t){this.L=t};ke.da=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():_1.g(),this.C=this.u?gk(this.u):gk(_1),this.g.onreadystatechange=Gn(this.Ha,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(s){_k(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=Ve.FormData&&t instanceof Ve.FormData,!(0<=CL(d7,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{p2(this),0<this.B&&((this.K=h7(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Gn(this.qa,this)):this.A=yE(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){_k(this,s)}};function h7(t){return Fc&&A9()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}ke.qa=function(){typeof aE<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Dn(this,"timeout"),this.abort(8))};function _k(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,h2(t),iv(t)}function h2(t){t.D||(t.D=!0,Dn(t,"complete"),Dn(t,"error"))}ke.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Dn(this,"complete"),Dn(this,"abort"),iv(this))};ke.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),iv(this,!0)),qt.X.M.call(this)};ke.Ha=function(){this.s||(this.F||this.v||this.l?f2(this):this.fb())};ke.fb=function(){f2(this)};function f2(t){if(t.h&&typeof aE<"u"&&(!t.C[1]||ls(t)!=4||t.aa()!=2)){if(t.v&&ls(t)==4)yE(t.Ha,0,t);else if(Dn(t,"readystatechange"),ls(t)==4){t.h=!1;try{const a=t.aa();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=a===0){var i=String(t.H).match(t2)[1]||null;if(!i&&Ve.self&&Ve.self.location){var s=Ve.self.location.protocol;i=s.substr(0,s.length-1)}r=!u7.test(i?i.toLowerCase():"")}n=r}if(n)Dn(t,"complete"),Dn(t,"success");else{t.m=6;try{var o=2<ls(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.aa()+"]",h2(t)}}finally{iv(t)}}}}function iv(t,e){if(t.g){p2(t);const n=t.g,r=t.C[0]?ug:null;t.g=null,t.C=null,e||Dn(t,"ready");try{n.onreadystatechange=r}catch{}}}function p2(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Ve.clearTimeout(t.A),t.A=null)}function ls(t){return t.g?t.g.readyState:0}ke.aa=function(){try{return 2<ls(this)?this.g.status:-1}catch{return-1}};ke.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}};ke.Sa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),c7(e)}};function wk(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case d2:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}ke.Ea=function(){return this.m};ke.Oa=function(){return typeof this.j=="string"?this.j:String(this.j)};function m2(t){let e="";return uE(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function xE(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=m2(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Ot(t,e,n))}function Xu(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function g2(t){this.Ca=0,this.i=[],this.j=new Xy,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Xu("failFast",!1,t),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Xu("baseRetryDelayMs",5e3,t),this.bb=Xu("retryDelaySeedMs",1e4,t),this.$a=Xu("forwardChannelMaxRetries",2,t),this.ta=Xu("forwardChannelRequestTimeoutMs",2e4,t),this.ra=t&&t.xmlHttpFactory||void 0,this.Da=t&&t.Zb||!1,this.J=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.I="",this.h=new s2(t&&t.concurrentRequestLimit),this.Fa=new o7,this.O=t&&t.fastHandshake||!1,this.N=t&&t.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=t&&t.Xb||!1,t&&t.Aa&&this.j.Aa(),t&&t.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&t&&t.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}ke=g2.prototype;ke.ma=8;ke.G=1;function TE(t){if(y2(t),t.G==3){var e=t.U++,n=xs(t.F);Ot(n,"SID",t.I),Ot(n,"RID",e),Ot(n,"TYPE","terminate"),Lf(t,n),e=new Nf(t,t.j,e,void 0),e.K=2,e.v=nv(xs(n)),n=!1,Ve.navigator&&Ve.navigator.sendBeacon&&(n=Ve.navigator.sendBeacon(e.v.toString(),"")),!n&&Ve.Image&&(new Image().src=e.v,n=!0),n||(e.g=T2(e.l,null),e.g.da(e.v)),e.F=Date.now(),Pf(e)}E2(t)}function sv(t){t.g&&(CE(t),t.g.cancel(),t.g=null)}function y2(t){sv(t),t.u&&(Ve.clearTimeout(t.u),t.u=null),gg(t),t.h.cancel(),t.m&&(typeof t.m=="number"&&Ve.clearTimeout(t.m),t.m=null)}function ov(t){o2(t.h)||t.m||(t.m=!0,UL(t.Ja,t),t.C=0)}function f7(t,e){return a2(t.h)>=t.h.j-(t.m?1:0)?!1:t.m?(t.i=e.D.concat(t.i),!0):t.G==1||t.G==2||t.C>=(t.Za?0:t.$a)?!1:(t.m=Af(Gn(t.Ja,t,e),S2(t,t.C)),t.C++,!0)}ke.Ja=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const i=new Nf(this,this.j,t,void 0);let s=this.s;if(this.S&&(s?(s=NL(s),PL(s,this.S)):s=this.S),this.o!==null||this.N||(i.H=s,s=null),this.O)e:{for(var e=0,n=0;n<this.i.length;n++){t:{var r=this.i[n];if("__data__"in r.g&&(r=r.g.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=v2(this,i,e),n=xs(this.F),Ot(n,"RID",t),Ot(n,"CVER",22),this.D&&Ot(n,"X-HTTP-Session-Id",this.D),Lf(this,n),s&&(this.N?e="headers="+encodeURIComponent(String(m2(s)))+"&"+e:this.o&&xE(n,this.o,s)),bE(this.h,i),this.Ya&&Ot(n,"TYPE","init"),this.O?(Ot(n,"$req",e),Ot(n,"SID","null"),i.Z=!0,b1(i,n,null)):b1(i,n,e),this.G=2}}else this.G==3&&(t?bk(this,t):this.i.length==0||o2(this.h)||bk(this))};function bk(t,e){var n;e?n=e.m:n=t.U++;const r=xs(t.F);Ot(r,"SID",t.I),Ot(r,"RID",n),Ot(r,"AID",t.T),Lf(t,r),t.o&&t.s&&xE(r,t.o,t.s),n=new Nf(t,t.j,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.i=e.D.concat(t.i)),e=v2(t,n,1e3),n.setTimeout(Math.round(.5*t.ta)+Math.round(.5*t.ta*Math.random())),bE(t.h,n),b1(n,r,e)}function Lf(t,e){t.ia&&uE(t.ia,function(n,r){Ot(e,r,n)}),t.l&&e2({},function(n,r){Ot(e,r,n)})}function v2(t,e,n){n=Math.min(t.i.length,n);var r=t.l?Gn(t.l.Ra,t.l,t):null;e:{var i=t.i;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let c=i[l].h;const u=i[l].g;if(c-=s,0>c)s=Math.max(0,i[l].h-100),a=!1;else try{a7(u,o,"req"+c+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break e}}}return t=t.i.splice(0,n),e.D=t,r}function _2(t){t.g||t.u||(t.Z=1,UL(t.Ia,t),t.A=0)}function IE(t){return t.g||t.u||3<=t.A?!1:(t.Z++,t.u=Af(Gn(t.Ia,t),S2(t,t.A)),t.A++,!0)}ke.Ia=function(){if(this.u=null,w2(this),this.$&&!(this.K||this.g==null||0>=this.P)){var t=2*this.P;this.j.info("BP detection timer enabled: "+t),this.B=Af(Gn(this.eb,this),t)}};ke.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,tr(10),sv(this),w2(this))};function CE(t){t.B!=null&&(Ve.clearTimeout(t.B),t.B=null)}function w2(t){t.g=new Nf(t,t.j,"rpc",t.Z),t.o===null&&(t.g.H=t.s),t.g.N=0;var e=xs(t.sa);Ot(e,"RID","rpc"),Ot(e,"SID",t.I),Ot(e,"CI",t.L?"0":"1"),Ot(e,"AID",t.T),Ot(e,"TYPE","xmlhttp"),Lf(t,e),t.o&&t.s&&xE(e,t.o,t.s),t.J&&t.g.setTimeout(t.J);var n=t.g;t=t.ka,n.K=1,n.v=nv(xs(e)),n.s=null,n.P=!0,YL(n,t)}ke.cb=function(){this.v!=null&&(this.v=null,sv(this),IE(this),tr(19))};function gg(t){t.v!=null&&(Ve.clearTimeout(t.v),t.v=null)}function b2(t,e){var n=null;if(t.g==e){gg(t),CE(t),t.g=null;var r=2}else if(E1(t.h,e))n=e.D,l2(t.h,e),r=1;else return;if(t.G!=0){if(t.pa=e.Y,e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;r=Jy(),Dn(r,new GL(r,n)),ov(t)}else _2(t);else if(i=e.o,i==3||i==0&&0<t.pa||!(r==1&&f7(t,e)||r==2&&IE(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),i){case 1:Ea(t,5);break;case 4:Ea(t,10);break;case 3:Ea(t,6);break;default:Ea(t,2)}}}function S2(t,e){let n=t.Xa+Math.floor(Math.random()*t.bb);return t.l||(n*=2),n*e}function Ea(t,e){if(t.j.info("Error code "+e),e==2){var n=null;t.l&&(n=null);var r=Gn(t.kb,t);n||(n=new Pa("//www.google.com/images/cleardot.gif"),Ve.location&&Ve.location.protocol=="http"||pg(n,"https"),nv(n)),l7(n.toString(),r)}else tr(2);t.G=0,t.l&&t.l.va(e),E2(t),y2(t)}ke.kb=function(t){t?(this.j.info("Successfully pinged google.com"),tr(2)):(this.j.info("Failed to ping google.com"),tr(1))};function E2(t){if(t.G=0,t.la=[],t.l){const e=c2(t.h);(e.length!=0||t.i.length!=0)&&(uk(t.la,e),uk(t.la,t.i),t.h.i.length=0,lE(t.i),t.i.length=0),t.l.ua()}}function x2(t,e,n){var r=n instanceof Pa?xs(n):new Pa(n,void 0);if(r.g!="")e&&(r.g=e+"."+r.g),mg(r,r.m);else{var i=Ve.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Pa(null,void 0);r&&pg(s,r),e&&(s.g=e),i&&mg(s,i),n&&(s.l=n),r=s}return n=t.D,e=t.za,n&&e&&Ot(r,n,e),Ot(r,"VER",t.ma),Lf(t,r),r}function T2(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Da&&!t.ra?new qt(new Df({jb:!0})):new qt(t.ra),e.Ka(t.H),e}function I2(){}ke=I2.prototype;ke.xa=function(){};ke.wa=function(){};ke.va=function(){};ke.ua=function(){};ke.Ra=function(){};function yg(){if(Fc&&!(10<=Number(R9)))throw Error("Environmental error: no available transport.")}yg.prototype.g=function(t,e){return new Mr(t,e)};function Mr(t,e){Sn.call(this),this.g=new g2(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.S=t,(t=e&&e.Yb)&&!dg(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!dg(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new yu(this)}Un(Mr,Sn);Mr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;tr(0),t.V=e,t.ia=n||{},t.L=t.Y,t.F=x2(t,null,t.V),ov(t)};Mr.prototype.close=function(){TE(this.g)};Mr.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=mE(t),t=n);e.i.push(new i7(e.ab++,t)),e.G==3&&ov(e)};Mr.prototype.M=function(){this.g.l=null,delete this.j,TE(this.g),delete this.g,Mr.X.M.call(this)};function C2(t){_E.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Un(C2,_E);function k2(){wE.call(this),this.status=1}Un(k2,wE);function yu(t){this.g=t}Un(yu,I2);yu.prototype.xa=function(){Dn(this.g,"a")};yu.prototype.wa=function(t){Dn(this.g,new C2(t))};yu.prototype.va=function(t){Dn(this.g,new k2)};yu.prototype.ua=function(){Dn(this.g,"b")};yg.prototype.createWebChannel=yg.prototype.g;Mr.prototype.send=Mr.prototype.u;Mr.prototype.open=Mr.prototype.m;Mr.prototype.close=Mr.prototype.close;Zy.NO_ERROR=0;Zy.TIMEOUT=8;Zy.HTTP_ERROR=6;qL.COMPLETE="complete";KL.EventType=Rf;Rf.OPEN="a";Rf.CLOSE="b";Rf.ERROR="c";Rf.MESSAGE="d";Sn.prototype.listen=Sn.prototype.N;qt.prototype.listenOnce=qt.prototype.O;qt.prototype.getLastError=qt.prototype.Oa;qt.prototype.getLastErrorCode=qt.prototype.Ea;qt.prototype.getStatus=qt.prototype.aa;qt.prototype.getResponseJson=qt.prototype.Sa;qt.prototype.getResponseText=qt.prototype.fa;qt.prototype.send=qt.prototype.da;qt.prototype.setWithCredentials=qt.prototype.Ka;var p7=function(){return new yg},m7=function(){return Jy()},I0=Zy,g7=qL,y7=Sl,Sk={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},v7=Df,Up=KL,_7=qt;const Ek="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};gn.UNAUTHENTICATED=new gn(null),gn.GOOGLE_CREDENTIALS=new gn("google-credentials-uid"),gn.FIRST_PARTY=new gn("first-party-uid"),gn.MOCK_USER=new gn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vu="9.17.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io=new mu("@firebase/firestore");function x1(){return Io.logLevel}function w7(t){Io.setLogLevel(t)}function se(t,...e){if(Io.logLevel<=st.DEBUG){const n=e.map(kE);Io.debug(`Firestore (${vu}): ${t}`,...n)}}function Yt(t,...e){if(Io.logLevel<=st.ERROR){const n=e.map(kE);Io.error(`Firestore (${vu}): ${t}`,...n)}}function Uc(t,...e){if(Io.logLevel<=st.WARN){const n=e.map(kE);Io.warn(`Firestore (${vu}): ${t}`,...n)}}function kE(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(t="Unexpected state"){const e=`FIRESTORE (${vu}) INTERNAL ASSERTION FAILED: `+t;throw Yt(e),new Error(e)}function Ae(t,e){t||Se()}function b7(t,e){t||Se()}function ge(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};let re=class extends Hn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let A2=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},S7=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(gn.UNAUTHENTICATED))}shutdown(){}},E7=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},x7=class{constructor(e){this.t=e,this.currentUser=gn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new wn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new wn,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new wn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ae(typeof r.accessToken=="string"),new A2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string"),new gn(e)}},T7=class{constructor(e,n,r,i){this.h=e,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=gn.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Ae(!(typeof this.h!="object"||this.h===null||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}},I7=class{constructor(e,n,r,i){this.h=e,this.l=n,this.m=r,this.g=i}getToken(){return Promise.resolve(new T7(this.h,this.l,this.m,this.g))}start(e,n){e.enqueueRetryable(()=>n(gn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},C7=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},k7=class{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,n){const r=s=>{s.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.A;return this.A=s.token,se("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?i(s):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ae(typeof n.token=="string"),this.A=n.token,new C7(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A7(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let R2=class{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=A7(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function Be(t,e){return t<e?-1:t>e?1:0}function jc(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function N2(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new re(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new re(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new re(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ft.fromMillis(Date.now())}static fromDate(e){return Ft.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ft(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new Ft(0,0))}static max(){return new Ne(new Ft(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,n,r){n===void 0?n=0:n>e.length&&Se(),r===void 0?r=e.length-n:r>e.length-n&&Se(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ph.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ph?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ot extends Ph{construct(e,n,r){return new ot(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new re(Q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ot(n)}static emptyPath(){return new ot([])}}const R7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xt extends Ph{construct(e,n,r){return new Xt(e,n,r)}static isValidIdentifier(e){return R7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Xt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new re(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new re(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new re(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new re(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xt(n)}static emptyPath(){return new Xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.path=e}static fromPath(e){return new fe(ot.fromString(e))}static fromName(e){return new fe(ot.fromString(e).popFirst(5))}static empty(){return new fe(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ot.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fe(new ot(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function T1(t){return t.fields.find(e=>e.kind===2)}function ca(t){return t.fields.filter(e=>e.kind!==2)}P2.UNKNOWN_ID=-1;class N7{constructor(e,n){this.fieldPath=e,this.kind=n}}class vg{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new vg(0,$r.min())}}function D2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ne.fromTimestamp(r===1e9?new Ft(n+1,0):new Ft(n,r));return new $r(i,fe.empty(),e)}function O2(t){return new $r(t.readTime,t.key,-1)}class $r{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new $r(Ne.min(),fe.empty(),-1)}static max(){return new $r(Ne.max(),fe.empty(),-1)}}function AE(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=fe.comparator(t.documentKey,e.documentKey),n!==0?n:Be(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class M2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xo(t){if(t.code!==Q.FAILED_PRECONDITION||t.message!==L2)throw t;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Se(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,r)=>{n(e)})}static reject(e){return new q((n,r)=>{r(e)})}static waitFor(e){return new q((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=q.resolve(!1);for(const r of e)n=n.next(i=>i?q.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new q((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new q((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.v=new wn,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{n.error?this.v.reject(new jd(e,n.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=RE(r.target.error);this.v.reject(new jd(e,i))}}static open(e,n,r,i){try{return new av(n,e.transaction(i,r))}catch(s){throw new jd(n,s)}}get P(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(se("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new D7(n)}}class fi{constructor(e,n,r){this.name=e,this.version=n,this.S=r,fi.D(zt())===12.2&&Yt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return se("SimpleDb","Removing database:",e),ha(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!Eh())return!1;if(fi.N())return!0;const e=zt(),n=fi.D(e),r=0<n&&n<10,i=fi.k(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static N(){var e;return typeof process<"u"&&((e=process.env)===null||e===void 0?void 0:e.O)==="YES"}static M(e,n){return e.store(n)}static D(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async F(e){return this.db||(se("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new jd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new re(Q.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new re(Q.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new jd(e,o))},i.onupgradeneeded=s=>{se("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.S.$(o,i.transaction,s.oldVersion,this.version).next(()=>{se("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.F(e);const a=av.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(c=>(a.V(),c)).catch(c=>(a.abort(c),q.reject(c))).toPromise();return l.catch(()=>{}),await a.P,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(se("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class P7{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return ha(this.q.delete())}}class jd extends re{constructor(e,n){super(Q.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Jo(t){return t.name==="IndexedDbTransactionError"}class D7{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(se("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(se("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ha(r)}add(e){return se("SimpleDb","ADD",this.store.name,e,e),ha(this.store.add(e))}get(e){return ha(this.store.get(e)).next(n=>(n===void 0&&(n=null),se("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return se("SimpleDb","DELETE",this.store.name,e),ha(this.store.delete(e))}count(){return se("SimpleDb","COUNT",this.store.name),ha(this.store.count())}W(e,n){const r=this.options(e,n);if(r.index||typeof this.store.getAll!="function"){const i=this.cursor(r),s=[];return this.H(i,(o,a)=>{s.push(a)}).next(()=>s)}{const i=this.store.getAll(r.range);return new q((s,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{s(a.target.result)}})}}J(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new q((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}Y(e,n){se("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.Z=!1;const i=this.cursor(r);return this.H(i,(s,o,a)=>a.delete())}X(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}tt(e){const n=this.cursor({});return new q((r,i)=>{n.onerror=s=>{const o=RE(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new q((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new P7(a),c=n(a.primaryKey,a.value,l);if(c instanceof q){const u=c.catch(d=>(l.done(),q.reject(d)));r.push(u)}l.isDone?i():l.G===null?a.continue():a.continue(l.G)}}).next(()=>q.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.Z?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function ha(t){return new q((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=RE(r.target.error);n(i)}})}let xk=!1;function RE(t){const e=fi.D(zt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return xk||(xk=!0,setTimeout(()=>{throw r},0)),r}}return t}class O7{constructor(e,n){this.asyncQueue=e,this.et=n,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}nt(e){se("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{se("IndexBackiller",`Documents written: ${await this.et.st()}`)}catch(n){Jo(n)?se("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):await Xo(n)}await this.nt(6e4)})}}class L7{constructor(e,n){this.localStore=e,this.persistence=n}async st(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.it(n,e))}it(e,n){const r=new Set;let i=n,s=!0;return q.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return se("IndexBackiller",`Processing collection: ${o}`),this.rt(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}rt(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ot(i,s)).next(a=>(se("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ot(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=O2(s);AE(o,r)>0&&(r=o)}),new $r(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>n.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}pr.at=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M7{constructor(e,n,r,i,s,o,a,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=l}}class Co{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Co("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Co&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tk(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function El(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function $2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mf(t){return t==null}function Dh(t){return t===0&&1/t==-1/0}function F2(t){return typeof t=="number"&&Number.isInteger(t)&&!Dh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $7 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F7(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw i instanceof DOMException?new $7("Invalid base64 string: "+i):i}}(e);return new ln(n)}static fromUint8Array(e){const n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new ln(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ln.EMPTY_BYTE_STRING=new ln("");const U7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ko(t){if(Ae(!!t),typeof t=="string"){let e=0;const n=U7.exec(t);if(Ae(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Gt(t.seconds),nanos:Gt(t.nanos)}}function Gt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ya(t){return typeof t=="string"?ln.fromBase64String(t):ln.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function U2(t){const e=t.mapValue.fields.__previous_value__;return NE(e)?U2(e):e}function Oh(t){const e=ko(t.mapValue.fields.__local_write_time__.timestampValue);return new Ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},pm={nullValue:"NULL_VALUE"};function Xa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?NE(t)?4:j2(t)?9007199254740991:10:Se()}function Gi(t,e){if(t===e)return!0;const n=Xa(t);if(n!==Xa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Oh(t).isEqual(Oh(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=ko(r.timestampValue),o=ko(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return Ya(r.bytesValue).isEqual(Ya(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return Gt(r.geoPointValue.latitude)===Gt(i.geoPointValue.latitude)&&Gt(r.geoPointValue.longitude)===Gt(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Gt(r.integerValue)===Gt(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=Gt(r.doubleValue),o=Gt(i.doubleValue);return s===o?Dh(s)===Dh(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return jc(t.arrayValue.values||[],e.arrayValue.values||[],Gi);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(Tk(s)!==Tk(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(o[a]===void 0||!Gi(s[a],o[a])))return!1;return!0}(t,e);default:return Se()}}function Lh(t,e){return(t.values||[]).find(n=>Gi(n,e))!==void 0}function Ao(t,e){if(t===e)return 0;const n=Xa(t),r=Xa(e);if(n!==r)return Be(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Be(t.booleanValue,e.booleanValue);case 2:return function(i,s){const o=Gt(i.integerValue||i.doubleValue),a=Gt(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return Ik(t.timestampValue,e.timestampValue);case 4:return Ik(Oh(t),Oh(e));case 5:return Be(t.stringValue,e.stringValue);case 6:return function(i,s){const o=Ya(i),a=Ya(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),a=s.split("/");for(let l=0;l<o.length&&l<a.length;l++){const c=Be(o[l],a[l]);if(c!==0)return c}return Be(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const o=Be(Gt(i.latitude),Gt(s.latitude));return o!==0?o:Be(Gt(i.longitude),Gt(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],a=s.values||[];for(let l=0;l<o.length&&l<a.length;++l){const c=Ao(o[l],a[l]);if(c)return c}return Be(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===eo.mapValue&&s===eo.mapValue)return 0;if(i===eo.mapValue)return 1;if(s===eo.mapValue)return-1;const o=i.fields||{},a=Object.keys(o),l=s.fields||{},c=Object.keys(l);a.sort(),c.sort();for(let u=0;u<a.length&&u<c.length;++u){const d=Be(a[u],c[u]);if(d!==0)return d;const h=Ao(o[a[u]],l[c[u]]);if(h!==0)return h}return Be(a.length,c.length)}(t.mapValue,e.mapValue);default:throw Se()}}function Ik(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Be(t,e);const n=ko(t),r=ko(e),i=Be(n.seconds,r.seconds);return i!==0?i:Be(n.nanos,r.nanos)}function Vc(t){return I1(t)}function I1(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=ko(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Ya(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,fe.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=I1(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${I1(r.fields[a])}`;return s+"}"}(t.mapValue):Se();var e,n}function Ja(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function C1(t){return!!t&&"integerValue"in t}function Mh(t){return!!t&&"arrayValue"in t}function Ck(t){return!!t&&"nullValue"in t}function kk(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function mm(t){return!!t&&"mapValue"in t}function Vd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return El(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Vd(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Vd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function j2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function j7(t){return"nullValue"in t?pm:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Ja(Co.empty(),fe.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:Se()}function V7(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Ja(Co.empty(),fe.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?eo:Se()}function Ak(t,e){const n=Ao(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function Rk(t,e){const n=Ao(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ro=class{constructor(e,n){this.position=e,this.inclusive=n}};function Nk(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=fe.comparator(fe.fromName(o.referenceValue),n.key):r=Ao(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Pk(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Gi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{}let at=class B2 extends V2{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new B7(e,n,r):n==="array-contains"?new H7(e,r):n==="in"?new Q2(e,r):n==="not-in"?new G7(e,r):n==="array-contains-any"?new q7(e,r):new B2(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new z7(e,r):new W7(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ao(n,this.value)):n!==null&&Xa(this.value)===Xa(n)&&this.matchesComparison(Ao(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}},bt=class z2 extends V2{constructor(e,n){super(),this.filters=e,this.op=n,this.ft=null}static create(e,n){return new z2(e,n)}matches(e){return Bc(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ft!==null||(this.ft=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ft}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.dt(n=>n.isInequality());return e!==null?e.field:null}dt(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}};function Bc(t){return t.op==="and"}function k1(t){return t.op==="or"}function PE(t){return W2(t)&&Bc(t)}function W2(t){for(const e of t.filters)if(e instanceof bt)return!1;return!0}function A1(t){if(t instanceof at)return t.field.canonicalString()+t.op.toString()+Vc(t.value);if(PE(t))return t.filters.map(e=>A1(e)).join(",");{const e=t.filters.map(n=>A1(n)).join(",");return`${t.op}(${e})`}}function H2(t,e){return t instanceof at?function(n,r){return r instanceof at&&n.op===r.op&&n.field.isEqual(r.field)&&Gi(n.value,r.value)}(t,e):t instanceof bt?function(n,r){return r instanceof bt&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((i,s,o)=>i&&H2(s,r.filters[o]),!0):!1}(t,e):void Se()}function G2(t,e){const n=t.filters.concat(e);return bt.create(n,t.op)}function q2(t){return t instanceof at?function(e){return`${e.field.canonicalString()} ${e.op} ${Vc(e.value)}`}(t):t instanceof bt?function(e){return e.op.toString()+" {"+e.getFilters().map(q2).join(" ,")+"}"}(t):"Filter"}let B7=class extends at{constructor(e,n,r){super(e,n,r),this.key=fe.fromName(r.referenceValue)}matches(e){const n=fe.comparator(e.key,this.key);return this.matchesComparison(n)}},z7=class extends at{constructor(e,n){super(e,"in",n),this.keys=K2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},W7=class extends at{constructor(e,n){super(e,"not-in",n),this.keys=K2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function K2(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>fe.fromName(r.referenceValue))}let H7=class extends at{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Mh(n)&&Lh(n.arrayValue,this.value)}},Q2=class extends at{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Lh(this.value.arrayValue,n)}},G7=class extends at{constructor(e,n){super(e,"not-in",n)}matches(e){if(Lh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Lh(this.value.arrayValue,n)}};class q7 extends at{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Mh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Lh(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vc=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function K7(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cn=class R1{constructor(e,n){this.comparator=e,this.root=n||go.EMPTY}insert(e,n){return new R1(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,go.BLACK,null,null))}remove(e){return new R1(this.comparator,this.root.remove(e,this.comparator).copy(null,null,go.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jp(this.root,e,this.comparator,!1)}getReverseIterator(){return new jp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jp(this.root,e,this.comparator,!0)}},jp=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},go=class ts{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ts.RED,this.left=i??ts.EMPTY,this.right=s??ts.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new ts(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ts.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ts.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ts.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ts.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Se();const e=this.left.check();if(e!==this.right.check())throw Se();return e+(this.isRed()?0:1)}};go.EMPTY=null,go.RED=!0,go.BLACK=!1;go.EMPTY=new class{constructor(){this.size=0}get key(){throw Se()}get value(){throw Se()}get color(){throw Se()}get left(){throw Se()}get right(){throw Se()}copy(t,e,n,r,i){return this}insert(t,e,n){return new go(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let At=class N1{constructor(e){this.comparator=e,this.data=new cn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Dk(this.data.getIterator())}getIteratorFrom(e){return new Dk(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof N1)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new N1(this.comparator);return n.data=e,n}},Dk=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function $l(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this.fields=e,e.sort(Xt.comparator)}static empty(){return new mr([])}unionWith(e){let n=new At(Xt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new mr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return jc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.value=e}static empty(){return new Nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!mm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vd(n)}setAll(e){let n=Xt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Vd(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());mm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Gi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];mm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){El(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Nn(Vd(this.value))}}function Y2(t){const e=[];return El(t.fields,(n,r)=>{const i=new Xt([n]);if(mm(r)){const s=Y2(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new mr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new It(e,0,Ne.min(),Ne.min(),Ne.min(),Nn.empty(),0)}static newFoundDocument(e,n,r,i){return new It(e,1,n,Ne.min(),r,i,0)}static newNoDocument(e,n){return new It(e,2,n,Ne.min(),Ne.min(),Nn.empty(),0)}static newUnknownDocument(e,n){return new It(e,3,n,Ne.min(),Ne.min(),Nn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof It&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new It(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q7{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this._t=null}}function P1(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Q7(t,e,n,r,i,s,o)}function Za(t){const e=ge(t);if(e._t===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>A1(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Mf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Vc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Vc(r)).join(",")),e._t=n}return e._t}function $f(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!K7(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!H2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Pk(t.startAt,e.startAt)&&Pk(t.endAt,e.endAt)}function _g(t){return fe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function wg(t,e){return t.filters.filter(n=>n instanceof at&&n.field.isEqual(e))}function Ok(t,e,n){let r=pm,i=!0;for(const s of wg(t,e)){let o=pm,a=!0;switch(s.op){case"<":case"<=":o=j7(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=pm}Ak({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];Ak({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function Lk(t,e,n){let r=eo,i=!0;for(const s of wg(t,e)){let o=eo,a=!0;switch(s.op){case">=":case">":o=V7(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=eo}Rk({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];Rk({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.wt=null,this.gt=null,this.startAt,this.endAt}}function X2(t,e,n,r,i,s,o,a){return new Ds(t,e,n,r,i,s,o,a)}function _u(t){return new Ds(t)}function Mk(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function DE(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function lv(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function OE(t){return t.collectionGroup!==null}function Da(t){const e=ge(t);if(e.wt===null){e.wt=[];const n=lv(e),r=DE(e);if(n!==null&&r===null)n.isKeyField()||e.wt.push(new vc(n)),e.wt.push(new vc(Xt.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new vc(Xt.keyField(),s))}}}return e.wt}function xr(t){const e=ge(t);if(!e.gt)if(e.limitType==="F")e.gt=P1(e.path,e.collectionGroup,Da(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of Da(e)){const o=s.dir==="desc"?"asc":"desc";n.push(new vc(s.field,o))}const r=e.endAt?new Ro(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Ro(e.startAt.position,e.startAt.inclusive):null;e.gt=P1(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e.gt}function D1(t,e){e.getFirstInequalityField(),lv(t);const n=t.filters.concat([e]);return new Ds(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function bg(t,e,n){return new Ds(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ff(t,e){return $f(xr(t),xr(e))&&t.limitType===e.limitType}function J2(t){return`${Za(xr(t))}|lt:${t.limitType}`}function O1(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>q2(r)).join(", ")}]`),Mf(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(r)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Vc(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Vc(r)).join(",")),`Target(${n})`}(xr(t))}; limitType=${t.limitType})`}function Uf(t,e){return e.isFoundDocument()&&function(n,r){const i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):fe.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(const i of Da(n))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(i,s,o){const a=Nk(i,s,o);return i.inclusive?a<=0:a<0}(n.startAt,Da(n),r)||n.endAt&&!function(i,s,o){const a=Nk(i,s,o);return i.inclusive?a>=0:a>0}(n.endAt,Da(n),r))}(t,e)}function Z2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function eM(t){return(e,n)=>{let r=!1;for(const i of Da(t)){const s=Y7(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Y7(t,e,n){const r=t.field.isKeyField()?fe.comparator(e.key,n.key):function(i,s,o){const a=s.data.field(i),l=o.data.field(i);return a!==null&&l!==null?Ao(a,l):Se()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Se()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tM(t,e){if(t.yt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dh(e)?"-0":e}}function nM(t){return{integerValue:""+t}}function rM(t,e){return F2(e)?nM(e):tM(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(){this._=void 0}}function X7(t,e,n){return t instanceof zc?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,e):t instanceof el?sM(t,e):t instanceof tl?oM(t,e):function(r,i){const s=iM(r,i),o=$k(s)+$k(r.It);return C1(s)&&C1(r.It)?nM(o):tM(r.Tt,o)}(t,e)}function J7(t,e,n){return t instanceof el?sM(t,e):t instanceof tl?oM(t,e):n}function iM(t,e){return t instanceof Wc?C1(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class zc extends cv{}class el extends cv{constructor(e){super(),this.elements=e}}function sM(t,e){const n=aM(e);for(const r of t.elements)n.some(i=>Gi(i,r))||n.push(r);return{arrayValue:{values:n}}}class tl extends cv{constructor(e){super(),this.elements=e}}function oM(t,e){let n=aM(e);for(const r of t.elements)n=n.filter(i=>!Gi(i,r));return{arrayValue:{values:n}}}class Wc extends cv{constructor(e,n){super(),this.Tt=e,this.It=n}}function $k(t){return Gt(t.integerValue||t.doubleValue)}function aM(t){return Mh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e,n){this.field=e,this.transform=n}}function Z7(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof el&&r instanceof el||n instanceof tl&&r instanceof tl?jc(n.elements,r.elements,Gi):n instanceof Wc&&r instanceof Wc?Gi(n.It,r.It):n instanceof zc&&r instanceof zc}(t.transform,e.transform)}class eQ{constructor(e,n){this.version=e,this.transformResults=n}}class Mt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Mt}static exists(e){return new Mt(void 0,e)}static updateTime(e){return new Mt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class uv{}function lM(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new bu(t.key,Mt.none()):new wu(t.key,t.data,Mt.none());{const n=t.data,r=Nn.empty();let i=new At(Xt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Os(t.key,r,new mr(i.toArray()),Mt.none())}}function tQ(t,e,n){t instanceof wu?function(r,i,s){const o=r.value.clone(),a=Uk(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Os?function(r,i,s){if(!gm(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=Uk(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(cM(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):function(r,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Bd(t,e,n,r){return t instanceof wu?function(i,s,o,a){if(!gm(i.precondition,s))return o;const l=i.value.clone(),c=jk(i.fieldTransforms,a,s);return l.setAll(c),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Os?function(i,s,o,a){if(!gm(i.precondition,s))return o;const l=jk(i.fieldTransforms,a,s),c=s.data;return c.setAll(cM(i)),c.setAll(l),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(u=>u.field))}(t,e,n,r):function(i,s,o){return gm(i.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(t,e,n)}function nQ(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=iM(r.transform,i||null);s!=null&&(n===null&&(n=Nn.empty()),n.set(r.field,s))}return n||null}function Fk(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&jc(n,r,(i,s)=>Z7(i,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class wu extends uv{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Os extends uv{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function cM(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Uk(t,e,n){const r=new Map;Ae(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,J7(o,a,n[i]))}return r}function jk(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,X7(s,o,e))}return r}class bu extends uv{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LE extends uv{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rQ{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zt,it;function uM(t){switch(t){default:return Se();case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0}}function dM(t){if(t===void 0)return Yt("GRPC error has no .code"),Q.UNKNOWN;switch(t){case Zt.OK:return Q.OK;case Zt.CANCELLED:return Q.CANCELLED;case Zt.UNKNOWN:return Q.UNKNOWN;case Zt.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case Zt.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case Zt.INTERNAL:return Q.INTERNAL;case Zt.UNAVAILABLE:return Q.UNAVAILABLE;case Zt.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case Zt.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case Zt.NOT_FOUND:return Q.NOT_FOUND;case Zt.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case Zt.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case Zt.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case Zt.ABORTED:return Q.ABORTED;case Zt.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case Zt.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case Zt.DATA_LOSS:return Q.DATA_LOSS;default:return Se()}}(it=Zt||(Zt={}))[it.OK=0]="OK",it[it.CANCELLED=1]="CANCELLED",it[it.UNKNOWN=2]="UNKNOWN",it[it.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",it[it.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",it[it.NOT_FOUND=5]="NOT_FOUND",it[it.ALREADY_EXISTS=6]="ALREADY_EXISTS",it[it.PERMISSION_DENIED=7]="PERMISSION_DENIED",it[it.UNAUTHENTICATED=16]="UNAUTHENTICATED",it[it.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",it[it.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",it[it.ABORTED=10]="ABORTED",it[it.OUT_OF_RANGE=11]="OUT_OF_RANGE",it[it.UNIMPLEMENTED=12]="UNIMPLEMENTED",it[it.INTERNAL=13]="INTERNAL",it[it.UNAVAILABLE=14]="UNAVAILABLE",it[it.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){El(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return $2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iQ=new cn(fe.comparator);function gr(){return iQ}const hM=new cn(fe.comparator);function Ed(...t){let e=hM;for(const n of t)e=e.insert(n.key,n);return e}function fM(t){let e=hM;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Oi(){return zd()}function pM(){return zd()}function zd(){return new Zo(t=>t.toString(),(t,e)=>t.isEqual(e))}const sQ=new cn(fe.comparator),oQ=new At(fe.comparator);function We(...t){let e=oQ;for(const n of t)e=e.add(n);return e}const aQ=new At(Be);function dv(){return aQ}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Bf.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Vf(Ne.min(),i,dv(),gr(),We())}}class Bf{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Bf(r,n,We(),We(),We())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e,n,r,i){this.Et=e,this.removedTargetIds=n,this.key=r,this.At=i}}class mM{constructor(e,n){this.targetId=e,this.Rt=n}}class gM{constructor(e,n,r=ln.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Vk{constructor(){this.bt=0,this.vt=zk(),this.Pt=ln.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}get current(){return this.Vt}get resumeToken(){return this.Pt}get Dt(){return this.bt!==0}get Ct(){return this.St}xt(e){e.approximateByteSize()>0&&(this.St=!0,this.Pt=e)}Nt(){let e=We(),n=We(),r=We();return this.vt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Se()}}),new Bf(this.Pt,this.Vt,e,n,r)}kt(){this.St=!1,this.vt=zk()}Ot(e,n){this.St=!0,this.vt=this.vt.insert(e,n)}Mt(e){this.St=!0,this.vt=this.vt.remove(e)}Ft(){this.bt+=1}$t(){this.bt-=1}Bt(){this.St=!0,this.Vt=!0}}class lQ{constructor(e){this.Lt=e,this.qt=new Map,this.Ut=gr(),this.Kt=Bk(),this.Gt=new At(Be)}Qt(e){for(const n of e.Et)e.At&&e.At.isFoundDocument()?this.jt(n,e.At):this.zt(n,e.key,e.At);for(const n of e.removedTargetIds)this.zt(n,e.key,e.At)}Wt(e){this.forEachTarget(e,n=>{const r=this.Ht(n);switch(e.state){case 0:this.Jt(n)&&r.xt(e.resumeToken);break;case 1:r.$t(),r.Dt||r.kt(),r.xt(e.resumeToken);break;case 2:r.$t(),r.Dt||this.removeTarget(n);break;case 3:this.Jt(n)&&(r.Bt(),r.xt(e.resumeToken));break;case 4:this.Jt(n)&&(this.Yt(n),r.xt(e.resumeToken));break;default:Se()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qt.forEach((r,i)=>{this.Jt(i)&&n(i)})}Zt(e){const n=e.targetId,r=e.Rt.count,i=this.Xt(n);if(i){const s=i.target;if(_g(s))if(r===0){const o=new fe(s.path);this.zt(n,o,It.newNoDocument(o,Ne.min()))}else Ae(r===1);else this.te(n)!==r&&(this.Yt(n),this.Gt=this.Gt.add(n))}}ee(e){const n=new Map;this.qt.forEach((s,o)=>{const a=this.Xt(o);if(a){if(s.current&&_g(a.target)){const l=new fe(a.target.path);this.Ut.get(l)!==null||this.ne(o,l)||this.zt(o,l,It.newNoDocument(l,e))}s.Ct&&(n.set(o,s.Nt()),s.kt())}});let r=We();this.Kt.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Xt(l);return!c||c.purpose===2||(a=!1,!1)}),a&&(r=r.add(s))}),this.Ut.forEach((s,o)=>o.setReadTime(e));const i=new Vf(e,n,this.Gt,this.Ut,r);return this.Ut=gr(),this.Kt=Bk(),this.Gt=new At(Be),i}jt(e,n){if(!this.Jt(e))return;const r=this.ne(e,n.key)?2:0;this.Ht(e).Ot(n.key,r),this.Ut=this.Ut.insert(n.key,n),this.Kt=this.Kt.insert(n.key,this.se(n.key).add(e))}zt(e,n,r){if(!this.Jt(e))return;const i=this.Ht(e);this.ne(e,n)?i.Ot(n,1):i.Mt(n),this.Kt=this.Kt.insert(n,this.se(n).delete(e)),r&&(this.Ut=this.Ut.insert(n,r))}removeTarget(e){this.qt.delete(e)}te(e){const n=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ft(e){this.Ht(e).Ft()}Ht(e){let n=this.qt.get(e);return n||(n=new Vk,this.qt.set(e,n)),n}se(e){let n=this.Kt.get(e);return n||(n=new At(Be),this.Kt=this.Kt.insert(e,n)),n}Jt(e){const n=this.Xt(e)!==null;return n||se("WatchChangeAggregator","Detected inactive target",e),n}Xt(e){const n=this.qt.get(e);return n&&n.Dt?null:this.Lt.ie(e)}Yt(e){this.qt.set(e,new Vk),this.Lt.getRemoteKeysForTarget(e).forEach(n=>{this.zt(e,n,null)})}ne(e,n){return this.Lt.getRemoteKeysForTarget(e).has(n)}}function Bk(){return new cn(fe.comparator)}function zk(){return new cn(fe.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cQ=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),uQ=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),dQ=(()=>({and:"AND",or:"OR"}))();class hQ{constructor(e,n){this.databaseId=e,this.yt=n}}function Hc(t,e){return t.yt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yM(t,e){return t.yt?e.toBase64():e.toUint8Array()}function fQ(t,e){return Hc(t,e.toTimestamp())}function Jt(t){return Ae(!!t),Ne.fromTimestamp(function(e){const n=ko(e);return new Ft(n.seconds,n.nanos)}(t))}function ME(t,e){return function(n){return new ot(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function vM(t){const e=ot.fromString(t);return Ae(CM(e)),e}function $h(t,e){return ME(t.databaseId,e.path)}function ji(t,e){const n=vM(e);if(n.get(1)!==t.databaseId.projectId)throw new re(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new re(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new fe(wM(n))}function L1(t,e){return ME(t.databaseId,e)}function _M(t){const e=vM(t);return e.length===4?ot.emptyPath():wM(e)}function Fh(t){return new ot(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function wM(t){return Ae(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Wk(t,e,n){return{name:$h(t,e),fields:n.value.mapValue.fields}}function bM(t,e,n){const r=ji(t,e.name),i=Jt(e.updateTime),s=e.createTime?Jt(e.createTime):Ne.min(),o=new Nn({mapValue:{fields:e.fields}}),a=It.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function pQ(t,e){return"found"in e?function(n,r){Ae(!!r.found),r.found.name,r.found.updateTime;const i=ji(n,r.found.name),s=Jt(r.found.updateTime),o=r.found.createTime?Jt(r.found.createTime):Ne.min(),a=new Nn({mapValue:{fields:r.found.fields}});return It.newFoundDocument(i,s,o,a)}(t,e):"missing"in e?function(n,r){Ae(!!r.missing),Ae(!!r.readTime);const i=ji(n,r.missing),s=Jt(r.readTime);return It.newNoDocument(i,s)}(t,e):Se()}function mQ(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Se()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,c){return l.yt?(Ae(c===void 0||typeof c=="string"),ln.fromBase64String(c||"")):(Ae(c===void 0||c instanceof Uint8Array),ln.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const c=l.code===void 0?Q.UNKNOWN:dM(l.code);return new re(c,l.message||"")}(o);n=new gM(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ji(t,r.document.name),s=Jt(r.document.updateTime),o=r.document.createTime?Jt(r.document.createTime):Ne.min(),a=new Nn({mapValue:{fields:r.document.fields}}),l=It.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new ym(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ji(t,r.document),s=r.readTime?Jt(r.readTime):Ne.min(),o=It.newNoDocument(i,s),a=r.removedTargetIds||[];n=new ym([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ji(t,r.document),s=r.removedTargetIds||[];n=new ym([],s,i,null)}else{if(!("filter"in e))return Se();{e.filter;const r=e.filter;r.targetId;const i=r.count||0,s=new rQ(i),o=r.targetId;n=new mM(o,s)}}return n}function Uh(t,e){let n;if(e instanceof wu)n={update:Wk(t,e.key,e.value)};else if(e instanceof bu)n={delete:$h(t,e.key)};else if(e instanceof Os)n={update:Wk(t,e.key,e.data),updateMask:bQ(e.fieldMask)};else{if(!(e instanceof LE))return Se();n={verify:$h(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof zc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof el)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof tl)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Wc)return{fieldPath:s.field.canonicalString(),increment:o.It};throw Se()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:fQ(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Se()}(t,e.precondition)),n}function M1(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?Mt.updateTime(Jt(i.updateTime)):i.exists!==void 0?Mt.exists(i.exists):Mt.none()}(e.currentDocument):Mt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,o){let a=null;if("setToServerValue"in o)Ae(o.setToServerValue==="REQUEST_TIME"),a=new zc;else if("appendMissingElements"in o){const c=o.appendMissingElements.values||[];a=new el(c)}else if("removeAllFromArray"in o){const c=o.removeAllFromArray.values||[];a=new tl(c)}else"increment"in o?a=new Wc(s,o.increment):Se();const l=Xt.fromServerFormat(o.fieldPath);return new jf(l,a)}(t,i)):[];if(e.update){e.update.name;const i=ji(t,e.update.name),s=new Nn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(a){const l=a.fieldPaths||[];return new mr(l.map(c=>Xt.fromServerFormat(c)))}(e.updateMask);return new Os(i,s,o,n,r)}return new wu(i,s,n,r)}if(e.delete){const i=ji(t,e.delete);return new bu(i,n)}if(e.verify){const i=ji(t,e.verify);return new LE(i,n)}return Se()}function gQ(t,e){return t&&t.length>0?(Ae(e!==void 0),t.map(n=>function(r,i){let s=r.updateTime?Jt(r.updateTime):Jt(i);return s.isEqual(Ne.min())&&(s=Jt(i)),new eQ(s,r.transformResults||[])}(n,e))):[]}function SM(t,e){return{documents:[L1(t,e.path)]}}function EM(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=L1(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=L1(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(l){if(l.length!==0)return IM(bt.create(l,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(l){if(l.length!==0)return l.map(c=>function(u){return{field:Bl(u.field),direction:vQ(u.dir)}}(c))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(l,c){return l.yt||Mf(c)?c:{value:c}}(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function xM(t){let e=_M(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ae(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(u){const d=TM(u);return d instanceof bt&&PE(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(u=>function(d){return new vc(zl(d.field),function(h){switch(h){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction))}(u)));let a=null;n.limit&&(a=function(u){let d;return d=typeof u=="object"?u.value:u,Mf(d)?null:d}(n.limit));let l=null;n.startAt&&(l=function(u){const d=!!u.before,h=u.values||[];return new Ro(h,d)}(n.startAt));let c=null;return n.endAt&&(c=function(u){const d=!u.before,h=u.values||[];return new Ro(h,d)}(n.endAt)),X2(e,i,o,s,a,"F",l,c)}function yQ(t,e){const n=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Se()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function TM(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=zl(e.unaryFilter.field);return at.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=zl(e.unaryFilter.field);return at.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=zl(e.unaryFilter.field);return at.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=zl(e.unaryFilter.field);return at.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Se()}}(t):t.fieldFilter!==void 0?function(e){return at.create(zl(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Se()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return bt.create(e.compositeFilter.filters.map(n=>TM(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return Se()}}(e.compositeFilter.op))}(t):Se()}function vQ(t){return cQ[t]}function _Q(t){return uQ[t]}function wQ(t){return dQ[t]}function Bl(t){return{fieldPath:t.canonicalString()}}function zl(t){return Xt.fromServerFormat(t.fieldPath)}function IM(t){return t instanceof at?function(e){if(e.op==="=="){if(kk(e.value))return{unaryFilter:{field:Bl(e.field),op:"IS_NAN"}};if(Ck(e.value))return{unaryFilter:{field:Bl(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(kk(e.value))return{unaryFilter:{field:Bl(e.field),op:"IS_NOT_NAN"}};if(Ck(e.value))return{unaryFilter:{field:Bl(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bl(e.field),op:_Q(e.op),value:e.value}}}(t):t instanceof bt?function(e){const n=e.getFilters().map(r=>IM(r));return n.length===1?n[0]:{compositeFilter:{op:wQ(e.op),filters:n}}}(t):Se()}function bQ(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function CM(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Hk(e)),e=SQ(t.get(n),e);return Hk(e)}function SQ(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function Hk(t){return t+""}function Li(t){const e=t.length;if(Ae(e>=2),e===2)return Ae(t.charAt(0)===""&&t.charAt(1)===""),ot.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&Se(),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:Se()}s=o+2}return new ot(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm(t,e){return[t,ir(e)]}function kM(t,e,n){return[t,ir(e),n]}const EQ={},xQ=["prefixPath","collectionGroup","readTime","documentId"],TQ=["prefixPath","collectionGroup","documentId"],IQ=["collectionGroup","readTime","prefixPath","documentId"],CQ=["canonicalId","targetId"],kQ=["targetId","path"],AQ=["path","targetId"],RQ=["collectionId","parent"],NQ=["indexId","uid"],PQ=["uid","sequenceNumber"],DQ=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],OQ=["indexId","uid","orderedDocumentKey"],LQ=["userId","collectionPath","documentId"],MQ=["userId","collectionPath","largestBatchId"],$Q=["userId","collectionGroup","largestBatchId"],AM=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],FQ=[...AM,"documentOverlays"],RM=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],NM=RM,UQ=[...NM,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1 extends M2{constructor(e,n){super(),this.re=e,this.currentSequenceNumber=n}}function Tn(t,e){const n=ge(t);return fi.M(n.re,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&tQ(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Bd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Bd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=pM();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=lM(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),We())}isEqual(e){return this.batchId===e.batchId&&jc(this.mutations,e.mutations,(n,r)=>Fk(n,r))&&jc(this.baseMutations,e.baseMutations,(n,r)=>Fk(n,r))}}class FE{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ae(e.mutations.length===r.length);let i=sQ;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new FE(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e,n,r,i,s=Ne.min(),o=Ne.min(),a=ln.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new yo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new yo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new yo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e){this.oe=e}}function jQ(t,e){let n;if(e.document)n=bM(t.oe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=fe.fromSegments(e.noDocument.path),i=rl(e.noDocument.readTime);n=It.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Se();{const r=fe.fromSegments(e.unknownDocument.path),i=rl(e.unknownDocument.version);n=It.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(r){const i=new Ft(r[0],r[1]);return Ne.fromTimestamp(i)}(e.readTime)),n}function qk(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Sg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,s){return{name:$h(i,s.key),fields:s.data.value.mapValue.fields,updateTime:Hc(i,s.version.toTimestamp()),createTime:Hc(i,s.createTime.toTimestamp())}}(t.oe,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:nl(e.version)};else{if(!e.isUnknownDocument())return Se();r.unknownDocument={path:n.path.toArray(),version:nl(e.version)}}return r}function Sg(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function nl(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function rl(t){const e=new Ft(t.seconds,t.nanoseconds);return Ne.fromTimestamp(e)}function fa(t,e){const n=(e.baseMutations||[]).map(s=>M1(t.oe,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>M1(t.oe,s)),i=Ft.fromMillis(e.localWriteTimeMs);return new $E(e.batchId,i,n,r)}function xd(t){const e=rl(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?rl(t.lastLimboFreeSnapshotVersion):Ne.min();let r;var i;return t.query.documents!==void 0?(Ae((i=t.query).documents.length===1),r=xr(_u(_M(i.documents[0])))):r=function(s){return xr(xM(s))}(t.query),new yo(r,t.targetId,0,t.lastListenSequenceNumber,e,n,ln.fromBase64String(t.resumeToken))}function DM(t,e){const n=nl(e.snapshotVersion),r=nl(e.lastLimboFreeSnapshotVersion);let i;i=_g(e.target)?SM(t.oe,e.target):EM(t.oe,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Za(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function jE(t){const e=xM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?bg(e,e.limit,"L"):e}function C0(t,e){return new UE(e.largestBatchId,M1(t.oe,e.overlayMutation))}function Kk(t,e){const n=e.path.lastSegment();return[t,ir(e.path.popLast()),n]}function Qk(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:nl(r.readTime),documentKey:ir(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VQ{getBundleMetadata(e,n){return Yk(e).get(n).next(r=>{if(r)return{id:(i=r).bundleId,createTime:rl(i.createTime),version:i.version};var i})}saveBundleMetadata(e,n){return Yk(e).put({bundleId:(r=n).id,createTime:nl(Jt(r.createTime)),version:r.version});var r}getNamedQuery(e,n){return Xk(e).get(n).next(r=>{if(r)return{name:(i=r).name,query:jE(i.bundledQuery),readTime:rl(i.readTime)};var i})}saveNamedQuery(e,n){return Xk(e).put(function(r){return{name:r.name,readTime:nl(Jt(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function Yk(t){return Tn(t,"bundles")}function Xk(t){return Tn(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e,n){this.Tt=e,this.userId=n}static ue(e,n){const r=n.uid||"";return new hv(e,r)}getOverlay(e,n){return Ju(e).get(Kk(this.userId,n)).next(r=>r?C0(this.Tt,r):null)}getOverlays(e,n){const r=Oi();return q.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new UE(n,o);i.push(this.ce(e,a))}),q.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(ir(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Ju(e).Y("collectionPathOverlayIndex",a))}),q.waitFor(s)}getOverlaysForCollection(e,n,r){const i=Oi(),s=ir(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Ju(e).W("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=C0(this.Tt,l);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=Oi();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Ju(e).X({index:"collectionGroupOverlayIndex",range:a},(l,c,u)=>{const d=C0(this.Tt,c);s.size()<i||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):u.done()}).next(()=>s)}ce(e,n){return Ju(e).put(function(r,i,s){const[o,a,l]=Kk(i,s.mutation.key);return{userId:i,collectionPath:a,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Uh(r.oe,s.mutation)}}(this.Tt,this.userId,n))}}function Ju(t){return Tn(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(){}ae(e,n){this.he(e,n),n.le()}he(e,n){if("nullValue"in e)this.fe(n,5);else if("booleanValue"in e)this.fe(n,10),n.de(e.booleanValue?1:0);else if("integerValue"in e)this.fe(n,15),n.de(Gt(e.integerValue));else if("doubleValue"in e){const r=Gt(e.doubleValue);isNaN(r)?this.fe(n,13):(this.fe(n,15),Dh(r)?n.de(0):n.de(r))}else if("timestampValue"in e){const r=e.timestampValue;this.fe(n,20),typeof r=="string"?n._e(r):(n._e(`${r.seconds||""}`),n.de(r.nanos||0))}else if("stringValue"in e)this.we(e.stringValue,n),this.me(n);else if("bytesValue"in e)this.fe(n,30),n.ge(Ya(e.bytesValue)),this.me(n);else if("referenceValue"in e)this.ye(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.fe(n,45),n.de(r.latitude||0),n.de(r.longitude||0)}else"mapValue"in e?j2(e)?this.fe(n,Number.MAX_SAFE_INTEGER):(this.pe(e.mapValue,n),this.me(n)):"arrayValue"in e?(this.Ie(e.arrayValue,n),this.me(n)):Se()}we(e,n){this.fe(n,25),this.Te(e,n)}Te(e,n){n._e(e)}pe(e,n){const r=e.fields||{};this.fe(n,55);for(const i of Object.keys(r))this.we(i,n),this.he(r[i],n)}Ie(e,n){const r=e.values||[];this.fe(n,50);for(const i of r)this.he(i,n)}ye(e,n){this.fe(n,37),fe.fromName(e).path.forEach(r=>{this.fe(n,60),this.Te(r,n)})}fe(e,n){e.de(n)}me(e){e.de(2)}}pa.Ee=new pa;function BQ(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function Jk(t){const e=64-function(n){let r=0;for(let i=0;i<8;++i){const s=BQ(255&n[i]);if(r+=s,s!==8)break}return r}(t);return Math.ceil(e/8)}class zQ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ae(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Re(r.value),r=n.next();this.be()}ve(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Pe(r.value),r=n.next();this.Ve()}Se(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Re(r);else if(r<2048)this.Re(960|r>>>6),this.Re(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Re(480|r>>>12),this.Re(128|63&r>>>6),this.Re(128|63&r);else{const i=n.codePointAt(0);this.Re(240|i>>>18),this.Re(128|63&i>>>12),this.Re(128|63&i>>>6),this.Re(128|63&i)}}this.be()}De(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=n.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.Ve()}Ce(e){const n=this.xe(e),r=Jk(n);this.Ne(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}ke(e){const n=this.xe(e),r=Jk(n);this.Ne(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Oe(){this.Me(255),this.Me(255)}Fe(){this.$e(255),this.$e(255)}reset(){this.position=0}seed(e){this.Ne(e.length),this.buffer.set(e,this.position),this.position+=e.length}Be(){return this.buffer.slice(0,this.position)}xe(e){const n=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Re(e){const n=255&e;n===0?(this.Me(0),this.Me(255)):n===255?(this.Me(255),this.Me(0)):this.Me(n)}Pe(e){const n=255&e;n===0?(this.$e(0),this.$e(255)):n===255?(this.$e(255),this.$e(0)):this.$e(e)}be(){this.Me(0),this.Me(1)}Ve(){this.$e(0),this.$e(1)}Me(e){this.Ne(1),this.buffer[this.position++]=e}$e(e){this.Ne(1),this.buffer[this.position++]=~e}Ne(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class WQ{constructor(e){this.Le=e}ge(e){this.Le.Ae(e)}_e(e){this.Le.Se(e)}de(e){this.Le.Ce(e)}le(){this.Le.Oe()}}class HQ{constructor(e){this.Le=e}ge(e){this.Le.ve(e)}_e(e){this.Le.De(e)}de(e){this.Le.ke(e)}le(){this.Le.Fe()}}class Zu{constructor(){this.Le=new zQ,this.qe=new WQ(this.Le),this.Ue=new HQ(this.Le)}seed(e){this.Le.seed(e)}Ke(e){return e===0?this.qe:this.Ue}Be(){return this.Le.Be()}reset(){this.Le.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Ge(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ma(this.indexId,this.documentKey,this.arrayValue,r)}}function Vs(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=Zk(t.arrayValue,e.arrayValue),n!==0?n:(n=Zk(t.directionalValue,e.directionalValue),n!==0?n:fe.comparator(t.documentKey,e.documentKey)))}function Zk(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GQ{constructor(e){this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Qe=e.orderBy,this.je=[];for(const n of e.filters){const r=n;r.isInequality()?this.ze=r:this.je.push(r)}}We(e){Ae(e.collectionGroup===this.collectionId);const n=T1(e);if(n!==void 0&&!this.He(n))return!1;const r=ca(e);let i=0,s=0;for(;i<r.length&&this.He(r[i]);++i);if(i===r.length)return!0;if(this.ze!==void 0){const o=r[i];if(!this.Je(this.ze,o)||!this.Ye(this.Qe[s++],o))return!1;++i}for(;i<r.length;++i){const o=r[i];if(s>=this.Qe.length||!this.Ye(this.Qe[s++],o))return!1}return!0}He(e){for(const n of this.je)if(this.Je(n,e))return!0;return!1}Je(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}Ye(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OM(t){var e,n;if(Ae(t instanceof at||t instanceof bt),t instanceof at){if(t instanceof Q2){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>at.create(t.field,"==",s)))||[];return bt.create(i,"or")}return t}const r=t.filters.map(i=>OM(i));return bt.create(r,t.op)}function qQ(t){if(t.getFilters().length===0)return[];const e=j1(OM(t));return Ae(LM(e)),F1(e)||U1(e)?[e]:e.getFilters()}function F1(t){return t instanceof at}function U1(t){return t instanceof bt&&PE(t)}function LM(t){return F1(t)||U1(t)||function(e){if(e instanceof bt&&k1(e)){for(const n of e.getFilters())if(!F1(n)&&!U1(n))return!1;return!0}return!1}(t)}function j1(t){if(Ae(t instanceof at||t instanceof bt),t instanceof at)return t;if(t.filters.length===1)return j1(t.filters[0]);const e=t.filters.map(r=>j1(r));let n=bt.create(e,t.op);return n=Eg(n),LM(n)?n:(Ae(n instanceof bt),Ae(Bc(n)),Ae(n.filters.length>1),n.filters.reduce((r,i)=>VE(r,i)))}function VE(t,e){let n;return Ae(t instanceof at||t instanceof bt),Ae(e instanceof at||e instanceof bt),n=t instanceof at?e instanceof at?function(r,i){return bt.create([r,i],"and")}(t,e):eA(t,e):e instanceof at?eA(e,t):function(r,i){if(Ae(r.filters.length>0&&i.filters.length>0),Bc(r)&&Bc(i))return G2(r,i.getFilters());const s=k1(r)?r:i,o=k1(r)?i:r,a=s.filters.map(l=>VE(l,o));return bt.create(a,"or")}(t,e),Eg(n)}function eA(t,e){if(Bc(e))return G2(e,t.getFilters());{const n=e.filters.map(r=>VE(t,r));return bt.create(n,"or")}}function Eg(t){if(Ae(t instanceof at||t instanceof bt),t instanceof at)return t;const e=t.getFilters();if(e.length===1)return Eg(e[0]);if(W2(t))return t;const n=e.map(i=>Eg(i)),r=[];return n.forEach(i=>{i instanceof at?r.push(i):i instanceof bt&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:bt.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KQ{constructor(){this.Ze=new BE}addToCollectionParentIndex(e,n){return this.Ze.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.Ze.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve($r.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve($r.min())}updateCollectionGroup(e,n,r){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class BE{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new At(ot.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new At(ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vp=new Uint8Array(0);class QQ{constructor(e,n){this.user=e,this.databaseId=n,this.Xe=new BE,this.tn=new Zo(r=>Za(r),(r,i)=>$f(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Xe.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.Xe.add(n)});const s={collectionId:r,parent:ir(i)};return tA(e).put(s)}return q.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[N2(n),""],!1,!0);return tA(e).W(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(Li(o.parent))}return r})}addFieldIndex(e,n){const r=Bp(e),i=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=td(e);return s.next(a=>{o.put(Qk(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Bp(e),i=td(e),s=ed(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const r=ed(e);let i=!0;const s=new Map;return q.forEach(this.en(n),o=>this.nn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=We();const a=[];return q.forEach(s,(l,c)=>{var u;se("IndexedDbIndexManager",`Using index ${u=l,`id=${u.indexId}|cg=${u.collectionGroup}|f=${u.fields.map(_=>`${_.fieldPath}:${_.kind}`).join(",")}`} to execute ${Za(n)}`);const d=function(_,b){const x=T1(b);if(x===void 0)return null;for(const E of wg(_,x.fieldPath))switch(E.op){case"array-contains-any":return E.value.arrayValue.values||[];case"array-contains":return[E.value]}return null}(c,l),h=function(_,b){const x=new Map;for(const E of ca(b))for(const D of wg(_,E.fieldPath))switch(D.op){case"==":case"in":x.set(E.fieldPath.canonicalString(),D.value);break;case"not-in":case"!=":return x.set(E.fieldPath.canonicalString(),D.value),Array.from(x.values())}return null}(c,l),f=function(_,b){const x=[];let E=!0;for(const D of ca(b)){const S=D.kind===0?Ok(_,D.fieldPath,_.startAt):Lk(_,D.fieldPath,_.startAt);x.push(S.value),E&&(E=S.inclusive)}return new Ro(x,E)}(c,l),p=function(_,b){const x=[];let E=!0;for(const D of ca(b)){const S=D.kind===0?Lk(_,D.fieldPath,_.endAt):Ok(_,D.fieldPath,_.endAt);x.push(S.value),E&&(E=S.inclusive)}return new Ro(x,E)}(c,l),y=this.sn(l,c,f),w=this.sn(l,c,p),m=this.rn(l,c,h),g=this.on(l.indexId,d,y,f.inclusive,w,p.inclusive,m);return q.forEach(g,_=>r.J(_,n.limit).next(b=>{b.forEach(x=>{const E=fe.fromSegments(x.documentKey);o.has(E)||(o=o.add(E),a.push(E))})}))}).next(()=>a)}return q.resolve(null)})}en(e){let n=this.tn.get(e);return n||(e.filters.length===0?n=[e]:n=qQ(bt.create(e.filters,"and")).map(r=>P1(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.tn.set(e,n),n)}on(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),c=l/(n!=null?n.length:1),u=[];for(let d=0;d<l;++d){const h=n?this.un(n[d/c]):Vp,f=this.cn(e,h,r[d%c],i),p=this.an(e,h,s[d%c],o),y=a.map(w=>this.cn(e,h,w,!0));u.push(...this.createRange(f,p,y))}return u}cn(e,n,r,i){const s=new ma(e,fe.empty(),n,r);return i?s:s.Ge()}an(e,n,r,i){const s=new ma(e,fe.empty(),n,r);return i?s.Ge():s}nn(e,n){const r=new GQ(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.We(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.en(n);return q.forEach(i,s=>this.nn(e,s).next(o=>{o?r!==0&&o.fields.length<function(a){let l=new At(Xt.comparator),c=!1;for(const u of a.filters)for(const d of u.getFlattenedFilters())d.field.isKeyField()||(d.op==="array-contains"||d.op==="array-contains-any"?c=!0:l=l.add(d.field));for(const u of a.orderBy)u.field.isKeyField()||(l=l.add(u.field));return l.size+(c?1:0)}(s)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(n)&&i.length>1&&r===2?1:r)}hn(e,n){const r=new Zu;for(const i of ca(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Ke(i.kind);pa.Ee.ae(s,o)}return r.Be()}un(e){const n=new Zu;return pa.Ee.ae(e,n.Ke(0)),n.Be()}ln(e,n){const r=new Zu;return pa.Ee.ae(Ja(this.databaseId,n),r.Ke(function(i){const s=ca(i);return s.length===0?0:s[s.length-1].kind}(e))),r.Be()}rn(e,n,r){if(r===null)return[];let i=[];i.push(new Zu);let s=0;for(const o of ca(e)){const a=r[s++];for(const l of i)if(this.fn(n,o.fieldPath)&&Mh(a))i=this.dn(i,o,a);else{const c=l.Ke(o.kind);pa.Ee.ae(a,c)}}return this._n(i)}sn(e,n,r){return this.rn(e,n,r.position)}_n(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Be();return n}dn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new Zu;l.seed(a.Be()),pa.Ee.ae(o,l.Ke(n.kind)),s.push(l)}return s}fn(e,n){return!!e.filters.find(r=>r instanceof at&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Bp(e),i=td(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(s=>{const o=[];return q.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(c,u){const d=u?new vg(u.sequenceNumber,new $r(rl(u.readTime),new fe(Li(u.documentKey)),u.largestBatchId)):vg.empty(),h=c.fields.map(([f,p])=>new N7(Xt.fromServerFormat(f),p));return new P2(c.indexId,c.collectionGroup,h,d)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:Be(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Bp(e),s=td(e);return this.wn(e).next(o=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>q.forEach(a,l=>s.put(Qk(l.indexId,this.user,o,r)))))}updateIndexEntries(e,n){const r=new Map;return q.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?q.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),q.forEach(a,l=>this.mn(e,i,l).next(c=>{const u=this.gn(s,l);return c.isEqual(u)?q.resolve():this.yn(e,s,l,c,u)}))))})}pn(e,n,r,i){return ed(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.ln(r,n.key),documentKey:n.key.path.toArray()})}In(e,n,r,i){return ed(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.ln(r,n.key),n.key.path.toArray()])}mn(e,n,r){const i=ed(e);let s=new At(Vs);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.ln(r,n)])},(o,a)=>{s=s.add(new ma(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}gn(e,n){let r=new At(Vs);const i=this.hn(n,e);if(i==null)return r;const s=T1(n);if(s!=null){const o=e.data.field(s.fieldPath);if(Mh(o))for(const a of o.arrayValue.values||[])r=r.add(new ma(n.indexId,e.key,this.un(a),i))}else r=r.add(new ma(n.indexId,e.key,Vp,i));return r}yn(e,n,r,i,s){se("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(a,l,c,u,d){const h=a.getIterator(),f=l.getIterator();let p=$l(h),y=$l(f);for(;p||y;){let w=!1,m=!1;if(p&&y){const g=c(p,y);g<0?m=!0:g>0&&(w=!0)}else p!=null?m=!0:w=!0;w?(u(y),y=$l(f)):m?(d(p),p=$l(h)):(p=$l(h),y=$l(f))}}(i,s,Vs,a=>{o.push(this.pn(e,n,r,a))},a=>{o.push(this.In(e,n,r,a))}),q.waitFor(o)}wn(e){let n=1;return td(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Vs(o,a)).filter((o,a,l)=>!a||Vs(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=Vs(o,e),l=Vs(o,n);if(a===0)i[0]=e.Ge();else if(a>0&&l<0)i.push(o),i.push(o.Ge());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Tn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Vp,[]],l=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Vp,[]];s.push(IDBKeyRange.bound(a,l))}return s}Tn(e,n){return Vs(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(nA)}getMinOffset(e,n){return q.mapArray(this.en(n),r=>this.nn(e,r).next(i=>i||Se())).next(nA)}}function tA(t){return Tn(t,"collectionParents")}function ed(t){return Tn(t,"indexEntries")}function Bp(t){return Tn(t,"indexConfiguration")}function td(t){return Tn(t,"indexState")}function nA(t){Ae(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;AE(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new $r(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class lr{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new lr(e,lr.DEFAULT_COLLECTION_PERCENTILE,lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MM(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.X({range:o},(u,d,h)=>(a++,h.delete()));s.push(l.next(()=>{Ae(a===1)}));const c=[];for(const u of n.mutations){const d=kM(e,u.key.path,n.batchId);s.push(i.delete(d)),c.push(u.key)}return q.waitFor(s).next(()=>c)}function xg(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Se();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */lr.DEFAULT_COLLECTION_PERCENTILE=10,lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,lr.DEFAULT=new lr(41943040,lr.DEFAULT_COLLECTION_PERCENTILE,lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),lr.DISABLED=new lr(-1,0,0);class fv{constructor(e,n,r,i){this.userId=e,this.Tt=n,this.indexManager=r,this.referenceDelegate=i,this.En={}}static ue(e,n,r,i){Ae(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new fv(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Bs(e).X({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=Wl(e),o=Bs(e);return o.add({}).next(a=>{Ae(typeof a=="number");const l=new $E(a,n,r,i),c=function(h,f,p){const y=p.baseMutations.map(m=>Uh(h.oe,m)),w=p.mutations.map(m=>Uh(h.oe,m));return{userId:f,batchId:p.batchId,localWriteTimeMs:p.localWriteTime.toMillis(),baseMutations:y,mutations:w}}(this.Tt,this.userId,l),u=[];let d=new At((h,f)=>Be(h.canonicalString(),f.canonicalString()));for(const h of i){const f=kM(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),u.push(o.put(c)),u.push(s.put(f,EQ))}return d.forEach(h=>{u.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.En[a]=l.keys()}),q.waitFor(u).next(()=>l)})}lookupMutationBatch(e,n){return Bs(e).get(n).next(r=>r?(Ae(r.userId===this.userId),fa(this.Tt,r)):null)}An(e,n){return this.En[n]?q.resolve(this.En[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.En[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Bs(e).X({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(Ae(a.batchId>=r),s=fa(this.Tt,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Bs(e).X({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Bs(e).W("userMutationsIndex",n).next(r=>r.map(i=>fa(this.Tt,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=vm(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Wl(e).X({range:i},(o,a,l)=>{const[c,u,d]=o,h=Li(u);if(c===this.userId&&n.path.isEqual(h))return Bs(e).get(d).next(f=>{if(!f)throw Se();Ae(f.userId===this.userId),s.push(fa(this.Tt,f))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new At(Be);const i=[];return n.forEach(s=>{const o=vm(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=Wl(e).X({range:a},(c,u,d)=>{const[h,f,p]=c,y=Li(f);h===this.userId&&s.path.isEqual(y)?r=r.add(p):d.done()});i.push(l)}),q.waitFor(i).next(()=>this.Rn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=vm(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new At(Be);return Wl(e).X({range:o},(l,c,u)=>{const[d,h,f]=l,p=Li(h);d===this.userId&&r.isPrefixOf(p)?p.length===i&&(a=a.add(f)):u.done()}).next(()=>this.Rn(e,a))}Rn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Bs(e).get(s).next(o=>{if(o===null)throw Se();Ae(o.userId===this.userId),r.push(fa(this.Tt,o))}))}),q.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return MM(e.re,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.bn(n.batchId)}),q.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}bn(e){delete this.En[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return q.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Wl(e).X({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=Li(s[1]);i.push(l)}else a.done()}).next(()=>{Ae(i.length===0)})})}containsKey(e,n){return $M(e,this.userId,n)}vn(e){return FM(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function $M(t,e,n){const r=vm(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Wl(t).X({range:s,Z:!0},(a,l,c)=>{const[u,d,h]=a;u===e&&d===i&&(o=!0),c.done()}).next(()=>o)}function Bs(t){return Tn(t,"mutations")}function Wl(t){return Tn(t,"documentMutations")}function FM(t){return Tn(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e){this.Pn=e}next(){return this.Pn+=2,this.Pn}static Vn(){return new il(0)}static Sn(){return new il(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YQ{constructor(e,n){this.referenceDelegate=e,this.Tt=n}allocateTargetId(e){return this.Dn(e).next(n=>{const r=new il(n.highestTargetId);return n.highestTargetId=r.next(),this.Cn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Dn(e).next(n=>Ne.fromTimestamp(new Ft(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Dn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Dn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Cn(e,i)))}addTargetData(e,n){return this.xn(e,n).next(()=>this.Dn(e).next(r=>(r.targetCount+=1,this.Nn(n,r),this.Cn(e,r))))}updateTargetData(e,n){return this.xn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Fl(e).delete(n.targetId)).next(()=>this.Dn(e)).next(r=>(Ae(r.targetCount>0),r.targetCount-=1,this.Cn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return Fl(e).X((o,a)=>{const l=xd(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>q.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Fl(e).X((r,i)=>{const s=xd(i);n(s)})}Dn(e){return iA(e).get("targetGlobalKey").next(n=>(Ae(n!==null),n))}Cn(e,n){return iA(e).put("targetGlobalKey",n)}xn(e,n){return Fl(e).put(DM(this.Tt,n))}Nn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Dn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Za(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Fl(e).X({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const c=xd(a);$f(n,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Ys(e);return n.forEach(o=>{const a=ir(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),q.waitFor(i)}removeMatchingKeys(e,n,r){const i=Ys(e);return q.forEach(n,s=>{const o=ir(s.path);return q.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Ys(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Ys(e);let s=We();return i.X({range:r,Z:!0},(o,a,l)=>{const c=Li(o[1]),u=new fe(c);s=s.add(u)}).next(()=>s)}containsKey(e,n){const r=ir(n.path),i=IDBKeyRange.bound([r],[N2(r)],!1,!0);let s=0;return Ys(e).X({index:"documentTargetsIndex",Z:!0,range:i},([o,a],l,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}ie(e,n){return Fl(e).get(n).next(r=>r?xd(r):null)}}function Fl(t){return Tn(t,"targets")}function iA(t){return Tn(t,"targetGlobal")}function Ys(t){return Tn(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA([t,e],[n,r]){const i=Be(t,n);return i===0?Be(e,r):i}class XQ{constructor(e){this.kn=e,this.buffer=new At(sA),this.On=0}Mn(){return++this.On}Fn(e){const n=[e,this.Mn()];if(this.buffer.size<this.kn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();sA(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class JQ{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.$n=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Bn(6e4)}stop(){this.$n&&(this.$n.cancel(),this.$n=null)}get started(){return this.$n!==null}Bn(e){se("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.$n=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.$n=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Jo(n)?se("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Xo(n)}await this.Bn(3e5)})}}class ZQ{constructor(e,n){this.Ln=e,this.params=n}calculateTargetCount(e,n){return this.Ln.qn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return q.resolve(pr.at);const r=new XQ(n);return this.Ln.forEachTarget(e,i=>r.Fn(i.sequenceNumber)).next(()=>this.Ln.Un(e,i=>r.Fn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Ln.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Ln.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(rA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rA):this.Kn(e,n))}getCacheSize(e){return this.Ln.getCacheSize(e)}Kn(e,n){let r,i,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(c=Date.now(),x1()<=st.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eY{constructor(e,n){this.db=e,this.garbageCollector=function(r,i){return new ZQ(r,i)}(this,n)}qn(e){const n=this.Gn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Gn(e){let n=0;return this.Un(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Un(e,n){return this.Qn(e,(r,i)=>n(i))}addReference(e,n,r){return zp(e,r)}removeReference(e,n,r){return zp(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return zp(e,n)}jn(e,n){return function(r,i){let s=!1;return FM(r).tt(o=>$M(r,o,i).next(a=>(a&&(s=!0),q.resolve(!a)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Qn(e,(o,a)=>{if(a<=n){const l=this.jn(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Ne.min()),Ys(e).delete([0,ir(o.path)])))});i.push(l)}}).next(()=>q.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return zp(e,n)}Qn(e,n){const r=Ys(e);let i,s=pr.at;return r.X({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{o===0?(s!==pr.at&&n(new fe(Li(i)),s),s=c,i=l):s=pr.at}).next(()=>{s!==pr.at&&n(new fe(Li(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function zp(t,e){return Ys(t).put(function(n,r){return{targetId:0,path:ir(n.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(){this.changes=new Zo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,It.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tY{constructor(e){this.Tt=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return sa(e).put(r)}removeEntry(e,n,r){return sa(e).delete(function(i,s){const o=i.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Sg(s),o[o.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.zn(e,r)))}getEntry(e,n){let r=It.newInvalidDocument(n);return sa(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(nd(n))},(i,s)=>{r=this.Wn(n,s)}).next(()=>r)}Hn(e,n){let r={size:0,document:It.newInvalidDocument(n)};return sa(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(nd(n))},(i,s)=>{r={document:this.Wn(n,s),size:xg(s)}}).next(()=>r)}getEntries(e,n){let r=gr();return this.Jn(e,n,(i,s)=>{const o=this.Wn(i,s);r=r.insert(i,o)}).next(()=>r)}Yn(e,n){let r=gr(),i=new cn(fe.comparator);return this.Jn(e,n,(s,o)=>{const a=this.Wn(s,o);r=r.insert(s,a),i=i.insert(s,xg(o))}).next(()=>({documents:r,Zn:i}))}Jn(e,n,r){if(n.isEmpty())return q.resolve();let i=new At(lA);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(nd(i.first()),nd(i.last())),o=i.getIterator();let a=o.getNext();return sa(e).X({index:"documentKeyIndex",range:s},(l,c,u)=>{const d=fe.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&lA(a,d)<0;)r(a,null),a=o.getNext();a&&a.isEqual(d)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?u.j(nd(a)):u.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i){const s=n.path,o=[s.popLast().toArray(),s.lastSegment(),Sg(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return sa(e).W(IDBKeyRange.bound(o,a,!0)).next(l=>{let c=gr();for(const u of l){const d=this.Wn(fe.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);d.isFoundDocument()&&(Uf(n,d)||i.has(d.key))&&(c=c.insert(d.key,d))}return c})}getAllFromCollectionGroup(e,n,r,i){let s=gr();const o=aA(n,r),a=aA(n,$r.max());return sa(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,u)=>{const d=this.Wn(fe.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(d.key,d),s.size===i&&u.done()}).next(()=>s)}newChangeBuffer(e){return new nY(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return oA(e).get("remoteDocumentGlobalKey").next(n=>(Ae(!!n),n))}zn(e,n){return oA(e).put("remoteDocumentGlobalKey",n)}Wn(e,n){if(n){const r=jQ(this.Tt,n);if(!(r.isNoDocument()&&r.version.isEqual(Ne.min())))return r}return It.newInvalidDocument(e)}}function jM(t){return new tY(t)}class nY extends UM{constructor(e,n){super(),this.Xn=e,this.trackRemovals=n,this.ts=new Zo(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new At((s,o)=>Be(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ts.get(s);if(n.push(this.Xn.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=qk(this.Xn.Tt,o);i=i.add(s.path.popLast());const c=xg(l);r+=c-a.size,n.push(this.Xn.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=qk(this.Xn.Tt,o.convertToNoDocument(Ne.min()));n.push(this.Xn.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.Xn.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.Xn.updateMetadata(e,r)),q.waitFor(n)}getFromCache(e,n){return this.Xn.Hn(e,n).next(r=>(this.ts.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Xn.Yn(e,n).next(({documents:r,Zn:i})=>(i.forEach((s,o)=>{this.ts.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function oA(t){return Tn(t,"remoteDocumentGlobal")}function sa(t){return Tn(t,"remoteDocumentsV14")}function nd(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function aA(t,e){const n=e.documentKey.path.toArray();return[t,Sg(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function lA(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Be(n[s],r[s]),i)return i;return i=Be(n.length,r.length),i||(i=Be(n[n.length-2],r[r.length-2]),i||Be(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rY{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Bd(r.mutation,i,mr.empty(),Ft.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,We()).next(()=>r))}getLocalViewOfDocuments(e,n,r=We()){const i=Oi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ed();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Oi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,We()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=gr();const o=zd(),a=zd();return n.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof Os)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),Bd(u.mutation,c,u.mutation.getFieldMask(),Ft.now())):o.set(c.key,mr.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var d;return a.set(c,new rY(u,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=zd();let i=new cn((o,a)=>o-a),s=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||mr.empty();u=a.applyToLocalView(c,u),r.set(l,u);const d=(i.get(a.batchId)||We()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=pM();u.forEach(h=>{if(!s.has(h)){const f=lM(n.get(h),r.get(h));f!==null&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return fe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):OE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):q.resolve(Oi());let a=-1,l=s;return o.next(c=>q.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?q.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{l=l.insert(u,h)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,We())).next(u=>({batchId:a,changes:fM(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new fe(n)).next(r=>{let i=Ed();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=Ed();return this.indexManager.getCollectionParents(e,i).next(o=>q.forEach(o,a=>{const l=function(c,u){return new Ds(u,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(n,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(c=>{c.forEach((u,d)=>{s=s.insert(u,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i))).next(s=>{i.forEach((a,l)=>{const c=l.getKey();s.get(c)===null&&(s=s.insert(c,It.newInvalidDocument(c)))});let o=Ed();return s.forEach((a,l)=>{const c=i.get(a);c!==void 0&&Bd(c.mutation,l,mr.empty(),Ft.now()),Uf(n,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iY{constructor(e){this.Tt=e,this.es=new Map,this.ns=new Map}getBundleMetadata(e,n){return q.resolve(this.es.get(n))}saveBundleMetadata(e,n){var r;return this.es.set(n.id,{id:(r=n).id,version:r.version,createTime:Jt(r.createTime)}),q.resolve()}getNamedQuery(e,n){return q.resolve(this.ns.get(n))}saveNamedQuery(e,n){return this.ns.set(n.name,function(r){return{name:r.name,query:jE(r.bundledQuery),readTime:Jt(r.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sY{constructor(){this.overlays=new cn(fe.comparator),this.ss=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Oi();return q.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ce(e,n,s)}),q.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.ss.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.ss.delete(r)),q.resolve()}getOverlaysForCollection(e,n,r){const i=Oi(),s=n.length+1,o=new fe(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return q.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new cn((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=Oi(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Oi(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return q.resolve(a)}ce(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.ss.get(i.largestBatchId).delete(r.key);this.ss.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new UE(n,r));let s=this.ss.get(n);s===void 0&&(s=We(),this.ss.set(n,s)),this.ss.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(){this.rs=new At(hn.os),this.us=new At(hn.cs)}isEmpty(){return this.rs.isEmpty()}addReference(e,n){const r=new hn(e,n);this.rs=this.rs.add(r),this.us=this.us.add(r)}hs(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.ls(new hn(e,n))}fs(e,n){e.forEach(r=>this.removeReference(r,n))}ds(e){const n=new fe(new ot([])),r=new hn(n,e),i=new hn(n,e+1),s=[];return this.us.forEachInRange([r,i],o=>{this.ls(o),s.push(o.key)}),s}_s(){this.rs.forEach(e=>this.ls(e))}ls(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}ws(e){const n=new fe(new ot([])),r=new hn(n,e),i=new hn(n,e+1);let s=We();return this.us.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new hn(e,0),r=this.rs.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class hn{constructor(e,n){this.key=e,this.gs=n}static os(e,n){return fe.comparator(e.key,n.key)||Be(e.gs,n.gs)}static cs(e,n){return Be(e.gs,n.gs)||fe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oY{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.ys=1,this.ps=new At(hn.os)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.ys;this.ys++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new $E(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.ps=this.ps.add(new hn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return q.resolve(o)}lookupMutationBatch(e,n){return q.resolve(this.Is(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Ts(r),s=i<0?0:i;return q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?-1:this.ys-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new hn(n,0),i=new hn(n,Number.POSITIVE_INFINITY),s=[];return this.ps.forEachInRange([r,i],o=>{const a=this.Is(o.gs);s.push(a)}),q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new At(Be);return n.forEach(i=>{const s=new hn(i,0),o=new hn(i,Number.POSITIVE_INFINITY);this.ps.forEachInRange([s,o],a=>{r=r.add(a.gs)})}),q.resolve(this.Es(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;fe.isDocumentKey(s)||(s=s.child(""));const o=new hn(new fe(s),0);let a=new At(Be);return this.ps.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.gs)),!0)},o),q.resolve(this.Es(a))}Es(e){const n=[];return e.forEach(r=>{const i=this.Is(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ae(this.As(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.ps;return q.forEach(n.mutations,i=>{const s=new hn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ps=r})}bn(e){}containsKey(e,n){const r=new hn(n,0),i=this.ps.firstAfterOrEqual(r);return q.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}As(e,n){return this.Ts(e)}Ts(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Is(e){const n=this.Ts(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aY{constructor(e){this.Rs=e,this.docs=new cn(fe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Rs(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return q.resolve(r?r.document.mutableCopy():It.newInvalidDocument(n))}getEntries(e,n){let r=gr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():It.newInvalidDocument(i))}),q.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=gr();const o=n.path,a=new fe(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||AE(O2(u),r)<=0||(i.has(u.key)||Uf(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return q.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Se()}bs(e,n){return q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new lY(this)}getSize(e){return q.resolve(this.size)}}class lY extends UM{constructor(e){super(),this.Xn=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Xn.addEntry(e,i)):this.Xn.removeEntry(r)}),q.waitFor(n)}getFromCache(e,n){return this.Xn.getEntry(e,n)}getAllFromCache(e,n){return this.Xn.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cY{constructor(e){this.persistence=e,this.vs=new Zo(n=>Za(n),$f),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.Ps=0,this.Vs=new zE,this.targetCount=0,this.Ss=il.Vn()}forEachTarget(e,n){return this.vs.forEach((r,i)=>n(i)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.Ps)}allocateTargetId(e){return this.highestTargetId=this.Ss.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Ps&&(this.Ps=n),q.resolve()}xn(e){this.vs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ss=new il(n),this.highestTargetId=n),e.sequenceNumber>this.Ps&&(this.Ps=e.sequenceNumber)}addTargetData(e,n){return this.xn(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.xn(n),q.resolve()}removeTargetData(e,n){return this.vs.delete(n.target),this.Vs.ds(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.vs.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.vs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),q.waitFor(s).next(()=>i)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const r=this.vs.get(n)||null;return q.resolve(r)}addMatchingKeys(e,n,r){return this.Vs.hs(n,r),q.resolve()}removeMatchingKeys(e,n,r){this.Vs.fs(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),q.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Vs.ds(n),q.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Vs.ws(n);return q.resolve(r)}containsKey(e,n){return q.resolve(this.Vs.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(e,n){this.Ds={},this.overlays={},this.Cs=new pr(0),this.xs=!1,this.xs=!0,this.referenceDelegate=e(this),this.Ns=new cY(this),this.indexManager=new KQ,this.remoteDocumentCache=function(r){return new aY(r)}(r=>this.referenceDelegate.ks(r)),this.Tt=new PM(n),this.Os=new iY(this.Tt)}start(){return Promise.resolve()}shutdown(){return this.xs=!1,Promise.resolve()}get started(){return this.xs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new sY,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Ds[e.toKey()];return r||(r=new oY(n,this.referenceDelegate),this.Ds[e.toKey()]=r),r}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Os}runTransaction(e,n,r){se("MemoryPersistence","Starting transaction:",e);const i=new uY(this.Cs.next());return this.referenceDelegate.Ms(),r(i).next(s=>this.referenceDelegate.Fs(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}$s(e,n){return q.or(Object.values(this.Ds).map(r=>()=>r.containsKey(e,n)))}}class uY extends M2{constructor(e){super(),this.currentSequenceNumber=e}}class pv{constructor(e){this.persistence=e,this.Bs=new zE,this.Ls=null}static qs(e){return new pv(e)}get Us(){if(this.Ls)return this.Ls;throw Se()}addReference(e,n,r){return this.Bs.addReference(r,n),this.Us.delete(r.toString()),q.resolve()}removeReference(e,n,r){return this.Bs.removeReference(r,n),this.Us.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.Us.add(n.toString()),q.resolve()}removeTarget(e,n){this.Bs.ds(n.targetId).forEach(i=>this.Us.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Us.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ms(){this.Ls=new Set}Fs(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.Us,r=>{const i=fe.fromPath(r);return this.Ks(e,i).next(s=>{s||n.removeEntry(i,Ne.min())})}).next(()=>(this.Ls=null,n.apply(e)))}updateLimboDocument(e,n){return this.Ks(e,n).next(r=>{r?this.Us.delete(n.toString()):this.Us.add(n.toString())})}ks(e){return 0}Ks(e,n){return q.or([()=>q.resolve(this.Bs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.$s(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dY{constructor(e){this.Tt=e}$(e,n,r,i){const s=new av("createOrUpgrade",n);r<1&&i>=1&&(function(a){a.createObjectStore("owner")}(e),function(a){a.createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Gk,{unique:!0}),a.createObjectStore("documentMutations")}(e),cA(e),function(a){a.createObjectStore("remoteDocuments")}(e));let o=q.resolve();return r<3&&i>=3&&(r!==0&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(e),cA(e)),o=o.next(()=>function(a){const l=a.store("targetGlobal"),c={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ne.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",c)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(a,l){return l.store("mutations").W().next(c=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Gk,{unique:!0});const u=l.store("mutations"),d=c.map(h=>u.put(h));return q.waitFor(d)})}(e,s))),o=o.next(()=>{(function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.Gs(s))),r<6&&i>=6&&(o=o.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(e),this.Qs(s)))),r<7&&i>=7&&(o=o.next(()=>this.js(s))),r<8&&i>=8&&(o=o.next(()=>this.zs(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.Ws(s))),r<11&&i>=11&&(o=o.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(a){const l=a.createObjectStore("documentOverlays",{keyPath:LQ});l.createIndex("collectionPathOverlayIndex",MQ,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",$Q,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(a){const l=a.createObjectStore("remoteDocumentsV14",{keyPath:xQ});l.createIndex("documentKeyIndex",TQ),l.createIndex("collectionGroupIndex",IQ)}(e)).next(()=>this.Hs(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.Js(e,s))),r<15&&i>=15&&(o=o.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:NQ}).createIndex("sequenceNumberIndex",PQ,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:DQ}).createIndex("documentKeyIndex",OQ,{unique:!1})}(e))),o}Qs(e){let n=0;return e.store("remoteDocuments").X((r,i)=>{n+=xg(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Gs(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>q.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>q.forEach(a,l=>{Ae(l.userId===s.userId);const c=fa(this.Tt,l);return MM(e,s.userId,c).next(()=>{})}))}))}js(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.X((o,a)=>{const l=new ot(o),c=function(u){return[0,ir(u)]}(l);s.push(n.get(c).next(u=>u?q.resolve():(d=>n.put({targetId:0,path:ir(d),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>q.waitFor(s))})}zs(e,n){e.createObjectStore("collectionParents",{keyPath:RQ});const r=n.store("collectionParents"),i=new BE,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:ir(l)})}};return n.store("remoteDocuments").X({Z:!0},(o,a)=>{const l=new ot(o);return s(l.popLast())}).next(()=>n.store("documentMutations").X({Z:!0},([o,a,l],c)=>{const u=Li(a);return s(u.popLast())}))}Ws(e){const n=e.store("targets");return n.X((r,i)=>{const s=xd(i),o=DM(this.Tt,s);return n.put(o)})}Hs(e,n){const r=n.store("remoteDocuments"),i=[];return r.X((s,o)=>{const a=n.store("remoteDocumentsV14"),l=(c=o,c.document?new fe(ot.fromString(c.document.name).popFirst(5)):c.noDocument?fe.fromSegments(c.noDocument.path):c.unknownDocument?fe.fromSegments(c.unknownDocument.path):Se()).path.toArray();var c;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(u))}).next(()=>q.waitFor(i))}Js(e,n){const r=n.store("mutations"),i=jM(this.Tt),s=new BM(pv.qs,this.Tt.oe);return r.W().next(o=>{const a=new Map;return o.forEach(l=>{var c;let u=(c=a.get(l.userId))!==null&&c!==void 0?c:We();fa(this.Tt,l).keys().forEach(d=>u=u.add(d)),a.set(l.userId,u)}),q.forEach(a,(l,c)=>{const u=new gn(c),d=hv.ue(this.Tt,u),h=s.getIndexManager(u),f=fv.ue(u,this.Tt,h,s.referenceDelegate);return new VM(i,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new $1(n,pr.at),l).next()})})}}function cA(t){t.createObjectStore("targetDocuments",{keyPath:kQ}).createIndex("documentTargetsIndex",AQ,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",CQ,{unique:!0}),t.createObjectStore("targetGlobal")}const k0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class WE{constructor(e,n,r,i,s,o,a,l,c,u,d=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Ys=s,this.window=o,this.document=a,this.Zs=c,this.Xs=u,this.ti=d,this.Cs=null,this.xs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ei=null,this.inForeground=!1,this.ni=null,this.si=null,this.ii=Number.NEGATIVE_INFINITY,this.ri=h=>Promise.resolve(),!WE.C())throw new re(Q.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new eY(this,i),this.oi=n+"main",this.Tt=new PM(l),this.ui=new fi(this.oi,this.ti,new dY(this.Tt)),this.Ns=new YQ(this.referenceDelegate,this.Tt),this.remoteDocumentCache=jM(this.Tt),this.Os=new VQ,this.window&&this.window.localStorage?this.ci=this.window.localStorage:(this.ci=null,u===!1&&Yt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new re(Q.FAILED_PRECONDITION,k0);return this.hi(),this.li(),this.fi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ns.getHighestSequenceNumber(e))}).then(e=>{this.Cs=new pr(e,this.Zs)}).then(()=>{this.xs=!0}).catch(e=>(this.ui&&this.ui.close(),Promise.reject(e)))}di(e){return this.ri=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.ui.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ys.enqueueAndForget(async()=>{this.started&&await this.ai()}))}ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Wp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this._i(e).next(n=>{n||(this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)))})}).next(()=>this.wi(e)).next(n=>this.isPrimary&&!n?this.mi(e).next(()=>!1):!!n&&this.gi(e).next(()=>!0))).catch(e=>{if(Jo(e))return se("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return se("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ys.enqueueRetryable(()=>this.ri(e)),this.isPrimary=e})}_i(e){return rd(e).get("owner").next(n=>q.resolve(this.yi(n)))}pi(e){return Wp(e).delete(this.clientId)}async Ii(){if(this.isPrimary&&!this.Ti(this.ii,18e5)){this.ii=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Tn(n,"clientMetadata");return r.W().next(i=>{const s=this.Ei(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return q.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.ci)for(const n of e)this.ci.removeItem(this.Ai(n.clientId))}}fi(){this.si=this.Ys.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ai().then(()=>this.Ii()).then(()=>this.fi()))}yi(e){return!!e&&e.ownerId===this.clientId}wi(e){return this.Xs?q.resolve(!0):rd(e).get("owner").next(n=>{if(n!==null&&this.Ti(n.leaseTimestampMs,5e3)&&!this.Ri(n.ownerId)){if(this.yi(n)&&this.networkEnabled)return!0;if(!this.yi(n)){if(!n.allowTabSynchronization)throw new re(Q.FAILED_PRECONDITION,k0);return!1}}return!(!this.networkEnabled||!this.inForeground)||Wp(e).W().next(r=>this.Ei(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&se("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.xs=!1,this.bi(),this.si&&(this.si.cancel(),this.si=null),this.vi(),this.Pi(),await this.ui.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new $1(e,pr.at);return this.mi(n).next(()=>this.pi(n))}),this.ui.close(),this.Vi()}Ei(e,n){return e.filter(r=>this.Ti(r.updateTimeMs,n)&&!this.Ri(r.clientId))}Si(){return this.runTransaction("getActiveClients","readonly",e=>Wp(e).W().next(n=>this.Ei(n,18e5).map(r=>r.clientId)))}get started(){return this.xs}getMutationQueue(e,n){return fv.ue(e,this.Tt,n,this.referenceDelegate)}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new QQ(e,this.Tt.oe.databaseId)}getDocumentOverlayCache(e){return hv.ue(this.Tt,e)}getBundleCache(){return this.Os}runTransaction(e,n,r){se("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=(o=this.ti)===15?UQ:o===14?NM:o===13?RM:o===12?FQ:o===11?AM:void Se();var o;let a;return this.ui.runTransaction(e,i,s,l=>(a=new $1(l,this.Cs?this.Cs.next():pr.at),n==="readwrite-primary"?this._i(a).next(c=>!!c||this.wi(a)).next(c=>{if(!c)throw Yt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)),new re(Q.FAILED_PRECONDITION,L2);return r(a)}).next(c=>this.gi(a).next(()=>c)):this.Di(a).next(()=>r(a)))).then(l=>(a.raiseOnCommittedEvent(),l))}Di(e){return rd(e).get("owner").next(n=>{if(n!==null&&this.Ti(n.leaseTimestampMs,5e3)&&!this.Ri(n.ownerId)&&!this.yi(n)&&!(this.Xs||this.allowTabSynchronization&&n.allowTabSynchronization))throw new re(Q.FAILED_PRECONDITION,k0)})}gi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return rd(e).put("owner",n)}static C(){return fi.C()}mi(e){const n=rd(e);return n.get("owner").next(r=>this.yi(r)?(se("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):q.resolve())}Ti(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Yt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}hi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ni=()=>{this.Ys.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.ai()))},this.document.addEventListener("visibilitychange",this.ni),this.inForeground=this.document.visibilityState==="visible")}vi(){this.ni&&(this.document.removeEventListener("visibilitychange",this.ni),this.ni=null)}li(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ei=()=>{this.bi(),eK()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Ys.enterRestrictedMode(!0),this.Ys.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ei))}Pi(){this.ei&&(this.window.removeEventListener("pagehide",this.ei),this.ei=null)}Ri(e){var n;try{const r=((n=this.ci)===null||n===void 0?void 0:n.getItem(this.Ai(e)))!==null;return se("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Yt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}bi(){if(this.ci)try{this.ci.setItem(this.Ai(this.clientId),String(Date.now()))}catch(e){Yt("Failed to set zombie client id.",e)}}Vi(){if(this.ci)try{this.ci.removeItem(this.Ai(this.clientId))}catch{}}Ai(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function rd(t){return Tn(t,"owner")}function Wp(t){return Tn(t,"clientMetadata")}function HE(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ci=r,this.xi=i}static Ni(e,n){let r=We(),i=We();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new GE(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(){this.ki=!1}initialize(e,n){this.Oi=e,this.indexManager=n,this.ki=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Mi(e,n).next(s=>s||this.Fi(e,n,i,r)).next(s=>s||this.$i(e,n))}Mi(e,n){if(Mk(n))return q.resolve(null);let r=xr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=bg(n,null,"F"),r=xr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=We(...s);return this.Oi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Bi(n,a);return this.Li(n,c,o,l.readTime)?this.Mi(e,bg(n,null,"F")):this.qi(e,c,n,l)}))})))}Fi(e,n,r,i){return Mk(n)||i.isEqual(Ne.min())?this.$i(e,n):this.Oi.getDocuments(e,r).next(s=>{const o=this.Bi(n,s);return this.Li(n,o,r,i)?this.$i(e,n):(x1()<=st.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),O1(n)),this.qi(e,o,n,D2(i,-1)))})}Bi(e,n){let r=new At(eM(e));return n.forEach((i,s)=>{Uf(e,s)&&(r=r.add(s))}),r}Li(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}$i(e,n){return x1()<=st.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",O1(n)),this.Oi.getDocumentsMatchingQuery(e,n,$r.min())}qi(e,n,r,i){return this.Oi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hY{constructor(e,n,r,i){this.persistence=e,this.Ui=n,this.Tt=i,this.Ki=new cn(Be),this.Gi=new Zo(s=>Za(s),$f),this.Qi=new Map,this.ji=e.getRemoteDocumentCache(),this.Ns=e.getTargetCache(),this.Os=e.getBundleCache(),this.zi(r)}zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new VM(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ki))}}function WM(t,e,n,r){return new hY(t,e,n,r)}async function HM(t,e){const n=ge(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.zi(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=We();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Wi:c,removedBatchIds:o,addedBatchIds:a}))})})}function fY(t,e){const n=ge(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.ji.newChangeBuffer({trackRemovals:!0});return function(o,a,l,c){const u=l.batch,d=u.keys();let h=q.resolve();return d.forEach(f=>{h=h.next(()=>c.getEntry(a,f)).next(p=>{const y=l.docVersions.get(f);Ae(y!==null),p.version.compareTo(y)<0&&(u.applyToRemoteDocument(p,l),p.isValidDocument()&&(p.setReadTime(l.commitVersion),c.addEntry(p)))})}),h.next(()=>o.mutationQueue.removeMutationBatch(a,u))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=We();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function GM(t){const e=ge(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ns.getLastRemoteSnapshotVersion(n))}function pY(t,e){const n=ge(t),r=e.snapshotVersion;let i=n.Ki;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.ji.newChangeBuffer({trackRemovals:!0});i=n.Ki;const a=[];e.targetChanges.forEach((u,d)=>{const h=i.get(d);if(!h)return;a.push(n.Ns.removeMatchingKeys(s,u.removedDocuments,d).next(()=>n.Ns.addMatchingKeys(s,u.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.has(d)?f=f.withResumeToken(ln.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,r)),i=i.insert(d,f),function(p,y,w){return p.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(h,f,u)&&a.push(n.Ns.updateTargetData(s,f))});let l=gr(),c=We();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(qM(s,o,e.documentUpdates).next(u=>{l=u.Hi,c=u.Ji})),!r.isEqual(Ne.min())){const u=n.Ns.getLastRemoteSnapshotVersion(s).next(d=>n.Ns.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return q.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.Ki=i,s))}function qM(t,e,n){let r=We(),i=We();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=gr();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Ne.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):se("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Hi:o,Ji:i}})}function mY(t,e){const n=ge(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Gc(t,e){const n=ge(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ns.getTargetData(r,e).next(s=>s?(i=s,q.resolve(i)):n.Ns.allocateTargetId(r).next(o=>(i=new yo(e,o,0,r.currentSequenceNumber),n.Ns.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ki.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ki=n.Ki.insert(r.targetId,r),n.Gi.set(e,r.targetId)),r})}async function qc(t,e,n){const r=ge(t),i=r.Ki.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Jo(o))throw o;se("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ki=r.Ki.remove(e),r.Gi.delete(i.target)}function Tg(t,e,n){const r=ge(t);let i=Ne.min(),s=We();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,l,c){const u=ge(a),d=u.Gi.get(c);return d!==void 0?q.resolve(u.Ki.get(d)):u.Ns.getTargetData(l,c)}(r,o,xr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ns.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Ui.getDocumentsMatchingQuery(o,e,n?i:Ne.min(),n?s:We())).next(a=>(YM(r,Z2(e),a),{documents:a,Yi:s})))}function KM(t,e){const n=ge(t),r=ge(n.Ns),i=n.Ki.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ie(s,e).next(o=>o?o.target:null))}function QM(t,e){const n=ge(t),r=n.Qi.get(e)||Ne.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.ji.getAllFromCollectionGroup(i,e,D2(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(YM(n,e,i),i))}function YM(t,e,n){let r=t.Qi.get(e)||Ne.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Qi.set(e,r)}async function gY(t,e,n,r){const i=ge(t);let s=We(),o=gr();for(const c of n){const u=e.Zi(c.metadata.name);c.document&&(s=s.add(u));const d=e.Xi(c);d.setReadTime(e.tr(c.metadata.readTime)),o=o.insert(u,d)}const a=i.ji.newChangeBuffer({trackRemovals:!0}),l=await Gc(i,function(c){return xr(_u(ot.fromString(`__bundle__/docs/${c}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>qM(c,a,o).next(u=>(a.apply(c),u)).next(u=>i.Ns.removeMatchingKeysForTargetId(c,l.targetId).next(()=>i.Ns.addMatchingKeys(c,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,u.Hi,u.Ji)).next(()=>u.Hi)))}async function yY(t,e,n=We()){const r=await Gc(t,xr(jE(e.bundledQuery))),i=ge(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Jt(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Os.saveNamedQuery(s,e);const a=r.withResumeToken(ln.EMPTY_BYTE_STRING,o);return i.Ki=i.Ki.insert(a.targetId,a),i.Ns.updateTargetData(s,a).next(()=>i.Ns.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ns.addMatchingKeys(s,n,r.targetId)).next(()=>i.Os.saveNamedQuery(s,e))})}function uA(t,e){return`firestore_clients_${t}_${e}`}function dA(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function A0(t,e){return`firestore_targets_${t}_${e}`}class Ig{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static er(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new re(i.error.code,i.error.message))),o?new Ig(e,n,i.state,s):(Yt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Wd{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static er(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new re(r.error.code,r.error.message))),s?new Wd(e,r.state,i):(Yt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Cg{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static er(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=dv();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=F2(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new Cg(e,s):(Yt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class qE{constructor(e,n){this.clientId=e,this.onlineState=n}static er(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new qE(n.clientId,n.onlineState):(Yt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class V1{constructor(){this.activeTargetIds=dv()}sr(e){this.activeTargetIds=this.activeTargetIds.add(e)}ir(e){this.activeTargetIds=this.activeTargetIds.delete(e)}nr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class R0{constructor(e,n,r,i,s){this.window=e,this.Ys=n,this.persistenceKey=r,this.rr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ur=this.cr.bind(this),this.ar=new cn(Be),this.started=!1,this.hr=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.lr=uA(this.persistenceKey,this.rr),this.dr=function(a){return`firestore_sequence_number_${a}`}(this.persistenceKey),this.ar=this.ar.insert(this.rr,new V1),this._r=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.wr=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.mr=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.gr=function(a){return`firestore_online_state_${a}`}(this.persistenceKey),this.yr=function(a){return`firestore_bundle_loaded_v2_${a}`}(this.persistenceKey),this.window.addEventListener("storage",this.ur)}static C(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Si();for(const r of e){if(r===this.rr)continue;const i=this.getItem(uA(this.persistenceKey,r));if(i){const s=Cg.er(r,i);s&&(this.ar=this.ar.insert(s.clientId,s))}}this.pr();const n=this.storage.getItem(this.gr);if(n){const r=this.Ir(n);r&&this.Tr(r)}for(const r of this.hr)this.cr(r);this.hr=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.dr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Er(this.ar)}isActiveQueryTarget(e){let n=!1;return this.ar.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ar(e,"pending")}updateMutationState(e,n,r){this.Ar(e,n,r),this.Rr(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(A0(this.persistenceKey,e));if(r){const i=Wd.er(e,r);i&&(n=i.state)}}return this.br.sr(e),this.pr(),n}removeLocalQueryTarget(e){this.br.ir(e),this.pr()}isLocalQueryTarget(e){return this.br.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(A0(this.persistenceKey,e))}updateQueryState(e,n,r){this.vr(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Rr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ur),this.removeItem(this.lr),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return se("SharedClientState","READ",e,n),n}setItem(e,n){se("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){se("SharedClientState","REMOVE",e),this.storage.removeItem(e)}cr(e){const n=e;if(n.storageArea===this.storage){if(se("SharedClientState","EVENT",n.key,n.newValue),n.key===this.lr)return void Yt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ys.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this._r.test(n.key)){if(n.newValue==null){const r=this.Sr(n.key);return this.Dr(r,null)}{const r=this.Cr(n.key,n.newValue);if(r)return this.Dr(r.clientId,r)}}else if(this.wr.test(n.key)){if(n.newValue!==null){const r=this.Nr(n.key,n.newValue);if(r)return this.kr(r)}}else if(this.mr.test(n.key)){if(n.newValue!==null){const r=this.Or(n.key,n.newValue);if(r)return this.Mr(r)}}else if(n.key===this.gr){if(n.newValue!==null){const r=this.Ir(n.newValue);if(r)return this.Tr(r)}}else if(n.key===this.dr){const r=function(i){let s=pr.at;if(i!=null)try{const o=JSON.parse(i);Ae(typeof o=="number"),s=o}catch(o){Yt("SharedClientState","Failed to read sequence number from WebStorage",o)}return s}(n.newValue);r!==pr.at&&this.sequenceNumberHandler(r)}else if(n.key===this.yr){const r=this.Fr(n.newValue);await Promise.all(r.map(i=>this.syncEngine.$r(i)))}}}else this.hr.push(n)})}}get br(){return this.ar.get(this.rr)}pr(){this.setItem(this.lr,this.br.nr())}Ar(e,n,r){const i=new Ig(this.currentUser,e,n,r),s=dA(this.persistenceKey,this.currentUser,e);this.setItem(s,i.nr())}Rr(e){const n=dA(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Pr(e){const n={clientId:this.rr,onlineState:e};this.storage.setItem(this.gr,JSON.stringify(n))}vr(e,n,r){const i=A0(this.persistenceKey,e),s=new Wd(e,n,r);this.setItem(i,s.nr())}Vr(e){const n=JSON.stringify(Array.from(e));this.setItem(this.yr,n)}Sr(e){const n=this._r.exec(e);return n?n[1]:null}Cr(e,n){const r=this.Sr(e);return Cg.er(r,n)}Nr(e,n){const r=this.wr.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Ig.er(new gn(s),i,n)}Or(e,n){const r=this.mr.exec(e),i=Number(r[1]);return Wd.er(i,n)}Ir(e){return qE.er(e)}Fr(e){return JSON.parse(e)}async kr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Br(e.batchId,e.state,e.error);se("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Mr(e){return this.syncEngine.Lr(e.targetId,e.state,e.error)}Dr(e,n){const r=n?this.ar.insert(e,n):this.ar.remove(e),i=this.Er(this.ar),s=this.Er(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.qr(o,a).then(()=>{this.ar=r})}Tr(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Er(e){let n=dv();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class XM{constructor(){this.Ur=new V1,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}updateQueryState(e,n,r){this.Kr[e]=n}removeLocalQueryTarget(e){this.Ur.ir(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.Kr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new V1,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vY{Gr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(){this.Qr=()=>this.jr(),this.zr=()=>this.Wr(),this.Hr=[],this.Jr()}Gr(e){this.Hr.push(e)}shutdown(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}Jr(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}jr(){se("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Hr)e(0)}Wr(){se("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Hr)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Y={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wY{constructor(e){this.Yr=e.Yr,this.Zr=e.Zr}Xr(e){this.eo=e}no(e){this.so=e}onMessage(e){this.io=e}close(){this.Zr()}send(e){this.Yr(e)}ro(){this.eo()}oo(e){this.so(e)}uo(e){this.io(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bY extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.co=n+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get ho(){return!1}lo(e,n,r,i,s){const o=this.fo(e,n);se("RestConnection","Sending: ",o,r);const a={};return this._o(a,i,s),this.wo(e,o,a,r).then(l=>(se("RestConnection","Received: ",l),l),l=>{throw Uc("RestConnection",`${e} failed with error: `,l,"url: ",o,"request:",r),l})}mo(e,n,r,i,s,o){return this.lo(e,n,r,i,s)}_o(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+vu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}fo(e,n){const r=_Y[e];return`${this.co}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}wo(e,n,r,i){return new Promise((s,o)=>{const a=new _7;a.setWithCredentials(!0),a.listenOnce(g7.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case I0.NO_ERROR:const c=a.getResponseJson();se("Connection","XHR received:",JSON.stringify(c)),s(c);break;case I0.TIMEOUT:se("Connection",'RPC "'+e+'" timed out'),o(new re(Q.DEADLINE_EXCEEDED,"Request time out"));break;case I0.HTTP_ERROR:const u=a.getStatus();if(se("Connection",'RPC "'+e+'" failed with status:',u,"response text:",a.getResponseText()),u>0){let d=a.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const f=function(p){const y=p.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(y)>=0?y:Q.UNKNOWN}(h.status);o(new re(f,h.message))}else o(new re(Q.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new re(Q.UNAVAILABLE,"Connection failed."));break;default:Se()}}finally{se("Connection",'RPC "'+e+'" completed.')}});const l=JSON.stringify(i);a.send(n,"POST",l,r,15)})}yo(e,n,r){const i=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=p7(),o=m7(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new v7({})),this._o(a.initMessageHeaders,n,r),a.encodeInitMessageHeaders=!0;const l=i.join("");se("Connection","Creating WebChannel: "+l,a);const c=s.createWebChannel(l,a);let u=!1,d=!1;const h=new wY({Yr:p=>{d?se("Connection","Not sending because WebChannel is closed:",p):(u||(se("Connection","Opening WebChannel transport."),c.open(),u=!0),se("Connection","WebChannel sending:",p),c.send(p))},Zr:()=>c.close()}),f=(p,y,w)=>{p.listen(y,m=>{try{w(m)}catch(g){setTimeout(()=>{throw g},0)}})};return f(c,Up.EventType.OPEN,()=>{d||se("Connection","WebChannel transport opened.")}),f(c,Up.EventType.CLOSE,()=>{d||(d=!0,se("Connection","WebChannel transport closed"),h.oo())}),f(c,Up.EventType.ERROR,p=>{d||(d=!0,Uc("Connection","WebChannel transport errored:",p),h.oo(new re(Q.UNAVAILABLE,"The operation could not be completed")))}),f(c,Up.EventType.MESSAGE,p=>{var y;if(!d){const w=p.data[0];Ae(!!w);const m=w,g=m.error||((y=m[0])===null||y===void 0?void 0:y.error);if(g){se("Connection","WebChannel received error:",g);const _=g.status;let b=function(E){const D=Zt[E];if(D!==void 0)return dM(D)}(_),x=g.message;b===void 0&&(b=Q.INTERNAL,x="Unknown error status: "+_+" with message "+g.message),d=!0,h.oo(new re(b,x)),c.close()}else se("Connection","WebChannel received:",w),h.uo(w)}}),f(o,y7.STAT_EVENT,p=>{p.stat===Sk.PROXY?se("Connection","Detected buffering proxy"):p.stat===Sk.NOPROXY&&se("Connection","Detected no buffering proxy")}),setTimeout(()=>{h.ro()},0),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JM(){return typeof window<"u"?window:null}function _m(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(t){return new hQ(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Ys=e,this.timerId=n,this.po=r,this.Io=i,this.To=s,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}reset(){this.Eo=0}bo(){this.Eo=this.To}vo(e){this.cancel();const n=Math.floor(this.Eo+this.Po()),r=Math.max(0,Date.now()-this.Ro),i=Math.max(0,n-r);i>0&&se("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Eo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,i,()=>(this.Ro=Date.now(),e())),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}Vo(){this.Ao!==null&&(this.Ao.skipDelay(),this.Ao=null)}cancel(){this.Ao!==null&&(this.Ao.cancel(),this.Ao=null)}Po(){return(Math.random()-.5)*this.Eo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e,n,r,i,s,o,a,l){this.Ys=e,this.So=r,this.Do=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new KE(e,n)}Oo(){return this.state===1||this.state===5||this.Mo()}Mo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Fo()}async stop(){this.Oo()&&await this.close(0)}$o(){this.state=0,this.ko.reset()}Bo(){this.Mo()&&this.xo===null&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,()=>this.Lo()))}qo(e){this.Uo(),this.stream.send(e)}async Lo(){if(this.Mo())return this.close(0)}Uo(){this.xo&&(this.xo.cancel(),this.xo=null)}Ko(){this.No&&(this.No.cancel(),this.No=null)}async close(e,n){this.Uo(),this.Ko(),this.ko.cancel(),this.Co++,e!==4?this.ko.reset():n&&n.code===Q.RESOURCE_EXHAUSTED?(Yt(n.toString()),Yt("Using maximum backoff delay to prevent overloading the backend."),this.ko.bo()):n&&n.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Go(),this.stream.close(),this.stream=null),this.state=e,await this.listener.no(n)}Go(){}auth(){this.state=1;const e=this.Qo(this.Co),n=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Co===n&&this.jo(r,i)},r=>{e(()=>{const i=new re(Q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.zo(i)})})}jo(e,n){const r=this.Qo(this.Co);this.stream=this.Wo(e,n),this.stream.Xr(()=>{r(()=>(this.state=2,this.No=this.Ys.enqueueAfterDelay(this.Do,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.no(i=>{r(()=>this.zo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Fo(){this.state=5,this.ko.vo(async()=>{this.state=0,this.start()})}zo(e){return se("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Qo(e){return n=>{this.Ys.enqueueAndForget(()=>this.Co===e?n():(se("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class SY extends ZM{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.Tt=s}Wo(e,n){return this.connection.yo("Listen",e,n)}onMessage(e){this.ko.reset();const n=mQ(this.Tt,e),r=function(i){if(!("targetChange"in i))return Ne.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?Ne.min():s.readTime?Jt(s.readTime):Ne.min()}(e);return this.listener.Ho(n,r)}Jo(e){const n={};n.database=Fh(this.Tt),n.addTarget=function(i,s){let o;const a=s.target;return o=_g(a)?{documents:SM(i,a)}:{query:EM(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=yM(i,s.resumeToken):s.snapshotVersion.compareTo(Ne.min())>0&&(o.readTime=Hc(i,s.snapshotVersion.toTimestamp())),o}(this.Tt,e);const r=yQ(this.Tt,e);r&&(n.labels=r),this.qo(n)}Yo(e){const n={};n.database=Fh(this.Tt),n.removeTarget=e,this.qo(n)}}class EY extends ZM{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.Tt=s,this.Zo=!1}get Xo(){return this.Zo}start(){this.Zo=!1,this.lastStreamToken=void 0,super.start()}Go(){this.Zo&&this.tu([])}Wo(e,n){return this.connection.yo("Write",e,n)}onMessage(e){if(Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Zo){this.ko.reset();const n=gQ(e.writeResults,e.commitTime),r=Jt(e.commitTime);return this.listener.eu(r,n)}return Ae(!e.writeResults||e.writeResults.length===0),this.Zo=!0,this.listener.nu()}su(){const e={};e.database=Fh(this.Tt),this.qo(e)}tu(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Uh(this.Tt,r))};this.qo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xY extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.Tt=i,this.iu=!1}ru(){if(this.iu)throw new re(Q.FAILED_PRECONDITION,"The client has already been terminated.")}lo(e,n,r){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.lo(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new re(Q.UNKNOWN,i.toString())})}mo(e,n,r,i){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.mo(e,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new re(Q.UNKNOWN,s.toString())})}terminate(){this.iu=!0}}class TY{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}au(){this.ou===0&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.uu=null,this.lu("Backend didn't respond within 10 seconds."),this.hu("Offline"),Promise.resolve())))}fu(e){this.state==="Online"?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.hu("Offline")))}set(e){this.du(),this.ou=0,e==="Online"&&(this.cu=!1),this.hu(e)}hu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}lu(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.cu?(Yt(n),this.cu=!1):se("OnlineStateTracker",n)}du(){this.uu!==null&&(this.uu.cancel(),this.uu=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IY{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=s,this.yu.Gr(o=>{r.enqueueAndForget(async()=>{ea(this)&&(se("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=ge(a);l.mu.add(4),await Su(l),l.pu.set("Unknown"),l.mu.delete(4),await Wf(l)}(this))})}),this.pu=new TY(r,i)}}async function Wf(t){if(ea(t))for(const e of t.gu)await e(!0)}async function Su(t){for(const e of t.gu)await e(!1)}function mv(t,e){const n=ge(t);n.wu.has(e.targetId)||(n.wu.set(e.targetId,e),XE(n)?YE(n):xu(n).Mo()&&QE(n,e))}function jh(t,e){const n=ge(t),r=xu(n);n.wu.delete(e),r.Mo()&&e$(n,e),n.wu.size===0&&(r.Mo()?r.Bo():ea(n)&&n.pu.set("Unknown"))}function QE(t,e){t.Iu.Ft(e.targetId),xu(t).Jo(e)}function e$(t,e){t.Iu.Ft(e),xu(t).Yo(e)}function YE(t){t.Iu=new lQ({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ie:e=>t.wu.get(e)||null}),xu(t).start(),t.pu.au()}function XE(t){return ea(t)&&!xu(t).Oo()&&t.wu.size>0}function ea(t){return ge(t).mu.size===0}function t$(t){t.Iu=void 0}async function CY(t){t.wu.forEach((e,n)=>{QE(t,e)})}async function kY(t,e){t$(t),XE(t)?(t.pu.fu(e),YE(t)):t.pu.set("Unknown")}async function AY(t,e,n){if(t.pu.set("Online"),e instanceof gM&&e.state===2&&e.cause)try{await async function(r,i){const s=i.cause;for(const o of i.targetIds)r.wu.has(o)&&(await r.remoteSyncer.rejectListen(o,s),r.wu.delete(o),r.Iu.removeTarget(o))}(t,e)}catch(r){se("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await kg(t,r)}else if(e instanceof ym?t.Iu.Qt(e):e instanceof mM?t.Iu.Zt(e):t.Iu.Wt(e),!n.isEqual(Ne.min()))try{const r=await GM(t.localStore);n.compareTo(r)>=0&&await function(i,s){const o=i.Iu.ee(s);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const c=i.wu.get(l);c&&i.wu.set(l,c.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach(a=>{const l=i.wu.get(a);if(!l)return;i.wu.set(a,l.withResumeToken(ln.EMPTY_BYTE_STRING,l.snapshotVersion)),e$(i,a);const c=new yo(l.target,a,1,l.sequenceNumber);QE(i,c)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){se("RemoteStore","Failed to raise snapshot:",r),await kg(t,r)}}async function kg(t,e,n){if(!Jo(e))throw e;t.mu.add(1),await Su(t),t.pu.set("Offline"),n||(n=()=>GM(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{se("RemoteStore","Retrying IndexedDB access"),await n(),t.mu.delete(1),await Wf(t)})}function n$(t,e){return e().catch(n=>kg(t,n,e))}async function Eu(t){const e=ge(t),n=No(e);let r=e._u.length>0?e._u[e._u.length-1].batchId:-1;for(;RY(e);)try{const i=await mY(e.localStore,r);if(i===null){e._u.length===0&&n.Bo();break}r=i.batchId,NY(e,i)}catch(i){await kg(e,i)}r$(e)&&i$(e)}function RY(t){return ea(t)&&t._u.length<10}function NY(t,e){t._u.push(e);const n=No(t);n.Mo()&&n.Xo&&n.tu(e.mutations)}function r$(t){return ea(t)&&!No(t).Oo()&&t._u.length>0}function i$(t){No(t).start()}async function PY(t){No(t).su()}async function DY(t){const e=No(t);for(const n of t._u)e.tu(n.mutations)}async function OY(t,e,n){const r=t._u.shift(),i=FE.from(r,e,n);await n$(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Eu(t)}async function LY(t,e){e&&No(t).Xo&&await async function(n,r){if(i=r.code,uM(i)&&i!==Q.ABORTED){const s=n._u.shift();No(n).$o(),await n$(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Eu(n)}var i}(t,e),r$(t)&&i$(t)}async function fA(t,e){const n=ge(t);n.asyncQueue.verifyOperationInProgress(),se("RemoteStore","RemoteStore received new credentials");const r=ea(n);n.mu.add(3),await Su(n),r&&n.pu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.mu.delete(3),await Wf(n)}async function B1(t,e){const n=ge(t);e?(n.mu.delete(2),await Wf(n)):e||(n.mu.add(2),await Su(n),n.pu.set("Unknown"))}function xu(t){return t.Tu||(t.Tu=function(e,n,r){const i=ge(e);return i.ru(),new SY(n,i.connection,i.authCredentials,i.appCheckCredentials,i.Tt,r)}(t.datastore,t.asyncQueue,{Xr:CY.bind(null,t),no:kY.bind(null,t),Ho:AY.bind(null,t)}),t.gu.push(async e=>{e?(t.Tu.$o(),XE(t)?YE(t):t.pu.set("Unknown")):(await t.Tu.stop(),t$(t))})),t.Tu}function No(t){return t.Eu||(t.Eu=function(e,n,r){const i=ge(e);return i.ru(),new EY(n,i.connection,i.authCredentials,i.appCheckCredentials,i.Tt,r)}(t.datastore,t.asyncQueue,{Xr:PY.bind(null,t),no:LY.bind(null,t),nu:DY.bind(null,t),eu:OY.bind(null,t)}),t.gu.push(async e=>{e?(t.Eu.$o(),await Eu(t)):(await t.Eu.stop(),t._u.length>0&&(se("RemoteStore",`Stopping write stream with ${t._u.length} pending writes`),t._u=[]))})),t.Eu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new wn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new JE(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tu(t,e){if(Yt("AsyncQueue",`${e}: ${t}`),Jo(t))return new re(Q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e){this.comparator=e?(n,r)=>e(n,r)||fe.comparator(n.key,r.key):(n,r)=>fe.comparator(n.key,r.key),this.keyedMap=Ed(),this.sortedSet=new cn(this.comparator)}static emptySet(e){return new _c(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof _c)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new _c;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(){this.Au=new cn(fe.comparator)}track(e){const n=e.doc.key,r=this.Au.get(n);r?e.type!==0&&r.type===3?this.Au=this.Au.insert(n,e):e.type===3&&r.type!==1?this.Au=this.Au.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Au=this.Au.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Au=this.Au.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Au=this.Au.remove(n):e.type===1&&r.type===2?this.Au=this.Au.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Au=this.Au.insert(n,{type:2,doc:e.doc}):Se():this.Au=this.Au.insert(n,e)}Ru(){const e=[];return this.Au.inorderTraversal((n,r)=>{e.push(r)}),e}}class Kc{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Kc(e,n,_c.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ff(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MY{constructor(){this.bu=void 0,this.listeners=[]}}class $Y{constructor(){this.queries=new Zo(e=>J2(e),Ff),this.onlineState="Unknown",this.vu=new Set}}async function ZE(t,e){const n=ge(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new MY),i)try{s.bu=await n.onListen(r)}catch(o){const a=Tu(o,`Initialization of query '${O1(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.Pu(n.onlineState),s.bu&&e.Vu(s.bu)&&tx(n)}async function ex(t,e){const n=ge(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function FY(t,e){const n=ge(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.Vu(i)&&(r=!0);o.bu=i}}r&&tx(n)}function UY(t,e,n){const r=ge(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function tx(t){t.vu.forEach(e=>{e.next()})}class nx{constructor(e,n,r){this.query=e,this.Su=n,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Kc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Du?this.xu(e)&&(this.Su.next(e),n=!0):this.Nu(e,this.onlineState)&&(this.ku(e),n=!0),this.Cu=e,n}onError(e){this.Su.error(e)}Pu(e){this.onlineState=e;let n=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),n=!0),n}Nu(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Ou||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}xu(e){if(e.docChanges.length>0)return!0;const n=this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ku(e){e=Kc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jY{constructor(e,n){this.Mu=e,this.byteLength=n}Fu(){return"metadata"in this.Mu}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e){this.Tt=e}Zi(e){return ji(this.Tt,e)}Xi(e){return e.metadata.exists?bM(this.Tt,e.document,!1):It.newNoDocument(this.Zi(e.metadata.name),this.tr(e.metadata.readTime))}tr(e){return Jt(e)}}class VY{constructor(e,n,r){this.$u=e,this.localStore=n,this.Tt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=s$(e)}Bu(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Mu.namedQuery)this.queries.push(e.Mu.namedQuery);else if(e.Mu.documentMetadata){this.documents.push({metadata:e.Mu.documentMetadata}),e.Mu.documentMetadata.exists||++n;const r=ot.fromString(e.Mu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Mu.document&&(this.documents[this.documents.length-1].document=e.Mu.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}Lu(e){const n=new Map,r=new mA(this.Tt);for(const i of e)if(i.metadata.queries){const s=r.Zi(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||We()).add(s);n.set(o,a)}}return n}async complete(){const e=await gY(this.localStore,new mA(this.Tt),this.documents,this.$u.id),n=this.Lu(this.documents);for(const r of this.queries)await yY(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,qu:this.collectionGroups,Uu:e}}}function s$(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o${constructor(e){this.key=e}}class a${constructor(e){this.key=e}}class l${constructor(e,n){this.query=e,this.Ku=n,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=We(),this.mutatedKeys=We(),this.ju=eM(e),this.zu=new _c(this.ju)}get Wu(){return this.Ku}Hu(e,n){const r=n?n.Ju:new pA,i=n?n.zu:this.zu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{const h=i.get(u),f=Uf(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),y=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let w=!1;h&&f?h.data.isEqual(f.data)?p!==y&&(r.track({type:3,doc:f}),w=!0):this.Yu(h,f)||(r.track({type:2,doc:f}),w=!0,(l&&this.ju(f,l)>0||c&&this.ju(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),w=!0):h&&!f&&(r.track({type:1,doc:h}),w=!0,(l||c)&&(a=!0)),w&&(f?(o=o.add(f),s=y?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{zu:o,Ju:r,Li:a,mutatedKeys:s}}Yu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;const s=e.Ju.Ru();s.sort((c,u)=>function(d,h){const f=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se()}};return f(d)-f(h)}(c.type,u.type)||this.ju(c.doc,u.doc)),this.Zu(r);const o=n?this.Xu():[],a=this.Qu.size===0&&this.current?1:0,l=a!==this.Gu;return this.Gu=a,s.length!==0||l?{snapshot:new Kc(this.query,e.zu,i,s,e.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),tc:o}:{tc:o}}Pu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new pA,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}ec(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}Zu(e){e&&(e.addedDocuments.forEach(n=>this.Ku=this.Ku.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ku=this.Ku.delete(n)),this.current=e.current)}Xu(){if(!this.current)return[];const e=this.Qu;this.Qu=We(),this.zu.forEach(r=>{this.ec(r.key)&&(this.Qu=this.Qu.add(r.key))});const n=[];return e.forEach(r=>{this.Qu.has(r)||n.push(new a$(r))}),this.Qu.forEach(r=>{e.has(r)||n.push(new o$(r))}),n}nc(e){this.Ku=e.Yi,this.Qu=We();const n=this.Hu(e.documents);return this.applyChanges(n,!0)}sc(){return Kc.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,this.Gu===0,this.hasCachedResults)}}class BY{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class zY{constructor(e){this.key=e,this.ic=!1}}class WY{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.rc={},this.oc=new Zo(a=>J2(a),Ff),this.uc=new Map,this.cc=new Set,this.ac=new cn(fe.comparator),this.hc=new Map,this.lc=new zE,this.fc={},this.dc=new Map,this._c=il.Sn(),this.onlineState="Unknown",this.wc=void 0}get isPrimaryClient(){return this.wc===!0}}async function HY(t,e){const n=ax(t);let r,i;const s=n.oc.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.sc();else{const o=await Gc(n.localStore,xr(e));n.isPrimaryClient&&mv(n.remoteStore,o);const a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await rx(n,e,r,a==="current",o.resumeToken)}return i}async function rx(t,e,n,r,i){t.mc=(d,h,f)=>async function(p,y,w,m){let g=y.view.Hu(w);g.Li&&(g=await Tg(p.localStore,y.query,!1).then(({documents:x})=>y.view.Hu(x,g)));const _=m&&m.targetChanges.get(y.targetId),b=y.view.applyChanges(g,p.isPrimaryClient,_);return z1(p,y.targetId,b.tc),b.snapshot}(t,d,h,f);const s=await Tg(t.localStore,e,!0),o=new l$(e,s.Yi),a=o.Hu(s.documents),l=Bf.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);z1(t,n,c.tc);const u=new BY(e,n,o);return t.oc.set(e,u),t.uc.has(n)?t.uc.get(n).push(e):t.uc.set(n,[e]),c.snapshot}async function GY(t,e){const n=ge(t),r=n.oc.get(e),i=n.uc.get(r.targetId);if(i.length>1)return n.uc.set(r.targetId,i.filter(s=>!Ff(s,e))),void n.oc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await qc(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),jh(n.remoteStore,r.targetId),Qc(n,r.targetId)}).catch(Xo)):(Qc(n,r.targetId),await qc(n.localStore,r.targetId,!0))}async function qY(t,e,n){const r=lx(t);try{const i=await function(s,o){const a=ge(s),l=Ft.now(),c=o.reduce((h,f)=>h.add(f.key),We());let u,d;return a.persistence.runTransaction("Locally write mutations","readwrite",h=>{let f=gr(),p=We();return a.ji.getEntries(h,c).next(y=>{f=y,f.forEach((w,m)=>{m.isValidDocument()||(p=p.add(w))})}).next(()=>a.localDocuments.getOverlayedDocuments(h,f)).next(y=>{u=y;const w=[];for(const m of o){const g=nQ(m,u.get(m.key).overlayedDocument);g!=null&&w.push(new Os(m.key,g,Y2(g.value.mapValue),Mt.exists(!0)))}return a.mutationQueue.addMutationBatch(h,l,w,o)}).next(y=>{d=y;const w=y.applyToLocalDocumentSet(u,p);return a.documentOverlayCache.saveOverlays(h,y.batchId,w)})}).then(()=>({batchId:d.batchId,changes:fM(u)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let l=s.fc[s.currentUser.toKey()];l||(l=new cn(Be)),l=l.insert(o,a),s.fc[s.currentUser.toKey()]=l}(r,i.batchId,n),await Ls(r,i.changes),await Eu(r.remoteStore)}catch(i){const s=Tu(i,"Failed to persist write");n.reject(s)}}async function c$(t,e){const n=ge(t);try{const r=await pY(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.hc.get(s);o&&(Ae(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.ic=!0:i.modifiedDocuments.size>0?Ae(o.ic):i.removedDocuments.size>0&&(Ae(o.ic),o.ic=!1))}),await Ls(n,r,e)}catch(r){await Xo(r)}}function gA(t,e,n){const r=ge(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.oc.forEach((s,o)=>{const a=o.view.Pu(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){const a=ge(s);a.onlineState=o;let l=!1;a.queries.forEach((c,u)=>{for(const d of u.listeners)d.Pu(o)&&(l=!0)}),l&&tx(a)}(r.eventManager,e),i.length&&r.rc.Ho(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function KY(t,e,n){const r=ge(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.hc.get(e),s=i&&i.key;if(s){let o=new cn(fe.comparator);o=o.insert(s,It.newNoDocument(s,Ne.min()));const a=We().add(s),l=new Vf(Ne.min(),new Map,new At(Be),o,a);await c$(r,l),r.ac=r.ac.remove(s),r.hc.delete(e),ox(r)}else await qc(r.localStore,e,!1).then(()=>Qc(r,e,n)).catch(Xo)}async function QY(t,e){const n=ge(t),r=e.batch.batchId;try{const i=await fY(n.localStore,e);sx(n,r,null),ix(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ls(n,i)}catch(i){await Xo(i)}}async function YY(t,e,n){const r=ge(t);try{const i=await function(s,o){const a=ge(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return a.mutationQueue.lookupMutationBatch(l,o).next(u=>(Ae(u!==null),c=u.keys(),a.mutationQueue.removeMutationBatch(l,u))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,c,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>a.localDocuments.getDocuments(l,c))})}(r.localStore,e);sx(r,e,n),ix(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ls(r,i)}catch(i){await Xo(i)}}async function XY(t,e){const n=ge(t);ea(n.remoteStore)||se("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(s){const o=ge(s);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",a=>o.mutationQueue.getHighestUnacknowledgedBatchId(a))}(n.localStore);if(r===-1)return void e.resolve();const i=n.dc.get(r)||[];i.push(e),n.dc.set(r,i)}catch(r){const i=Tu(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function ix(t,e){(t.dc.get(e)||[]).forEach(n=>{n.resolve()}),t.dc.delete(e)}function sx(t,e,n){const r=ge(t);let i=r.fc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.fc[r.currentUser.toKey()]=i}}function Qc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.uc.get(e))t.oc.delete(r),n&&t.rc.gc(r,n);t.uc.delete(e),t.isPrimaryClient&&t.lc.ds(e).forEach(r=>{t.lc.containsKey(r)||u$(t,r)})}function u$(t,e){t.cc.delete(e.path.canonicalString());const n=t.ac.get(e);n!==null&&(jh(t.remoteStore,n),t.ac=t.ac.remove(e),t.hc.delete(n),ox(t))}function z1(t,e,n){for(const r of n)r instanceof o$?(t.lc.addReference(r.key,e),JY(t,r)):r instanceof a$?(se("SyncEngine","Document no longer in limbo: "+r.key),t.lc.removeReference(r.key,e),t.lc.containsKey(r.key)||u$(t,r.key)):Se()}function JY(t,e){const n=e.key,r=n.path.canonicalString();t.ac.get(n)||t.cc.has(r)||(se("SyncEngine","New document in limbo: "+n),t.cc.add(r),ox(t))}function ox(t){for(;t.cc.size>0&&t.ac.size<t.maxConcurrentLimboResolutions;){const e=t.cc.values().next().value;t.cc.delete(e);const n=new fe(ot.fromString(e)),r=t._c.next();t.hc.set(r,new zY(n)),t.ac=t.ac.insert(n,r),mv(t.remoteStore,new yo(xr(_u(n.path)),r,2,pr.at))}}async function Ls(t,e,n){const r=ge(t),i=[],s=[],o=[];r.oc.isEmpty()||(r.oc.forEach((a,l)=>{o.push(r.mc(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){i.push(c);const u=GE.Ni(l.targetId,c);s.push(u)}}))}),await Promise.all(o),r.rc.Ho(i),await async function(a,l){const c=ge(a);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>q.forEach(l,d=>q.forEach(d.Ci,h=>c.persistence.referenceDelegate.addReference(u,d.targetId,h)).next(()=>q.forEach(d.xi,h=>c.persistence.referenceDelegate.removeReference(u,d.targetId,h)))))}catch(u){if(!Jo(u))throw u;se("LocalStore","Failed to update sequence numbers: "+u)}for(const u of l){const d=u.targetId;if(!u.fromCache){const h=c.Ki.get(d),f=h.snapshotVersion,p=h.withLastLimboFreeSnapshotVersion(f);c.Ki=c.Ki.insert(d,p)}}}(r.localStore,s))}async function ZY(t,e){const n=ge(t);if(!n.currentUser.isEqual(e)){se("SyncEngine","User change. New user:",e.toKey());const r=await HM(n.localStore,e);n.currentUser=e,function(i,s){i.dc.forEach(o=>{o.forEach(a=>{a.reject(new re(Q.CANCELLED,s))})}),i.dc.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ls(n,r.Wi)}}function eX(t,e){const n=ge(t),r=n.hc.get(e);if(r&&r.ic)return We().add(r.key);{let i=We();const s=n.uc.get(e);if(!s)return i;for(const o of s){const a=n.oc.get(o);i=i.unionWith(a.view.Wu)}return i}}async function tX(t,e){const n=ge(t),r=await Tg(n.localStore,e.query,!0),i=e.view.nc(r);return n.isPrimaryClient&&z1(n,e.targetId,i.tc),i}async function nX(t,e){const n=ge(t);return QM(n.localStore,e).then(r=>Ls(n,r))}async function rX(t,e,n,r){const i=ge(t),s=await function(o,a){const l=ge(o),c=ge(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",u=>c.An(u,a).next(d=>d?l.localDocuments.getDocuments(u,d):q.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await Eu(i.remoteStore):n==="acknowledged"||n==="rejected"?(sx(i,e,r||null),ix(i,e),function(o,a){ge(ge(o).mutationQueue).bn(a)}(i.localStore,e)):Se(),await Ls(i,s)):se("SyncEngine","Cannot apply mutation batch with id: "+e)}async function iX(t,e){const n=ge(t);if(ax(n),lx(n),e===!0&&n.wc!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await yA(n,r.toArray());n.wc=!0,await B1(n.remoteStore,!0);for(const s of i)mv(n.remoteStore,s)}else if(e===!1&&n.wc!==!1){const r=[];let i=Promise.resolve();n.uc.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Qc(n,o),qc(n.localStore,o,!0))),jh(n.remoteStore,o)}),await i,await yA(n,r),function(s){const o=ge(s);o.hc.forEach((a,l)=>{jh(o.remoteStore,l)}),o.lc._s(),o.hc=new Map,o.ac=new cn(fe.comparator)}(n),n.wc=!1,await B1(n.remoteStore,!1)}}async function yA(t,e,n){const r=ge(t),i=[],s=[];for(const o of e){let a;const l=r.uc.get(o);if(l&&l.length!==0){a=await Gc(r.localStore,xr(l[0]));for(const c of l){const u=r.oc.get(c),d=await tX(r,u);d.snapshot&&s.push(d.snapshot)}}else{const c=await KM(r.localStore,o);a=await Gc(r.localStore,c),await rx(r,d$(c),o,!1,a.resumeToken)}i.push(a)}return r.rc.Ho(s),i}function d$(t){return X2(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function sX(t){const e=ge(t);return ge(ge(e.localStore).persistence).Si()}async function oX(t,e,n,r){const i=ge(t);if(i.wc)return void se("SyncEngine","Ignoring unexpected query state notification.");const s=i.uc.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await QM(i.localStore,Z2(s[0])),a=Vf.createSynthesizedRemoteEventForCurrentChange(e,n==="current",ln.EMPTY_BYTE_STRING);await Ls(i,o,a);break}case"rejected":await qc(i.localStore,e,!0),Qc(i,e,r);break;default:Se()}}async function aX(t,e,n){const r=ax(t);if(r.wc){for(const i of e){if(r.uc.has(i)){se("SyncEngine","Adding an already active target "+i);continue}const s=await KM(r.localStore,i),o=await Gc(r.localStore,s);await rx(r,d$(s),o.targetId,!1,o.resumeToken),mv(r.remoteStore,o)}for(const i of n)r.uc.has(i)&&await qc(r.localStore,i,!1).then(()=>{jh(r.remoteStore,i),Qc(r,i)}).catch(Xo)}}function ax(t){const e=ge(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=c$.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=eX.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=KY.bind(null,e),e.rc.Ho=FY.bind(null,e.eventManager),e.rc.gc=UY.bind(null,e.eventManager),e}function lx(t){const e=ge(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=QY.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YY.bind(null,e),e}function lX(t,e,n){const r=ge(t);(async function(i,s,o){try{const a=await s.getMetadata();if(await function(d,h){const f=ge(d),p=Jt(h.createTime);return f.persistence.runTransaction("hasNewerBundle","readonly",y=>f.Os.getBundleMetadata(y,h.id)).then(y=>!!y&&y.createTime.compareTo(p)>=0)}(i.localStore,a))return await s.close(),o._completeWith(function(d){return{taskState:"Success",documentsLoaded:d.totalDocuments,bytesLoaded:d.totalBytes,totalDocuments:d.totalDocuments,totalBytes:d.totalBytes}}(a)),Promise.resolve(new Set);o._updateProgress(s$(a));const l=new VY(a,i.localStore,s.Tt);let c=await s.yc();for(;c;){const d=await l.Bu(c);d&&o._updateProgress(d),c=await s.yc()}const u=await l.complete();return await Ls(i,u.Uu,void 0),await function(d,h){const f=ge(d);return f.persistence.runTransaction("Save bundle","readwrite",p=>f.Os.saveBundleMetadata(p,h))}(i.localStore,a),o._completeWith(u.progress),Promise.resolve(u.qu)}catch(a){return Uc("SyncEngine",`Loading bundle failed with ${a}`),o._failWith(a),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class h${constructor(){this.synchronizeTabs=!1}async initialize(e){this.Tt=zf(e.databaseInfo.databaseId),this.sharedClientState=this.Ic(e),this.persistence=this.Tc(e),await this.persistence.start(),this.localStore=this.Ec(e),this.gcScheduler=this.Ac(e,this.localStore),this.indexBackfillerScheduler=this.Rc(e,this.localStore)}Ac(e,n){return null}Rc(e,n){return null}Ec(e){return WM(this.persistence,new zM,e.initialUser,this.Tt)}Tc(e){return new BM(pv.qs,this.Tt)}Ic(e){return new XM}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class f$ extends h${constructor(e,n,r){super(),this.bc=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.bc.initialize(this,e),await lx(this.bc.syncEngine),await Eu(this.bc.remoteStore),await this.persistence.di(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}Ec(e){return WM(this.persistence,new zM,e.initialUser,this.Tt)}Ac(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new JQ(r,e.asyncQueue,n)}Rc(e,n){const r=new L7(n,this.persistence);return new O7(e.asyncQueue,r)}Tc(e){const n=HE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?lr.withCacheSize(this.cacheSizeBytes):lr.DEFAULT;return new WE(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,JM(),_m(),this.Tt,this.sharedClientState,!!this.forceOwnership)}Ic(e){return new XM}}class cX extends f${constructor(e,n){super(e,n,!1),this.bc=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.bc.syncEngine;this.sharedClientState instanceof R0&&(this.sharedClientState.syncEngine={Br:rX.bind(null,n),Lr:oX.bind(null,n),qr:aX.bind(null,n),Si:sX.bind(null,n),$r:nX.bind(null,n)},await this.sharedClientState.start()),await this.persistence.di(async r=>{await iX(this.bc.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Ic(e){const n=JM();if(!R0.C(n))throw new re(Q.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=HE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new R0(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class cx{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>gA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ZY.bind(null,this.syncEngine),await B1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new $Y}createDatastore(e){const n=zf(e.databaseInfo.databaseId),r=(i=e.databaseInfo,new bY(i));var i;return function(s,o,a,l){return new xY(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>gA(this.syncEngine,a,0),o=hA.C()?new hA:new vY,new IY(n,r,i,s,o);var n,r,i,s,o}createSyncEngine(e,n){return function(r,i,s,o,a,l,c){const u=new WY(r,i,s,o,a,l);return c&&(u.wc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=ge(e);se("RemoteStore","RemoteStore shutting down."),n.mu.add(5),await Su(n),n.yu.shutdown(),n.pu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.vc(this.observer.next,e)}error(e){this.observer.error?this.vc(this.observer.error,e):Yt("Uncaught Error in snapshot listener:",e.toString())}Pc(){this.muted=!0}vc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uX{constructor(e,n){this.Vc=e,this.Tt=n,this.metadata=new wn,this.buffer=new Uint8Array,this.Sc=new TextDecoder("utf-8"),this.Dc().then(r=>{r&&r.Fu()?this.metadata.resolve(r.Mu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Mu)}`))},r=>this.metadata.reject(r))}close(){return this.Vc.cancel()}async getMetadata(){return this.metadata.promise}async yc(){return await this.getMetadata(),this.Dc()}async Dc(){const e=await this.Cc();if(e===null)return null;const n=this.Sc.decode(e),r=Number(n);isNaN(r)&&this.xc(`length string (${n}) is not valid number`);const i=await this.Nc(r);return new jY(JSON.parse(i),e.length+r)}kc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async Cc(){for(;this.kc()<0&&!await this.Oc(););if(this.buffer.length===0)return null;const e=this.kc();e<0&&this.xc("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Nc(e){for(;this.buffer.length<e;)await this.Oc()&&this.xc("Reached the end of bundle when more is expected.");const n=this.Sc.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}xc(e){throw this.Vc.cancel(),new Error(`Invalid bundle format: ${e}`)}async Oc(){const e=await this.Vc.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dX{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new re(Q.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=await async function(r,i){const s=ge(r),o=Fh(s.Tt)+"/documents",a={documents:i.map(d=>$h(s.Tt,d))},l=await s.mo("BatchGetDocuments",o,a,i.length),c=new Map;l.forEach(d=>{const h=pQ(s.Tt,d);c.set(h.key.toString(),h)});const u=[];return i.forEach(d=>{const h=c.get(d.toString());Ae(!!h),u.push(h)}),u}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new bu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=fe.fromPath(r);this.mutations.push(new LE(i,this.precondition(i)))}),await async function(n,r){const i=ge(n),s=Fh(i.Tt)+"/documents",o={writes:r.map(a=>Uh(i.Tt,a))};await i.lo("Commit",s,o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Se();n=Ne.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new re(Q.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Ne.min())?Mt.exists(!1):Mt.updateTime(n):Mt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Ne.min()))throw new re(Q.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Mt.updateTime(n)}return Mt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hX{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Mc=r.maxAttempts,this.ko=new KE(this.asyncQueue,"transaction_retry")}run(){this.Mc-=1,this.Fc()}Fc(){this.ko.vo(async()=>{const e=new dX(this.datastore),n=this.$c(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Bc(i)}))}).catch(r=>{this.Bc(r)})})}$c(e){try{const n=this.updateFunction(e);return!Mf(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Bc(e){this.Mc>0&&this.Lc(e)?(this.Mc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Fc(),Promise.resolve()))):this.deferred.reject(e)}Lc(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!uM(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fX{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=gn.UNAUTHENTICATED,this.clientId=R2.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{se("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(se("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new re(Q.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new wn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Tu(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function p$(t,e){t.asyncQueue.verifyOperationInProgress(),se("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await HM(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function m$(t,e){t.asyncQueue.verifyOperationInProgress();const n=await ux(t);se("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>fA(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>fA(e.remoteStore,s)),t.onlineComponents=e}async function ux(t){return t.offlineComponents||(se("FirestoreClient","Using default OfflineComponentProvider"),await p$(t,new h$)),t.offlineComponents}async function yv(t){return t.onlineComponents||(se("FirestoreClient","Using default OnlineComponentProvider"),await m$(t,new cx)),t.onlineComponents}function g$(t){return ux(t).then(e=>e.persistence)}function dx(t){return ux(t).then(e=>e.localStore)}function y$(t){return yv(t).then(e=>e.remoteStore)}function hx(t){return yv(t).then(e=>e.syncEngine)}function pX(t){return yv(t).then(e=>e.datastore)}async function Yc(t){const e=await yv(t),n=e.eventManager;return n.onListen=HY.bind(null,e.syncEngine),n.onUnlisten=GY.bind(null,e.syncEngine),n}function mX(t){return t.asyncQueue.enqueue(async()=>{const e=await g$(t),n=await y$(t);return e.setNetworkEnabled(!0),function(r){const i=ge(r);return i.mu.delete(0),Wf(i)}(n)})}function gX(t){return t.asyncQueue.enqueue(async()=>{const e=await g$(t),n=await y$(t);return e.setNetworkEnabled(!1),async function(r){const i=ge(r);i.mu.add(0),await Su(i),i.pu.set("Offline")}(n)})}function yX(t,e){const n=new wn;return t.asyncQueue.enqueueAndForget(async()=>async function(r,i,s){try{const o=await function(a,l){const c=ge(a);return c.persistence.runTransaction("read document","readonly",u=>c.localDocuments.getDocument(u,l))}(r,i);o.isFoundDocument()?s.resolve(o):o.isNoDocument()?s.resolve(null):s.reject(new re(Q.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const a=Tu(o,`Failed to get document '${i} from cache`);s.reject(a)}}(await dx(t),e,n)),n.promise}function v$(t,e,n={}){const r=new wn;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,l){const c=new gv({next:d=>{s.enqueueAndForget(()=>ex(i,u));const h=d.docs.has(o);!h&&d.fromCache?l.reject(new re(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&a&&a.source==="server"?l.reject(new re(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),u=new nx(_u(o.path),c,{includeMetadataChanges:!0,Ou:!0});return ZE(i,u)}(await Yc(t),t.asyncQueue,e,n,r)),r.promise}function vX(t,e){const n=new wn;return t.asyncQueue.enqueueAndForget(async()=>async function(r,i,s){try{const o=await Tg(r,i,!0),a=new l$(i,o.Yi),l=a.Hu(o.documents),c=a.applyChanges(l,!1);s.resolve(c.snapshot)}catch(o){const a=Tu(o,`Failed to execute query '${i} against cache`);s.reject(a)}}(await dx(t),e,n)),n.promise}function _$(t,e,n={}){const r=new wn;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,l){const c=new gv({next:d=>{s.enqueueAndForget(()=>ex(i,u)),d.fromCache&&a.source==="server"?l.reject(new re(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),u=new nx(o,c,{includeMetadataChanges:!0,Ou:!0});return ZE(i,u)}(await Yc(t),t.asyncQueue,e,n,r)),r.promise}function _X(t,e){const n=new gv(e);return t.asyncQueue.enqueueAndForget(async()=>function(r,i){ge(r).vu.add(i),i.next()}(await Yc(t),n)),()=>{n.Pc(),t.asyncQueue.enqueueAndForget(async()=>function(r,i){ge(r).vu.delete(i)}(await Yc(t),n))}}function wX(t,e,n,r){const i=function(s,o){let a;return a=typeof s=="string"?new TextEncoder().encode(s):s,function(l,c){return new uX(l,c)}(function(l,c){if(l instanceof Uint8Array)return vA(l,c);if(l instanceof ArrayBuffer)return vA(new Uint8Array(l),c);if(l instanceof ReadableStream)return l.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(a),o)}(n,zf(e));t.asyncQueue.enqueueAndForget(async()=>{lX(await hx(t),i,r)})}function bX(t,e){return t.asyncQueue.enqueue(async()=>function(n,r){const i=ge(n);return i.persistence.runTransaction("Get named query","readonly",s=>i.Os.getNamedQuery(s,r))}(await dx(t),e))}const _A=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(t,e,n){if(!n)throw new re(Q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function w$(t,e,n,r){if(e===!0&&r===!0)throw new re(Q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function wA(t){if(!fe.isDocumentKey(t))throw new re(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function bA(t){if(fe.isDocumentKey(t))throw new re(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function vv(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Se()}function ct(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new re(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=vv(t);throw new re(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function b$(t,e){if(e<=0)throw new re(Q.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new re(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new re(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,w$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new SA({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new re(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new re(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new SA(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new S7;switch(n.type){case"gapi":const r=n.client;return new I7(r,n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new re(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=_A.get(e);n&&(se("ComponentProvider","Removing Datastore"),_A.delete(e),n.terminate())}(this),Promise.resolve()}}function SX(t,e,n,r={}){var i;const s=(t=ct(t,Hf))._getSettings();if(s.host!=="firestore.googleapis.com"&&s.host!==e&&Uc("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${n}`,ssl:!1})),r.mockUserToken){let o,a;if(typeof r.mockUserToken=="string")o=r.mockUserToken,a=gn.MOCK_USER;else{o=tE(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new re(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new gn(l)}t._authCredentials=new E7(new A2(o,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rt(this.firestore,e,this._key)}}class Mn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Mn(this.firestore,e,this._query)}}class Vi extends Mn{constructor(e,n,r){super(e,n,_u(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rt(this.firestore,null,new fe(e))}withConverter(e){return new Vi(this.firestore,e,this._path)}}function S$(t,e,...n){if(t=me(t),fx("collection","path",e),t instanceof Hf){const r=ot.fromString(e,...n);return bA(r),new Vi(t,null,r)}{if(!(t instanceof Rt||t instanceof Vi))throw new re(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ot.fromString(e,...n));return bA(r),new Vi(t.firestore,null,r)}}function EX(t,e){if(t=ct(t,Hf),fx("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new re(Q.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Mn(t,null,function(n){return new Ds(ot.emptyPath(),n)}(e))}function qi(t,e,...n){if(t=me(t),arguments.length===1&&(e=R2.R()),fx("doc","path",e),t instanceof Hf){const r=ot.fromString(e,...n);return wA(r),new Rt(t,null,new fe(r))}{if(!(t instanceof Rt||t instanceof Vi))throw new re(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ot.fromString(e,...n));return wA(r),new Rt(t.firestore,t instanceof Vi?t.converter:null,new fe(r))}}function E$(t,e){return t=me(t),e=me(e),(t instanceof Rt||t instanceof Vi)&&(e instanceof Rt||e instanceof Vi)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function x$(t,e){return t=me(t),e=me(e),t instanceof Mn&&e instanceof Mn&&t.firestore===e.firestore&&Ff(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xX{constructor(){this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new KE(this,"async_queue_retry"),this.Hc=()=>{const n=_m();n&&se("AsyncQueue","Visibility state changed to "+n.visibilityState),this.ko.Vo()};const e=_m();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Hc)}get isShuttingDown(){return this.Kc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Jc(),this.Yc(e)}enterRestrictedMode(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;const n=_m();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Hc)}}enqueue(e){if(this.Jc(),this.Kc)return new Promise(()=>{});const n=new wn;return this.Yc(()=>this.Kc&&this.zc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Uc.push(e),this.Zc()))}async Zc(){if(this.Uc.length!==0){try{await this.Uc[0](),this.Uc.shift(),this.ko.reset()}catch(e){if(!Jo(e))throw e;se("AsyncQueue","Operation failed with retryable error: "+e)}this.Uc.length>0&&this.ko.vo(()=>this.Zc())}}Yc(e){const n=this.qc.then(()=>(this.jc=!0,e().catch(r=>{this.Qc=r,this.jc=!1;const i=function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),o}(r);throw Yt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.jc=!1,r))));return this.qc=n,n}enqueueAfterDelay(e,n,r){this.Jc(),this.Wc.indexOf(e)>-1&&(n=0);const i=JE.createAndSchedule(this,e,n,r,s=>this.Xc(s));return this.Gc.push(i),i}Jc(){this.Qc&&Se()}verifyOperationInProgress(){}async ta(){let e;do e=this.qc,await e;while(e!==this.qc)}ea(e){for(const n of this.Gc)if(n.timerId===e)return!0;return!1}na(e){return this.ta().then(()=>{this.Gc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Gc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ta()})}sa(e){this.Wc.push(e)}Xc(e){const n=this.Gc.indexOf(e);this.Gc.splice(n,1)}}function W1(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const i of n)if(i in r&&typeof r[i]=="function")return!0;return!1}(t,["next","error","complete"])}class TX{constructor(){this._progressObserver={},this._taskCompletionResolver=new wn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IX=-1;class Kt extends Hf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new xX,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||T$(this),this._firestoreClient.terminate()}}function In(t){return t._firestoreClient||T$(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function T$(t){var e;const n=t._freezeSettings(),r=function(i,s,o,a){return new M7(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new fX(t._authCredentials,t._appCheckCredentials,t._queue,r)}function CX(t,e){C$(t=ct(t,Kt));const n=In(t),r=t._freezeSettings(),i=new cx;return I$(n,i,new f$(i,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function kX(t){C$(t=ct(t,Kt));const e=In(t),n=t._freezeSettings(),r=new cx;return I$(e,r,new cX(r,n.cacheSizeBytes))}function I$(t,e,n){const r=new wn;return t.asyncQueue.enqueue(async()=>{try{await p$(t,n),await m$(t,e),r.resolve()}catch(i){const s=i;if(!function(o){return o.name==="FirebaseError"?o.code===Q.FAILED_PRECONDITION||o.code===Q.UNIMPLEMENTED:typeof DOMException<"u"&&o instanceof DOMException?o.code===22||o.code===20||o.code===11:!0}(s))throw s;Uc("Error enabling offline persistence. Falling back to persistence disabled: "+s),r.reject(s)}}).then(()=>r.promise)}function AX(t){if(t._initialized&&!t._terminated)throw new re(Q.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new wn;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(n){if(!fi.C())return Promise.resolve();const r=n+"main";await fi.delete(r)}(HE(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function RX(t){return function(e){const n=new wn;return e.asyncQueue.enqueueAndForget(async()=>XY(await hx(e),n)),n.promise}(In(t=ct(t,Kt)))}function NX(t){return mX(In(t=ct(t,Kt)))}function PX(t){return gX(In(t=ct(t,Kt)))}function DX(t,e){const n=In(t=ct(t,Kt)),r=new TX;return wX(n,t._databaseId,e,r),r}function OX(t,e){return bX(In(t=ct(t,Kt)),e).then(n=>n?new Mn(t,null,n.query):null)}function C$(t){if(t._initialized||t._terminated)throw new re(Q.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ki(ln.fromBase64String(e))}catch(n){throw new re(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ki(ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new re(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new re(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new re(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LX=/^__.*__$/;class MX{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Os(e,this.data,this.fieldMask,n,this.fieldTransforms):new wu(e,this.data,n,this.fieldTransforms)}}class k${constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Os(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function A$(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se()}}class wv{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.Tt=r,this.ignoreUndefinedProperties=i,s===void 0&&this.ia(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ra(){return this.settings.ra}oa(e){return new wv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ua(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.oa({path:r,ca:!1});return i.aa(e),i}ha(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.oa({path:r,ca:!1});return i.ia(),i}la(e){return this.oa({path:void 0,ca:!0})}fa(e){return Ag(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}ia(){if(this.path)for(let e=0;e<this.path.length;e++)this.aa(this.path.get(e))}aa(e){if(e.length===0)throw this.fa("Document fields must not be empty");if(A$(this.ra)&&LX.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}class $X{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.Tt=r||zf(e)}wa(e,n,r,i=!1){return new wv({ra:e,methodName:n,_a:r,path:Xt.emptyPath(),ca:!1,da:i},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}function Tl(t){const e=t._freezeSettings(),n=zf(t._databaseId);return new $X(t._databaseId,!!e.ignoreUndefinedProperties,n)}function bv(t,e,n,r,i,s={}){const o=t.wa(s.merge||s.mergeFields?2:0,e,n,i);yx("Data must be an object, but it was:",o,r);const a=P$(r,o);let l,c;if(s.merge)l=new mr(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const d of s.mergeFields){const h=H1(e,d,n);if(!o.contains(h))throw new re(Q.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);O$(u,h)||u.push(h)}l=new mr(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new MX(new Nn(a),l,c)}class Gf extends xl{_toFieldTransform(e){if(e.ra!==2)throw e.ra===1?e.fa(`${this._methodName}() can only appear at the top level of your update data`):e.fa(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gf}}function R$(t,e,n){return new wv({ra:3,_a:e.settings._a,methodName:t._methodName,ca:n},e.databaseId,e.Tt,e.ignoreUndefinedProperties)}class px extends xl{_toFieldTransform(e){return new jf(e.path,new zc)}isEqual(e){return e instanceof px}}class FX extends xl{constructor(e,n){super(e),this.ma=n}_toFieldTransform(e){const n=R$(this,e,!0),r=this.ma.map(s=>Il(s,n)),i=new el(r);return new jf(e.path,i)}isEqual(e){return this===e}}class UX extends xl{constructor(e,n){super(e),this.ma=n}_toFieldTransform(e){const n=R$(this,e,!0),r=this.ma.map(s=>Il(s,n)),i=new tl(r);return new jf(e.path,i)}isEqual(e){return this===e}}class jX extends xl{constructor(e,n){super(e),this.ga=n}_toFieldTransform(e){const n=new Wc(e.Tt,rM(e.Tt,this.ga));return new jf(e.path,n)}isEqual(e){return this===e}}function mx(t,e,n,r){const i=t.wa(1,e,n);yx("Data must be an object, but it was:",i,r);const s=[],o=Nn.empty();El(r,(l,c)=>{const u=vx(e,l,n);c=me(c);const d=i.ha(u);if(c instanceof Gf)s.push(u);else{const h=Il(c,d);h!=null&&(s.push(u),o.set(u,h))}});const a=new mr(s);return new k$(o,a,i.fieldTransforms)}function gx(t,e,n,r,i,s){const o=t.wa(1,e,n),a=[H1(e,r,n)],l=[i];if(s.length%2!=0)throw new re(Q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(H1(e,s[h])),l.push(s[h+1]);const c=[],u=Nn.empty();for(let h=a.length-1;h>=0;--h)if(!O$(c,a[h])){const f=a[h];let p=l[h];p=me(p);const y=o.ha(f);if(p instanceof Gf)c.push(f);else{const w=Il(p,y);w!=null&&(c.push(f),u.set(f,w))}}const d=new mr(c);return new k$(u,d,o.fieldTransforms)}function N$(t,e,n,r=!1){return Il(n,t.wa(r?4:3,e))}function Il(t,e){if(D$(t=me(t)))return yx("Unsupported field value:",e,t),P$(t,e);if(t instanceof xl)return function(n,r){if(!A$(r.ra))throw r.fa(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.fa(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.ca&&e.ra!==4)throw e.fa("Nested arrays are not supported");return function(n,r){const i=[];let s=0;for(const o of n){let a=Il(o,r.la(s));a==null&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if((n=me(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return rM(r.Tt,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Ft.fromDate(n);return{timestampValue:Hc(r.Tt,i)}}if(n instanceof Ft){const i=new Ft(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Hc(r.Tt,i)}}if(n instanceof _v)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Ki)return{bytesValue:yM(r.Tt,n._byteString)};if(n instanceof Rt){const i=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw r.fa(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:ME(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.fa(`Unsupported field value: ${vv(n)}`)}(t,e)}function P$(t,e){const n={};return $2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):El(t,(r,i)=>{const s=Il(i,e.ua(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function D$(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ft||t instanceof _v||t instanceof Ki||t instanceof Rt||t instanceof xl)}function yx(t,e,n){if(!D$(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=vv(n);throw r==="an object"?e.fa(t+" a custom object"):e.fa(t+" "+r)}}function H1(t,e,n){if((e=me(e))instanceof Po)return e._internalPath;if(typeof e=="string")return vx(t,e);throw Ag("Field path arguments must be of type string or ",t,!1,void 0,n)}const VX=new RegExp("[~\\*/\\[\\]]");function vx(t,e,n){if(e.search(VX)>=0)throw Ag(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Po(...e.split("."))._internalPath}catch{throw Ag(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ag(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new re(Q.INVALID_ARGUMENT,a+t+l)}function O$(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Rt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new BX(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Sv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class BX extends Vh{data(){return super.data()}}function Sv(t,e){return typeof e=="string"?vx(t,e):e instanceof Po?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L$(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new re(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _x{}class qf extends _x{}function zs(t,e,...n){let r=[];e instanceof _x&&r.push(e),r=r.concat(n),function(i){const s=i.filter(a=>a instanceof wx).length,o=i.filter(a=>a instanceof Ev).length;if(s>1||s>0&&o>0)throw new re(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Ev extends qf{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ev(e,n,r)}_apply(e){const n=this._parse(e);return $$(e._query,n),new Mn(e.firestore,e.converter,D1(e._query,n))}_parse(e){const n=Tl(e.firestore);return function(i,s,o,a,l,c,u){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new re(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){xA(u,c);const h=[];for(const f of u)h.push(EA(a,i,f));d={arrayValue:{values:h}}}else d=EA(a,i,u)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||xA(u,c),d=N$(o,s,u,c==="in"||c==="not-in");return at.create(l,c,d)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function zX(t,e,n){const r=e,i=Sv("where",t);return Ev._create(i,r,n)}class wx extends _x{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new wx(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:bt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let s=r;const o=i.getFlattenedFilters();for(const a of o)$$(s,a),s=D1(s,a)}(e._query,n),new Mn(e.firestore,e.converter,D1(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class bx extends qf{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new bx(e,n)}_apply(e){const n=function(r,i,s){if(r.startAt!==null)throw new re(Q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new re(Q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new vc(i,s);return function(a,l){if(DE(a)===null){const c=lv(a);c!==null&&F$(a,c,l.field)}}(r,o),o}(e._query,this._field,this._direction);return new Mn(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new Ds(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function WX(t,e="asc"){const n=e,r=Sv("orderBy",t);return bx._create(r,n)}class xv extends qf{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new xv(e,n,r)}_apply(e){return new Mn(e.firestore,e.converter,bg(e._query,this._limit,this._limitType))}}function HX(t){return b$("limit",t),xv._create("limit",t,"F")}function GX(t){return b$("limitToLast",t),xv._create("limitToLast",t,"L")}class Tv extends qf{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Tv(e,n,r)}_apply(e){const n=M$(e,this.type,this._docOrFields,this._inclusive);return new Mn(e.firestore,e.converter,function(r,i){return new Ds(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)}(e._query,n))}}function qX(...t){return Tv._create("startAt",t,!0)}function KX(...t){return Tv._create("startAfter",t,!1)}class Iv extends qf{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Iv(e,n,r)}_apply(e){const n=M$(e,this.type,this._docOrFields,this._inclusive);return new Mn(e.firestore,e.converter,function(r,i){return new Ds(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)}(e._query,n))}}function QX(...t){return Iv._create("endBefore",t,!1)}function YX(...t){return Iv._create("endAt",t,!0)}function M$(t,e,n,r){if(n[0]=me(n[0]),n[0]instanceof Vh)return function(i,s,o,a,l){if(!a)throw new re(Q.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const c=[];for(const u of Da(i))if(u.field.isKeyField())c.push(Ja(s,a.key));else{const d=a.data.field(u.field);if(NE(d))throw new re(Q.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(d===null){const h=u.field.canonicalString();throw new re(Q.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${h}' (used as the orderBy) does not exist.`)}c.push(d)}return new Ro(c,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Tl(t.firestore);return function(s,o,a,l,c,u){const d=s.explicitOrderBy;if(c.length>d.length)throw new re(Q.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const h=[];for(let f=0;f<c.length;f++){const p=c[f];if(d[f].field.isKeyField()){if(typeof p!="string")throw new re(Q.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof p}`);if(!OE(s)&&p.indexOf("/")!==-1)throw new re(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${p}' contains a slash.`);const y=s.path.child(ot.fromString(p));if(!fe.isDocumentKey(y))throw new re(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${y}' is not because it contains an odd number of segments.`);const w=new fe(y);h.push(Ja(o,w))}else{const y=N$(a,l,p);h.push(y)}}return new Ro(h,u)}(t._query,t.firestore._databaseId,i,e,n,r)}}function EA(t,e,n){if(typeof(n=me(n))=="string"){if(n==="")throw new re(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!OE(e)&&n.indexOf("/")!==-1)throw new re(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ot.fromString(n));if(!fe.isDocumentKey(r))throw new re(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ja(t,new fe(r))}if(n instanceof Rt)return Ja(t,n._key);throw new re(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vv(n)}.`)}function xA(t,e){if(!Array.isArray(t)||t.length===0)throw new re(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $$(t,e){if(e.isInequality()){const r=lv(t),i=e.field;if(r!==null&&!r.isEqual(i))throw new re(Q.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=DE(t);s!==null&&F$(t,i,s)}const n=function(r,i){for(const s of r)for(const o of s.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new re(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new re(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function F$(t,e,n){if(!n.isEqual(e))throw new re(Q.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class Sx{convertValue(e,n="none"){switch(Xa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ya(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Se()}}convertObject(e,n){const r={};return El(e.fields,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new _v(Gt(e.latitude),Gt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=U2(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Oh(e));default:return null}}convertTimestamp(e){const n=ko(e);return new Ft(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ot.fromString(e);Ae(CM(r));const i=new Co(r.get(1),r.get(3)),s=new fe(r.popFirst(5));return i.isEqual(n)||Yt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class XX extends Sx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ki(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Rt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ts extends Vh{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Hd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Sv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Hd extends Ts{data(e={}){return super.data(e)}}class Do{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new xa(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Hd(this._firestore,this._userDataWriter,r.key,r,new xa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new re(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>{const a=new Hd(r._firestore,r._userDataWriter,o.doc.key,o.doc,new xa(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const a=new Hd(r._firestore,r._userDataWriter,o.doc.key,o.doc,new xa(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let l=-1,c=-1;return o.type!==0&&(l=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),c=s.indexOf(o.doc.key)),{type:JX(o.type),doc:a,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function JX(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se()}}function U$(t,e){return t instanceof Ts&&e instanceof Ts?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Do&&e instanceof Do&&t._firestore===e._firestore&&x$(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xc(t){t=ct(t,Rt);const e=ct(t.firestore,Kt);return v$(In(e),t._key).then(n=>Ex(e,t,n))}class Cl extends Sx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ki(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Rt(this.firestore,null,n)}}function ZX(t){t=ct(t,Rt);const e=ct(t.firestore,Kt),n=In(e),r=new Cl(e);return yX(n,t._key).then(i=>new Ts(e,r,t._key,i,new xa(i!==null&&i.hasLocalMutations,!0),t.converter))}function eJ(t){t=ct(t,Rt);const e=ct(t.firestore,Kt);return v$(In(e),t._key,{source:"server"}).then(n=>Ex(e,t,n))}function tJ(t){t=ct(t,Mn);const e=ct(t.firestore,Kt),n=In(e),r=new Cl(e);return L$(t._query),_$(n,t._query).then(i=>new Do(e,r,t,i))}function nJ(t){t=ct(t,Mn);const e=ct(t.firestore,Kt),n=In(e),r=new Cl(e);return vX(n,t._query).then(i=>new Do(e,r,t,i))}function rJ(t){t=ct(t,Mn);const e=ct(t.firestore,Kt),n=In(e),r=new Cl(e);return _$(n,t._query,{source:"server"}).then(i=>new Do(e,r,t,i))}function TA(t,e,n){t=ct(t,Rt);const r=ct(t.firestore,Kt),i=Cv(t.converter,e,n);return Qf(r,[bv(Tl(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Mt.none())])}function Oo(t,e,n,...r){t=ct(t,Rt);const i=ct(t.firestore,Kt),s=Tl(i);let o;return o=typeof(e=me(e))=="string"||e instanceof Po?gx(s,"updateDoc",t._key,e,n,r):mx(s,"updateDoc",t._key,e),Qf(i,[o.toMutation(t._key,Mt.exists(!0))])}function j$(t){return Qf(ct(t.firestore,Kt),[new bu(t._key,Mt.none())])}function iJ(t,e){const n=ct(t.firestore,Kt),r=qi(t),i=Cv(t.converter,e);return Qf(n,[bv(Tl(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Mt.exists(!1))]).then(()=>r)}function Kf(t,...e){var n,r,i;t=me(t);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||W1(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(W1(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let l,c,u;if(t instanceof Rt)c=ct(t.firestore,Kt),u=_u(t._key.path),l={next:d=>{e[o]&&e[o](Ex(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=ct(t,Mn);c=ct(d.firestore,Kt),u=d._query;const h=new Cl(c);l={next:f=>{e[o]&&e[o](new Do(c,h,d,f))},error:e[o+1],complete:e[o+2]},L$(t._query)}return function(d,h,f,p){const y=new gv(p),w=new nx(h,y,f);return d.asyncQueue.enqueueAndForget(async()=>ZE(await Yc(d),w)),()=>{y.Pc(),d.asyncQueue.enqueueAndForget(async()=>ex(await Yc(d),w))}}(In(c),u,a,l)}function sJ(t,e){return _X(In(t=ct(t,Kt)),W1(e)?e:{next:e})}function Qf(t,e){return function(n,r){const i=new wn;return n.asyncQueue.enqueueAndForget(async()=>qY(await hx(n),r,i)),i.promise}(In(t),e)}function Ex(t,e,n){const r=n.docs.get(e._key),i=new Cl(t);return new Ts(t,i,e._key,r,new xa(n.hasPendingWrites,n.fromCache),e.converter)}const oJ={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aJ{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Tl(e)}set(e,n,r){this._verifyNotCommitted();const i=Xs(e,this._firestore),s=Cv(i.converter,n,r),o=bv(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Mt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Xs(e,this._firestore);let o;return o=typeof(n=me(n))=="string"||n instanceof Po?gx(this._dataReader,"WriteBatch.update",s._key,n,r,i):mx(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Mt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Xs(e,this._firestore);return this._mutations=this._mutations.concat(new bu(n._key,Mt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new re(Q.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Xs(t,e){if((t=me(t)).firestore!==e)throw new re(Q.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lJ extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Tl(e)}get(e){const n=Xs(e,this._firestore),r=new XX(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return Se();const s=i[0];if(s.isFoundDocument())return new Vh(this._firestore,r,s.key,s,n.converter);if(s.isNoDocument())return new Vh(this._firestore,r,n._key,null,n.converter);throw Se()})}set(e,n,r){const i=Xs(e,this._firestore),s=Cv(i.converter,n,r),o=bv(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,o),this}update(e,n,r,...i){const s=Xs(e,this._firestore);let o;return o=typeof(n=me(n))=="string"||n instanceof Po?gx(this._dataReader,"Transaction.update",s._key,n,r,i):mx(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,o),this}delete(e){const n=Xs(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Xs(e,this._firestore),r=new Cl(this._firestore);return super.get(e).then(i=>new Ts(this._firestore,r,n._key,i._document,new xa(!1,!1),n.converter))}}function cJ(t,e,n){t=ct(t,Kt);const r=Object.assign(Object.assign({},oJ),n);return function(i){if(i.maxAttempts<1)throw new re(Q.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,s,o){const a=new wn;return i.asyncQueue.enqueueAndForget(async()=>{const l=await pX(i);new hX(i.asyncQueue,l,o,s,a).run()}),a.promise}(In(t),i=>e(new lJ(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uJ(){return new Gf("deleteField")}function dJ(){return new px("serverTimestamp")}function hJ(...t){return new FX("arrayUnion",t)}function fJ(...t){return new UX("arrayRemove",t)}function V$(t){return new jX("increment",t)}(function(t,e=!0){(function(n){vu=n})(Ps),Hi(new sr("firestore",(n,{instanceIdentifier:r,options:i})=>{const s=n.getProvider("app").getImmediate(),o=new Kt(new x7(n.getProvider("auth-internal")),new k7(n.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new re(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Co(a.options.projectId,l)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Er(Ek,"3.8.4",t),Er(Ek,"3.8.4","esm2017")})();var Bh={},pJ={get exports(){return Bh},set exports(t){Bh=t}},gt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cn=typeof Symbol=="function"&&Symbol.for,xx=Cn?Symbol.for("react.element"):60103,Tx=Cn?Symbol.for("react.portal"):60106,kv=Cn?Symbol.for("react.fragment"):60107,Av=Cn?Symbol.for("react.strict_mode"):60108,Rv=Cn?Symbol.for("react.profiler"):60114,Nv=Cn?Symbol.for("react.provider"):60109,Pv=Cn?Symbol.for("react.context"):60110,Ix=Cn?Symbol.for("react.async_mode"):60111,Dv=Cn?Symbol.for("react.concurrent_mode"):60111,Ov=Cn?Symbol.for("react.forward_ref"):60112,Lv=Cn?Symbol.for("react.suspense"):60113,mJ=Cn?Symbol.for("react.suspense_list"):60120,Mv=Cn?Symbol.for("react.memo"):60115,$v=Cn?Symbol.for("react.lazy"):60116,gJ=Cn?Symbol.for("react.block"):60121,yJ=Cn?Symbol.for("react.fundamental"):60117,vJ=Cn?Symbol.for("react.responder"):60118,_J=Cn?Symbol.for("react.scope"):60119;function zr(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case xx:switch(t=t.type,t){case Ix:case Dv:case kv:case Rv:case Av:case Lv:return t;default:switch(t=t&&t.$$typeof,t){case Pv:case Ov:case $v:case Mv:case Nv:return t;default:return e}}case Tx:return e}}}function B$(t){return zr(t)===Dv}gt.AsyncMode=Ix;gt.ConcurrentMode=Dv;gt.ContextConsumer=Pv;gt.ContextProvider=Nv;gt.Element=xx;gt.ForwardRef=Ov;gt.Fragment=kv;gt.Lazy=$v;gt.Memo=Mv;gt.Portal=Tx;gt.Profiler=Rv;gt.StrictMode=Av;gt.Suspense=Lv;gt.isAsyncMode=function(t){return B$(t)||zr(t)===Ix};gt.isConcurrentMode=B$;gt.isContextConsumer=function(t){return zr(t)===Pv};gt.isContextProvider=function(t){return zr(t)===Nv};gt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===xx};gt.isForwardRef=function(t){return zr(t)===Ov};gt.isFragment=function(t){return zr(t)===kv};gt.isLazy=function(t){return zr(t)===$v};gt.isMemo=function(t){return zr(t)===Mv};gt.isPortal=function(t){return zr(t)===Tx};gt.isProfiler=function(t){return zr(t)===Rv};gt.isStrictMode=function(t){return zr(t)===Av};gt.isSuspense=function(t){return zr(t)===Lv};gt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===kv||t===Dv||t===Rv||t===Av||t===Lv||t===mJ||typeof t=="object"&&t!==null&&(t.$$typeof===$v||t.$$typeof===Mv||t.$$typeof===Nv||t.$$typeof===Pv||t.$$typeof===Ov||t.$$typeof===yJ||t.$$typeof===vJ||t.$$typeof===_J||t.$$typeof===gJ)};gt.typeOf=zr;(function(t){t.exports=gt})(pJ);var wJ=function(e,n,r,i){var s=r?r.call(i,e,n):void 0;if(s!==void 0)return!!s;if(e===n)return!0;if(typeof e!="object"||!e||typeof n!="object"||!n)return!1;var o=Object.keys(e),a=Object.keys(n);if(o.length!==a.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(n),c=0;c<o.length;c++){var u=o[c];if(!l(u))return!1;var d=e[u],h=n[u];if(s=r?r.call(i,d,h,u):void 0,s===!1||s===void 0&&d!==h)return!1}return!0};function bJ(t){function e(P,F,L,j,M){for(var ne=0,G=0,te=0,de=0,ye,oe,De=0,He=0,Ee,Me=Ee=ye=0,ve=0,Le=0,ft=0,qe=0,ut=L.length,Pt=ut-1,et,pe="",Ge="",K="",Y="",X;ve<ut;){if(oe=L.charCodeAt(ve),ve===Pt&&G+de+te+ne!==0&&(G!==0&&(oe=G===47?10:47),de=te=ne=0,ut++,Pt++),G+de+te+ne===0){if(ve===Pt&&(0<Le&&(pe=pe.replace(h,"")),0<pe.trim().length)){switch(oe){case 32:case 9:case 59:case 13:case 10:break;default:pe+=L.charAt(ve)}oe=59}switch(oe){case 123:for(pe=pe.trim(),ye=pe.charCodeAt(0),Ee=1,qe=++ve;ve<ut;){switch(oe=L.charCodeAt(ve)){case 123:Ee++;break;case 125:Ee--;break;case 47:switch(oe=L.charCodeAt(ve+1)){case 42:case 47:e:{for(Me=ve+1;Me<Pt;++Me)switch(L.charCodeAt(Me)){case 47:if(oe===42&&L.charCodeAt(Me-1)===42&&ve+2!==Me){ve=Me+1;break e}break;case 10:if(oe===47){ve=Me+1;break e}}ve=Me}}break;case 91:oe++;case 40:oe++;case 34:case 39:for(;ve++<Pt&&L.charCodeAt(ve)!==oe;);}if(Ee===0)break;ve++}switch(Ee=L.substring(qe,ve),ye===0&&(ye=(pe=pe.replace(d,"").trim()).charCodeAt(0)),ye){case 64:switch(0<Le&&(pe=pe.replace(h,"")),oe=pe.charCodeAt(1),oe){case 100:case 109:case 115:case 45:Le=F;break;default:Le=R}if(Ee=e(F,Le,Ee,oe,M+1),qe=Ee.length,0<U&&(Le=n(R,pe,ft),X=a(3,Ee,Le,F,A,k,qe,oe,M,j),pe=Le.join(""),X!==void 0&&(qe=(Ee=X.trim()).length)===0&&(oe=0,Ee="")),0<qe)switch(oe){case 115:pe=pe.replace(E,o);case 100:case 109:case 45:Ee=pe+"{"+Ee+"}";break;case 107:pe=pe.replace(g,"$1 $2"),Ee=pe+"{"+Ee+"}",Ee=B===1||B===2&&s("@"+Ee,3)?"@-webkit-"+Ee+"@"+Ee:"@"+Ee;break;default:Ee=pe+Ee,j===112&&(Ee=(Ge+=Ee,""))}else Ee="";break;default:Ee=e(F,n(F,pe,ft),Ee,j,M+1)}K+=Ee,Ee=ft=Le=Me=ye=0,pe="",oe=L.charCodeAt(++ve);break;case 125:case 59:if(pe=(0<Le?pe.replace(h,""):pe).trim(),1<(qe=pe.length))switch(Me===0&&(ye=pe.charCodeAt(0),ye===45||96<ye&&123>ye)&&(qe=(pe=pe.replace(" ",":")).length),0<U&&(X=a(1,pe,F,P,A,k,Ge.length,j,M,j))!==void 0&&(qe=(pe=X.trim()).length)===0&&(pe="\0\0"),ye=pe.charCodeAt(0),oe=pe.charCodeAt(1),ye){case 0:break;case 64:if(oe===105||oe===99){Y+=pe+L.charAt(ve);break}default:pe.charCodeAt(qe-1)!==58&&(Ge+=i(pe,ye,oe,pe.charCodeAt(2)))}ft=Le=Me=ye=0,pe="",oe=L.charCodeAt(++ve)}}switch(oe){case 13:case 10:G===47?G=0:1+ye===0&&j!==107&&0<pe.length&&(Le=1,pe+="\0"),0<U*z&&a(0,pe,F,P,A,k,Ge.length,j,M,j),k=1,A++;break;case 59:case 125:if(G+de+te+ne===0){k++;break}default:switch(k++,et=L.charAt(ve),oe){case 9:case 32:if(de+ne+G===0)switch(De){case 44:case 58:case 9:case 32:et="";break;default:oe!==32&&(et=" ")}break;case 0:et="\\0";break;case 12:et="\\f";break;case 11:et="\\v";break;case 38:de+G+ne===0&&(Le=ft=1,et="\f"+et);break;case 108:if(de+G+ne+N===0&&0<Me)switch(ve-Me){case 2:De===112&&L.charCodeAt(ve-3)===58&&(N=De);case 8:He===111&&(N=He)}break;case 58:de+G+ne===0&&(Me=ve);break;case 44:G+te+de+ne===0&&(Le=1,et+="\r");break;case 34:case 39:G===0&&(de=de===oe?0:de===0?oe:de);break;case 91:de+G+te===0&&ne++;break;case 93:de+G+te===0&&ne--;break;case 41:de+G+ne===0&&te--;break;case 40:if(de+G+ne===0){if(ye===0)switch(2*De+3*He){case 533:break;default:ye=1}te++}break;case 64:G+te+de+ne+Me+Ee===0&&(Ee=1);break;case 42:case 47:if(!(0<de+ne+te))switch(G){case 0:switch(2*oe+3*L.charCodeAt(ve+1)){case 235:G=47;break;case 220:qe=ve,G=42}break;case 42:oe===47&&De===42&&qe+2!==ve&&(L.charCodeAt(qe+2)===33&&(Ge+=L.substring(qe,ve+1)),et="",G=0)}}G===0&&(pe+=et)}He=De,De=oe,ve++}if(qe=Ge.length,0<qe){if(Le=F,0<U&&(X=a(2,Ge,Le,P,A,k,qe,j,M,j),X!==void 0&&(Ge=X).length===0))return Y+Ge+K;if(Ge=Le.join(",")+"{"+Ge+"}",B*N!==0){switch(B!==2||s(Ge,2)||(N=0),N){case 111:Ge=Ge.replace(b,":-moz-$1")+Ge;break;case 112:Ge=Ge.replace(_,"::-webkit-input-$1")+Ge.replace(_,"::-moz-$1")+Ge.replace(_,":-ms-input-$1")+Ge}N=0}}return Y+Ge+K}function n(P,F,L){var j=F.trim().split(w);F=j;var M=j.length,ne=P.length;switch(ne){case 0:case 1:var G=0;for(P=ne===0?"":P[0]+" ";G<M;++G)F[G]=r(P,F[G],L).trim();break;default:var te=G=0;for(F=[];G<M;++G)for(var de=0;de<ne;++de)F[te++]=r(P[de]+" ",j[G],L).trim()}return F}function r(P,F,L){var j=F.charCodeAt(0);switch(33>j&&(j=(F=F.trim()).charCodeAt(0)),j){case 38:return F.replace(m,"$1"+P.trim());case 58:return P.trim()+F.replace(m,"$1"+P.trim());default:if(0<1*L&&0<F.indexOf("\f"))return F.replace(m,(P.charCodeAt(0)===58?"":"$1")+P.trim())}return P+F}function i(P,F,L,j){var M=P+";",ne=2*F+3*L+4*j;if(ne===944){P=M.indexOf(":",9)+1;var G=M.substring(P,M.length-1).trim();return G=M.substring(0,P).trim()+G+";",B===1||B===2&&s(G,1)?"-webkit-"+G+G:G}if(B===0||B===2&&!s(M,1))return M;switch(ne){case 1015:return M.charCodeAt(10)===97?"-webkit-"+M+M:M;case 951:return M.charCodeAt(3)===116?"-webkit-"+M+M:M;case 963:return M.charCodeAt(5)===110?"-webkit-"+M+M:M;case 1009:if(M.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+M+M;case 978:return"-webkit-"+M+"-moz-"+M+M;case 1019:case 983:return"-webkit-"+M+"-moz-"+M+"-ms-"+M+M;case 883:if(M.charCodeAt(8)===45)return"-webkit-"+M+M;if(0<M.indexOf("image-set(",11))return M.replace(C,"$1-webkit-$2")+M;break;case 932:if(M.charCodeAt(4)===45)switch(M.charCodeAt(5)){case 103:return"-webkit-box-"+M.replace("-grow","")+"-webkit-"+M+"-ms-"+M.replace("grow","positive")+M;case 115:return"-webkit-"+M+"-ms-"+M.replace("shrink","negative")+M;case 98:return"-webkit-"+M+"-ms-"+M.replace("basis","preferred-size")+M}return"-webkit-"+M+"-ms-"+M+M;case 964:return"-webkit-"+M+"-ms-flex-"+M+M;case 1023:if(M.charCodeAt(8)!==99)break;return G=M.substring(M.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+G+"-webkit-"+M+"-ms-flex-pack"+G+M;case 1005:return p.test(M)?M.replace(f,":-webkit-")+M.replace(f,":-moz-")+M:M;case 1e3:switch(G=M.substring(13).trim(),F=G.indexOf("-")+1,G.charCodeAt(0)+G.charCodeAt(F)){case 226:G=M.replace(x,"tb");break;case 232:G=M.replace(x,"tb-rl");break;case 220:G=M.replace(x,"lr");break;default:return M}return"-webkit-"+M+"-ms-"+G+M;case 1017:if(M.indexOf("sticky",9)===-1)break;case 975:switch(F=(M=P).length-10,G=(M.charCodeAt(F)===33?M.substring(0,F):M).substring(P.indexOf(":",7)+1).trim(),ne=G.charCodeAt(0)+(G.charCodeAt(7)|0)){case 203:if(111>G.charCodeAt(8))break;case 115:M=M.replace(G,"-webkit-"+G)+";"+M;break;case 207:case 102:M=M.replace(G,"-webkit-"+(102<ne?"inline-":"")+"box")+";"+M.replace(G,"-webkit-"+G)+";"+M.replace(G,"-ms-"+G+"box")+";"+M}return M+";";case 938:if(M.charCodeAt(5)===45)switch(M.charCodeAt(6)){case 105:return G=M.replace("-items",""),"-webkit-"+M+"-webkit-box-"+G+"-ms-flex-"+G+M;case 115:return"-webkit-"+M+"-ms-flex-item-"+M.replace(S,"")+M;default:return"-webkit-"+M+"-ms-flex-line-pack"+M.replace("align-content","").replace(S,"")+M}break;case 973:case 989:if(M.charCodeAt(3)!==45||M.charCodeAt(4)===122)break;case 931:case 953:if(O.test(P)===!0)return(G=P.substring(P.indexOf(":")+1)).charCodeAt(0)===115?i(P.replace("stretch","fill-available"),F,L,j).replace(":fill-available",":stretch"):M.replace(G,"-webkit-"+G)+M.replace(G,"-moz-"+G.replace("fill-",""))+M;break;case 962:if(M="-webkit-"+M+(M.charCodeAt(5)===102?"-ms-"+M:"")+M,L+j===211&&M.charCodeAt(13)===105&&0<M.indexOf("transform",10))return M.substring(0,M.indexOf(";",27)+1).replace(y,"$1-webkit-$2")+M}return M}function s(P,F){var L=P.indexOf(F===1?":":"{"),j=P.substring(0,F!==3?L:10);return L=P.substring(L+1,P.length-1),$(F!==2?j:j.replace(T,"$1"),L,F)}function o(P,F){var L=i(F,F.charCodeAt(0),F.charCodeAt(1),F.charCodeAt(2));return L!==F+";"?L.replace(D," or ($1)").substring(4):"("+F+")"}function a(P,F,L,j,M,ne,G,te,de,ye){for(var oe=0,De=F,He;oe<U;++oe)switch(He=I[oe].call(u,P,De,L,j,M,ne,G,te,de,ye)){case void 0:case!1:case!0:case null:break;default:De=He}if(De!==F)return De}function l(P){switch(P){case void 0:case null:U=I.length=0;break;default:if(typeof P=="function")I[U++]=P;else if(typeof P=="object")for(var F=0,L=P.length;F<L;++F)l(P[F]);else z=!!P|0}return l}function c(P){return P=P.prefix,P!==void 0&&($=null,P?typeof P!="function"?B=1:(B=2,$=P):B=0),c}function u(P,F){var L=P;if(33>L.charCodeAt(0)&&(L=L.trim()),J=L,L=[J],0<U){var j=a(-1,F,L,L,A,k,0,0,0,0);j!==void 0&&typeof j=="string"&&(F=j)}var M=e(R,L,F,0,0);return 0<U&&(j=a(-2,M,L,L,A,k,M.length,0,0,0),j!==void 0&&(M=j)),J="",N=0,k=A=1,M}var d=/^\0+/g,h=/[\0\r\f]/g,f=/: */g,p=/zoo|gra/,y=/([,: ])(transform)/g,w=/,\r+?/g,m=/([\t\r\n ])*\f?&/g,g=/@(k\w+)\s*(\S*)\s*/,_=/::(place)/g,b=/:(read-only)/g,x=/[svh]\w+-[tblr]{2}/,E=/\(\s*(.*)\s*\)/g,D=/([\s\S]*?);/g,S=/-self|flex-/g,T=/[^]*?(:[rp][el]a[\w-]+)[^]*/,O=/stretch|:\s*\w+\-(?:conte|avail)/,C=/([^-])(image-set\()/,k=1,A=1,N=0,B=1,R=[],I=[],U=0,$=null,z=0,J="";return u.use=l,u.set=c,t!==void 0&&c(t),u}var SJ={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function EJ(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var xJ=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,IA=EJ(function(t){return xJ.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),Cx=Bh,TJ={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},IJ={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},CJ={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},z$={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},kx={};kx[Cx.ForwardRef]=CJ;kx[Cx.Memo]=z$;function CA(t){return Cx.isMemo(t)?z$:kx[t.$$typeof]||TJ}var kJ=Object.defineProperty,AJ=Object.getOwnPropertyNames,kA=Object.getOwnPropertySymbols,RJ=Object.getOwnPropertyDescriptor,NJ=Object.getPrototypeOf,AA=Object.prototype;function W$(t,e,n){if(typeof e!="string"){if(AA){var r=NJ(e);r&&r!==AA&&W$(t,r,n)}var i=AJ(e);kA&&(i=i.concat(kA(e)));for(var s=CA(t),o=CA(e),a=0;a<i.length;++a){var l=i[a];if(!IJ[l]&&!(n&&n[l])&&!(o&&o[l])&&!(s&&s[l])){var c=RJ(e,l);try{kJ(t,l,c)}catch{}}}}return t}var H$=W$;function Nr(){return(Nr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var RA=function(t,e){for(var n=[t[0]],r=0,i=e.length;r<i;r+=1)n.push(e[r],t[r+1]);return n},G1=function(t){return t!==null&&typeof t=="object"&&(t.toString?t.toString():Object.prototype.toString.call(t))==="[object Object]"&&!Bh.typeOf(t)},Rg=Object.freeze([]),vo=Object.freeze({});function Jc(t){return typeof t=="function"}function q1(t){return t.displayName||t.name||"Component"}function Fv(t){return t&&typeof t.styledComponentId=="string"}var Lo=typeof process<"u"&&process.env!==void 0&&({}.REACT_APP_SC_ATTR||{}.SC_ATTR)||"data-styled",PJ="5.3.9",Ax=typeof window<"u"&&"HTMLElement"in window,DJ=Boolean(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&process.env!==void 0&&({}.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==""?{}.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&{}.REACT_APP_SC_DISABLE_SPEEDY:{}.SC_DISABLE_SPEEDY!==void 0&&{}.SC_DISABLE_SPEEDY!==""?{}.SC_DISABLE_SPEEDY!=="false"&&{}.SC_DISABLE_SPEEDY:!1)),OJ={};function pi(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+t+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var LJ=function(){function t(n){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=n}var e=t.prototype;return e.indexOfGroup=function(n){for(var r=0,i=0;i<n;i++)r+=this.groupSizes[i];return r},e.insertRules=function(n,r){if(n>=this.groupSizes.length){for(var i=this.groupSizes,s=i.length,o=s;n>=o;)(o<<=1)<0&&pi(16,""+n);this.groupSizes=new Uint32Array(o),this.groupSizes.set(i),this.length=o;for(var a=s;a<o;a++)this.groupSizes[a]=0}for(var l=this.indexOfGroup(n+1),c=0,u=r.length;c<u;c++)this.tag.insertRule(l,r[c])&&(this.groupSizes[n]++,l++)},e.clearGroup=function(n){if(n<this.length){var r=this.groupSizes[n],i=this.indexOfGroup(n),s=i+r;this.groupSizes[n]=0;for(var o=i;o<s;o++)this.tag.deleteRule(i)}},e.getGroup=function(n){var r="";if(n>=this.length||this.groupSizes[n]===0)return r;for(var i=this.groupSizes[n],s=this.indexOfGroup(n),o=s+i,a=s;a<o;a++)r+=this.tag.getRule(a)+`/*!sc*/
`;return r},t}(),wm=new Map,Ng=new Map,Gd=1,Hp=function(t){if(wm.has(t))return wm.get(t);for(;Ng.has(Gd);)Gd++;var e=Gd++;return wm.set(t,e),Ng.set(e,t),e},MJ=function(t){return Ng.get(t)},$J=function(t,e){e>=Gd&&(Gd=e+1),wm.set(t,e),Ng.set(e,t)},FJ="style["+Lo+'][data-styled-version="5.3.9"]',UJ=new RegExp("^"+Lo+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),jJ=function(t,e,n){for(var r,i=n.split(","),s=0,o=i.length;s<o;s++)(r=i[s])&&t.registerName(e,r)},VJ=function(t,e){for(var n=(e.textContent||"").split(`/*!sc*/
`),r=[],i=0,s=n.length;i<s;i++){var o=n[i].trim();if(o){var a=o.match(UJ);if(a){var l=0|parseInt(a[1],10),c=a[2];l!==0&&($J(c,l),jJ(t,c,a[3]),t.getTag().insertRules(l,r)),r.length=0}else r.push(o)}}},K1=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null},G$=function(t){var e=document.head,n=t||e,r=document.createElement("style"),i=function(a){for(var l=a.childNodes,c=l.length;c>=0;c--){var u=l[c];if(u&&u.nodeType===1&&u.hasAttribute(Lo))return u}}(n),s=i!==void 0?i.nextSibling:null;r.setAttribute(Lo,"active"),r.setAttribute("data-styled-version","5.3.9");var o=K1();return o&&r.setAttribute("nonce",o),n.insertBefore(r,s),r},BJ=function(){function t(n){var r=this.element=G$(n);r.appendChild(document.createTextNode("")),this.sheet=function(i){if(i.sheet)return i.sheet;for(var s=document.styleSheets,o=0,a=s.length;o<a;o++){var l=s[o];if(l.ownerNode===i)return l}pi(17)}(r),this.length=0}var e=t.prototype;return e.insertRule=function(n,r){try{return this.sheet.insertRule(r,n),this.length++,!0}catch{return!1}},e.deleteRule=function(n){this.sheet.deleteRule(n),this.length--},e.getRule=function(n){var r=this.sheet.cssRules[n];return r!==void 0&&typeof r.cssText=="string"?r.cssText:""},t}(),zJ=function(){function t(n){var r=this.element=G$(n);this.nodes=r.childNodes,this.length=0}var e=t.prototype;return e.insertRule=function(n,r){if(n<=this.length&&n>=0){var i=document.createTextNode(r),s=this.nodes[n];return this.element.insertBefore(i,s||null),this.length++,!0}return!1},e.deleteRule=function(n){this.element.removeChild(this.nodes[n]),this.length--},e.getRule=function(n){return n<this.length?this.nodes[n].textContent:""},t}(),WJ=function(){function t(n){this.rules=[],this.length=0}var e=t.prototype;return e.insertRule=function(n,r){return n<=this.length&&(this.rules.splice(n,0,r),this.length++,!0)},e.deleteRule=function(n){this.rules.splice(n,1),this.length--},e.getRule=function(n){return n<this.length?this.rules[n]:""},t}(),NA=Ax,HJ={isServer:!Ax,useCSSOMInjection:!DJ},Zc=function(){function t(n,r,i){n===void 0&&(n=vo),r===void 0&&(r={}),this.options=Nr({},HJ,{},n),this.gs=r,this.names=new Map(i),this.server=!!n.isServer,!this.server&&Ax&&NA&&(NA=!1,function(s){for(var o=document.querySelectorAll(FJ),a=0,l=o.length;a<l;a++){var c=o[a];c&&c.getAttribute(Lo)!=="active"&&(VJ(s,c),c.parentNode&&c.parentNode.removeChild(c))}}(this))}t.registerId=function(n){return Hp(n)};var e=t.prototype;return e.reconstructWithOptions=function(n,r){return r===void 0&&(r=!0),new t(Nr({},this.options,{},n),this.gs,r&&this.names||void 0)},e.allocateGSInstance=function(n){return this.gs[n]=(this.gs[n]||0)+1},e.getTag=function(){return this.tag||(this.tag=(i=(r=this.options).isServer,s=r.useCSSOMInjection,o=r.target,n=i?new WJ(o):s?new BJ(o):new zJ(o),new LJ(n)));var n,r,i,s,o},e.hasNameForId=function(n,r){return this.names.has(n)&&this.names.get(n).has(r)},e.registerName=function(n,r){if(Hp(n),this.names.has(n))this.names.get(n).add(r);else{var i=new Set;i.add(r),this.names.set(n,i)}},e.insertRules=function(n,r,i){this.registerName(n,r),this.getTag().insertRules(Hp(n),i)},e.clearNames=function(n){this.names.has(n)&&this.names.get(n).clear()},e.clearRules=function(n){this.getTag().clearGroup(Hp(n)),this.clearNames(n)},e.clearTag=function(){this.tag=void 0},e.toString=function(){return function(n){for(var r=n.getTag(),i=r.length,s="",o=0;o<i;o++){var a=MJ(o);if(a!==void 0){var l=n.names.get(a),c=r.getGroup(o);if(l&&c&&l.size){var u=Lo+".g"+o+'[id="'+a+'"]',d="";l!==void 0&&l.forEach(function(h){h.length>0&&(d+=h+",")}),s+=""+c+u+'{content:"'+d+`"}/*!sc*/
`}}}return s}(this)},t}(),GJ=/(a)(d)/gi,PA=function(t){return String.fromCharCode(t+(t>25?39:97))};function Q1(t){var e,n="";for(e=Math.abs(t);e>52;e=e/52|0)n=PA(e%52)+n;return(PA(e%52)+n).replace(GJ,"$1-$2")}var lc=function(t,e){for(var n=e.length;n;)t=33*t^e.charCodeAt(--n);return t},q$=function(t){return lc(5381,t)};function K$(t){for(var e=0;e<t.length;e+=1){var n=t[e];if(Jc(n)&&!Fv(n))return!1}return!0}var qJ=q$("5.3.9"),KJ=function(){function t(e,n,r){this.rules=e,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&K$(e),this.componentId=n,this.baseHash=lc(qJ,n),this.baseStyle=r,Zc.registerId(n)}return t.prototype.generateAndInjectStyles=function(e,n,r){var i=this.componentId,s=[];if(this.baseStyle&&s.push(this.baseStyle.generateAndInjectStyles(e,n,r)),this.isStatic&&!r.hash)if(this.staticRulesId&&n.hasNameForId(i,this.staticRulesId))s.push(this.staticRulesId);else{var o=sl(this.rules,e,n,r).join(""),a=Q1(lc(this.baseHash,o)>>>0);if(!n.hasNameForId(i,a)){var l=r(o,"."+a,void 0,i);n.insertRules(i,a,l)}s.push(a),this.staticRulesId=a}else{for(var c=this.rules.length,u=lc(this.baseHash,r.hash),d="",h=0;h<c;h++){var f=this.rules[h];if(typeof f=="string")d+=f;else if(f){var p=sl(f,e,n,r),y=Array.isArray(p)?p.join(""):p;u=lc(u,y+h),d+=y}}if(d){var w=Q1(u>>>0);if(!n.hasNameForId(i,w)){var m=r(d,"."+w,void 0,i);n.insertRules(i,w,m)}s.push(w)}}return s.join(" ")},t}(),QJ=/^\s*\/\/.*$/gm,YJ=[":","[",".","#"];function Q$(t){var e,n,r,i,s=t===void 0?vo:t,o=s.options,a=o===void 0?vo:o,l=s.plugins,c=l===void 0?Rg:l,u=new bJ(a),d=[],h=function(y){function w(m){if(m)try{y(m+"}")}catch{}}return function(m,g,_,b,x,E,D,S,T,O){switch(m){case 1:if(T===0&&g.charCodeAt(0)===64)return y(g+";"),"";break;case 2:if(S===0)return g+"/*|*/";break;case 3:switch(S){case 102:case 112:return y(_[0]+g),"";default:return g+(O===0?"/*|*/":"")}case-2:g.split("/*|*/}").forEach(w)}}}(function(y){d.push(y)}),f=function(y,w,m){return w===0&&YJ.indexOf(m[n.length])!==-1||m.match(i)?y:"."+e};function p(y,w,m,g){g===void 0&&(g="&");var _=y.replace(QJ,""),b=w&&m?m+" "+w+" { "+_+" }":_;return e=g,n=w,r=new RegExp("\\"+n+"\\b","g"),i=new RegExp("(\\"+n+"\\b){2,}"),u(m||!w?"":w,b)}return u.use([].concat(c,[function(y,w,m){y===2&&m.length&&m[0].lastIndexOf(n)>0&&(m[0]=m[0].replace(r,f))},h,function(y){if(y===-2){var w=d;return d=[],w}}])),p.hash=c.length?c.reduce(function(y,w){return w.name||pi(15),lc(y,w.name)},5381).toString():"",p}var Uv=Pe.createContext(),XJ=Uv.Consumer,Rx=Pe.createContext(),Y$=(Rx.Consumer,new Zc),Y1=Q$();function Nx(){return H.useContext(Uv)||Y$}function X$(){return H.useContext(Rx)||Y1}function J$(t){var e=H.useState(t.stylisPlugins),n=e[0],r=e[1],i=Nx(),s=H.useMemo(function(){var a=i;return t.sheet?a=t.sheet:t.target&&(a=a.reconstructWithOptions({target:t.target},!1)),t.disableCSSOMInjection&&(a=a.reconstructWithOptions({useCSSOMInjection:!1})),a},[t.disableCSSOMInjection,t.sheet,t.target]),o=H.useMemo(function(){return Q$({options:{prefix:!t.disableVendorPrefixes},plugins:n})},[t.disableVendorPrefixes,n]);return H.useEffect(function(){wJ(n,t.stylisPlugins)||r(t.stylisPlugins)},[t.stylisPlugins]),Pe.createElement(Uv.Provider,{value:s},Pe.createElement(Rx.Provider,{value:o},t.children))}var Z$=function(){function t(e,n){var r=this;this.inject=function(i,s){s===void 0&&(s=Y1);var o=r.name+s.hash;i.hasNameForId(r.id,o)||i.insertRules(r.id,o,s(r.rules,o,"@keyframes"))},this.toString=function(){return pi(12,String(r.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=n}return t.prototype.getName=function(e){return e===void 0&&(e=Y1),this.name+e.hash},t}(),JJ=/([A-Z])/,ZJ=/([A-Z])/g,eZ=/^ms-/,tZ=function(t){return"-"+t.toLowerCase()};function DA(t){return JJ.test(t)?t.replace(ZJ,tZ).replace(eZ,"-ms-"):t}var OA=function(t){return t==null||t===!1||t===""};function sl(t,e,n,r){if(Array.isArray(t)){for(var i,s=[],o=0,a=t.length;o<a;o+=1)(i=sl(t[o],e,n,r))!==""&&(Array.isArray(i)?s.push.apply(s,i):s.push(i));return s}if(OA(t))return"";if(Fv(t))return"."+t.styledComponentId;if(Jc(t)){if(typeof(c=t)!="function"||c.prototype&&c.prototype.isReactComponent||!e)return t;var l=t(e);return sl(l,e,n,r)}var c;return t instanceof Z$?n?(t.inject(n,r),t.getName(r)):t:G1(t)?function u(d,h){var f,p,y=[];for(var w in d)d.hasOwnProperty(w)&&!OA(d[w])&&(Array.isArray(d[w])&&d[w].isCss||Jc(d[w])?y.push(DA(w)+":",d[w],";"):G1(d[w])?y.push.apply(y,u(d[w],w)):y.push(DA(w)+": "+(f=w,(p=d[w])==null||typeof p=="boolean"||p===""?"":typeof p!="number"||p===0||f in SJ?String(p).trim():p+"px")+";"));return h?[h+" {"].concat(y,["}"]):y}(t):t.toString()}var LA=function(t){return Array.isArray(t)&&(t.isCss=!0),t};function Mo(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Jc(t)||G1(t)?LA(sl(RA(Rg,[t].concat(n)))):n.length===0&&t.length===1&&typeof t[0]=="string"?t:LA(sl(RA(t,n)))}var Px=function(t,e,n){return n===void 0&&(n=vo),t.theme!==n.theme&&t.theme||e||n.theme},nZ=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,rZ=/(^-|-$)/g;function N0(t){return t.replace(nZ,"-").replace(rZ,"")}var Dx=function(t){return Q1(q$(t)>>>0)};function Gp(t){return typeof t=="string"&&!0}var X1=function(t){return typeof t=="function"||typeof t=="object"&&t!==null&&!Array.isArray(t)},iZ=function(t){return t!=="__proto__"&&t!=="constructor"&&t!=="prototype"};function sZ(t,e,n){var r=t[n];X1(e)&&X1(r)?eF(r,e):t[n]=e}function eF(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0,s=n;i<s.length;i++){var o=s[i];if(X1(o))for(var a in o)iZ(a)&&sZ(t,o[a],a)}return t}var $o=Pe.createContext(),oZ=$o.Consumer;function aZ(t){var e=H.useContext($o),n=H.useMemo(function(){return function(r,i){if(!r)return pi(14);if(Jc(r)){var s=r(i);return s}return Array.isArray(r)||typeof r!="object"?pi(8):i?Nr({},i,{},r):r}(t.theme,e)},[t.theme,e]);return t.children?Pe.createElement($o.Provider,{value:n},t.children):null}var P0={};function tF(t,e,n){var r=Fv(t),i=!Gp(t),s=e.attrs,o=s===void 0?Rg:s,a=e.componentId,l=a===void 0?function(g,_){var b=typeof g!="string"?"sc":N0(g);P0[b]=(P0[b]||0)+1;var x=b+"-"+Dx("5.3.9"+b+P0[b]);return _?_+"-"+x:x}(e.displayName,e.parentComponentId):a,c=e.displayName,u=c===void 0?function(g){return Gp(g)?"styled."+g:"Styled("+q1(g)+")"}(t):c,d=e.displayName&&e.componentId?N0(e.displayName)+"-"+e.componentId:e.componentId||l,h=r&&t.attrs?Array.prototype.concat(t.attrs,o).filter(Boolean):o,f=e.shouldForwardProp;r&&t.shouldForwardProp&&(f=e.shouldForwardProp?function(g,_,b){return t.shouldForwardProp(g,_,b)&&e.shouldForwardProp(g,_,b)}:t.shouldForwardProp);var p,y=new KJ(n,d,r?t.componentStyle:void 0),w=y.isStatic&&o.length===0,m=function(g,_){return function(b,x,E,D){var S=b.attrs,T=b.componentStyle,O=b.defaultProps,C=b.foldedComponentIds,k=b.shouldForwardProp,A=b.styledComponentId,N=b.target,B=function(j,M,ne){j===void 0&&(j=vo);var G=Nr({},M,{theme:j}),te={};return ne.forEach(function(de){var ye,oe,De,He=de;for(ye in Jc(He)&&(He=He(G)),He)G[ye]=te[ye]=ye==="className"?(oe=te[ye],De=He[ye],oe&&De?oe+" "+De:oe||De):He[ye]}),[G,te]}(Px(x,H.useContext($o),O)||vo,x,S),R=B[0],I=B[1],U=function(j,M,ne,G){var te=Nx(),de=X$(),ye=M?j.generateAndInjectStyles(vo,te,de):j.generateAndInjectStyles(ne,te,de);return ye}(T,D,R),$=E,z=I.$as||x.$as||I.as||x.as||N,J=Gp(z),P=I!==x?Nr({},x,{},I):x,F={};for(var L in P)L[0]!=="$"&&L!=="as"&&(L==="forwardedAs"?F.as=P[L]:(k?k(L,IA,z):!J||IA(L))&&(F[L]=P[L]));return x.style&&I.style!==x.style&&(F.style=Nr({},x.style,{},I.style)),F.className=Array.prototype.concat(C,A,U!==A?U:null,x.className,I.className).filter(Boolean).join(" "),F.ref=$,H.createElement(z,F)}(p,g,_,w)};return m.displayName=u,(p=Pe.forwardRef(m)).attrs=h,p.componentStyle=y,p.displayName=u,p.shouldForwardProp=f,p.foldedComponentIds=r?Array.prototype.concat(t.foldedComponentIds,t.styledComponentId):Rg,p.styledComponentId=d,p.target=r?t.target:t,p.withComponent=function(g){var _=e.componentId,b=function(E,D){if(E==null)return{};var S,T,O={},C=Object.keys(E);for(T=0;T<C.length;T++)S=C[T],D.indexOf(S)>=0||(O[S]=E[S]);return O}(e,["componentId"]),x=_&&_+"-"+(Gp(g)?g:N0(q1(g)));return tF(g,Nr({},b,{attrs:h,componentId:x}),n)},Object.defineProperty(p,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(g){this._foldedDefaultProps=r?eF({},t.defaultProps,g):g}}),Object.defineProperty(p,"toString",{value:function(){return"."+p.styledComponentId}}),i&&H$(p,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),p}var J1=function(t){return function e(n,r,i){if(i===void 0&&(i=vo),!Bh.isValidElementType(r))return pi(1,String(r));var s=function(){return n(r,i,Mo.apply(void 0,arguments))};return s.withConfig=function(o){return e(n,r,Nr({},i,{},o))},s.attrs=function(o){return e(n,r,Nr({},i,{attrs:Array.prototype.concat(i.attrs,o).filter(Boolean)}))},s}(tF,t)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(t){J1[t]=J1(t)});var lZ=function(){function t(n,r){this.rules=n,this.componentId=r,this.isStatic=K$(n),Zc.registerId(this.componentId+1)}var e=t.prototype;return e.createStyles=function(n,r,i,s){var o=s(sl(this.rules,r,i,s).join(""),""),a=this.componentId+n;i.insertRules(a,a,o)},e.removeStyles=function(n,r){r.clearRules(this.componentId+n)},e.renderStyles=function(n,r,i,s){n>2&&Zc.registerId(this.componentId+n),this.removeStyles(n,i),this.createStyles(n,r,i,s)},t}();function Iu(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=Mo.apply(void 0,[t].concat(n)),s="sc-global-"+Dx(JSON.stringify(i)),o=new lZ(i,s);function a(c){var u=Nx(),d=X$(),h=H.useContext($o),f=H.useRef(u.allocateGSInstance(s)).current;return u.server&&l(f,c,u,h,d),H.useLayoutEffect(function(){if(!u.server)return l(f,c,u,h,d),function(){return o.removeStyles(f,u)}},[f,c,u,h,d]),null}function l(c,u,d,h,f){if(o.isStatic)o.renderStyles(c,OJ,d,f);else{var p=Nr({},u,{theme:Px(u,h,a.defaultProps)});o.renderStyles(c,p,d,f)}}return Pe.memo(a)}function cZ(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=Mo.apply(void 0,[t].concat(n)).join(""),s=Dx(i);return new Z$(s,i)}var uZ=function(){function t(){var n=this;this._emitSheetCSS=function(){var r=n.instance.toString();if(!r)return"";var i=K1();return"<style "+[i&&'nonce="'+i+'"',Lo+'="true"','data-styled-version="5.3.9"'].filter(Boolean).join(" ")+">"+r+"</style>"},this.getStyleTags=function(){return n.sealed?pi(2):n._emitSheetCSS()},this.getStyleElement=function(){var r;if(n.sealed)return pi(2);var i=((r={})[Lo]="",r["data-styled-version"]="5.3.9",r.dangerouslySetInnerHTML={__html:n.instance.toString()},r),s=K1();return s&&(i.nonce=s),[Pe.createElement("style",Nr({},i,{key:"sc-0-0"}))]},this.seal=function(){n.sealed=!0},this.instance=new Zc({isServer:!0}),this.sealed=!1}var e=t.prototype;return e.collectStyles=function(n){return this.sealed?pi(2):Pe.createElement(J$,{sheet:this.instance},n)},e.interleaveWithNodeStream=function(n){return pi(3)},t}(),dZ=function(t){var e=Pe.forwardRef(function(n,r){var i=H.useContext($o),s=t.defaultProps,o=Px(n,i,s);return Pe.createElement(t,Nr({},n,{theme:o,ref:r}))});return H$(e,t),e.displayName="WithTheme("+q1(t)+")",e},hZ=function(){return H.useContext($o)},fZ={StyleSheet:Zc,masterSheet:Y$};const ee=J1,pZ=Object.freeze(Object.defineProperty({__proto__:null,ServerStyleSheet:uZ,StyleSheetConsumer:XJ,StyleSheetContext:Uv,StyleSheetManager:J$,ThemeConsumer:oZ,ThemeContext:$o,ThemeProvider:aZ,__PRIVATE__:fZ,createGlobalStyle:Iu,css:Mo,default:ee,isStyledComponent:Fv,keyframes:cZ,useTheme:hZ,version:PJ,withTheme:dZ},Symbol.toStringTag,{value:"Module"})),Ox=If({key:"chatClick",default:!1}),mZ="/assets/chat-bg-f9f7e2e8.svg",gZ="/assets/chat-close-button-c0fb89b0.svg",yZ="/assets/chat-send-e70e75a8.svg",vZ="/assets/chat_reset-fdfcdda8.svg";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Z{constructor(e,n){this._delegate=e,this.firebase=n,cg(e,new sr("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),SL(this._delegate)))}_getService(e,n=xo){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=xo){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){cg(this._delegate,e)}_addOrOverwriteComponent(e){wL(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wZ={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance."},MA=new wl("app-compat","Firebase",wZ);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bZ(t){const e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:Er,setLogLevel:xL,onLog:EL,apps:null,SDK_VERSION:Ps,INTERNAL:{registerComponent:a,removeApp:r,useAsService:l,modularAPIs:y9}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(c){delete e[c]}function i(c){if(c=c||xo,!Lr(e,c))throw MA.create("no-app",{appName:c});return e[c]}i.App=t;function s(c,u={}){const d=oE(c,u);if(Lr(e,d.name))return e[d.name];const h=new t(d,n);return e[d.name]=h,h}function o(){return Object.keys(e).map(c=>e[c])}function a(c){const u=c.name,d=u.replace("-compat","");if(Hi(c)&&c.type==="PUBLIC"){const h=(f=i())=>{if(typeof f[d]!="function")throw MA.create("invalid-app-argument",{appName:u});return f[d]()};c.serviceProps!==void 0&&Sh(h,c.serviceProps),n[d]=h,t.prototype[d]=function(...f){return this._getService.bind(this,u).apply(this,c.multipleInstances?f:[])}}return c.type==="PUBLIC"?n[d]:null}function l(c,u){return u==="serverAuth"?null:u}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nF(){const t=bZ(_Z);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:nF,extendNamespace:e,createSubscribe:pL,ErrorFactory:wl,deepExtend:Sh});function e(n){Sh(t,n)}return t}const SZ=nF();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A=new mu("@firebase/app-compat"),EZ="@firebase/app-compat",xZ="0.2.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TZ(t){Er(EZ,xZ,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(Zq()&&self.firebase!==void 0){$A.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&$A.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const $n=SZ;TZ();var IZ="firebase",CZ="9.17.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$n.registerVersion(IZ,CZ,"app-compat");function Lx(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}const id={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Ul={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kZ(){return{["admin-restricted-operation"]:"This operation is restricted to administrators only.",["argument-error"]:"",["app-not-authorized"]:"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.",["app-not-installed"]:"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.",["captcha-check-failed"]:"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.",["code-expired"]:"The SMS code has expired. Please re-send the verification code to try again.",["cordova-not-ready"]:"Cordova framework is not ready.",["cors-unsupported"]:"This browser is not supported.",["credential-already-in-use"]:"This credential is already associated with a different user account.",["custom-token-mismatch"]:"The custom token corresponds to a different audience.",["requires-recent-login"]:"This operation is sensitive and requires recent authentication. Log in again before retrying this request.",["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.",["dynamic-link-not-activated"]:"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.",["email-change-needs-verification"]:"Multi-factor users must always have a verified email.",["email-already-in-use"]:"The email address is already in use by another account.",["emulator-config-failed"]:'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',["expired-action-code"]:"The action code has expired.",["cancelled-popup-request"]:"This operation has been cancelled due to another conflicting popup being opened.",["internal-error"]:"An internal AuthError has occurred.",["invalid-app-credential"]:"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.",["invalid-app-id"]:"The mobile app identifier is not registed for the current project.",["invalid-user-token"]:"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.",["invalid-auth-event"]:"An internal AuthError has occurred.",["invalid-verification-code"]:"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.",["invalid-continue-uri"]:"The continue URL provided in the request is invalid.",["invalid-cordova-configuration"]:"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.",["invalid-custom-token"]:"The custom token format is incorrect. Please check the documentation.",["invalid-dynamic-link-domain"]:"The provided dynamic link domain is not configured or authorized for the current project.",["invalid-email"]:"The email address is badly formatted.",["invalid-emulator-scheme"]:"Emulator URL must start with a valid scheme (http:// or https://).",["invalid-api-key"]:"Your API key is invalid, please check you have copied it correctly.",["invalid-cert-hash"]:"The SHA-1 certificate hash provided is invalid.",["invalid-credential"]:"The supplied auth credential is malformed or has expired.",["invalid-message-payload"]:"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-multi-factor-session"]:"The request does not contain a valid proof of first factor successful sign-in.",["invalid-oauth-provider"]:"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.",["invalid-oauth-client-id"]:"The OAuth client ID provided is either invalid or does not match the specified API key.",["unauthorized-domain"]:"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.",["invalid-action-code"]:"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.",["wrong-password"]:"The password is invalid or the user does not have a password.",["invalid-persistence-type"]:"The specified persistence type is invalid. It can only be local, session or none.",["invalid-phone-number"]:"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].",["invalid-provider-id"]:"The specified provider ID is invalid.",["invalid-recipient-email"]:"The email corresponding to this action failed to send as the provided recipient email address is invalid.",["invalid-sender"]:"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-verification-id"]:"The verification ID used to create the phone auth credential is invalid.",["invalid-tenant-id"]:"The Auth instance's tenant ID is invalid.",["login-blocked"]:"Login blocked by user-provided method: {$originalMessage}",["missing-android-pkg-name"]:"An Android Package Name must be provided if the Android App is required to be installed.",["auth-domain-config-required"]:"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.",["missing-app-credential"]:"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.",["missing-verification-code"]:"The phone auth credential was created with an empty SMS verification code.",["missing-continue-uri"]:"A continue URL must be provided in the request.",["missing-iframe-start"]:"An internal AuthError has occurred.",["missing-ios-bundle-id"]:"An iOS Bundle ID must be provided if an App Store ID is provided.",["missing-or-invalid-nonce"]:"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.",["missing-multi-factor-info"]:"No second factor identifier is provided.",["missing-multi-factor-session"]:"The request is missing proof of first factor successful sign-in.",["missing-phone-number"]:"To send verification codes, provide a phone number for the recipient.",["missing-verification-id"]:"The phone auth credential was created with an empty verification ID.",["app-deleted"]:"This instance of FirebaseApp has been deleted.",["multi-factor-info-not-found"]:"The user does not have a second factor matching the identifier provided.",["multi-factor-auth-required"]:"Proof of ownership of a second factor is required to complete sign-in.",["account-exists-with-different-credential"]:"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.",["network-request-failed"]:"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.",["no-auth-event"]:"An internal AuthError has occurred.",["no-such-provider"]:"User was not linked to an account with the given provider.",["null-user"]:"A null user object was provided as the argument for an operation which requires a non-null user object.",["operation-not-allowed"]:"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.",["operation-not-supported-in-this-environment"]:'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',["popup-blocked"]:"Unable to establish a connection with the popup. It may have been blocked by the browser.",["popup-closed-by-user"]:"The popup has been closed by the user before finalizing the operation.",["provider-already-linked"]:"User can only be linked to one identity for the given provider.",["quota-exceeded"]:"The project's quota for this operation has been exceeded.",["redirect-cancelled-by-user"]:"The redirect operation has been cancelled by the user before finalizing.",["redirect-operation-pending"]:"A redirect sign-in operation is already pending.",["rejected-credential"]:"The request contains malformed or mismatching credentials.",["second-factor-already-in-use"]:"The second factor is already enrolled on this account.",["maximum-second-factor-count-exceeded"]:"The maximum allowed number of second factors on a user has been exceeded.",["tenant-id-mismatch"]:"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.",["user-token-expired"]:"The user's credential is no longer valid. The user must sign in again.",["too-many-requests"]:"We have blocked all requests from this device due to unusual activity. Try again later.",["unauthorized-continue-uri"]:"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.",["unsupported-first-factor"]:"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.",["unsupported-persistence-type"]:"The current environment does not support the specified persistence type.",["unsupported-tenant-operation"]:"This operation is not supported in a multi-tenant context.",["unverified-email"]:"The operation requires a verified email.",["user-cancelled"]:"The user did not grant your application the permissions it requested.",["user-not-found"]:"There is no user record corresponding to this identifier. The user may have been deleted.",["user-disabled"]:"The user account has been disabled by an administrator.",["user-mismatch"]:"The supplied credentials do not correspond to the previously signed in user.",["user-signed-out"]:"",["weak-password"]:"The password must be 6 characters long or more.",["web-storage-unsupported"]:"This browser is not supported or 3rd party cookies and data may be disabled.",["already-initialized"]:"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}}function rF(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const AZ=kZ,RZ=rF,iF=new wl("auth","Firebase",rF());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA=new mu("@firebase/auth");function bm(t,...e){FA.logLevel<=st.ERROR&&FA.error(`Auth (${Ps}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(t,...e){throw Mx(t,...e)}function On(t,...e){return Mx(t,...e)}function sF(t,e,n){const r=Object.assign(Object.assign({},RZ()),{[e]:n});return new wl("auth","Firebase",r).create(e,{appName:t.name})}function Cu(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Fn(t,"argument-error"),sF(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Mx(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return iF.create(t,...e)}function le(t,e,...n){if(!t)throw Mx(e,...n)}function Mi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw bm(e),new Error(e)}function wi(t,e){t||Mi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA=new Map;function Pr(t){wi(t instanceof Function,"Expected a class definition");let e=UA.get(t);return e?(wi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,UA.set(t,e),e)}function NZ(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Pr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function $x(){return jA()==="http:"||jA()==="https:"}function jA(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PZ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($x()||uL()||"connection"in navigator)?navigator.onLine:!0}function DZ(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,n){this.shortDelay=e,this.longDelay=n,wi(n>e,"Short delay should be less than long delay!"),this.isMobile=nE()||Wy()}get(){return PZ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(t,e){wi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Mi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Mi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Mi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OZ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LZ=new Yf(3e4,6e4);function un(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function kn(t,e,n,r,i={}){return aF(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=bl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),oF.fetch()(lF(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function aF(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},OZ),e);try{const i=new MZ(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Td(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Td(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Td(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Td(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw sF(t,u,c);Fn(t,u)}}catch(i){if(i instanceof Hn)throw i;Fn(t,"internal-error",{message:String(i)})}}async function Ms(t,e,n,r,i={}){const s=await kn(t,e,n,r,i);return"mfaPendingCredential"in s&&Fn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function lF(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Fx(t.config,i):`${t.config.apiScheme}://${i}`}class MZ{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(On(this.auth,"network-request-failed")),LZ.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Td(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=On(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $Z(t,e){return kn(t,"POST","/v1/accounts:delete",e)}async function FZ(t,e){return kn(t,"POST","/v1/accounts:update",e)}async function UZ(t,e){return kn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function jZ(t,e=!1){const n=me(t),r=await n.getIdToken(e),i=jv(r);le(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:qd(D0(i.auth_time)),issuedAtTime:qd(D0(i.iat)),expirationTime:qd(D0(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function D0(t){return Number(t)*1e3}function jv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return bm("JWT malformed, contained fewer than 3 sections"),null;try{const i=og(n);return i?JSON.parse(i):(bm("Failed to decode base64 JWT payload"),null)}catch(i){return bm("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function VZ(t){const e=jv(t);return le(e,"internal-error"),le(typeof e.exp<"u","internal-error"),le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Is(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Hn&&BZ(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function BZ({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zZ{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=qd(this.lastLoginAt),this.creationTime=qd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wh(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Is(t,UZ(n,{idToken:r}));le(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?GZ(s.providerUserInfo):[],a=HZ(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new cF(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function WZ(t){const e=me(t);await Wh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function HZ(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function GZ(t){return t.map(e=>{var{providerId:n}=e,r=Lx(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qZ(t,e){const n=await aF(t,{},async()=>{const r=bl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=lF(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",oF.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){le(e.idToken,"internal-error"),le(typeof e.idToken<"u","internal-error"),le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):VZ(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return le(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await qZ(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Hh;return r&&(le(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(le(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(le(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Hh,this.toJSON())}_performRefresh(){return Mi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(t,e){le(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Oa{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Lx(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zZ(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new cF(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Is(this,this.stsTokenManager.getToken(this.auth,e));return le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return jZ(this,e)}reload(){return WZ(this)}_assign(e){this!==e&&(le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new Oa(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Wh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Is(this,$Z(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,u;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,y=(a=n.tenantId)!==null&&a!==void 0?a:void 0,w=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,m=(c=n.createdAt)!==null&&c!==void 0?c:void 0,g=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:_,emailVerified:b,isAnonymous:x,providerData:E,stsTokenManager:D}=n;le(_&&D,e,"internal-error");const S=Hh.fromJSON(this.name,D);le(typeof _=="string",e,"internal-error"),Ws(d,e.name),Ws(h,e.name),le(typeof b=="boolean",e,"internal-error"),le(typeof x=="boolean",e,"internal-error"),Ws(f,e.name),Ws(p,e.name),Ws(y,e.name),Ws(w,e.name),Ws(m,e.name),Ws(g,e.name);const T=new Oa({uid:_,auth:e,email:h,emailVerified:b,displayName:d,isAnonymous:x,photoURL:p,phoneNumber:f,tenantId:y,stsTokenManager:S,createdAt:m,lastLoginAt:g});return E&&Array.isArray(E)&&(T.providerData=E.map(O=>Object.assign({},O))),w&&(T._redirectEventId=w),T}static async _fromIdTokenResponse(e,n,r=!1){const i=new Hh;i.updateFromServerResponse(n);const s=new Oa({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Wh(s),s}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uF{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}uF.type="NONE";const eu=uF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function La(t,e,n){return`firebase:${t}:${e}:${n}`}class wc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=La(this.userKey,i.apiKey,s),this.fullPersistenceKey=La("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Oa._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new wc(Pr(eu),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Pr(eu);const o=La(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const d=Oa._fromJSON(e,u);c!==s&&(a=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new wc(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new wc(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(fF(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dF(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pF(e))return"Blackberry";if(mF(e))return"Webos";if(Ux(e))return"Safari";if((e.includes("chrome/")||hF(e))&&!e.includes("edge/"))return"Chrome";if(Xf(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function dF(t=zt()){return/firefox\//i.test(t)}function Ux(t=zt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hF(t=zt()){return/crios\//i.test(t)}function fF(t=zt()){return/iemobile/i.test(t)}function Xf(t=zt()){return/android/i.test(t)}function pF(t=zt()){return/blackberry/i.test(t)}function mF(t=zt()){return/webos/i.test(t)}function ku(t=zt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function KZ(t=zt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function QZ(t=zt()){var e;return ku(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function YZ(){return dL()&&document.documentMode===10}function gF(t=zt()){return ku(t)||Xf(t)||mF(t)||pF(t)||/windows phone/i.test(t)||fF(t)}function XZ(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yF(t,e=[]){let n;switch(t){case"Browser":n=VA(zt());break;case"Worker":n=`${VA(zt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ps}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JZ{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZZ{constructor(e,n,r){this.app=e,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new BA(this),this.idTokenSubscription=new BA(this),this.beforeStateQueue=new JZ(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iF,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Pr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await wc.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Wh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=DZ()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?me(e):null;return n&&le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Pr(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new wl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Pr(e)||this._popupRedirectResolver;le(n,this,"argument-error"),this.redirectPersistenceManager=await wc.create(this,[Pr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return le(o,this,"internal-error"),o.then(()=>s(this.currentUser)),typeof n=="function"?e.addObserver(n,r,i):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yF(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());return r&&(n["X-Firebase-Client"]=r),n}}function En(t){return me(t)}class BA{constructor(e){this.auth=e,this.observer=null,this.addObserver=pL(n=>this.observer=n)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function eee(t,e,n){const r=En(t);le(r._canInitEmulator,r,"emulator-config-failed"),le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=vF(e),{host:o,port:a}=tee(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||nee()}function vF(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function tee(t){const e=vF(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:zA(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:zA(o)}}}function zA(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function nee(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Mi("not implemented")}_getIdTokenResponse(e){return Mi("not implemented")}_linkToIdToken(e,n){return Mi("not implemented")}_getReauthenticationResolver(e){return Mi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _F(t,e){return kn(t,"POST","/v1/accounts:resetPassword",un(t,e))}async function wF(t,e){return kn(t,"POST","/v1/accounts:update",e)}async function ree(t,e){return kn(t,"POST","/v1/accounts:update",un(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iee(t,e){return Ms(t,"POST","/v1/accounts:signInWithPassword",un(t,e))}async function Vv(t,e){return kn(t,"POST","/v1/accounts:sendOobCode",un(t,e))}async function see(t,e){return Vv(t,e)}async function oee(t,e){return Vv(t,e)}async function aee(t,e){return Vv(t,e)}async function lee(t,e){return Vv(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cee(t,e){return Ms(t,"POST","/v1/accounts:signInWithEmailLink",un(t,e))}async function uee(t,e){return Ms(t,"POST","/v1/accounts:signInWithEmailLink",un(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh extends Au{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Gh(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Gh(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return iee(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return cee(e,{email:this._email,oobCode:this._password});default:Fn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return wF(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return uee(e,{idToken:n,email:this._email,oobCode:this._password});default:Fn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gs(t,e){return Ms(t,"POST","/v1/accounts:signInWithIdp",un(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dee="http://localhost";class Qi extends Au{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Qi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Fn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Lx(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Qi(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return gs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,gs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,gs(e,n)}buildRequest(){const e={requestUri:dee,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=bl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hee(t,e){return kn(t,"POST","/v1/accounts:sendVerificationCode",un(t,e))}async function fee(t,e){return Ms(t,"POST","/v1/accounts:signInWithPhoneNumber",un(t,e))}async function pee(t,e){const n=await Ms(t,"POST","/v1/accounts:signInWithPhoneNumber",un(t,e));if(n.temporaryProof)throw Td(t,"account-exists-with-different-credential",n);return n}const mee={USER_NOT_FOUND:"user-not-found"};async function gee(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Ms(t,"POST","/v1/accounts:signInWithPhoneNumber",un(t,n),mee)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma extends Au{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Ma({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Ma({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return fee(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return pee(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return gee(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new Ma({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yee(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function vee(t){const e=oc(wd(t)).link,n=e?oc(wd(e)).deep_link_id:null,r=oc(wd(t)).deep_link_id;return(r?oc(wd(r)).link:null)||r||n||e||t}class Bv{constructor(e){var n,r,i,s,o,a;const l=oc(wd(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,d=yee((i=l.mode)!==null&&i!==void 0?i:null);le(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=vee(e);try{return new Bv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(){this.providerId=ta.PROVIDER_ID}static credential(e,n){return Gh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Bv.parseLink(n);return le(r,"argument-error"),Gh._fromEmailAndCode(e,r.code,r.tenantId)}}ta.PROVIDER_ID="password";ta.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ta.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru extends $s{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class bc extends Ru{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return le("providerId"in n&&"signInMethod"in n,"argument-error"),Qi._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return le(e.idToken||e.accessToken,"argument-error"),Qi._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return bc.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return bc.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!n&&!s||!a)return null;try{return new bc(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends Ru{constructor(){super("facebook.com")}static credential(e){return Qi._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ai.credential(e.oauthAccessToken)}catch{return null}}}Ai.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ai.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends Ru{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Qi._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ri.credentialFromTaggedObject(e)}static credentialFromError(e){return Ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ri.credential(n,r)}catch{return null}}}Ri.GOOGLE_SIGN_IN_METHOD="google.com";Ri.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni extends Ru{constructor(){super("github.com")}static credential(e){return Qi._fromParams({providerId:Ni.PROVIDER_ID,signInMethod:Ni.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ni.credentialFromTaggedObject(e)}static credentialFromError(e){return Ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ni.credential(e.oauthAccessToken)}catch{return null}}}Ni.GITHUB_SIGN_IN_METHOD="github.com";Ni.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _ee="http://localhost";class tu extends Au{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return gs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,gs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,gs(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new tu(r,s)}static _create(e,n){return new tu(e,n)}buildRequest(){return{requestUri:_ee,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wee="saml.";class Pg extends $s{constructor(e){le(e.startsWith(wee),"argument-error"),super(e)}static credentialFromResult(e){return Pg.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Pg.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=tu.fromJSON(e);return le(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return tu._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi extends Ru{constructor(){super("twitter.com")}static credential(e,n){return Qi._fromParams({providerId:Pi.PROVIDER_ID,signInMethod:Pi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Pi.credentialFromTaggedObject(e)}static credentialFromError(e){return Pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Pi.credential(n,r)}catch{return null}}}Pi.TWITTER_SIGN_IN_METHOD="twitter.com";Pi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bF(t,e){return Ms(t,"POST","/v1/accounts:signUp",un(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Oa._fromIdTokenResponse(e,r,i),o=WA(r);return new ni({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=WA(r);return new ni({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function WA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bee(t){var e;const n=En(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new ni({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await bF(n,{returnSecureToken:!0}),i=await ni._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg extends Hn{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Dg.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Dg(e,n,r,i)}}function SF(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Dg._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EF(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function See(t,e){const n=me(t);await zv(!0,n,e);const{providerUserInfo:r}=await FZ(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=EF(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function jx(t,e,n=!1){const r=await Is(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ni._forOperation(t,"link",r)}async function zv(t,e,n){await Wh(e);const r=EF(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";le(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xF(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await Is(t,SF(r,i,e,t),n);le(s.idToken,r,"internal-error");const o=jv(s.idToken);le(o,r,"internal-error");const{sub:a}=o;return le(t.uid===a,r,"user-mismatch"),ni._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Fn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TF(t,e,n=!1){const r="signIn",i=await SF(t,r,e),s=await ni._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function Wv(t,e){return TF(En(t),e)}async function IF(t,e){const n=me(t);return await zv(!1,n,e.providerId),jx(n,e)}async function CF(t,e){return xF(me(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eee(t,e){return Ms(t,"POST","/v1/accounts:signInWithCustomToken",un(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xee(t,e){const n=En(t),r=await Eee(n,{token:e,returnSecureToken:!0}),i=await ni._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?Vx._fromServerResponse(e,n):Fn(e,"internal-error")}}class Vx extends Hv{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new Vx(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(t,e,n){var r;le(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),le(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(le(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(le(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tee(t,e,n){const r=me(t),i={requestType:"PASSWORD_RESET",email:e};n&&Gv(r,i,n),await oee(r,i)}async function Iee(t,e,n){await _F(me(t),{oobCode:e,newPassword:n})}async function Cee(t,e){await ree(me(t),{oobCode:e})}async function kF(t,e){const n=me(t),r=await _F(n,{oobCode:e}),i=r.requestType;switch(le(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":le(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":le(r.mfaInfo,n,"internal-error");default:le(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Hv._fromServerResponse(En(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function kee(t,e){const{data:n}=await kF(me(t),e);return n.email}async function Aee(t,e,n){const r=En(t),i=await bF(r,{returnSecureToken:!0,email:e,password:n}),s=await ni._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(s.user),s}function Ree(t,e,n){return Wv(me(t),ta.credential(e,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nee(t,e,n){const r=me(t),i={requestType:"EMAIL_SIGNIN",email:e};le(n.handleCodeInApp,r,"argument-error"),n&&Gv(r,i,n),await aee(r,i)}function Pee(t,e){const n=Bv.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function Dee(t,e,n){const r=me(t),i=ta.credentialWithLink(e,n||zh());return le(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Wv(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oee(t,e){return kn(t,"POST","/v1/accounts:createAuthUri",un(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lee(t,e){const n=$x()?zh():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await Oee(me(t),r);return i||[]}async function Mee(t,e){const n=me(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Gv(n.auth,i,e);const{email:s}=await see(n.auth,i);s!==t.email&&await t.reload()}async function $ee(t,e,n){const r=me(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&Gv(r.auth,s,n);const{email:o}=await lee(r.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fee(t,e){return kn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uee(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=me(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Is(r,Fee(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function jee(t,e){return AF(me(t),e,null)}function Vee(t,e){return AF(me(t),null,e)}async function AF(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await Is(t,wF(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bee(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const o=(n=(e=jv(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new Sc(s,a)}}if(!r)return null;switch(r){case"facebook.com":return new zee(s,i);case"github.com":return new Wee(s,i);case"google.com":return new Hee(s,i);case"twitter.com":return new Gee(s,i,t.screenName||null);case"custom":case"anonymous":return new Sc(s,null);default:return new Sc(s,r,i)}}class Sc{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class RF extends Sc{constructor(e,n,r,i){super(e,n,r),this.username=i}}class zee extends Sc{constructor(e,n){super(e,"facebook.com",n)}}class Wee extends RF{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class Hee extends Sc{constructor(e,n){super(e,"google.com",n)}}class Gee extends RF{constructor(e,n,r){super(e,"twitter.com",n,r)}}function qee(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:Bee(n)}class Ta{constructor(e,n,r){this.type=e,this.credential=n,this.auth=r}static _fromIdtoken(e,n){return new Ta("enroll",e,n)}static _fromMfaPendingCredential(e){return new Ta("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return Ta._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return Ta._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=En(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>Hv._fromServerResponse(r,a));le(i.mfaPendingCredential,r,"internal-error");const o=Ta._fromMfaPendingCredential(i.mfaPendingCredential);return new Bx(o,s,async a=>{const l=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const c=Object.assign(Object.assign({},i),{idToken:l.idToken,refreshToken:l.refreshToken});switch(n.operationType){case"signIn":const u=await ni._fromIdTokenResponse(r,n.operationType,c);return await r._updateCurrentUser(u.user),u;case"reauthenticate":return le(n.user,r,"internal-error"),ni._forOperation(n.user,n.operationType,c);default:Fn(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function Kee(t,e){var n;const r=me(t),i=e;return le(e.customData.operationType,r,"argument-error"),le((n=i.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),Bx._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qee(t,e){return kn(t,"POST","/v2/accounts/mfaEnrollment:start",un(t,e))}function Yee(t,e){return kn(t,"POST","/v2/accounts/mfaEnrollment:finalize",un(t,e))}function Xee(t,e){return kn(t,"POST","/v2/accounts/mfaEnrollment:withdraw",un(t,e))}class zx{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>Hv._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new zx(e)}async getSession(){return Ta._fromIdtoken(await this.user.getIdToken(),this.user.auth)}async enroll(e,n){const r=e,i=await this.getSession(),s=await Is(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await Is(this.user,Xee(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const O0=new WeakMap;function Jee(t){const e=me(t);return O0.has(e)||O0.set(e,zx._fromUser(e)),O0.get(e)}const Og="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NF{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Og,"1"),this.storage.removeItem(Og),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zee(){const t=zt();return Ux(t)||ku(t)}const ete=1e3,tte=10;class PF extends NF{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Zee()&&XZ(),this.fallbackToPolling=gF(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);YZ()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,tte):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},ete)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}PF.type="LOCAL";const Wx=PF;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DF extends NF{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}DF.type="SESSION";const ol=DF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nte(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new qv(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await nte(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qv.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rte{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Jf("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const h=d;if(h.data.eventId===c)switch(h.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(){return window}function ite(t){sn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hx(){return typeof sn().WorkerGlobalScope<"u"&&typeof sn().importScripts=="function"}async function ste(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ote(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function ate(){return Hx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OF="firebaseLocalStorageDb",lte=1,Lg="firebaseLocalStorage",LF="fbase_key";class Zf{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Kv(t,e){return t.transaction([Lg],e?"readwrite":"readonly").objectStore(Lg)}function cte(){const t=indexedDB.deleteDatabase(OF);return new Zf(t).toPromise()}function Z1(){const t=indexedDB.open(OF,lte);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Lg,{keyPath:LF})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Lg)?e(r):(r.close(),await cte(),e(await Z1()))})})}async function HA(t,e,n){const r=Kv(t,!0).put({[LF]:e,value:n});return new Zf(r).toPromise()}async function ute(t,e){const n=Kv(t,!1).get(e),r=await new Zf(n).toPromise();return r===void 0?null:r.value}function GA(t,e){const n=Kv(t,!0).delete(e);return new Zf(n).toPromise()}const dte=800,hte=3;class MF{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Z1(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>hte)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Hx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qv._getInstance(ate()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await ste(),!this.activeServiceWorker)return;this.sender=new rte(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ote()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Z1();return await HA(e,Og,"1"),await GA(e,Og),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>HA(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>ute(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>GA(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Kv(i,!1).getAll();return new Zf(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dte)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}MF.type="LOCAL";const qh=MF;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fte(t,e){return kn(t,"POST","/v2/accounts/mfaSignIn:start",un(t,e))}function pte(t,e){return kn(t,"POST","/v2/accounts/mfaSignIn:finalize",un(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mte(t){return(await kn(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gte(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function $F(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=On("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",gte().appendChild(r)})}function FF(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yte=500,vte=6e4,qp=1e12;class _te{constructor(e){this.auth=e,this.counter=qp,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new wte(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||qp;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||qp;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||qp;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class wte{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;le(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=bte(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},vte)},yte))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function bte(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0=FF("rcb"),Ste=new Yf(3e4,6e4),Ete="https://www.google.com/recaptcha/api.js?";class xte{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=sn().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return le(Tte(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(sn().grecaptcha):new Promise((r,i)=>{const s=sn().setTimeout(()=>{i(On(e,"network-request-failed"))},Ste.get());sn()[L0]=()=>{sn().clearTimeout(s),delete sn()[L0];const a=sn().grecaptcha;if(!a){i(On(e,"internal-error"));return}const l=a.render;a.render=(c,u)=>{const d=l(c,u);return this.counter++,d},this.hostLanguage=n,r(a)};const o=`${Ete}?${bl({onload:L0,render:"explicit",hl:n})}`;$F(o).catch(()=>{clearTimeout(s),i(On(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=sn().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function Tte(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class Ite{async load(e){return new _te(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UF="recaptcha",Cte={theme:"light",type:"image"};let kte=class{constructor(e,n=Object.assign({},Cte),r){this.parameters=n,this.type=UF,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=En(r),this.isInvisible=this.parameters.size==="invisible",le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof e=="string"?document.getElementById(e):e;le(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ite:new xte,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){le(!this.parameters.sitekey,this.auth,"argument-error"),le(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=sn()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){le(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){le($x()&&!Hx(),this.auth,"internal-error"),await Ate(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await mte(this.auth);le(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return le(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function Ate(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Ma._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function Rte(t,e,n){const r=En(t),i=await Qv(r,e,me(n));return new Gx(i,s=>Wv(r,s))}async function Nte(t,e,n){const r=me(t);await zv(!1,r,"phone");const i=await Qv(r.auth,e,me(n));return new Gx(i,s=>IF(r,s))}async function Pte(t,e,n){const r=me(t),i=await Qv(r.auth,e,me(n));return new Gx(i,s=>CF(r,s))}async function Qv(t,e,n){var r;const i=await n.verify();try{le(typeof i=="string",t,"argument-error"),le(n.type===UF,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s)return le(o.type==="enroll",t,"internal-error"),(await Qee(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{le(o.type==="signin",t,"internal-error");const a=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return le(a,t,"missing-multi-factor-info"),(await fte(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await hee(t,{phoneNumber:s.phoneNumber,recaptchaToken:i});return o}}finally{n._reset()}}async function Dte(t,e){await jx(me(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let al=class Sm{constructor(e){this.providerId=Sm.PROVIDER_ID,this.auth=En(e)}verifyPhoneNumber(e,n){return Qv(this.auth,e,me(n))}static credential(e,n){return Ma._fromVerification(e,n)}static credentialFromResult(e){const n=e;return Sm.credentialFromTaggedObject(n)}static credentialFromError(e){return Sm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?Ma._fromTokenResponse(n,r):null}};al.PROVIDER_ID="phone";al.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kl(t,e){return e?Pr(e):(le(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx extends Au{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return gs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return gs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return gs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Ote(t){return TF(t.auth,new qx(t),t.bypassAuthState)}function Lte(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),xF(n,new qx(t),t.bypassAuthState)}async function Mte(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),jx(n,new qx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jF{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ote;case"linkViaPopup":case"linkViaRedirect":return Mte;case"reauthViaPopup":case"reauthViaRedirect":return Lte;default:Fn(this.auth,"internal-error")}}resolve(e){wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $te=new Yf(2e3,1e4);async function Fte(t,e,n){const r=En(t);Cu(t,e,$s);const i=kl(r,n);return new cs(r,"signInViaPopup",e,i).executeNotNull()}async function Ute(t,e,n){const r=me(t);Cu(r.auth,e,$s);const i=kl(r.auth,n);return new cs(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function jte(t,e,n){const r=me(t);Cu(r.auth,e,$s);const i=kl(r.auth,n);return new cs(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class cs extends jF{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,cs.currentPopupAction&&cs.currentPopupAction.cancel(),cs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return le(e,this.auth,"internal-error"),e}async onExecution(){wi(this.filter.length===1,"Popup operations only handle one event");const e=Jf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(On(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(On(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,cs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(On(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(e,$te.get())};e()}}cs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vte="pendingRedirect",Kd=new Map;class Bte extends jF{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Kd.get(this.auth._key());if(!e){try{const r=await zte(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Kd.set(this.auth._key(),e)}return this.bypassAuthState||Kd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zte(t,e){const n=BF(e),r=VF(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function Kx(t,e){return VF(t)._set(BF(e),"true")}function Wte(){Kd.clear()}function Qx(t,e){Kd.set(t._key(),e)}function VF(t){return Pr(t._redirectPersistence)}function BF(t){return La(Vte,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hte(t,e,n){return Gte(t,e,n)}async function Gte(t,e,n){const r=En(t);Cu(t,e,$s),await r._initializationPromise;const i=kl(r,n);return await Kx(i,r),i._openRedirect(r,e,"signInViaRedirect")}function qte(t,e,n){return Kte(t,e,n)}async function Kte(t,e,n){const r=me(t);Cu(r.auth,e,$s),await r.auth._initializationPromise;const i=kl(r.auth,n);await Kx(i,r.auth);const s=await zF(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function Qte(t,e,n){return Yte(t,e,n)}async function Yte(t,e,n){const r=me(t);Cu(r.auth,e,$s),await r.auth._initializationPromise;const i=kl(r.auth,n);await zv(!1,r,e.providerId),await Kx(i,r.auth);const s=await zF(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function Xte(t,e){return await En(t)._initializationPromise,Yv(t,e,!1)}async function Yv(t,e,n=!1){const r=En(t),i=kl(r,e),o=await new Bte(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function zF(t){const e=Jf(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jte=10*60*1e3;class WF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Zte(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!HF(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(On(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Jte&&this.cachedEventUids.clear(),this.cachedEventUids.has(qA(e))}saveEventToCache(e){this.cachedEventUids.add(qA(e)),this.lastProcessedEventTime=Date.now()}}function qA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function HF({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Zte(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return HF(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GF(t,e={}){return kn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ene=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tne=/^https?/;async function nne(t){if(t.config.emulator)return;const{authorizedDomains:e}=await GF(t);for(const n of e)try{if(rne(n))return}catch{}Fn(t,"unauthorized-domain")}function rne(t){const e=zh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!tne.test(n))return!1;if(ene.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ine=new Yf(3e4,6e4);function KA(){const t=sn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function sne(t){return new Promise((e,n)=>{var r,i,s;function o(){KA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{KA(),n(On(t,"network-request-failed"))},timeout:ine.get()})}if(!((i=(r=sn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=sn().gapi)===null||s===void 0)&&s.load)o();else{const a=FF("iframefcb");return sn()[a]=()=>{gapi.load?o():n(On(t,"network-request-failed"))},$F(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Em=null,e})}let Em=null;function one(t){return Em=Em||sne(t),Em}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ane=new Yf(5e3,15e3),lne="__/auth/iframe",cne="emulator/auth/iframe",une={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dne=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hne(t){const e=t.config;le(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Fx(e,cne):`https://${t.config.authDomain}/${lne}`,r={apiKey:e.apiKey,appName:t.name,v:Ps},i=dne.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${bl(r).slice(1)}`}async function fne(t){const e=await one(t),n=sn().gapi;return le(n,t,"internal-error"),e.open({where:document.body,url:hne(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:une,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=On(t,"network-request-failed"),a=sn().setTimeout(()=>{s(o)},ane.get());function l(){sn().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pne={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},mne=500,gne=600,yne="_blank",vne="http://localhost";class QA{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _ne(t,e,n,r=mne,i=gne){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},pne),{width:r.toString(),height:i.toString(),top:s,left:o}),c=zt().toLowerCase();n&&(a=hF(c)?yne:n),dF(c)&&(e=e||vne,l.scrollbars="yes");const u=Object.entries(l).reduce((h,[f,p])=>`${h}${f}=${p},`,"");if(QZ(c)&&a!=="_self")return wne(e||"",a),new QA(null);const d=window.open(e||"",a,u);le(d,t,"popup-blocked");try{d.focus()}catch{}return new QA(d)}function wne(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bne="__/auth/handler",Sne="emulator/auth/handler";function eb(t,e,n,r,i,s){le(t.config.authDomain,t,"auth-domain-config-required"),le(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ps,eventId:i};if(e instanceof $s){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",ag(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,c]of Object.entries(s||{}))o[l]=c}if(e instanceof Ru){const l=e.getScopes().filter(c=>c!=="");l.length>0&&(o.scopes=l.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const l of Object.keys(a))a[l]===void 0&&delete a[l];return`${Ene(t)}?${bl(a).slice(1)}`}function Ene({config:t}){return t.emulator?Fx(t,Sne):`https://${t.authDomain}/${bne}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0="webStorageSupport";class xne{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ol,this._completeRedirectFn=Yv,this._overrideRedirectResult=Qx}async _openPopup(e,n,r,i){var s;wi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=eb(e,n,r,zh(),i);return _ne(e,o,Jf())}async _openRedirect(e,n,r,i){return await this._originValidation(e),ite(eb(e,n,r,zh(),i)),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(wi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await fne(e),r=new WF(e);return n.register("authEvent",i=>(le(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(M0,{type:M0},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[M0];o!==void 0&&n(!!o),Fn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=nne(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return gF()||Ux()||ku()}}const Tne=xne;class Ine{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return Mi("unexpected MultiFactorSessionType")}}}class Yx extends Ine{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Yx(e)}_finalizeEnroll(e,n,r){return Yee(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return pte(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class qF{constructor(){}static assertion(e){return Yx._fromCredential(e)}}qF.FACTOR_ID="phone";var YA="@firebase/auth",XA="0.21.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cne{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kne(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function Ane(t){Hi(new sr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:s,authDomain:o}=r.options;return((a,l)=>{le(s&&!s.includes(":"),"invalid-api-key",{appName:a.name}),le(!(o!=null&&o.includes(":")),"argument-error",{appName:a.name});const c={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yF(t)},u=new ZZ(a,l,c);return NZ(u,n),u})(r,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Hi(new sr("auth-internal",e=>{const n=En(e.getProvider("auth").getImmediate());return(r=>new Cne(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Er(YA,XA,kne(t)),Er(YA,XA,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rne=5*60;Jq("authIdTokenMaxAge");Ane("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ll(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nne=2e3;async function Pne(t,e,n){var r;const{BuildInfo:i}=ll();wi(e.sessionId,"AuthEvent did not contain a session ID");const s=await $ne(e.sessionId),o={};return ku()?o.ibi=i.packageName:Xf()?o.apn=i.packageName:Fn(t,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,eb(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,o)}async function Dne(t){const{BuildInfo:e}=ll(),n={};ku()?n.iosBundleId=e.packageName:Xf()?n.androidPackageName=e.packageName:Fn(t,"operation-not-supported-in-this-environment"),await GF(t,n)}function One(t){const{cordova:e}=ll();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,KZ()?"_blank":"_system","location=yes"),n(i)})})}async function Lne(t,e,n){const{cordova:r}=ll();let i=()=>{};try{await new Promise((s,o)=>{let a=null;function l(){var d;s();const h=(d=r.plugins.browsertab)===null||d===void 0?void 0:d.close;typeof h=="function"&&h(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function c(){a||(a=window.setTimeout(()=>{o(On(t,"redirect-cancelled-by-user"))},Nne))}function u(){(document==null?void 0:document.visibilityState)==="visible"&&c()}e.addPassiveListener(l),document.addEventListener("resume",c,!1),Xf()&&document.addEventListener("visibilitychange",u,!1),i=()=>{e.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}})}finally{i()}}function Mne(t){var e,n,r,i,s,o,a,l,c,u;const d=ll();le(typeof((e=d==null?void 0:d.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),le(typeof((n=d==null?void 0:d.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),le(typeof((s=(i=(r=d==null?void 0:d.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),le(typeof((l=(a=(o=d==null?void 0:d.cordova)===null||o===void 0?void 0:o.plugins)===null||a===void 0?void 0:a.browsertab)===null||l===void 0?void 0:l.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),le(typeof((u=(c=d==null?void 0:d.cordova)===null||c===void 0?void 0:c.InAppBrowser)===null||u===void 0?void 0:u.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function $ne(t){const e=Fne(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function Fne(t){if(wi(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Une=20;class jne extends WF{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function Vne(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:Wne(),postBody:null,tenantId:t.tenantId,error:On(t,"no-auth-event")}}function Bne(t,e){return tb()._set(nb(t),e)}async function JA(t){const e=await tb()._get(nb(t));return e&&await tb()._remove(nb(t)),e}function zne(t,e){var n,r;const i=Gne(e);if(i.includes("/__/auth/callback")){const s=xm(i),o=s.firebaseError?Hne(decodeURIComponent(s.firebaseError)):null,a=(r=(n=o==null?void 0:o.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],l=a?On(a):null;return l?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:i,postBody:null}}return null}function Wne(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<Une;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function tb(){return Pr(Wx)}function nb(t){return La("authEvent",t.config.apiKey,t.name)}function Hne(t){try{return JSON.parse(t)}catch{return null}}function Gne(t){const e=xm(t),n=e.link?decodeURIComponent(e.link):void 0,r=xm(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return xm(i).link||i||r||n||t}function xm(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return oc(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qne=500;class Kne{constructor(){this._redirectPersistence=ol,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Yv,this._overrideRedirectResult=Qx}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new jne(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){Fn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){Mne(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),Wte(),await this._originValidation(e);const o=Vne(e,r,i);await Bne(e,o);const a=await Pne(e,o,n),l=await One(a);return Lne(e,s,l)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Dne(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=ll(),o=setTimeout(async()=>{await JA(e),n.onEvent(ZA())},qne),a=async u=>{clearTimeout(o);const d=await JA(e);let h=null;d&&(u!=null&&u.url)&&(h=zne(d,u.url)),n.onEvent(h||ZA())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,a);const l=i,c=`${s.packageName.toLowerCase()}://`;ll().handleOpenURL=async u=>{if(u.toLowerCase().startsWith(c)&&a({url:u}),typeof l=="function")try{l(u)}catch(d){console.error(d)}}}}const Qne=Kne;function ZA(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:On("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yne(t,e){En(t)._logFramework(e)}var Xne="@firebase/auth-compat",Jne="0.3.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zne=1e3;function Qd(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function ere(){return Qd()==="http:"||Qd()==="https:"}function KF(t=zt()){return!!((Qd()==="file:"||Qd()==="ionic:"||Qd()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function tre(){return Wy()||zy()}function nre(){return dL()&&(document==null?void 0:document.documentMode)===11}function rre(t=zt()){return/Edge\/\d+/.test(t)}function ire(t=zt()){return nre()||rre(t)}function QF(){try{const t=self.localStorage,e=Jf();if(t)return t.setItem(e,"1"),t.removeItem(e),ire()?Eh():!0}catch{return Xx()&&Eh()}return!1}function Xx(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function $0(){return(ere()||uL()||KF())&&!tre()&&QF()&&!Xx()}function YF(){return KF()&&typeof document<"u"}async function sre(){return YF()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},Zne);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function ore(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar={LOCAL:"local",NONE:"none",SESSION:"session"},sd=le,XF="persistence";function are(t,e){if(sd(Object.values(Ar).includes(e),t,"invalid-persistence-type"),Wy()){sd(e!==Ar.SESSION,t,"unsupported-persistence-type");return}if(zy()){sd(e===Ar.NONE,t,"unsupported-persistence-type");return}if(Xx()){sd(e===Ar.NONE||e===Ar.LOCAL&&Eh(),t,"unsupported-persistence-type");return}sd(e===Ar.NONE||QF(),t,"unsupported-persistence-type")}async function rb(t){await t._initializationPromise;const e=JF(),n=La(XF,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function lre(t,e){const n=JF();if(!n)return[];const r=La(XF,t,e);switch(n.getItem(r)){case Ar.NONE:return[eu];case Ar.LOCAL:return[qh,ol];case Ar.SESSION:return[ol];default:return[]}}function JF(){var t;try{return((t=ore())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cre=le;class to{constructor(){this.browserResolver=Pr(Tne),this.cordovaResolver=Pr(Qne),this.underlyingResolver=null,this._redirectPersistence=ol,this._completeRedirectFn=Yv,this._overrideRedirectResult=Qx}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return YF()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return cre(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await sre();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZF(t){return t.unwrap()}function ure(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dre(t){return eU(t)}function hre(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new fre(t,Kee(t,e))}else if(r){const i=eU(e),s=e;i&&(s.credential=i,s.tenantId=r.tenantId||void 0,s.email=r.email||void 0,s.phoneNumber=r.phoneNumber||void 0)}}function eU(t){const{_tokenResponse:e}=t instanceof Hn?t.customData:t;if(!e)return null;if(!(t instanceof Hn)&&"temporaryProof"in e&&"phoneNumber"in e)return al.credentialFromResult(t);const n=e.providerId;if(!n||n===id.PASSWORD)return null;let r;switch(n){case id.GOOGLE:r=Ri;break;case id.FACEBOOK:r=Ai;break;case id.GITHUB:r=Ni;break;case id.TWITTER:r=Pi;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:l}=e;return!s&&!o&&!i&&!a?null:a?n.startsWith("saml.")?tu._create(n,a):Qi._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:i,accessToken:s}):new bc(n).credential({idToken:i,accessToken:s,rawNonce:l})}return t instanceof Hn?r.credentialFromError(t):r.credentialFromResult(t)}function cr(t,e){return e.catch(n=>{throw n instanceof Hn&&hre(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:dre(n),additionalUserInfo:qee(n),user:us.getOrCreate(i)}})}async function ib(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>cr(t,n.confirm(r))}}class fre{constructor(e,n){this.resolver=n,this.auth=ure(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return cr(ZF(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e){this._delegate=e,this.multiFactor=Jee(e)}static getOrCreate(e){return us.USER_MAP.has(e)||us.USER_MAP.set(e,new us(e)),us.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return cr(this.auth,IF(this._delegate,e))}async linkWithPhoneNumber(e,n){return ib(this.auth,Nte(this._delegate,e,n))}async linkWithPopup(e){return cr(this.auth,jte(this._delegate,e,to))}async linkWithRedirect(e){return await rb(En(this.auth)),Qte(this._delegate,e,to)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return cr(this.auth,CF(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return ib(this.auth,Pte(this._delegate,e,n))}reauthenticateWithPopup(e){return cr(this.auth,Ute(this._delegate,e,to))}async reauthenticateWithRedirect(e){return await rb(En(this.auth)),qte(this._delegate,e,to)}sendEmailVerification(e){return Mee(this._delegate,e)}async unlink(e){return await See(this._delegate,e),this}updateEmail(e){return jee(this._delegate,e)}updatePassword(e){return Vee(this._delegate,e)}updatePhoneNumber(e){return Dte(this._delegate,e)}updateProfile(e){return Uee(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return $ee(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}us.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const od=le;class sb{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;od(r,"invalid-api-key",{appName:e.name}),od(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?to:void 0;this._delegate=n.initialize({options:{persistence:pre(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(AZ),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?us.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){eee(this._delegate,e,n)}applyActionCode(e){return Cee(this._delegate,e)}checkActionCode(e){return kF(this._delegate,e)}confirmPasswordReset(e,n){return Iee(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return cr(this._delegate,Aee(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return Lee(this._delegate,e)}isSignInWithEmailLink(e){return Pee(this._delegate,e)}async getRedirectResult(){od($0(),this._delegate,"operation-not-supported-in-this-environment");const e=await Xte(this._delegate,to);return e?cr(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){Yne(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:s,complete:o}=eR(e,n,r);return this._delegate.onAuthStateChanged(i,s,o)}onIdTokenChanged(e,n,r){const{next:i,error:s,complete:o}=eR(e,n,r);return this._delegate.onIdTokenChanged(i,s,o)}sendSignInLinkToEmail(e,n){return Nee(this._delegate,e,n)}sendPasswordResetEmail(e,n){return Tee(this._delegate,e,n||void 0)}async setPersistence(e){are(this._delegate,e);let n;switch(e){case Ar.SESSION:n=ol;break;case Ar.LOCAL:n=await Pr(qh)._isAvailable()?qh:Wx;break;case Ar.NONE:n=eu;break;default:return Fn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return cr(this._delegate,bee(this._delegate))}signInWithCredential(e){return cr(this._delegate,Wv(this._delegate,e))}signInWithCustomToken(e){return cr(this._delegate,xee(this._delegate,e))}signInWithEmailAndPassword(e,n){return cr(this._delegate,Ree(this._delegate,e,n))}signInWithEmailLink(e,n){return cr(this._delegate,Dee(this._delegate,e,n))}signInWithPhoneNumber(e,n){return ib(this._delegate,Rte(this._delegate,e,n))}async signInWithPopup(e){return od($0(),this._delegate,"operation-not-supported-in-this-environment"),cr(this._delegate,Fte(this._delegate,e,to))}async signInWithRedirect(e){return od($0(),this._delegate,"operation-not-supported-in-this-environment"),await rb(this._delegate),Hte(this._delegate,e,to)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return kee(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}sb.Persistence=Ar;function eR(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:o=>i(o&&us.getOrCreate(o)),error:e,complete:n}}function pre(t,e){const n=lre(t,e);if(typeof self<"u"&&!n.includes(qh)&&n.push(qh),typeof window<"u")for(const r of[Wx,ol])n.includes(r)||n.push(r);return n.includes(eu)||n.push(eu),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(){this.providerId="phone",this._delegate=new al(ZF($n.auth()))}static credential(e,n){return al.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}Jx.PHONE_SIGN_IN_METHOD=al.PHONE_SIGN_IN_METHOD;Jx.PROVIDER_ID=al.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mre=le;class gre{constructor(e,n,r=$n.app()){var i;mre((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new kte(e,n,r.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yre="auth-compat";function vre(t){t.INTERNAL.registerComponent(new sr(yre,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new sb(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ul.EMAIL_SIGNIN,PASSWORD_RESET:Ul.PASSWORD_RESET,RECOVER_EMAIL:Ul.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Ul.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Ul.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Ul.VERIFY_EMAIL}},EmailAuthProvider:ta,FacebookAuthProvider:Ai,GithubAuthProvider:Ni,GoogleAuthProvider:Ri,OAuthProvider:bc,SAMLAuthProvider:Pg,PhoneAuthProvider:Jx,PhoneMultiFactorGenerator:qF,RecaptchaVerifier:gre,TwitterAuthProvider:Pi,Auth:sb,AuthCredential:Au,Error:Hn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(Xne,Jne)}vre($n);const _re="@firebase/firestore-compat",wre="0.3.4";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zx(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new re("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(){if(typeof Uint8Array>"u")throw new re("unimplemented","Uint8Arrays are not available in this environment.")}function nR(){if(!F7())throw new re("unimplemented","Blobs are unavailable in Firestore in this environment.")}let tU=class ob{constructor(e){this._delegate=e}static fromBase64String(e){return nR(),new ob(Ki.fromBase64String(e))}static fromUint8Array(e){return tR(),new ob(Ki.fromUint8Array(e))}toBase64(){return nR(),this._delegate.toBase64()}toUint8Array(){return tR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ab(t){return bre(t,["next","error","complete"])}function bre(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sre{enableIndexedDbPersistence(e,n){return CX(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return kX(e._delegate)}clearIndexedDbPersistence(e){return AX(e._delegate)}}class nU{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Co||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Uc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){SX(this._delegate,e,n,r)}enableNetwork(){return NX(this._delegate)}disableNetwork(){return PX(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,w$("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return RX(this._delegate)}onSnapshotsInSync(e){return sJ(this._delegate,e)}get app(){if(!this._appCompat)throw new re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new nu(this,S$(this._delegate,e))}catch(n){throw Zn(n,"collection()","Firestore.collection()")}}doc(e){try{return new Qr(this,qi(this._delegate,e))}catch(n){throw Zn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Yh(this,EX(this._delegate,e))}catch(n){throw Zn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return cJ(this._delegate,n=>e(new rU(this,n)))}batch(){return In(this._delegate),new iU(new aJ(this._delegate,e=>Qf(this._delegate,e)))}loadBundle(e){return DX(this._delegate,e)}namedQuery(e){return OX(this._delegate,e).then(n=>n?new Yh(this,n):null)}}class Xv extends Sx{constructor(e){super(),this.firestore=e}convertBytes(e){return new tU(new Ki(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Qr.forKey(n,this.firestore,null)}}function Ere(t){w7(t)}class rU{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Xv(e)}get(e){const n=Ia(e);return this._delegate.get(n).then(r=>new Kh(this._firestore,new Ts(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Ia(e);return r?(Zx("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Ia(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Ia(e);return this._delegate.delete(n),this}}class iU{constructor(e){this._delegate=e}set(e,n,r){const i=Ia(e);return r?(Zx("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Ia(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Ia(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class cl{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Hd(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Qh(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=cl.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new cl(e,new Xv(e),n),i.set(n,s)),s}}cl.INSTANCES=new WeakMap;class Qr{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Xv(e)}static forPath(e,n,r){if(e.length%2!==0)throw new re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Qr(n,new Rt(n._delegate,r,new fe(e)))}static forKey(e,n,r){return new Qr(n,new Rt(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new nu(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new nu(this.firestore,S$(this._delegate,e))}catch(n){throw Zn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=me(e),e instanceof Rt?E$(this._delegate,e):!1}set(e,n){n=Zx("DocumentReference.set",n);try{return n?TA(this._delegate,e,n):TA(this._delegate,e)}catch(r){throw Zn(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?Oo(this._delegate,e):Oo(this._delegate,e,n,...r)}catch(i){throw Zn(i,"updateDoc()","DocumentReference.update()")}}delete(){return j$(this._delegate)}onSnapshot(...e){const n=sU(e),r=oU(e,i=>new Kh(this.firestore,new Ts(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Kf(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=ZX(this._delegate):(e==null?void 0:e.source)==="server"?n=eJ(this._delegate):n=Xc(this._delegate),n.then(r=>new Kh(this.firestore,new Ts(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Qr(this.firestore,e?this._delegate.withConverter(cl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Zn(t,e,n){return t.message=t.message.replace(e,n),t}function sU(t){for(const e of t)if(typeof e=="object"&&!ab(e))return e;return{}}function oU(t,e){var n,r;let i;return ab(t[0])?i=t[0]:ab(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class Kh{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Qr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return U$(this._delegate,e._delegate)}}class Qh extends Kh{data(e){const n=this._delegate.data(e);return b7(n!==void 0),n}}let Yh=class xi{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Xv(e)}where(e,n,r){try{return new xi(this.firestore,zs(this._delegate,zX(e,n,r)))}catch(i){throw Zn(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new xi(this.firestore,zs(this._delegate,WX(e,n)))}catch(r){throw Zn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new xi(this.firestore,zs(this._delegate,HX(e)))}catch(n){throw Zn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new xi(this.firestore,zs(this._delegate,GX(e)))}catch(n){throw Zn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new xi(this.firestore,zs(this._delegate,qX(...e)))}catch(n){throw Zn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new xi(this.firestore,zs(this._delegate,KX(...e)))}catch(n){throw Zn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new xi(this.firestore,zs(this._delegate,QX(...e)))}catch(n){throw Zn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new xi(this.firestore,zs(this._delegate,YX(...e)))}catch(n){throw Zn(n,"endAt()","Query.endAt()")}}isEqual(e){return x$(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=nJ(this._delegate):(e==null?void 0:e.source)==="server"?n=rJ(this._delegate):n=tJ(this._delegate),n.then(r=>new lb(this.firestore,new Do(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=sU(e),r=oU(e,i=>new lb(this.firestore,new Do(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Kf(this._delegate,n,r)}withConverter(e){return new xi(this.firestore,e?this._delegate.withConverter(cl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};class xre{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Qh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class lb{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Yh(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Qh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new xre(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Qh(this._firestore,r))})}isEqual(e){return U$(this._delegate,e._delegate)}}class nu extends Yh{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Qr(this.firestore,e):null}doc(e){try{return e===void 0?new Qr(this.firestore,qi(this._delegate)):new Qr(this.firestore,qi(this._delegate,e))}catch(n){throw Zn(n,"doc()","CollectionReference.doc()")}}add(e){return iJ(this._delegate,e).then(n=>new Qr(this.firestore,n))}isEqual(e){return E$(this._delegate,e._delegate)}withConverter(e){return new nu(this.firestore,e?this._delegate.withConverter(cl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Ia(t){return ct(t,Rt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(...e){this._delegate=new Po(...e)}static documentId(){return new eT(Xt.keyField().canonicalString())}isEqual(e){return e=me(e),e instanceof Po?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e){this._delegate=e}static serverTimestamp(){const e=dJ();return e._methodName="FieldValue.serverTimestamp",new ga(e)}static delete(){const e=uJ();return e._methodName="FieldValue.delete",new ga(e)}static arrayUnion(...e){const n=hJ(...e);return n._methodName="FieldValue.arrayUnion",new ga(n)}static arrayRemove(...e){const n=fJ(...e);return n._methodName="FieldValue.arrayRemove",new ga(n)}static increment(e){const n=V$(e);return n._methodName="FieldValue.increment",new ga(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tre={Firestore:nU,GeoPoint:_v,Timestamp:Ft,Blob:tU,Transaction:rU,WriteBatch:iU,DocumentReference:Qr,DocumentSnapshot:Kh,Query:Yh,QueryDocumentSnapshot:Qh,QuerySnapshot:lb,CollectionReference:nu,FieldPath:eT,FieldValue:ga,setLogLevel:Ere,CACHE_SIZE_UNLIMITED:IX};function Ire(t,e){t.INTERNAL.registerComponent(new sr("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Tre)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cre(t){Ire(t,(e,n)=>new nU(e,n,new Sre)),t.registerVersion(_re,wre)}Cre($n);const rR="@firebase/database",iR="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aU="";function lU(t){aU=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kre{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),on(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:xh(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Are{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Lr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cU=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new kre(e)}}catch{}return new Are},Ca=cU("localStorage"),cb=cU("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ec=new mu("@firebase/database"),uU=function(){let t=1;return function(){return t++}}(),dU=function(t){const e=uK(t),n=new aK;n.update(e);const r=n.digest();return eE.encodeByteArray(r)},ep=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=ep.apply(null,r):typeof r=="object"?e+=on(r):e+=r,e+=" "}return e};let $a=null,sR=!0;const hU=function(t,e){ce(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Ec.logLevel=st.VERBOSE,$a=Ec.log.bind(Ec),e&&cb.set("logging_enabled",!0)):typeof t=="function"?$a=t:($a=null,cb.remove("logging_enabled"))},vn=function(...t){if(sR===!0&&(sR=!1,$a===null&&cb.get("logging_enabled")===!0&&hU(!0)),$a){const e=ep.apply(null,t);$a(e)}},tp=function(t){return function(...e){vn(t,...e)}},ub=function(...t){const e="FIREBASE INTERNAL ERROR: "+ep(...t);Ec.error(e)},Yi=function(...t){const e=`FIREBASE FATAL ERROR: ${ep(...t)}`;throw Ec.error(e),new Error(e)},Kn=function(...t){const e="FIREBASE WARNING: "+ep(...t);Ec.warn(e)},Rre=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Kn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Jv=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Nre=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Fo="[MIN_NAME]",Cs="[MAX_NAME]",Al=function(t,e){if(t===e)return 0;if(t===Fo||e===Cs)return-1;if(e===Fo||t===Cs)return 1;{const n=oR(t),r=oR(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},Pre=function(t,e){return t===e?0:t<e?-1:1},ad=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+on(e))},tT=function(t){if(typeof t!="object"||t===null)return on(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=on(e[r]),n+=":",n+=tT(t[e[r]]);return n+="}",n},fU=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function xn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const pU=function(t){ce(!Jv(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,l;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const u=c.join("");let d="";for(l=0;l<64;l+=8){let h=parseInt(u.substr(l,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},Dre=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Ore=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Lre(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const Mre=new RegExp("^-?(0*)\\d{1,10}$"),$re=-2147483648,Fre=2147483647,oR=function(t){if(Mre.test(t)){const e=Number(t);if(e>=$re&&e<=Fre)return e}return null},Nu=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Kn("Exception was thrown by user callback.",n),e},Math.floor(0))}},Ure=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Yd=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jre{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Kn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vre{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(vn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Kn(e)}}class xc{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}xc.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT="5",mU="v",gU="s",yU="r",vU="f",_U=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,wU="ls",bU="p",db="ac",SU="websocket",EU="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xU{constructor(e,n,r,i,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ca.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ca.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Bre(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function TU(t,e,n){ce(typeof e=="string","typeof type must == string"),ce(typeof n=="object","typeof params must == object");let r;if(e===SU)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===EU)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Bre(t)&&(n.ns=t.namespace);const i=[];return xn(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zre{constructor(){this.counters_={}}incrementCounter(e,n=1){Lr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return zq(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0={},U0={};function rT(t){const e=t.toString();return F0[e]||(F0[e]=new zre),F0[e]}function Wre(t,e){const n=t.toString();return U0[n]||(U0[n]=e()),U0[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hre{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Nu(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR="start",Gre="close",qre="pLPCommand",Kre="pRTLPCB",IU="id",CU="pw",kU="ser",Qre="cb",Yre="seg",Xre="ts",Jre="d",Zre="dframe",AU=1870,RU=30,eie=AU-RU,tie=25e3,nie=3e4;class no{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=tp(e),this.stats_=rT(n),this.urlFn=l=>(this.appCheckToken&&(l[db]=this.appCheckToken),TU(n,EU,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Hre(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(nie)),Nre(()=>{if(this.isClosed_)return;this.scriptTagHolder=new iT((...s)=>{const[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===aR)this.id=a,this.password=l;else if(o===Gre)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[aR]="t",r[kU]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Qre]=this.scriptTagHolder.uniqueCallbackIdentifier),r[mU]=nT,this.transportSessionId&&(r[gU]=this.transportSessionId),this.lastSessionId&&(r[wU]=this.lastSessionId),this.applicationId&&(r[bU]=this.applicationId),this.appCheckToken&&(r[db]=this.appCheckToken),typeof location<"u"&&location.hostname&&_U.test(location.hostname)&&(r[yU]=vU);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){no.forceAllow_=!0}static forceDisallow(){no.forceDisallow_=!0}static isAvailable(){return no.forceAllow_?!0:!no.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Dre()&&!Ore()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=on(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=cL(n),i=fU(r,eie);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[Zre]="t",r[IU]=e,r[CU]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=on(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class iT{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=uU(),window[qre+this.uniqueCallbackIdentifier]=e,window[Kre+this.uniqueCallbackIdentifier]=n,this.myIFrame=iT.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){vn("frame writing exception"),a.stack&&vn(a.stack),vn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||vn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[IU]=this.myID,e[CU]=this.myPW,e[kU]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+RU+r.length<=AU;){const o=this.pendingSegs.shift();r=r+"&"+Yre+i+"="+o.seg+"&"+Xre+i+"="+o.ts+"&"+Jre+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(tie)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{vn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rie=16384,iie=45e3;let Mg=null;typeof MozWebSocket<"u"?Mg=MozWebSocket:typeof WebSocket<"u"&&(Mg=WebSocket);class qr{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=tp(this.connId),this.stats_=rT(n),this.connURL=qr.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[mU]=nT,typeof location<"u"&&location.hostname&&_U.test(location.hostname)&&(o[yU]=vU),n&&(o[gU]=n),r&&(o[wU]=r),i&&(o[db]=i),s&&(o[bU]=s),TU(e,SU,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ca.set("previous_websocket_failure",!0);try{let r;hL(),this.mySock=new Mg(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){qr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Mg!==null&&!qr.forceDisallow_}static previouslyFailed(){return Ca.isInMemoryStorage||Ca.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ca.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=xh(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ce(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=on(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=fU(n,rie);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(iie))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}qr.responsesRequiredToBeHealthy=2;qr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[no,qr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=qr&&qr.isAvailable();let r=n&&!qr.previouslyFailed();if(e.webSocketOnly&&(n||Kn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[qr];else{const i=this.transports_=[];for(const s of ru.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);ru.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ru.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sie=6e4,oie=5e3,aie=10*1024,lie=100*1024,j0="t",lR="d",cie="s",cR="r",uie="e",uR="o",dR="a",hR="n",fR="p",die="h";class hie{constructor(e,n,r,i,s,o,a,l,c,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=tp("c:"+this.id+":"),this.transportManager_=new ru(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Yd(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>lie?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>aie?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(j0 in e){const n=e[j0];n===dR?this.upgradeIfSecondaryHealthy_():n===cR?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===uR&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=ad("t",e),r=ad("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:fR,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:dR,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:hR,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=ad("t",e),r=ad("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=ad(j0,e);if(lR in e){const r=e[lR];if(n===die){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===hR){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===cie?this.onConnectionShutdown_(r):n===cR?this.onReset_(r):n===uie?ub("Server Error: "+r):n===uR?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ub("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),nT!==r&&Kn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Yd(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(sie))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Yd(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(oie))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:fR,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ca.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NU{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PU{constructor(e){this.allowedEvents_=e,this.listeners_={},ce(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){ce(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g extends PU{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!nE()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new $g}getInitialEvent(e){return ce(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR=32,mR=768;class pt{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function ht(){return new pt("")}function Ye(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Uo(t){return t.pieces_.length-t.pieceNum_}function vt(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new pt(t.pieces_,e)}function sT(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function fie(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Xh(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function DU(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new pt(e,0)}function $t(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof pt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new pt(n,0)}function Xe(t){return t.pieceNum_>=t.pieces_.length}function nr(t,e){const n=Ye(t),r=Ye(e);if(n===null)return e;if(n===r)return nr(vt(t),vt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function pie(t,e){const n=Xh(t,0),r=Xh(e,0);for(let i=0;i<n.length&&i<r.length;i++){const s=Al(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function oT(t,e){if(Uo(t)!==Uo(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Yr(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Uo(t)>Uo(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class mie{constructor(e,n){this.errorPrefix_=n,this.parts_=Xh(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Hy(this.parts_[r]);OU(this)}}function gie(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Hy(e),OU(t)}function yie(t){const e=t.parts_.pop();t.byteLength_-=Hy(e),t.parts_.length>0&&(t.byteLength_-=1)}function OU(t){if(t.byteLength_>mR)throw new Error(t.errorPrefix_+"has a key path longer than "+mR+" bytes ("+t.byteLength_+").");if(t.parts_.length>pR)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+pR+") or object contains a cycle "+ua(t))}function ua(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT extends PU{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new aT}getInitialEvent(e){return ce(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ld=1e3,vie=60*5*1e3,gR=30*1e3,_ie=1.3,wie=3e4,bie="server_kill",yR=3;class ys extends NU{constructor(e,n,r,i,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=ys.nextPersistentConnectionId_++,this.log_=tp("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ld,this.maxReconnectDelay_=vie,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!hL())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");aT.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&$g.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(on(s)),ce(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new hr,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),ce(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ce(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,c=a.s;ys.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Lr(e,"w")){const r=Ka(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();Kn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||oK(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=gR)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=sK(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),ce(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+on(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):ub("Unrecognized action received from server: "+on(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ce(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ld,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ld,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>wie&&(this.reconnectDelay_=ld),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*_ie)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+ys.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},c=function(d){ce(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?vn("getToken() completed but was canceled"):(vn("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,a=new hie(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,f=>{Kn(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(bie)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&Kn(d),l())}}}interrupt(e){vn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){vn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ag(this.interruptReasons_)&&(this.reconnectDelay_=ld,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>tT(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new pt(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){vn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=yR&&(this.reconnectDelay_=gR,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){vn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=yR&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+aU.replace(/\./g,"-")]=1,nE()?e["framework.cordova"]=1:Wy()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=$g.getInstance().currentlyOnline();return ag(this.interruptReasons_)&&e}}ys.nextPersistentConnectionId_=0;ys.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Je(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Je(Fo,e),i=new Je(Fo,n);return this.compare(r,i)!==0}minPost(){return Je.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kp;class LU extends Zv{static get __EMPTY_NODE(){return Kp}static set __EMPTY_NODE(e){Kp=e}compare(e,n){return Al(e.name,n.name)}isDefinedOn(e){throw pu("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Je.MIN}maxPost(){return new Je(Cs,Kp)}makePost(e,n){return ce(typeof e=="string","KeyIndex indexValue must always be a string."),new Je(e,Kp)}toString(){return".key"}}const Bi=new LU;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class yn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??yn.RED,this.left=i??yr.EMPTY_NODE,this.right=s??yr.EMPTY_NODE}copy(e,n,r,i,s){return new yn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return yr.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return yr.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,yn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,yn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}yn.RED=!0;yn.BLACK=!1;class Sie{copy(e,n,r,i,s){return this}insert(e,n,r){return new yn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class yr{constructor(e,n=yr.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new yr(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,yn.BLACK,null,null))}remove(e){return new yr(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,yn.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Qp(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Qp(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Qp(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Qp(this.root_,null,this.comparator_,!0,e)}}yr.EMPTY_NODE=new Sie;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eie(t,e){return Al(t.name,e.name)}function lT(t,e){return Al(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hb;function xie(t){hb=t}const MU=function(t){return typeof t=="number"?"number:"+pU(t):"string:"+t},$U=function(t){if(t.isLeafNode()){const e=t.val();ce(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Lr(e,".sv"),"Priority must be a string or number.")}else ce(t===hb||t.isEmpty(),"priority of unexpected type.");ce(t===hb||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vR;class dn{constructor(e,n=dn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,ce(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),$U(this.priorityNode_)}static set __childrenNodeConstructor(e){vR=e}static get __childrenNodeConstructor(){return vR}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new dn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:dn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Xe(e)?this:Ye(e)===".priority"?this.priorityNode_:dn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:dn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Ye(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(ce(r!==".priority"||Uo(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,dn.__childrenNodeConstructor.EMPTY_NODE.updateChild(vt(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+MU(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=pU(this.value_):e+=this.value_,this.lazyHash_=dU(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===dn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof dn.__childrenNodeConstructor?-1:(ce(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=dn.VALUE_TYPE_ORDER.indexOf(n),s=dn.VALUE_TYPE_ORDER.indexOf(r);return ce(i>=0,"Unknown leaf type: "+n),ce(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}dn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let FU,UU;function Tie(t){FU=t}function Iie(t){UU=t}class Cie extends Zv{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Al(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Je.MIN}maxPost(){return new Je(Cs,new dn("[PRIORITY-POST]",UU))}makePost(e,n){const r=FU(e);return new Je(n,new dn("[PRIORITY-POST]",r))}toString(){return".priority"}}const xt=new Cie;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kie=Math.log(2);class Aie{constructor(e){const n=s=>parseInt(Math.log(s)/kie,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Fg=function(t,e,n,r){t.sort(e);const i=function(l,c){const u=c-l;let d,h;if(u===0)return null;if(u===1)return d=t[l],h=n?n(d):d,new yn(h,d.node,yn.BLACK,null,null);{const f=parseInt(u/2,10)+l,p=i(l,f),y=i(f+1,c);return d=t[f],h=n?n(d):d,new yn(h,d.node,yn.BLACK,p,y)}},s=function(l){let c=null,u=null,d=t.length;const h=function(p,y){const w=d-p,m=d;d-=p;const g=i(w+1,m),_=t[w],b=n?n(_):_;f(new yn(b,_.node,y,null,g))},f=function(p){c?(c.left=p,c=p):(u=p,c=p)};for(let p=0;p<l.count;++p){const y=l.nextBitIsOne(),w=Math.pow(2,l.count-(p+1));y?h(w,yn.BLACK):(h(w,yn.BLACK),h(w,yn.RED))}return u},o=new Aie(t.length),a=s(o);return new yr(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let V0;const jl={};class ds{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return ce(jl&&xt,"ChildrenNode.ts has not been loaded"),V0=V0||new ds({".priority":jl},{".priority":xt}),V0}get(e){const n=Ka(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof yr?n:null}hasIndex(e){return Lr(this.indexSet_,e.toString())}addIndex(e,n){ce(e!==Bi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(Je.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Fg(r,e.getCompare()):a=jl;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new ds(u,c)}addToIndexes(e,n){const r=lg(this.indexes_,(i,s)=>{const o=Ka(this.indexSet_,s);if(ce(o,"Missing index implementation for "+s),i===jl)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(Je.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Fg(a,o.getCompare())}else return jl;else{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new Je(e.name,a))),l.insert(e,e.node)}});return new ds(r,this.indexSet_)}removeFromIndexes(e,n){const r=lg(this.indexes_,i=>{if(i===jl)return i;{const s=n.get(e.name);return s?i.remove(new Je(e.name,s)):i}});return new ds(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cd;class Ue{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&$U(this.priorityNode_),this.children_.isEmpty()&&ce(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return cd||(cd=new Ue(new yr(lT),null,ds.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||cd}updatePriority(e){return this.children_.isEmpty()?this:new Ue(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?cd:n}}getChild(e){const n=Ye(e);return n===null?this:this.getImmediateChild(n).getChild(vt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(ce(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Je(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?cd:this.priorityNode_;return new Ue(i,o,s)}}updateChild(e,n){const r=Ye(e);if(r===null)return n;{ce(Ye(e)!==".priority"||Uo(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(vt(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(xt,(o,a)=>{n[o]=a.val(e),r++,s&&Ue.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+MU(this.getPriority().val())+":"),this.forEachChild(xt,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":dU(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new Je(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Je(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Je(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,Je.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,Je.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===np?-1:0}withIndex(e){if(e===Bi||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Ue(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Bi||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(xt),i=n.getIterator(xt);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Bi?null:this.indexMap_.get(e.toString())}}Ue.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Rie extends Ue{constructor(){super(new yr(lT),Ue.EMPTY_NODE,ds.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ue.EMPTY_NODE}isEmpty(){return!1}}const np=new Rie;Object.defineProperties(Je,{MIN:{value:new Je(Fo,Ue.EMPTY_NODE)},MAX:{value:new Je(Cs,np)}});LU.__EMPTY_NODE=Ue.EMPTY_NODE;dn.__childrenNodeConstructor=Ue;xie(np);Iie(np);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nie=!0;function jt(t,e=null){if(t===null)return Ue.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),ce(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new dn(n,jt(e))}if(!(t instanceof Array)&&Nie){const n=[];let r=!1;if(xn(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=jt(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new Je(o,l)))}}),n.length===0)return Ue.EMPTY_NODE;const s=Fg(n,Eie,o=>o.name,lT);if(r){const o=Fg(n,xt.getCompare());return new Ue(s,jt(e),new ds({".priority":o},{".priority":xt}))}else return new Ue(s,jt(e),ds.Default)}else{let n=Ue.EMPTY_NODE;return xn(t,(r,i)=>{if(Lr(t,r)&&r.substring(0,1)!=="."){const s=jt(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(jt(e))}}Tie(jt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT extends Zv{constructor(e){super(),this.indexPath_=e,ce(!Xe(e)&&Ye(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Al(e.name,n.name):s}makePost(e,n){const r=jt(e),i=Ue.EMPTY_NODE.updateChild(this.indexPath_,r);return new Je(n,i)}maxPost(){const e=Ue.EMPTY_NODE.updateChild(this.indexPath_,np);return new Je(Cs,e)}toString(){return Xh(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pie extends Zv{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Al(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Je.MIN}maxPost(){return Je.MAX}makePost(e,n){const r=jt(e);return new Je(n,r)}toString(){return".value"}}const uT=new Pie;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jU(t){return{type:"value",snapshotNode:t}}function iu(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Jh(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Zh(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Die(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){ce(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Jh(n,a)):ce(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(iu(n,r)):o.trackChildChange(Zh(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(xt,(i,s)=>{n.hasChild(i)||r.trackChildChange(Jh(i,s))}),n.isLeafNode()||n.forEachChild(xt,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Zh(i,s,o))}else r.trackChildChange(iu(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?Ue.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e){this.indexedFilter_=new dT(e.getIndex()),this.index_=e.getIndex(),this.startPost_=ef.getStartPost_(e),this.endPost_=ef.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new Je(n,r))||(r=Ue.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=Ue.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(Ue.EMPTY_NODE);const s=this;return n.forEachChild(xt,(o,a)=>{s.matches(new Je(o,a))||(i=i.updateImmediateChild(o,Ue.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oie{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new ef(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new Je(n,r))||(r=Ue.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=Ue.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=Ue.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(Ue.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,Ue.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();const a=e;ce(a.numChildren()===this.limit_,"");const l=new Je(n,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(n)){const d=a.getImmediateChild(n);let h=i.getChildAfterChild(this.index_,c,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);const f=h==null?1:o(h,l);if(u&&!r.isEmpty()&&f>=0)return s!=null&&s.trackChildChange(Zh(n,r,d)),a.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(Jh(n,d));const y=a.updateImmediateChild(n,Ue.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(s!=null&&s.trackChildChange(iu(h.name,h.node)),y.updateImmediateChild(h.name,h.node)):y}}else return r.isEmpty()?e:u&&o(c,l)>=0?(s!=null&&(s.trackChildChange(Jh(c.name,c.node)),s.trackChildChange(iu(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(c.name,Ue.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=xt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ce(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ce(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Fo}hasEnd(){return this.endSet_}getIndexEndValue(){return ce(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ce(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Cs}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ce(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===xt}copy(){const e=new e_;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Lie(t){return t.loadsAllData()?new dT(t.getIndex()):t.hasLimit()?new Oie(t):new ef(t)}function Mie(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function $ie(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function fb(t,e,n){const r=t.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Fie(t,e,n){let r;return t.index_===Bi||n?r=fb(t,e,n):r=fb(t,e,Cs),r.startAfterSet_=!0,r}function pb(t,e,n){const r=t.copy();return r.endSet_=!0,e===void 0&&(e=null),r.indexEndValue_=e,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Uie(t,e,n){let r;return t.index_===Bi||n?r=pb(t,e,n):r=pb(t,e,Fo),r.endBeforeSet_=!0,r}function t_(t,e){const n=t.copy();return n.index_=e,n}function _R(t){const e={};if(t.isDefault())return e;let n;if(t.index_===xt?n="$priority":t.index_===uT?n="$value":t.index_===Bi?n="$key":(ce(t.index_ instanceof cT,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=on(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=on(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+on(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=on(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+on(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function wR(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==xt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug extends NU{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=tp("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(ce(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Ug.getListenId_(e,r),a={};this.listens_[o]=a;const l=_R(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let d=u;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(s,d,!1,r),Ka(this.listens_,o)===a){let h;c?c===401?h="permission_denied":h="rest_error:"+c:h="ok",i(h,null)}})}unlisten(e,n){const r=Ug.getListenId_(e,n);delete this.listens_[r]}get(e){const n=_R(e._queryParams),r=e._path.toString(),i=new hr;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+bl(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=xh(a.responseText)}catch{Kn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&Kn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jie{constructor(){this.rootNode_=Ue.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jg(){return{value:null,children:new Map}}function Pu(t,e,n){if(Xe(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Ye(e);t.children.has(r)||t.children.set(r,jg());const i=t.children.get(r);e=vt(e),Pu(i,e,n)}}function mb(t,e){if(Xe(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(xt,(r,i)=>{Pu(t,new pt(r),i)}),mb(t,e)}}else if(t.children.size>0){const n=Ye(e);return e=vt(e),t.children.has(n)&&mb(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function gb(t,e,n){t.value!==null?n(e,t.value):Vie(t,(r,i)=>{const s=new pt(e.toString()+"/"+r);gb(i,s,n)})}function Vie(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bie{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&xn(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR=10*1e3,zie=30*1e3,Wie=5*60*1e3;class Hie{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Bie(e);const r=bR+(zie-bR)*Math.random();Yd(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;xn(e,(i,s)=>{s>0&&Lr(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Yd(this.reportStats_.bind(this),Math.floor(Math.random()*2*Wie))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mi;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(mi||(mi={}));function hT(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function fT(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function pT(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=mi.ACK_USER_WRITE,this.source=hT()}operationForChild(e){if(Xe(this.path)){if(this.affectedTree.value!=null)return ce(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new pt(e));return new Vg(ht(),n,this.revert)}}else return ce(Ye(this.path)===e,"operationForChild called for unrelated child."),new Vg(vt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,n){this.source=e,this.path=n,this.type=mi.LISTEN_COMPLETE}operationForChild(e){return Xe(this.path)?new tf(this.source,ht()):new tf(this.source,vt(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=mi.OVERWRITE}operationForChild(e){return Xe(this.path)?new ul(this.source,ht(),this.snap.getImmediateChild(e)):new ul(this.source,vt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=mi.MERGE}operationForChild(e){if(Xe(this.path)){const n=this.children.subtree(new pt(e));return n.isEmpty()?null:n.value?new ul(this.source,ht(),n.value):new su(this.source,ht(),n)}else return ce(Ye(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new su(this.source,vt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Xe(e))return this.isFullyInitialized()&&!this.filtered_;const n=Ye(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gie{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function qie(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(Die(o.childName,o.snapshotNode))}),ud(t,i,"child_removed",e,r,n),ud(t,i,"child_added",e,r,n),ud(t,i,"child_moved",s,r,n),ud(t,i,"child_changed",e,r,n),ud(t,i,"value",e,r,n),i}function ud(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,l)=>Qie(t,a,l)),o.forEach(a=>{const l=Kie(t,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function Kie(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Qie(t,e,n){if(e.childName==null||n.childName==null)throw pu("Should only compare child_ events.");const r=new Je(e.childName,e.snapshotNode),i=new Je(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_(t,e){return{eventCache:t,serverCache:e}}function Xd(t,e,n,r){return n_(new jo(e,n,r),t.serverCache)}function VU(t,e,n,r){return n_(t.eventCache,new jo(e,n,r))}function Bg(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function dl(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let B0;const Yie=()=>(B0||(B0=new yr(Pre)),B0);class St{constructor(e,n=Yie()){this.value=e,this.children=n}static fromObject(e){let n=new St(null);return xn(e,(r,i)=>{n=n.set(new pt(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:ht(),value:this.value};if(Xe(e))return null;{const r=Ye(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(vt(e),n);return s!=null?{path:$t(new pt(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Xe(e))return this;{const n=Ye(e),r=this.children.get(n);return r!==null?r.subtree(vt(e)):new St(null)}}set(e,n){if(Xe(e))return new St(n,this.children);{const r=Ye(e),s=(this.children.get(r)||new St(null)).set(vt(e),n),o=this.children.insert(r,s);return new St(this.value,o)}}remove(e){if(Xe(e))return this.children.isEmpty()?new St(null):new St(null,this.children);{const n=Ye(e),r=this.children.get(n);if(r){const i=r.remove(vt(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new St(null):new St(this.value,s)}else return this}}get(e){if(Xe(e))return this.value;{const n=Ye(e),r=this.children.get(n);return r?r.get(vt(e)):null}}setTree(e,n){if(Xe(e))return n;{const r=Ye(e),s=(this.children.get(r)||new St(null)).setTree(vt(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new St(this.value,o)}}fold(e){return this.fold_(ht(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_($t(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,ht(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(Xe(e))return null;{const s=Ye(e),o=this.children.get(s);return o?o.findOnPath_(vt(e),$t(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ht(),n)}foreachOnPath_(e,n,r){if(Xe(e))return this;{this.value&&r(n,this.value);const i=Ye(e),s=this.children.get(i);return s?s.foreachOnPath_(vt(e),$t(n,i),r):new St(null)}}foreach(e){this.foreach_(ht(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_($t(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e){this.writeTree_=e}static empty(){return new vi(new St(null))}}function Jd(t,e,n){if(Xe(e))return new vi(new St(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=nr(i,e);return s=s.updateChild(o,n),new vi(t.writeTree_.set(i,s))}else{const i=new St(n),s=t.writeTree_.setTree(e,i);return new vi(s)}}}function yb(t,e,n){let r=t;return xn(n,(i,s)=>{r=Jd(r,$t(e,i),s)}),r}function SR(t,e){if(Xe(e))return vi.empty();{const n=t.writeTree_.setTree(e,new St(null));return new vi(n)}}function vb(t,e){return Rl(t,e)!=null}function Rl(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(nr(n.path,e)):null}function ER(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(xt,(r,i)=>{e.push(new Je(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Je(r,i.value))}),e}function _o(t,e){if(Xe(e))return t;{const n=Rl(t,e);return n!=null?new vi(new St(n)):new vi(t.writeTree_.subtree(e))}}function _b(t){return t.writeTree_.isEmpty()}function ou(t,e){return BU(ht(),t.writeTree_,e)}function BU(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(ce(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=BU($t(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild($t(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r_(t,e){return GU(e,t)}function Xie(t,e,n,r,i){ce(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Jd(t.visibleWrites,e,n)),t.lastWriteId=r}function Jie(t,e,n,r){ce(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=yb(t.visibleWrites,e,n),t.lastWriteId=r}function Zie(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function ese(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);ce(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&tse(a,r.path)?i=!1:Yr(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return nse(t),!0;if(r.snap)t.visibleWrites=SR(t.visibleWrites,r.path);else{const a=r.children;xn(a,l=>{t.visibleWrites=SR(t.visibleWrites,$t(r.path,l))})}return!0}else return!1}function tse(t,e){if(t.snap)return Yr(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Yr($t(t.path,n),e))return!0;return!1}function nse(t){t.visibleWrites=zU(t.allWrites,rse,ht()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function rse(t){return t.visible}function zU(t,e,n){let r=vi.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)Yr(n,o)?(a=nr(n,o),r=Jd(r,a,s.snap)):Yr(o,n)&&(a=nr(o,n),r=Jd(r,ht(),s.snap.getChild(a)));else if(s.children){if(Yr(n,o))a=nr(n,o),r=yb(r,a,s.children);else if(Yr(o,n))if(a=nr(o,n),Xe(a))r=yb(r,ht(),s.children);else{const l=Ka(s.children,Ye(a));if(l){const c=l.getChild(vt(a));r=Jd(r,ht(),c)}}}else throw pu("WriteRecord should have .snap or .children")}}return r}function WU(t,e,n,r,i){if(!r&&!i){const s=Rl(t.visibleWrites,e);if(s!=null)return s;{const o=_o(t.visibleWrites,e);if(_b(o))return n;if(n==null&&!vb(o,ht()))return null;{const a=n||Ue.EMPTY_NODE;return ou(o,a)}}}else{const s=_o(t.visibleWrites,e);if(!i&&_b(s))return n;if(!i&&n==null&&!vb(s,ht()))return null;{const o=function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(Yr(c.path,e)||Yr(e,c.path))},a=zU(t.allWrites,o,e),l=n||Ue.EMPTY_NODE;return ou(a,l)}}}function ise(t,e,n){let r=Ue.EMPTY_NODE;const i=Rl(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(xt,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=_o(t.visibleWrites,e);return n.forEachChild(xt,(o,a)=>{const l=ou(_o(s,new pt(o)),a);r=r.updateImmediateChild(o,l)}),ER(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=_o(t.visibleWrites,e);return ER(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function sse(t,e,n,r,i){ce(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=$t(e,n);if(vb(t.visibleWrites,s))return null;{const o=_o(t.visibleWrites,s);return _b(o)?i.getChild(n):ou(o,i.getChild(n))}}function ose(t,e,n,r){const i=$t(e,n),s=Rl(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=_o(t.visibleWrites,i);return ou(o,r.getNode().getImmediateChild(n))}else return null}function ase(t,e){return Rl(t.visibleWrites,e)}function lse(t,e,n,r,i,s,o){let a;const l=_o(t.visibleWrites,e),c=Rl(l,ht());if(c!=null)a=c;else if(n!=null)a=ou(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=h.getNext();for(;f&&u.length<i;)d(f,r)!==0&&u.push(f),f=h.getNext();return u}else return[]}function cse(){return{visibleWrites:vi.empty(),allWrites:[],lastWriteId:-1}}function zg(t,e,n,r){return WU(t.writeTree,t.treePath,e,n,r)}function mT(t,e){return ise(t.writeTree,t.treePath,e)}function xR(t,e,n,r){return sse(t.writeTree,t.treePath,e,n,r)}function Wg(t,e){return ase(t.writeTree,$t(t.treePath,e))}function use(t,e,n,r,i,s){return lse(t.writeTree,t.treePath,e,n,r,i,s)}function gT(t,e,n){return ose(t.writeTree,t.treePath,e,n)}function HU(t,e){return GU($t(t.treePath,e),t.writeTree)}function GU(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dse{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;ce(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),ce(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Zh(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Jh(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,iu(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Zh(r,e.snapshotNode,i.oldSnap));else throw pu("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hse{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const qU=new hse;class yT{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new jo(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return gT(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:dl(this.viewCache_),s=use(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fse(t){return{filter:t}}function pse(t,e){ce(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),ce(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function mse(t,e,n,r,i){const s=new dse;let o,a;if(n.type===mi.OVERWRITE){const c=n;c.source.fromUser?o=wb(t,e,c.path,c.snap,r,i,s):(ce(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!Xe(c.path),o=Hg(t,e,c.path,c.snap,r,i,a,s))}else if(n.type===mi.MERGE){const c=n;c.source.fromUser?o=yse(t,e,c.path,c.children,r,i,s):(ce(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=bb(t,e,c.path,c.children,r,i,a,s))}else if(n.type===mi.ACK_USER_WRITE){const c=n;c.revert?o=wse(t,e,c.path,r,i,s):o=vse(t,e,c.path,c.affectedTree,r,i,s)}else if(n.type===mi.LISTEN_COMPLETE)o=_se(t,e,n.path,r,s);else throw pu("Unknown operation type: "+n.type);const l=s.getChanges();return gse(e,o,l),{viewCache:o,changes:l}}function gse(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Bg(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(jU(Bg(e)))}}function KU(t,e,n,r,i,s){const o=e.eventCache;if(Wg(r,n)!=null)return e;{let a,l;if(Xe(n))if(ce(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=dl(e),u=c instanceof Ue?c:Ue.EMPTY_NODE,d=mT(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const c=zg(r,dl(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=Ye(n);if(c===".priority"){ce(Uo(n)===1,"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const d=xR(r,n,u,l);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{const u=vt(n);let d;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const h=xR(r,n,o.getNode(),l);h!=null?d=o.getNode().getImmediateChild(c).updateChild(u,h):d=o.getNode().getImmediateChild(c)}else d=gT(r,c,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),c,d,u,i,s):a=o.getNode()}}return Xd(e,a,o.isFullyInitialized()||Xe(n),t.filter.filtersNodes())}}function Hg(t,e,n,r,i,s,o,a){const l=e.serverCache;let c;const u=o?t.filter:t.filter.getIndexedFilter();if(Xe(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const f=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),f,null)}else{const f=Ye(n);if(!l.isCompleteForPath(n)&&Uo(n)>1)return e;const p=vt(n),w=l.getNode().getImmediateChild(f).updateChild(p,r);f===".priority"?c=u.updatePriority(l.getNode(),w):c=u.updateChild(l.getNode(),f,w,p,qU,null)}const d=VU(e,c,l.isFullyInitialized()||Xe(n),u.filtersNodes()),h=new yT(i,d,s);return KU(t,d,n,i,h,a)}function wb(t,e,n,r,i,s,o){const a=e.eventCache;let l,c;const u=new yT(i,e,s);if(Xe(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=Xd(e,c,!0,t.filter.filtersNodes());else{const d=Ye(n);if(d===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),l=Xd(e,c,a.isFullyInitialized(),a.isFiltered());else{const h=vt(n),f=a.getNode().getImmediateChild(d);let p;if(Xe(h))p=r;else{const y=u.getCompleteChild(d);y!=null?sT(h)===".priority"&&y.getChild(DU(h)).isEmpty()?p=y:p=y.updateChild(h,r):p=Ue.EMPTY_NODE}if(f.equals(p))l=e;else{const y=t.filter.updateChild(a.getNode(),d,p,h,u,o);l=Xd(e,y,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function TR(t,e){return t.eventCache.isCompleteForChild(e)}function yse(t,e,n,r,i,s,o){let a=e;return r.foreach((l,c)=>{const u=$t(n,l);TR(e,Ye(u))&&(a=wb(t,a,u,c,i,s,o))}),r.foreach((l,c)=>{const u=$t(n,l);TR(e,Ye(u))||(a=wb(t,a,u,c,i,s,o))}),a}function IR(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function bb(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;Xe(n)?c=r:c=new St(null).setTree(n,r);const u=e.serverCache.getNode();return c.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const f=e.serverCache.getNode().getImmediateChild(d),p=IR(t,f,h);l=Hg(t,l,new pt(d),p,i,s,o,a)}}),c.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){const p=e.serverCache.getNode().getImmediateChild(d),y=IR(t,p,h);l=Hg(t,l,new pt(d),y,i,s,o,a)}}),l}function vse(t,e,n,r,i,s,o){if(Wg(i,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(Xe(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Hg(t,e,n,l.getNode().getChild(n),i,s,a,o);if(Xe(n)){let c=new St(null);return l.getNode().forEachChild(Bi,(u,d)=>{c=c.set(new pt(u),d)}),bb(t,e,n,c,i,s,a,o)}else return e}else{let c=new St(null);return r.foreach((u,d)=>{const h=$t(n,u);l.isCompleteForPath(h)&&(c=c.set(u,l.getNode().getChild(h)))}),bb(t,e,n,c,i,s,a,o)}}function _se(t,e,n,r,i){const s=e.serverCache,o=VU(e,s.getNode(),s.isFullyInitialized()||Xe(n),s.isFiltered());return KU(t,o,n,r,qU,i)}function wse(t,e,n,r,i,s){let o;if(Wg(r,n)!=null)return e;{const a=new yT(r,e,i),l=e.eventCache.getNode();let c;if(Xe(n)||Ye(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=zg(r,dl(e));else{const d=e.serverCache.getNode();ce(d instanceof Ue,"serverChildren would be complete if leaf node"),u=mT(r,d)}u=u,c=t.filter.updateFullNode(l,u,s)}else{const u=Ye(n);let d=gT(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=l.getImmediateChild(u)),d!=null?c=t.filter.updateChild(l,u,d,vt(n),a,s):e.eventCache.getNode().hasChild(u)?c=t.filter.updateChild(l,u,Ue.EMPTY_NODE,vt(n),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=zg(r,dl(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||Wg(r,ht())!=null,Xd(e,c,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bse{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new dT(r.getIndex()),s=Lie(r);this.processor_=fse(s);const o=n.serverCache,a=n.eventCache,l=i.updateFullNode(Ue.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(Ue.EMPTY_NODE,a.getNode(),null),u=new jo(l,o.isFullyInitialized(),i.filtersNodes()),d=new jo(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=n_(d,u),this.eventGenerator_=new Gie(this.query_)}get query(){return this.query_}}function Sse(t){return t.viewCache_.serverCache.getNode()}function Ese(t){return Bg(t.viewCache_)}function xse(t,e){const n=dl(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Xe(e)&&!n.getImmediateChild(Ye(e)).isEmpty())?n.getChild(e):null}function CR(t){return t.eventRegistrations_.length===0}function Tse(t,e){t.eventRegistrations_.push(e)}function kR(t,e,n){const r=[];if(n){ce(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function AR(t,e,n,r){e.type===mi.MERGE&&e.source.queryId!==null&&(ce(dl(t.viewCache_),"We should always have a full cache before handling merges"),ce(Bg(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=mse(t.processor_,i,e,n,r);return pse(t.processor_,s.viewCache),ce(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,QU(t,s.changes,s.viewCache.eventCache.getNode(),null)}function Ise(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(xt,(s,o)=>{r.push(iu(s,o))}),n.isFullyInitialized()&&r.push(jU(n.getNode())),QU(t,r,n.getNode(),e)}function QU(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return qie(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gg;class YU{constructor(){this.views=new Map}}function Cse(t){ce(!Gg,"__referenceConstructor has already been defined"),Gg=t}function kse(){return ce(Gg,"Reference.ts has not been loaded"),Gg}function Ase(t){return t.views.size===0}function vT(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return ce(s!=null,"SyncTree gave us an op for an invalid query."),AR(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(AR(o,e,n,r));return s}}function XU(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=zg(n,i?r:null),l=!1;a?l=!0:r instanceof Ue?(a=mT(n,r),l=!1):(a=Ue.EMPTY_NODE,l=!1);const c=n_(new jo(a,l,!1),new jo(r,i,!1));return new bse(e,c)}return o}function Rse(t,e,n,r,i,s){const o=XU(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),Tse(o,n),Ise(o,n)}function Nse(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const a=Vo(t);if(i==="default")for(const[l,c]of t.views.entries())o=o.concat(kR(c,n,r)),CR(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const l=t.views.get(i);l&&(o=o.concat(kR(l,n,r)),CR(l)&&(t.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!Vo(t)&&s.push(new(kse())(e._repo,e._path)),{removed:s,events:o}}function JU(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function wo(t,e){let n=null;for(const r of t.views.values())n=n||xse(r,e);return n}function ZU(t,e){if(e._queryParams.loadsAllData())return i_(t);{const r=e._queryIdentifier;return t.views.get(r)}}function ej(t,e){return ZU(t,e)!=null}function Vo(t){return i_(t)!=null}function i_(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qg;function Pse(t){ce(!qg,"__referenceConstructor has already been defined"),qg=t}function Dse(){return ce(qg,"Reference.ts has not been loaded"),qg}let Ose=1;class RR{constructor(e){this.listenProvider_=e,this.syncPointTree_=new St(null),this.pendingWriteTree_=cse(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function _T(t,e,n,r,i){return Xie(t.pendingWriteTree_,e,n,r,i),i?Du(t,new ul(hT(),e,n)):[]}function Lse(t,e,n,r){Jie(t.pendingWriteTree_,e,n,r);const i=St.fromObject(n);return Du(t,new su(hT(),e,i))}function ro(t,e,n=!1){const r=Zie(t.pendingWriteTree_,e);if(ese(t.pendingWriteTree_,e)){let s=new St(null);return r.snap!=null?s=s.set(ht(),!0):xn(r.children,o=>{s=s.set(new pt(o),!0)}),Du(t,new Vg(r.path,s,n))}else return[]}function rp(t,e,n){return Du(t,new ul(fT(),e,n))}function Mse(t,e,n){const r=St.fromObject(n);return Du(t,new su(fT(),e,r))}function $se(t,e){return Du(t,new tf(fT(),e))}function Fse(t,e,n){const r=wT(t,n);if(r){const i=bT(r),s=i.path,o=i.queryId,a=nr(s,e),l=new tf(pT(o),a);return ST(t,s,l)}else return[]}function Kg(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let a=[];if(o&&(e._queryIdentifier==="default"||ej(o,e))){const l=Nse(o,e,n,r);Ase(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const u=c.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(h,f)=>Vo(f));if(u&&!d){const h=t.syncPointTree_.subtree(s);if(!h.isEmpty()){const f=Vse(h);for(let p=0;p<f.length;++p){const y=f[p],w=y.query,m=ij(t,y);t.listenProvider_.startListening(Zd(w),nf(t,w),m.hashFn,m.onComplete)}}}!d&&c.length>0&&!r&&(u?t.listenProvider_.stopListening(Zd(e),null):c.forEach(h=>{const f=t.queryToTagMap.get(o_(h));t.listenProvider_.stopListening(Zd(h),f)}))}Bse(t,c)}return a}function tj(t,e,n,r){const i=wT(t,r);if(i!=null){const s=bT(i),o=s.path,a=s.queryId,l=nr(o,e),c=new ul(pT(a),l,n);return ST(t,o,c)}else return[]}function Use(t,e,n,r){const i=wT(t,r);if(i){const s=bT(i),o=s.path,a=s.queryId,l=nr(o,e),c=St.fromObject(n),u=new su(pT(a),l,c);return ST(t,o,u)}else return[]}function Sb(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(h,f)=>{const p=nr(h,i);s=s||wo(f,p),o=o||Vo(f)});let a=t.syncPointTree_.get(i);a?(o=o||Vo(a),s=s||wo(a,ht())):(a=new YU,t.syncPointTree_=t.syncPointTree_.set(i,a));let l;s!=null?l=!0:(l=!1,s=Ue.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((f,p)=>{const y=wo(p,ht());y&&(s=s.updateImmediateChild(f,y))}));const c=ej(a,e);if(!c&&!e._queryParams.loadsAllData()){const h=o_(e);ce(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const f=zse();t.queryToTagMap.set(h,f),t.tagToQueryMap.set(f,h)}const u=r_(t.pendingWriteTree_,i);let d=Rse(a,e,n,u,s,l);if(!c&&!o&&!r){const h=ZU(a,e);d=d.concat(Wse(t,e,h))}return d}function s_(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=nr(o,e),c=wo(a,l);if(c)return c});return WU(i,e,s,n,!0)}function jse(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(c,u)=>{const d=nr(c,n);r=r||wo(u,d)});let i=t.syncPointTree_.get(n);i?r=r||wo(i,ht()):(i=new YU,t.syncPointTree_=t.syncPointTree_.set(n,i));const s=r!=null,o=s?new jo(r,!0,!1):null,a=r_(t.pendingWriteTree_,e._path),l=XU(i,e,a,s?o.getNode():Ue.EMPTY_NODE,s);return Ese(l)}function Du(t,e){return nj(e,t.syncPointTree_,null,r_(t.pendingWriteTree_,ht()))}function nj(t,e,n,r){if(Xe(t.path))return rj(t,e,n,r);{const i=e.get(ht());n==null&&i!=null&&(n=wo(i,ht()));let s=[];const o=Ye(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,u=HU(r,o);s=s.concat(nj(a,l,c,u))}return i&&(s=s.concat(vT(i,t,r,n))),s}}function rj(t,e,n,r){const i=e.get(ht());n==null&&i!=null&&(n=wo(i,ht()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=HU(r,o),u=t.operationForChild(o);u&&(s=s.concat(rj(u,a,l,c)))}),i&&(s=s.concat(vT(i,t,r,n))),s}function ij(t,e){const n=e.query,r=nf(t,n);return{hashFn:()=>(Sse(e)||Ue.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?Fse(t,n._path,r):$se(t,n._path);{const s=Lre(i,n);return Kg(t,n,null,s)}}}}function nf(t,e){const n=o_(e);return t.queryToTagMap.get(n)}function o_(t){return t._path.toString()+"$"+t._queryIdentifier}function wT(t,e){return t.tagToQueryMap.get(e)}function bT(t){const e=t.indexOf("$");return ce(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new pt(t.substr(0,e))}}function ST(t,e,n){const r=t.syncPointTree_.get(e);ce(r,"Missing sync point for query tag that we're tracking");const i=r_(t.pendingWriteTree_,e);return vT(r,n,i,null)}function Vse(t){return t.fold((e,n,r)=>{if(n&&Vo(n))return[i_(n)];{let i=[];return n&&(i=JU(n)),xn(r,(s,o)=>{i=i.concat(o)}),i}})}function Zd(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Dse())(t._repo,t._path):t}function Bse(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=o_(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function zse(){return Ose++}function Wse(t,e,n){const r=e._path,i=nf(t,e),s=ij(t,n),o=t.listenProvider_.startListening(Zd(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)ce(!Vo(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,u,d)=>{if(!Xe(c)&&u&&Vo(u))return[i_(u).query];{let h=[];return u&&(h=h.concat(JU(u).map(f=>f.query))),xn(d,(f,p)=>{h=h.concat(p)}),h}});for(let c=0;c<l.length;++c){const u=l[c];t.listenProvider_.stopListening(Zd(u),nf(t,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new ET(n)}node(){return this.node_}}class xT{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=$t(this.path_,e);return new xT(this.syncTree_,n)}node(){return s_(this.syncTree_,this.path_)}}const Hse=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},NR=function(t,e,n){if(!t||typeof t!="object")return t;if(ce(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Gse(t[".sv"],e,n);if(typeof t[".sv"]=="object")return qse(t[".sv"],e);ce(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Gse=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:ce(!1,"Unexpected server value: "+t)}},qse=function(t,e,n){t.hasOwnProperty("increment")||ce(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&ce(!1,"Unexpected increment value: "+r);const i=e.node();if(ce(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},sj=function(t,e,n,r){return IT(e,new xT(n,t),r)},TT=function(t,e,n){return IT(t,new ET(e),n)};function IT(t,e,n){const r=t.getPriority().val(),i=NR(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=NR(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new dn(a,jt(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new dn(i))),o.forEachChild(xt,(a,l)=>{const c=IT(l,e.getImmediateChild(a),n);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function a_(t,e){let n=e instanceof pt?e:new pt(e),r=t,i=Ye(n);for(;i!==null;){const s=Ka(r.node.children,i)||{children:{},childCount:0};r=new CT(i,r,s),n=vt(n),i=Ye(n)}return r}function Nl(t){return t.node.value}function kT(t,e){t.node.value=e,Eb(t)}function oj(t){return t.node.childCount>0}function Kse(t){return Nl(t)===void 0&&!oj(t)}function l_(t,e){xn(t.node.children,(n,r)=>{e(new CT(n,t,r))})}function aj(t,e,n,r){n&&!r&&e(t),l_(t,i=>{aj(i,e,!0,r)}),n&&r&&e(t)}function Qse(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function ip(t){return new pt(t.parent===null?t.name:ip(t.parent)+"/"+t.name)}function Eb(t){t.parent!==null&&Yse(t.parent,t.name,t)}function Yse(t,e,n){const r=Kse(n),i=Lr(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Eb(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Eb(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xse=/[\[\].#$\/\u0000-\u001F\u007F]/,Jse=/[\[\].#$\u0000-\u001F\u007F]/,z0=10*1024*1024,c_=function(t){return typeof t=="string"&&t.length!==0&&!Xse.test(t)},lj=function(t){return typeof t=="string"&&t.length!==0&&!Jse.test(t)},Zse=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),lj(t)},rf=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Jv(t)||t&&typeof t=="object"&&Lr(t,".sv")},Xi=function(t,e,n,r){r&&e===void 0||sp(Sr(t,"value"),e,n)},sp=function(t,e,n){const r=n instanceof pt?new mie(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+ua(r));if(typeof e=="function")throw new Error(t+"contains a function "+ua(r)+" with contents = "+e.toString());if(Jv(e))throw new Error(t+"contains "+e.toString()+" "+ua(r));if(typeof e=="string"&&e.length>z0/3&&Hy(e)>z0)throw new Error(t+"contains a string greater than "+z0+" utf8 bytes "+ua(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(xn(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!c_(o)))throw new Error(t+" contains an invalid key ("+o+") "+ua(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);gie(r,o),sp(t,a,r),yie(r)}),i&&s)throw new Error(t+' contains ".value" child '+ua(r)+" in addition to actual children.")}},eoe=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const s=Xh(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!c_(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(pie);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&Yr(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},cj=function(t,e,n,r){if(r&&e===void 0)return;const i=Sr(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];xn(e,(o,a)=>{const l=new pt(o);if(sp(i,a,$t(n,l)),sT(l)===".priority"&&!rf(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),eoe(i,s)},AT=function(t,e,n){if(!(n&&e===void 0)){if(Jv(e))throw new Error(Sr(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!rf(e))throw new Error(Sr(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},op=function(t,e,n,r){if(!(r&&n===void 0)&&!c_(n))throw new Error(Sr(t,e)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},sf=function(t,e,n,r){if(!(r&&n===void 0)&&!lj(n))throw new Error(Sr(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},toe=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),sf(t,e,n,r)},Xr=function(t,e){if(Ye(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},uj=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!c_(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Zse(n))throw new Error(Sr(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class noe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function u_(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!oT(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function dj(t,e,n){u_(t,n),hj(t,r=>oT(r,e))}function Fr(t,e,n){u_(t,n),hj(t,r=>Yr(r,e)||Yr(e,r))}function hj(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(roe(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function roe(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();$a&&vn("event: "+n.toString()),Nu(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fj="repo_interrupt",ioe=25;class soe{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new noe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=jg(),this.transactionQueueTree_=new CT,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function ooe(t,e,n){if(t.stats_=rT(t.repoInfo_),t.forceRestClient_||Ure())t.server_=new Ug(t.repoInfo_,(r,i,s,o)=>{PR(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>DR(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{on(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new ys(t.repoInfo_,e,(r,i,s,o)=>{PR(t,r,i,s,o)},r=>{DR(t,r)},r=>{aoe(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Wre(t.repoInfo_,()=>new Hie(t.stats_,t.server_)),t.infoData_=new jie,t.infoSyncTree_=new RR({startListening:(r,i,s,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=rp(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),RT(t,"connected",!1),t.serverSyncTree_=new RR({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);Fr(t.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function pj(t){const n=t.infoData_.getNode(new pt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function ap(t){return Hse({timestamp:pj(t)})}function PR(t,e,n,r,i){t.dataUpdateCount++;const s=new pt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const l=lg(n,c=>jt(c));o=Use(t.serverSyncTree_,s,l,i)}else{const l=jt(n);o=tj(t.serverSyncTree_,s,l,i)}else if(r){const l=lg(n,c=>jt(c));o=Mse(t.serverSyncTree_,s,l)}else{const l=jt(n);o=rp(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=au(t,s)),Fr(t.eventQueue_,a,o)}function DR(t,e){RT(t,"connected",e),e===!1&&uoe(t)}function aoe(t,e){xn(e,(n,r)=>{RT(t,n,r)})}function RT(t,e,n){const r=new pt("/.info/"+e),i=jt(n);t.infoData_.updateSnapshot(r,i);const s=rp(t.infoSyncTree_,r,i);Fr(t.eventQueue_,r,s)}function d_(t){return t.nextWriteId_++}function loe(t,e,n){const r=jse(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{const s=jt(i).withIndex(e._queryParams.getIndex());Sb(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=rp(t.serverSyncTree_,e._path,s);else{const a=nf(t.serverSyncTree_,e);o=tj(t.serverSyncTree_,e._path,s,a)}return Fr(t.eventQueue_,e._path,o),Kg(t.serverSyncTree_,e,n,null,!0),s},i=>(Ou(t,"get for query "+on(e)+" failed: "+i),Promise.reject(new Error(i))))}function NT(t,e,n,r,i){Ou(t,"set",{path:e.toString(),value:n,priority:r});const s=ap(t),o=jt(n,r),a=s_(t.serverSyncTree_,e),l=TT(o,a,s),c=d_(t),u=_T(t.serverSyncTree_,e,l,c,!0);u_(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(h,f)=>{const p=h==="ok";p||Kn("set at "+e+" failed: "+h);const y=ro(t.serverSyncTree_,c,!p);Fr(t.eventQueue_,e,y),Bo(t,i,h,f)});const d=DT(t,e);au(t,d),Fr(t.eventQueue_,d,[])}function coe(t,e,n,r){Ou(t,"update",{path:e.toString(),value:n});let i=!0;const s=ap(t),o={};if(xn(n,(a,l)=>{i=!1,o[a]=sj($t(e,a),jt(l),t.serverSyncTree_,s)}),i)vn("update() called with empty data.  Don't do anything."),Bo(t,r,"ok",void 0);else{const a=d_(t),l=Lse(t.serverSyncTree_,e,o,a);u_(t.eventQueue_,l),t.server_.merge(e.toString(),n,(c,u)=>{const d=c==="ok";d||Kn("update at "+e+" failed: "+c);const h=ro(t.serverSyncTree_,a,!d),f=h.length>0?au(t,e):e;Fr(t.eventQueue_,f,h),Bo(t,r,c,u)}),xn(n,c=>{const u=DT(t,$t(e,c));au(t,u)}),Fr(t.eventQueue_,e,[])}}function uoe(t){Ou(t,"onDisconnectEvents");const e=ap(t),n=jg();gb(t.onDisconnect_,ht(),(i,s)=>{const o=sj(i,s,t.serverSyncTree_,e);Pu(n,i,o)});let r=[];gb(n,ht(),(i,s)=>{r=r.concat(rp(t.serverSyncTree_,i,s));const o=DT(t,i);au(t,o)}),t.onDisconnect_=jg(),Fr(t.eventQueue_,ht(),r)}function doe(t,e,n){t.server_.onDisconnectCancel(e.toString(),(r,i)=>{r==="ok"&&mb(t.onDisconnect_,e),Bo(t,n,r,i)})}function OR(t,e,n,r){const i=jt(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(s,o)=>{s==="ok"&&Pu(t.onDisconnect_,e,i),Bo(t,r,s,o)})}function hoe(t,e,n,r,i){const s=jt(n,r);t.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{o==="ok"&&Pu(t.onDisconnect_,e,s),Bo(t,i,o,a)})}function foe(t,e,n,r){if(ag(n)){vn("onDisconnect().update() called with empty data.  Don't do anything."),Bo(t,r,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(i,s)=>{i==="ok"&&xn(n,(o,a)=>{const l=jt(a);Pu(t.onDisconnect_,$t(e,o),l)}),Bo(t,r,i,s)})}function poe(t,e,n){let r;Ye(e._path)===".info"?r=Sb(t.infoSyncTree_,e,n):r=Sb(t.serverSyncTree_,e,n),dj(t.eventQueue_,e._path,r)}function xb(t,e,n){let r;Ye(e._path)===".info"?r=Kg(t.infoSyncTree_,e,n):r=Kg(t.serverSyncTree_,e,n),dj(t.eventQueue_,e._path,r)}function mj(t){t.persistentConnection_&&t.persistentConnection_.interrupt(fj)}function moe(t){t.persistentConnection_&&t.persistentConnection_.resume(fj)}function Ou(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),vn(n,...e)}function Bo(t,e,n,r){e&&Nu(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function goe(t,e,n,r,i,s){Ou(t,"transaction on "+e);const o={path:e,update:n,onComplete:r,status:null,order:uU(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=PT(t,e,void 0);o.currentInputSnapshot=a;const l=o.update(a.val());if(l===void 0)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{sp("transaction failed: Data returned ",l,o.path),o.status=0;const c=a_(t.transactionQueueTree_,e),u=Nl(c)||[];u.push(o),kT(c,u);let d;typeof l=="object"&&l!==null&&Lr(l,".priority")?(d=Ka(l,".priority"),ce(rf(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(s_(t.serverSyncTree_,e)||Ue.EMPTY_NODE).getPriority().val();const h=ap(t),f=jt(l,d),p=TT(f,a,h);o.currentOutputSnapshotRaw=f,o.currentOutputSnapshotResolved=p,o.currentWriteId=d_(t);const y=_T(t.serverSyncTree_,e,p,o.currentWriteId,o.applyLocally);Fr(t.eventQueue_,e,y),h_(t,t.transactionQueueTree_)}}function PT(t,e,n){return s_(t.serverSyncTree_,e,n)||Ue.EMPTY_NODE}function h_(t,e=t.transactionQueueTree_){if(e||f_(t,e),Nl(e)){const n=yj(t,e);ce(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&yoe(t,ip(e),n)}else oj(e)&&l_(e,n=>{h_(t,n)})}function yoe(t,e,n){const r=n.map(c=>c.currentWriteId),i=PT(t,e,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const u=n[c];ce(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=nr(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,c=>{Ou(t,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(ro(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();f_(t,a_(t.transactionQueueTree_,e)),h_(t,t.transactionQueueTree_),Fr(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)Nu(d[h])}else{if(c==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Kn("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}au(t,e)}},o)}function au(t,e){const n=gj(t,e),r=ip(n),i=yj(t,n);return voe(t,i,r),r}function voe(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=nr(n,l.path);let u=!1,d;if(ce(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,d=l.abortReason,i=i.concat(ro(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=ioe)u=!0,d="maxretry",i=i.concat(ro(t.serverSyncTree_,l.currentWriteId,!0));else{const h=PT(t,l.path,o);l.currentInputSnapshot=h;const f=e[a].update(h.val());if(f!==void 0){sp("transaction failed: Data returned ",f,l.path);let p=jt(f);typeof f=="object"&&f!=null&&Lr(f,".priority")||(p=p.updatePriority(h.getPriority()));const w=l.currentWriteId,m=ap(t),g=TT(p,h,m);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=g,l.currentWriteId=d_(t),o.splice(o.indexOf(w),1),i=i.concat(_T(t.serverSyncTree_,l.path,g,l.currentWriteId,l.applyLocally)),i=i.concat(ro(t.serverSyncTree_,w,!0))}else u=!0,d="nodata",i=i.concat(ro(t.serverSyncTree_,l.currentWriteId,!0))}Fr(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}f_(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Nu(r[a]);h_(t,t.transactionQueueTree_)}function gj(t,e){let n,r=t.transactionQueueTree_;for(n=Ye(e);n!==null&&Nl(r)===void 0;)r=a_(r,n),e=vt(e),n=Ye(e);return r}function yj(t,e){const n=[];return vj(t,e,n),n.sort((r,i)=>r.order-i.order),n}function vj(t,e,n){const r=Nl(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);l_(e,i=>{vj(t,i,n)})}function f_(t,e){const n=Nl(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,kT(e,n.length>0?n:void 0)}l_(e,r=>{f_(t,r)})}function DT(t,e){const n=ip(gj(t,e)),r=a_(t.transactionQueueTree_,e);return Qse(r,i=>{W0(t,i)}),W0(t,r),aj(r,i=>{W0(t,i)}),n}function W0(t,e){const n=Nl(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(ce(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(ce(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(ro(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?kT(e,void 0):n.length=s+1,Fr(t.eventQueue_,ip(e),i);for(let o=0;o<r.length;o++)Nu(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _oe(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function woe(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Kn(`Invalid query segment '${n}' in query '${t}'`)}return e}const Tb=function(t,e){const n=boe(t),r=n.namespace;n.domain==="firebase.com"&&Yi(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Yi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Rre();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new xU(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new pt(n.pathString)}},boe=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(i=_oe(t.substring(u,d)));const h=woe(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const f=e.slice(0,c);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Soe=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let i;const s=new Array(8);for(i=7;i>=0;i--)s[i]=LR.charAt(n%64),n=Math.floor(n/64);ce(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=LR.charAt(e[i]);return ce(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+on(this.snapshot.exportVal())}}class wj{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return ce(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eoe=class{constructor(e,n){this._repo=e,this._path=n}cancel(){const e=new hr;return doe(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Xr("OnDisconnect.remove",this._path);const e=new hr;return OR(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Xr("OnDisconnect.set",this._path),Xi("OnDisconnect.set",e,this._path,!1);const n=new hr;return OR(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){Xr("OnDisconnect.setWithPriority",this._path),Xi("OnDisconnect.setWithPriority",e,this._path,!1),AT("OnDisconnect.setWithPriority",n,!1);const r=new hr;return hoe(this._repo,this._path,e,n,r.wrapCallback(()=>{})),r.promise}update(e){Xr("OnDisconnect.update",this._path),cj("OnDisconnect.update",e,this._path,!1);const n=new hr;return foe(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return Xe(this._path)?null:sT(this._path)}get ref(){return new ri(this._repo,this._path)}get _queryIdentifier(){const e=wR(this._queryParams),n=tT(e);return n==="{}"?"default":n}get _queryObject(){return wR(this._queryParams)}isEqual(e){if(e=me(e),!(e instanceof Ir))return!1;const n=this._repo===e._repo,r=oT(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+fie(this._path)}}function p_(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function na(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Bi){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Fo)throw new Error(r);if(typeof e!="string")throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==Cs)throw new Error(r);if(typeof n!="string")throw new Error(i)}}else if(t.getIndex()===xt){if(e!=null&&!rf(e)||n!=null&&!rf(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(ce(t.getIndex()instanceof cT||t.getIndex()===uT,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function m_(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ri extends Ir{constructor(e,n){super(e,n,new e_,!1)}get parent(){const e=DU(this._path);return e===null?null:new ri(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}let g_=class Ib{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new pt(e),r=hl(this.ref,e);return new Ib(this._node.getChild(n),r,xt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new Ib(i,hl(this.ref,r),xt)))}hasChild(e){const n=new pt(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function bj(t,e){return t=me(t),t._checkNotDeleted("ref"),e!==void 0?hl(t._root,e):t._root}function MR(t,e){t=me(t),t._checkNotDeleted("refFromURL");const n=Tb(e,t._repo.repoInfo_.nodeAdmin);uj("refFromURL",n);const r=n.repoInfo;return!t._repo.repoInfo_.isCustomHost()&&r.host!==t._repo.repoInfo_.host&&Yi("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),bj(t,n.path.toString())}function hl(t,e){return t=me(t),Ye(t._path)===null?toe("child","path",e,!1):sf("child","path",e,!1),new ri(t._repo,$t(t._path,e))}function xoe(t,e){t=me(t),Xr("push",t._path),Xi("push",e,t._path,!0);const n=pj(t._repo),r=Soe(n),i=hl(t,r),s=hl(t,r);let o;return e!=null?o=LT(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function Toe(t){return Xr("remove",t._path),LT(t,null)}function LT(t,e){t=me(t),Xr("set",t._path),Xi("set",e,t._path,!1);const n=new hr;return NT(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Ioe(t,e){t=me(t),Xr("setPriority",t._path),AT("setPriority",e,!1);const n=new hr;return NT(t._repo,$t(t._path,".priority"),e,null,n.wrapCallback(()=>{})),n.promise}function Coe(t,e,n){if(Xr("setWithPriority",t._path),Xi("setWithPriority",e,t._path,!1),AT("setWithPriority",n,!1),t.key===".length"||t.key===".keys")throw"setWithPriority failed: "+t.key+" is a read-only object.";const r=new hr;return NT(t._repo,t._path,e,n,r.wrapCallback(()=>{})),r.promise}function koe(t,e){cj("update",e,t._path,!1);const n=new hr;return coe(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function Aoe(t){t=me(t);const e=new OT(()=>{}),n=new lp(e);return loe(t._repo,t,n).then(r=>new g_(r,new ri(t._repo,t._path),t._queryParams.getIndex()))}class lp{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new _j("value",this,new g_(e.snapshotNode,new ri(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new wj(this,e,n):null}matches(e){return e instanceof lp?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class y_{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new wj(this,e,n):null}createEvent(e,n){ce(e.childName!=null,"Child events should have a childName.");const r=hl(new ri(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new _j(e.type,this,new g_(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof y_?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function cp(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){const l=n,c=(u,d)=>{xb(t._repo,t,a),l(u,d)};c.userCallback=n.userCallback,c.context=n.context,n=c}const o=new OT(n,s||void 0),a=e==="value"?new lp(o):new y_(e,o);return poe(t._repo,t,a),()=>xb(t._repo,t,a)}function Cb(t,e,n,r){return cp(t,"value",e,n,r)}function $R(t,e,n,r){return cp(t,"child_added",e,n,r)}function FR(t,e,n,r){return cp(t,"child_changed",e,n,r)}function UR(t,e,n,r){return cp(t,"child_moved",e,n,r)}function jR(t,e,n,r){return cp(t,"child_removed",e,n,r)}function VR(t,e,n){let r=null;const i=n?new OT(n):null;e==="value"?r=new lp(i):e&&(r=new y_(e,i)),xb(t._repo,t,r)}class bi{}class Sj extends bi{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){Xi("endAt",this._value,e._path,!0);const n=pb(e._queryParams,this._value,this._key);if(m_(n),na(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ir(e._repo,e._path,n,e._orderByCalled)}}function Roe(t,e){return op("endAt","key",e,!0),new Sj(t,e)}class Noe extends bi{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){Xi("endBefore",this._value,e._path,!1);const n=Uie(e._queryParams,this._value,this._key);if(m_(n),na(n),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ir(e._repo,e._path,n,e._orderByCalled)}}function Poe(t,e){return op("endBefore","key",e,!0),new Noe(t,e)}class Ej extends bi{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){Xi("startAt",this._value,e._path,!0);const n=fb(e._queryParams,this._value,this._key);if(m_(n),na(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ir(e._repo,e._path,n,e._orderByCalled)}}function Doe(t=null,e){return op("startAt","key",e,!0),new Ej(t,e)}class Ooe extends bi{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){Xi("startAfter",this._value,e._path,!1);const n=Fie(e._queryParams,this._value,this._key);if(m_(n),na(n),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ir(e._repo,e._path,n,e._orderByCalled)}}function Loe(t,e){return op("startAfter","key",e,!0),new Ooe(t,e)}class Moe extends bi{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ir(e._repo,e._path,Mie(e._queryParams,this._limit),e._orderByCalled)}}function $oe(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Moe(t)}class Foe extends bi{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ir(e._repo,e._path,$ie(e._queryParams,this._limit),e._orderByCalled)}}function Uoe(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Foe(t)}class joe extends bi{constructor(e){super(),this._path=e}_apply(e){p_(e,"orderByChild");const n=new pt(this._path);if(Xe(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new cT(n),i=t_(e._queryParams,r);return na(i),new Ir(e._repo,e._path,i,!0)}}function Voe(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return sf("orderByChild","path",t,!1),new joe(t)}class Boe extends bi{_apply(e){p_(e,"orderByKey");const n=t_(e._queryParams,Bi);return na(n),new Ir(e._repo,e._path,n,!0)}}function zoe(){return new Boe}class Woe extends bi{_apply(e){p_(e,"orderByPriority");const n=t_(e._queryParams,xt);return na(n),new Ir(e._repo,e._path,n,!0)}}function Hoe(){return new Woe}class Goe extends bi{_apply(e){p_(e,"orderByValue");const n=t_(e._queryParams,uT);return na(n),new Ir(e._repo,e._path,n,!0)}}function qoe(){return new Goe}class Koe extends bi{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){if(Xi("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Sj(this._value,this._key)._apply(new Ej(this._value,this._key)._apply(e))}}function Qoe(t,e){return op("equalTo","key",e,!0),new Koe(t,e)}function si(t,...e){let n=me(t);for(const r of e)n=r._apply(n);return n}Cse(ri);Pse(ri);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yoe="FIREBASE_DATABASE_EMULATOR_HOST",kb={};let Xoe=!1;function Joe(t,e,n,r){t.repoInfo_=new xU(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function xj(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Yi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),vn("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Tb(s,i),a=o.repoInfo,l,c;typeof process<"u"&&process.env&&(c=process.env[Yoe]),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=Tb(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const u=i&&l?new xc(xc.OWNER):new Vre(t.name,t.options,e);uj("Invalid Firebase Database URL",o),Xe(o.path)||Yi("Database URL must point to the root of a Firebase Database (not including a child path).");const d=eae(a,t,u,new jre(t.name,n));return new tae(d,t)}function Zoe(t,e){const n=kb[e];(!n||n[t.key]!==t)&&Yi(`Database ${e}(${t.repoInfo_}) has already been deleted.`),mj(t),delete n[t.key]}function eae(t,e,n,r){let i=kb[e.name];i||(i={},kb[e.name]=i);let s=i[t.toURLString()];return s&&Yi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new soe(t,Xoe,n,r),i[t.toURLString()]=s,s}let tae=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(ooe(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ri(this._repo,ht())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Zoe(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Yi("Cannot call "+e+" on a deleted database.")}};function Tj(){ru.IS_TRANSPORT_INITIALIZED&&Kn("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function nae(){Tj(),no.forceDisallow()}function rae(){Tj(),qr.forceDisallow(),no.forceAllow()}function iae(t,e,n,r={}){t=me(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Yi("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Yi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new xc(xc.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:tE(r.mockUserToken,t.app.options.projectId);s=new xc(o)}Joe(i,e,n,s)}function sae(t){t=me(t),t._checkNotDeleted("goOffline"),mj(t._repo)}function oae(t){t=me(t),t._checkNotDeleted("goOnline"),moe(t._repo)}function aae(t,e){hU(t,e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lae(t){lU(Ps),Hi(new sr("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return xj(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Er(rR,iR,t),Er(rR,iR,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cae={".sv":"timestamp"};function uae(){return cae}function dae(t){return{".sv":{increment:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hae=class{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}};function fae(t,e,n){var r;if(t=me(t),Xr("Reference.transaction",t._path),t.key===".length"||t.key===".keys")throw"Reference.transaction failed: "+t.key+" is a read-only object.";const i=(r=n==null?void 0:n.applyLocally)!==null&&r!==void 0?r:!0,s=new hr,o=(l,c,u)=>{let d=null;l?s.reject(l):(d=new g_(u,new ri(t._repo,t._path),xt),s.resolve(new hae(c,d)))},a=Cb(t,()=>{});return goe(t._repo,t._path,e,o,a,i),s.promise}ys.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};ys.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};lae();const pae="@firebase/database-compat",mae="0.3.4";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gae=new mu("@firebase/database-compat"),Ij=function(t){const e="FIREBASE WARNING: "+t;gae.warn(e)};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yae=function(t,e,n,r){if(!(r&&n===void 0)&&typeof n!="boolean")throw new Error(Sr(t,e)+"must be a boolean.")},vae=function(t,e,n){if(!(n&&e===void 0))switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Sr(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ae{constructor(e){this._delegate=e}cancel(e){je("OnDisconnect.cancel",0,1,arguments.length),mn("OnDisconnect.cancel","onComplete",e,!0);const n=this._delegate.cancel();return e&&n.then(()=>e(null),r=>e(r)),n}remove(e){je("OnDisconnect.remove",0,1,arguments.length),mn("OnDisconnect.remove","onComplete",e,!0);const n=this._delegate.remove();return e&&n.then(()=>e(null),r=>e(r)),n}set(e,n){je("OnDisconnect.set",1,2,arguments.length),mn("OnDisconnect.set","onComplete",n,!0);const r=this._delegate.set(e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){je("OnDisconnect.setWithPriority",2,3,arguments.length),mn("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,n);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,n){if(je("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,Ij("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}mn("OnDisconnect.update","onComplete",n,!0);const r=this._delegate.update(e);return n&&r.then(()=>n(null),i=>n(i)),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wae{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return je("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,n){this._database=e,this._delegate=n}val(){return je("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return je("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return je("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return je("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return je("DataSnapshot.child",0,1,arguments.length),e=String(e),sf("DataSnapshot.child","path",e,!1),new bo(this._database,this._delegate.child(e))}hasChild(e){return je("DataSnapshot.hasChild",1,1,arguments.length),sf("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return je("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return je("DataSnapshot.forEach",1,1,arguments.length),mn("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(n=>e(new bo(this._database,n)))}hasChildren(){return je("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return je("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return je("DataSnapshot.ref",0,0,arguments.length),new ka(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class An{constructor(e,n){this.database=e,this._delegate=n}on(e,n,r,i){var s;je("Query.on",2,4,arguments.length),mn("Query.on","callback",n,!1);const o=An.getCancelAndContextArgs_("Query.on",r,i),a=(c,u)=>{n.call(o.context,new bo(this.database,c),u)};a.userCallback=n,a.context=o.context;const l=(s=o.cancel)===null||s===void 0?void 0:s.bind(o.context);switch(e){case"value":return Cb(this._delegate,a,l),n;case"child_added":return $R(this._delegate,a,l),n;case"child_removed":return jR(this._delegate,a,l),n;case"child_changed":return FR(this._delegate,a,l),n;case"child_moved":return UR(this._delegate,a,l),n;default:throw new Error(Sr("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,n,r){if(je("Query.off",0,3,arguments.length),vae("Query.off",e,!0),mn("Query.off","callback",n,!0),nk("Query.off","context",r,!0),n){const i=()=>{};i.userCallback=n,i.context=r,VR(this._delegate,e,i)}else VR(this._delegate,e)}get(){return Aoe(this._delegate).then(e=>new bo(this.database,e))}once(e,n,r,i){je("Query.once",1,4,arguments.length),mn("Query.once","callback",n,!0);const s=An.getCancelAndContextArgs_("Query.once",r,i),o=new hr,a=(c,u)=>{const d=new bo(this.database,c);n&&n.call(s.context,d,u),o.resolve(d)};a.userCallback=n,a.context=s.context;const l=c=>{s.cancel&&s.cancel.call(s.context,c),o.reject(c)};switch(e){case"value":Cb(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":$R(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":jR(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":FR(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":UR(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error(Sr("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return je("Query.limitToFirst",1,1,arguments.length),new An(this.database,si(this._delegate,$oe(e)))}limitToLast(e){return je("Query.limitToLast",1,1,arguments.length),new An(this.database,si(this._delegate,Uoe(e)))}orderByChild(e){return je("Query.orderByChild",1,1,arguments.length),new An(this.database,si(this._delegate,Voe(e)))}orderByKey(){return je("Query.orderByKey",0,0,arguments.length),new An(this.database,si(this._delegate,zoe()))}orderByPriority(){return je("Query.orderByPriority",0,0,arguments.length),new An(this.database,si(this._delegate,Hoe()))}orderByValue(){return je("Query.orderByValue",0,0,arguments.length),new An(this.database,si(this._delegate,qoe()))}startAt(e=null,n){return je("Query.startAt",0,2,arguments.length),new An(this.database,si(this._delegate,Doe(e,n)))}startAfter(e=null,n){return je("Query.startAfter",0,2,arguments.length),new An(this.database,si(this._delegate,Loe(e,n)))}endAt(e=null,n){return je("Query.endAt",0,2,arguments.length),new An(this.database,si(this._delegate,Roe(e,n)))}endBefore(e=null,n){return je("Query.endBefore",0,2,arguments.length),new An(this.database,si(this._delegate,Poe(e,n)))}equalTo(e,n){return je("Query.equalTo",1,2,arguments.length),new An(this.database,si(this._delegate,Qoe(e,n)))}toString(){return je("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return je("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(je("Query.isEqual",1,1,arguments.length),!(e instanceof An)){const n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,n,r){const i={cancel:void 0,context:void 0};if(n&&r)i.cancel=n,mn(e,"cancel",i.cancel,!0),i.context=r,nk(e,"context",i.context,!0);else if(n)if(typeof n=="object"&&n!==null)i.context=n;else if(typeof n=="function")i.cancel=n;else throw new Error(Sr(e,"cancelOrContext")+" must either be a cancel callback or a context object.");return i}get ref(){return new ka(this.database,new ri(this._delegate._repo,this._delegate._path))}}let ka=class Hl extends An{constructor(e,n){super(e,new Ir(n._repo,n._path,new e_,!1)),this.database=e,this._delegate=n}getKey(){return je("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return je("Reference.child",1,1,arguments.length),typeof e=="number"&&(e=String(e)),new Hl(this.database,hl(this._delegate,e))}getParent(){je("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Hl(this.database,e):null}getRoot(){return je("Reference.root",0,0,arguments.length),new Hl(this.database,this._delegate.root)}set(e,n){je("Reference.set",1,2,arguments.length),mn("Reference.set","onComplete",n,!0);const r=LT(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}update(e,n){if(je("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,Ij("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Xr("Reference.update",this._delegate._path),mn("Reference.update","onComplete",n,!0);const r=koe(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){je("Reference.setWithPriority",2,3,arguments.length),mn("Reference.setWithPriority","onComplete",r,!0);const i=Coe(this._delegate,e,n);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){je("Reference.remove",0,1,arguments.length),mn("Reference.remove","onComplete",e,!0);const n=Toe(this._delegate);return e&&n.then(()=>e(null),r=>e(r)),n}transaction(e,n,r){je("Reference.transaction",1,3,arguments.length),mn("Reference.transaction","transactionUpdate",e,!1),mn("Reference.transaction","onComplete",n,!0),yae("Reference.transaction","applyLocally",r,!0);const i=fae(this._delegate,e,{applyLocally:r}).then(s=>new wae(s.committed,new bo(this.database,s.snapshot)));return n&&i.then(s=>n(null,s.committed,s.snapshot),s=>n(s,!1,null)),i}setPriority(e,n){je("Reference.setPriority",1,2,arguments.length),mn("Reference.setPriority","onComplete",n,!0);const r=Ioe(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}push(e,n){je("Reference.push",0,2,arguments.length),mn("Reference.push","onComplete",n,!0);const r=xoe(this._delegate,e),i=r.then(o=>new Hl(this.database,o));n&&i.then(()=>n(null),o=>n(o));const s=new Hl(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return Xr("Reference.onDisconnect",this._delegate._path),new _ae(new Eoe(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,n){this._delegate=e,this.app=n,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:nae,forceLongPolling:rae}}useEmulator(e,n,r={}){iae(this._delegate,e,n,r)}ref(e){if(je("database.ref",0,1,arguments.length),e instanceof ka){const n=MR(this._delegate,e.toString());return new ka(this,n)}else{const n=bj(this._delegate,e);return new ka(this,n)}}refFromURL(e){je("database.refFromURL",1,1,arguments.length);const r=MR(this._delegate,e);return new ka(this,r)}goOffline(){return je("database.goOffline",0,0,arguments.length),sae(this._delegate)}goOnline(){return je("database.goOnline",0,0,arguments.length),oae(this._delegate)}}of.ServerValue={TIMESTAMP:uae(),increment:t=>dae(t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bae({app:t,url:e,version:n,customAuthImpl:r,namespace:i,nodeAdmin:s=!1}){lU(n);const o=new mL("auth-internal",new gL("database-standalone"));return o.setComponent(new sr("auth-internal",()=>r,"PRIVATE")),{instance:new of(xj(t,o,void 0,e,s),t),namespace:i}}var Sae=Object.freeze({__proto__:null,initStandalone:bae});/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eae=of.ServerValue;function xae(t){t.INTERNAL.registerComponent(new sr("database-compat",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new of(i,r)},"PUBLIC").setServiceProps({Reference:ka,Query:An,Database:of,DataSnapshot:bo,enableLogging:aae,INTERNAL:Sae,ServerValue:Eae}).setMultipleInstances(!0)),t.registerVersion(pae,mae)}xae($n);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cj="firebasestorage.googleapis.com",kj="storageBucket",Tae=2*60*1e3,Iae=10*60*1e3,Cae=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt extends Hn{constructor(e,n,r=0){super(H0(e),`Firebase Storage: ${n} (${H0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Wt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return H0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Nt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Nt||(Nt={}));function H0(t){return"storage/"+t}function MT(){const t="An unknown error occurred, please check the error payload for server response.";return new Wt(Nt.UNKNOWN,t)}function kae(t){return new Wt(Nt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Aae(t){return new Wt(Nt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Rae(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Wt(Nt.UNAUTHENTICATED,t)}function Nae(){return new Wt(Nt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Pae(t){return new Wt(Nt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Aj(){return new Wt(Nt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Rj(){return new Wt(Nt.CANCELED,"User canceled the upload/download.")}function Dae(t){return new Wt(Nt.INVALID_URL,"Invalid URL '"+t+"'.")}function Oae(t){return new Wt(Nt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Lae(){return new Wt(Nt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+kj+"' property when initializing the app?")}function Nj(){return new Wt(Nt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Mae(){return new Wt(Nt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function $ae(){return new Wt(Nt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Fae(t){return new Wt(Nt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Tc(t){return new Wt(Nt.INVALID_ARGUMENT,t)}function Pj(){return new Wt(Nt.APP_DELETED,"The Firebase app was deleted.")}function Dj(t){return new Wt(Nt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function eh(t,e){return new Wt(Nt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function dd(t){throw new Wt(Nt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Wn.makeFromUrl(e,n)}catch{return new Wn(e,"")}if(r.path==="")return r;throw Oae(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(b){b.path.charAt(b.path.length-1)==="/"&&(b.path_=b.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(b){b.path_=decodeURIComponent(b.path)}const u="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",f=new RegExp(`^https?://${d}/${u}/b/${i}/o${h}`,"i"),p={bucket:1,path:3},y=n===Cj?"(?:storage.googleapis.com|storage.cloud.google.com)":n,w="([^?#]*)",m=new RegExp(`^https?://${y}/${i}/${w}`,"i"),_=[{regex:a,indices:l,postModify:s},{regex:f,indices:p,postModify:c},{regex:m,indices:{bucket:1,path:2},postModify:c}];for(let b=0;b<_.length;b++){const x=_[b],E=x.regex.exec(e);if(E){const D=E[x.indices.bucket];let S=E[x.indices.path];S||(S=""),r=new Wn(D,S),x.postModify(r);break}}if(r==null)throw Dae(e);return r}}class Uae{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jae(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...w){c||(c=!0,e.apply(null,w))}function d(w){i=setTimeout(()=>{i=null,t(f,l())},w)}function h(){s&&clearTimeout(s)}function f(w,...m){if(c){h();return}if(w){h(),u.call(null,w,...m);return}if(l()||o){h(),u.call(null,w,...m);return}r<64&&(r*=2);let _;a===1?(a=2,_=0):_=(r+Math.random())*1e3,d(_)}let p=!1;function y(w){p||(p=!0,h(),!c&&(i!==null?(w||(a=2),clearTimeout(i),d(0)):w||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,y(!0)},n),y}function Vae(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bae(t){return t!==void 0}function zae(t){return typeof t=="function"}function Wae(t){return typeof t=="object"&&!Array.isArray(t)}function v_(t){return typeof t=="string"||t instanceof String}function BR(t){return $T()&&t instanceof Blob}function $T(){return typeof Blob<"u"&&!zy()}function Ab(t,e,n,r){if(r<e)throw Tc(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Tc(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ra(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function Oj(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fa;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Fa||(Fa={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lj(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hae{constructor(e,n,r,i,s,o,a,l,c,u,d,h=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,p)=>{this.resolve_=f,this.reject_=p,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Yp(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Fa.NO_ERROR,l=s.getStatus();if(!a||Lj(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===Fa.ABORT;r(!1,new Yp(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Yp(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());Bae(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=MT();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?Pj():Rj();o(l)}else{const l=Aj();o(l)}};this.canceled_?n(!1,new Yp(!1,null,!0)):this.backoffId_=jae(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Vae(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Yp{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Gae(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function qae(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Kae(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Qae(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Yae(t,e,n,r,i,s,o=!0){const a=Oj(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return Kae(c,e),Gae(c,n),qae(c,s),Qae(c,r),new Hae(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xae(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Jae(...t){const e=Xae();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if($T())return new Blob(t);throw new Wt(Nt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Zae(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ele(t){if(typeof atob>"u")throw Fae("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class G0{constructor(e,n){this.data=e,this.contentType=n||null}}function Mj(t,e){switch(t){case Jr.RAW:return new G0($j(e));case Jr.BASE64:case Jr.BASE64URL:return new G0(Fj(t,e));case Jr.DATA_URL:return new G0(nle(e),rle(e))}throw MT()}function $j(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function tle(t){let e;try{e=decodeURIComponent(t)}catch{throw eh(Jr.DATA_URL,"Malformed data URL.")}return $j(e)}function Fj(t,e){switch(t){case Jr.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw eh(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Jr.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw eh(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=ele(e)}catch(i){throw i.message.includes("polyfill")?i:eh(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class Uj{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw eh(Jr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=ile(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function nle(t){const e=new Uj(t);return e.base64?Fj(Jr.BASE64,e.rest):tle(e.rest)}function rle(t){return new Uj(t).contentType}function ile(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,n){let r=0,i="";BR(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(BR(this.data_)){const r=this.data_,i=Zae(r,e,n);return i===null?null:new Di(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Di(r,!0)}}static getBlob(...e){if($T()){const n=e.map(r=>r instanceof Di?r.data_:r);return new Di(Jae.apply(null,n))}else{const n=e.map(o=>v_(o)?Mj(Jr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Di(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FT(t){let e;try{e=JSON.parse(t)}catch{return null}return Wae(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sle(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function ole(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function jj(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ale(t,e){return e}class Xn{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||ale}}let Xp=null;function lle(t){return!v_(t)||t.length<2?t:jj(t)}function up(){if(Xp)return Xp;const t=[];t.push(new Xn("bucket")),t.push(new Xn("generation")),t.push(new Xn("metageneration")),t.push(new Xn("name","fullPath",!0));function e(s,o){return lle(o)}const n=new Xn("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Xn("size");return i.xform=r,t.push(i),t.push(new Xn("timeCreated")),t.push(new Xn("updated")),t.push(new Xn("md5Hash",null,!0)),t.push(new Xn("cacheControl",null,!0)),t.push(new Xn("contentDisposition",null,!0)),t.push(new Xn("contentEncoding",null,!0)),t.push(new Xn("contentLanguage",null,!0)),t.push(new Xn("contentType",null,!0)),t.push(new Xn("metadata","customMetadata",!0)),Xp=t,Xp}function cle(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Wn(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function ule(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return cle(r,t),r}function Vj(t,e,n){const r=FT(e);return r===null?null:ule(t,r,n)}function dle(t,e,n,r){const i=FT(e);if(i===null||!v_(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const u=t.bucket,d=t.fullPath,h="/b/"+o(u)+"/o/"+o(d),f=ra(h,n,r),p=Oj({alt:"media",token:c});return f+p})[0]}function UT(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR="prefixes",WR="items";function hle(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[zR])for(const i of n[zR]){const s=i.replace(/\/$/,""),o=t._makeStorageReference(new Wn(e,s));r.prefixes.push(o)}if(n[WR])for(const i of n[WR]){const s=t._makeStorageReference(new Wn(e,i.name));r.items.push(s)}return r}function fle(t,e,n){const r=FT(n);return r===null?null:hle(t,e,r)}class Fs{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(t){if(!t)throw MT()}function __(t,e){function n(r,i){const s=Vj(t,i,e);return zi(s!==null),s}return n}function ple(t,e){function n(r,i){const s=fle(t,e,i);return zi(s!==null),s}return n}function mle(t,e){function n(r,i){const s=Vj(t,i,e);return zi(s!==null),dle(s,i,t.host,t._protocol)}return n}function Lu(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=Nae():i=Rae():n.getStatus()===402?i=Aae(t.bucket):n.getStatus()===403?i=Pae(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function w_(t){const e=Lu(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=kae(t.path)),s.serverResponse=i.serverResponse,s}return n}function Bj(t,e,n){const r=e.fullServerUrl(),i=ra(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new Fs(i,s,__(t,n),o);return a.errorHandler=w_(e),a}function gle(t,e,n,r,i){const s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=e.bucketOnlyServerUrl(),a=ra(o,t.host,t._protocol),l="GET",c=t.maxOperationRetryTime,u=new Fs(a,l,ple(t,e.bucket),c);return u.urlParams=s,u.errorHandler=Lu(e),u}function yle(t,e,n){const r=e.fullServerUrl(),i=ra(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new Fs(i,s,mle(t,n),o);return a.errorHandler=w_(e),a}function vle(t,e,n,r){const i=e.fullServerUrl(),s=ra(i,t.host,t._protocol),o="PATCH",a=UT(n,r),l={"Content-Type":"application/json; charset=utf-8"},c=t.maxOperationRetryTime,u=new Fs(s,o,__(t,r),c);return u.headers=l,u.body=a,u.errorHandler=w_(e),u}function _le(t,e){const n=e.fullServerUrl(),r=ra(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(l,c){}const a=new Fs(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=w_(e),a}function wle(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function zj(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=wle(null,e)),r}function Wj(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let _="";for(let b=0;b<2;b++)_=_+Math.random().toString().slice(2);return _}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=zj(e,r,i),u=UT(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,h=`\r
--`+l+"--",f=Di.getBlob(d,r,h);if(f===null)throw Nj();const p={name:c.fullPath},y=ra(s,t.host,t._protocol),w="POST",m=t.maxUploadRetryTime,g=new Fs(y,w,__(t,n),m);return g.urlParams=p,g.headers=o,g.body=f.uploadData(),g.errorHandler=Lu(e),g}class Qg{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function jT(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{zi(!1)}return zi(!!n&&(e||["active"]).indexOf(n)!==-1),n}function ble(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o=zj(e,r,i),a={name:o.fullPath},l=ra(s,t.host,t._protocol),c="POST",u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},d=UT(o,n),h=t.maxUploadRetryTime;function f(y){jT(y);let w;try{w=y.getResponseHeader("X-Goog-Upload-URL")}catch{zi(!1)}return zi(v_(w)),w}const p=new Fs(l,c,f,h);return p.urlParams=a,p.headers=u,p.body=d,p.errorHandler=Lu(e),p}function Sle(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function s(c){const u=jT(c,["active","final"]);let d=null;try{d=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{zi(!1)}d||zi(!1);const h=Number(d);return zi(!isNaN(h)),new Qg(h,r.size(),u==="final")}const o="POST",a=t.maxUploadRetryTime,l=new Fs(n,o,s,a);return l.headers=i,l.errorHandler=Lu(e),l}const HR=256*1024;function Ele(t,e,n,r,i,s,o,a){const l=new Qg(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw Mae();const c=l.total-l.current;let u=c;i>0&&(u=Math.min(u,i));const d=l.current,h=d+u;let f="";u===0?f="finalize":c===u?f="upload, finalize":f="upload";const p={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":`${l.current}`},y=r.slice(d,h);if(y===null)throw Nj();function w(b,x){const E=jT(b,["active","final"]),D=l.current+u,S=r.size();let T;return E==="final"?T=__(e,s)(b,x):T=null,new Qg(D,S,E==="final",T)}const m="POST",g=e.maxUploadRetryTime,_=new Fs(n,m,w,g);return _.headers=p,_.body=y.uploadData(),_.progressCallback=a||null,_.errorHandler=Lu(t),_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xle={STATE_CHANGED:"state_changed"},er={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function q0(t){switch(t){case"running":case"pausing":case"canceling":return er.RUNNING;case"paused":return er.PAUSED;case"success":return er.SUCCESS;case"canceled":return er.CANCELED;case"error":return er.ERROR;default:return er.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tle=class{constructor(e,n,r){if(zae(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vl(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class Ile{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Fa.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Fa.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Fa.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw dd("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw dd("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw dd("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw dd("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw dd("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Cle extends Ile{initXhr(){this.xhr_.responseType="text"}}function hi(){return new Cle}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=up(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Nt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(Lj(i.status,[]))if(s)i=Aj();else{this.sleepTime=Math.max(this.sleepTime*2,Cae),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Nt.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=ble(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,hi,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=Sle(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,hi,n,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=HR*this._chunkMultiplier,n=new Qg(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=Ele(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,hi,i,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){HR*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=Bj(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,hi,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=Wj(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,hi,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=Rj(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=q0(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const s=new Tle(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(q0(this._state)){case er.SUCCESS:Vl(this._resolve.bind(null,this.snapshot))();break;case er.CANCELED:case er.ERROR:const n=this._reject;Vl(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(q0(this._state)){case er.RUNNING:case er.PAUSED:e.next&&Vl(e.next.bind(e,this.snapshot))();break;case er.SUCCESS:e.complete&&Vl(e.complete.bind(e))();break;case er.CANCELED:case er.ERROR:e.error&&Vl(e.error.bind(e,this._error))();break;default:e.error&&Vl(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e,n){this._service=e,n instanceof Wn?this._location=n:this._location=Wn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new fl(e,n)}get root(){const e=new Wn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return jj(this._location.path)}get storage(){return this._service}get parent(){const e=sle(this._location.path);if(e===null)return null;const n=new Wn(this._location.bucket,e);return new fl(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Dj(e)}}function kle(t,e,n){t._throwIfRoot("uploadBytes");const r=Wj(t.storage,t._location,up(),new Di(e,!0),n);return t.storage.makeRequestWithTokens(r,hi).then(i=>({metadata:i,ref:t}))}function Ale(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Hj(t,new Di(e),n)}function Rle(t){const e={prefixes:[],items:[]};return Gj(t,e).then(()=>e)}async function Gj(t,e,n){const i=await qj(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&await Gj(t,e,i.nextPageToken)}function qj(t,e){e!=null&&typeof e.maxResults=="number"&&Ab("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=gle(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,hi)}function Nle(t){t._throwIfRoot("getMetadata");const e=Bj(t.storage,t._location,up());return t.storage.makeRequestWithTokens(e,hi)}function Ple(t,e){t._throwIfRoot("updateMetadata");const n=vle(t.storage,t._location,e,up());return t.storage.makeRequestWithTokens(n,hi)}function Dle(t){t._throwIfRoot("getDownloadURL");const e=yle(t.storage,t._location,up());return t.storage.makeRequestWithTokens(e,hi).then(n=>{if(n===null)throw $ae();return n})}function Ole(t){t._throwIfRoot("deleteObject");const e=_le(t.storage,t._location);return t.storage.makeRequestWithTokens(e,hi)}function Kj(t,e){const n=ole(t._location.path,e),r=new Wn(t._location.bucket,n);return new fl(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lle(t){return/^[A-Za-z]+:\/\//.test(t)}function Mle(t,e){return new fl(t,e)}function Qj(t,e){if(t instanceof VT){const n=t;if(n._bucket==null)throw Lae();const r=new fl(n,n._bucket);return e!=null?Qj(r,e):r}else return e!==void 0?Kj(t,e):t}function $le(t,e){if(e&&Lle(e)){if(t instanceof VT)return Mle(t,e);throw Tc("To use ref(service, url), the first argument must be a Storage instance.")}else return Qj(t,e)}function GR(t,e){const n=e==null?void 0:e[kj];return n==null?null:Wn.makeFromBucketSpec(n,t)}function Fle(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:tE(i,t.app.options.projectId))}class VT{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=Cj,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Tae,this._maxUploadRetryTime=Iae,this._requests=new Set,i!=null?this._bucket=Wn.makeFromBucketSpec(i,this._host):this._bucket=GR(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Wn.makeFromBucketSpec(this._url,e):this._bucket=GR(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ab("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ab("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new fl(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new Uae(Pj());{const o=Yae(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const qR="@firebase/storage",KR="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yj="storage";function Ule(t,e,n){return t=me(t),kle(t,e,n)}function jle(t,e,n){return t=me(t),Ale(t,e,n)}function Vle(t){return t=me(t),Nle(t)}function Ble(t,e){return t=me(t),Ple(t,e)}function zle(t,e){return t=me(t),qj(t,e)}function Wle(t){return t=me(t),Rle(t)}function Xj(t){return t=me(t),Dle(t)}function Hle(t){return t=me(t),Ole(t)}function Yg(t,e){return t=me(t),$le(t,e)}function Gle(t,e){return Kj(t,e)}function qle(t=bL(),e){t=me(t);const r=sE(t,Yj).getImmediate({identifier:e}),i=Yq("storage");return i&&Jj(r,...i),r}function Jj(t,e,n,r={}){Fle(t,e,n,r)}function Kle(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new VT(n,r,i,e,Ps)}function Qle(){Hi(new sr(Yj,Kle,"PUBLIC").setMultipleInstances(!0)),Er(qR,KR,""),Er(qR,KR,"esm2017")}Qle();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Jp(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new Jp(r,this,this._ref))},n)}on(e,n,r,i){let s;return n&&(typeof n=="function"?s=o=>n(new Jp(o,this,this._ref)):s={next:n.next?o=>n.next(new Jp(o,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class YR{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new vs(e,this._service))}get items(){return this._delegate.items.map(e=>new vs(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=Gle(this._delegate,e);return new vs(n,this.storage)}get root(){return new vs(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new vs(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new QR(jle(this._delegate,e,n),this)}putString(e,n=Jr.RAW,r){this._throwIfRoot("putString");const i=Mj(n,e),s=Object.assign({},r);return s.contentType==null&&i.contentType!=null&&(s.contentType=i.contentType),new QR(new Hj(this._delegate,new Di(i.data,!0),s),this)}listAll(){return Wle(this._delegate).then(e=>new YR(e,this.storage))}list(e){return zle(this._delegate,e||void 0).then(n=>new YR(n,this.storage))}getMetadata(){return Vle(this._delegate)}updateMetadata(e){return Ble(this._delegate,e)}getDownloadURL(){return Xj(this._delegate)}delete(){return this._throwIfRoot("delete"),Hle(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw Dj(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(XR(e))throw Tc("ref() expected a child path but got a URL, use refFromURL instead.");return new vs(Yg(this._delegate,e),this)}refFromURL(e){if(!XR(e))throw Tc("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Wn.makeFromUrl(e,this._delegate.host)}catch{throw Tc("refFromUrl() expected a valid full URL but got an invalid one.")}return new vs(Yg(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){Jj(this._delegate,e,n,r)}}function XR(t){return/^[A-Za-z]+:\/\//.test(t)}const Yle="@firebase/storage-compat",Xle="0.3.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jle="storage-compat";function Zle(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new Zj(n,r)}function ece(t){const e={TaskState:er,TaskEvent:xle,StringFormat:Jr,Storage:Zj,Reference:vs};t.INTERNAL.registerComponent(new sr(Jle,Zle,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(Yle,Xle)}ece($n);const tce={apiKey:"AIzaSyAOumwOGF_a3j3v5RqF_OzMEzNrlASGRyE",authDomain:"potato-market-lab18.firebaseapp.com",projectId:"potato-market-lab18",storageBucket:"potato-market-lab18.appspot.com",messagingSenderId:"862520392764",appId:"1:862520392764:web:fa40b5561ca057dcfa5739"};$n.initializeApp(tce);$n.database();const af=$n.auth(),Wi=$n.firestore(),Rb=$n.storage(),th=Wi.collection("users"),b_=Wi.collection("UserWrite");var BT={};Object.defineProperty(BT,"__esModule",{value:!0});var e3=BT.recoilPersist=void 0;const nce=(t={})=>{if(typeof window>"u")return{persistAtom:()=>{}};const{key:e="recoil-persist",storage:n=localStorage}=t,r=({onSet:l,node:c,trigger:u,setSelf:d})=>{if(u==="get"){const h=s();typeof h.then=="function"&&h.then(f=>{f.hasOwnProperty(c.key)&&d(f[c.key])}),h.hasOwnProperty(c.key)&&d(h[c.key])}l(async(h,f,p)=>{const y=s();typeof y.then=="function"?y.then(w=>i(h,w,c.key,p)):i(h,y,c.key,p)})},i=(l,c,u,d)=>{d?delete c[u]:c[u]=l,a(c)},s=()=>{const l=n.getItem(e);return l==null?{}:typeof l=="string"?o(l):typeof l.then=="function"?l.then(o):{}},o=l=>{if(l===void 0)return{};try{return JSON.parse(l)}catch(c){return console.error(c),{}}},a=l=>{try{typeof n.mergeItem=="function"?n.mergeItem(e,JSON.stringify(l)):n.setItem(e,JSON.stringify(l))}catch(c){console.error(c)}};return{persistAtom:r}};e3=BT.recoilPersist=nce;const{persistAtom:t3}=e3(),Ur=If({key:"userId",default:null,effects_UNSTABLE:[t3]}),Pl=If({key:"userInformation",default:{location:"",agree:"",email:"",nickname:"",phoneNumber:"",profileImage:""},effects_UNSTABLE:[t3]});function rce(){const t=H.useRef(),[e,n]=H.useState(0),[r]=wt(Pl),[i]=wt(Ur),[s,o]=wt(Ox);let[a,l]=H.useState({chat:[]});const c=H.useRef(),u=qi(Wi,"comment","kviERzom8LpJItP3g23N"),d=Xc(u);Wi.collection("comment"),e||(d.then(y=>{l(y.data())}),n(1)),H.useEffect(()=>{},[Kf]),H.useMemo(()=>{s&&setTimeout(()=>{c.current.scrollTop=c.current.scrollHeight},150)},[e,s]);const h=()=>{const y=qi(Wi,"comment","kviERzom8LpJItP3g23N"),w=Xc(y);w.then(m=>{a=m.data(),a.chat.push({id:i?r.nickname:"수상한 고구마",coment:t.current.value,time:Date(),img:i?r.profileImage:"https://firebasestorage.googleapis.com/v0/b/potato-market-lab18.appspot.com/o/default_profile.png?alt=media&token=8d1123dc-f7dd-4439-a8e3-881b1ce4a401"}),t.current.value="",Oo(y,a).then(()=>{w.then(()=>{n(0)})})})},f=y=>{y.key==="Enter"&&h()},p=y=>{y.keyCode===27&&o(!1)};return v.jsx(v.Fragment,{children:s==!0?v.jsxs(ice,{children:[v.jsxs("div",{className:"header-div",children:[v.jsx("h2",{className:"chat-h2",children:"우리동네 감자 모임"}),v.jsx("button",{className:"reset-button",type:"button",onClick:()=>{Oo(u,{chat:[]}).then(()=>{d.then(()=>{n(0)})})}}),v.jsx("button",{className:"chat-false-button",type:"button",onClick:()=>{o(!1)}})]}),v.jsx("div",{className:"div-warpper",children:v.jsx("ul",{ref:c,children:e?a.chat.map((y,w)=>v.jsxs("li",{children:[v.jsx("img",{alt:y.img,src:y.img}),v.jsxs("div",{className:"chat-line",children:[v.jsx("p",{children:y.coment}),v.jsxs("p",{className:"time-class",children:[y.time.slice(7,23)," • ",y.id]})]})]},w)):v.jsx("p",{children:"렌더링중"})})}),v.jsx("div",{className:"comment-div",children:v.jsxs("div",{className:"comment-wrapper-div",children:[v.jsx("input",{ref:t,type:"text",onKeyDown:p,onKeyPress:f}),v.jsx("button",{className:"send-button",type:"button",onClick:h})]})})]}):null})}const ice=ee.div`
  z-index:9999;
  border-radius: 10px;
  background: #FBF7F2 url(${mZ}) no-repeat ;
  background-position: 0% 100%;
  position: fixed;
  right: 0;
  top: 23%;
  margin-right: 35px;
  width: 432.9px;
  height: 400px;
  box-shadow: 0 3px 7px 3px rgb(0 0 0 / 7%);
  & .header-div{
    width: 100%;
    position: relative;
    justify-content: flex-start;
    display:flex;
    align-items: center;
    border-radius: 10px 10px 0px 0px;
    color:black;
    height: 30px;
    background: #ffffff;
    width: 432.9px;
    font-weight: 500;
    padding: 0 20px;
    box-sizing: border-box;
  }
  & .chat-h2{
    width: 100%;
    height: 30px;
    line-height: 30px;
    margin:0;
    font-size:15px;
  }

  & .chat-false-button, & .reset-button{
    position:absolute;
    border-radius: 50%;
    border:none;
    width: 18px;
    height: 18px;
    background-color: pink;
  }
  & .chat-false-button{
    background: url(${gZ}) no-repeat, 100%;
    background-position: center;
    right:10px;
    background-size: contain;    
  }
  & .reset-button{
    right: 32px;
    background: url(${vZ}) no-repeat, 100%;
    background-position: center;
    background-size: contain;    
  }

  & .time-class{
    font-size:8px;
    position: absolute;
    bottom:-8px;
  }
  & .notice{
    color:white;
    background-color: gray;
  }  

  & ul{
    width: 405px;
    margin:5px 0;
    padding: 10px;
    overflow: auto;
    overflow-x: hidden;
    text-overflow:ellipsis;
    height: 270px;
  }
  & ul::-webkit-scrollbar {
    width: 12px;
  }
  & ul::-webkit-scrollbar-thumb {
    height: 30%;
    background: #AFDBAF;
    border-radius: 10px;
  }
  & ul::-webkit-scrollbar-track {
    background: white;
    border-radius: 10px;
  }
  & li{
    position: relative;
    display:flex;
    align-items: center;
    margin-bottom:8px;
  }
  & li img{
    margin: 10px 10px 0 10px;
    border-radius: 50%;
    width: 35px;
    height: 35px;
  }

  & .chat-line{
    min-height: 20px;
    margin-bottom:5px;
    margin-top: 10px;
    padding:5px;
    border-radius: 10px;
    border: 0.666px solid #F2F3F6;
    display: flex;
    align-items: center;
    background: #FFFFFF;
    max-width: 335px;
    letter-spacing: 1px;
  }
  & .chat-line p{
    max-width: 335px;
  }

  & li p:first-child{
    margin-right: 5px;
    margin-left: 5px;
  }
  & li p:nth{
    margin-right:10px;
  }

  & .comment-div{
    gap:5px;
    display:flex;
    justify-content: center;
    position: relative;
    margin-top: 20px;
    overflow: hidden;
    font-size: 15px;
  }
  & .comment-div input:focus {
    outline: none;
  }  
  & .comment-div input{
    padding:0 37px 0 15px;
    margin:0 auto;
    width: 250px;
    height: 30px;
    border: none;
    border-radius: 15px;
  }
  & .comment-wrapper-div{
    position: relative;
  }
  
  & .send-button{
    position: absolute;
    border: none;
    border-radius: 50%;
    width: 20px;
    height: 20px;
    background: url(${yZ}) no-repeat;
    background-position: center;
    background-size: contain;  
    right: 10px;
    top: 5px;
  }
  & .send-button img{
    width: 100%;
  }
`,sce="/assets/facebook-abfdc580.svg",oce="/assets/github-7a0dd11e.svg",ace="/assets/instagram-52ecb7f6.svg",lce="/assets/naverblog-0aad2663.svg",cce="/assets/youtube-ca398db9.svg";var Ua={};const uce=K3(pZ);Object.defineProperty(Ua,"__esModule",{value:!0});Ua.default=Ua.Normalize=WT=Ua.normalize=void 0;var n3=uce,zT=(0,n3.css)(['html{line-height:1.15;-webkit-text-size-adjust:100%;}body{margin:0;}main{display:block;}h1{font-size:2em;margin:0.67em 0;}hr{box-sizing:content-box;height:0;overflow:visible;}pre{font-family:monospace,monospace;font-size:1em;}a{background-color:transparent;}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted;}b,strong{font-weight:bolder;}code,kbd,samp{font-family:monospace,monospace;font-size:1em;}small{font-size:80%;}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline;}sub{bottom:-0.25em;}sup{top:-0.5em;}img{border-style:none;}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0;}button,input{overflow:visible;}button,select{text-transform:none;}button,[type="button"],[type="reset"],[type="submit"]{-webkit-appearance:button;}button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner{border-style:none;padding:0;}button:-moz-focusring,[type="button"]:-moz-focusring,[type="reset"]:-moz-focusring,[type="submit"]:-moz-focusring{outline:1px dotted ButtonText;}fieldset{padding:0.35em 0.75em 0.625em;}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal;}progress{vertical-align:baseline;}textarea{overflow:auto;}[type="checkbox"],[type="radio"]{box-sizing:border-box;padding:0;}[type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button{height:auto;}[type="search"]{-webkit-appearance:textfield;outline-offset:-2px;}[type="search"]::-webkit-search-decoration{-webkit-appearance:none;}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit;}details{display:block;}summary{display:list-item;}template{display:none;}[hidden]{display:none;}']),WT=Ua.normalize=zT,dce=(0,n3.createGlobalStyle)(zT);Ua.Normalize=dce;var hce=zT;Ua.default=hce;var r3=globalThis&&globalThis.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},HT=Mo(JR||(JR=r3([`
/* http://meyerweb.com/eric/tools/css/reset/
   v5.0.1 | 20191019
   License: none (public domain)
*/

html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, menu, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed,
figure, figcaption, footer, header, hgroup,
main, menu, nav, output, ruby, section, summary,
time, mark, audio, video {
  margin: 0;
  padding: 0;
  border: 0;
  font-size: 100%;
  font: inherit;
  vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure,
footer, header, hgroup, main, menu, nav, section {
  display: block;
}
/* HTML5 hidden-attribute fix for newer browsers */
*[hidden] {
    display: none;
}
body {
  line-height: 1;
}
menu, ol, ul {
  list-style: none;
}
blockquote, q {
  quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
  content: '';
  content: none;
}
table {
  border-collapse: collapse;
  border-spacing: 0;
}
`],[`
/* http://meyerweb.com/eric/tools/css/reset/
   v5.0.1 | 20191019
   License: none (public domain)
*/

html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, menu, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed,
figure, figcaption, footer, header, hgroup,
main, menu, nav, output, ruby, section, summary,
time, mark, audio, video {
  margin: 0;
  padding: 0;
  border: 0;
  font-size: 100%;
  font: inherit;
  vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure,
footer, header, hgroup, main, menu, nav, section {
  display: block;
}
/* HTML5 hidden-attribute fix for newer browsers */
*[hidden] {
    display: none;
}
body {
  line-height: 1;
}
menu, ol, ul {
  list-style: none;
}
blockquote, q {
  quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
  content: '';
  content: none;
}
table {
  border-collapse: collapse;
  border-spacing: 0;
}
`])));Iu(ZR||(ZR=r3(["",""],["",""])),HT);var JR,ZR;const fce=Iu`
  ${HT}
  ${WT}
  html{
    scroll-behavior: smooth;
  }
  body {
    font-family: "Pretendard Variable", Pretendard, -apple-system, BlinkMacSystemFont, system-ui, Roboto, "Helvetica Neue", "Segoe UI", "Apple SD Gothic Neo", "Noto Sans KR", "Malgun Gothic", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
  }

  ::selection {
    background: #CFA36E;
    color: #fff;
  }
  ::-moz-selection {
    background: #CFA36E;
    color: #fff;
  }

  .a11yHidden,
  legend {
    display: inline-block;
    overflow: hidden;
    position: absolute !important;
    clip: rect(0, 0, 0, 0);
    clip-path: inset(50%);
    width: 1px;
    height: 1px;
    margin: -1px;
  }

  fieldset {
    padding: 0;
  }
  button {
    cursor: pointer;
  }
`,bn="#CFA36E",dp="#71747A",hp="#868B94",GT="#ADB5BD",pl="#C4C4C4",S_="#D1D3D8",jr="#E9ECEF",lu="#F8F9FA",Us="#F2F3F6",pce=()=>v.jsxs(mce,{children:[v.jsxs(gce,{children:[v.jsxs("ul",{children:[v.jsx("li",{children:"중고거래"}),v.jsx("li",{children:"매물 등록하기"}),v.jsx("li",{children:"나의 매물보기"}),v.jsx("li",{children:"동네가게"}),v.jsx("li",{children:"채팅하기"})]}),v.jsxs("ul",{children:[v.jsx("li",{children:"당근 비즈니스"}),v.jsx("li",{children:"부동산 직거래"}),v.jsx("li",{children:"중고차 직거래"}),v.jsx("li",{children:"당근알바"}),v.jsx("li",{})]}),v.jsxs("ul",{children:[v.jsx("li",{children:"자주 묻는 질문"}),v.jsx("li",{children:"회사 소개"}),v.jsx("li",{children:"인재 채용"})]}),v.jsxs("div",{className:"download-app",children:[v.jsx("p",{children:"감자마켓 앱 다운로드"}),v.jsx("div",{className:"logobox",children:v.jsx("button",{type:"button",children:"Github"})})]})]}),v.jsxs(yce,{children:[v.jsxs("section",{className:"information",children:[v.jsxs("p",{children:[v.jsx("b",{children:"만든 사람 "}),"김동률 김미경 배상우 안유진 이성령"]}),v.jsxs("p",{children:[v.jsx("b",{children:"주소 "}),"서울특별시 구로구 디지털로 30길 28, 609호 (당근서비스)"]}),v.jsxs("p",{children:[v.jsx("b",{children:"전화 "})," 010-0000-0000"]}),v.jsxs("p",{children:[v.jsx("b",{children:"고객문의 "})," cs@daangnservice.com"]})]}),v.jsxs("section",{className:"snsgroup",children:[v.jsx("img",{alt:"페이스북",src:sce}),v.jsx("img",{alt:"인스타그램",src:ace}),v.jsx("img",{alt:"유튜브채널",src:cce}),v.jsx("img",{alt:"네이버블로그",src:lce})]})]}),v.jsxs(vce,{children:[v.jsxs("section",{className:"inquirygroup",children:[v.jsx("a",{href:"/",children:"제휴 문의"}),v.jsx("a",{href:"/",children:"광고 문의"}),v.jsx("a",{href:"/",children:"PR 문의"}),v.jsx("a",{href:"/",children:"IR 문의"})]}),v.jsxs("section",{className:"terms",children:[v.jsx("a",{href:"/",children:"이용약관"}),v.jsx("a",{href:"/",children:"개인정보처리방침"}),v.jsx("a",{href:"/",children:"위치기반서비스 이용약관"}),v.jsx("a",{href:"/",children:"이용자보호 비전과 계획"})]})]})]}),mce=ee.footer`
  border-top: 1px solid ${Us};
  margin-top: 1rem;
  padding-top: 1rem;
  display: flex;
  flex-direction: column;
  position: relative;
`,gce=ee.section` 
  display: flex;
  flex-direction: row;
  width : 100vw;
  height : auto;
  align-items: flex-start;
  position: relative;
  margin: 0 auto;
  padding-top: 3rem;
  /* justify-content: space-between; */

  @media (min-width: 375px) and (max-width: 1200px){
    margin-left: 2rem;
    height: 20rem;
    padding-top: 1rem;
     ul {
      margin: 0.5rem;
    }
  }

  ul {
    display: inline-block;
    font-size: 0.875rem;
    margin: 0 2rem;
    position: relative;
    right: 2rem;

    li {
      margin-bottom: 2rem;
      padding : 0;
    }
    
    a {
      text-decoration: none;
      color: #212325;
    }
  }
  
  .download-app {
    display: block;
    position: absolute;
    right: 10%;
    
    @media (min-width: 375px) and (max-width: 1200px){
      position: absolute;
      bottom : 0;
      left: 0;
    }

    p {
      font-weight: 700;
      font-size: 0.875rem;
    }
        
    .logobox {
      margin-top: 1rem;
      
      button {
        width: 140px;
        height: 40px;
        background-color: ${S_};
        color: #212325;
        background-position: 24px 12px; 
        background-image: url(${oce});
        background-repeat: no-repeat;
        background-size: 16px;
        cursor: pointer;
        vertical-align: middle;
        padding-left: 16px;  
        border: 0;
        border-radius: 6px;
        font-weight: 700;
      }
    }

  }
`,yce=ee.div`
  border-top: 1px solid ${Us};
  display: flex;
  flex-direction: row;
  width : 100vw;
  height : auto;
  align-items: flex-start;
  position: relative;
  margin: 1rem auto;
  justify-content: space-between;
  padding-top: 1rem;

  @media (min-width: 375px) and (max-width: 1200px){
    margin-left: 2rem;
  }

  .information {
    color: #868B94;
    font-size: 0.813rem;
    line-height: 1.25rem;
    /* position: absolute; */
    /* left: 0%; */
  }

  .snsgroup {
    width : 16rem;
    margin-left: 6rem;

    img {
     margin: 0 1rem;
    }

    @media (min-width: 375px) and (max-width: 1200px){
    margin-left: 2rem;
    width: 20rem;
    }
  }
`,vce=ee.div`
  width : 100vw;
  margin: 3rem auto;
  /* align-items:; */

  @media (min-width: 375px) and (max-width: 1200px){
    margin-left: 2rem;

    .inquirygroup {
    margin-left: 0.25rem;
    }

    a {
      margin : 0.5rem;
    }
  }

  .inquirygroup {
    margin-left: 0.5rem;
    margin-bottom: 1rem;
    position: relative;
    right: 1.5rem;
  }
  .terms {
    margin-left: 0.5rem;
    position: relative;
    right: 1.5rem;

  }
  a {
    text-decoration: none;
    color: #868B94;
    margin: 1rem;
    font-size: 0.813rem;
    line-height: 1.25rem;
    font-weight: 700;
  }
  
  a:hover {
    text-decoration : underline;
  }

`,qT=If({key:"toggle",default:!1}),_ce="/assets/header_toggle-9dd21ab6.svg",wce=$n.auth(),bce=ee.button`
  background-color: transparent;
  font-size: 1.125rem;
	font-weight: 700;
  border: 0;
  color: #212325;
  padding: 0;
  cursor: pointer;
`;function Sce(){const[t,e]=wt(qT);wt(Ur);const[n,r]=wt(Pl),[i,s]=wt(Ur),o=async()=>{try{await wce.signOut(),s(null),r({location:"",agree:"",email:"",nickname:"",phoneNumber:"",profileImage:""}),e(!1),window.location.replace("/")}catch(a){console.error(a)}};return v.jsx(bce,{onClick:o,children:"로그아웃"})}function Ece(){const[t,e]=wt(Ur);return wt(qT),v.jsx(xce,{children:t===null?v.jsxs("ul",{children:[v.jsx("li",{children:v.jsx(ps,{className:"textLink",to:"/SignIn",children:"로그인"})}),v.jsx("li",{children:v.jsx(ps,{className:"textLink",to:"/SignUp",children:"회원가입"})})]}):v.jsxs("ul",{children:[v.jsx("li",{children:v.jsx(Sce,{})}),v.jsx("li",{children:v.jsx(ps,{className:"textLink",to:"/myPage",children:"마이페이지"})})]})})}const xce=ee.div`
  background-image: url(${_ce});
	background-position: center;
	background-repeat: no-repeat;
	background-size: cover;
	width: 213px;
	height: 135px;
	position: absolute;
	right: 16px;
	top: 53px;
	padding : 32px 40px;
	box-sizing: border-box;
	z-index: 100;
	
	ul {
		font-size: 1.125rem;
		font-weight: 700;
		line-height: 2.2rem;
	}

	.textLink {
			text-decoration: none;
			color: #212325;

			&:focus, &:hover, &:visited, &:link, &:active {
				text-decoration: none;
			}
	}
	
`,i3="/assets/closebutton-8e17b340.svg",Tce="/assets/defaultProfile-deaa7bc1.svg",Ice="/assets/hamburger-b67bc2cd.svg",Cce="/assets/logo(symbol_name)-900da4c3.svg",kce="/assets/searchIcon-9a0df0cf.svg",Ace="/assets/xButton-2e7ecc3c.svg",s3=If({key:"searchKeywordState",default:""});function Rce(){const[t]=wt(Ur),[e]=wt(Pl),[n,r]=wt(qT),i=()=>{r(!n)},[s,o]=wt(s3),[a,l]=wt(Ox),c=Rs(),[u,d]=H.useState(!1),[h,f]=H.useState(!1),p=()=>{d(!0)},y=()=>{f(!0)};return v.jsxs(Nce,{children:[v.jsx(Pce,{className:"a11yHidden",children:"감자마켓"}),v.jsx(ps,{to:"/",children:v.jsx("img",{alt:"",src:Cce})}),v.jsx(eN,{as:"a",className:"primary",onClick:()=>c("/hotArticles"),children:"중고거래"}),v.jsx(eN,{as:"a",onClick:()=>c("/writeArticle"),children:"매물 등록하기"}),v.jsx(Dce,{children:v.jsx("input",{placeholder:"물품이나 동네를 검색해보세요",type:"text",value:s,onChange:w=>o(w.target.value)})}),v.jsx(Oce,{onClick:()=>{l(!0)},children:"채팅하기"}),v.jsxs(Lce,{children:[v.jsx(Mce,{"aria-label":"마이페이지",login:t,userInfo:e,onClick:i}),n&&v.jsx(Ece,{})]}),v.jsxs($ce,{children:[v.jsx(tN,{iconname:kce,onClick:p}),h?v.jsx(Vce,{onClick:()=>f(!1)}):v.jsx(tN,{iconname:Ice,onClick:y})]}),u?v.jsx(Fce,{searchKeyword:s,setSearchKeyword:o,setShowSearch:d}):null,h?v.jsx(Uce,{navigate:c,setChat:l,setShowMenu:f}):null]})}const Nce=ee.header`
  flex-direction: row;
  display: flex;
  height : 64px;
  margin-left: auto;
  margin-right: auto;
  justify-content: center;
  flex-wrap: wrap;
  position: relative;

  .a11yHidden {
    display: inline-block;
    overflow: hidden;
    position: absolute !important;
    clip: rect(0, 0, 0, 0);
    clip-path: inset(50%);
    width: 1px;
    height: 1px;
    margin: -1px;
  }

  Link {
    width: 101px;
    height: 26px;
  }

  img {
    width: 101px;
    height: 26px;
    display: inline-block;
    margin-top: 16px;
    margin-right: 35px;
  }

  .primary {
    color: ${bn};
  }
  
  .primary:hover {
    color: ${bn};
  }

  @media (max-width: 768px){

    justify-content: space-between;
    img {
      margin-left: 2rem;
    }
  }

`,Pce=ee.h1`
  margin-right: 35px;
  `,Dce=ee.form`
  margin-left: 5rem;
  margin-right: 3rem;
  margin-top: 12px;

  & input {
    color: ${hp};
    background-color: ${Us};
    font-size: 16px;
    width: 18rem;
    height : 40px;
    border: 0;
    border-radius: 6px;
    text-indent: 6px;
  }

  & input:focus {
    outline: none;
  }
  @media (min-width: 768px) and (max-width: 1023px){
    margin-left: 0;
    margin-right: 0;
    & input {
      width: 12rem;
    }
  }
  @media (max-width: 768px){
    display: none;
  }
`,eN=ee.button`
  background-color: transparent;
  border: 0;
  color: #4d5159;
  font-weight: 700;
  font-size: 18px;
  margin-right: 35px;
  display: block;
  line-height: 64px;
  cursor: pointer;
  &:hover {
    color: ${jr};
  }

  @media (max-width: 768px){
    display: none;
  }
`,Oce=ee.button`
  width: 6.125rem;
  margin-top: 12px;
  margin-right: 2rem;
  margin-left: 2rem;
  height: 40px;
  color: #212124;
  font-weight: 700;
  font-size: 16px;
  background-color: #FFF;
  display: inline-block;
  border: 1px solid #D1D3D8;
  border-radius: 4px;
  cursor: pointer;
  
  &:hover {
    background-color: ${lu};
  }
  @media (min-width: 768px) and (max-width: 1023px){
    margin-left: 1rem;
    margin-right: 1rem;
  }
  @media (max-width: 768px){
    margin-left: 1rem;
    display: none;
  }
`,Lce=ee.div`
  position: relative;
  z-index: 100;
`,Mce=ee.button`
  margin-top: 12px;
  margin-right: 21px;
  width: 36px;
  height: 36px;
  background-color: transparent;
  border: 0;
  border-radius: 50%;
  background: ${t=>t.login===null?`url(${Tce}) no-repeat center local`:`url(${t.userInfo.profileImage}) no-repeat center local`};
  background-size: 36px;
  background-clip: border-box;
  cursor: pointer;
  @media (max-width: 768px){
    display: none;
  }
`,$ce=ee.div`
  height: inherit;
  width: 7rem;
  display: flex;
  justify-content: space-around;
  margin-top: 1rem;
  margin-right: 1rem;

  @media (min-width: 768px) {
    display: none;
  }
`,tN=ee.button`
  border: 0;
  background-color: transparent;
  background: url(${t=>t.iconname}) no-repeat center local;
  width: 1.5rem;
  height: 1.5rem;
  cursor: pointer;

  @media (min-width: 768px) {
    display: none;
  }
`,Fce=({setShowSearch:t,searchKeyword:e,setSearchKeyword:n})=>v.jsxs(o3,{top:0,children:[v.jsx(zce,{placeholder:"물품이나 동네를 검색해보세요",type:"text",value:e,onChange:r=>n(r.target.value)}),v.jsx(Bce,{"aria-label":"검색 닫기",onClick:()=>t(!1)})]}),Uce=({setShowMenu:t,navigate:e,setChat:n})=>{const r=()=>{e("/hotArticles"),t(!1)},i=()=>{e("/writeArticle"),t(!1)},s=()=>{t(!1),n(!0)};return v.jsx(o3,{top:"64px",children:v.jsxs(jce,{children:[v.jsx("li",{children:v.jsx(K0,{onClick:r,children:"중고거래"})}),v.jsx("li",{children:v.jsx(K0,{onClick:i,children:"매물 등록하기"})}),v.jsx("li",{children:v.jsx(K0,{onClick:s,children:"채팅하기"})})]})})},o3=ee.div`
  position: fixed;
  top: ${t=>t.top};
  right: 0;
  bottom: 0;
  left: 0;
  z-index: 99;
  background-color: rgba(0, 0, 0, 0.6);

  @media (min-width: 768px) {
    display: none;
  }
`,jce=ee.ul`
  z-index: 100;
  position: absolute;
  border-top: 2px solid ${lu};
  transition: transform .3s, opacity .1s;
  
  li {
    padding: 1rem;
    width: 100vw;
    height: 1.25rem;
    background-color: #fff;
    line-height: 1.25rem;
  }

  & li:hover {
    background-color: ${jr};
  }

  @media (min-width: 768px) {
  display: none;
 }
`,Vce=ee.button`
  border: 0;
  background-color: transparent;
  background: url(${Ace}) no-repeat center local;
  width: 1.5rem;
  height: 1.5rem;
  cursor: pointer;

  @media (min-width: 768px) {
  display: none;
 }
`,K0=ee.button`
  background-color: transparent;
  border: 0;
  color: #212325;
`,Bce=ee.button`
  background-color: ${Us};
  border: 0;
  background: url(${i3}) no-repeat center;
  width: 1rem;
  height: 1rem;
  cursor: pointer;
  position: absolute;
  right: 0;
  top: 12px;
  margin-left: 1rem;

  @media (min-width: 768px) {
    display: none;
  }
`,zce=ee.input`
  color: ${hp};
  background-color: ${Us};
  font-size: 16px;
  width: 100vw;
  height : 40px;
  border: 0;
  border-radius: 6px;
  text-indent: 6px;
  padding-right: 3.5rem;
  -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
  -moz-box-sizing: border-box;    /* Firefox, other Gecko */
  box-sizing: border-box;         /* Opera/IE 8+ */

  & :focus {
    outline: none;
  }

  @media (min-width: 768px) {
    display: none;
  }
`;function Wce(){const[t,e]=wt(Ur),[n,r]=wt(Pl),[i,s]=H.useState(0);return H.useEffect(()=>{$n.auth().onAuthStateChanged(o=>{o?$n.firestore().collection("users").doc(o.uid).get().then(c=>{console.log(`로그인상태
UID : ${o.uid} 
닉네임 : ${c.data().nickname}`),e(o.uid),r({location:c.data().location,agree:c.data().agree,email:c.data().email,nickname:c.data().nickname,phoneNumber:c.data().phoneNumber,profileImage:c.data().profileImage}),s(1)}):(console.log("로그아웃상태"),s(1))})},[t]),v.jsxs(v.Fragment,{children:[v.jsx(fce,{}),v.jsxs("div",{className:"App",children:[v.jsx(Rce,{}),v.jsx(rce,{}),i?v.jsx(Lz,{}):null,v.jsx(pce,{})]})]})}const a3="/assets/errorImg-cc170311.svg";Iu`
  ${HT}
  ${WT}
  html{
    scroll-behavior: smooth;
  }
  body {
    font-family: "Pretendard Variable", Pretendard, -apple-system, BlinkMacSystemFont, system-ui, Roboto, "Helvetica Neue", "Segoe UI", "Apple SD Gothic Neo", "Noto Sans KR", "Malgun Gothic", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
  }

  ::selection {
    background: #CFA36E;
    color: #fff;
  }
  ::-moz-selection {
    background: #CFA36E;
    color: #fff;
  }

  .a11yHidden,
  legend {
    display: inline-block;
    overflow: hidden;
    position: absolute !important;
    clip: rect(0, 0, 0, 0);
    clip-path: inset(50%);
    width: 1px;
    height: 1px;
    margin: -1px;
  }

  fieldset {
    padding: 0;
  }
  button {
    cursor: pointer;
  }
`;const fp="#CFA36E",l3="#ADB5BD",Hce="#C4C4C4",E_="#D1D3D8";function Gce(t){const e=Rs();return v.jsxs(qce,{children:[v.jsx("h2",{children:t.title}),v.jsx(Kce,{alt:"에러 페이지",src:a3}),v.jsx(Qce,{onClick:()=>{e(-1)},children:"뒤로가기"})]})}const qce=ee.div`
  width: 100%;
  text-align: center;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
`,Kce=ee.img`
  width: 450px;
`,Qce=ee.button`
  display: block;
  width: 100px;
  height: 40px;
  margin: 40px auto;
  border: none;
  border-radius: 4px;
  background: ${fp};
  color: white;
  font-weight: bold;
  cursor: pointer;
  font-size: 16px;
  animation: moveBtn 3s infinite;

  @keyframes moveBtn{
    0%{transform: rotate(1deg)}
    3%{transform: rotate(-1deg)}
    6%{transform: rotate(0deg)}
    100%{transform: rotate(0deg)}
  }
`,x_="/assets/default_profile-b36669d6.png",Yce="/assets/question-0f6dad00.svg",Xce="/assets/check-6d24649b.svg",c3="/assets/제품사진-dc45ad40.png",Jce=ee.article`

    display: flex;
    flex-direction: column;
    width: 312px;
    min-width: 312px;
    justify-content: space-between;
    font-family: "Roboto";
    ul,li,ol { list-style: none}
  ;
`,Zce=ee.section`
display: flex;
  align-items: center;
  padding: 0 20px;
  height: 64px;
  border-bottom: 1px solid ${Us};
  font-weight: bold;

`,eue=ee.section`
  display: flex;
  justify-content: end;
  align-items: center;
  font-size: .75rem;
  color: ${hp};
  padding: 0 6px;
  height: 44px;
  min-height: 44px;
  border-bottom: 1px solid ${Us};
    button {
      border: none;
      background: transparent;
      font-size:.75rem;
      justify-items: center;
    }

    img {
      width:18px; 
      height:18px;
    }
  
`,tue=ee.section`
    li {
    display: flex;
    border-bottom:1px solid ${jr};
    flex-direction:row;
    justify-content: space-between;
    flex: 1 0 0%clg;
    padding: 16px;
    align-items: center;
  }
  div{
    display: flex;
    &:first-child{
      color: ${dp};
      display: flex;
      align-items: center;
      .chat-preview{
        flex-direction: column;
        font-size: 12px;
        div:first-child{
          margin-bottom: 4px;
        }
        .other-name{
          color: #212122;
          font-weight: bold;
          margin-right: 6px;
        }
        
      }
      .last-talk{
        /* overflow-x: hidden;
        text-overflow: ellipsis;
        white-space: nowrap; */
      }
    }
    .product-preview{
      margin-left:10px;
    }
  }
  img.other-profile{
    border-radius:50%;
    margin-right: 10px;
    border: 1px solid ${jr};
  }

  `,nue=ee.div`
    border-top: 1px solid ${jr};
    display: flex;
    align-items: center;
    font-size: 14px;
    height: 56px;
    min-height: 56px;
    padding-left: 10px;
    a {
    text-decoration: none; 
    font-size: 14px;
    color: ${hp};
    margin-right: 4px;
    };

  `,rue=ee.img.attrs({src:`${Yce}`})`
align-items: center;
width : 15px;
margin-bottom: 3px;
`,iue=ee.img.attrs({src:`${x_}`})`
    border-radius:50%;
    margin-right: 10px;
    border: 1px solid ${jr};
    width: 40px;
`;function sue(){return v.jsxs(Jce,{children:[v.jsxs("main",{children:[v.jsx(Zce,{children:"닉네임"}),v.jsxs(eue,{children:["안읽은 메세지만 보기",v.jsx("button",{type:"button",children:v.jsx("img",{src:Xce,alt:"안읽은 메세지만 보기"})})]}),v.jsx(tue,{children:v.jsx("ul",{children:v.jsxs("li",{className:"chat-list",children:[v.jsxs("div",{children:[v.jsx(iue,{alt:"프로필"}),v.jsxs("div",{className:"chat-preview",children:[v.jsxs("div",{children:[v.jsx("span",{className:"other-name",children:"상대방"}),v.jsx("span",{className:"other-location",children:"지역"}),v.jsx("span",{children:"﹒"}),v.jsx("span",{className:"real-daytime",children:"날짜"})]}),v.jsx("div",{className:"last-talk",children:v.jsx("span",{children:"마지막 대화"})})]})]}),v.jsx("div",{className:"product-preview",children:v.jsx("img",{src:c3,width:"40px",alt:"제품사진"})})]})})})]}),v.jsxs(nue,{children:[v.jsx("a",{href:"#",children:"자주묻는 질문"}),v.jsx(rue,{})]})]})}const oue="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFESURBVHgB3ZYxTsNAEEX/XygocwOuwBEsCiQ6bkB6FBGKIEUpSAqwkEHBIvRwAzoKJOQjcAS4gU+wwxja9bJZxSsrr7CLkf3X339nh1Dy4ulKaMcQDtAFlJpiHqaTswXzexWzMkcCVGdh9DJGImh4bvTejY1uBgaJSS6466ldEPKJCAQ80NtyLcFGbDoZVYggLx4bUWctuaW8KVbiLAAVyC/EvFTTaEVOXLVWS3UVGUQQg++p/qSU5LMV+40IDM2+iAzXEtTG9zKLT2mmSx66aj3a+DSn178rjUAtbQtce0r1H7Bl8/6HeNLdH0sN+arrrBGA/G3yoGPOY6ktQ3tpfrfK1MUgwf5Y2hwxTdcPIfTrvILKUiJT6mP7R4xGMCj6G6I2AimRCJ2By52P97fq8OhYTyPo4MM9dIGO+tpEbmeXo/kPThNv/X2CylQAAAAASUVORK5CYII=",aue="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKDSURBVHgBvVZdchJBEO6e3aCPHAFPAJzAcALhBMJjApZFFVHBh8QHoTRUIZWYPCaeIPEEkBNkPYF7A3nRSoCdtnv5kfCzMxKSrwp2dqa3v5me/kOwQOPwaJvAeQGgtwEpAYTxcAGph4QegfIQgu/VvVddky6MJPr8NQ+K9okgATZA8Enjh/dviuerRZYRtU4TNAwueJiCdcDE6DiZannHn19S8xP15slLCobXa5MJ2CK84et68yi7uJdZsk8nWVD6AjYJVPlaZffbAmFoRjnZxCE2hx66Tnpi3n8mDYLOA5AJ4mN/gCmheKO1J66H1Efx+AmhuD48MHDMgaOgxs5yKQ5sQI9HCaMFWFaB6hJQapUsAmWURsiu1DFw09VKKQNEBTDA1SrzrlLMRclqgqxSgMlVArdPb3ojba4PBvzZ6vsmWUR8jvXD4188XuWdHirdJq1egzkR2Mj23AgyQYoVnIEdbGTjCizApjhXiJfrrs9CCHsmoVunXxaHQE7Ki2zgVyvFwo3TNzqWcClYpmQOWzoWejK7e3t+TcqRPJ8MYlmTHs6jnuK4uTIKEu0ftFrx2l7pCxGm+dcWM0pcSe07aJ3FbZKHJvoRHfh34XESzs3XOCGLDX/L98ZyJhsMq0WjefzTKpdKYQXsAgahVUi7SR7nrZI+f1urlJ654YvcA5LZ/aWwAjGByo8mNM8h2GBy11NpTgD3q/JRGJ9OhtM4xKGTA4sQ+X8yLgADJzN5nRJWqzs+t3xl2DQCpyC6FwhDUmnvkDZzUj4Zh0+h9nb3TgZa3iY2ThOwFXTu0QV4ckWzJ4sknBI/ViO8QMzJQZPi4klJqeizrT7/CcmVQn1p0+r/BfNZKEpiO+kdAAAAAElFTkSuQmCC",lue="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGcSURBVHgB7VZNUsIwFH4v7QH0BI430BvgDeAEwlKho8zwM4UNXSiOsJBR1uIJ5AjcQI7AEVw6FvvMKxQhkKKWdKPfTGaSL0m/NO+9b4LXnYcXADiCFIAAI5GWGIMAMgJSxr8gIMIEkF5hR9ALskggcm6ldNioOPtIWJBsYmG9IKHXqJ8Po6FbKw4IqAemBHFqDVXOt6d3YErQdc8mKtcql81dabtzn1G5q9t+YpOISRpxurZYwAUkhK2bIKJ8u9uXneApOgBzmrU9PrrM5K0HsuMmZwKYnw82rkHEQaNauuT+Tbd/EBBl476ZzGnYFHzhRcM3670QGoUpQSQqLGdzmMWSg18LsttobI0C8tyqM1J55gj1BhGTpTBB3z4Om3pNctysOy3d1mbF4ZiOvy8o/wp964Svi5sVYA4iH53PwRZIp/ras1Xww1qJTa1WHEuhWWykx25yIRXzNd7aQeSbZiXfOTZx1/VTyFJ5Xi4VYVKMoZbKQlAgDnctxlBLZeE0gWzSyh7BFCgsrz17icgSmMcfeLXJDBpBehh/AnH7r4TtbP5CAAAAAElFTkSuQmCC",cue="/assets/hambuger_menu-c60d0ca7.svg",uue=ee.button`
border: none;
background-color: transparent;
display: inline-flex;
    justify-content: center;
    align-items: center;
    border-radius: 4px;
    padding: 0 10px;
    width: 24px;
    height: 24px;
  &:hover:active{
    background-color: ${pl};
    background-size: 100%;
    transition: background-color 1s ease-out;
  } 
`,due=ee.ul`
    position: absolute;
    right: 0;
    top: 60px;
    border: 1px solid ${GT};
    border-radius: 8px;
    padding: 10px;
    font-size: .875rem;
    background-color:${Us};
    color: ${dp};
    will-change: opacity;
    animation: 0.3s ease-in 0s 1 normal none running fadeIn;
    z-index: 999;
    li{
      padding: 6px;
    }
`;function hue({isToggleOpen:t,setIsToggleOpen:e}){const n=()=>{e(!t)};return v.jsxs(v.Fragment,{children:[v.jsx(uue,{type:"button",onClick:n,children:v.jsx("img",{src:cue,alt:"더보기"})}),t&&v.jsxs(due,{children:[v.jsx("li",{children:"알림음 끄기"}),v.jsx("li",{children:"대화상대 차단하기"}),v.jsx("li",{children:"채팅방 나가기"})]})]})}const fue="_main_1rkv1_1",pue="_header_1rkv1_11",nN={main:fue,header:pue},mue=ee.section`
  display: flex;
  justify-content: space-between;
  align-items: center;
  height: 70px;
  min-height: 64px;
  border-bottom: 1px solid ${jr};
    div{
      display: flex;
      align-items: center;
        span{
          &:nth-child(2){
            color: ${GT};
            font-size:12px;
            font-weight: 600;
          }
          &:nth-child(3){
          
            border:1px solid ${bn};
            border-radius: 1000px;
            color: ${bn};
            text-align: center;
            font-size: 10px;
            padding: 3px 5px;
            margin-left: 5px;
          }
      }
  }
`,gue=ee.img.attrs({src:`${x_}`})`
    border-radius:50%;
    margin-right: 10px;
    border: 1px solid ${jr};
    width: 40px;
`,yue=ee.section`
    display: flex;
    flex-direction: row;
    border-bottom: 1px solid ${jr};
    justify-content: space-between;
    align-items: center;
    padding: 10px 20px;
    img{
      margin-right: .75rem;
    }
    div{
      font-size: .875rem;
      .product-name-price{
        display: flex;
        flex-direction: column;
        span {
          margin-bottom: 2px;
          
          &:last-child{
            font-weight: 600;
          }
        }
      }
    }
    .sale-label{
      border: 1px solid ${GT};
      border-radius: 6px;
      padding: 7px;
      font-weight: 600;
    }
    
    a {
      text-decoration: none;
      color: inherit;
      display: flex;
      align-items: center;
    }



`;function vue(){const[t,e]=H.useState(!1);return v.jsxs("article",{className:nN.main,children:[v.jsxs(mue,{className:nN.header,children:[v.jsxs("div",{children:[v.jsx(gue,{}),v.jsx("span",{children:"상대방이름"}),v.jsx("span",{children:"36.7℃"})]}),v.jsx(hue,{isToggleOpen:t,setIsToggleOpen:e})]}),v.jsxs(yue,{children:[v.jsx("div",{children:v.jsxs("a",{href:"/",children:[v.jsx("img",{src:c3,width:"40px",alt:"제품사진"}),v.jsxs("div",{className:"product-name-price",children:[v.jsx("span",{children:"제품명"}),v.jsx("span",{children:"제품가격"})]})]})}),v.jsx("div",{className:"sale-label",children:"판매중"})]})]})}const _ue="_main_1pocm_5",wue="_chatRecord_1pocm_23",bue="_addMessageBox_1pocm_65",Q0={main:_ue,chatRecord:wue,addMessageBox:bue},Sue=ee.section`
position: relative;
  border: 1px solid ${lu};
  border-radius: 10px;
  padding:20px;
  margin: 20px;
  display: inline-flex;
  justify-content: center;
  align-items: center;
  background-color: ${lu};
  font-size: .875rem;
  color: ${hp};
`,rN=ee.section`
  margin:0 auto;
  border: 1px solid ${S_};
  border-radius: 14px;
  width: fit-content;
  padding: 5px 12px;
  font-size: .875rem;
  color: ${dp};
`,iN=ee.section`
  display:none;
`,Eue=ee.img.attrs({src:`${x_}`})`
    border-radius:50%;
    margin-right: 10px;
    border: 1px solid ${jr};
    width: 40px;
`,xue=ee.div`
  display: flex;
  flex-direction: row;
  align-items: center;
  span{

    padding: 10px 14px;
      max-width: 484px;
      font-size: 14px;
      border-radius: 2px 20px 20px;
      background-color: ${jr};
      color:${dp};
  }  
   
`,Tue=ee.div`
  display: flex;
  justify-content: end;
  span{
      padding: 10px 14px;
      margin-top: 10px;
      max-width: 484px;
      font-size: 14px;
      border-radius: 20px 2px 20px 20px;
      background-color:${bn};
      color: white;

    }

`,Iue=ee.section`
display: flex;
flex-direction: column;
justify-content: end;
form{
  display: flex;
  justify-content: space-between;
    flex-direction: column;
    position: relative;
    border: 1px solid #212121;
    margin-top: 15px;
    border-radius: 8px;
    height: 125px;
}
textarea{
      margin: 15px 15px 0px;
      resize: none;
      font-size: 14px;
      border: none;
      outline: none;
      color: #212121;
} 
div{
  margin: 3px 10px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  img{
    margin-right: 20px;
    width: 20px;
  }
  span{
    display: flex;
    align-items: center;
    margin-right: 10px;
    color:${S_};
  }
}
`,Cue=ee.button`
  border: none;
  background-color: ${jr};
  border-radius: 4px;
  color: ${lu};
  width: 64px;
  height: 32px;
  margin-left: 10px;
`;function kue(){const[t,e]=H.useState(""),[n,r]=H.useState([]),i=o=>{o.preventDefault(),t.trim()&&(r(a=>[...a,t]),e(""))},s=o=>{e(o.target.value)};return v.jsxs("article",{className:Q0.main,children:[v.jsx(vue,{}),v.jsx(Sue,{children:v.jsx("span",{children:"000님은 당근페이 사용자예요. 채팅방에서 바로 송금할 수 있어요."})}),v.jsxs("section",{className:Q0.chatRecord,children:[v.jsx(rN,{children:"0000년 00월 00일"}),v.jsxs(xue,{children:[v.jsx(Eue,{alt:"상대방 프로필 사진"}),v.jsx("span",{children:"채팅내용"})]}),v.jsx(iN,{children:"오전 1:55"}),v.jsx(rN,{children:"0000년 00월 00일"}),v.jsxs("div",{children:[v.jsx(iN,{children:"오전 1:55"}),v.jsx(Tue,{children:v.jsx("span",{children:"채팅"})})]}),n.map((o,a)=>v.jsx("span",{className:Q0.addMessageBox,children:o},a))]}),v.jsx(Iue,{children:v.jsxs("form",{onSubmit:i,children:[v.jsx("textarea",{className:"textbox",placeholder:"메세지를 입력해주세요",value:t,maxLength:1e3,onChange:s}),v.jsxs("div",{children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"file-input",children:v.jsx("img",{id:"file-input",src:lue,alt:"이미지 파일 추가 "})}),v.jsx("label",{htmlFor:"file-input",children:v.jsx("img",{id:"file-input",src:oue,alt:"단축어"})}),v.jsx("label",{htmlFor:"file-input",children:v.jsx("img",{id:"file-input",src:aue,alt:"이모티콘"})})]}),v.jsxs("div",{children:[v.jsxs("span",{className:"text-length",children:[t.length,"/1000"]}),v.jsx(Cue,{type:"submit",children:"전송"})]})]})]})})]})}const Aue="_main_1m9u3_15",Rue={main:Aue};function Nue(){return v.jsx(v.Fragment,{children:v.jsxs("main",{className:Rue.main,children:[v.jsx(sue,{}),v.jsx(kue,{})]})})}function KT(t){let e=t<0?!1:t;if(t<1e4)return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");let n=["","만","억","조","경"],r=1e4,i=n.length,s=[],o="";for(let a=0;a<i;a++){let l=e%Math.pow(r,a+1)/Math.pow(r,a);l=Math.floor(l),l>0&&(s[a]=l)}for(let a=0;a<s.length;a++)s[a]&&(o=String(s[a])+n[a]+`${o%1e4===0?"":" "}`+o);return o}const Pue=ee.div`
  & .product{
    display: inline-block;
    width:201px;
    text-decoration:none;
    color: black;
  }
`,Due=ee.div`
  margin-bottom: 7px;
  width:201px;
  display:flex;
  flex-flow: column;
  & > *{
  margin-bottom: 4px;
  }
`,Oue=ee.div`
  margin:0;
  & img{
    display:block;
    border-radius: 12px;
    width:201px;
    height: 201px ;
    overflow:hidden;
    object-fit: cover;
  }
`,Lue=ee.div`
  flex-flow: row;

  & span{
    margin-top:5.5px;
    font-size: 12px;
    color: #868E96;
  }
  & span::after{
    content: '•';
    margin : 0 4px;  
  }
  & span:last-child::after{
    content:'';
  }
`,Mue=ee.img`
  
  width:100%;
  height:100%;
  
`,$ue=ee.h3`
  margin-top : 12px;
  font-weight: 400;
  font-size: 16px;
  height: 20px;
  overflow:hidden;
  white-space:nowrap;
  text-overflow:ellipsis;
`,Fue=ee.span`
  font-weight: 700;
  margin-top:5px;
`,Uue=ee.span`
  font-size: 13px;
  margin-top: 5px;
`;function T_({title:t,price:e,heart:n,chat:r,imgsrc:i,id:s,check:o,location:a}){return v.jsx(Pue,{children:v.jsxs(ps,{to:`/detailarticle/${s}`,className:"product",rel:"noopener noreferrer",children:[v.jsx(Oue,{children:v.jsx("div",{children:v.jsx(Mue,{alt:"상품 자세히 보기",src:i[0]!==void 0?i:"https://firebasestorage.googleapis.com/v0/b/patato-market.appspot.com/o/no_image.jpg?alt=media&token=d2d005ba-9dbb-40cb-bd61-4d47f5118b2c"})})}),v.jsxs(Due,{children:[v.jsx($ue,{children:t}),v.jsxs(Fue,{children:[KT(e),"원"]}),v.jsxs(Uue,{children:[a.sido," ",a.sigungu," ",a.bname]})]}),v.jsxs(Lue,{children:[v.jsxs("span",{children:["조회 ",o]}),v.jsxs("span",{children:["관심 ",n]}),v.jsxs("span",{children:["채팅 ",r]})]})]})})}T_.defaultProps={imgsrc:["https://firebasestorage.googleapis.com/v0/b/patato-market.appspot.com/o/%E1%84%80%E1%85%A5%E1%84%8B%E1%85%AE%E1%86%AF%E1%84%85%E1%85%B5%E1%84%8E%E1%85%B5.png?alt=media&token=f23ce701-2450-495f-8166-2e1049699b2b"],title:"상품 이름",price:505445,location:"인천시 부평구 산곡동",heart:0,chat:0};const QT=ee.section`
  margin: 35px auto;
  display: grid;
  gap: 55px;
  grid-template-columns: repeat(4, 1fr);
  grid-template-rows: 309px;
  & .loading{
    left:43%;
    position: absolute;
  }
  @media (max-width: 480px){
    grid-template-columns: repeat(1, 1fr);
  }
  @media (min-width: 481px) and (max-width: 767px){
    grid-template-columns: repeat(2, 1fr);
  }
  @media (min-width: 768px) and (max-width: 1023px){
    grid-template-columns: repeat(3, 1fr);
  }
`;function jue(){const t=Rs(),[e,n]=H.useState(0),[r,i]=H.useState([]),[s,o]=wt(Ox);return H.useEffect(()=>{b_.onSnapshot(a=>{const l=a.docs.map(c=>({id:c.id,...c.data()}));l.sort((c,u)=>u.check-c.check),i(l.slice(0,8)),n(1)})},[]),v.jsxs("main",{children:[v.jsx(Vue,{}),v.jsxs(u3,{children:[v.jsxs("div",{className:"home-main-description",children:[v.jsxs("h2",{children:["당신 근처의",v.jsx("br",{}),"감자마켓"]}),v.jsxs("p",{children:["중고 거래부터 동네 정보까지, 이웃과 함께해요. ",v.jsx("br",{}),"가깝고 따뜻한 당신의 근처를 만들어요."]})]}),v.jsx("div",{className:"home-main-image",children:v.jsx("img",{alt:"",src:"https://d1unjqcospf8gs.cloudfront.net/assets/home/main/3x/image-top-68ba12f0da7b5af9a574ed92ca8b3a9c0068db176b566dd374ee50359693358b.png"})})]}),v.jsxs(Bue,{children:[v.jsx("div",{className:"home-main-image",children:v.jsx("img",{alt:"",src:"https://d1unjqcospf8gs.cloudfront.net/assets/home/main/3x/image-1-39ac203e8922f615aa3843337871cb654b81269e872494128bf08236157c5f6a.png"})}),v.jsxs("div",{className:"home-main-description",children:[v.jsxs("h2",{children:["우리 동네",v.jsx("br",{})," 중고 직거래 마켓"]}),v.jsx("p",{children:"동네 주민들과 가깝고 따뜻한 거래를 지금 경험해보세요."}),v.jsxs("div",{className:"link-wrap",children:[v.jsx(ps,{to:"/hotarticles",children:"인기매물 보기"}),v.jsx("button",{onClick:()=>{o(!0)},children:"주민들과 소통하기"})]})]})]}),v.jsxs(zue,{children:[v.jsx("h2",{children:"중고거래 인기매물"}),v.jsx(QT,{className:"Hot8",children:e?r.map(({content:a,title:l,price:c,side:u,imgsrc:d,id:h,check:f,heart:p},y)=>v.jsx(T_,{check:f,content:a,heart:p,id:h,imgsrc:d,price:c,side:u,title:l},y)):v.jsx("p",{children:"Render Failed"})}),v.jsx(sN,{as:"a",onClick:()=>t("/hotArticles"),children:"인기매물 더보기"})]}),v.jsxs(Wue,{children:[v.jsx(sN,{children:"중고거래 인기검색어"}),v.jsxs("ul",{children:[v.jsx("li",{children:v.jsx("a",{href:"/",children:"자전거"})}),v.jsx("li",{children:v.jsx("a",{href:"/",children:"의자"})}),v.jsx("li",{children:v.jsx("a",{href:"/",children:"아이폰"})}),v.jsx("li",{children:v.jsx("a",{href:"/",children:"냉장고"})}),v.jsx("li",{children:v.jsx("a",{href:"/",children:"노트북"})}),v.jsx("li",{children:v.jsx("a",{href:"/",children:"패딩"})}),v.jsx("li",{children:v.jsx("a",{href:"/",children:"아이패드"})}),v.jsx("li",{children:v.jsx("a",{href:"/",children:"모니터"})}),v.jsx("li",{children:v.jsx("a",{href:"/",children:"스타벅스"})}),v.jsx("li",{children:v.jsx("a",{href:"/",children:"책상"})})]})]})]})}const I_="#212529",Vue=Iu`
  body {
    color: ${I_};
    background-color: #FFF;
    min-height: 100vh;
  }
  h2 {
    font-weight: 700;
    font-size: 3rem;
    text-align: center;
  }
  @media (min-width: 768px) and (max-width: 1200px){
    h2 {
      font-size: 2.5rem;
    }
  }
  @media (max-width: 768px){
    h2 {
      font-size: 1.5rem;
    }
  }
`,u3=ee.section`
  background-color: #FBF7F2;
  display: flex;
  justify-content: center;
  max-height: 47.5rem;
  padding: 30px 200px;
  .home-main-description {
    display: flex;
    flex-direction: column;
    justify-content: center;
    h2 {
      line-height: 1.3;
      text-align: left;
      margin-bottom: 30px;
    }
    p {
      font-size: 1rem;
      line-height: 1.5;
    }
  }
  .home-main-image {
    width: 60%;
    margin: auto 0;
    img {
      padding: 50px 0 0 50px;
      width: 100%;
      height: auto;
      box-sizing: border-box;
    }
  }
  @media (max-width: 1200px){
    .home-main-description h2 {
      margin-bottom: 10px;
    }
    .home-main-image img {
      padding: 20px 0 0 20px;
    }
  }
  @media (min-width:768px) and (max-width: 1200px){
    padding: 30px 100px;
  }
  @media (max-width: 768px){
    padding: 50px;
    .home-main-description {
      padding-left: 0;
    }
  }
`,Bue=ee(u3)`
  background-color: #FFF;
  .home-main-image {
    width: 40%;
    img {
      padding: 0;
    }
  }
  .home-main-description {
    width: 60%;
    margin-left: 100px;
  }
  .link-wrap {
    display: flex;
    width: 100%;
    gap: 1.174rem;
    margin-top: 30px;
    a, 
    button {
      color: ${I_};
      font-size: 1.125rem;
      font-weight: 700;
      background-color: ${Us};
      text-decoration: none;
      padding: 1rem 1.5rem;
      border: 0;
      border-radius: 6px;
      white-space: nowrap;
    }
  }
  @media (max-width: 1200px){
    .link-wrap {
      margin-top: 10px;
    }
  }
  @media (min-width:768px) and (max-width: 1200px){
    .home-main-description {
      margin-left: 50px;
    }
  }
  @media (max-width: 768px){
    .home-main-description {
      margin-left: 20px;
    }
    .link-wrap {
      flex-direction: column;
      width: fit-content;
      a, 
      button {
        padding: 0.5rem 1rem;
        font-size: 1rem;
      }
    }
  }
`,zue=ee.section`
  background-color: ${lu};
  padding-top: 125px;
  padding-bottom: 5rem;
  margin: 0 auto;
  .Hot8 {
    width: 100%;
    max-width: 980px;
    margin: 60px auto 5rem;
  }
  a {
    display: flex;
    justify-content: center;
  }
`,sN=ee.button`
  margin-left: auto;
  margin-right: auto;
  background-color: transparent;
  border: 0;
  color: ${I_};
  font-weight: 700;
  text-decoration: underline;
  display: block;
  text-align: center;
  cursor: pointer;
`,Wue=ee.section`
  width: 100%;
  max-width: 980px;
  margin: 1.438rem auto 0;
  padding: 0 1rem 1rem;
  box-sizing: border-box;
  ul {
    display: flex;
    justify-content: center;
    column-gap: 3.2rem;
    flex-wrap: wrap;
    margin-top: 1rem;
  }
  ul li {
    display: inline-block;
    vertical-align: center;
    a {
      color: ${I_};
      text-decoration: none;
      line-height: 30px;
      white-space: nowrap;
    }
  }
`,Hue="/assets/loading-spinner-524188d7.gif",Gue=ee.img`
  position: absolute;  
  left:40%;
  width:240px;

`,lf=({className:t})=>v.jsx(v.Fragment,{children:v.jsx(Gue,{alt:"로딩 중입니다.",className:t,src:Hue})}),que=ee.div`
  & .product{
    display: inline-block;
    width:201px;
    text-decoration:none;
    color: black;
  }
`,Kue=ee.div`
  margin-bottom: 7px;
  width:201px;
  display:flex;
  flex-flow: column;
  & > *{
  margin-bottom: 4px;
  }
`,Que=ee.div`
  margin:0;
  & img{
    display:block;
    border-radius: 12px;
    width:201px;
    height: 201px ;
    overflow:hidden;
    object-fit: cover;
  }
`,Yue=ee.div`
  flex-flow: row;

  & span{
    margin-top:5.5px;
    font-size: 12px;
    color: #868E96;
  }
  & span::after{
    content: '•';
    margin : 0 4px;  
  }
  & span:last-child::after{
    content:'';
  }
`,Xue=ee.img`
  
  width:100%;
  height:100%;
  
`,Jue=ee.h3`
  margin-top : 12px;
  font-weight: 400;
  font-size: 16px;
  height: 20px;
  overflow:hidden;
  white-space:nowrap;
  text-overflow:ellipsis;
`,Zue=ee.span`
  font-weight: 700;
  margin-top:5px;
`,ede=ee.span`
  font-size: 13px;
  margin-top: 5px;
`;function d3({title:t,price:e,heart:n,chat:r,imgsrc:i,id:s,check:o,location:a}){return v.jsx(que,{children:v.jsxs(ps,{to:`/detailarticle/${s}`,className:"product",rel:"noopener noreferrer",children:[v.jsx(Que,{children:v.jsx("div",{children:v.jsx(Xue,{alt:"상품 자세히 보기",src:i[0]!==void 0?i:"https://firebasestorage.googleapis.com/v0/b/patato-market.appspot.com/o/no_image.jpg?alt=media&token=d2d005ba-9dbb-40cb-bd61-4d47f5118b2c"})})}),v.jsxs(Kue,{children:[v.jsx(Jue,{children:t}),v.jsxs(Zue,{children:[KT(e),"원"]}),v.jsxs(ede,{children:[a.sido," ",a.sigungu," ",a.bname]})]}),v.jsxs(Yue,{children:[v.jsxs("span",{children:["조회 ",o]}),v.jsxs("span",{children:["관심 ",n]}),v.jsxs("span",{children:["채팅 ",r]})]})]})})}d3.defaultProps={imgsrc:["https://firebasestorage.googleapis.com/v0/b/patato-market.appspot.com/o/%E1%84%80%E1%85%A5%E1%84%8B%E1%85%AE%E1%86%AF%E1%84%85%E1%85%B5%E1%84%8E%E1%85%B5.png?alt=media&token=f23ce701-2450-495f-8166-2e1049699b2b"],title:"상품 이름",price:505445,location:"인천시 부평구 산곡동",heart:0,chat:0};const oN=({newArr:t,searchKeyword:e,setHasResults:n})=>{const r=t.filter(({title:i})=>i.toLowerCase().includes(e.toLowerCase()));return r.length===0?(n(!1),v.jsxs(v.Fragment,{children:[v.jsx("img",{src:a3,alt:"Error"}),v.jsx("h1",{children:" 찾는 제품이 없습니다."}),";"]})):(n(!0),r.map(({content:i,title:s,price:o,side:a,imgsrc:l,id:c,check:u,heart:d,location:h},f)=>v.jsx(d3,{check:u,content:i,heart:d,id:c,imgsrc:l,price:o,side:a,title:s,location:h},f)))},YT=Iu`
  .wrapper{
    width: 980px;
    margin: 70px auto 120px auto;
    @media (max-width: 767px){
      width: 480px
    }
    @media (min-width:768px) and (max-width: 1023px){
      width: 760px
    }
  }
  h2.articleTitle{
    font-size: 32px;
    font-weight: bold;
    text-align: center;
    margin-bottom: 45px;
  }


`,tde=ee.div`
display: flex;
flex-direction: column;
justify-content: center;
align-items: center;
margin: 0 auto;

`;let hd=[];function nde(){const[t,e]=H.useState(0),n=jq(s3),[r,i]=H.useState(!0);return H.useEffect(()=>{window.scrollTo(0,0),hd=[],Kf(b_,s=>{s.docs.map(o=>{const a={id:o.id,...o.data()};hd.push(a),hd.sort((l,c)=>c.date-l.date),e(1)})})},[]),v.jsxs("main",{className:"wrapper",children:[v.jsx(YT,{}),v.jsx("h2",{className:"articleTitle",children:"중고거래 인기매물"}),r?v.jsxs(QT,{children:[v.jsx("h3",{className:"a11yHidden",children:"중고거래 매물리스트"}),t?v.jsx(oN,{newArr:hd,searchKeyword:n,setHasResults:i}):v.jsx(lf,{className:"loading"})]}):v.jsxs(tde,{children:[v.jsx("h3",{className:"a11yHidden",children:"중고거래 매물리스트"}),t?v.jsx(oN,{newArr:hd,searchKeyword:n,setHasResults:i}):v.jsx(lf,{className:"loading"})]})]})}function rde(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}function h3(t,e){return new Promise(function(n,r){let i;return ide(t).then(function(s){try{return i=s,n(new Blob([e.slice(0,2),i,e.slice(2)],{type:"image/jpeg"}))}catch(o){return r(o)}},r)})}const ide=t=>new Promise((e,n)=>{const r=new FileReader;r.addEventListener("load",({target:{result:i}})=>{const s=new DataView(i);let o=0;if(s.getUint16(o)!==65496)return n("not a valid JPEG");for(o+=2;;){const a=s.getUint16(o);if(a===65498)break;const l=s.getUint16(o+2);if(a===65505&&s.getUint32(o+4)===1165519206){const c=o+10;let u;switch(s.getUint16(c)){case 18761:u=!0;break;case 19789:u=!1;break;default:return n("TIFF header contains invalid endian")}if(s.getUint16(c+2,u)!==42)return n("TIFF header contains invalid version");const d=s.getUint32(c+4,u),h=c+d+2+12*s.getUint16(c+d,u);for(let f=c+d+2;f<h;f+=12)if(s.getUint16(f,u)==274){if(s.getUint16(f+2,u)!==3)return n("Orientation data type is invalid");if(s.getUint32(f+4,u)!==1)return n("Orientation data count is invalid");s.setUint16(f+8,1,u);break}return e(i.slice(o,o+2+l))}o+=2+l}return e(new Blob)}),r.readAsArrayBuffer(t)});var Xg={},sde={get exports(){return Xg},set exports(t){Xg=t}};(function(t){var e,n,r={};sde.exports=r,r.parse=function(i,s){for(var o=r.bin.readUshort,a=r.bin.readUint,l=0,c={},u=new Uint8Array(i),d=u.length-4;a(u,d)!=101010256;)d--;l=d,l+=4;var h=o(u,l+=4);o(u,l+=2);var f=a(u,l+=2),p=a(u,l+=4);l+=4,l=p;for(var y=0;y<h;y++){a(u,l),l+=4,l+=4,l+=4,a(u,l+=4),f=a(u,l+=4);var w=a(u,l+=4),m=o(u,l+=4),g=o(u,l+2),_=o(u,l+4);l+=6;var b=a(u,l+=8);l+=4,l+=m+g+_,r._readLocal(u,b,c,f,w,s)}return c},r._readLocal=function(i,s,o,a,l,c){var u=r.bin.readUshort,d=r.bin.readUint;d(i,s),u(i,s+=4),u(i,s+=2);var h=u(i,s+=2);d(i,s+=2),d(i,s+=4),s+=4;var f=u(i,s+=8),p=u(i,s+=2);s+=2;var y=r.bin.readUTF8(i,s,f);if(s+=f,s+=p,c)o[y]={size:l,csize:a};else{var w=new Uint8Array(i.buffer,s);if(h==0)o[y]=new Uint8Array(w.buffer.slice(s,s+a));else{if(h!=8)throw"unknown compression method: "+h;var m=new Uint8Array(l);r.inflateRaw(w,m),o[y]=m}}},r.inflateRaw=function(i,s){return r.F.inflate(i,s)},r.inflate=function(i,s){return i[0],i[1],r.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),s)},r.deflate=function(i,s){s==null&&(s={level:6});var o=0,a=new Uint8Array(50+Math.floor(1.1*i.length));a[o]=120,a[o+1]=156,o+=2,o=r.F.deflateRaw(i,a,o,s.level);var l=r.adler(i,0,i.length);return a[o+0]=l>>>24&255,a[o+1]=l>>>16&255,a[o+2]=l>>>8&255,a[o+3]=l>>>0&255,new Uint8Array(a.buffer,0,o+4)},r.deflateRaw=function(i,s){s==null&&(s={level:6});var o=new Uint8Array(50+Math.floor(1.1*i.length)),a=r.F.deflateRaw(i,o,a,s.level);return new Uint8Array(o.buffer,0,a)},r.encode=function(i,s){s==null&&(s=!1);var o=0,a=r.bin.writeUint,l=r.bin.writeUshort,c={};for(var u in i){var d=!r._noNeed(u)&&!s,h=i[u],f=r.crc.crc(h,0,h.length);c[u]={cpr:d,usize:h.length,crc:f,file:d?r.deflateRaw(h):h}}for(var u in c)o+=c[u].file.length+30+46+2*r.bin.sizeUTF8(u);o+=22;var p=new Uint8Array(o),y=0,w=[];for(var u in c){var m=c[u];w.push(y),y=r._writeHeader(p,y,u,m,0)}var g=0,_=y;for(var u in c)m=c[u],w.push(y),y=r._writeHeader(p,y,u,m,1,w[g++]);var b=y-_;return a(p,y,101010256),y+=4,l(p,y+=4,g),l(p,y+=2,g),a(p,y+=2,b),a(p,y+=4,_),y+=4,y+=2,p.buffer},r._noNeed=function(i){var s=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(s)!=-1},r._writeHeader=function(i,s,o,a,l,c){var u=r.bin.writeUint,d=r.bin.writeUshort,h=a.file;return u(i,s,l==0?67324752:33639248),s+=4,l==1&&(s+=2),d(i,s,20),d(i,s+=2,0),d(i,s+=2,a.cpr?8:0),u(i,s+=2,0),u(i,s+=4,a.crc),u(i,s+=4,h.length),u(i,s+=4,a.usize),d(i,s+=4,r.bin.sizeUTF8(o)),d(i,s+=2,0),s+=2,l==1&&(s+=2,s+=2,u(i,s+=6,c),s+=4),s+=r.bin.writeUTF8(i,s,o),l==0&&(i.set(h,s),s+=h.length),s},r.crc={table:function(){for(var i=new Uint32Array(256),s=0;s<256;s++){for(var o=s,a=0;a<8;a++)1&o?o=3988292384^o>>>1:o>>>=1;i[s]=o}return i}(),update:function(i,s,o,a){for(var l=0;l<a;l++)i=r.crc.table[255&(i^s[o+l])]^i>>>8;return i},crc:function(i,s,o){return 4294967295^r.crc.update(4294967295,i,s,o)}},r.adler=function(i,s,o){for(var a=1,l=0,c=s,u=s+o;c<u;){for(var d=Math.min(c+5552,u);c<d;)l+=a+=i[c++];a%=65521,l%=65521}return l<<16|a},r.bin={readUshort:function(i,s){return i[s]|i[s+1]<<8},writeUshort:function(i,s,o){i[s]=255&o,i[s+1]=o>>8&255},readUint:function(i,s){return 16777216*i[s+3]+(i[s+2]<<16|i[s+1]<<8|i[s])},writeUint:function(i,s,o){i[s]=255&o,i[s+1]=o>>8&255,i[s+2]=o>>16&255,i[s+3]=o>>24&255},readASCII:function(i,s,o){for(var a="",l=0;l<o;l++)a+=String.fromCharCode(i[s+l]);return a},writeASCII:function(i,s,o){for(var a=0;a<o.length;a++)i[s+a]=o.charCodeAt(a)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,s,o){for(var a,l="",c=0;c<o;c++)l+="%"+r.bin.pad(i[s+c].toString(16));try{a=decodeURIComponent(l)}catch{return r.bin.readASCII(i,s,o)}return a},writeUTF8:function(i,s,o){for(var a=o.length,l=0,c=0;c<a;c++){var u=o.charCodeAt(c);if(!(4294967168&u))i[s+l]=u,l++;else if(!(4294965248&u))i[s+l]=192|u>>6,i[s+l+1]=128|u>>0&63,l+=2;else if(!(4294901760&u))i[s+l]=224|u>>12,i[s+l+1]=128|u>>6&63,i[s+l+2]=128|u>>0&63,l+=3;else{if(4292870144&u)throw"e";i[s+l]=240|u>>18,i[s+l+1]=128|u>>12&63,i[s+l+2]=128|u>>6&63,i[s+l+3]=128|u>>0&63,l+=4}}return l},sizeUTF8:function(i){for(var s=i.length,o=0,a=0;a<s;a++){var l=i.charCodeAt(a);if(!(4294967168&l))o++;else if(!(4294965248&l))o+=2;else if(!(4294901760&l))o+=3;else{if(4292870144&l)throw"e";o+=4}}return o}},r.F={},r.F.deflateRaw=function(i,s,o,a){var l=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][a],c=r.F.U,u=r.F._goodIndex;r.F._hash;var d=r.F._putsE,h=0,f=o<<3,p=0,y=i.length;if(a==0){for(;h<y;)d(s,f,h+(C=Math.min(65535,y-h))==y?1:0),f=r.F._copyExact(i,h,C,s,f+8),h+=C;return f>>>3}var w=c.lits,m=c.strt,g=c.prev,_=0,b=0,x=0,E=0,D=0,S=0;for(y>2&&(m[S=r.F._hash(i,0)]=0),h=0;h<y;h++){if(D=S,h+1<y-2){S=r.F._hash(i,h+1);var T=h+1&32767;g[T]=m[S],m[S]=T}if(p<=h){(_>14e3||b>26697)&&y-h>100&&(p<h&&(w[_]=h-p,_+=2,p=h),f=r.F._writeBlock(h==y-1||p==y?1:0,w,_,E,i,x,h-x,s,f),_=b=E=0,x=h);var O=0;h<y-2&&(O=r.F._bestMatch(i,h,g,D,Math.min(l[2],y-h),l[3]));var C=O>>>16,k=65535&O;if(O!=0){k=65535&O;var A=u(C=O>>>16,c.of0);c.lhst[257+A]++;var N=u(k,c.df0);c.dhst[N]++,E+=c.exb[A]+c.dxb[N],w[_]=C<<23|h-p,w[_+1]=k<<16|A<<8|N,_+=2,p=h+C}else c.lhst[i[h]]++;b++}}for(x==h&&i.length!=0||(p<h&&(w[_]=h-p,_+=2,p=h),f=r.F._writeBlock(1,w,_,E,i,x,h-x,s,f),_=0,b=0,_=b=E=0,x=h);7&f;)f++;return f>>>3},r.F._bestMatch=function(i,s,o,a,l,c){var u=32767&s,d=o[u],h=u-d+32768&32767;if(d==u||a!=r.F._hash(i,s-h))return 0;for(var f=0,p=0,y=Math.min(32767,s);h<=y&&--c!=0&&d!=u;){if(f==0||i[s+f]==i[s+f-h]){var w=r.F._howLong(i,s,h);if(w>f){if(p=h,(f=w)>=l)break;h+2<w&&(w=h+2);for(var m=0,g=0;g<w-2;g++){var _=s-h+g+32768&32767,b=_-o[_]+32768&32767;b>m&&(m=b,d=_)}}}h+=(u=d)-(d=o[u])+32768&32767}return f<<16|p},r.F._howLong=function(i,s,o){if(i[s]!=i[s-o]||i[s+1]!=i[s+1-o]||i[s+2]!=i[s+2-o])return 0;var a=s,l=Math.min(i.length,s+258);for(s+=3;s<l&&i[s]==i[s-o];)s++;return s-a},r.F._hash=function(i,s){return(i[s]<<8|i[s+1])+(i[s+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(i,s,o,a,l,c,u,d,h){var f,p,y,w,m,g,_,b,x,E=r.F.U,D=r.F._putsF,S=r.F._putsE;E.lhst[256]++,p=(f=r.F.getTrees())[0],y=f[1],w=f[2],m=f[3],g=f[4],_=f[5],b=f[6],x=f[7];var T=32+(h+3&7?8-(h+3&7):0)+(u<<3),O=a+r.F.contSize(E.fltree,E.lhst)+r.F.contSize(E.fdtree,E.dhst),C=a+r.F.contSize(E.ltree,E.lhst)+r.F.contSize(E.dtree,E.dhst);C+=14+3*_+r.F.contSize(E.itree,E.ihst)+(2*E.ihst[16]+3*E.ihst[17]+7*E.ihst[18]);for(var k=0;k<286;k++)E.lhst[k]=0;for(k=0;k<30;k++)E.dhst[k]=0;for(k=0;k<19;k++)E.ihst[k]=0;var A=T<O&&T<C?0:O<C?1:2;if(D(d,h,i),D(d,h+1,A),h+=3,A==0){for(;7&h;)h++;h=r.F._copyExact(l,c,u,d,h)}else{var N,B;if(A==1&&(N=E.fltree,B=E.fdtree),A==2){r.F.makeCodes(E.ltree,p),r.F.revCodes(E.ltree,p),r.F.makeCodes(E.dtree,y),r.F.revCodes(E.dtree,y),r.F.makeCodes(E.itree,w),r.F.revCodes(E.itree,w),N=E.ltree,B=E.dtree,S(d,h,m-257),S(d,h+=5,g-1),S(d,h+=5,_-4),h+=4;for(var R=0;R<_;R++)S(d,h+3*R,E.itree[1+(E.ordr[R]<<1)]);h+=3*_,h=r.F._codeTiny(b,E.itree,d,h),h=r.F._codeTiny(x,E.itree,d,h)}for(var I=c,U=0;U<o;U+=2){for(var $=s[U],z=$>>>23,J=I+(8388607&$);I<J;)h=r.F._writeLit(l[I++],N,d,h);if(z!=0){var P=s[U+1],F=P>>16,L=P>>8&255,j=255&P;S(d,h=r.F._writeLit(257+L,N,d,h),z-E.of0[L]),h+=E.exb[L],D(d,h=r.F._writeLit(j,B,d,h),F-E.df0[j]),h+=E.dxb[j],I+=z}}h=r.F._writeLit(256,N,d,h)}return h},r.F._copyExact=function(i,s,o,a,l){var c=l>>>3;return a[c]=o,a[c+1]=o>>>8,a[c+2]=255-a[c],a[c+3]=255-a[c+1],c+=4,a.set(new Uint8Array(i.buffer,s,o),c),l+(o+4<<3)},r.F.getTrees=function(){for(var i=r.F.U,s=r.F._hufTree(i.lhst,i.ltree,15),o=r.F._hufTree(i.dhst,i.dtree,15),a=[],l=r.F._lenCodes(i.ltree,a),c=[],u=r.F._lenCodes(i.dtree,c),d=0;d<a.length;d+=2)i.ihst[a[d]]++;for(d=0;d<c.length;d+=2)i.ihst[c[d]]++;for(var h=r.F._hufTree(i.ihst,i.itree,7),f=19;f>4&&i.itree[1+(i.ordr[f-1]<<1)]==0;)f--;return[s,o,h,l,u,f,a,c]},r.F.getSecond=function(i){for(var s=[],o=0;o<i.length;o+=2)s.push(i[o+1]);return s},r.F.nonZero=function(i){for(var s="",o=0;o<i.length;o+=2)i[o+1]!=0&&(s+=(o>>1)+",");return s},r.F.contSize=function(i,s){for(var o=0,a=0;a<s.length;a++)o+=s[a]*i[1+(a<<1)];return o},r.F._codeTiny=function(i,s,o,a){for(var l=0;l<i.length;l+=2){var c=i[l],u=i[l+1];a=r.F._writeLit(c,s,o,a);var d=c==16?2:c==17?3:7;c>15&&(r.F._putsE(o,a,u,d),a+=d)}return a},r.F._lenCodes=function(i,s){for(var o=i.length;o!=2&&i[o-1]==0;)o-=2;for(var a=0;a<o;a+=2){var l=i[a+1],c=a+3<o?i[a+3]:-1,u=a+5<o?i[a+5]:-1,d=a==0?-1:i[a-1];if(l==0&&c==l&&u==l){for(var h=a+5;h+2<o&&i[h+2]==l;)h+=2;(f=Math.min(h+1-a>>>1,138))<11?s.push(17,f-3):s.push(18,f-11),a+=2*f-2}else if(l==d&&c==l&&u==l){for(h=a+5;h+2<o&&i[h+2]==l;)h+=2;var f=Math.min(h+1-a>>>1,6);s.push(16,f-3),a+=2*f-2}else s.push(l,0)}return o>>>1},r.F._hufTree=function(i,s,o){var a=[],l=i.length,c=s.length,u=0;for(u=0;u<c;u+=2)s[u]=0,s[u+1]=0;for(u=0;u<l;u++)i[u]!=0&&a.push({lit:u,f:i[u]});var d=a.length,h=a.slice(0);if(d==0)return 0;if(d==1){var f=a[0].lit;return h=f==0?1:0,s[1+(f<<1)]=1,s[1+(h<<1)]=1,1}a.sort(function(b,x){return b.f-x.f});var p=a[0],y=a[1],w=0,m=1,g=2;for(a[0]={lit:-1,f:p.f+y.f,l:p,r:y,d:0};m!=d-1;)p=w!=m&&(g==d||a[w].f<a[g].f)?a[w++]:a[g++],y=w!=m&&(g==d||a[w].f<a[g].f)?a[w++]:a[g++],a[m++]={lit:-1,f:p.f+y.f,l:p,r:y};var _=r.F.setDepth(a[m-1],0);for(_>o&&(r.F.restrictDepth(h,o,_),_=o),u=0;u<d;u++)s[1+(h[u].lit<<1)]=h[u].d;return _},r.F.setDepth=function(i,s){return i.lit!=-1?(i.d=s,s):Math.max(r.F.setDepth(i.l,s+1),r.F.setDepth(i.r,s+1))},r.F.restrictDepth=function(i,s,o){var a=0,l=1<<o-s,c=0;for(i.sort(function(d,h){return h.d==d.d?d.f-h.f:h.d-d.d}),a=0;a<i.length&&i[a].d>s;a++){var u=i[a].d;i[a].d=s,c+=l-(1<<o-u)}for(c>>>=o-s;c>0;)(u=i[a].d)<s?(i[a].d++,c-=1<<s-u-1):a++;for(;a>=0;a--)i[a].d==s&&c<0&&(i[a].d--,c++);c!=0&&console.log("debt left")},r.F._goodIndex=function(i,s){var o=0;return s[16|o]<=i&&(o|=16),s[8|o]<=i&&(o|=8),s[4|o]<=i&&(o|=4),s[2|o]<=i&&(o|=2),s[1|o]<=i&&(o|=1),o},r.F._writeLit=function(i,s,o,a){return r.F._putsF(o,a,s[i<<1]),a+s[1+(i<<1)]},r.F.inflate=function(i,s){var o=Uint8Array;if(i[0]==3&&i[1]==0)return s||new o(0);var a=r.F,l=a._bitsF,c=a._bitsE,u=a._decodeTiny,d=a.makeCodes,h=a.codes2map,f=a._get17,p=a.U,y=s==null;y&&(s=new o(i.length>>>2<<3));for(var w,m,g=0,_=0,b=0,x=0,E=0,D=0,S=0,T=0,O=0;g==0;)if(g=l(i,O,1),_=l(i,O+1,2),O+=3,_!=0){if(y&&(s=r.F._check(s,T+(1<<17))),_==1&&(w=p.flmap,m=p.fdmap,D=511,S=31),_==2){b=c(i,O,5)+257,x=c(i,O+5,5)+1,E=c(i,O+10,4)+4,O+=14;for(var C=0;C<38;C+=2)p.itree[C]=0,p.itree[C+1]=0;var k=1;for(C=0;C<E;C++){var A=c(i,O+3*C,3);p.itree[1+(p.ordr[C]<<1)]=A,A>k&&(k=A)}O+=3*E,d(p.itree,k),h(p.itree,k,p.imap),w=p.lmap,m=p.dmap,O=u(p.imap,(1<<k)-1,b+x,i,O,p.ttree);var N=a._copyOut(p.ttree,0,b,p.ltree);D=(1<<N)-1;var B=a._copyOut(p.ttree,b,x,p.dtree);S=(1<<B)-1,d(p.ltree,N),h(p.ltree,N,w),d(p.dtree,B),h(p.dtree,B,m)}for(;;){var R=w[f(i,O)&D];O+=15&R;var I=R>>>4;if(!(I>>>8))s[T++]=I;else{if(I==256)break;var U=T+I-254;if(I>264){var $=p.ldef[I-257];U=T+($>>>3)+c(i,O,7&$),O+=7&$}var z=m[f(i,O)&S];O+=15&z;var J=z>>>4,P=p.ddef[J],F=(P>>>4)+l(i,O,15&P);for(O+=15&P,y&&(s=r.F._check(s,T+(1<<17)));T<U;)s[T]=s[T++-F],s[T]=s[T++-F],s[T]=s[T++-F],s[T]=s[T++-F];T=U}}}else{7&O&&(O+=8-(7&O));var L=4+(O>>>3),j=i[L-4]|i[L-3]<<8;y&&(s=r.F._check(s,T+j)),s.set(new o(i.buffer,i.byteOffset+L,j),T),O=L+j<<3,T+=j}return s.length==T?s:s.slice(0,T)},r.F._check=function(i,s){var o=i.length;if(s<=o)return i;var a=new Uint8Array(Math.max(o<<1,s));return a.set(i,0),a},r.F._decodeTiny=function(i,s,o,a,l,c){for(var u=r.F._bitsE,d=r.F._get17,h=0;h<o;){var f=i[d(a,l)&s];l+=15&f;var p=f>>>4;if(p<=15)c[h]=p,h++;else{var y=0,w=0;p==16?(w=3+u(a,l,2),l+=2,y=c[h-1]):p==17?(w=3+u(a,l,3),l+=3):p==18&&(w=11+u(a,l,7),l+=7);for(var m=h+w;h<m;)c[h]=y,h++}}return l},r.F._copyOut=function(i,s,o,a){for(var l=0,c=0,u=a.length>>>1;c<o;){var d=i[c+s];a[c<<1]=0,a[1+(c<<1)]=d,d>l&&(l=d),c++}for(;c<u;)a[c<<1]=0,a[1+(c<<1)]=0,c++;return l},r.F.makeCodes=function(i,s){for(var o,a,l,c,u=r.F.U,d=i.length,h=u.bl_count,f=0;f<=s;f++)h[f]=0;for(f=1;f<d;f+=2)h[i[f]]++;var p=u.next_code;for(o=0,h[0]=0,a=1;a<=s;a++)o=o+h[a-1]<<1,p[a]=o;for(l=0;l<d;l+=2)(c=i[l+1])!=0&&(i[l]=p[c],p[c]++)},r.F.codes2map=function(i,s,o){for(var a=i.length,l=r.F.U.rev15,c=0;c<a;c+=2)if(i[c+1]!=0)for(var u=c>>1,d=i[c+1],h=u<<4|d,f=s-d,p=i[c]<<f,y=p+(1<<f);p!=y;)o[l[p]>>>15-s]=h,p++},r.F.revCodes=function(i,s){for(var o=r.F.U.rev15,a=15-s,l=0;l<i.length;l+=2){var c=i[l]<<s-i[l+1];i[l]=o[c]>>>a}},r.F._putsE=function(i,s,o){o<<=7&s;var a=s>>>3;i[a]|=o,i[a+1]|=o>>>8},r.F._putsF=function(i,s,o){o<<=7&s;var a=s>>>3;i[a]|=o,i[a+1]|=o>>>8,i[a+2]|=o>>>16},r.F._bitsE=function(i,s,o){return(i[s>>>3]|i[1+(s>>>3)]<<8)>>>(7&s)&(1<<o)-1},r.F._bitsF=function(i,s,o){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16)>>>(7&s)&(1<<o)-1},r.F._get17=function(i,s){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16)>>>(7&s)},r.F._get25=function(i,s){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16|i[3+(s>>>3)]<<24)>>>(7&s)},r.F.U=(e=Uint16Array,n=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var i=r.F.U,s=0;s<32768;s++){var o=s;o=(4278255360&(o=(4042322160&(o=(3435973836&(o=(2863311530&o)>>>1|(1431655765&o)<<1))>>>2|(858993459&o)<<2))>>>4|(252645135&o)<<4))>>>8|(16711935&o)<<8,i.rev15[s]=(o>>>16|o<<16)>>>17}function a(l,c,u){for(;c--!=0;)l.push(0,u)}for(s=0;s<32;s++)i.ldef[s]=i.of0[s]<<3|i.exb[s],i.ddef[s]=i.df0[s]<<4|i.dxb[s];a(i.fltree,144,8),a(i.fltree,112,9),a(i.fltree,24,7),a(i.fltree,8,8),r.F.makeCodes(i.fltree,9),r.F.codes2map(i.fltree,9,i.flmap),r.F.revCodes(i.fltree,9),a(i.fdtree,32,5),r.F.makeCodes(i.fdtree,5),r.F.codes2map(i.fdtree,5,i.fdmap),r.F.revCodes(i.fdtree,5),a(i.itree,19,0),a(i.ltree,286,0),a(i.dtree,30,0),a(i.ttree,320,0)}()})();var ode=rde({__proto__:null,default:Xg},[Xg]);const ai=function(){var t={nextZero(u,d){for(;u[d]!=0;)d++;return d},readUshort:(u,d)=>u[d]<<8|u[d+1],writeUshort(u,d,h){u[d]=h>>8&255,u[d+1]=255&h},readUint:(u,d)=>16777216*u[d]+(u[d+1]<<16|u[d+2]<<8|u[d+3]),writeUint(u,d,h){u[d]=h>>24&255,u[d+1]=h>>16&255,u[d+2]=h>>8&255,u[d+3]=255&h},readASCII(u,d,h){let f="";for(let p=0;p<h;p++)f+=String.fromCharCode(u[d+p]);return f},writeASCII(u,d,h){for(let f=0;f<h.length;f++)u[d+f]=h.charCodeAt(f)},readBytes(u,d,h){const f=[];for(let p=0;p<h;p++)f.push(u[d+p]);return f},pad:u=>u.length<2?`0${u}`:u,readUTF8(u,d,h){let f,p="";for(let y=0;y<h;y++)p+=`%${t.pad(u[d+y].toString(16))}`;try{f=decodeURIComponent(p)}catch{return t.readASCII(u,d,h)}return f}};function e(u,d,h,f){const p=d*h,y=s(f),w=Math.ceil(d*y/8),m=new Uint8Array(4*p),g=new Uint32Array(m.buffer),{ctype:_}=f,{depth:b}=f,x=t.readUshort;if(_==6){const $=p<<2;if(b==8)for(var E=0;E<$;E+=4)m[E]=u[E],m[E+1]=u[E+1],m[E+2]=u[E+2],m[E+3]=u[E+3];if(b==16)for(E=0;E<$;E++)m[E]=u[E<<1]}else if(_==2){const $=f.tabs.tRNS;if($==null){if(b==8)for(E=0;E<p;E++){var D=3*E;g[E]=255<<24|u[D+2]<<16|u[D+1]<<8|u[D]}if(b==16)for(E=0;E<p;E++)D=6*E,g[E]=255<<24|u[D+4]<<16|u[D+2]<<8|u[D]}else{var S=$[0];const z=$[1],J=$[2];if(b==8)for(E=0;E<p;E++){var T=E<<2;D=3*E,g[E]=255<<24|u[D+2]<<16|u[D+1]<<8|u[D],u[D]==S&&u[D+1]==z&&u[D+2]==J&&(m[T+3]=0)}if(b==16)for(E=0;E<p;E++)T=E<<2,D=6*E,g[E]=255<<24|u[D+4]<<16|u[D+2]<<8|u[D],x(u,D)==S&&x(u,D+2)==z&&x(u,D+4)==J&&(m[T+3]=0)}}else if(_==3){const $=f.tabs.PLTE,z=f.tabs.tRNS,J=z?z.length:0;if(b==1)for(var O=0;O<h;O++){var C=O*w,k=O*d;for(E=0;E<d;E++){T=k+E<<2;var A=3*(N=u[C+(E>>3)]>>7-((7&E)<<0)&1);m[T]=$[A],m[T+1]=$[A+1],m[T+2]=$[A+2],m[T+3]=N<J?z[N]:255}}if(b==2)for(O=0;O<h;O++)for(C=O*w,k=O*d,E=0;E<d;E++)T=k+E<<2,A=3*(N=u[C+(E>>2)]>>6-((3&E)<<1)&3),m[T]=$[A],m[T+1]=$[A+1],m[T+2]=$[A+2],m[T+3]=N<J?z[N]:255;if(b==4)for(O=0;O<h;O++)for(C=O*w,k=O*d,E=0;E<d;E++)T=k+E<<2,A=3*(N=u[C+(E>>1)]>>4-((1&E)<<2)&15),m[T]=$[A],m[T+1]=$[A+1],m[T+2]=$[A+2],m[T+3]=N<J?z[N]:255;if(b==8)for(E=0;E<p;E++){var N;T=E<<2,A=3*(N=u[E]),m[T]=$[A],m[T+1]=$[A+1],m[T+2]=$[A+2],m[T+3]=N<J?z[N]:255}}else if(_==4){if(b==8)for(E=0;E<p;E++){T=E<<2;var B=u[R=E<<1];m[T]=B,m[T+1]=B,m[T+2]=B,m[T+3]=u[R+1]}if(b==16)for(E=0;E<p;E++){var R;T=E<<2,B=u[R=E<<2],m[T]=B,m[T+1]=B,m[T+2]=B,m[T+3]=u[R+2]}}else if(_==0)for(S=f.tabs.tRNS?f.tabs.tRNS:-1,O=0;O<h;O++){const $=O*w,z=O*d;if(b==1)for(var I=0;I<d;I++){var U=(B=255*(u[$+(I>>>3)]>>>7-(7&I)&1))==255*S?0:255;g[z+I]=U<<24|B<<16|B<<8|B}else if(b==2)for(I=0;I<d;I++)U=(B=85*(u[$+(I>>>2)]>>>6-((3&I)<<1)&3))==85*S?0:255,g[z+I]=U<<24|B<<16|B<<8|B;else if(b==4)for(I=0;I<d;I++)U=(B=17*(u[$+(I>>>1)]>>>4-((1&I)<<2)&15))==17*S?0:255,g[z+I]=U<<24|B<<16|B<<8|B;else if(b==8)for(I=0;I<d;I++)U=(B=u[$+I])==S?0:255,g[z+I]=U<<24|B<<16|B<<8|B;else if(b==16)for(I=0;I<d;I++)B=u[$+(I<<1)],U=x(u,$+(I<<1))==S?0:255,g[z+I]=U<<24|B<<16|B<<8|B}return m}function n(u,d,h,f){const p=s(u),y=Math.ceil(h*p/8),w=new Uint8Array((y+1+u.interlace)*f);return d=u.tabs.CgBI?i(d,w):r(d,w),u.interlace==0?d=o(d,u,0,h,f):u.interlace==1&&(d=function(g,_){const b=_.width,x=_.height,E=s(_),D=E>>3,S=Math.ceil(b*E/8),T=new Uint8Array(x*S);let O=0;const C=[0,0,4,0,2,0,1],k=[0,4,0,2,0,1,0],A=[8,8,8,4,4,2,2],N=[8,8,4,4,2,2,1];let B=0;for(;B<7;){const I=A[B],U=N[B];let $=0,z=0,J=C[B];for(;J<x;)J+=I,z++;let P=k[B];for(;P<b;)P+=U,$++;const F=Math.ceil($*E/8);o(g,_,O,$,z);let L=0,j=C[B];for(;j<x;){let M=k[B],ne=O+L*F<<3;for(;M<b;){var R;if(E==1&&(R=(R=g[ne>>3])>>7-(7&ne)&1,T[j*S+(M>>3)]|=R<<7-((7&M)<<0)),E==2&&(R=(R=g[ne>>3])>>6-(7&ne)&3,T[j*S+(M>>2)]|=R<<6-((3&M)<<1)),E==4&&(R=(R=g[ne>>3])>>4-(7&ne)&15,T[j*S+(M>>1)]|=R<<4-((1&M)<<2)),E>=8){const G=j*S+M*D;for(let te=0;te<D;te++)T[G+te]=g[(ne>>3)+te]}ne+=E,M+=U}L++,j+=I}$*z!=0&&(O+=z*(1+F)),B+=1}return T}(d,u)),d}function r(u,d){return i(new Uint8Array(u.buffer,2,u.length-6),d)}var i=function(){const u={H:{}};return u.H.N=function(d,h){const f=Uint8Array;let p,y,w=0,m=0,g=0,_=0,b=0,x=0,E=0,D=0,S=0;if(d[0]==3&&d[1]==0)return h||new f(0);const T=u.H,O=T.b,C=T.e,k=T.R,A=T.n,N=T.A,B=T.Z,R=T.m,I=h==null;for(I&&(h=new f(d.length>>>2<<5));w==0;)if(w=O(d,S,1),m=O(d,S+1,2),S+=3,m!=0){if(I&&(h=u.H.W(h,D+(1<<17))),m==1&&(p=R.J,y=R.h,x=511,E=31),m==2){g=C(d,S,5)+257,_=C(d,S+5,5)+1,b=C(d,S+10,4)+4,S+=14;let $=1;for(var U=0;U<38;U+=2)R.Q[U]=0,R.Q[U+1]=0;for(U=0;U<b;U++){const P=C(d,S+3*U,3);R.Q[1+(R.X[U]<<1)]=P,P>$&&($=P)}S+=3*b,A(R.Q,$),N(R.Q,$,R.u),p=R.w,y=R.d,S=k(R.u,(1<<$)-1,g+_,d,S,R.v);const z=T.V(R.v,0,g,R.C);x=(1<<z)-1;const J=T.V(R.v,g,_,R.D);E=(1<<J)-1,A(R.C,z),N(R.C,z,p),A(R.D,J),N(R.D,J,y)}for(;;){const $=p[B(d,S)&x];S+=15&$;const z=$>>>4;if(!(z>>>8))h[D++]=z;else{if(z==256)break;{let J=D+z-254;if(z>264){const M=R.q[z-257];J=D+(M>>>3)+C(d,S,7&M),S+=7&M}const P=y[B(d,S)&E];S+=15&P;const F=P>>>4,L=R.c[F],j=(L>>>4)+O(d,S,15&L);for(S+=15&L;D<J;)h[D]=h[D++-j],h[D]=h[D++-j],h[D]=h[D++-j],h[D]=h[D++-j];D=J}}}}else{7&S&&(S+=8-(7&S));const $=4+(S>>>3),z=d[$-4]|d[$-3]<<8;I&&(h=u.H.W(h,D+z)),h.set(new f(d.buffer,d.byteOffset+$,z),D),S=$+z<<3,D+=z}return h.length==D?h:h.slice(0,D)},u.H.W=function(d,h){const f=d.length;if(h<=f)return d;const p=new Uint8Array(f<<1);return p.set(d,0),p},u.H.R=function(d,h,f,p,y,w){const m=u.H.e,g=u.H.Z;let _=0;for(;_<f;){const b=d[g(p,y)&h];y+=15&b;const x=b>>>4;if(x<=15)w[_]=x,_++;else{let E=0,D=0;x==16?(D=3+m(p,y,2),y+=2,E=w[_-1]):x==17?(D=3+m(p,y,3),y+=3):x==18&&(D=11+m(p,y,7),y+=7);const S=_+D;for(;_<S;)w[_]=E,_++}}return y},u.H.V=function(d,h,f,p){let y=0,w=0;const m=p.length>>>1;for(;w<f;){const g=d[w+h];p[w<<1]=0,p[1+(w<<1)]=g,g>y&&(y=g),w++}for(;w<m;)p[w<<1]=0,p[1+(w<<1)]=0,w++;return y},u.H.n=function(d,h){const f=u.H.m,p=d.length;let y,w,m,g;const _=f.j;for(var b=0;b<=h;b++)_[b]=0;for(b=1;b<p;b+=2)_[d[b]]++;const x=f.K;for(y=0,_[0]=0,w=1;w<=h;w++)y=y+_[w-1]<<1,x[w]=y;for(m=0;m<p;m+=2)g=d[m+1],g!=0&&(d[m]=x[g],x[g]++)},u.H.A=function(d,h,f){const p=d.length,y=u.H.m.r;for(let w=0;w<p;w+=2)if(d[w+1]!=0){const m=w>>1,g=d[w+1],_=m<<4|g,b=h-g;let x=d[w]<<b;const E=x+(1<<b);for(;x!=E;)f[y[x]>>>15-h]=_,x++}},u.H.l=function(d,h){const f=u.H.m.r,p=15-h;for(let y=0;y<d.length;y+=2){const w=d[y]<<h-d[y+1];d[y]=f[w]>>>p}},u.H.M=function(d,h,f){f<<=7&h;const p=h>>>3;d[p]|=f,d[p+1]|=f>>>8},u.H.I=function(d,h,f){f<<=7&h;const p=h>>>3;d[p]|=f,d[p+1]|=f>>>8,d[p+2]|=f>>>16},u.H.e=function(d,h,f){return(d[h>>>3]|d[1+(h>>>3)]<<8)>>>(7&h)&(1<<f)-1},u.H.b=function(d,h,f){return(d[h>>>3]|d[1+(h>>>3)]<<8|d[2+(h>>>3)]<<16)>>>(7&h)&(1<<f)-1},u.H.Z=function(d,h){return(d[h>>>3]|d[1+(h>>>3)]<<8|d[2+(h>>>3)]<<16)>>>(7&h)},u.H.i=function(d,h){return(d[h>>>3]|d[1+(h>>>3)]<<8|d[2+(h>>>3)]<<16|d[3+(h>>>3)]<<24)>>>(7&h)},u.H.m=function(){const d=Uint16Array,h=Uint32Array;return{K:new d(16),j:new d(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new d(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new h(32),J:new d(512),_:[],h:new d(32),$:[],w:new d(32768),C:[],v:[],d:new d(32768),D:[],u:new d(512),Q:[],r:new d(32768),s:new h(286),Y:new h(30),a:new h(19),t:new h(15e3),k:new d(65536),g:new d(32768)}}(),function(){const d=u.H.m;for(var h=0;h<32768;h++){let p=h;p=(2863311530&p)>>>1|(1431655765&p)<<1,p=(3435973836&p)>>>2|(858993459&p)<<2,p=(4042322160&p)>>>4|(252645135&p)<<4,p=(4278255360&p)>>>8|(16711935&p)<<8,d.r[h]=(p>>>16|p<<16)>>>17}function f(p,y,w){for(;y--!=0;)p.push(0,w)}for(h=0;h<32;h++)d.q[h]=d.S[h]<<3|d.T[h],d.c[h]=d.p[h]<<4|d.z[h];f(d._,144,8),f(d._,112,9),f(d._,24,7),f(d._,8,8),u.H.n(d._,9),u.H.A(d._,9,d.J),u.H.l(d._,9),f(d.$,32,5),u.H.n(d.$,5),u.H.A(d.$,5,d.h),u.H.l(d.$,5),f(d.Q,19,0),f(d.C,286,0),f(d.D,30,0),f(d.v,320,0)}(),u.H.N}();function s(u){return[1,null,3,1,2,null,4][u.ctype]*u.depth}function o(u,d,h,f,p){let y=s(d);const w=Math.ceil(f*y/8);let m,g;y=Math.ceil(y/8);let _=u[h],b=0;if(_>1&&(u[h]=[0,0,1][_-2]),_==3)for(b=y;b<w;b++)u[b+1]=u[b+1]+(u[b+1-y]>>>1)&255;for(let x=0;x<p;x++)if(m=h+x*w,g=m+x+1,_=u[g-1],b=0,_==0)for(;b<w;b++)u[m+b]=u[g+b];else if(_==1){for(;b<y;b++)u[m+b]=u[g+b];for(;b<w;b++)u[m+b]=u[g+b]+u[m+b-y]}else if(_==2)for(;b<w;b++)u[m+b]=u[g+b]+u[m+b-w];else if(_==3){for(;b<y;b++)u[m+b]=u[g+b]+(u[m+b-w]>>>1);for(;b<w;b++)u[m+b]=u[g+b]+(u[m+b-w]+u[m+b-y]>>>1)}else{for(;b<y;b++)u[m+b]=u[g+b]+a(0,u[m+b-w],0);for(;b<w;b++)u[m+b]=u[g+b]+a(u[m+b-y],u[m+b-w],u[m+b-y-w])}return u}function a(u,d,h){const f=u+d-h,p=f-u,y=f-d,w=f-h;return p*p<=y*y&&p*p<=w*w?u:y*y<=w*w?d:h}function l(u,d,h){h.width=t.readUint(u,d),d+=4,h.height=t.readUint(u,d),d+=4,h.depth=u[d],d++,h.ctype=u[d],d++,h.compress=u[d],d++,h.filter=u[d],d++,h.interlace=u[d],d++}function c(u,d,h,f,p,y,w,m,g){const _=Math.min(d,p),b=Math.min(h,y);let x=0,E=0;for(let B=0;B<b;B++)for(let R=0;R<_;R++)if(w>=0&&m>=0?(x=B*d+R<<2,E=(m+B)*p+w+R<<2):(x=(-m+B)*d-w+R<<2,E=B*p+R<<2),g==0)f[E]=u[x],f[E+1]=u[x+1],f[E+2]=u[x+2],f[E+3]=u[x+3];else if(g==1){var D=u[x+3]*.00392156862745098,S=u[x]*D,T=u[x+1]*D,O=u[x+2]*D,C=f[E+3]*(1/255),k=f[E]*C,A=f[E+1]*C,N=f[E+2]*C;const I=1-D,U=D+C*I,$=U==0?0:1/U;f[E+3]=255*U,f[E+0]=(S+k*I)*$,f[E+1]=(T+A*I)*$,f[E+2]=(O+N*I)*$}else if(g==2)D=u[x+3],S=u[x],T=u[x+1],O=u[x+2],C=f[E+3],k=f[E],A=f[E+1],N=f[E+2],D==C&&S==k&&T==A&&O==N?(f[E]=0,f[E+1]=0,f[E+2]=0,f[E+3]=0):(f[E]=S,f[E+1]=T,f[E+2]=O,f[E+3]=D);else if(g==3){if(D=u[x+3],S=u[x],T=u[x+1],O=u[x+2],C=f[E+3],k=f[E],A=f[E+1],N=f[E+2],D==C&&S==k&&T==A&&O==N)continue;if(D<220&&C>20)return!1}return!0}return{decode:function(d){const h=new Uint8Array(d);let f=8;const p=t,y=p.readUshort,w=p.readUint,m={tabs:{},frames:[]},g=new Uint8Array(h.length);let _,b=0,x=0;const E=[137,80,78,71,13,10,26,10];for(var D=0;D<8;D++)if(h[D]!=E[D])throw"The input is not a PNG file!";for(;f<h.length;){const B=p.readUint(h,f);f+=4;const R=p.readASCII(h,f,4);if(f+=4,R=="IHDR")l(h,f,m);else if(R=="iCCP"){for(var S=f;h[S]!=0;)S++;p.readASCII(h,f,S-f),h[S+1];const I=h.slice(S+2,f+B);let U=null;try{U=r(I)}catch{U=i(I)}m.tabs[R]=U}else if(R=="CgBI")m.tabs[R]=h.slice(f,f+4);else if(R=="IDAT"){for(D=0;D<B;D++)g[b+D]=h[f+D];b+=B}else if(R=="acTL")m.tabs[R]={num_frames:w(h,f),num_plays:w(h,f+4)},_=new Uint8Array(h.length);else if(R=="fcTL"){x!=0&&((N=m.frames[m.frames.length-1]).data=n(m,_.slice(0,x),N.rect.width,N.rect.height),x=0);const I={x:w(h,f+12),y:w(h,f+16),width:w(h,f+4),height:w(h,f+8)};let U=y(h,f+22);U=y(h,f+20)/(U==0?100:U);const $={rect:I,delay:Math.round(1e3*U),dispose:h[f+24],blend:h[f+25]};m.frames.push($)}else if(R=="fdAT"){for(D=0;D<B-4;D++)_[x+D]=h[f+D+4];x+=B-4}else if(R=="pHYs")m.tabs[R]=[p.readUint(h,f),p.readUint(h,f+4),h[f+8]];else if(R=="cHRM")for(m.tabs[R]=[],D=0;D<8;D++)m.tabs[R].push(p.readUint(h,f+4*D));else if(R=="tEXt"||R=="zTXt"){m.tabs[R]==null&&(m.tabs[R]={});var T=p.nextZero(h,f),O=p.readASCII(h,f,T-f),C=f+B-T-1;if(R=="tEXt")A=p.readASCII(h,T+1,C);else{var k=r(h.slice(T+2,T+2+C));A=p.readUTF8(k,0,k.length)}m.tabs[R][O]=A}else if(R=="iTXt"){m.tabs[R]==null&&(m.tabs[R]={}),T=0,S=f,T=p.nextZero(h,S),O=p.readASCII(h,S,T-S);const I=h[S=T+1];var A;h[S+1],S+=2,T=p.nextZero(h,S),p.readASCII(h,S,T-S),S=T+1,T=p.nextZero(h,S),p.readUTF8(h,S,T-S),C=B-((S=T+1)-f),I==0?A=p.readUTF8(h,S,C):(k=r(h.slice(S,S+C)),A=p.readUTF8(k,0,k.length)),m.tabs[R][O]=A}else if(R=="PLTE")m.tabs[R]=p.readBytes(h,f,B);else if(R=="hIST"){const I=m.tabs.PLTE.length/3;for(m.tabs[R]=[],D=0;D<I;D++)m.tabs[R].push(y(h,f+2*D))}else if(R=="tRNS")m.ctype==3?m.tabs[R]=p.readBytes(h,f,B):m.ctype==0?m.tabs[R]=y(h,f):m.ctype==2&&(m.tabs[R]=[y(h,f),y(h,f+2),y(h,f+4)]);else if(R=="gAMA")m.tabs[R]=p.readUint(h,f)/1e5;else if(R=="sRGB")m.tabs[R]=h[f];else if(R=="bKGD")m.ctype==0||m.ctype==4?m.tabs[R]=[y(h,f)]:m.ctype==2||m.ctype==6?m.tabs[R]=[y(h,f),y(h,f+2),y(h,f+4)]:m.ctype==3&&(m.tabs[R]=h[f]);else if(R=="IEND")break;f+=B,p.readUint(h,f),f+=4}var N;return x!=0&&((N=m.frames[m.frames.length-1]).data=n(m,_.slice(0,x),N.rect.width,N.rect.height)),m.data=n(m,g,m.width,m.height),delete m.compress,delete m.interlace,delete m.filter,m},toRGBA8:function(d){const h=d.width,f=d.height;if(d.tabs.acTL==null)return[e(d.data,h,f,d).buffer];const p=[];d.frames[0].data==null&&(d.frames[0].data=d.data);const y=h*f*4,w=new Uint8Array(y),m=new Uint8Array(y),g=new Uint8Array(y);for(let b=0;b<d.frames.length;b++){const x=d.frames[b],E=x.rect.x,D=x.rect.y,S=x.rect.width,T=x.rect.height,O=e(x.data,S,T,d);if(b!=0)for(var _=0;_<y;_++)g[_]=w[_];if(x.blend==0?c(O,S,T,w,h,f,E,D,0):x.blend==1&&c(O,S,T,w,h,f,E,D,1),p.push(w.buffer.slice(0)),x.dispose!=0){if(x.dispose==1)c(m,S,T,w,h,f,E,D,0);else if(x.dispose==2)for(_=0;_<y;_++)w[_]=g[_]}}return p},_paeth:a,_copyTile:c,_bin:t}}();(function(){const{_copyTile:t}=ai,{_bin:e}=ai,n=ai._paeth;var r={table:function(){const S=new Uint32Array(256);for(let T=0;T<256;T++){let O=T;for(let C=0;C<8;C++)1&O?O=3988292384^O>>>1:O>>>=1;S[T]=O}return S}(),update(S,T,O,C){for(let k=0;k<C;k++)S=r.table[255&(S^T[O+k])]^S>>>8;return S},crc:(S,T,O)=>4294967295^r.update(4294967295,S,T,O)};function i(S,T,O,C){T[O]+=S[0]*C>>4,T[O+1]+=S[1]*C>>4,T[O+2]+=S[2]*C>>4,T[O+3]+=S[3]*C>>4}function s(S){return Math.max(0,Math.min(255,S))}function o(S,T){const O=S[0]-T[0],C=S[1]-T[1],k=S[2]-T[2],A=S[3]-T[3];return O*O+C*C+k*k+A*A}function a(S,T,O,C,k,A,N){N==null&&(N=1);const B=C.length,R=[];for(var I=0;I<B;I++){const j=C[I];R.push([j>>>0&255,j>>>8&255,j>>>16&255,j>>>24&255])}for(I=0;I<B;I++){let j=4294967295;for(var U=0,$=0;$<B;$++){var z=o(R[I],R[$]);$!=I&&z<j&&(j=z,U=$)}}const J=new Uint32Array(k.buffer),P=new Int16Array(T*O*4),F=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(I=0;I<F.length;I++)F[I]=255*((F[I]+.5)/16-.5);for(let j=0;j<O;j++)for(let M=0;M<T;M++){var L;I=4*(j*T+M),N!=2?L=[s(S[I]+P[I]),s(S[I+1]+P[I+1]),s(S[I+2]+P[I+2]),s(S[I+3]+P[I+3])]:(z=F[4*(3&j)+(3&M)],L=[s(S[I]+z),s(S[I+1]+z),s(S[I+2]+z),s(S[I+3]+z)]),U=0;let ne=16777215;for($=0;$<B;$++){const de=o(L,R[$]);de<ne&&(ne=de,U=$)}const G=R[U],te=[L[0]-G[0],L[1]-G[1],L[2]-G[2],L[3]-G[3]];N==1&&(M!=T-1&&i(te,P,I+4,7),j!=O-1&&(M!=0&&i(te,P,I+4*T-4,3),i(te,P,I+4*T,5),M!=T-1&&i(te,P,I+4*T+4,1))),A[I>>2]=U,J[I>>2]=C[U]}}function l(S,T,O,C,k){k==null&&(k={});const{crc:A}=r,N=e.writeUint,B=e.writeUshort,R=e.writeASCII;let I=8;const U=S.frames.length>1;let $,z=!1,J=33+(U?20:0);if(k.sRGB!=null&&(J+=13),k.pHYs!=null&&(J+=21),k.iCCP!=null&&($=pako.deflate(k.iCCP),J+=21+$.length+4),S.ctype==3){for(var P=S.plte.length,F=0;F<P;F++)S.plte[F]>>>24!=255&&(z=!0);J+=8+3*P+4+(z?8+1*P+4:0)}for(var L=0;L<S.frames.length;L++)U&&(J+=38),J+=(G=S.frames[L]).cimg.length+12,L!=0&&(J+=4);J+=12;const j=new Uint8Array(J),M=[137,80,78,71,13,10,26,10];for(F=0;F<8;F++)j[F]=M[F];if(N(j,I,13),I+=4,R(j,I,"IHDR"),I+=4,N(j,I,T),I+=4,N(j,I,O),I+=4,j[I]=S.depth,I++,j[I]=S.ctype,I++,j[I]=0,I++,j[I]=0,I++,j[I]=0,I++,N(j,I,A(j,I-17,17)),I+=4,k.sRGB!=null&&(N(j,I,1),I+=4,R(j,I,"sRGB"),I+=4,j[I]=k.sRGB,I++,N(j,I,A(j,I-5,5)),I+=4),k.iCCP!=null){const te=13+$.length;N(j,I,te),I+=4,R(j,I,"iCCP"),I+=4,R(j,I,"ICC profile"),I+=11,I+=2,j.set($,I),I+=$.length,N(j,I,A(j,I-(te+4),te+4)),I+=4}if(k.pHYs!=null&&(N(j,I,9),I+=4,R(j,I,"pHYs"),I+=4,N(j,I,k.pHYs[0]),I+=4,N(j,I,k.pHYs[1]),I+=4,j[I]=k.pHYs[2],I++,N(j,I,A(j,I-13,13)),I+=4),U&&(N(j,I,8),I+=4,R(j,I,"acTL"),I+=4,N(j,I,S.frames.length),I+=4,N(j,I,k.loop!=null?k.loop:0),I+=4,N(j,I,A(j,I-12,12)),I+=4),S.ctype==3){for(N(j,I,3*(P=S.plte.length)),I+=4,R(j,I,"PLTE"),I+=4,F=0;F<P;F++){const te=3*F,de=S.plte[F],ye=255&de,oe=de>>>8&255,De=de>>>16&255;j[I+te+0]=ye,j[I+te+1]=oe,j[I+te+2]=De}if(I+=3*P,N(j,I,A(j,I-3*P-4,3*P+4)),I+=4,z){for(N(j,I,P),I+=4,R(j,I,"tRNS"),I+=4,F=0;F<P;F++)j[I+F]=S.plte[F]>>>24&255;I+=P,N(j,I,A(j,I-P-4,P+4)),I+=4}}let ne=0;for(L=0;L<S.frames.length;L++){var G=S.frames[L];U&&(N(j,I,26),I+=4,R(j,I,"fcTL"),I+=4,N(j,I,ne++),I+=4,N(j,I,G.rect.width),I+=4,N(j,I,G.rect.height),I+=4,N(j,I,G.rect.x),I+=4,N(j,I,G.rect.y),I+=4,B(j,I,C[L]),I+=2,B(j,I,1e3),I+=2,j[I]=G.dispose,I++,j[I]=G.blend,I++,N(j,I,A(j,I-30,30)),I+=4);const te=G.cimg;N(j,I,(P=te.length)+(L==0?0:4)),I+=4;const de=I;R(j,I,L==0?"IDAT":"fdAT"),I+=4,L!=0&&(N(j,I,ne++),I+=4),j.set(te,I),I+=P,N(j,I,A(j,de,I-de)),I+=4}return N(j,I,0),I+=4,R(j,I,"IEND"),I+=4,N(j,I,A(j,I-4,4)),I+=4,j.buffer}function c(S,T,O){for(let C=0;C<S.frames.length;C++){const k=S.frames[C];k.rect.width;const A=k.rect.height,N=new Uint8Array(A*k.bpl+A);k.cimg=f(k.img,A,k.bpp,k.bpl,N,T,O)}}function u(S,T,O,C,k){const A=k[0],N=k[1],B=k[2],R=k[3],I=k[4],U=k[5];let $=6,z=8,J=255;for(var P=0;P<S.length;P++){const Me=new Uint8Array(S[P]);for(var F=Me.length,L=0;L<F;L+=4)J&=Me[L+3]}const j=J!=255,M=function(ve,Le,ft,qe,ut,Pt){const et=[];for(var pe=0;pe<ve.length;pe++){const _e=new Uint8Array(ve[pe]),Re=new Uint32Array(_e.buffer);var Ge;let Te=0,Fe=0,we=Le,W=ft,V=qe?1:0;if(pe!=0){const Z=Pt||qe||pe==1||et[pe-2].dispose!=0?1:2;let ie=0,ue=1e9;for(let he=0;he<Z;he++){var K=new Uint8Array(ve[pe-1-he]);const Oe=new Uint32Array(ve[pe-1-he]);let Ie=Le,Ce=ft,$e=-1,nt=-1;for(let Ze=0;Ze<ft;Ze++)for(let yt=0;yt<Le;yt++)Re[X=Ze*Le+yt]!=Oe[X]&&(yt<Ie&&(Ie=yt),yt>$e&&($e=yt),Ze<Ce&&(Ce=Ze),Ze>nt&&(nt=Ze));$e==-1&&(Ie=Ce=$e=nt=0),ut&&((1&Ie)==1&&Ie--,(1&Ce)==1&&Ce--);const rt=($e-Ie+1)*(nt-Ce+1);rt<ue&&(ue=rt,ie=he,Te=Ie,Fe=Ce,we=$e-Ie+1,W=nt-Ce+1)}K=new Uint8Array(ve[pe-1-ie]),ie==1&&(et[pe-1].dispose=2),Ge=new Uint8Array(we*W*4),t(K,Le,ft,Ge,we,W,-Te,-Fe,0),V=t(_e,Le,ft,Ge,we,W,-Te,-Fe,3)?1:0,V==1?h(_e,Le,ft,Ge,{x:Te,y:Fe,width:we,height:W}):t(_e,Le,ft,Ge,we,W,-Te,-Fe,0)}else Ge=_e.slice(0);et.push({rect:{x:Te,y:Fe,width:we,height:W},img:Ge,blend:V,dispose:0})}if(qe)for(pe=0;pe<et.length;pe++){if((be=et[pe]).blend==1)continue;const _e=be.rect,Re=et[pe-1].rect,Te=Math.min(_e.x,Re.x),Fe=Math.min(_e.y,Re.y),we={x:Te,y:Fe,width:Math.max(_e.x+_e.width,Re.x+Re.width)-Te,height:Math.max(_e.y+_e.height,Re.y+Re.height)-Fe};et[pe-1].dispose=1,pe-1!=0&&d(ve,Le,ft,et,pe-1,we,ut),d(ve,Le,ft,et,pe,we,ut)}let Y=0;if(ve.length!=1)for(var X=0;X<et.length;X++){var be;Y+=(be=et[X]).rect.width*be.rect.height}return et}(S,T,O,A,N,B),ne={},G=[],te=[];if(C!=0){const Me=[];for(L=0;L<M.length;L++)Me.push(M[L].img.buffer);const ve=function(ut){let Pt=0;for(var et=0;et<ut.length;et++)Pt+=ut[et].byteLength;const pe=new Uint8Array(Pt);let Ge=0;for(et=0;et<ut.length;et++){const K=new Uint8Array(ut[et]),Y=K.length;for(let X=0;X<Y;X+=4){let be=K[X],_e=K[X+1],Re=K[X+2];const Te=K[X+3];Te==0&&(be=_e=Re=0),pe[Ge+X]=be,pe[Ge+X+1]=_e,pe[Ge+X+2]=Re,pe[Ge+X+3]=Te}Ge+=Y}return pe.buffer}(Me),Le=y(ve,C);for(L=0;L<Le.plte.length;L++)G.push(Le.plte[L].est.rgba);let ft=0;for(L=0;L<M.length;L++){const qe=(ye=M[L]).img.length;var de=new Uint8Array(Le.inds.buffer,ft>>2,qe>>2);te.push(de);const ut=new Uint8Array(Le.abuf,ft,qe);U&&a(ye.img,ye.rect.width,ye.rect.height,G,ut,de),ye.img.set(ut),ft+=qe}}else for(P=0;P<M.length;P++){var ye=M[P];const Me=new Uint32Array(ye.img.buffer);var oe=ye.rect.width;for(F=Me.length,de=new Uint8Array(F),te.push(de),L=0;L<F;L++){const ve=Me[L];if(L!=0&&ve==Me[L-1])de[L]=de[L-1];else if(L>oe&&ve==Me[L-oe])de[L]=de[L-oe];else{let Le=ne[ve];if(Le==null&&(ne[ve]=Le=G.length,G.push(ve),G.length>=300))break;de[L]=Le}}}const De=G.length;for(De<=256&&I==0&&(z=De<=2?1:De<=4?2:De<=16?4:8,z=Math.max(z,R)),P=0;P<M.length;P++){(ye=M[P]).rect.x,ye.rect.y,oe=ye.rect.width;const Me=ye.rect.height;let ve=ye.img;new Uint32Array(ve.buffer);let Le=4*oe,ft=4;if(De<=256&&I==0){Le=Math.ceil(z*oe/8);var He=new Uint8Array(Le*Me);const qe=te[P];for(let ut=0;ut<Me;ut++){L=ut*Le;const Pt=ut*oe;if(z==8)for(var Ee=0;Ee<oe;Ee++)He[L+Ee]=qe[Pt+Ee];else if(z==4)for(Ee=0;Ee<oe;Ee++)He[L+(Ee>>1)]|=qe[Pt+Ee]<<4-4*(1&Ee);else if(z==2)for(Ee=0;Ee<oe;Ee++)He[L+(Ee>>2)]|=qe[Pt+Ee]<<6-2*(3&Ee);else if(z==1)for(Ee=0;Ee<oe;Ee++)He[L+(Ee>>3)]|=qe[Pt+Ee]<<7-1*(7&Ee)}ve=He,$=3,ft=1}else if(j==0&&M.length==1){He=new Uint8Array(oe*Me*3);const qe=oe*Me;for(L=0;L<qe;L++){const ut=3*L,Pt=4*L;He[ut]=ve[Pt],He[ut+1]=ve[Pt+1],He[ut+2]=ve[Pt+2]}ve=He,$=2,ft=3,Le=3*oe}ye.img=ve,ye.bpl=Le,ye.bpp=ft}return{ctype:$,depth:z,plte:G,frames:M}}function d(S,T,O,C,k,A,N){const B=Uint8Array,R=Uint32Array,I=new B(S[k-1]),U=new R(S[k-1]),$=k+1<S.length?new B(S[k+1]):null,z=new B(S[k]),J=new R(z.buffer);let P=T,F=O,L=-1,j=-1;for(let ne=0;ne<A.height;ne++)for(let G=0;G<A.width;G++){const te=A.x+G,de=A.y+ne,ye=de*T+te,oe=J[ye];oe==0||C[k-1].dispose==0&&U[ye]==oe&&($==null||$[4*ye+3]!=0)||(te<P&&(P=te),te>L&&(L=te),de<F&&(F=de),de>j&&(j=de))}L==-1&&(P=F=L=j=0),N&&((1&P)==1&&P--,(1&F)==1&&F--),A={x:P,y:F,width:L-P+1,height:j-F+1};const M=C[k];M.rect=A,M.blend=1,M.img=new Uint8Array(A.width*A.height*4),C[k-1].dispose==0?(t(I,T,O,M.img,A.width,A.height,-A.x,-A.y,0),h(z,T,O,M.img,A)):t(z,T,O,M.img,A.width,A.height,-A.x,-A.y,0)}function h(S,T,O,C,k){t(S,T,O,C,k.width,k.height,-k.x,-k.y,2)}function f(S,T,O,C,k,A,N){const B=[];let R,I=[0,1,2,3,4];A!=-1?I=[A]:(T*C>5e5||O==1)&&(I=[0]),N&&(R={level:0});const U=ode;for(var $=0;$<I.length;$++){for(let P=0;P<T;P++)p(k,S,P,C,O,I[$]);B.push(U.deflate(k,R))}let z,J=1e9;for($=0;$<B.length;$++)B[$].length<J&&(z=$,J=B[$].length);return B[z]}function p(S,T,O,C,k,A){const N=O*C;let B=N+O;if(S[B]=A,B++,A==0)if(C<500)for(var R=0;R<C;R++)S[B+R]=T[N+R];else S.set(new Uint8Array(T.buffer,N,C),B);else if(A==1){for(R=0;R<k;R++)S[B+R]=T[N+R];for(R=k;R<C;R++)S[B+R]=T[N+R]-T[N+R-k]+256&255}else if(O==0){for(R=0;R<k;R++)S[B+R]=T[N+R];if(A==2)for(R=k;R<C;R++)S[B+R]=T[N+R];if(A==3)for(R=k;R<C;R++)S[B+R]=T[N+R]-(T[N+R-k]>>1)+256&255;if(A==4)for(R=k;R<C;R++)S[B+R]=T[N+R]-n(T[N+R-k],0,0)+256&255}else{if(A==2)for(R=0;R<C;R++)S[B+R]=T[N+R]+256-T[N+R-C]&255;if(A==3){for(R=0;R<k;R++)S[B+R]=T[N+R]+256-(T[N+R-C]>>1)&255;for(R=k;R<C;R++)S[B+R]=T[N+R]+256-(T[N+R-C]+T[N+R-k]>>1)&255}if(A==4){for(R=0;R<k;R++)S[B+R]=T[N+R]+256-n(0,T[N+R-C],0)&255;for(R=k;R<C;R++)S[B+R]=T[N+R]+256-n(T[N+R-k],T[N+R-C],T[N+R-k-C])&255}}}function y(S,T){const O=new Uint8Array(S),C=O.slice(0),k=new Uint32Array(C.buffer),A=w(C,T),N=A[0],B=A[1],R=O.length,I=new Uint8Array(R>>2);let U;if(O.length<2e7)for(var $=0;$<R;$+=4)U=m(N,z=O[$]*(1/255),J=O[$+1]*(1/255),P=O[$+2]*(1/255),F=O[$+3]*(1/255)),I[$>>2]=U.ind,k[$>>2]=U.est.rgba;else for($=0;$<R;$+=4){var z=O[$]*.00392156862745098,J=O[$+1]*(1/255),P=O[$+2]*(1/255),F=O[$+3]*(1/255);for(U=N;U.left;)U=g(U.est,z,J,P,F)<=0?U.left:U.right;I[$>>2]=U.ind,k[$>>2]=U.est.rgba}return{abuf:C.buffer,inds:I,plte:B}}function w(S,T,O){O==null&&(O=1e-4);const C=new Uint32Array(S.buffer),k={i0:0,i1:S.length,bst:null,est:null,tdst:0,left:null,right:null};k.bst=x(S,k.i0,k.i1),k.est=E(k.bst);const A=[k];for(;A.length<T;){let B=0,R=0;for(var N=0;N<A.length;N++)A[N].est.L>B&&(B=A[N].est.L,R=N);if(B<O)break;const I=A[R],U=_(S,C,I.i0,I.i1,I.est.e,I.est.eMq255);if(I.i0>=U||I.i1<=U){I.est.L=0;continue}const $={i0:I.i0,i1:U,bst:null,est:null,tdst:0,left:null,right:null};$.bst=x(S,$.i0,$.i1),$.est=E($.bst);const z={i0:U,i1:I.i1,bst:null,est:null,tdst:0,left:null,right:null};for(z.bst={R:[],m:[],N:I.bst.N-$.bst.N},N=0;N<16;N++)z.bst.R[N]=I.bst.R[N]-$.bst.R[N];for(N=0;N<4;N++)z.bst.m[N]=I.bst.m[N]-$.bst.m[N];z.est=E(z.bst),I.left=$,I.right=z,A[R]=$,A.push(z)}for(A.sort((B,R)=>R.bst.N-B.bst.N),N=0;N<A.length;N++)A[N].ind=N;return[k,A]}function m(S,T,O,C,k){if(S.left==null)return S.tdst=function($,z,J,P,F){const L=z-$[0],j=J-$[1],M=P-$[2],ne=F-$[3];return L*L+j*j+M*M+ne*ne}(S.est.q,T,O,C,k),S;const A=g(S.est,T,O,C,k);let N=S.left,B=S.right;A>0&&(N=S.right,B=S.left);const R=m(N,T,O,C,k);if(R.tdst<=A*A)return R;const I=m(B,T,O,C,k);return I.tdst<R.tdst?I:R}function g(S,T,O,C,k){const{e:A}=S;return A[0]*T+A[1]*O+A[2]*C+A[3]*k-S.eMq}function _(S,T,O,C,k,A){for(C-=4;O<C;){for(;b(S,O,k)<=A;)O+=4;for(;b(S,C,k)>A;)C-=4;if(O>=C)break;const N=T[O>>2];T[O>>2]=T[C>>2],T[C>>2]=N,O+=4,C-=4}for(;b(S,O,k)>A;)O-=4;return O+4}function b(S,T,O){return S[T]*O[0]+S[T+1]*O[1]+S[T+2]*O[2]+S[T+3]*O[3]}function x(S,T,O){const C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],k=[0,0,0,0],A=O-T>>2;for(let N=T;N<O;N+=4){const B=S[N]*.00392156862745098,R=S[N+1]*(1/255),I=S[N+2]*(1/255),U=S[N+3]*(1/255);k[0]+=B,k[1]+=R,k[2]+=I,k[3]+=U,C[0]+=B*B,C[1]+=B*R,C[2]+=B*I,C[3]+=B*U,C[5]+=R*R,C[6]+=R*I,C[7]+=R*U,C[10]+=I*I,C[11]+=I*U,C[15]+=U*U}return C[4]=C[1],C[8]=C[2],C[9]=C[6],C[12]=C[3],C[13]=C[7],C[14]=C[11],{R:C,m:k,N:A}}function E(S){const{R:T}=S,{m:O}=S,{N:C}=S,k=O[0],A=O[1],N=O[2],B=O[3],R=C==0?0:1/C,I=[T[0]-k*k*R,T[1]-k*A*R,T[2]-k*N*R,T[3]-k*B*R,T[4]-A*k*R,T[5]-A*A*R,T[6]-A*N*R,T[7]-A*B*R,T[8]-N*k*R,T[9]-N*A*R,T[10]-N*N*R,T[11]-N*B*R,T[12]-B*k*R,T[13]-B*A*R,T[14]-B*N*R,T[15]-B*B*R],U=I,$=D;let z=[Math.random(),Math.random(),Math.random(),Math.random()],J=0,P=0;if(C!=0)for(let L=0;L<16&&(z=$.multVec(U,z),P=Math.sqrt($.dot(z,z)),z=$.sml(1/P,z),!(L!=0&&Math.abs(P-J)<1e-9));L++)J=P;const F=[k*R,A*R,N*R,B*R];return{Cov:I,q:F,e:z,L:J,eMq255:$.dot($.sml(255,F),z),eMq:$.dot(z,F),rgba:(Math.round(255*F[3])<<24|Math.round(255*F[2])<<16|Math.round(255*F[1])<<8|Math.round(255*F[0])<<0)>>>0}}var D={multVec:(S,T)=>[S[0]*T[0]+S[1]*T[1]+S[2]*T[2]+S[3]*T[3],S[4]*T[0]+S[5]*T[1]+S[6]*T[2]+S[7]*T[3],S[8]*T[0]+S[9]*T[1]+S[10]*T[2]+S[11]*T[3],S[12]*T[0]+S[13]*T[1]+S[14]*T[2]+S[15]*T[3]],dot:(S,T)=>S[0]*T[0]+S[1]*T[1]+S[2]*T[2]+S[3]*T[3],sml:(S,T)=>[S*T[0],S*T[1],S*T[2],S*T[3]]};ai.encode=function(T,O,C,k,A,N,B){k==null&&(k=0),B==null&&(B=!1);const R=u(T,O,C,k,[!1,!1,!1,0,B,!1]);return c(R,-1),l(R,O,C,A,N)},ai.encodeLL=function(T,O,C,k,A,N,B,R){const I={ctype:0+(k==1?0:2)+(A==0?0:4),depth:N,frames:[]},U=(k+A)*N,$=U*O;for(let z=0;z<T.length;z++)I.frames.push({rect:{x:0,y:0,width:O,height:C},img:new Uint8Array(T[z]),blend:0,dispose:1,bpp:Math.ceil(U/8),bpl:Math.ceil($/8)});return c(I,0,!0),l(I,O,C,B,R)},ai.encode.compress=u,ai.encode.dither=a,ai.quantize=y,ai.quantize.getKDtree=w,ai.quantize.getNearest=m})();const f3={toArrayBuffer(t,e){const n=t.width,r=t.height,i=n<<2,s=t.getContext("2d").getImageData(0,0,n,r),o=new Uint32Array(s.data.buffer),a=(32*n+31)/32<<2,l=a*r,c=122+l,u=new ArrayBuffer(c),d=new DataView(u),h=1<<20;let f,p,y,w,m=h,g=0,_=0,b=0;function x(S){d.setUint16(_,S,!0),_+=2}function E(S){d.setUint32(_,S,!0),_+=4}function D(S){_+=S}x(19778),E(c),D(4),E(122),E(108),E(n),E(-r>>>0),x(1),x(32),E(3),E(l),E(2835),E(2835),D(8),E(16711680),E(65280),E(255),E(4278190080),E(1466527264),function S(){for(;g<r&&m>0;){for(w=122+g*a,f=0;f<i;)m--,p=o[b++],y=p>>>24,d.setUint32(w+f,p<<8|y),f+=4;g++}b<o.length?(m=h,setTimeout(S,f3._dly)):e(u)}()},toBlob(t,e){this.toArrayBuffer(t,n=>{e(new Blob([n],{type:"image/bmp"}))})},_dly:9};var dr={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},ade={[dr.CHROME]:16384,[dr.FIREFOX]:11180,[dr.DESKTOP_SAFARI]:16384,[dr.IE]:8192,[dr.IOS]:4096,[dr.ETC]:8192};const XT=typeof window<"u",p3=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Jg=XT&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),lde=(XT||p3)&&(Jg&&Jg.getOriginalSymbol(window,"File")||typeof File<"u"&&File),m3=(XT||p3)&&(Jg&&Jg.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function JT(t,e,n=Date.now()){return new Promise(r=>{const i=t.split(","),s=i[0].match(/:(.*?);/)[1],o=globalThis.atob(i[1]);let a=o.length;const l=new Uint8Array(a);for(;a--;)l[a]=o.charCodeAt(a);const c=new Blob([l],{type:s});c.name=e,c.lastModified=n,r(c)})}function g3(t){return new Promise((e,n)=>{const r=new m3;r.onload=()=>e(r.result),r.onerror=i=>n(i),r.readAsDataURL(t)})}function y3(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>e(r),r.onerror=i=>n(i),r.src=t})}function Aa(){if(Aa.cachedResult!==void 0)return Aa.cachedResult;let t=dr.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?t=dr.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?t=dr.IOS:/Safari/i.test(e)?t=dr.DESKTOP_SAFARI:/Firefox/i.test(e)?t=dr.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(t=dr.IE),Aa.cachedResult=t,Aa.cachedResult}function v3(t,e){const n=Aa(),r=ade[n];let i=t,s=e,o=i*s;const a=i>s?s/i:i/s;for(;o>r*r;){const l=(r+i)/2,c=(r+s)/2;l<c?(s=c,i=c*a):(s=l*a,i=l),o=i*s}return{width:i,height:s}}function C_(t,e){let n,r;try{if(n=new OffscreenCanvas(t,e),r=n.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),r=n.getContext("2d")}return n.width=t,n.height=e,[n,r]}function _3(t,e){const{width:n,height:r}=v3(t.width,t.height),[i,s]=C_(n,r);return e&&/jpe?g/.test(e)&&(s.fillStyle="white",s.fillRect(0,0,i.width,i.height)),s.drawImage(t,0,0,i.width,i.height),i}function Tm(){return Tm.cachedResult!==void 0||(Tm.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Tm.cachedResult}function Zg(t,e={}){return new Promise(function(n,r){let i,s;var o=function(){try{return s=_3(i,e.fileType||t.type),n([i,s])}catch(l){return r(l)}},a=function(l){try{var c=function(u){try{throw u}catch(d){return r(d)}};try{let u;return g3(t).then(function(d){try{return u=d,y3(u).then(function(h){try{return i=h,function(){try{return o()}catch(f){return r(f)}}()}catch(f){return c(f)}},c)}catch(h){return c(h)}},c)}catch(u){c(u)}}catch(u){return r(u)}};try{if(Tm()||[dr.DESKTOP_SAFARI,dr.MOBILE_SAFARI].includes(Aa()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(t).then(function(l){try{return i=l,o()}catch{return a()}},a)}catch{a()}})}function ey(t,e,n,r,i=1){return new Promise(function(s,o){let a;if(e==="image/png"){let d,h,f;return d=t.getContext("2d"),{data:h}=d.getImageData(0,0,t.width,t.height),f=ai.encode([h.buffer],t.width,t.height,4096*i),a=new Blob([f],{type:e}),a.name=n,a.lastModified=r,l.call(this)}{let d=function(){return l.call(this)};var c=d;if(e==="image/bmp")return new Promise(h=>f3.toBlob(t,h)).then(function(h){try{return a=h,a.name=n,a.lastModified=r,d.call(this)}catch(f){return o(f)}}.bind(this),o);{let h=function(){return d.call(this)};var u=h;if(typeof OffscreenCanvas=="function"&&t instanceof OffscreenCanvas)return t.convertToBlob({type:e,quality:i}).then(function(f){try{return a=f,a.name=n,a.lastModified=r,h.call(this)}catch(p){return o(p)}}.bind(this),o);{let f;return f=t.toDataURL(e,i),JT(f,n,r).then(function(p){try{return a=p,h.call(this)}catch(y){return o(y)}}.bind(this),o)}}}function l(){return s(a)}})}function Ii(t){t.width=0,t.height=0}function cc(){return new Promise(function(t,e){let n,r,i,s;return cc.cachedResult!==void 0?t(cc.cachedResult):JT("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(o){try{return n=o,Zg(n).then(function(a){try{return r=a[1],ey(r,n.type,n.name,n.lastModified).then(function(l){try{return i=l,Ii(r),Zg(i).then(function(c){try{return s=c[0],cc.cachedResult=s.width===1&&s.height===2,t(cc.cachedResult)}catch(u){return e(u)}},e)}catch(c){return e(c)}},e)}catch(l){return e(l)}},e)}catch(a){return e(a)}},e)})}function w3(t){return new Promise((e,n)=>{const r=new m3;r.onload=i=>{const s=new DataView(i.target.result);if(s.getUint16(0,!1)!=65496)return e(-2);const o=s.byteLength;let a=2;for(;a<o;){if(s.getUint16(a+2,!1)<=8)return e(-1);const l=s.getUint16(a,!1);if(a+=2,l==65505){if(s.getUint32(a+=2,!1)!=1165519206)return e(-1);const c=s.getUint16(a+=6,!1)==18761;a+=s.getUint32(a+4,c);const u=s.getUint16(a,c);a+=2;for(let d=0;d<u;d++)if(s.getUint16(a+12*d,c)==274)return e(s.getUint16(a+12*d+8,c))}else{if((65280&l)!=65280)break;a+=s.getUint16(a,!1)}}return e(-1)},r.onerror=i=>n(i),r.readAsArrayBuffer(t)})}function b3(t,e){const{width:n}=t,{height:r}=t,{maxWidthOrHeight:i}=e;let s,o=t;return isFinite(i)&&(n>i||r>i)&&([o,s]=C_(n,r),n>r?(o.width=i,o.height=r/n*i):(o.width=n/r*i,o.height=i),s.drawImage(t,0,0,o.width,o.height),Ii(t)),o}function S3(t,e){const{width:n}=t,{height:r}=t,[i,s]=C_(n,r);switch(e>4&&e<9?(i.width=r,i.height=n):(i.width=n,i.height=r),e){case 2:s.transform(-1,0,0,1,n,0);break;case 3:s.transform(-1,0,0,-1,n,r);break;case 4:s.transform(1,0,0,-1,0,r);break;case 5:s.transform(0,1,1,0,0,0);break;case 6:s.transform(0,1,-1,0,r,0);break;case 7:s.transform(0,-1,-1,0,r,n);break;case 8:s.transform(0,-1,1,0,0,n)}return s.drawImage(t,0,0,n,r),Ii(t),i}function aN(t,e,n=0){return new Promise(function(r,i){let s,o,a,l,c,u,d,h,f,p,y,w,m,g,_,b,x,E,D,S;function T(C=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;s+=C,e.onProgress(Math.min(s,100))}function O(C){if(e.signal&&e.signal.aborted)throw e.signal.reason;s=Math.min(Math.max(C,s),100),e.onProgress(s)}return s=n,o=e.maxIteration||10,a=1024*e.maxSizeMB*1024,T(),Zg(t,e).then(function(C){try{return[,l]=C,T(),c=b3(l,e),T(),new Promise(function(k,A){var N;if(!(N=e.exifOrientation))return w3(t).then(function(R){try{return N=R,B.call(this)}catch(I){return A(I)}}.bind(this),A);function B(){return k(N)}return B.call(this)}).then(function(k){try{return u=k,T(),cc().then(function(A){try{return d=A?c:S3(c,u),T(),h=e.initialQuality||1,f=e.fileType||t.type,ey(d,f,t.name,t.lastModified,h).then(function(N){try{{let U=function(){if(o--&&(_>a||_>m)){let z,J;return z=S?.95*D.width:D.width,J=S?.95*D.height:D.height,[x,E]=C_(z,J),E.drawImage(D,0,0,z,J),h*=f==="image/png"?.85:.95,ey(x,f,t.name,t.lastModified,h).then(function(P){try{return b=P,Ii(D),D=x,_=b.size,O(Math.min(99,Math.floor((g-_)/(g-a)*100))),U}catch(F){return i(F)}},i)}return[1]},$=function(){return Ii(D),Ii(x),Ii(c),Ii(d),Ii(l),O(100),r(b)};var R=U,I=$;if(p=N,T(),y=p.size>a,w=p.size>t.size,!y&&!w)return O(100),r(p);var B;return m=t.size,g=p.size,_=g,D=d,S=!e.alwaysKeepResolution&&y,(B=function(z){for(;z;){if(z.then)return void z.then(B,i);try{if(z.pop){if(z.length)return z.pop()?$.call(this):z;z=U}else z=z.call(this)}catch(J){return i(J)}}}.bind(this))(U)}}catch(U){return i(U)}}.bind(this),i)}catch(N){return i(N)}}.bind(this),i)}catch(A){return i(A)}}.bind(this),i)}catch(k){return i(k)}}.bind(this),i)})}const cde=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Y0;function ude(t,e){return new Promise((n,r)=>{Y0||(Y0=function(o){const a=[];return typeof o=="function"?a.push(`(${o})()`):a.push(o),URL.createObjectURL(new Blob(a))}(cde));const i=new Worker(Y0);i.addEventListener("message",function(o){if(e.signal&&e.signal.aborted)i.terminate();else if(o.data.progress===void 0){if(o.data.error)return r(new Error(o.data.error)),void i.terminate();n(o.data.file),i.terminate()}else e.onProgress(o.data.progress)}),i.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",()=>{r(e.signal.reason),i.terminate()}),i.postMessage({file:t,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function nn(t,e){return new Promise(function(n,r){let i,s,o,a,l,c;if(i={...e},o=0,{onProgress:a}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,l=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=f=>{o=f,typeof a=="function"&&a(o)},!(t instanceof Blob||t instanceof lde))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return r(new Error("The file given is not an image"));if(c=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!l||typeof Worker!="function"||c)return aN(t,i).then(function(f){try{return s=f,h.call(this)}catch(p){return r(p)}}.bind(this),r);var u=function(){try{return h.call(this)}catch(f){return r(f)}}.bind(this),d=function(f){try{return aN(t,i).then(function(p){try{return s=p,u()}catch(y){return r(y)}},r)}catch(p){return r(p)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",ude(t,i).then(function(f){try{return s=f,u()}catch{return d()}},d)}catch{d()}function h(){try{s.name=t.name,s.lastModified=t.lastModified}catch{}try{i.preserveExif&&t.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===t.type)&&(s=h3(t,s))}catch{}return n(s)}})}nn.getDataUrlFromFile=g3,nn.getFilefromDataUrl=JT,nn.loadImage=y3,nn.drawImageInCanvas=_3,nn.drawFileInCanvas=Zg,nn.canvasToFile=ey,nn.getExifOrientation=w3,nn.handleMaxWidthOrHeight=b3,nn.followExifOrientation=S3,nn.cleanupCanvasMemory=Ii,nn.isAutoOrientationInBrowser=cc,nn.approximateBelowMaximumCanvasSizeOfBrowser=v3,nn.copyExifWithoutOrientation=h3,nn.getBrowserName=Aa,nn.version="2.0.2";const E3="/assets/icon_temp4-151e43f9.svg",dde="/assets/profile-bg-bf969c05.svg",ui=ee.button`
  cursor: pointer;
  width: auto;
  min-width: 99px;
  height: 40px;
  color : ${t=>t.filled?"#FFFFFF":"#212124"};
  background: ${t=>t.filled?bn:"#FFFFFF"};
  border: 1px solid ${t=>t.filled?"":"#D1D3D8"};
  border-radius: 4px;
  line-height: 40px;
  text-align: center;
  font-weight: 700;
  font-size: 16px;
  &:hover{
    background: ${t=>t.filled?"#A7845B":"#D1D3D8"};
    transition: .5s;
  }
  .BoardDeleteButton {
    border: 1px solid #FFFFFF;
  }
`;function k_(){const[t]=wt(Ur),e=Rs();return v.jsxs(hde,{children:[v.jsx("h2",{className:"error-message",children:t===null?"로그인 후 사용해주세요.":"이미 로그인 한 사용자 입니다."}),v.jsxs("div",{className:"button-div",children:[v.jsx(ui,{filled:!0,as:"a",onClick:()=>{e(t===null?"/signin":"/mypage")},children:t===null?"로그인":"마이페이지"}),v.jsx(ui,{as:"a",onClick:()=>{e(-1)},children:"뒤로가기"})]})]})}const hde=ee.main`
  display:flex;
  flex-flow:column;
  justify-content: center;
  align-items: center;
  width: 886px;
  height: 216px;
  margin:60px auto;
  .error-message{
    font-size:32px;
    font-weight: 700;
    margin-bottom:24px;
  }
  & .button-div{
    display:flex;
    gap:12px;
  }
`;function Nb({text:t,onClose:e}){return v.jsx(ZT,{children:v.jsxs("div",{className:"pop",children:[v.jsx("p",{children:t}),v.jsx("button",{type:"button",onClick:e,children:"확인"})]})})}const ZT=ee.div`
  z-index: 100;
  position: fixed;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: rgba(0,0,0,.4);
  .pop {
    width: 320px;
    min-height: 80px;
    background-color: white;
    border-radius: 10px;
    p {
      text-align: center;
      font-size: 14px;
      font-weight: 700;
      line-height: 30px;
      padding: 20px 0;
    }
    button {
      display: block;
      border: none;
      border-top: 1px solid ${E_};
      background-color: white;
      text-align: center;
      color: ${fp};
      width: 100%;
      line-height: 30px;
      font-weight: 700;
      margin-bottom: 10px;
      padding-top: 10px;
    }
  }
`;function fde(){const[t,e]=H.useState(!1),[n,r]=wt(Ur),[i,s]=wt(Pl),[o,a]=H.useState([]),[l,c]=H.useState(!1),[u,d]=H.useState(!1),[h,f]=H.useState({newNickname:i.nickname,newProfileImage:null});H.useEffect(()=>{b_.where("userId","==",n).onSnapshot(_=>{const b=_.docs.map(x=>({id:x.id,...x.data()}));b.sort((x,E)=>E.date-x.date),a(b),e(!0)})},[n]);const p=g=>{f(_=>({..._,[g.target.name]:g.target.value}))},y=async g=>{const _=g.target.files[0],b={maxSizeMB:.1,maxWidthOrHeight:100,useWebWorker:!0};if(_){const x=await nn(_,b);f(E=>({...E,newProfileImage:x}))}},w=async g=>{g.preventDefault();const _=i.profileImage;Rb.refFromURL(_);const x=await Rb.ref().child("profileImages/"+(new Date().getTime()+Math.random().toString(36).substr(2,5))).put(h.newProfileImage).then(D=>D.ref.getDownloadURL()),E={nickname:h.newNickname,profileImage:x};th.doc(n).update(E).then(()=>{c(!1),location.reload()})},m=()=>{af.currentUser.delete().then(()=>{console.log("회원 삭제 완료"),r(null),s({location:"",agree:"",email:"",nickname:"",phoneNumber:"",profileImage:""}),window.location.replace("/")}).catch(function(g){console.log(g.message)})};return v.jsx(v.Fragment,{children:n==null?v.jsx(k_,{state:"login"}):v.jsxs(pde,{className:"wrapper",children:[v.jsx(YT,{}),v.jsx("h2",{className:"articleTitle",children:"마이페이지"}),v.jsx(mde,{children:v.jsxs("div",{className:"basicInfo",children:[v.jsx("img",{alt:"내 프로필 사진",className:"profileImage",src:i.profileImage}),v.jsxs("span",{className:"intro",children:[v.jsxs("b",{"aria-label":"내 주소",className:"location",children:['"',i.location.sido," ",i.location.sigungu," ",i.location.bname,'"']}),"에서 🥔를 캐는",v.jsx("br",{}),"나는",v.jsx("b",{"aria-label":"내 닉네임",className:"nickname",children:i.nickname})]}),v.jsxs(gde,{children:[v.jsx("img",{alt:"매너온도 아이콘",className:"face",src:E3}),v.jsxs("div",{className:"right-box",children:[v.jsx("span",{className:"text",children:"36.5 ℃"}),v.jsx("div",{className:"gauge",children:v.jsx("span",{className:"gauge_bar",style:{width:36+"%"}})})]})]}),v.jsxs("div",{className:"button-wrapper",children:[v.jsx(ui,{type:"submit",onClick:()=>{c(!0)},children:"회원정보 변경"}),v.jsx(ui,{type:"submit",onClick:()=>{d(!0)},children:"회원탈퇴"})]})]})}),v.jsx("h2",{className:"articleTitle",children:"나의 매물"}),v.jsx(QT,{children:t?o.map(({content:g,title:_,price:b,side:x,imgsrc:E,id:D,check:S,heart:T},O)=>v.jsx(T_,{check:S,content:g,heart:T,id:D,imgsrc:E,price:b,side:x,title:_},O)):v.jsx(lf,{className:"loading"})}),l&&v.jsx(yde,{children:v.jsxs("div",{className:"pop",children:[v.jsx("form",{children:v.jsxs("fieldset",{children:[v.jsx("h3",{children:"회원정보 수정"}),v.jsxs("ul",{className:"form-list",children:[v.jsxs("li",{className:"form-item",children:[v.jsx("label",{htmlFor:"newNickname",children:"닉네임"}),v.jsx("input",{id:"newNickname",name:"newNickname",placeholder:"닉네임을 입력해주세요",type:"text",value:h.newNickname,onChange:p})]}),v.jsxs("li",{className:"form-item",children:[v.jsx("label",{htmlFor:"newProfileImage",children:"프로필 사진"}),v.jsxs("div",{className:"profile-image-wrapper",children:[v.jsx("img",{alt:"프로필 이미지사진 미리보기",className:"profile-image-preview",src:h.newProfileImage?URL.createObjectURL(h.newProfileImage):i.profileImage}),v.jsx("input",{accept:".png, .jpg, .jpeg, .svg",id:"newProfileImage",type:"file",onChange:y})]})]})]})]})}),v.jsxs("div",{className:"button-wrapper",children:[v.jsx("button",{type:"button",onClick:w,children:"수정"}),v.jsx("button",{type:"button",onClick:()=>{c(!1)},children:"취소"})]})]})}),u&&v.jsx(vde,{children:v.jsxs("div",{className:"pop",children:[v.jsx("p",{children:"정말로 회원 탈퇴하시겠습니까?"}),v.jsxs("div",{className:"button-wrapper",children:[v.jsx("button",{type:"button",onClick:m,children:"탈퇴"}),v.jsx("button",{type:"button",onClick:()=>{d(!1)},children:"취소"})]})]})})]})})}const pde=ee.main`
  padding-bottom: 40px;
  h2 {
    line-height: 36px;
    font-size: 32px;
    font-weight: 700;
    text-align: center;
    margin-bottom: 45px;
  }
`,mde=ee.section`
  .basicInfo {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 640px;
    margin: 0 auto 100px;
    padding: 30px 10px;
    box-sizing: border-box;
    border-radius: 10px;
    box-shadow: 0 3px 7px 3px rgb(0 0 0 / 7%);
    background: url(${dde}) center center;
    .profileImage {
      width: 100px;
      height: 100px;
      object-fit: cover;
      margin-bottom: 20px;
      border-radius: 50%;
      border: 1px solid ${pl};
    }
    .intro {
      margin-bottom: 6px;
      line-height: 30px;
      font-size: 14px;
      text-align: center;
    }
    .location {
      padding: 0px 4px;
      color: ${bn};
      font-size: 18px;
      line-height: 24px;
      margin: 0 3px;
    }
    .nickname {
      padding: 0 4px;
      font-size: 24px;
      font-weight: 700;
      line-height: 30px;
    }
    .uid {
      font-size: 12px;
      color: ${pl};
      vertical-align: top;
    }
    .button-wrapper {
      display: flex;
      gap: 8px;
    }
    @media screen and (max-width: 767px) {
      width: calc(100% - 60px);
    }
  }
`,gde=ee.div`
  display: flex;
  width: 360px;
  padding: 20px;
  box-sizing: border-box;
  .face {
    width: 30px;
    height: 30px;
    margin-right: 10px;
  }
  .right-box {
    flex: 1;
  }
  .text {
    color: rgb(49,158,69);
    font-weight: 700;
    font-size: 16px;
  }
  .gauge {
    position: relative;
    width: 100%;
    height: 8px;
    margin: 4px 0;
    border-radius: 2.5px;
    background-color: rgb(233,236,239);
    &_bar {
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      border-radius: 2.5px;
      background-color: rgb(49,158,69);
    }
  }
  @media screen and (max-width: 767px) {
    max-width: 360px;
    width: 100%;
  }
`,yde=ee(ZT)`
  .pop {
    display: flex;
    flex-direction: column;
    width: calc(100% - 100px);
    min-width: 300px;
    max-width: 500px;
    box-sizing: border-box;
    form {
      padding: 20px 40px 10px;
    }
  }
  h3 {
    font-size: 22px;
    font-weight: 700;
    line-height: 30px;
    text-align: center;
    margin: 10px 0 20px;
  }
  .form-item {
    display: flex;
    margin-bottom: 12px;
  }
  label {
    display: inline-block;
    flex-shrink: 0;
    width: 100px;
    font-weight: 700;
    line-height: 44px;
    cursor: pointer;
  }
  input[type="text"],
  input[type="file"]::file-selector-button {
    width: 100%;
    height: 44px;
    padding: 9px 20px;
    background-color: white;
    border: 1px solid ${S_};
    border-radius: 4px;
    box-sizing: border-box;
  }
  input[type="file"] {
    width: 100%;
    &::file-selector-button {
      color: ${bn};
      font-weight: 600;
      cursor: pointer;
    }
  }
  .profile-image-wrapper {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  .profile-image-preview {
    width: 100px;
    height: 100px;
    margin: 0 auto;
    object-fit: cover;
    border-radius: 50%;
    border: 1px solid ${pl};
  }
  .button-wrapper {
    display: flex;
  }
`,vde=ee(ZT)`
.pop {
    display: flex;
    flex-direction: column;
    width: calc(100% - 100px);
    min-width: 300px;
    max-width: 500px;
    box-sizing: border-box;
    p {
      color: #FC6767;
      font-size: 16px;
    }
  }
.button-wrapper {
    display: flex;
  }
`;function _de({recommend:t}){const[e]=wt(Pl),n=H.useRef(),r=$S();H.useEffect(()=>{n.current.value=""});const i=()=>{const s=qi(Wi,"UserWrite",r.id);Xc(s).then(a=>{t=a.data().recommend,t.push({id:e.nickname,time:Date(),content:n.current.value,commendimg:e.profileImage}),n.current.value="",Oo(s,{recommend:t}).then(()=>{location.reload()})})};return v.jsxs(wde,{children:[v.jsxs("h2",{children:["댓글 ",t.length]}),v.jsx("ul",{children:t.length>0?v.jsx(v.Fragment,{children:t.map(({content:s,id:o,time:a,commendimg:l},c)=>v.jsxs("li",{className:"recommend-list",children:[v.jsx("img",{alt:"사진",src:l||"https://firebasestorage.googleapis.com/v0/b/potato-market-lab18.appspot.com/o/default_profile.png?alt=media&token=8d1123dc-f7dd-4439-a8e3-881b1ce4a401"}),v.jsxs("div",{className:"recommend-wrapper",children:[v.jsx("span",{children:o||"수상한 고구마"}),v.jsx("span",{className:"time-span",children:a.slice(3,23)})]}),v.jsx("span",{className:"content",children:s})]},c))}):v.jsx("p",{children:"아직 댓글이 없습니다."})}),v.jsxs("div",{className:"input-div",children:[v.jsx("img",{alt:"본인 프로필",src:e?e.profileImage:"https://firebasestorage.googleapis.com/v0/b/potato-market-lab18.appspot.com/o/default_profile.png?alt=media&token=8d1123dc-f7dd-4439-a8e3-881b1ce4a401"}),v.jsx("input",{ref:n,type:"text"}),v.jsx("button",{type:"button",onClick:i,children:"게시"})]})]})}const wde=ee.div`
  padding: 35px 0;
  border-bottom: 1px solid rgb(233, 236, 239);
  img{
    border-radius: 50%;
    width:50px;
    height: 50px;
  }
  span{
    font-weight: 700;
  }
  h2{
    font-weight: 600;
    font-size: 19px;
    margin-bottom: 20px;
  }
  p{
    margin-bottom: 20px;
  }
  .recommend-list{
    height: 75px;
    display: flex;
    position: relative;
  }
  .time-span{
    margin-left: 5px;
    font-weight: 400;
    font-size: 11px;
    color: ${Hce};
    letter-spacing: .5px;
  }
  .recommend-wrapper{
    left: 65px;
    position: absolute;
    display: flex;
    align-items: center;
    gap: 4px;
    margin-top: 6px;
  }
  .input-div{
    margin-top: 10px;
    gap: 15px;
    position: relative;
    display: flex;
    justify-content: center
  }
  .content{
    word-wrap: break-word;
    display: inline;
    margin-left: 15px;
    margin-top: 27px;
    max-width: 580px;
  }
  .input-div input{
    border: 1px solid rgb(209, 211, 216);
    border-radius: 12px;
    width:80%;
    padding:0 70px 0 10px;
  }
  .input-div input:focus{
    outline: none;
  }
  .input-div button{
    padding 10px 15px;
    top: 7px;
    position: absolute;
    right: 10px;
    border: none;
    background-color: inherit;
    color: ${fp};
    font-weight: 700;
  }
`;function lN(t){return t!==null&&typeof t=="object"&&"constructor"in t&&t.constructor===Object}function eI(t={},e={}){Object.keys(e).forEach(n=>{typeof t[n]>"u"?t[n]=e[n]:lN(e[n])&&lN(t[n])&&Object.keys(e[n]).length>0&&eI(t[n],e[n])})}const x3={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Dl(){const t=typeof document<"u"?document:{};return eI(t,x3),t}const bde={document:x3,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(t){return typeof setTimeout>"u"?(t(),null):setTimeout(t,0)},cancelAnimationFrame(t){typeof setTimeout>"u"||clearTimeout(t)}};function Wr(){const t=typeof window<"u"?window:{};return eI(t,bde),t}function Sde(t){const e=t;Object.keys(e).forEach(n=>{try{e[n]=null}catch{}try{delete e[n]}catch{}})}function Pb(t,e=0){return setTimeout(t,e)}function cf(){return Date.now()}function Ede(t){const e=Wr();let n;return e.getComputedStyle&&(n=e.getComputedStyle(t,null)),!n&&t.currentStyle&&(n=t.currentStyle),n||(n=t.style),n}function xde(t,e="x"){const n=Wr();let r,i,s;const o=Ede(t);return n.WebKitCSSMatrix?(i=o.transform||o.webkitTransform,i.split(",").length>6&&(i=i.split(", ").map(a=>a.replace(",",".")).join(", ")),s=new n.WebKitCSSMatrix(i==="none"?"":i)):(s=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),r=s.toString().split(",")),e==="x"&&(n.WebKitCSSMatrix?i=s.m41:r.length===16?i=parseFloat(r[12]):i=parseFloat(r[4])),e==="y"&&(n.WebKitCSSMatrix?i=s.m42:r.length===16?i=parseFloat(r[13]):i=parseFloat(r[5])),i||0}function Zp(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"}function Tde(t){return typeof window<"u"&&typeof window.HTMLElement<"u"?t instanceof HTMLElement:t&&(t.nodeType===1||t.nodeType===11)}function kr(...t){const e=Object(t[0]),n=["__proto__","constructor","prototype"];for(let r=1;r<t.length;r+=1){const i=t[r];if(i!=null&&!Tde(i)){const s=Object.keys(Object(i)).filter(o=>n.indexOf(o)<0);for(let o=0,a=s.length;o<a;o+=1){const l=s[o],c=Object.getOwnPropertyDescriptor(i,l);c!==void 0&&c.enumerable&&(Zp(e[l])&&Zp(i[l])?i[l].__swiper__?e[l]=i[l]:kr(e[l],i[l]):!Zp(e[l])&&Zp(i[l])?(e[l]={},i[l].__swiper__?e[l]=i[l]:kr(e[l],i[l])):e[l]=i[l])}}}return e}function em(t,e,n){t.style.setProperty(e,n)}function T3({swiper:t,targetPosition:e,side:n}){const r=Wr(),i=-t.translate;let s=null,o;const a=t.params.speed;t.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(t.cssModeFrameID);const l=e>i?"next":"prev",c=(d,h)=>l==="next"&&d>=h||l==="prev"&&d<=h,u=()=>{o=new Date().getTime(),s===null&&(s=o);const d=Math.max(Math.min((o-s)/a,1),0),h=.5-Math.cos(d*Math.PI)/2;let f=i+h*(e-i);if(c(f,e)&&(f=e),t.wrapperEl.scrollTo({[n]:f}),c(f,e)){t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout(()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[n]:f})}),r.cancelAnimationFrame(t.cssModeFrameID);return}t.cssModeFrameID=r.requestAnimationFrame(u)};u()}function $i(t,e=""){return[...t.children].filter(n=>n.matches(e))}function I3(t,e=[]){const n=document.createElement(t);return n.classList.add(...Array.isArray(e)?e:[e]),n}function Ide(t,e){const n=[];for(;t.previousElementSibling;){const r=t.previousElementSibling;e?r.matches(e)&&n.push(r):n.push(r),t=r}return n}function Cde(t,e){const n=[];for(;t.nextElementSibling;){const r=t.nextElementSibling;e?r.matches(e)&&n.push(r):n.push(r),t=r}return n}function io(t,e){return Wr().getComputedStyle(t,null).getPropertyValue(e)}function ty(t){let e=t,n;if(e){for(n=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(n+=1);return n}}function C3(t,e){const n=[];let r=t.parentElement;for(;r;)e?r.matches(e)&&n.push(r):n.push(r),r=r.parentElement;return n}function Db(t,e,n){const r=Wr();return n?t[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(r.getComputedStyle(t,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(r.getComputedStyle(t,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom")):t.offsetWidth}let X0;function kde(){const t=Wr(),e=Dl();return{smoothScroll:e.documentElement&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch)}}function k3(){return X0||(X0=kde()),X0}let J0;function Ade({userAgent:t}={}){const e=k3(),n=Wr(),r=n.navigator.platform,i=t||n.navigator.userAgent,s={ios:!1,android:!1},o=n.screen.width,a=n.screen.height,l=i.match(/(Android);?[\s\/]+([\d.]+)?/);let c=i.match(/(iPad).*OS\s([\d_]+)/);const u=i.match(/(iPod)(.*OS\s([\d_]+))?/),d=!c&&i.match(/(iPhone\sOS|iOS)\s([\d_]+)/),h=r==="Win32";let f=r==="MacIntel";const p=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!c&&f&&e.touch&&p.indexOf(`${o}x${a}`)>=0&&(c=i.match(/(Version)\/([\d.]+)/),c||(c=[0,1,"13_0_0"]),f=!1),l&&!h&&(s.os="android",s.android=!0),(c||d||u)&&(s.os="ios",s.ios=!0),s}function Rde(t={}){return J0||(J0=Ade(t)),J0}let Z0;function Nde(){const t=Wr();let e=!1;function n(){const r=t.navigator.userAgent.toLowerCase();return r.indexOf("safari")>=0&&r.indexOf("chrome")<0&&r.indexOf("android")<0}if(n()){const r=String(t.navigator.userAgent);if(r.includes("Version/")){const[i,s]=r.split("Version/")[1].split(" ")[0].split(".").map(o=>Number(o));e=i<16||i===16&&s<2}}return{isSafari:e||n(),needPerspectiveFix:e,isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent)}}function Pde(){return Z0||(Z0=Nde()),Z0}function Dde({swiper:t,on:e,emit:n}){const r=Wr();let i=null,s=null;const o=()=>{!t||t.destroyed||!t.initialized||(n("beforeResize"),n("resize"))},a=()=>{!t||t.destroyed||!t.initialized||(i=new ResizeObserver(u=>{s=r.requestAnimationFrame(()=>{const{width:d,height:h}=t;let f=d,p=h;u.forEach(({contentBoxSize:y,contentRect:w,target:m})=>{m&&m!==t.el||(f=w?w.width:(y[0]||y).inlineSize,p=w?w.height:(y[0]||y).blockSize)}),(f!==d||p!==h)&&o()})}),i.observe(t.el))},l=()=>{s&&r.cancelAnimationFrame(s),i&&i.unobserve&&t.el&&(i.unobserve(t.el),i=null)},c=()=>{!t||t.destroyed||!t.initialized||n("orientationchange")};e("init",()=>{if(t.params.resizeObserver&&typeof r.ResizeObserver<"u"){a();return}r.addEventListener("resize",o),r.addEventListener("orientationchange",c)}),e("destroy",()=>{l(),r.removeEventListener("resize",o),r.removeEventListener("orientationchange",c)})}function Ode({swiper:t,extendParams:e,on:n,emit:r}){const i=[],s=Wr(),o=(c,u={})=>{const d=s.MutationObserver||s.WebkitMutationObserver,h=new d(f=>{if(t.__preventObserver__)return;if(f.length===1){r("observerUpdate",f[0]);return}const p=function(){r("observerUpdate",f[0])};s.requestAnimationFrame?s.requestAnimationFrame(p):s.setTimeout(p,0)});h.observe(c,{attributes:typeof u.attributes>"u"?!0:u.attributes,childList:typeof u.childList>"u"?!0:u.childList,characterData:typeof u.characterData>"u"?!0:u.characterData}),i.push(h)},a=()=>{if(t.params.observer){if(t.params.observeParents){const c=C3(t.el);for(let u=0;u<c.length;u+=1)o(c[u])}o(t.el,{childList:t.params.observeSlideChildren}),o(t.wrapperEl,{attributes:!1})}},l=()=>{i.forEach(c=>{c.disconnect()}),i.splice(0,i.length)};e({observer:!1,observeParents:!1,observeSlideChildren:!1}),n("init",a),n("destroy",l)}const Lde={on(t,e,n){const r=this;if(!r.eventsListeners||r.destroyed||typeof e!="function")return r;const i=n?"unshift":"push";return t.split(" ").forEach(s=>{r.eventsListeners[s]||(r.eventsListeners[s]=[]),r.eventsListeners[s][i](e)}),r},once(t,e,n){const r=this;if(!r.eventsListeners||r.destroyed||typeof e!="function")return r;function i(...s){r.off(t,i),i.__emitterProxy&&delete i.__emitterProxy,e.apply(r,s)}return i.__emitterProxy=e,r.on(t,i,n)},onAny(t,e){const n=this;if(!n.eventsListeners||n.destroyed||typeof t!="function")return n;const r=e?"unshift":"push";return n.eventsAnyListeners.indexOf(t)<0&&n.eventsAnyListeners[r](t),n},offAny(t){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const n=e.eventsAnyListeners.indexOf(t);return n>=0&&e.eventsAnyListeners.splice(n,1),e},off(t,e){const n=this;return!n.eventsListeners||n.destroyed||!n.eventsListeners||t.split(" ").forEach(r=>{typeof e>"u"?n.eventsListeners[r]=[]:n.eventsListeners[r]&&n.eventsListeners[r].forEach((i,s)=>{(i===e||i.__emitterProxy&&i.__emitterProxy===e)&&n.eventsListeners[r].splice(s,1)})}),n},emit(...t){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsListeners)return e;let n,r,i;return typeof t[0]=="string"||Array.isArray(t[0])?(n=t[0],r=t.slice(1,t.length),i=e):(n=t[0].events,r=t[0].data,i=t[0].context||e),r.unshift(i),(Array.isArray(n)?n:n.split(" ")).forEach(o=>{e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach(a=>{a.apply(i,[o,...r])}),e.eventsListeners&&e.eventsListeners[o]&&e.eventsListeners[o].forEach(a=>{a.apply(i,r)})}),e}};function Mde(){const t=this;let e,n;const r=t.el;typeof t.params.width<"u"&&t.params.width!==null?e=t.params.width:e=r.clientWidth,typeof t.params.height<"u"&&t.params.height!==null?n=t.params.height:n=r.clientHeight,!(e===0&&t.isHorizontal()||n===0&&t.isVertical())&&(e=e-parseInt(io(r,"padding-left")||0,10)-parseInt(io(r,"padding-right")||0,10),n=n-parseInt(io(r,"padding-top")||0,10)-parseInt(io(r,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(n)&&(n=0),Object.assign(t,{width:e,height:n,size:t.isHorizontal()?e:n}))}function $de(){const t=this;function e(C){return t.isHorizontal()?C:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[C]}function n(C,k){return parseFloat(C.getPropertyValue(e(k))||0)}const r=t.params,{wrapperEl:i,slidesEl:s,size:o,rtlTranslate:a,wrongRTL:l}=t,c=t.virtual&&r.virtual.enabled,u=c?t.virtual.slides.length:t.slides.length,d=$i(s,`.${t.params.slideClass}, swiper-slide`),h=c?t.virtual.slides.length:d.length;let f=[];const p=[],y=[];let w=r.slidesOffsetBefore;typeof w=="function"&&(w=r.slidesOffsetBefore.call(t));let m=r.slidesOffsetAfter;typeof m=="function"&&(m=r.slidesOffsetAfter.call(t));const g=t.snapGrid.length,_=t.slidesGrid.length;let b=r.spaceBetween,x=-w,E=0,D=0;if(typeof o>"u")return;typeof b=="string"&&b.indexOf("%")>=0&&(b=parseFloat(b.replace("%",""))/100*o),t.virtualSize=-b,d.forEach(C=>{a?C.style.marginLeft="":C.style.marginRight="",C.style.marginBottom="",C.style.marginTop=""}),r.centeredSlides&&r.cssMode&&(em(i,"--swiper-centered-offset-before",""),em(i,"--swiper-centered-offset-after",""));const S=r.grid&&r.grid.rows>1&&t.grid;S&&t.grid.initSlides(h);let T;const O=r.slidesPerView==="auto"&&r.breakpoints&&Object.keys(r.breakpoints).filter(C=>typeof r.breakpoints[C].slidesPerView<"u").length>0;for(let C=0;C<h;C+=1){T=0;let k;if(d[C]&&(k=d[C]),S&&t.grid.updateSlide(C,k,h,e),!(d[C]&&io(k,"display")==="none")){if(r.slidesPerView==="auto"){O&&(d[C].style[e("width")]="");const A=getComputedStyle(k),N=k.style.transform,B=k.style.webkitTransform;if(N&&(k.style.transform="none"),B&&(k.style.webkitTransform="none"),r.roundLengths)T=t.isHorizontal()?Db(k,"width",!0):Db(k,"height",!0);else{const R=n(A,"width"),I=n(A,"padding-left"),U=n(A,"padding-right"),$=n(A,"margin-left"),z=n(A,"margin-right"),J=A.getPropertyValue("box-sizing");if(J&&J==="border-box")T=R+$+z;else{const{clientWidth:P,offsetWidth:F}=k;T=R+I+U+$+z+(F-P)}}N&&(k.style.transform=N),B&&(k.style.webkitTransform=B),r.roundLengths&&(T=Math.floor(T))}else T=(o-(r.slidesPerView-1)*b)/r.slidesPerView,r.roundLengths&&(T=Math.floor(T)),d[C]&&(d[C].style[e("width")]=`${T}px`);d[C]&&(d[C].swiperSlideSize=T),y.push(T),r.centeredSlides?(x=x+T/2+E/2+b,E===0&&C!==0&&(x=x-o/2-b),C===0&&(x=x-o/2-b),Math.abs(x)<1/1e3&&(x=0),r.roundLengths&&(x=Math.floor(x)),D%r.slidesPerGroup===0&&f.push(x),p.push(x)):(r.roundLengths&&(x=Math.floor(x)),(D-Math.min(t.params.slidesPerGroupSkip,D))%t.params.slidesPerGroup===0&&f.push(x),p.push(x),x=x+T+b),t.virtualSize+=T+b,E=T,D+=1}}if(t.virtualSize=Math.max(t.virtualSize,o)+m,a&&l&&(r.effect==="slide"||r.effect==="coverflow")&&(i.style.width=`${t.virtualSize+r.spaceBetween}px`),r.setWrapperSize&&(i.style[e("width")]=`${t.virtualSize+r.spaceBetween}px`),S&&t.grid.updateWrapperSize(T,f,e),!r.centeredSlides){const C=[];for(let k=0;k<f.length;k+=1){let A=f[k];r.roundLengths&&(A=Math.floor(A)),f[k]<=t.virtualSize-o&&C.push(A)}f=C,Math.floor(t.virtualSize-o)-Math.floor(f[f.length-1])>1&&f.push(t.virtualSize-o)}if(c&&r.loop){const C=y[0]+b;if(r.slidesPerGroup>1){const k=Math.ceil((t.virtual.slidesBefore+t.virtual.slidesAfter)/r.slidesPerGroup),A=C*r.slidesPerGroup;for(let N=0;N<k;N+=1)f.push(f[f.length-1]+A)}for(let k=0;k<t.virtual.slidesBefore+t.virtual.slidesAfter;k+=1)r.slidesPerGroup===1&&f.push(f[f.length-1]+C),p.push(p[p.length-1]+C),t.virtualSize+=C}if(f.length===0&&(f=[0]),r.spaceBetween!==0){const C=t.isHorizontal()&&a?"marginLeft":e("marginRight");d.filter((k,A)=>!r.cssMode||r.loop?!0:A!==d.length-1).forEach(k=>{k.style[C]=`${b}px`})}if(r.centeredSlides&&r.centeredSlidesBounds){let C=0;y.forEach(A=>{C+=A+(r.spaceBetween?r.spaceBetween:0)}),C-=r.spaceBetween;const k=C-o;f=f.map(A=>A<0?-w:A>k?k+m:A)}if(r.centerInsufficientSlides){let C=0;if(y.forEach(k=>{C+=k+(r.spaceBetween?r.spaceBetween:0)}),C-=r.spaceBetween,C<o){const k=(o-C)/2;f.forEach((A,N)=>{f[N]=A-k}),p.forEach((A,N)=>{p[N]=A+k})}}if(Object.assign(t,{slides:d,snapGrid:f,slidesGrid:p,slidesSizesGrid:y}),r.centeredSlides&&r.cssMode&&!r.centeredSlidesBounds){em(i,"--swiper-centered-offset-before",`${-f[0]}px`),em(i,"--swiper-centered-offset-after",`${t.size/2-y[y.length-1]/2}px`);const C=-t.snapGrid[0],k=-t.slidesGrid[0];t.snapGrid=t.snapGrid.map(A=>A+C),t.slidesGrid=t.slidesGrid.map(A=>A+k)}if(h!==u&&t.emit("slidesLengthChange"),f.length!==g&&(t.params.watchOverflow&&t.checkOverflow(),t.emit("snapGridLengthChange")),p.length!==_&&t.emit("slidesGridLengthChange"),r.watchSlidesProgress&&t.updateSlidesOffset(),!c&&!r.cssMode&&(r.effect==="slide"||r.effect==="fade")){const C=`${r.containerModifierClass}backface-hidden`,k=t.el.classList.contains(C);h<=r.maxBackfaceHiddenSlides?k||t.el.classList.add(C):k&&t.el.classList.remove(C)}}function Fde(t){const e=this,n=[],r=e.virtual&&e.params.virtual.enabled;let i=0,s;typeof t=="number"?e.setTransition(t):t===!0&&e.setTransition(e.params.speed);const o=a=>r?e.slides.filter(l=>parseInt(l.getAttribute("data-swiper-slide-index"),10)===a)[0]:e.slides[a];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(a=>{n.push(a)});else for(s=0;s<Math.ceil(e.params.slidesPerView);s+=1){const a=e.activeIndex+s;if(a>e.slides.length&&!r)break;n.push(o(a))}else n.push(o(e.activeIndex));for(s=0;s<n.length;s+=1)if(typeof n[s]<"u"){const a=n[s].offsetHeight;i=a>i?a:i}(i||i===0)&&(e.wrapperEl.style.height=`${i}px`)}function Ude(){const t=this,e=t.slides,n=t.isElement?t.isHorizontal()?t.wrapperEl.offsetLeft:t.wrapperEl.offsetTop:0;for(let r=0;r<e.length;r+=1)e[r].swiperSlideOffset=(t.isHorizontal()?e[r].offsetLeft:e[r].offsetTop)-n}function jde(t=this&&this.translate||0){const e=this,n=e.params,{slides:r,rtlTranslate:i,snapGrid:s}=e;if(r.length===0)return;typeof r[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let o=-t;i&&(o=t),r.forEach(a=>{a.classList.remove(n.slideVisibleClass)}),e.visibleSlidesIndexes=[],e.visibleSlides=[];for(let a=0;a<r.length;a+=1){const l=r[a];let c=l.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(c-=r[0].swiperSlideOffset);const u=(o+(n.centeredSlides?e.minTranslate():0)-c)/(l.swiperSlideSize+n.spaceBetween),d=(o-s[0]+(n.centeredSlides?e.minTranslate():0)-c)/(l.swiperSlideSize+n.spaceBetween),h=-(o-c),f=h+e.slidesSizesGrid[a];(h>=0&&h<e.size-1||f>1&&f<=e.size||h<=0&&f>=e.size)&&(e.visibleSlides.push(l),e.visibleSlidesIndexes.push(a),r[a].classList.add(n.slideVisibleClass)),l.progress=i?-u:u,l.originalProgress=i?-d:d}}function Vde(t){const e=this;if(typeof t>"u"){const u=e.rtlTranslate?-1:1;t=e&&e.translate&&e.translate*u||0}const n=e.params,r=e.maxTranslate()-e.minTranslate();let{progress:i,isBeginning:s,isEnd:o,progressLoop:a}=e;const l=s,c=o;if(r===0)i=0,s=!0,o=!0;else{i=(t-e.minTranslate())/r;const u=Math.abs(t-e.minTranslate())<1,d=Math.abs(t-e.maxTranslate())<1;s=u||i<=0,o=d||i>=1,u&&(i=0),d&&(i=1)}if(n.loop){const u=e.getSlideIndex(e.slides.filter(w=>w.getAttribute("data-swiper-slide-index")==="0")[0]),d=e.getSlideIndex(e.slides.filter(w=>w.getAttribute("data-swiper-slide-index")*1===e.slides.length-1)[0]),h=e.slidesGrid[u],f=e.slidesGrid[d],p=e.slidesGrid[e.slidesGrid.length-1],y=Math.abs(t);y>=h?a=(y-h)/p:a=(y+p-f)/p,a>1&&(a-=1)}Object.assign(e,{progress:i,progressLoop:a,isBeginning:s,isEnd:o}),(n.watchSlidesProgress||n.centeredSlides&&n.autoHeight)&&e.updateSlidesProgress(t),s&&!l&&e.emit("reachBeginning toEdge"),o&&!c&&e.emit("reachEnd toEdge"),(l&&!s||c&&!o)&&e.emit("fromEdge"),e.emit("progress",i)}function Bde(){const t=this,{slides:e,params:n,slidesEl:r,activeIndex:i}=t,s=t.virtual&&n.virtual.enabled,o=l=>$i(r,`.${n.slideClass}${l}, swiper-slide${l}`)[0];e.forEach(l=>{l.classList.remove(n.slideActiveClass,n.slideNextClass,n.slidePrevClass)});let a;if(s)if(n.loop){let l=i-t.virtual.slidesBefore;l<0&&(l=t.virtual.slides.length+l),l>=t.virtual.slides.length&&(l-=t.virtual.slides.length),a=o(`[data-swiper-slide-index="${l}"]`)}else a=o(`[data-swiper-slide-index="${i}"]`);else a=e[i];if(a){a.classList.add(n.slideActiveClass);let l=Cde(a,`.${n.slideClass}, swiper-slide`)[0];n.loop&&!l&&(l=e[0]),l&&l.classList.add(n.slideNextClass);let c=Ide(a,`.${n.slideClass}, swiper-slide`)[0];n.loop&&!c===0&&(c=e[e.length-1]),c&&c.classList.add(n.slidePrevClass)}t.emitSlidesClasses()}function zde(t){const{slidesGrid:e,params:n}=t,r=t.rtlTranslate?t.translate:-t.translate;let i;for(let s=0;s<e.length;s+=1)typeof e[s+1]<"u"?r>=e[s]&&r<e[s+1]-(e[s+1]-e[s])/2?i=s:r>=e[s]&&r<e[s+1]&&(i=s+1):r>=e[s]&&(i=s);return n.normalizeSlideIndex&&(i<0||typeof i>"u")&&(i=0),i}function Wde(t){const e=this,n=e.rtlTranslate?e.translate:-e.translate,{snapGrid:r,params:i,activeIndex:s,realIndex:o,snapIndex:a}=e;let l=t,c;const u=h=>{let f=h-e.virtual.slidesBefore;return f<0&&(f=e.virtual.slides.length+f),f>=e.virtual.slides.length&&(f-=e.virtual.slides.length),f};if(typeof l>"u"&&(l=zde(e)),r.indexOf(n)>=0)c=r.indexOf(n);else{const h=Math.min(i.slidesPerGroupSkip,l);c=h+Math.floor((l-h)/i.slidesPerGroup)}if(c>=r.length&&(c=r.length-1),l===s){c!==a&&(e.snapIndex=c,e.emit("snapIndexChange")),e.params.loop&&e.virtual&&e.params.virtual.enabled&&(e.realIndex=u(l));return}let d;e.virtual&&i.virtual.enabled&&i.loop?d=u(l):e.slides[l]?d=parseInt(e.slides[l].getAttribute("data-swiper-slide-index")||l,10):d=l,Object.assign(e,{snapIndex:c,realIndex:d,previousIndex:s,activeIndex:l}),e.emit("activeIndexChange"),e.emit("snapIndexChange"),o!==d&&e.emit("realIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&e.emit("slideChange")}function Hde(t){const e=this,n=e.params,r=t.closest(`.${n.slideClass}, swiper-slide`);let i=!1,s;if(r){for(let o=0;o<e.slides.length;o+=1)if(e.slides[o]===r){i=!0,s=o;break}}if(r&&i)e.clickedSlide=r,e.virtual&&e.params.virtual.enabled?e.clickedIndex=parseInt(r.getAttribute("data-swiper-slide-index"),10):e.clickedIndex=s;else{e.clickedSlide=void 0,e.clickedIndex=void 0;return}n.slideToClickedSlide&&e.clickedIndex!==void 0&&e.clickedIndex!==e.activeIndex&&e.slideToClickedSlide()}const Gde={updateSize:Mde,updateSlides:$de,updateAutoHeight:Fde,updateSlidesOffset:Ude,updateSlidesProgress:jde,updateProgress:Vde,updateSlidesClasses:Bde,updateActiveIndex:Wde,updateClickedSlide:Hde};function qde(t=this.isHorizontal()?"x":"y"){const e=this,{params:n,rtlTranslate:r,translate:i,wrapperEl:s}=e;if(n.virtualTranslate)return r?-i:i;if(n.cssMode)return i;let o=xde(s,t);return r&&(o=-o),o||0}function Kde(t,e){const n=this,{rtlTranslate:r,params:i,wrapperEl:s,progress:o}=n;let a=0,l=0;const c=0;n.isHorizontal()?a=r?-t:t:l=t,i.roundLengths&&(a=Math.floor(a),l=Math.floor(l)),i.cssMode?s[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-a:-l:i.virtualTranslate||(s.style.transform=`translate3d(${a}px, ${l}px, ${c}px)`),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?a:l;let u;const d=n.maxTranslate()-n.minTranslate();d===0?u=0:u=(t-n.minTranslate())/d,u!==o&&n.updateProgress(t),n.emit("setTranslate",n.translate,e)}function Qde(){return-this.snapGrid[0]}function Yde(){return-this.snapGrid[this.snapGrid.length-1]}function Xde(t=0,e=this.params.speed,n=!0,r=!0,i){const s=this,{params:o,wrapperEl:a}=s;if(s.animating&&o.preventInteractionOnTransition)return!1;const l=s.minTranslate(),c=s.maxTranslate();let u;if(r&&t>l?u=l:r&&t<c?u=c:u=t,s.updateProgress(u),o.cssMode){const d=s.isHorizontal();if(e===0)a[d?"scrollLeft":"scrollTop"]=-u;else{if(!s.support.smoothScroll)return T3({swiper:s,targetPosition:-u,side:d?"left":"top"}),!0;a.scrollTo({[d?"left":"top"]:-u,behavior:"smooth"})}return!0}return e===0?(s.setTransition(0),s.setTranslate(u),n&&(s.emit("beforeTransitionStart",e,i),s.emit("transitionEnd"))):(s.setTransition(e),s.setTranslate(u),n&&(s.emit("beforeTransitionStart",e,i),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(h){!s||s.destroyed||h.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,n&&s.emit("transitionEnd"))}),s.wrapperEl.addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd))),!0}const Jde={getTranslate:qde,setTranslate:Kde,minTranslate:Qde,maxTranslate:Yde,translateTo:Xde};function Zde(t,e){const n=this;n.params.cssMode||(n.wrapperEl.style.transitionDuration=`${t}ms`),n.emit("setTransition",t,e)}function A3({swiper:t,runCallbacks:e,direction:n,step:r}){const{activeIndex:i,previousIndex:s}=t;let o=n;if(o||(i>s?o="next":i<s?o="prev":o="reset"),t.emit(`transition${r}`),e&&i!==s){if(o==="reset"){t.emit(`slideResetTransition${r}`);return}t.emit(`slideChangeTransition${r}`),o==="next"?t.emit(`slideNextTransition${r}`):t.emit(`slidePrevTransition${r}`)}}function ehe(t=!0,e){const n=this,{params:r}=n;r.cssMode||(r.autoHeight&&n.updateAutoHeight(),A3({swiper:n,runCallbacks:t,direction:e,step:"Start"}))}function the(t=!0,e){const n=this,{params:r}=n;n.animating=!1,!r.cssMode&&(n.setTransition(0),A3({swiper:n,runCallbacks:t,direction:e,step:"End"}))}const nhe={setTransition:Zde,transitionStart:ehe,transitionEnd:the};function rhe(t=0,e=this.params.speed,n=!0,r,i){typeof t=="string"&&(t=parseInt(t,10));const s=this;let o=t;o<0&&(o=0);const{params:a,snapGrid:l,slidesGrid:c,previousIndex:u,activeIndex:d,rtlTranslate:h,wrapperEl:f,enabled:p}=s;if(s.animating&&a.preventInteractionOnTransition||!p&&!r&&!i)return!1;const y=Math.min(s.params.slidesPerGroupSkip,o);let w=y+Math.floor((o-y)/s.params.slidesPerGroup);w>=l.length&&(w=l.length-1);const m=-l[w];if(a.normalizeSlideIndex)for(let _=0;_<c.length;_+=1){const b=-Math.floor(m*100),x=Math.floor(c[_]*100),E=Math.floor(c[_+1]*100);typeof c[_+1]<"u"?b>=x&&b<E-(E-x)/2?o=_:b>=x&&b<E&&(o=_+1):b>=x&&(o=_)}if(s.initialized&&o!==d&&(!s.allowSlideNext&&m<s.translate&&m<s.minTranslate()||!s.allowSlidePrev&&m>s.translate&&m>s.maxTranslate()&&(d||0)!==o))return!1;o!==(u||0)&&n&&s.emit("beforeSlideChangeStart"),s.updateProgress(m);let g;if(o>d?g="next":o<d?g="prev":g="reset",h&&-m===s.translate||!h&&m===s.translate)return s.updateActiveIndex(o),a.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),a.effect!=="slide"&&s.setTranslate(m),g!=="reset"&&(s.transitionStart(n,g),s.transitionEnd(n,g)),!1;if(a.cssMode){const _=s.isHorizontal(),b=h?m:-m;if(e===0){const x=s.virtual&&s.params.virtual.enabled;x&&(s.wrapperEl.style.scrollSnapType="none",s._immediateVirtual=!0),x&&!s._cssModeVirtualInitialSet&&s.params.initialSlide>0?(s._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{f[_?"scrollLeft":"scrollTop"]=b})):f[_?"scrollLeft":"scrollTop"]=b,x&&requestAnimationFrame(()=>{s.wrapperEl.style.scrollSnapType="",s._immediateVirtual=!1})}else{if(!s.support.smoothScroll)return T3({swiper:s,targetPosition:b,side:_?"left":"top"}),!0;f.scrollTo({[_?"left":"top"]:b,behavior:"smooth"})}return!0}return s.setTransition(e),s.setTranslate(m),s.updateActiveIndex(o),s.updateSlidesClasses(),s.emit("beforeTransitionStart",e,r),s.transitionStart(n,g),e===0?s.transitionEnd(n,g):s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(b){!s||s.destroyed||b.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(n,g))}),s.wrapperEl.addEventListener("transitionend",s.onSlideToWrapperTransitionEnd)),!0}function ihe(t=0,e=this.params.speed,n=!0,r){typeof t=="string"&&(t=parseInt(t,10));const i=this;let s=t;return i.params.loop&&(i.virtual&&i.params.virtual.enabled?s=s+i.virtual.slidesBefore:s=i.getSlideIndex(i.slides.filter(o=>o.getAttribute("data-swiper-slide-index")*1===s)[0])),i.slideTo(s,e,n,r)}function she(t=this.params.speed,e=!0,n){const r=this,{enabled:i,params:s,animating:o}=r;if(!i)return r;let a=s.slidesPerGroup;s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(a=Math.max(r.slidesPerViewDynamic("current",!0),1));const l=r.activeIndex<s.slidesPerGroupSkip?1:a,c=r.virtual&&s.virtual.enabled;if(s.loop){if(o&&!c&&s.loopPreventsSliding)return!1;r.loopFix({direction:"next"}),r._clientLeft=r.wrapperEl.clientLeft}return s.rewind&&r.isEnd?r.slideTo(0,t,e,n):r.slideTo(r.activeIndex+l,t,e,n)}function ohe(t=this.params.speed,e=!0,n){const r=this,{params:i,snapGrid:s,slidesGrid:o,rtlTranslate:a,enabled:l,animating:c}=r;if(!l)return r;const u=r.virtual&&i.virtual.enabled;if(i.loop){if(c&&!u&&i.loopPreventsSliding)return!1;r.loopFix({direction:"prev"}),r._clientLeft=r.wrapperEl.clientLeft}const d=a?r.translate:-r.translate;function h(m){return m<0?-Math.floor(Math.abs(m)):Math.floor(m)}const f=h(d),p=s.map(m=>h(m));let y=s[p.indexOf(f)-1];if(typeof y>"u"&&i.cssMode){let m;s.forEach((g,_)=>{f>=g&&(m=_)}),typeof m<"u"&&(y=s[m>0?m-1:m])}let w=0;if(typeof y<"u"&&(w=o.indexOf(y),w<0&&(w=r.activeIndex-1),i.slidesPerView==="auto"&&i.slidesPerGroup===1&&i.slidesPerGroupAuto&&(w=w-r.slidesPerViewDynamic("previous",!0)+1,w=Math.max(w,0))),i.rewind&&r.isBeginning){const m=r.params.virtual&&r.params.virtual.enabled&&r.virtual?r.virtual.slides.length-1:r.slides.length-1;return r.slideTo(m,t,e,n)}return r.slideTo(w,t,e,n)}function ahe(t=this.params.speed,e=!0,n){const r=this;return r.slideTo(r.activeIndex,t,e,n)}function lhe(t=this.params.speed,e=!0,n,r=.5){const i=this;let s=i.activeIndex;const o=Math.min(i.params.slidesPerGroupSkip,s),a=o+Math.floor((s-o)/i.params.slidesPerGroup),l=i.rtlTranslate?i.translate:-i.translate;if(l>=i.snapGrid[a]){const c=i.snapGrid[a],u=i.snapGrid[a+1];l-c>(u-c)*r&&(s+=i.params.slidesPerGroup)}else{const c=i.snapGrid[a-1],u=i.snapGrid[a];l-c<=(u-c)*r&&(s-=i.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,i.slidesGrid.length-1),i.slideTo(s,t,e,n)}function che(){const t=this,{params:e,slidesEl:n}=t,r=e.slidesPerView==="auto"?t.slidesPerViewDynamic():e.slidesPerView;let i=t.clickedIndex,s;const o=t.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(t.animating)return;s=parseInt(t.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?i<t.loopedSlides-r/2||i>t.slides.length-t.loopedSlides+r/2?(t.loopFix(),i=t.getSlideIndex($i(n,`${o}[data-swiper-slide-index="${s}"]`)[0]),Pb(()=>{t.slideTo(i)})):t.slideTo(i):i>t.slides.length-r?(t.loopFix(),i=t.getSlideIndex($i(n,`${o}[data-swiper-slide-index="${s}"]`)[0]),Pb(()=>{t.slideTo(i)})):t.slideTo(i)}else t.slideTo(i)}const uhe={slideTo:rhe,slideToLoop:ihe,slideNext:she,slidePrev:ohe,slideReset:ahe,slideToClosest:lhe,slideToClickedSlide:che};function dhe(t){const e=this,{params:n,slidesEl:r}=e;if(!n.loop||e.virtual&&e.params.virtual.enabled)return;$i(r,`.${n.slideClass}, swiper-slide`).forEach((s,o)=>{s.setAttribute("data-swiper-slide-index",o)}),e.loopFix({slideRealIndex:t,direction:n.centeredSlides?void 0:"next"})}function hhe({slideRealIndex:t,slideTo:e=!0,direction:n,setTranslate:r,activeSlideIndex:i,byController:s,byMousewheel:o}={}){const a=this;if(!a.params.loop)return;a.emit("beforeLoopFix");const{slides:l,allowSlidePrev:c,allowSlideNext:u,slidesEl:d,params:h}=a;if(a.allowSlidePrev=!0,a.allowSlideNext=!0,a.virtual&&h.virtual.enabled){e&&(!h.centeredSlides&&a.snapIndex===0?a.slideTo(a.virtual.slides.length,0,!1,!0):h.centeredSlides&&a.snapIndex<h.slidesPerView?a.slideTo(a.virtual.slides.length+a.snapIndex,0,!1,!0):a.snapIndex===a.snapGrid.length-1&&a.slideTo(a.virtual.slidesBefore,0,!1,!0)),a.allowSlidePrev=c,a.allowSlideNext=u,a.emit("loopFix");return}const f=h.slidesPerView==="auto"?a.slidesPerViewDynamic():Math.ceil(parseFloat(h.slidesPerView,10));let p=h.loopedSlides||f;p%h.slidesPerGroup!==0&&(p+=h.slidesPerGroup-p%h.slidesPerGroup),a.loopedSlides=p;const y=[],w=[];let m=a.activeIndex;typeof i>"u"?i=a.getSlideIndex(a.slides.filter(E=>E.classList.contains("swiper-slide-active"))[0]):m=i;const g=n==="next"||!n,_=n==="prev"||!n;let b=0,x=0;if(i<p){b=Math.max(p-i,h.slidesPerGroup);for(let E=0;E<p-i;E+=1){const D=E-Math.floor(E/l.length)*l.length;y.push(l.length-D-1)}}else if(i>a.slides.length-p*2){x=Math.max(i-(a.slides.length-p*2),h.slidesPerGroup);for(let E=0;E<x;E+=1){const D=E-Math.floor(E/l.length)*l.length;w.push(D)}}if(_&&y.forEach(E=>{d.prepend(a.slides[E])}),g&&w.forEach(E=>{d.append(a.slides[E])}),a.recalcSlides(),h.watchSlidesProgress&&a.updateSlidesOffset(),e){if(y.length>0&&_)if(typeof t>"u"){const E=a.slidesGrid[m],S=a.slidesGrid[m+b]-E;o?a.setTranslate(a.translate-S):(a.slideTo(m+b,0,!1,!0),r&&(a.touches[a.isHorizontal()?"startX":"startY"]+=S))}else r&&a.slideToLoop(t,0,!1,!0);else if(w.length>0&&g)if(typeof t>"u"){const E=a.slidesGrid[m],S=a.slidesGrid[m-x]-E;o?a.setTranslate(a.translate-S):(a.slideTo(m-x,0,!1,!0),r&&(a.touches[a.isHorizontal()?"startX":"startY"]+=S))}else a.slideToLoop(t,0,!1,!0)}if(a.allowSlidePrev=c,a.allowSlideNext=u,a.controller&&a.controller.control&&!s){const E={slideRealIndex:t,slideTo:!1,direction:n,setTranslate:r,activeSlideIndex:i,byController:!0};Array.isArray(a.controller.control)?a.controller.control.forEach(D=>{D.params.loop&&D.loopFix(E)}):a.controller.control instanceof a.constructor&&a.controller.control.params.loop&&a.controller.control.loopFix(E)}a.emit("loopFix")}function fhe(){const t=this,{slides:e,params:n,slidesEl:r}=t;if(!n.loop||t.virtual&&t.params.virtual.enabled)return;t.recalcSlides();const i=[];e.forEach(s=>{const o=typeof s.swiperSlideIndex>"u"?s.getAttribute("data-swiper-slide-index")*1:s.swiperSlideIndex;i[o]=s}),e.forEach(s=>{s.removeAttribute("data-swiper-slide-index")}),i.forEach(s=>{r.append(s)}),t.recalcSlides(),t.slideTo(t.realIndex,0)}const phe={loopCreate:dhe,loopFix:hhe,loopDestroy:fhe};function mhe(t){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const n=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),n.style.cursor="move",n.style.cursor=t?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function ghe(){const t=this;t.params.watchOverflow&&t.isLocked||t.params.cssMode||(t.isElement&&(t.__preventObserver__=!0),t[t.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1}))}const yhe={setGrabCursor:mhe,unsetGrabCursor:ghe};function vhe(t,e=this){function n(r){if(!r||r===Dl()||r===Wr())return null;r.assignedSlot&&(r=r.assignedSlot);const i=r.closest(t);return!i&&!r.getRootNode?null:i||n(r.getRootNode().host)}return n(e)}function _he(t){const e=this,n=Dl(),r=Wr(),i=e.touchEventsData;i.evCache.push(t);const{params:s,touches:o,enabled:a}=e;if(!a||!s.simulateTouch&&t.pointerType==="mouse"||e.animating&&s.preventInteractionOnTransition)return;!e.animating&&s.cssMode&&s.loop&&e.loopFix();let l=t;l.originalEvent&&(l=l.originalEvent);let c=l.target;if(s.touchEventsTarget==="wrapper"&&!e.wrapperEl.contains(c)||"which"in l&&l.which===3||"button"in l&&l.button>0||i.isTouched&&i.isMoved)return;const u=!!s.noSwipingClass&&s.noSwipingClass!=="",d=t.composedPath?t.composedPath():t.path;u&&l.target&&l.target.shadowRoot&&d&&(c=d[0]);const h=s.noSwipingSelector?s.noSwipingSelector:`.${s.noSwipingClass}`,f=!!(l.target&&l.target.shadowRoot);if(s.noSwiping&&(f?vhe(h,c):c.closest(h))){e.allowClick=!0;return}if(s.swipeHandler&&!c.closest(s.swipeHandler))return;o.currentX=l.pageX,o.currentY=l.pageY;const p=o.currentX,y=o.currentY,w=s.edgeSwipeDetection||s.iOSEdgeSwipeDetection,m=s.edgeSwipeThreshold||s.iOSEdgeSwipeThreshold;if(w&&(p<=m||p>=r.innerWidth-m))if(w==="prevent")t.preventDefault();else return;Object.assign(i,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=p,o.startY=y,i.touchStartTime=cf(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,s.threshold>0&&(i.allowThresholdMove=!1);let g=!0;c.matches(i.focusableElements)&&(g=!1,c.nodeName==="SELECT"&&(i.isTouched=!1)),n.activeElement&&n.activeElement.matches(i.focusableElements)&&n.activeElement!==c&&n.activeElement.blur();const _=g&&e.allowTouchMove&&s.touchStartPreventDefault;(s.touchStartForcePreventDefault||_)&&!c.isContentEditable&&l.preventDefault(),e.params.freeMode&&e.params.freeMode.enabled&&e.freeMode&&e.animating&&!s.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",l)}function whe(t){const e=Dl(),n=this,r=n.touchEventsData,{params:i,touches:s,rtlTranslate:o,enabled:a}=n;if(!a||!i.simulateTouch&&t.pointerType==="mouse")return;let l=t;if(l.originalEvent&&(l=l.originalEvent),!r.isTouched){r.startMoving&&r.isScrolling&&n.emit("touchMoveOpposite",l);return}const c=r.evCache.findIndex(E=>E.pointerId===l.pointerId);c>=0&&(r.evCache[c]=l);const u=r.evCache.length>1?r.evCache[0]:l,d=u.pageX,h=u.pageY;if(l.preventedByNestedSwiper){s.startX=d,s.startY=h;return}if(!n.allowTouchMove){l.target.matches(r.focusableElements)||(n.allowClick=!1),r.isTouched&&(Object.assign(s,{startX:d,startY:h,prevX:n.touches.currentX,prevY:n.touches.currentY,currentX:d,currentY:h}),r.touchStartTime=cf());return}if(i.touchReleaseOnEdges&&!i.loop){if(n.isVertical()){if(h<s.startY&&n.translate<=n.maxTranslate()||h>s.startY&&n.translate>=n.minTranslate()){r.isTouched=!1,r.isMoved=!1;return}}else if(d<s.startX&&n.translate<=n.maxTranslate()||d>s.startX&&n.translate>=n.minTranslate())return}if(e.activeElement&&l.target===e.activeElement&&l.target.matches(r.focusableElements)){r.isMoved=!0,n.allowClick=!1;return}if(r.allowTouchCallbacks&&n.emit("touchMove",l),l.targetTouches&&l.targetTouches.length>1)return;s.currentX=d,s.currentY=h;const f=s.currentX-s.startX,p=s.currentY-s.startY;if(n.params.threshold&&Math.sqrt(f**2+p**2)<n.params.threshold)return;if(typeof r.isScrolling>"u"){let E;n.isHorizontal()&&s.currentY===s.startY||n.isVertical()&&s.currentX===s.startX?r.isScrolling=!1:f*f+p*p>=25&&(E=Math.atan2(Math.abs(p),Math.abs(f))*180/Math.PI,r.isScrolling=n.isHorizontal()?E>i.touchAngle:90-E>i.touchAngle)}if(r.isScrolling&&n.emit("touchMoveOpposite",l),typeof r.startMoving>"u"&&(s.currentX!==s.startX||s.currentY!==s.startY)&&(r.startMoving=!0),r.isScrolling||n.zoom&&n.params.zoom&&n.params.zoom.enabled&&r.evCache.length>1){r.isTouched=!1;return}if(!r.startMoving)return;n.allowClick=!1,!i.cssMode&&l.cancelable&&l.preventDefault(),i.touchMoveStopPropagation&&!i.nested&&l.stopPropagation();let y=n.isHorizontal()?f:p,w=n.isHorizontal()?s.currentX-s.previousX:s.currentY-s.previousY;i.oneWayMovement&&(y=Math.abs(y)*(o?1:-1),w=Math.abs(w)*(o?1:-1)),s.diff=y,y*=i.touchRatio,o&&(y=-y,w=-w);const m=n.touchesDirection;n.swipeDirection=y>0?"prev":"next",n.touchesDirection=w>0?"prev":"next";const g=n.params.loop&&!i.cssMode;if(!r.isMoved){if(g&&n.loopFix({direction:n.swipeDirection}),r.startTranslate=n.getTranslate(),n.setTransition(0),n.animating){const E=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});n.wrapperEl.dispatchEvent(E)}r.allowMomentumBounce=!1,i.grabCursor&&(n.allowSlideNext===!0||n.allowSlidePrev===!0)&&n.setGrabCursor(!0),n.emit("sliderFirstMove",l)}let _;r.isMoved&&m!==n.touchesDirection&&g&&Math.abs(y)>=1&&(n.loopFix({direction:n.swipeDirection,setTranslate:!0}),_=!0),n.emit("sliderMove",l),r.isMoved=!0,r.currentTranslate=y+r.startTranslate;let b=!0,x=i.resistanceRatio;if(i.touchReleaseOnEdges&&(x=0),y>0?(g&&!_&&r.currentTranslate>(i.centeredSlides?n.minTranslate()-n.size/2:n.minTranslate())&&n.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),r.currentTranslate>n.minTranslate()&&(b=!1,i.resistance&&(r.currentTranslate=n.minTranslate()-1+(-n.minTranslate()+r.startTranslate+y)**x))):y<0&&(g&&!_&&r.currentTranslate<(i.centeredSlides?n.maxTranslate()+n.size/2:n.maxTranslate())&&n.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:n.slides.length-(i.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(parseFloat(i.slidesPerView,10)))}),r.currentTranslate<n.maxTranslate()&&(b=!1,i.resistance&&(r.currentTranslate=n.maxTranslate()+1-(n.maxTranslate()-r.startTranslate-y)**x))),b&&(l.preventedByNestedSwiper=!0),!n.allowSlideNext&&n.swipeDirection==="next"&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!n.allowSlidePrev&&n.swipeDirection==="prev"&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),!n.allowSlidePrev&&!n.allowSlideNext&&(r.currentTranslate=r.startTranslate),i.threshold>0)if(Math.abs(y)>i.threshold||r.allowThresholdMove){if(!r.allowThresholdMove){r.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,r.currentTranslate=r.startTranslate,s.diff=n.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY;return}}else{r.currentTranslate=r.startTranslate;return}!i.followFinger||i.cssMode||((i.freeMode&&i.freeMode.enabled&&n.freeMode||i.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),n.params.freeMode&&i.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(r.currentTranslate),n.setTranslate(r.currentTranslate))}function bhe(t){const e=this,n=e.touchEventsData,r=n.evCache.findIndex(_=>_.pointerId===t.pointerId);if(r>=0&&n.evCache.splice(r,1),["pointercancel","pointerout","pointerleave"].includes(t.type)&&!(t.type==="pointercancel"&&(e.browser.isSafari||e.browser.isWebView)))return;const{params:i,touches:s,rtlTranslate:o,slidesGrid:a,enabled:l}=e;if(!l||!i.simulateTouch&&t.pointerType==="mouse")return;let c=t;if(c.originalEvent&&(c=c.originalEvent),n.allowTouchCallbacks&&e.emit("touchEnd",c),n.allowTouchCallbacks=!1,!n.isTouched){n.isMoved&&i.grabCursor&&e.setGrabCursor(!1),n.isMoved=!1,n.startMoving=!1;return}i.grabCursor&&n.isMoved&&n.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const u=cf(),d=u-n.touchStartTime;if(e.allowClick){const _=c.path||c.composedPath&&c.composedPath();e.updateClickedSlide(_&&_[0]||c.target),e.emit("tap click",c),d<300&&u-n.lastClickTime<300&&e.emit("doubleTap doubleClick",c)}if(n.lastClickTime=cf(),Pb(()=>{e.destroyed||(e.allowClick=!0)}),!n.isTouched||!n.isMoved||!e.swipeDirection||s.diff===0||n.currentTranslate===n.startTranslate){n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;return}n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;let h;if(i.followFinger?h=o?e.translate:-e.translate:h=-n.currentTranslate,i.cssMode)return;if(e.params.freeMode&&i.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:h});return}let f=0,p=e.slidesSizesGrid[0];for(let _=0;_<a.length;_+=_<i.slidesPerGroupSkip?1:i.slidesPerGroup){const b=_<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;typeof a[_+b]<"u"?h>=a[_]&&h<a[_+b]&&(f=_,p=a[_+b]-a[_]):h>=a[_]&&(f=_,p=a[a.length-1]-a[a.length-2])}let y=null,w=null;i.rewind&&(e.isBeginning?w=e.params.virtual&&e.params.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(y=0));const m=(h-a[f])/p,g=f<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;if(d>i.longSwipesMs){if(!i.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(m>=i.longSwipesRatio?e.slideTo(i.rewind&&e.isEnd?y:f+g):e.slideTo(f)),e.swipeDirection==="prev"&&(m>1-i.longSwipesRatio?e.slideTo(f+g):w!==null&&m<0&&Math.abs(m)>i.longSwipesRatio?e.slideTo(w):e.slideTo(f))}else{if(!i.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(c.target===e.navigation.nextEl||c.target===e.navigation.prevEl)?c.target===e.navigation.nextEl?e.slideTo(f+g):e.slideTo(f):(e.swipeDirection==="next"&&e.slideTo(y!==null?y:f+g),e.swipeDirection==="prev"&&e.slideTo(w!==null?w:f))}}let cN;function uN(){const t=this,{params:e,el:n}=t;if(n&&n.offsetWidth===0)return;e.breakpoints&&t.setBreakpoint();const{allowSlideNext:r,allowSlidePrev:i,snapGrid:s}=t,o=t.virtual&&t.params.virtual.enabled;t.allowSlideNext=!0,t.allowSlidePrev=!0,t.updateSize(),t.updateSlides(),t.updateSlidesClasses();const a=o&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&t.isEnd&&!t.isBeginning&&!t.params.centeredSlides&&!a?t.slideTo(t.slides.length-1,0,!1,!0):t.params.loop&&!o?t.slideToLoop(t.realIndex,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0),t.autoplay&&t.autoplay.running&&t.autoplay.paused&&(clearTimeout(cN),cN=setTimeout(()=>{t.autoplay&&t.autoplay.running&&t.autoplay.paused&&t.autoplay.resume()},500)),t.allowSlidePrev=i,t.allowSlideNext=r,t.params.watchOverflow&&s!==t.snapGrid&&t.checkOverflow()}function She(t){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&t.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(t.stopPropagation(),t.stopImmediatePropagation())))}function Ehe(){const t=this,{wrapperEl:e,rtlTranslate:n,enabled:r}=t;if(!r)return;t.previousTranslate=t.translate,t.isHorizontal()?t.translate=-e.scrollLeft:t.translate=-e.scrollTop,t.translate===0&&(t.translate=0),t.updateActiveIndex(),t.updateSlidesClasses();let i;const s=t.maxTranslate()-t.minTranslate();s===0?i=0:i=(t.translate-t.minTranslate())/s,i!==t.progress&&t.updateProgress(n?-t.translate:t.translate),t.emit("setTranslate",t.translate,!1)}const Im=(t,e)=>{if(!t||t.destroyed||!t.params)return;const n=()=>t.isElement?"swiper-slide":`.${t.params.slideClass}`,r=e.closest(n());if(r){const i=r.querySelector(`.${t.params.lazyPreloaderClass}`);i&&i.remove()}};function xhe(t){const e=this;Im(e,t.target),e.update()}let dN=!1;function The(){}const R3=(t,e)=>{const n=Dl(),{params:r,el:i,wrapperEl:s,device:o}=t,a=!!r.nested,l=e==="on"?"addEventListener":"removeEventListener",c=e;i[l]("pointerdown",t.onTouchStart,{passive:!1}),n[l]("pointermove",t.onTouchMove,{passive:!1,capture:a}),n[l]("pointerup",t.onTouchEnd,{passive:!0}),n[l]("pointercancel",t.onTouchEnd,{passive:!0}),n[l]("pointerout",t.onTouchEnd,{passive:!0}),n[l]("pointerleave",t.onTouchEnd,{passive:!0}),(r.preventClicks||r.preventClicksPropagation)&&i[l]("click",t.onClick,!0),r.cssMode&&s[l]("scroll",t.onScroll),r.updateOnWindowResize?t[c](o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",uN,!0):t[c]("observerUpdate",uN,!0),i[l]("load",t.onLoad,{capture:!0})};function Ihe(){const t=this,e=Dl(),{params:n}=t;t.onTouchStart=_he.bind(t),t.onTouchMove=whe.bind(t),t.onTouchEnd=bhe.bind(t),n.cssMode&&(t.onScroll=Ehe.bind(t)),t.onClick=She.bind(t),t.onLoad=xhe.bind(t),dN||(e.addEventListener("touchstart",The),dN=!0),R3(t,"on")}function Che(){R3(this,"off")}const khe={attachEvents:Ihe,detachEvents:Che},hN=(t,e)=>t.grid&&e.grid&&e.grid.rows>1;function Ahe(){const t=this,{realIndex:e,initialized:n,params:r,el:i}=t,s=r.breakpoints;if(!s||s&&Object.keys(s).length===0)return;const o=t.getBreakpoint(s,t.params.breakpointsBase,t.el);if(!o||t.currentBreakpoint===o)return;const l=(o in s?s[o]:void 0)||t.originalParams,c=hN(t,r),u=hN(t,l),d=r.enabled;c&&!u?(i.classList.remove(`${r.containerModifierClass}grid`,`${r.containerModifierClass}grid-column`),t.emitContainerClasses()):!c&&u&&(i.classList.add(`${r.containerModifierClass}grid`),(l.grid.fill&&l.grid.fill==="column"||!l.grid.fill&&r.grid.fill==="column")&&i.classList.add(`${r.containerModifierClass}grid-column`),t.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(y=>{const w=r[y]&&r[y].enabled,m=l[y]&&l[y].enabled;w&&!m&&t[y].disable(),!w&&m&&t[y].enable()});const h=l.direction&&l.direction!==r.direction,f=r.loop&&(l.slidesPerView!==r.slidesPerView||h);h&&n&&t.changeDirection(),kr(t.params,l);const p=t.params.enabled;Object.assign(t,{allowTouchMove:t.params.allowTouchMove,allowSlideNext:t.params.allowSlideNext,allowSlidePrev:t.params.allowSlidePrev}),d&&!p?t.disable():!d&&p&&t.enable(),t.currentBreakpoint=o,t.emit("_beforeBreakpoint",l),f&&n&&(t.loopDestroy(),t.loopCreate(e),t.updateSlides()),t.emit("breakpoint",l)}function Rhe(t,e="window",n){if(!t||e==="container"&&!n)return;let r=!1;const i=Wr(),s=e==="window"?i.innerHeight:n.clientHeight,o=Object.keys(t).map(a=>{if(typeof a=="string"&&a.indexOf("@")===0){const l=parseFloat(a.substr(1));return{value:s*l,point:a}}return{value:a,point:a}});o.sort((a,l)=>parseInt(a.value,10)-parseInt(l.value,10));for(let a=0;a<o.length;a+=1){const{point:l,value:c}=o[a];e==="window"?i.matchMedia(`(min-width: ${c}px)`).matches&&(r=l):c<=n.clientWidth&&(r=l)}return r||"max"}const Nhe={setBreakpoint:Ahe,getBreakpoint:Rhe};function Phe(t,e){const n=[];return t.forEach(r=>{typeof r=="object"?Object.keys(r).forEach(i=>{r[i]&&n.push(e+i)}):typeof r=="string"&&n.push(e+r)}),n}function Dhe(){const t=this,{classNames:e,params:n,rtl:r,el:i,device:s}=t,o=Phe(["initialized",n.direction,{"free-mode":t.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:r},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&n.grid.fill==="column"},{android:s.android},{ios:s.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);e.push(...o),i.classList.add(...e),t.emitContainerClasses()}function Ohe(){const t=this,{el:e,classNames:n}=t;e.classList.remove(...n),t.emitContainerClasses()}const Lhe={addClasses:Dhe,removeClasses:Ohe};function Mhe(){const t=this,{isLocked:e,params:n}=t,{slidesOffsetBefore:r}=n;if(r){const i=t.slides.length-1,s=t.slidesGrid[i]+t.slidesSizesGrid[i]+r*2;t.isLocked=t.size>s}else t.isLocked=t.snapGrid.length===1;n.allowSlideNext===!0&&(t.allowSlideNext=!t.isLocked),n.allowSlidePrev===!0&&(t.allowSlidePrev=!t.isLocked),e&&e!==t.isLocked&&(t.isEnd=!1),e!==t.isLocked&&t.emit(t.isLocked?"lock":"unlock")}const $he={checkOverflow:Mhe},fN={init:!0,direction:"horizontal",oneWayMovement:!1,touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopedSlides:null,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",runCallbacksOnInit:!0,_emitClasses:!1};function Fhe(t,e){return function(r={}){const i=Object.keys(r)[0],s=r[i];if(typeof s!="object"||s===null){kr(e,r);return}if(["navigation","pagination","scrollbar"].indexOf(i)>=0&&t[i]===!0&&(t[i]={auto:!0}),!(i in t&&"enabled"in s)){kr(e,r);return}t[i]===!0&&(t[i]={enabled:!0}),typeof t[i]=="object"&&!("enabled"in t[i])&&(t[i].enabled=!0),t[i]||(t[i]={enabled:!1}),kr(e,r)}}const ew={eventsEmitter:Lde,update:Gde,translate:Jde,transition:nhe,slide:uhe,loop:phe,grabCursor:yhe,events:khe,breakpoints:Nhe,checkOverflow:$he,classes:Lhe},tw={};let uf=class ns{constructor(...e){let n,r;e.length===1&&e[0].constructor&&Object.prototype.toString.call(e[0]).slice(8,-1)==="Object"?r=e[0]:[n,r]=e,r||(r={}),r=kr({},r),n&&!r.el&&(r.el=n);const i=Dl();if(r.el&&typeof r.el=="string"&&i.querySelectorAll(r.el).length>1){const l=[];return i.querySelectorAll(r.el).forEach(c=>{const u=kr({},r,{el:c});l.push(new ns(u))}),l}const s=this;s.__swiper__=!0,s.support=k3(),s.device=Rde({userAgent:r.userAgent}),s.browser=Pde(),s.eventsListeners={},s.eventsAnyListeners=[],s.modules=[...s.__modules__],r.modules&&Array.isArray(r.modules)&&s.modules.push(...r.modules);const o={};s.modules.forEach(l=>{l({params:r,swiper:s,extendParams:Fhe(r,o),on:s.on.bind(s),once:s.once.bind(s),off:s.off.bind(s),emit:s.emit.bind(s)})});const a=kr({},fN,o);return s.params=kr({},a,tw,r),s.originalParams=kr({},s.params),s.passedParams=kr({},r),s.params&&s.params.on&&Object.keys(s.params.on).forEach(l=>{s.on(l,s.params.on[l])}),s.params&&s.params.onAny&&s.onAny(s.params.onAny),Object.assign(s,{enabled:s.params.enabled,el:n,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return s.params.direction==="horizontal"},isVertical(){return s.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:s.params.allowSlideNext,allowSlidePrev:s.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:s.params.focusableElements,lastClickTime:cf(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,evCache:[]},allowClick:!0,allowTouchMove:s.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),s.emit("_swiper"),s.params.init&&s.init(),s}getSlideIndex(e){const{slidesEl:n,params:r}=this,i=$i(n,`.${r.slideClass}, swiper-slide`),s=ty(i[0]);return ty(e)-s}recalcSlides(){const e=this,{slidesEl:n,params:r}=e;e.slides=$i(n,`.${r.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,n){const r=this;e=Math.min(Math.max(e,0),1);const i=r.minTranslate(),o=(r.maxTranslate()-i)*e+i;r.translateTo(o,typeof n>"u"?0:n),r.updateActiveIndex(),r.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const n=e.el.className.split(" ").filter(r=>r.indexOf("swiper")===0||r.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",n.join(" "))}getSlideClasses(e){const n=this;return n.destroyed?"":e.className.split(" ").filter(r=>r.indexOf("swiper-slide")===0||r.indexOf(n.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const n=[];e.slides.forEach(r=>{const i=e.getSlideClasses(r);n.push({slideEl:r,classNames:i}),e.emit("_slideClass",r,i)}),e.emit("_slideClasses",n)}slidesPerViewDynamic(e="current",n=!1){const r=this,{params:i,slides:s,slidesGrid:o,slidesSizesGrid:a,size:l,activeIndex:c}=r;let u=1;if(i.centeredSlides){let d=s[c].swiperSlideSize,h;for(let f=c+1;f<s.length;f+=1)s[f]&&!h&&(d+=s[f].swiperSlideSize,u+=1,d>l&&(h=!0));for(let f=c-1;f>=0;f-=1)s[f]&&!h&&(d+=s[f].swiperSlideSize,u+=1,d>l&&(h=!0))}else if(e==="current")for(let d=c+1;d<s.length;d+=1)(n?o[d]+a[d]-o[c]<l:o[d]-o[c]<l)&&(u+=1);else for(let d=c-1;d>=0;d-=1)o[c]-o[d]<l&&(u+=1);return u}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:n,params:r}=e;r.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(o=>{o.complete&&Im(e,o)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function i(){const o=e.rtlTranslate?e.translate*-1:e.translate,a=Math.min(Math.max(o,e.maxTranslate()),e.minTranslate());e.setTranslate(a),e.updateActiveIndex(),e.updateSlidesClasses()}let s;e.params.freeMode&&e.params.freeMode.enabled?(i(),e.params.autoHeight&&e.updateAutoHeight()):((e.params.slidesPerView==="auto"||e.params.slidesPerView>1)&&e.isEnd&&!e.params.centeredSlides?s=e.slideTo(e.slides.length-1,0,!1,!0):s=e.slideTo(e.activeIndex,0,!1,!0),s||i()),r.watchOverflow&&n!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,n=!0){const r=this,i=r.params.direction;return e||(e=i==="horizontal"?"vertical":"horizontal"),e===i||e!=="horizontal"&&e!=="vertical"||(r.el.classList.remove(`${r.params.containerModifierClass}${i}`),r.el.classList.add(`${r.params.containerModifierClass}${e}`),r.emitContainerClasses(),r.params.direction=e,r.slides.forEach(s=>{e==="vertical"?s.style.width="":s.style.height=""}),r.emit("changeDirection"),n&&r.update()),r}changeLanguageDirection(e){const n=this;n.rtl&&e==="rtl"||!n.rtl&&e==="ltr"||(n.rtl=e==="rtl",n.rtlTranslate=n.params.direction==="horizontal"&&n.rtl,n.rtl?(n.el.classList.add(`${n.params.containerModifierClass}rtl`),n.el.dir="rtl"):(n.el.classList.remove(`${n.params.containerModifierClass}rtl`),n.el.dir="ltr"),n.update())}mount(e){const n=this;if(n.mounted)return!0;let r=e||n.params.el;if(typeof r=="string"&&(r=document.querySelector(r)),!r)return!1;r.swiper=n,r.shadowEl&&(n.isElement=!0);const i=()=>`.${(n.params.wrapperClass||"").trim().split(" ").join(".")}`;let o=(()=>r&&r.shadowRoot&&r.shadowRoot.querySelector?r.shadowRoot.querySelector(i()):$i(r,i())[0])();return!o&&n.params.createElements&&(o=I3("div",n.params.wrapperClass),r.append(o),$i(r,`.${n.params.slideClass}`).forEach(a=>{o.append(a)})),Object.assign(n,{el:r,wrapperEl:o,slidesEl:n.isElement?r:o,mounted:!0,rtl:r.dir.toLowerCase()==="rtl"||io(r,"direction")==="rtl",rtlTranslate:n.params.direction==="horizontal"&&(r.dir.toLowerCase()==="rtl"||io(r,"direction")==="rtl"),wrongRTL:io(o,"display")==="-webkit-box"}),!0}init(e){const n=this;return n.initialized||n.mount(e)===!1||(n.emit("beforeInit"),n.params.breakpoints&&n.setBreakpoint(),n.addClasses(),n.updateSize(),n.updateSlides(),n.params.watchOverflow&&n.checkOverflow(),n.params.grabCursor&&n.enabled&&n.setGrabCursor(),n.params.loop&&n.virtual&&n.params.virtual.enabled?n.slideTo(n.params.initialSlide+n.virtual.slidesBefore,0,n.params.runCallbacksOnInit,!1,!0):n.slideTo(n.params.initialSlide,0,n.params.runCallbacksOnInit,!1,!0),n.params.loop&&n.loopCreate(),n.attachEvents(),[...n.el.querySelectorAll('[loading="lazy"]')].forEach(i=>{i.complete?Im(n,i):i.addEventListener("load",s=>{Im(n,s.target)})}),n.initialized=!0,n.emit("init"),n.emit("afterInit")),n}destroy(e=!0,n=!0){const r=this,{params:i,el:s,wrapperEl:o,slides:a}=r;return typeof r.params>"u"||r.destroyed||(r.emit("beforeDestroy"),r.initialized=!1,r.detachEvents(),i.loop&&r.loopDestroy(),n&&(r.removeClasses(),s.removeAttribute("style"),o.removeAttribute("style"),a&&a.length&&a.forEach(l=>{l.classList.remove(i.slideVisibleClass,i.slideActiveClass,i.slideNextClass,i.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),r.emit("destroy"),Object.keys(r.eventsListeners).forEach(l=>{r.off(l)}),e!==!1&&(r.el.swiper=null,Sde(r)),r.destroyed=!0),null}static extendDefaults(e){kr(tw,e)}static get extendedDefaults(){return tw}static get defaults(){return fN}static installModule(e){ns.prototype.__modules__||(ns.prototype.__modules__=[]);const n=ns.prototype.__modules__;typeof e=="function"&&n.indexOf(e)<0&&n.push(e)}static use(e){return Array.isArray(e)?(e.forEach(n=>ns.installModule(n)),ns):(ns.installModule(e),ns)}};Object.keys(ew).forEach(t=>{Object.keys(ew[t]).forEach(e=>{uf.prototype[e]=ew[t][e]})});uf.use([Dde,Ode]);function Uhe(t,e,n,r){return t.params.createElements&&Object.keys(r).forEach(i=>{if(!n[i]&&n.auto===!0){let s=$i(t.el,`.${r[i]}`)[0];s||(s=I3("div",r[i]),s.className=r[i],t.el.append(s)),n[i]=s,e[i]=s}}),n}function fd(t=""){return`.${t.trim().replace(/([\.:!\/])/g,"\\$1").replace(/ /g,".")}`}function jhe({swiper:t,extendParams:e,on:n,emit:r}){const i="swiper-pagination";e({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:m=>m,formatFractionTotal:m=>m,bulletClass:`${i}-bullet`,bulletActiveClass:`${i}-bullet-active`,modifierClass:`${i}-`,currentClass:`${i}-current`,totalClass:`${i}-total`,hiddenClass:`${i}-hidden`,progressbarFillClass:`${i}-progressbar-fill`,progressbarOppositeClass:`${i}-progressbar-opposite`,clickableClass:`${i}-clickable`,lockClass:`${i}-lock`,horizontalClass:`${i}-horizontal`,verticalClass:`${i}-vertical`,paginationDisabledClass:`${i}-disabled`}}),t.pagination={el:null,bullets:[]};let s,o=0;const a=m=>(Array.isArray(m)||(m=[m].filter(g=>!!g)),m);function l(){return!t.params.pagination.el||!t.pagination.el||Array.isArray(t.pagination.el)&&t.pagination.el.length===0}function c(m,g){const{bulletActiveClass:_}=t.params.pagination;m&&(m=m[`${g==="prev"?"previous":"next"}ElementSibling`],m&&(m.classList.add(`${_}-${g}`),m=m[`${g==="prev"?"previous":"next"}ElementSibling`],m&&m.classList.add(`${_}-${g}-${g}`)))}function u(m){const g=m.target.closest(fd(t.params.pagination.bulletClass));if(!g)return;m.preventDefault();const _=ty(g)*t.params.slidesPerGroup;if(t.params.loop){if(t.realIndex===_)return;(_<t.loopedSlides||_>t.slides.length-t.loopedSlides)&&t.loopFix({direction:_<t.loopedSlides?"prev":"next",activeSlideIndex:_,slideTo:!1}),t.slideToLoop(_)}else t.slideTo(_)}function d(){const m=t.rtl,g=t.params.pagination;if(l())return;let _=t.pagination.el;_=a(_);let b;const x=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length,E=t.params.loop?Math.ceil(x/t.params.slidesPerGroup):t.snapGrid.length;if(t.params.loop?b=t.params.slidesPerGroup>1?Math.floor(t.realIndex/t.params.slidesPerGroup):t.realIndex:typeof t.snapIndex<"u"?b=t.snapIndex:b=t.activeIndex||0,g.type==="bullets"&&t.pagination.bullets&&t.pagination.bullets.length>0){const D=t.pagination.bullets;let S,T,O;if(g.dynamicBullets&&(s=Db(D[0],t.isHorizontal()?"width":"height",!0),_.forEach(C=>{C.style[t.isHorizontal()?"width":"height"]=`${s*(g.dynamicMainBullets+4)}px`}),g.dynamicMainBullets>1&&t.previousIndex!==void 0&&(o+=b-(t.previousIndex||0),o>g.dynamicMainBullets-1?o=g.dynamicMainBullets-1:o<0&&(o=0)),S=Math.max(b-o,0),T=S+(Math.min(D.length,g.dynamicMainBullets)-1),O=(T+S)/2),D.forEach(C=>{C.classList.remove(...["","-next","-next-next","-prev","-prev-prev","-main"].map(k=>`${g.bulletActiveClass}${k}`))}),_.length>1)D.forEach(C=>{const k=ty(C);k===b&&C.classList.add(g.bulletActiveClass),g.dynamicBullets&&(k>=S&&k<=T&&C.classList.add(`${g.bulletActiveClass}-main`),k===S&&c(C,"prev"),k===T&&c(C,"next"))});else{const C=D[b];if(C&&C.classList.add(g.bulletActiveClass),g.dynamicBullets){const k=D[S],A=D[T];for(let N=S;N<=T;N+=1)D[N]&&D[N].classList.add(`${g.bulletActiveClass}-main`);c(k,"prev"),c(A,"next")}}if(g.dynamicBullets){const C=Math.min(D.length,g.dynamicMainBullets+4),k=(s*C-s)/2-O*s,A=m?"right":"left";D.forEach(N=>{N.style[t.isHorizontal()?A:"top"]=`${k}px`})}}_.forEach((D,S)=>{if(g.type==="fraction"&&(D.querySelectorAll(fd(g.currentClass)).forEach(T=>{T.textContent=g.formatFractionCurrent(b+1)}),D.querySelectorAll(fd(g.totalClass)).forEach(T=>{T.textContent=g.formatFractionTotal(E)})),g.type==="progressbar"){let T;g.progressbarOpposite?T=t.isHorizontal()?"vertical":"horizontal":T=t.isHorizontal()?"horizontal":"vertical";const O=(b+1)/E;let C=1,k=1;T==="horizontal"?C=O:k=O,D.querySelectorAll(fd(g.progressbarFillClass)).forEach(A=>{A.style.transform=`translate3d(0,0,0) scaleX(${C}) scaleY(${k})`,A.style.transitionDuration=`${t.params.speed}ms`})}g.type==="custom"&&g.renderCustom?(D.innerHTML=g.renderCustom(t,b+1,E),S===0&&r("paginationRender",D)):(S===0&&r("paginationRender",D),r("paginationUpdate",D)),t.params.watchOverflow&&t.enabled&&D.classList[t.isLocked?"add":"remove"](g.lockClass)})}function h(){const m=t.params.pagination;if(l())return;const g=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length;let _=t.pagination.el;_=a(_);let b="";if(m.type==="bullets"){let x=t.params.loop?Math.ceil(g/t.params.slidesPerGroup):t.snapGrid.length;t.params.freeMode&&t.params.freeMode.enabled&&x>g&&(x=g);for(let E=0;E<x;E+=1)m.renderBullet?b+=m.renderBullet.call(t,E,m.bulletClass):b+=`<${m.bulletElement} class="${m.bulletClass}"></${m.bulletElement}>`}m.type==="fraction"&&(m.renderFraction?b=m.renderFraction.call(t,m.currentClass,m.totalClass):b=`<span class="${m.currentClass}"></span> / <span class="${m.totalClass}"></span>`),m.type==="progressbar"&&(m.renderProgressbar?b=m.renderProgressbar.call(t,m.progressbarFillClass):b=`<span class="${m.progressbarFillClass}"></span>`),_.forEach(x=>{m.type!=="custom"&&(x.innerHTML=b||""),m.type==="bullets"&&(t.pagination.bullets=[...x.querySelectorAll(fd(m.bulletClass))])}),m.type!=="custom"&&r("paginationRender",_[0])}function f(){t.params.pagination=Uhe(t,t.originalParams.pagination,t.params.pagination,{el:"swiper-pagination"});const m=t.params.pagination;if(!m.el)return;let g;typeof m.el=="string"&&t.isElement&&(g=t.el.shadowRoot.querySelector(m.el)),!g&&typeof m.el=="string"&&(g=[...document.querySelectorAll(m.el)]),g||(g=m.el),!(!g||g.length===0)&&(t.params.uniqueNavElements&&typeof m.el=="string"&&Array.isArray(g)&&g.length>1&&(g=[...t.el.querySelectorAll(m.el)],g.length>1&&(g=g.filter(_=>C3(_,".swiper")[0]===t.el)[0])),Array.isArray(g)&&g.length===1&&(g=g[0]),Object.assign(t.pagination,{el:g}),g=a(g),g.forEach(_=>{m.type==="bullets"&&m.clickable&&_.classList.add(m.clickableClass),_.classList.add(m.modifierClass+m.type),_.classList.add(t.isHorizontal()?m.horizontalClass:m.verticalClass),m.type==="bullets"&&m.dynamicBullets&&(_.classList.add(`${m.modifierClass}${m.type}-dynamic`),o=0,m.dynamicMainBullets<1&&(m.dynamicMainBullets=1)),m.type==="progressbar"&&m.progressbarOpposite&&_.classList.add(m.progressbarOppositeClass),m.clickable&&_.addEventListener("click",u),t.enabled||_.classList.add(m.lockClass)}))}function p(){const m=t.params.pagination;if(l())return;let g=t.pagination.el;g&&(g=a(g),g.forEach(_=>{_.classList.remove(m.hiddenClass),_.classList.remove(m.modifierClass+m.type),_.classList.remove(t.isHorizontal()?m.horizontalClass:m.verticalClass),m.clickable&&_.removeEventListener("click",u)})),t.pagination.bullets&&t.pagination.bullets.forEach(_=>_.classList.remove(m.bulletActiveClass))}n("init",()=>{t.params.pagination.enabled===!1?w():(f(),h(),d())}),n("activeIndexChange",()=>{typeof t.snapIndex>"u"&&d()}),n("snapIndexChange",()=>{d()}),n("snapGridLengthChange",()=>{h(),d()}),n("destroy",()=>{p()}),n("enable disable",()=>{let{el:m}=t.pagination;m&&(m=a(m),m.forEach(g=>g.classList[t.enabled?"remove":"add"](t.params.pagination.lockClass)))}),n("lock unlock",()=>{d()}),n("click",(m,g)=>{const _=g.target;let{el:b}=t.pagination;if(Array.isArray(b)||(b=[b].filter(x=>!!x)),t.params.pagination.el&&t.params.pagination.hideOnClick&&b&&b.length>0&&!_.classList.contains(t.params.pagination.bulletClass)){if(t.navigation&&(t.navigation.nextEl&&_===t.navigation.nextEl||t.navigation.prevEl&&_===t.navigation.prevEl))return;const x=b[0].classList.contains(t.params.pagination.hiddenClass);r(x===!0?"paginationShow":"paginationHide"),b.forEach(E=>E.classList.toggle(t.params.pagination.hiddenClass))}});const y=()=>{t.el.classList.remove(t.params.pagination.paginationDisabledClass);let{el:m}=t.pagination;m&&(m=a(m),m.forEach(g=>g.classList.remove(t.params.pagination.paginationDisabledClass))),f(),h(),d()},w=()=>{t.el.classList.add(t.params.pagination.paginationDisabledClass);let{el:m}=t.pagination;m&&(m=a(m),m.forEach(g=>g.classList.add(t.params.pagination.paginationDisabledClass))),p()};Object.assign(t.pagination,{enable:y,disable:w,render:h,update:d,init:f,destroy:p})}function ml(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"}function so(t,e){const n=["__proto__","constructor","prototype"];Object.keys(e).filter(r=>n.indexOf(r)<0).forEach(r=>{typeof t[r]>"u"?t[r]=e[r]:ml(e[r])&&ml(t[r])&&Object.keys(e[r]).length>0?e[r].__swiper__?t[r]=e[r]:so(t[r],e[r]):t[r]=e[r]})}function N3(t={}){return t.navigation&&typeof t.navigation.nextEl>"u"&&typeof t.navigation.prevEl>"u"}function P3(t={}){return t.pagination&&typeof t.pagination.el>"u"}function D3(t={}){return t.scrollbar&&typeof t.scrollbar.el>"u"}function O3(t=""){const e=t.split(" ").map(r=>r.trim()).filter(r=>!!r),n=[];return e.forEach(r=>{n.indexOf(r)<0&&n.push(r)}),n.join(" ")}function Vhe(t=""){return t?t.includes("swiper-wrapper")?t:`swiper-wrapper ${t}`:"swiper-wrapper"}const L3=["modules","init","_direction","oneWayMovement","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopedSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideNextClass","slidePrevClass","wrapperClass","lazyPreloaderClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control","injectStyles","injectStylesUrls"];function Bhe(t={},e=!0){const n={on:{}},r={},i={};so(n,uf.defaults),so(n,uf.extendedDefaults),n._emitClasses=!0,n.init=!1;const s={},o=L3.map(l=>l.replace(/_/,"")),a=Object.assign({},t);return Object.keys(a).forEach(l=>{typeof t[l]>"u"||(o.indexOf(l)>=0?ml(t[l])?(n[l]={},i[l]={},so(n[l],t[l]),so(i[l],t[l])):(n[l]=t[l],i[l]=t[l]):l.search(/on[A-Z]/)===0&&typeof t[l]=="function"?e?r[`${l[2].toLowerCase()}${l.substr(3)}`]=t[l]:n.on[`${l[2].toLowerCase()}${l.substr(3)}`]=t[l]:s[l]=t[l])}),["navigation","pagination","scrollbar"].forEach(l=>{n[l]===!0&&(n[l]={}),n[l]===!1&&delete n[l]}),{params:n,passedParams:i,rest:s,events:r}}function zhe({el:t,nextEl:e,prevEl:n,paginationEl:r,scrollbarEl:i,swiper:s},o){N3(o)&&e&&n&&(s.params.navigation.nextEl=e,s.originalParams.navigation.nextEl=e,s.params.navigation.prevEl=n,s.originalParams.navigation.prevEl=n),P3(o)&&r&&(s.params.pagination.el=r,s.originalParams.pagination.el=r),D3(o)&&i&&(s.params.scrollbar.el=i,s.originalParams.scrollbar.el=i),s.init(t)}function Whe(t,e,n,r,i){const s=[];if(!e)return s;const o=l=>{s.indexOf(l)<0&&s.push(l)};if(n&&r){const l=r.map(i),c=n.map(i);l.join("")!==c.join("")&&o("children"),r.length!==n.length&&o("children")}return L3.filter(l=>l[0]==="_").map(l=>l.replace(/_/,"")).forEach(l=>{if(l in t&&l in e)if(ml(t[l])&&ml(e[l])){const c=Object.keys(t[l]),u=Object.keys(e[l]);c.length!==u.length?o(l):(c.forEach(d=>{t[l][d]!==e[l][d]&&o(l)}),u.forEach(d=>{t[l][d]!==e[l][d]&&o(l)}))}else t[l]!==e[l]&&o(l)}),s}function M3(t){return t.type&&t.type.displayName&&t.type.displayName.includes("SwiperSlide")}function $3(t){const e=[];return Pe.Children.toArray(t).forEach(n=>{M3(n)?e.push(n):n.props&&n.props.children&&$3(n.props.children).forEach(r=>e.push(r))}),e}function Hhe(t){const e=[],n={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return Pe.Children.toArray(t).forEach(r=>{if(M3(r))e.push(r);else if(r.props&&r.props.slot&&n[r.props.slot])n[r.props.slot].push(r);else if(r.props&&r.props.children){const i=$3(r.props.children);i.length>0?i.forEach(s=>e.push(s)):n["container-end"].push(r)}else n["container-end"].push(r)}),{slides:e,slots:n}}function Ghe({swiper:t,slides:e,passedParams:n,changedParams:r,nextEl:i,prevEl:s,scrollbarEl:o,paginationEl:a}){const l=r.filter(S=>S!=="children"&&S!=="direction"&&S!=="wrapperClass"),{params:c,pagination:u,navigation:d,scrollbar:h,virtual:f,thumbs:p}=t;let y,w,m,g,_,b,x,E;r.includes("thumbs")&&n.thumbs&&n.thumbs.swiper&&c.thumbs&&!c.thumbs.swiper&&(y=!0),r.includes("controller")&&n.controller&&n.controller.control&&c.controller&&!c.controller.control&&(w=!0),r.includes("pagination")&&n.pagination&&(n.pagination.el||a)&&(c.pagination||c.pagination===!1)&&u&&!u.el&&(m=!0),r.includes("scrollbar")&&n.scrollbar&&(n.scrollbar.el||o)&&(c.scrollbar||c.scrollbar===!1)&&h&&!h.el&&(g=!0),r.includes("navigation")&&n.navigation&&(n.navigation.prevEl||s)&&(n.navigation.nextEl||i)&&(c.navigation||c.navigation===!1)&&d&&!d.prevEl&&!d.nextEl&&(_=!0);const D=S=>{t[S]&&(t[S].destroy(),S==="navigation"?(t.isElement&&(t[S].prevEl.remove(),t[S].nextEl.remove()),c[S].prevEl=void 0,c[S].nextEl=void 0,t[S].prevEl=void 0,t[S].nextEl=void 0):(t.isElement&&t[S].el.remove(),c[S].el=void 0,t[S].el=void 0))};r.includes("loop")&&t.isElement&&(c.loop&&!n.loop?b=!0:!c.loop&&n.loop?x=!0:E=!0),l.forEach(S=>{if(ml(c[S])&&ml(n[S]))so(c[S],n[S]);else{const T=n[S];(T===!0||T===!1)&&(S==="navigation"||S==="pagination"||S==="scrollbar")?T===!1&&D(S):c[S]=n[S]}}),l.includes("controller")&&!w&&t.controller&&t.controller.control&&c.controller&&c.controller.control&&(t.controller.control=c.controller.control),r.includes("children")&&e&&f&&c.virtual.enabled&&(f.slides=e,f.update(!0)),r.includes("children")&&e&&c.loop&&(E=!0),y&&p.init()&&p.update(!0),w&&(t.controller.control=c.controller.control),m&&(t.isElement&&(!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-pagination"),t.el.shadowEl.appendChild(a)),a&&(c.pagination.el=a),u.init(),u.render(),u.update()),g&&(t.isElement&&(!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-scrollbar"),t.el.shadowEl.appendChild(o)),o&&(c.scrollbar.el=o),h.init(),h.updateSize(),h.setTranslate()),_&&(t.isElement&&((!i||typeof i=="string")&&(i=document.createElement("div"),i.classList.add("swiper-button-next"),t.el.shadowEl.appendChild(i)),(!s||typeof s=="string")&&(s=document.createElement("div"),s.classList.add("swiper-button-prev"),t.el.shadowEl.appendChild(s))),i&&(c.navigation.nextEl=i),s&&(c.navigation.prevEl=s),d.init(),d.update()),r.includes("allowSlideNext")&&(t.allowSlideNext=n.allowSlideNext),r.includes("allowSlidePrev")&&(t.allowSlidePrev=n.allowSlidePrev),r.includes("direction")&&t.changeDirection(n.direction,!1),(b||E)&&t.loopDestroy(),(x||E)&&t.loopCreate(),t.update()}function qhe(t,e,n){if(!n)return null;const r=u=>{let d=u;return u<0?d=e.length+u:d>=e.length&&(d=d-e.length),d},i=t.isHorizontal()?{[t.rtlTranslate?"right":"left"]:`${n.offset}px`}:{top:`${n.offset}px`},{from:s,to:o}=n,a=t.params.loop?-e.length:0,l=t.params.loop?e.length*2:e.length,c=[];for(let u=a;u<l;u+=1)u>=s&&u<=o&&c.push(e[r(u)]);return c.map(u=>Pe.cloneElement(u,{swiper:t,style:i}))}const Khe=t=>{!t||t.destroyed||!t.params.virtual||t.params.virtual&&!t.params.virtual.enabled||(t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.parallax&&t.params.parallax&&t.params.parallax.enabled&&t.parallax.setTranslate())};function nh(t,e){return typeof window>"u"?H.useEffect(t,e):H.useLayoutEffect(t,e)}const pN=H.createContext(null),Qhe=H.createContext(null);function Ob(){return Ob=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ob.apply(this,arguments)}const F3=H.forwardRef(function(t,e){let{className:n,tag:r="div",wrapperTag:i="div",children:s,onSwiper:o,...a}=t===void 0?{}:t,l=!1;const[c,u]=H.useState("swiper"),[d,h]=H.useState(null),[f,p]=H.useState(!1),y=H.useRef(!1),w=H.useRef(null),m=H.useRef(null),g=H.useRef(null),_=H.useRef(null),b=H.useRef(null),x=H.useRef(null),E=H.useRef(null),D=H.useRef(null),{params:S,passedParams:T,rest:O,events:C}=Bhe(a),{slides:k,slots:A}=Hhe(s),N=()=>{p(!f)};Object.assign(S.on,{_containerClasses($,z){u(z)}});const B=()=>{Object.assign(S.on,C),l=!0;const $={...S};if(delete $.wrapperClass,m.current=new uf($),m.current.virtual&&m.current.params.virtual.enabled){m.current.virtual.slides=k;const z={cache:!1,slides:k,renderExternal:h,renderExternalUpdate:!1};so(m.current.params.virtual,z),so(m.current.originalParams.virtual,z)}};w.current||B(),m.current&&m.current.on("_beforeBreakpoint",N);const R=()=>{l||!C||!m.current||Object.keys(C).forEach($=>{m.current.on($,C[$])})},I=()=>{!C||!m.current||Object.keys(C).forEach($=>{m.current.off($,C[$])})};H.useEffect(()=>()=>{m.current&&m.current.off("_beforeBreakpoint",N)}),H.useEffect(()=>{!y.current&&m.current&&(m.current.emitSlidesClasses(),y.current=!0)}),nh(()=>{if(e&&(e.current=w.current),!!w.current)return m.current.destroyed&&B(),zhe({el:w.current,nextEl:b.current,prevEl:x.current,paginationEl:E.current,scrollbarEl:D.current,swiper:m.current},S),o&&o(m.current),()=>{m.current&&!m.current.destroyed&&m.current.destroy(!0,!1)}},[]),nh(()=>{R();const $=Whe(T,g.current,k,_.current,z=>z.key);return g.current=T,_.current=k,$.length&&m.current&&!m.current.destroyed&&Ghe({swiper:m.current,slides:k,passedParams:T,changedParams:$,nextEl:b.current,prevEl:x.current,scrollbarEl:D.current,paginationEl:E.current}),()=>{I()}}),nh(()=>{Khe(m.current)},[d]);function U(){return S.virtual?qhe(m.current,k,d):k.map(($,z)=>Pe.cloneElement($,{swiper:m.current,swiperSlideIndex:z}))}return Pe.createElement(r,Ob({ref:w,className:O3(`${c}${n?` ${n}`:""}`)},O),Pe.createElement(Qhe.Provider,{value:m.current},A["container-start"],Pe.createElement(i,{className:Vhe(S.wrapperClass)},A["wrapper-start"],U(),A["wrapper-end"]),N3(S)&&Pe.createElement(Pe.Fragment,null,Pe.createElement("div",{ref:x,className:"swiper-button-prev"}),Pe.createElement("div",{ref:b,className:"swiper-button-next"})),D3(S)&&Pe.createElement("div",{ref:D,className:"swiper-scrollbar"}),P3(S)&&Pe.createElement("div",{ref:E,className:"swiper-pagination"}),A["container-end"]))});F3.displayName="Swiper";function Lb(){return Lb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lb.apply(this,arguments)}const Mb=H.forwardRef(function(t,e){let{tag:n="div",children:r,className:i="",swiper:s,zoom:o,lazy:a,virtualIndex:l,swiperSlideIndex:c,...u}=t===void 0?{}:t;const d=H.useRef(null),[h,f]=H.useState("swiper-slide"),[p,y]=H.useState(!1);function w(b,x,E){x===d.current&&f(E)}nh(()=>{if(typeof c<"u"&&(d.current.swiperSlideIndex=c),e&&(e.current=d.current),!(!d.current||!s)){if(s.destroyed){h!=="swiper-slide"&&f("swiper-slide");return}return s.on("_slideClass",w),()=>{s&&s.off("_slideClass",w)}}}),nh(()=>{s&&d.current&&!s.destroyed&&f(s.getSlideClasses(d.current))},[s]);const m={isActive:h.indexOf("swiper-slide-active")>=0,isVisible:h.indexOf("swiper-slide-visible")>=0,isPrev:h.indexOf("swiper-slide-prev")>=0,isNext:h.indexOf("swiper-slide-next")>=0},g=()=>typeof r=="function"?r(m):r,_=()=>{y(!0)};return Pe.createElement(n,Lb({ref:d,className:O3(`${h}${i?` ${i}`:""}`),"data-swiper-slide-index":l,onLoad:_},u),o&&Pe.createElement(pN.Provider,{value:m},Pe.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof o=="number"?o:void 0},g(),a&&!p&&Pe.createElement("div",{className:"swiper-lazy-preloader"}))),!o&&Pe.createElement(pN.Provider,{value:m},g(),a&&!p&&Pe.createElement("div",{className:"swiper-lazy-preloader"})))});Mb.displayName="SwiperSlide";function mN({imgsrc:t}){return v.jsx(F3,{modules:[jhe],pagination:{clickable:!0},slidesPerView:1,spaceBetween:50,onSlideChange:()=>"slide change",onSwiper:e=>e,children:t[0]!=="h"?t.map(e=>v.jsx(Mb,{children:v.jsx("img",{alt:"이미지 사진",src:e})},e)):v.jsx(Mb,{children:v.jsx("img",{alt:"이미지 사진",src:t})})})}function Yhe({myinputRef:t,name:e,required:n,postImg:r,setPostImg:i,previewImg:s,setPreviewImg:o}){const a=async c=>{const u=c.target.files,d=[],h={maxSizeMB:.5,maxWidthOrHeight:1920,useWebWorker:!0};let f=u.length>5?5:u.length;for(let p=0;p<f;p++){const y=u[p];try{const w=await nn(y,h);d.push(w)}catch(w){console.log(w)}}i(d)};H.useEffect(()=>{const c=r.map(u=>nn.getDataUrlFromFile(u));Promise.all(c).then(u=>{o(u)})},[r]);const l=c=>{const u=[...r];u.splice(c,1),i(u);const d=[...s];d.splice(c,1),o(d)};return v.jsxs(Xhe,{children:[v.jsxs(Zhe,{children:[v.jsx(ja,{accept:".png, .jpeg, .jpg, .svg",multiple:!0,myinputRef:t,name:e,required:n,type:"file",onChange:a,onClick:c=>c.target.value=null}),s.map((c,u)=>v.jsxs(gN,{children:[v.jsx("button",{type:"button",onClick:()=>l(u),children:v.jsx("img",{alt:"업로드 이미지 제거",src:"/src/assets/icon-close-button.svg"})}),v.jsx("img",{alt:c,src:c})]},c)),s.length>=5?"":v.jsx(gN,{})]}),v.jsx(Jhe,{children:"• 판매할 상품의 사진을 업로드해주세요."})]})}const Xhe=ee.div`
  width: 886px;
  margin: 0 auto;
`,Jhe=ee.span`
  display: inline-block;
  font-size: 12px;
  color: ${fp};
  margin-bottom: 30px;
`,Zhe=ee.div`
  display: flex;
  gap 20px;
  padding: 10px 0;
  
  & label{
    display: inline-block;
    width: 90px;
    height: 90px;
    background: url('/src/assets/icon-add-photo.svg') no-repeat;
    background-position: center;
    border: 1px solid ${E_};
    border-radius: 10px;
    cursor: pointer;
  }
  
  input{
    display: none;
  }
  
  div{
    width: 90px;
    height: 90px;
    border-radius: 10px;
  }
`,gN=ee.div`
  border: 1px dashed ${E_};
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
  overflow: hidden;

  button{
    position: absolute;
    right: 0;
    top: 5px;
    background: none;
    border: none;
    cursor: pointer;
  }

  img{
    width: 100%;
  }
`,efe=$n.firestore(),yN=qle();function tfe(){const t=H.useRef(),e=Rs(),[n,r]=H.useState(0),[i]=wt(Ur),[s]=wt(Pl),[o,a]=H.useState([]),[l,c]=H.useState([]),[u,d]=H.useState({title:"",side:"물품 종류",price:"0",content:"",nickname:"",profileImage:"",imgsrc:""});u.price>1e9&&(u.price=999999999);const h=p=>{d({...u,[p.target.name]:p.target.value})},f=p=>{r(1),p.preventDefault();const y=o,w=[];for(let m=0;m<y.length;m++){const g=Yg(yN,"writeimages/"+y[m].name);w.push(Ule(g,y[m]))}Promise.all(w).then(()=>{const m=[];for(let g=0;g<y.length;g++){const _=Yg(yN,"writeimages/"+y[g].name);m.push(Xj(_))}Promise.all(m).then(g=>{efe.collection("UserWrite").add({title:u.title,side:"중고 거래 ",price:u.price,content:u.content,date:new Date,imgsrc:g,chat:0,check:0,heart:0,userId:i,nickname:s.nickname,profileImage:s.profileImage,location:s.location,recommend:[]}).then(()=>{e("/HotArticles")})})})};return v.jsxs("section",{children:[v.jsx("h3",{className:"a11yHidden",children:"게시글 작성란"}),v.jsx(nfe,{children:v.jsxs("fieldset",{children:[v.jsx(Yhe,{myinputRef:t,name:"imgsrc",postImg:o,previewImg:l,required:!0,setPostImg:a,setPreviewImg:c}),v.jsx("legend",{children:"게시글 등록 폼"}),v.jsx(ja,{name:"title",placeholder:"제목을 입력해주세요",required:!0,type:"text",value:u.title,onChange:h}),v.jsxs(rfe,{className:"userRegion",children:[v.jsx("span",{children:s.location.sido}),v.jsx("span",{children:s.location.sigungu}),v.jsx("span",{children:s.location.bname})]}),v.jsxs(ofe,{children:[v.jsx(ja,{name:"price",placeholder:"상품 가격을 입력해주세요",required:!0,type:"number",value:u.price,onChange:h}),v.jsxs("span",{className:"productPrice",children:["판매 가격 : ",u.price.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")," 원"]})]}),v.jsx(ja,{content:!0,name:"content",placeholder:"내용을 입력해주세요",required:!0,type:"text",value:u.content,onChange:h}),v.jsxs(afe,{children:[v.jsx(vN,{onClick:()=>{e("/HotArticles")},children:"취소"}),v.jsx(vN,{disabled:n||!l[0]||!u.title||!u.price||!u.content,type:"submit",onClick:f,children:"완료"})]})]})})]})}function ja({className:t,placeholder:e,disabled:n,type:r,content:i,value:s,accept:o,required:a,onChange:l,name:c,multiple:u,myinputRef:d,onClick:h}){return v.jsx("label",{children:i?v.jsx(sfe,{ref:d,className:t,name:c,placeholder:e,required:a,type:r,value:s,onChange:l}):v.jsx(ife,{ref:d,accept:o,className:t,disabled:n,multiple:u,name:c,placeholder:e,required:a,type:r,value:s,onChange:l,onClick:h})})}const tI=Mo`
  margin-bottom: 20px;
  border-radius: 5px;
  border: 1px solid ${l3};
  box-sizing: border-box;
  padding: 0 12px;
  font-size: 15px;
`,nfe=ee.form`
  width: 886px;
  display: flex;
  flex-flow: column nowrap;
  margin-left: auto;
  margin-right: auto;

  fieldset{
    padding: 0;
  }
`,rfe=ee.div`
  display: flex;
  gap: 20px;
  justify-content: space-between;
  
  & span{
    ${tI}
    width: 100%;
    line-height: 36px;    
    cursor: default;
  }
`,ife=ee.input`
  ${tI}
  width: 100%;
  height: 37px;
`,sfe=ee.textarea`
  ${tI}
  width: 100%;
  height: 290px;
  padding: 12px;
  resize: none;
`,ofe=ee.div`
  width: 886px;
  display: flex;
  justify-content: space-between;
  gap: 50px;

  input{
    width: 585px;
    border: none;
    border-radius: 0;
    border-bottom: 1px solid ${l3};
  }

  input::-webkit-inner-spin-button {
    appearance: none;
  }

  span{    
    width: 250px;
    line-height: 36px;
    text-align: center;
    font-weight: bold;
    font-size: 18px;
    letter-spacing: .5px;
  }
`,afe=ee.div`
  width: 218px;
  height: 40px;
  margin: 40px auto 0px auto;
  display: flex;
  justify-content: space-between;
  gap: 20px;
`,vN=ee.button`
  width: 100%;
  border: none;
  border-radius: 4px;
  background: ${fp};
  color: white;
  font-weight: bold;
  cursor: pointer;
  
  &[disabled]{
    cursor: not-allowed;
    background: ${E_};
  }
`;function lfe(){const[t,e]=H.useState({title:null,side:null,date:null,price:null,content:null,heart:null,chat:null,check:null,imgsrc:null,userId:null,nickname:null,profileImage:null,location:null}),n=$S(),[r,i]=H.useState(0);let[s]=H.useState(0);const o=qi(Wi,"UserWrite",n.id),a=Xc(o),[l]=wt(Ur);return l==t.userId&&(s=1),H.useEffect(()=>{window.scrollTo(0,0);const c={check:V$(1)};Oo(o,c).then(()=>{a.then(u=>{e(u.data()),i(1)})})},[n]),v.jsx(v.Fragment,{children:r?v.jsx(U3,{chat:t.chat,check:t.check,content:t.content,data:t.data,heart:t.heart,imgsrc:t.imgsrc,location:t.location,nickname:t.nickname,price:t.price,profileImage:t.profileImage,recommend:t.recommend,side:t.side,state:s,title:t.title}):v.jsx(lf,{})})}function U3({recommend:t,state:e,title:n,side:r,nickname:i,profileImage:s,location:o,temperature:a,date:l,price:c,content:u,heart:d,chat:h,check:f,imgsrc:p}){const y=Rs(),[w,m]=H.useState(!1),[g,_]=H.useState(0),[b,x]=H.useState(0),[E,D]=H.useState(0),[S,T]=H.useState([]),O=()=>{m(w?0:1)},C=$S(),k=qi(Wi,"UserWrite",C.id),A=Xc(k),[N,B]=H.useState({modifiedTitle:n,modifiedPrice:c,modifiedContent:u}),R=U=>{B($=>({...$,[U.target.name]:U.target.value}))};H.useEffect(()=>{Kf(b_,U=>{const $=U.docs.map(z=>({id:z.id,...z.data()}));$.sort((z,J)=>J.heart-z.heart),T($.slice(0,6)),_(1)})},[]);const I=()=>{x(1),Oo(k,{title:n,price:c,content:u})};return v.jsxs(dfe,{children:[v.jsxs(nw,{children:[v.jsx("button",{"aria-label":"화면 클릭 하면 확대가능합니다.",className:"image-button",type:"button",onClick:O,children:v.jsx(mN,{imgsrc:p[0]!==void 0?p:"https://firebasestorage.googleapis.com/v0/b/patato-market.appspot.com/o/no_image.jpg?alt=media&token=d2d005ba-9dbb-40cb-bd61-4d47f5118b2c"})}),w?v.jsxs("div",{className:"module-swiper",children:[v.jsx("button",{className:"a11yhidden-button",type:"button",onClick:O,children:v.jsx("img",{alt:"닫기 버튼",src:i3})}),v.jsx(mN,{imgsrc:p[0]!==void 0?p:"https://firebasestorage.googleapis.com/v0/b/patato-market.appspot.com/o/no_image.jpg?alt=media&token=d2d005ba-9dbb-40cb-bd61-4d47f5118b2c"})]}):null,v.jsxs(ps,{className:"profile",href:"naver.com",rel:"noopener noreferrer",target:"_blank",to:"/HotArticles",children:[v.jsxs("div",{className:"left-profile",children:[v.jsx("img",{alt:"프로필 사진",className:"profile-image",src:s}),v.jsxs("div",{children:[v.jsx("span",{className:"nickname",children:i}),v.jsxs("span",{className:"address",children:[o.sido," ",o.sigungu," ",o.bname]})]})]}),v.jsxs("div",{className:"right-profile",children:[v.jsxs("div",{children:[v.jsxs("span",{className:"temperature",children:[a," ℃"]}),v.jsx("span",{className:"thermometer"})]}),v.jsx("img",{alt:"당근 온도 이모티콘",className:"temperature-image",src:E3})]})]}),v.jsxs("div",{className:"article",children:[v.jsx("h2",{className:"title",children:n}),v.jsxs("div",{className:"side-title",children:[v.jsx("span",{children:r}),v.jsxs("span",{children:[l,"일 전"]})]}),v.jsxs("p",{className:"price",children:[KT(c),"원"]}),v.jsx("p",{className:"content",children:u}),v.jsxs("div",{className:"counting-group",children:[v.jsxs("span",{children:["관심 ",d," "]}),v.jsxs("span",{children:["채팅 ",h," "]}),v.jsxs("span",{children:["조회 ",f," "]})]}),v.jsx("div",{className:"button-list",children:e?v.jsxs(v.Fragment,{children:[v.jsx(ui,{onClick:I,children:"수정"}),v.jsx(ui,{filled:!0,onClick:()=>{D(1)},children:"삭제"})]}):v.jsx(ui,{children:"채팅하기"})})]})]}),v.jsx(nw,{children:v.jsx(_de,{recommend:t})}),v.jsxs(nw,{children:[v.jsxs("div",{className:"best-product-group",children:[v.jsx("h2",{children:"당근마켓 인기중고"}),v.jsx(ps,{rel:"noopener noreferrer",to:"/HotArticles",children:"더 구경하기"})]}),v.jsx("div",{className:"best-product",children:g?S.map(({content:U,title:$,price:z,side:J,imgsrc:P,location:F,id:L,heart:j,check:M},ne)=>v.jsx(T_,{check:M,content:U,heart:j,id:L,imgsrc:P,location:F,price:z,side:J,title:$},ne)):v.jsx(lf,{className:"loading"})})]}),E?v.jsx(cfe,{children:v.jsxs("form",{children:[v.jsx("h3",{children:"정말로 삭제하시겠습니까?"}),v.jsxs("div",{className:"button-wrapper",children:[v.jsx(ui,{red:!0,onClick:U=>{U.preventDefault(),j$(qi(Wi,"UserWrite",C.id)).then(()=>{y("/HotArticles")})},children:"삭제"}),v.jsx(ui,{onClick:()=>{D(0)},children:"취소"})]})]})}):null,b?v.jsx(ufe,{children:v.jsxs("form",{children:[v.jsx("h2",{children:"게시글 수정"}),v.jsxs("div",{className:"input-wrapper",children:[v.jsx(ja,{className:"title-input",name:"modifiedTitle",type:"text",value:N.modifiedTitle,onChange:R}),v.jsx(ja,{className:"price-input",name:"modifiedPrice",type:"number",value:N.modifiedPrice,onChange:R})]}),v.jsx(ja,{content:!0,className:"content-input",name:"modifiedContent",type:"text",value:N.modifiedContent,onChange:R}),v.jsxs("div",{className:"button-wrapper",children:[v.jsx(ui,{onClick:()=>{x(0)},children:"취소"}),v.jsx(ui,{className:"modifie-button",onClick:()=>{const U={content:N.modifiedContent,price:N.modifiedPrice,title:N.modifiedTitle};Oo(k,U).then(()=>{A.then(()=>{o.reload()})})},children:"수정"})]})]})}):null]})}U3.defaultProps={title:"제목을 입력해주세요.",side:"가구",nickname:"닉네임",address:"인천시 부평구 산곡동",temperature:"36.5",date:"1",price:"500",content:"판매 완료",heart:"0",chat:"0",check:"0",imgsrc:["https://firebasestorage.googleapis.com/v0/b/patato-market.appspot.com/o/%E1%84%80%E1%85%A5%E1%84%8B%E1%85%AE%E1%86%AF%E1%84%85%E1%85%B5%E1%84%8E%E1%85%B5.png?alt=media&token=f23ce701-2450-495f-8166-2e1049699b2b","https://firebasestorage.googleapis.com/v0/b/patato-market.appspot.com/o/%E1%84%80%E1%85%A5%E1%84%8B%E1%85%AE%E1%86%AF%E1%84%85%E1%85%B5%E1%84%8E%E1%85%B5.png?alt=media&token=f23ce701-2450-495f-8166-2e1049699b2b","https://firebasestorage.googleapis.com/v0/b/patato-market.appspot.com/o/%E1%84%80%E1%85%A5%E1%84%8B%E1%85%AE%E1%86%AF%E1%84%85%E1%85%B5%E1%84%8E%E1%85%B5.png?alt=media&token=f23ce701-2450-495f-8166-2e1049699b2b","https://firebasestorage.googleapis.com/v0/b/patato-market.appspot.com/o/%E1%84%80%E1%85%A5%E1%84%8B%E1%85%AE%E1%86%AF%E1%84%85%E1%85%B5%E1%84%8E%E1%85%B5.png?alt=media&token=f23ce701-2450-495f-8166-2e1049699b2b"]};const cfe=ee.div`
  display: flex;
  align-items: center;
  justify-content: center;
  top:0;
  width:100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.54);
  position: fixed;
  z-index:100;
  & .button-wrapper{
    display:flex;
    gap:20px;
  }
  button:first-child{
    border: none;
  }
  & h3{
    font-weight: 900;
    font-size: 20px;
    margin-bottom: 24px;
  }
  & form{
    border-radius: 20px;
    background-color: white;
    width: 503px;
    height: 100px;
    padding: 40px 0px;
    display: flex;
    align-items: center;
    flex-flow: column;
  }
`,ufe=ee.div`
  display: flex;
  align-items: center;
  justify-content: center;
  top:0;
  width:100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.54);
  position: fixed;
  z-index:100;
  & .input-wrapper{
    display:flex;
    width:100%;
    justify-content: center;
    gap:20px;
  }
  & .title-input{
    width: 507px;
    height: 38px;
  }
  & .price-input{
    width: 150px;
  }
  & .content-input{
    width: 673.5px;
    height: 288px;
    margin-bottom: 40px;
  }
  & .button-wrapper{
    display:flex;
    gap:20px;
  }
  & .modifie-button{
    background: #CFA36E;
    color:white;
  }
  & .modifie-button:hover{
    background: #a58258;
  }
  & form{
    border-radius: 20px;
    background-color: white;
    width: 803px;
    height: 500px;
    padding: 40px 0px;
    display: flex;
    align-items: center;
    flex-flow: column;
  }
  & h2{
    font-weight: 600;
    font-size: 32px;
    margin-bottom: 24px;
  }
`,dfe=ee.main`
  & a{
    color:black;
  }
  display:flex;
  flex-flow:column;
  align-items: center;
  width: 100%;
    height: auto;
  margin-top: 40px;
  margin-bottom: 40px;
`,nw=ee.section`
    min-width:375px;
    max-width:670px;
    width: 100%;
    height: auto;
  & .swiper{
    height: 500px;
    border-radius: 8px;
    overflow:hidden;
  }
  & .swiper img{
    width:100%;
    height: 100%;
    object-fit: cover;
  }
  & .profile{
    text-decoration: none;
    margin: 24px 0;
    height: 42px;
    display:flex;
    flex-flow:row;
    justify-content: space-between;
  }
  & .profile span{
    display:inline-block;
  }
  & .left-profile, & .right-profile{
    display:flex;
    align-items: center;     
    flex-flow:row;
  }
  & .right-profile{
    text-align: right;
  }
  & .right-profile div{
    gap:8px;
  }
  & .left-profile div,& .right-profile div{
    display:flex;
    flex-flow:column;
  }
  & .left-profile div{
    margin-left: 8px;
  }
  .nickname{
    font-weight: 600;
    font-size: 15px;
    margin-bottom: 5px;
  }
  .address{
    font-weight: 400;
    font-size: 13px;
  }
  & .right-profile div{
    margin-right:8px;
  }
  .temperature{
    font-size: 16px;
    font-weight: 700;
    color: #319E45;
  }
  & .profile-image{
    width: 40px;
    height: 40px;
    border-radius: 50%;
    margin-right: 3px;
  }
  & .temperature-image{
    width: 30px;
    height: 30px;
    border-radius: 20px;
  }

  & .best-product{
    display: flex;
    flex-wrap: wrap;
    margin-top: 10px;
  }
  & .best-product .product{
    margin:30px 11px;
  }
  & .article{
    position:relative;
    padding: 36px 0;
    border-bottom: 1px solid #E9ECEF;
    border-top: 1px solid #E9ECEF;
  }
  & .title{
    font-weight: 600;
    font-size: 22px;
    margin-bottom: 8px;
  }
  & .side-title{
    font-weight: 400;
    font-size: 13px;
    color: #868E96;
    margin-bottom:12px;
  }
  & .side-title span:first-child::after{
    content: '•';
    margin-right:5px;
  }
  & .price{
    font-weight: 700;
    font-size: 17px;
    margin-bottom:22px;
  }
  & .content{
    font-weight: 400;
    font-size: 17px;
    margin-bottom: 50px;
  }
  & .counting-group{
    color: #868E96;
    font-weight: 400;
    font-size: 13px;
  }
  & .counting-group span::after{
    content:'•';
  }
  & .counting-group span:last-child::after{
    content:'';
  }
  & .best-product-group{
    display:flex;
    justify-content: space-between;
    margin-top:35.45px;
  }
  & .best-product-group h2{
    font-weight: 600;
    font-size: 20px;
  }
  & .best-product-group a{
    color: #CFA36E;
    font-weight: 400;
    font-size: 15px;
    text-decoration: none;
  }

  & .thermometer{
    background: rgb(49,158,69);
    background: linear-gradient(90deg, rgba(49,158,69,1) 50%, rgba(233,236,239,1) 38%);
    width: 100px;
    height: 4px;
  }
  & .button-list{
    position: absolute;
    right:0;
    bottom:27px;
  }
  & .button-list button{
    margin-left:18px;    
  }
  & .button-list button:nth-child(2){
    border: none;
  }
  & .module-swiper{
    top:0;
    left:0;
    z-index:999;
    position:fixed;
    width:100%;
    height:100%;
  }
  & .module-swiper .swiper{
    background-color: black;
    height:100%;
  }
  & .module-swiper .swiper-slide-active{
    text-align: center;
  }
  & .module-swiper img{
    max-width:1200px;
    max-height:100%;
    width:100%;
    height:auto;
  }
  & .module-swiper .swiper-pagination-bullet{
    position: relative;
    bottom:10px;
    width:50px;
    height:50px; 
  }
  & .a11yhidden-button{
    border:0;
    position:absolute;
    right:20%;
    color:white;
    font-size:80px;
    top:0;
    z-index:9999;
    background-color: inherit;
  }
  & .image-button{
    cursor:pointer;
    background-color: inherit;
    border:0;
    width:100%;
  }
`,hfe=({profileUrl:t,setProfileUrl:e})=>{const[n,r]=H.useState(t||x_),i=async s=>{const o=s.target.files[0],a={maxSizeMB:.1,maxWidthOrHeight:100,useWebWorker:!0};if(o){const l=await nn(o,a),c=URL.createObjectURL(l);r(c),e(l)}};return v.jsxs(v.Fragment,{children:[v.jsx(nI,{htmlFor:"profileImage",children:"프로필 사진"}),v.jsxs(rI,{children:[v.jsx("img",{alt:"프로필 이미지사진 미리보기",className:"profile-image-preview",src:n}),v.jsx("input",{accept:".png, .jpg, .jpeg, .svg",id:"profileImage",type:"file",onChange:i})]})]})},ffe=({setOpenPostcode:t,fullAddress:e})=>{const n=()=>{t(r=>!r)};return v.jsxs(v.Fragment,{children:[v.jsx(nI,{htmlFor:"userLocation",children:"주소"}),v.jsxs(rI,{children:[v.jsxs("div",{className:"loca",children:[v.jsx("input",{readOnly:!0,id:"userLocation",name:"userLocation",type:"text",value:e==="undefined undefined undefined"?"":e,onClick:n}),v.jsx(j3,{type:"button",onClick:n,children:"검색"})]}),v.jsx(iI,{children:"주소에 따라서 내 동네가 설정됩니다"})]})]})},ya=({id:t,type:e,onChange:n,value:r,placeholder:i,text:s,desc:o,valid:a,label:l,button:c})=>v.jsxs(v.Fragment,{children:[l?v.jsx(nI,{htmlFor:t,children:s}):v.jsx("label",{className:"a11yHidden",htmlFor:t,children:s}),v.jsxs(rI,{children:[v.jsx("input",{id:t,name:t,placeholder:i,type:e,value:r,onChange:n}),o&&v.jsx(iI,{children:o}),a&&v.jsx(pfe,{children:a})]}),c&&v.jsx(j3,{type:"button",children:c})]}),nI=ee.label`
  display: inline-block;
  flex-shrink: 0;
  width: 139px;
  font-weight: 700;
  line-height: 44px;
  cursor: pointer;
  @media screen and (max-width: 700px) {
    width: 100%;
  }
`,rI=ee.div`
  display: flex;
  flex-direction: column;
  gap: 8px;
  max-width: 493px;

  input[type="text"],
  input[type="password"],
  input[type="tel"],
  input[type="email"],
  input[type="file"]::file-selector-button {
    width: 340px;
    height: 44px;
    padding: 9px 20px;
    background-color: #fff;
    border: 1px solid ${pl};
    border-radius: 4px;
    box-sizing: border-box;
  }
  input[type="file"] {
    width: 340px;
    &::file-selector-button {
      border: 1px solid ${bn};
      color: ${bn};
      font-weight: 600;
      cursor: pointer;
    }
  }
  button {
    width: 340px;
  }
  .profile-image-preview {
    width: 100px;
    height: 100px;
    margin: 0 auto;
    object-fit: cover;
    border-radius: 50%;
    border: 1px solid ${pl};
  }
  .loca {
    display: flex;
    button {
      width: 147px;
      margin-left: 8px;
    }
  }
  @media screen and (max-width: 700px) {
    width: 100%;
    max-width: none;
    input[type="text"],
    input[type="password"],
    input[type="tel"],
    input[type="email"],
    input[type="file"],
    input[type="file"]::file-selector-button,
    button {
      width: 100%;
    }
  }
`,iI=ee.p`
  margin-top: 4px;
  font-size: 14px;
  line-height: 19px;
`,pfe=ee(iI)`
  color: #da3a06;
`,j3=ee.button`
  flex: 1 0 auto;
  width: 143px;
  height: 44px;
  background-color: #fff;
  border: 1px solid ${bn};
  border-radius: 4px;
  font-weight: 700;
  color: ${bn};
  @media screen and (max-width: 700px) {
    width: 100%;
    max-width: 340px;
    max-width: none;
  }
`,$b=ee.button`
  display: block;
  width: 340px;
  height: 54px;
  margin: 12px auto 0;
  box-sizing: border-box;
  border-radius: 4px;
  line-height: 54px;
  font-size: 16px;
  font-weight: 700;
  text-align: center;
  cursor: pointer;
  ${t=>t.primary&&Mo`
      background-color: ${bn};
      color: #fff;
      border: none;
    `||Mo`
      background-color: #fff;
      color: ${bn};
      border: 1px solid ${bn};
    `};
`;function mfe(){const t=Rs(),[e]=wt(Ur),[n,r]=H.useState(!1),[i,s]=H.useState({email:"",password:""}),o=async l=>{l.preventDefault();try{await af.setPersistence($n.auth.Auth.Persistence.SESSION),await af.signInWithEmailAndPassword(i.email,i.password),(await th.where("email","==",i.email).get()).size>0&&t(-1)}catch{r(!0)}},a=l=>{s(c=>({...c,[l.target.name]:l.target.value}))};return v.jsx(v.Fragment,{children:e!==null?v.jsx(k_,{}):v.jsxs(gfe,{children:[v.jsx("h2",{children:"로그인"}),v.jsx(yfe,{id:"loginForm",onSubmit:o,children:v.jsxs("fieldset",{children:[v.jsx("legend",{children:"회원 로그인 폼"}),v.jsxs("ul",{className:"form-list",children:[v.jsx("li",{children:v.jsx(ya,{id:"email",placeholder:"이메일을 입력해주세요",text:"이메일",type:"email",value:i.email,onChange:a})}),v.jsx("li",{children:v.jsx(ya,{id:"password",placeholder:"비밀번호를 입력해주세요",text:"비밀번호",type:"password",value:i.password,onChange:a})})]}),v.jsx($b,{primary:!0,type:"submit",children:"로그인"}),v.jsx($b,{as:"a",onClick:()=>t("/signup"),children:"회원가입"})]})}),n&&v.jsx(Nb,{text:"아이디, 비밀번호를 확인해주세요.",onClose:()=>{r(!1)}})]})})}const gfe=ee.section`
  padding: 80px 0 70px;
  h2 {
    line-height: 36px;
    font-size: 32px;
    font-weight: 500;
    text-align: center;
  }
`,yfe=ee.form`
  width: 340px;
  margin: 32px auto 10px;
  .form-list li {
    margin-top: 12px;
  }
  /* .account-find {
    display: flex;
    justify-content: flex-end;
    margin: 12px 0 28px;
    line-height: 19px;
    font-size: 14px;
    li:nth-child(2)::before {
      content: "|";
      display: inline-block;
      padding: 0 4px;
    }
    a {
      color: black;
      text-decoration: none;
    }
  } */
`;var V3={},B3={},A_={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.postcodeScriptUrl=void 0;var e="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js";t.postcodeScriptUrl="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js";var n=function(){var i=null;return function(){var s=0<arguments.length&&arguments[0]!==void 0?arguments[0]:e;return i||(i=new Promise(function(o,a){var l=document.createElement("script");l.src=s,l.onload=function(){var c,u;return(c=window)!==null&&c!==void 0&&(u=c.daum)!==null&&u!==void 0&&u.Postcode?o(window.daum.Postcode):void a(new Error("Script is loaded successfully, but cannot find Postcode module. Check your scriptURL property."))},l.onerror=function(c){return a(c)},l.id="daum_postcode_script",document.body.appendChild(l)}),i)}}(),r=n;t.default=r})(A_);(function(t){function e(C){return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},e(C)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(H),r=o(A_),i=["scriptUrl","className","style","defaultQuery","autoClose","errorMessage","onComplete","onClose","onResize","onSearch"];function s(C){if(typeof WeakMap!="function")return null;var k=new WeakMap,A=new WeakMap;return(s=function(N){return N?A:k})(C)}function o(C,k){if(!k&&C&&C.__esModule)return C;if(C===null||e(C)!=="object"&&typeof C!="function")return{default:C};var A=s(k);if(A&&A.has(C))return A.get(C);var N={},B=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var R in C)if(R!="default"&&Object.prototype.hasOwnProperty.call(C,R)){var I=B?Object.getOwnPropertyDescriptor(C,R):null;I&&(I.get||I.set)?Object.defineProperty(N,R,I):N[R]=C[R]}return N.default=C,A&&A.set(C,N),N}function a(C,k){var A=Object.keys(C);if(Object.getOwnPropertySymbols){var N=Object.getOwnPropertySymbols(C);k&&(N=N.filter(function(B){return Object.getOwnPropertyDescriptor(C,B).enumerable})),A.push.apply(A,N)}return A}function l(C){for(var k,A=1;A<arguments.length;A++)k=arguments[A]==null?{}:arguments[A],A%2?a(Object(k),!0).forEach(function(N){x(C,N,k[N])}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(k)):a(Object(k)).forEach(function(N){Object.defineProperty(C,N,Object.getOwnPropertyDescriptor(k,N))});return C}function c(C,k){if(C==null)return{};var A,N,B=u(C,k);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(C);for(N=0;N<R.length;N++)A=R[N],0<=k.indexOf(A)||Object.prototype.propertyIsEnumerable.call(C,A)&&(B[A]=C[A])}return B}function u(C,k){if(C==null)return{};var A,N,B={},R=Object.keys(C);for(N=0;N<R.length;N++)A=R[N],0<=k.indexOf(A)||(B[A]=C[A]);return B}function d(C,k){if(!(C instanceof k))throw new TypeError("Cannot call a class as a function")}function h(C,k){for(var A,N=0;N<k.length;N++)A=k[N],A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(C,A.key,A)}function f(C,k,A){return k&&h(C.prototype,k),A&&h(C,A),C}function p(C,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function");C.prototype=Object.create(k&&k.prototype,{constructor:{value:C,writable:!0,configurable:!0}}),k&&y(C,k)}function y(C,k){return y=Object.setPrototypeOf||function(A,N){return A.__proto__=N,A},y(C,k)}function w(C){var k=_();return function(){var A,N=b(C);if(k){var B=b(this).constructor;A=Reflect.construct(N,arguments,B)}else A=N.apply(this,arguments);return m(this,A)}}function m(C,k){return k&&(e(k)==="object"||typeof k=="function")?k:g(C)}function g(C){if(C===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C}function _(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function b(C){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)},b(C)}function x(C,k,A){return k in C?Object.defineProperty(C,k,{value:A,enumerable:!0,configurable:!0,writable:!0}):C[k]=A,C}var E=n.default.createElement("p",null,"현재 Daum 우편번호 서비스를 이용할 수 없습니다. 잠시 후 다시 시도해주세요."),D={width:"100%",height:400},S={scriptUrl:r.postcodeScriptUrl,errorMessage:E,autoClose:!0},T=function(C){function k(){var N;d(this,k);for(var B=arguments.length,R=Array(B),I=0;I<B;I++)R[I]=arguments[I];return N=A.call.apply(A,[this].concat(R)),x(g(N),"wrap",(0,n.createRef)()),x(g(N),"state",{hasError:!1}),x(g(N),"initiate",function(U){if(N.wrap.current){var $=N.props;$.scriptUrl,$.className,$.style;var z=$.defaultQuery,J=$.autoClose;$.errorMessage;var P=$.onComplete,F=$.onClose,L=$.onResize,j=$.onSearch,M=c($,i),ne=new U(l(l({},M),{},{oncomplete:function(te){P&&P(te),J&&N.wrap.current&&N.wrap.current.remove()},onsearch:j,onresize:L,onclose:F,width:"100%",height:"100%"}));ne.embed(N.wrap.current,{q:z,autoClose:J})}}),x(g(N),"onError",function(U){console.error(U),N.setState({hasError:!0})}),N}p(k,C);var A=w(k);return f(k,[{key:"componentDidMount",value:function(){var B=this.initiate,R=this.onError,I=this.props.scriptUrl;I&&(0,r.default)(I).then(B).catch(R)}},{key:"render",value:function(){var B=this.props,R=B.className,I=B.style,U=B.errorMessage,$=this.state.hasError;return n.default.createElement("div",{ref:this.wrap,className:R,style:l(l({},D),I)},$&&U)}}]),k}(n.Component);x(T,"defaultProps",S);var O=T;t.default=O})(B3);var z3={};(function(t){function e(p){return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},e(p)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=H,r=o(A_),i=["defaultQuery","left","top","popupKey","popupTitle","autoClose","onComplete","onResize","onClose","onSearch","onError"];function s(p){if(typeof WeakMap!="function")return null;var y=new WeakMap,w=new WeakMap;return(s=function(m){return m?w:y})(p)}function o(p,y){if(!y&&p&&p.__esModule)return p;if(p===null||e(p)!=="object"&&typeof p!="function")return{default:p};var w=s(y);if(w&&w.has(p))return w.get(p);var m={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _ in p)if(_!="default"&&Object.prototype.hasOwnProperty.call(p,_)){var b=g?Object.getOwnPropertyDescriptor(p,_):null;b&&(b.get||b.set)?Object.defineProperty(m,_,b):m[_]=p[_]}return m.default=p,w&&w.set(p,m),m}function a(p,y){var w=Object.keys(p);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(p);y&&(m=m.filter(function(g){return Object.getOwnPropertyDescriptor(p,g).enumerable})),w.push.apply(w,m)}return w}function l(p){for(var y,w=1;w<arguments.length;w++)y=arguments[w]==null?{}:arguments[w],w%2?a(Object(y),!0).forEach(function(m){c(p,m,y[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(y)):a(Object(y)).forEach(function(m){Object.defineProperty(p,m,Object.getOwnPropertyDescriptor(y,m))});return p}function c(p,y,w){return y in p?Object.defineProperty(p,y,{value:w,enumerable:!0,configurable:!0,writable:!0}):p[y]=w,p}function u(p,y){if(p==null)return{};var w,m,g=d(p,y);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(p);for(m=0;m<_.length;m++)w=_[m],0<=y.indexOf(w)||Object.prototype.propertyIsEnumerable.call(p,w)&&(g[w]=p[w])}return g}function d(p,y){if(p==null)return{};var w,m,g={},_=Object.keys(p);for(m=0;m<_.length;m++)w=_[m],0<=y.indexOf(w)||(g[w]=p[w]);return g}function h(){var p=0<arguments.length&&arguments[0]!==void 0?arguments[0]:r.postcodeScriptUrl;(0,n.useEffect)(function(){(0,r.default)(p)},[p]);var y=(0,n.useCallback)(function(w){var m=l({},w),g=m.defaultQuery,_=m.left,b=m.top,x=m.popupKey,E=m.popupTitle,D=m.autoClose,S=m.onComplete,T=m.onResize,O=m.onClose,C=m.onSearch,k=m.onError,A=u(m,i);return(0,r.default)(p).then(function(N){var B=new N(l(l({},A),{},{oncomplete:S,onsearch:C,onresize:T,onclose:O}));B.open({q:g,left:_,top:b,popupTitle:E,popupKey:x,autoClose:D})}).catch(k)},[p]);return y}var f=h;t.default=f})(z3);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DaumPostcodeEmbed",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"useDaumPostcodePopup",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"loadPostcode",{enumerable:!0,get:function(){return r.default}}),t.default=void 0;var e=i(B3),n=i(z3),r=i(A_);function i(o){return o&&o.__esModule?o:{default:o}}var s=e.default;t.default=s})(V3);const vfe=Fb(V3),_fe=({location:t,setLocation:e})=>{const[n,r]=H.useState(!1),i=s=>{e(o=>({...o,sido:s.sido,sigungu:s.sigungu,bname:s.bname})),r(!1)};return v.jsxs(v.Fragment,{children:[v.jsx(ffe,{fullAddress:`${t.sido} ${t.sigungu} ${t.bname}`,setOpenPostcode:r}),n&&v.jsx(vfe,{autoClose:!1,defaultQuery:"",onComplete:i})]})},wfe="/assets/checkbox-checked-09593e5a.svg",bfe="/assets/checkbox-c0749045.svg",W3=ee.label`
  flex-grow: 1;
  position: relative;
  display: flex;
  align-items: center;
  flex-wrap: nowrap;
  padding: 12px 0;
  cursor: pointer;
  box-sizing: border-box;
`,Sfe=ee(W3)`
  padding: 0 0 14px;
  align-items: start;
  i {
    margin-top: 4px;
  }
`,Efe=ee.div`
  display: flex;
  label {
    flex-grow: 1;
    position: relative;
    display: flex;
    align-items: center;
    flex-wrap: nowrap;
    padding: 12px 0;
    cursor: pointer;
    box-sizing: border-box;
  }
`,_N=ee.input`
  position: absolute;
  width: 1px;
  height: 1px;
  clip: rect(0px, 0px, 0px, 0px);
  overflow: hidden;
  box-sizing: border-box;
  padding: 0px;

  &:checked + i {
    background: url(${wfe}) no-repeat;
  }

  &:focus-visible + i {
    outline-offset: 1px;
    outline: 2px solid black;
  }

  & + i {
    flex-shrink: 0;
    display: inline-block;
    width: 24px;
    height: 24px;
    background: url(${bfe}) no-repeat;
    border-radius: 50%;
  }
`,H3=ee.span`
  padding: 0 8px;
  margin-right: auto;
`,xfe=ee(H3)`
  flex-grow: 1;
  position: relative;
  font-size: 21px;
  line-height: 32px;
  font-weight: 700;

  span {
    display: block;
    margin-top: 4px;
    color: ${pl};
    font-size: 14px;
    font-weight: 400;
    line-height: 19px;
    letter-spacing: -.4px;
  }
`,Tfe=ee.button`
  position: relative;
  min-width: 80px;
  background-color: #fff;
  border: 0;
  color: ${bn};
  font-size: 14px;

  &::after {
    content: "";
    position: absolute;
    top: 50%;
    right: 6px;
    width: 5px;
    height: 5px;
    border: 1px solid ${bn};
    border-width: 1px 1px 0 0;
    transform: rotate(45deg) translateY(-50%);
  }
`,pd=({id:t,text:e,all:n,checked:r,onChange:i})=>v.jsx(v.Fragment,{children:n?v.jsxs(Sfe,{htmlFor:t,children:[v.jsx(_N,{checked:r,id:t,name:t,type:"checkbox",onChange:i}),v.jsx("i",{}),v.jsxs(xfe,{"aria-labelledby":t,children:["전체 동의합니다.",v.jsx("span",{children:"선택항목에 동의하지 않은 경우도 회원가입 및 일반적인 서비스를 이용할 수 있습니다."})]})]}):v.jsxs(Efe,{children:[v.jsxs(W3,{htmlFor:t,children:[v.jsx(_N,{checked:r,id:t,name:t,type:"checkbox",onChange:i}),v.jsx("i",{}),v.jsx(H3,{"aria-labelledby":t,children:e})]}),v.jsx(Tfe,{type:"button",children:"약관보기"})]})});function Ife(){const t=Rs(),[e]=wt(Ur),[n,r]=H.useState(!1),[i,s]=H.useState(!1),[o,a]=H.useState(!1),[l,c]=H.useState(!1),[u,d]=H.useState(!1),[h,f]=H.useState({}),[p,y]=H.useState({phoneNumber:"",email:"",password:"",confirmPassword:"",nickname:"",Agree:l?"무료배송, 할인쿠폰 등 혜택/정보 수신 동의함":""}),[w,m]=H.useState(""),[g,_]=H.useState(""),[b,x]=H.useState(""),[E,D]=H.useState(!1),S=!p.phoneNumber||!p.email||!p.password||!p.confirmPassword||!p.nickname,T=async I=>{if(I.preventDefault(),!i||!o||!u){D("필수 이용 약관에 동의하셔야합니다.");return}if((await th.where("nickname","==",p.nickname).get()).empty)_("");else{_("중복된 닉네임입니다.");return}try{const $=await af.createUserWithEmailAndPassword(p.email,p.password);let z="https://firebasestorage.googleapis.com/v0/b/potato-market-lab18.appspot.com/o/default_profile.png?alt=media&token=8d1123dc-f7dd-4439-a8e3-881b1ce4a401";b&&(z=await Rb.ref().child("profileImages/"+(new Date().getTime()+Math.random().toString(36).substr(2,5))).put(b).then(j=>j.ref.getDownloadURL()));const J=th.doc($.user.uid),P=Wi.batch();P.set(J,{email:p.email,phoneNumber:p.phoneNumber,nickname:p.nickname,profileImage:z,agree:l,location:{sido:h.sido,sigungu:h.sigungu,bname:h.bname}}),await P.commit(),D(!0)}catch($){const z=O($,i,o,u,S);D(z)}},O=(I,U,$,z,J)=>{if(J)return"모든 필수 항목을 입력해주세요.";if(!U||!$||!z)return"필수 이용 약관에 동의하셔야합니다.";switch(I.code){case"auth/user-not-found":case"auth/wrong-password":return"이메일 혹은 비밀번호가 일치하지 않습니다.";case"auth/email-already-in-use":return"이미 사용 중인 이메일입니다.";case"auth/weak-password":return"비밀번호는 6글자 이상이어야 합니다.";case"auth/network-request-failed":return"네트워크 연결에 실패 하였습니다.";case"auth/invalid-email":return"잘못된 이메일 형식입니다.";case"auth/internal-error":return"잘못된 요청입니다.";default:return"회원가입에 실패 하였습니다."}},C=I=>{y(U=>({...U,[I.target.name]:I.target.value}))},k=I=>{const U=I.target.checked;r(U),s(!!U),a(!!U),c(!!U),d(!!U)},A=I=>{s(I.target.checked),I.target.checked||r(!1)},N=I=>{a(I.target.checked),I.target.checked||r(!1)},B=I=>{c(I.target.checked),I.target.checked||r(!1);const U=af.currentUser;U&&th.doc(U.uid).update({agree:I.target.checked},{merge:!0}).catch(z=>{m(z.message)})},R=I=>{d(I.target.checked),I.target.checked||r(!1)};return v.jsx(v.Fragment,{children:e!==null?v.jsx(k_,{}):v.jsxs(Cfe,{children:[v.jsx("h2",{children:"회원가입"}),v.jsx(kfe,{onSubmit:T,children:v.jsxs("fieldset",{children:[v.jsx("legend",{children:"신규 회원가입 폼"}),v.jsxs("ul",{className:"form-list",children:[v.jsx("li",{className:"form-item",children:v.jsx(ya,{label:!0,id:"phoneNumber",placeholder:"숫자만 입력해주세요",text:"휴대폰",type:"tel",value:p.phoneNumber,onChange:C})}),v.jsx("li",{className:"form-item",children:v.jsx(ya,{label:!0,id:"email",placeholder:"이메일을 입력해주세요",text:"이메일",type:"email",value:p.email,onChange:C})}),v.jsx("li",{className:"form-item",children:v.jsx(ya,{label:!0,id:"password",placeholder:"비밀번호를 입력해주세요",text:"비밀번호",type:"password",valid:p.password&&(p.password.length<6||p.password.length>8)?"최소 6자 이상 8자 이하로 입력해주세요.":"",onChange:C})}),v.jsx("li",{className:"form-item",children:v.jsx(ya,{label:!0,id:"confirmPassword",placeholder:"비밀번호를 한번 더 입력해주세요",text:"비밀번호 확인",type:"password",valid:p.confirmPassword&&p.password!==p.confirmPassword?"비밀번호가 일치 하지 않습니다.":"",onChange:C})}),v.jsx("li",{className:"form-item",children:v.jsx(ya,{label:!0,id:"nickname",placeholder:"닉네임을 입력해주세요",text:"닉네임",type:"text",valid:g,value:p.nickname,onChange:C})}),v.jsx("li",{className:"form-item",children:v.jsx(hfe,{profileUrl:b,setProfileUrl:x})}),v.jsx("li",{className:"form-item",children:v.jsx(_fe,{location:h,setLocation:f})})]}),v.jsxs("div",{className:"term-list",children:[v.jsx("span",{className:"term-title",children:"이용약관동의"}),v.jsxs("div",{className:"term-check",children:[v.jsx(pd,{all:!0,checked:n,onChange:k}),v.jsx(pd,{checked:i,id:"term1",text:"이용약관 동의 (필수)",onChange:A}),v.jsx(pd,{checked:o,id:"term2",text:"개인정보 수집 · 이용 동의 (필수)",onChange:N}),v.jsx(pd,{checked:l,id:"term3",text:"무료배송, 할인쿠폰 등 혜택/정보 수신 동의 (선택)",value:p.agree,onChange:B}),v.jsx(pd,{checked:u,id:"term4",text:"본인은 만 14세 이상입니다. (필수)",onChange:R})]})]}),E&&v.jsx(Nb,{setShowPopup:D,showPopup:E,text:O(w,i,o,u,S)}),v.jsx($b,{primary:!0,disabled:S,type:"submit",style:{backgroundColor:S?jr:bn,pointerEvents:S?"none":"auto"},onClick:T,children:"가입하기"})]})}),E&&v.jsx(Nb,{text:"회원가입에 성공했습니다! 어서오세요!",onClose:()=>{D(!1),t("/"),window.location.reload()}})]})})}const Cfe=ee.section`
  padding: 80px 0 40px;
  h2 {
    line - height: 36px;
    font-size: 32px;
    font-weight: 500;
    text-align: center;
  }
`,kfe=ee.form`
  position: relative;
  width: 640px;
  margin: 44px auto;
  .form-list {
    display: block;
    border-top: 2px solid black;
  }
  .form-item {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    min-height: 84px;
    padding: 20px 0;
    box-sizing: border-box;
  }
  .term-list {
    display: flex;
    gap: 8px;
    padding: 12px 0 20px;
    margin-bottom: 40px;
    border-top: 1px solid black;
    border-bottom: 1px solid ${dp};
  }
  .term-title {
    flex - shrink: 0;
    width: 139px;
    font-weight: 700;
    line-height: 32px;
  }
  .term-check {
    width: 100%;
  }
  @media screen and (max-width: 700px) {
    width: calc(100% - 60px);
    margin: 44px 30px;
    .form-item {
      flex - direction: column;
    }
    .term-list {
      flex - direction: column;
    }
  }
      `;function Afe(){const[t,e]=wt(Ur);return v.jsxs(v.Fragment,{children:[v.jsx(YT,{}),t==null?v.jsx(k_,{state:"login"}):v.jsxs(Rfe,{className:"wrapper",children:[v.jsx("h2",{className:"articleTitle",children:"게시글 작성"}),v.jsx(tfe,{})]})]})}const Rfe=ee.main`
  display:flex;
  flex-flow:column;
  justify-content: center;
  align-items: center;
  width: 886px;
  margin: 0 auto;
  & .error-massage{
    font-size:32px;
    font-weight: 700;
    margin-bottom:24px;
  }
  & .button-div{
    display:flex;
    gap:12px;
  }
`,Nfe=zz([{path:"/",element:v.jsx(Wce,{}),errorElement:v.jsx(Gce,{title:"페이지에 접근할 수 없습니다."}),children:[{path:"",element:v.jsx(jue,{})},{path:"hotarticles",element:v.jsx(nde,{})},{path:"detailarticle/:id",element:v.jsx(lfe,{})},{path:"writearticle",element:v.jsx(Afe,{})},{path:"mypage",element:v.jsx(fde,{})},{path:"signin",element:v.jsx(mfe,{})},{path:"signup",element:v.jsx(Ife,{})},{path:"chat",element:v.jsx(Nue,{})}]}]);iw.createRoot(document.getElementById("root")).render(v.jsx(Uq,{children:v.jsx(Oz,{router:Nfe})}));
