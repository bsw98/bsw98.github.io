function CV(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function CS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function kV(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){if(this instanceof r){var i=[null];i.push.apply(i,arguments);var s=Function.bind.apply(e,i);return new s}return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var _={},AV={get exports(){return _},set exports(t){_=t}},Yg={},H={},RV={get exports(){return H},set exports(t){H=t}},nt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sf=Symbol.for("react.element"),NV=Symbol.for("react.portal"),PV=Symbol.for("react.fragment"),DV=Symbol.for("react.strict_mode"),OV=Symbol.for("react.profiler"),LV=Symbol.for("react.provider"),MV=Symbol.for("react.context"),FV=Symbol.for("react.forward_ref"),$V=Symbol.for("react.suspense"),UV=Symbol.for("react.memo"),jV=Symbol.for("react.lazy"),Kx=Symbol.iterator;function VV(t){return t===null||typeof t!="object"?null:(t=Kx&&t[Kx]||t["@@iterator"],typeof t=="function"?t:null)}var oN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},aN=Object.assign,lN={};function su(t,e,n){this.props=t,this.context=e,this.refs=lN,this.updater=n||oN}su.prototype.isReactComponent={};su.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};su.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function cN(){}cN.prototype=su.prototype;function kS(t,e,n){this.props=t,this.context=e,this.refs=lN,this.updater=n||oN}var AS=kS.prototype=new cN;AS.constructor=kS;aN(AS,su.prototype);AS.isPureReactComponent=!0;var Qx=Array.isArray,uN=Object.prototype.hasOwnProperty,RS={current:null},dN={key:!0,ref:!0,__self:!0,__source:!0};function hN(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)uN.call(e,r)&&!dN.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:sf,type:t,key:s,ref:o,props:i,_owner:RS.current}}function BV(t,e){return{$$typeof:sf,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function NS(t){return typeof t=="object"&&t!==null&&t.$$typeof===sf}function zV(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Yx=/\/+/g;function E_(t,e){return typeof t=="object"&&t!==null&&t.key!=null?zV(""+t.key):e.toString(36)}function Kp(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case sf:case NV:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+E_(o,0):r,Qx(i)?(n="",t!=null&&(n=t.replace(Yx,"$&/")+"/"),Kp(i,e,n,"",function(c){return c})):i!=null&&(NS(i)&&(i=BV(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Yx,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Qx(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+E_(s,a);o+=Kp(s,e,n,l,i)}else if(l=VV(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+E_(s,a++),o+=Kp(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function op(t,e,n){if(t==null)return t;var r=[],i=0;return Kp(t,r,"","",function(s){return e.call(n,s,i++)}),r}function WV(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var or={current:null},Qp={transition:null},HV={ReactCurrentDispatcher:or,ReactCurrentBatchConfig:Qp,ReactCurrentOwner:RS};nt.Children={map:op,forEach:function(t,e,n){op(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return op(t,function(){e++}),e},toArray:function(t){return op(t,function(e){return e})||[]},only:function(t){if(!NS(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};nt.Component=su;nt.Fragment=PV;nt.Profiler=OV;nt.PureComponent=kS;nt.StrictMode=DV;nt.Suspense=$V;nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HV;nt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=aN({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=RS.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)uN.call(e,l)&&!dN.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:sf,type:t.type,key:i,ref:s,props:r,_owner:o}};nt.createContext=function(t){return t={$$typeof:MV,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:LV,_context:t},t.Consumer=t};nt.createElement=hN;nt.createFactory=function(t){var e=hN.bind(null,t);return e.type=t,e};nt.createRef=function(){return{current:null}};nt.forwardRef=function(t){return{$$typeof:FV,render:t}};nt.isValidElement=NS;nt.lazy=function(t){return{$$typeof:jV,_payload:{_status:-1,_result:t},_init:WV}};nt.memo=function(t,e){return{$$typeof:UV,type:t,compare:e===void 0?null:e}};nt.startTransition=function(t){var e=Qp.transition;Qp.transition={};try{t()}finally{Qp.transition=e}};nt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};nt.useCallback=function(t,e){return or.current.useCallback(t,e)};nt.useContext=function(t){return or.current.useContext(t)};nt.useDebugValue=function(){};nt.useDeferredValue=function(t){return or.current.useDeferredValue(t)};nt.useEffect=function(t,e){return or.current.useEffect(t,e)};nt.useId=function(){return or.current.useId()};nt.useImperativeHandle=function(t,e,n){return or.current.useImperativeHandle(t,e,n)};nt.useInsertionEffect=function(t,e){return or.current.useInsertionEffect(t,e)};nt.useLayoutEffect=function(t,e){return or.current.useLayoutEffect(t,e)};nt.useMemo=function(t,e){return or.current.useMemo(t,e)};nt.useReducer=function(t,e,n){return or.current.useReducer(t,e,n)};nt.useRef=function(t){return or.current.useRef(t)};nt.useState=function(t){return or.current.useState(t)};nt.useSyncExternalStore=function(t,e,n){return or.current.useSyncExternalStore(t,e,n)};nt.useTransition=function(){return or.current.useTransition()};nt.version="18.2.0";(function(t){t.exports=nt})(RV);const Pe=CS(H),K0=CV({__proto__:null,default:Pe},[H]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GV=H,qV=Symbol.for("react.element"),KV=Symbol.for("react.fragment"),QV=Object.prototype.hasOwnProperty,YV=GV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,XV={key:!0,ref:!0,__self:!0,__source:!0};function fN(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)QV.call(e,r)&&!XV.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:qV,type:t,key:s,ref:o,props:i,_owner:YV.current}}Yg.Fragment=KV;Yg.jsx=fN;Yg.jsxs=fN;(function(t){t.exports=Yg})(AV);var Q0={},Sm={},JV={get exports(){return Sm},set exports(t){Sm=t}},jr={},Y0={},ZV={get exports(){return Y0},set exports(t){Y0=t}},pN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(j,F){var z=j.length;j.push(F);e:for(;0<z;){var Z=z-1>>>1,N=j[Z];if(0<i(N,F))j[Z]=F,j[z]=N,z=Z;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var F=j[0],z=j.pop();if(z!==F){j[0]=z;e:for(var Z=0,N=j.length,$=N>>>1;Z<$;){var L=2*(Z+1)-1,U=j[L],M=L+1,te=j[M];if(0>i(U,z))M<N&&0>i(te,U)?(j[Z]=te,j[M]=z,Z=M):(j[Z]=U,j[L]=z,Z=L);else if(M<N&&0>i(te,z))j[Z]=te,j[M]=z,Z=M;else break e}}return F}function i(j,F){var z=j.sortIndex-F.sortIndex;return z!==0?z:j.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,h=3,f=!1,p=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(j){for(var F=n(c);F!==null;){if(F.callback===null)r(c);else if(F.startTime<=j)r(c),F.sortIndex=F.expirationTime,e(l,F);else break;F=n(c)}}function b(j){if(y=!1,v(j),!p)if(n(l)!==null)p=!0,A(I);else{var F=n(c);F!==null&&x(b,F.startTime-j)}}function I(j,F){p=!1,y&&(y=!1,m(S),S=-1),f=!0;var z=h;try{for(v(F),d=n(l);d!==null&&(!(d.expirationTime>F)||j&&!C());){var Z=d.callback;if(typeof Z=="function"){d.callback=null,h=d.priorityLevel;var N=Z(d.expirationTime<=F);F=t.unstable_now(),typeof N=="function"?d.callback=N:d===n(l)&&r(l),v(F)}else r(l);d=n(l)}if(d!==null)var $=!0;else{var L=n(c);L!==null&&x(b,L.startTime-F),$=!1}return $}finally{d=null,h=z,f=!1}}var E=!1,D=null,S=-1,T=5,O=-1;function C(){return!(t.unstable_now()-O<T)}function k(){if(D!==null){var j=t.unstable_now();O=j;var F=!0;try{F=D(!0,j)}finally{F?R():(E=!1,D=null)}}else E=!1}var R;if(typeof g=="function")R=function(){g(k)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,B=P.port2;P.port1.onmessage=k,R=function(){B.postMessage(null)}}else R=function(){w(k,0)};function A(j){D=j,E||(E=!0,R())}function x(j,F){S=w(function(){j(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,A(I))},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(j){switch(h){case 1:case 2:case 3:var F=3;break;default:F=h}var z=h;h=F;try{return j()}finally{h=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(j,F){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var z=h;h=j;try{return F()}finally{h=z}},t.unstable_scheduleCallback=function(j,F,z){var Z=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?Z+z:Z):z=Z,j){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=z+N,j={id:u++,callback:F,priorityLevel:j,startTime:z,expirationTime:N,sortIndex:-1},z>Z?(j.sortIndex=z,e(c,j),n(l)===null&&j===n(c)&&(y?(m(S),S=-1):y=!0,x(b,z-Z))):(j.sortIndex=N,e(l,j),p||f||(p=!0,A(I))),j},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(j){var F=h;return function(){var z=h;h=F;try{return j.apply(this,arguments)}finally{h=z}}}})(pN);(function(t){t.exports=pN})(ZV);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mN=H,Or=Y0;function oe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gN=new Set,Xd={};function dl(t,e){Sc(t,e),Sc(t+"Capture",e)}function Sc(t,e){for(Xd[t]=e,t=0;t<e.length;t++)gN.add(e[t])}var gs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),X0=Object.prototype.hasOwnProperty,eB=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Xx={},Jx={};function tB(t){return X0.call(Jx,t)?!0:X0.call(Xx,t)?!1:eB.test(t)?Jx[t]=!0:(Xx[t]=!0,!1)}function nB(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function rB(t,e,n,r){if(e===null||typeof e>"u"||nB(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ar(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Dn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Dn[t]=new ar(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Dn[e]=new ar(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Dn[t]=new ar(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Dn[t]=new ar(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Dn[t]=new ar(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Dn[t]=new ar(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Dn[t]=new ar(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Dn[t]=new ar(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Dn[t]=new ar(t,5,!1,t.toLowerCase(),null,!1,!1)});var PS=/[\-:]([a-z])/g;function DS(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(PS,DS);Dn[e]=new ar(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(PS,DS);Dn[e]=new ar(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(PS,DS);Dn[e]=new ar(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Dn[t]=new ar(t,1,!1,t.toLowerCase(),null,!1,!1)});Dn.xlinkHref=new ar("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Dn[t]=new ar(t,1,!1,t.toLowerCase(),null,!0,!0)});function OS(t,e,n,r){var i=Dn.hasOwnProperty(e)?Dn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(rB(e,n,i,r)&&(n=null),r||i===null?tB(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Is=mN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ap=Symbol.for("react.element"),Vl=Symbol.for("react.portal"),Bl=Symbol.for("react.fragment"),LS=Symbol.for("react.strict_mode"),J0=Symbol.for("react.profiler"),yN=Symbol.for("react.provider"),vN=Symbol.for("react.context"),MS=Symbol.for("react.forward_ref"),Z0=Symbol.for("react.suspense"),ew=Symbol.for("react.suspense_list"),FS=Symbol.for("react.memo"),Vs=Symbol.for("react.lazy"),_N=Symbol.for("react.offscreen"),Zx=Symbol.iterator;function Pu(t){return t===null||typeof t!="object"?null:(t=Zx&&t[Zx]||t["@@iterator"],typeof t=="function"?t:null)}var Vt=Object.assign,T_;function ud(t){if(T_===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);T_=e&&e[1]||""}return`
`+T_+t}var x_=!1;function I_(t,e){if(!t||x_)return"";x_=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{x_=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ud(t):""}function iB(t){switch(t.tag){case 5:return ud(t.type);case 16:return ud("Lazy");case 13:return ud("Suspense");case 19:return ud("SuspenseList");case 0:case 2:case 15:return t=I_(t.type,!1),t;case 11:return t=I_(t.type.render,!1),t;case 1:return t=I_(t.type,!0),t;default:return""}}function tw(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Bl:return"Fragment";case Vl:return"Portal";case J0:return"Profiler";case LS:return"StrictMode";case Z0:return"Suspense";case ew:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case vN:return(t.displayName||"Context")+".Consumer";case yN:return(t._context.displayName||"Context")+".Provider";case MS:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case FS:return e=t.displayName||null,e!==null?e:tw(t.type)||"Memo";case Vs:e=t._payload,t=t._init;try{return tw(t(e))}catch{}}return null}function sB(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tw(e);case 8:return e===LS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function yo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function wN(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function oB(t){var e=wN(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function lp(t){t._valueTracker||(t._valueTracker=oB(t))}function SN(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=wN(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function bm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function nw(t,e){var n=e.checked;return Vt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function eI(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=yo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function bN(t,e){e=e.checked,e!=null&&OS(t,"checked",e,!1)}function rw(t,e){bN(t,e);var n=yo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?iw(t,e.type,n):e.hasOwnProperty("defaultValue")&&iw(t,e.type,yo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function tI(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function iw(t,e,n){(e!=="number"||bm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var dd=Array.isArray;function sc(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+yo(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function sw(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(oe(91));return Vt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function nI(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(oe(92));if(dd(n)){if(1<n.length)throw Error(oe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:yo(n)}}function EN(t,e){var n=yo(e.value),r=yo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function rI(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function TN(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ow(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?TN(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var cp,xN=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(cp=cp||document.createElement("div"),cp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=cp.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Jd(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Sd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},aB=["Webkit","ms","Moz","O"];Object.keys(Sd).forEach(function(t){aB.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Sd[e]=Sd[t]})});function IN(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Sd.hasOwnProperty(t)&&Sd[t]?(""+e).trim():e+"px"}function CN(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=IN(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var lB=Vt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function aw(t,e){if(e){if(lB[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(oe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(oe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(oe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(oe(62))}}function lw(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cw=null;function $S(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var uw=null,oc=null,ac=null;function iI(t){if(t=lf(t)){if(typeof uw!="function")throw Error(oe(280));var e=t.stateNode;e&&(e=ty(e),uw(t.stateNode,t.type,e))}}function kN(t){oc?ac?ac.push(t):ac=[t]:oc=t}function AN(){if(oc){var t=oc,e=ac;if(ac=oc=null,iI(t),e)for(t=0;t<e.length;t++)iI(e[t])}}function RN(t,e){return t(e)}function NN(){}var C_=!1;function PN(t,e,n){if(C_)return t(e,n);C_=!0;try{return RN(t,e,n)}finally{C_=!1,(oc!==null||ac!==null)&&(NN(),AN())}}function Zd(t,e){var n=t.stateNode;if(n===null)return null;var r=ty(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(oe(231,e,typeof n));return n}var dw=!1;if(gs)try{var Du={};Object.defineProperty(Du,"passive",{get:function(){dw=!0}}),window.addEventListener("test",Du,Du),window.removeEventListener("test",Du,Du)}catch{dw=!1}function cB(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var bd=!1,Em=null,Tm=!1,hw=null,uB={onError:function(t){bd=!0,Em=t}};function dB(t,e,n,r,i,s,o,a,l){bd=!1,Em=null,cB.apply(uB,arguments)}function hB(t,e,n,r,i,s,o,a,l){if(dB.apply(this,arguments),bd){if(bd){var c=Em;bd=!1,Em=null}else throw Error(oe(198));Tm||(Tm=!0,hw=c)}}function hl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function DN(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function sI(t){if(hl(t)!==t)throw Error(oe(188))}function fB(t){var e=t.alternate;if(!e){if(e=hl(t),e===null)throw Error(oe(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return sI(i),t;if(s===r)return sI(i),e;s=s.sibling}throw Error(oe(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(oe(189))}}if(n.alternate!==r)throw Error(oe(190))}if(n.tag!==3)throw Error(oe(188));return n.stateNode.current===n?t:e}function ON(t){return t=fB(t),t!==null?LN(t):null}function LN(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=LN(t);if(e!==null)return e;t=t.sibling}return null}var MN=Or.unstable_scheduleCallback,oI=Or.unstable_cancelCallback,pB=Or.unstable_shouldYield,mB=Or.unstable_requestPaint,Qt=Or.unstable_now,gB=Or.unstable_getCurrentPriorityLevel,US=Or.unstable_ImmediatePriority,FN=Or.unstable_UserBlockingPriority,xm=Or.unstable_NormalPriority,yB=Or.unstable_LowPriority,$N=Or.unstable_IdlePriority,Xg=null,Fi=null;function vB(t){if(Fi&&typeof Fi.onCommitFiberRoot=="function")try{Fi.onCommitFiberRoot(Xg,t,void 0,(t.current.flags&128)===128)}catch{}}var mi=Math.clz32?Math.clz32:SB,_B=Math.log,wB=Math.LN2;function SB(t){return t>>>=0,t===0?32:31-(_B(t)/wB|0)|0}var up=64,dp=4194304;function hd(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Im(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=hd(a):(s&=o,s!==0&&(r=hd(s)))}else o=n&~i,o!==0?r=hd(o):s!==0&&(r=hd(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-mi(e),i=1<<n,r|=t[n],e&=~i;return r}function bB(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function EB(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-mi(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=bB(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function fw(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function UN(){var t=up;return up<<=1,!(up&4194240)&&(up=64),t}function k_(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function of(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-mi(e),t[e]=n}function TB(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-mi(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function jS(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-mi(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var gt=0;function jN(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var VN,VS,BN,zN,WN,pw=!1,hp=[],no=null,ro=null,io=null,eh=new Map,th=new Map,Ws=[],xB="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function aI(t,e){switch(t){case"focusin":case"focusout":no=null;break;case"dragenter":case"dragleave":ro=null;break;case"mouseover":case"mouseout":io=null;break;case"pointerover":case"pointerout":eh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":th.delete(e.pointerId)}}function Ou(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=lf(e),e!==null&&VS(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function IB(t,e,n,r,i){switch(e){case"focusin":return no=Ou(no,t,e,n,r,i),!0;case"dragenter":return ro=Ou(ro,t,e,n,r,i),!0;case"mouseover":return io=Ou(io,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return eh.set(s,Ou(eh.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,th.set(s,Ou(th.get(s)||null,t,e,n,r,i)),!0}return!1}function HN(t){var e=fa(t.target);if(e!==null){var n=hl(e);if(n!==null){if(e=n.tag,e===13){if(e=DN(n),e!==null){t.blockedOn=e,WN(t.priority,function(){BN(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Yp(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=mw(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);cw=r,n.target.dispatchEvent(r),cw=null}else return e=lf(n),e!==null&&VS(e),t.blockedOn=n,!1;e.shift()}return!0}function lI(t,e,n){Yp(t)&&n.delete(e)}function CB(){pw=!1,no!==null&&Yp(no)&&(no=null),ro!==null&&Yp(ro)&&(ro=null),io!==null&&Yp(io)&&(io=null),eh.forEach(lI),th.forEach(lI)}function Lu(t,e){t.blockedOn===e&&(t.blockedOn=null,pw||(pw=!0,Or.unstable_scheduleCallback(Or.unstable_NormalPriority,CB)))}function nh(t){function e(i){return Lu(i,t)}if(0<hp.length){Lu(hp[0],t);for(var n=1;n<hp.length;n++){var r=hp[n];r.blockedOn===t&&(r.blockedOn=null)}}for(no!==null&&Lu(no,t),ro!==null&&Lu(ro,t),io!==null&&Lu(io,t),eh.forEach(e),th.forEach(e),n=0;n<Ws.length;n++)r=Ws[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ws.length&&(n=Ws[0],n.blockedOn===null);)HN(n),n.blockedOn===null&&Ws.shift()}var lc=Is.ReactCurrentBatchConfig,Cm=!0;function kB(t,e,n,r){var i=gt,s=lc.transition;lc.transition=null;try{gt=1,BS(t,e,n,r)}finally{gt=i,lc.transition=s}}function AB(t,e,n,r){var i=gt,s=lc.transition;lc.transition=null;try{gt=4,BS(t,e,n,r)}finally{gt=i,lc.transition=s}}function BS(t,e,n,r){if(Cm){var i=mw(t,e,n,r);if(i===null)$_(t,e,r,km,n),aI(t,r);else if(IB(i,t,e,n,r))r.stopPropagation();else if(aI(t,r),e&4&&-1<xB.indexOf(t)){for(;i!==null;){var s=lf(i);if(s!==null&&VN(s),s=mw(t,e,n,r),s===null&&$_(t,e,r,km,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else $_(t,e,r,null,n)}}var km=null;function mw(t,e,n,r){if(km=null,t=$S(r),t=fa(t),t!==null)if(e=hl(t),e===null)t=null;else if(n=e.tag,n===13){if(t=DN(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return km=t,null}function GN(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gB()){case US:return 1;case FN:return 4;case xm:case yB:return 16;case $N:return 536870912;default:return 16}default:return 16}}var Ks=null,zS=null,Xp=null;function qN(){if(Xp)return Xp;var t,e=zS,n=e.length,r,i="value"in Ks?Ks.value:Ks.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Xp=i.slice(t,1<r?1-r:void 0)}function Jp(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function fp(){return!0}function cI(){return!1}function Vr(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?fp:cI,this.isPropagationStopped=cI,this}return Vt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=fp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=fp)},persist:function(){},isPersistent:fp}),e}var ou={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},WS=Vr(ou),af=Vt({},ou,{view:0,detail:0}),RB=Vr(af),A_,R_,Mu,Jg=Vt({},af,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:HS,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Mu&&(Mu&&t.type==="mousemove"?(A_=t.screenX-Mu.screenX,R_=t.screenY-Mu.screenY):R_=A_=0,Mu=t),A_)},movementY:function(t){return"movementY"in t?t.movementY:R_}}),uI=Vr(Jg),NB=Vt({},Jg,{dataTransfer:0}),PB=Vr(NB),DB=Vt({},af,{relatedTarget:0}),N_=Vr(DB),OB=Vt({},ou,{animationName:0,elapsedTime:0,pseudoElement:0}),LB=Vr(OB),MB=Vt({},ou,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),FB=Vr(MB),$B=Vt({},ou,{data:0}),dI=Vr($B),UB={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jB={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},VB={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function BB(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=VB[t])?!!e[t]:!1}function HS(){return BB}var zB=Vt({},af,{key:function(t){if(t.key){var e=UB[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Jp(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?jB[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:HS,charCode:function(t){return t.type==="keypress"?Jp(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Jp(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),WB=Vr(zB),HB=Vt({},Jg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hI=Vr(HB),GB=Vt({},af,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:HS}),qB=Vr(GB),KB=Vt({},ou,{propertyName:0,elapsedTime:0,pseudoElement:0}),QB=Vr(KB),YB=Vt({},Jg,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),XB=Vr(YB),JB=[9,13,27,32],GS=gs&&"CompositionEvent"in window,Ed=null;gs&&"documentMode"in document&&(Ed=document.documentMode);var ZB=gs&&"TextEvent"in window&&!Ed,KN=gs&&(!GS||Ed&&8<Ed&&11>=Ed),fI=String.fromCharCode(32),pI=!1;function QN(t,e){switch(t){case"keyup":return JB.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function YN(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var zl=!1;function e3(t,e){switch(t){case"compositionend":return YN(e);case"keypress":return e.which!==32?null:(pI=!0,fI);case"textInput":return t=e.data,t===fI&&pI?null:t;default:return null}}function t3(t,e){if(zl)return t==="compositionend"||!GS&&QN(t,e)?(t=qN(),Xp=zS=Ks=null,zl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return KN&&e.locale!=="ko"?null:e.data;default:return null}}var n3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mI(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!n3[t.type]:e==="textarea"}function XN(t,e,n,r){kN(r),e=Am(e,"onChange"),0<e.length&&(n=new WS("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Td=null,rh=null;function r3(t){lP(t,0)}function Zg(t){var e=Gl(t);if(SN(e))return t}function i3(t,e){if(t==="change")return e}var JN=!1;if(gs){var P_;if(gs){var D_="oninput"in document;if(!D_){var gI=document.createElement("div");gI.setAttribute("oninput","return;"),D_=typeof gI.oninput=="function"}P_=D_}else P_=!1;JN=P_&&(!document.documentMode||9<document.documentMode)}function yI(){Td&&(Td.detachEvent("onpropertychange",ZN),rh=Td=null)}function ZN(t){if(t.propertyName==="value"&&Zg(rh)){var e=[];XN(e,rh,t,$S(t)),PN(r3,e)}}function s3(t,e,n){t==="focusin"?(yI(),Td=e,rh=n,Td.attachEvent("onpropertychange",ZN)):t==="focusout"&&yI()}function o3(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Zg(rh)}function a3(t,e){if(t==="click")return Zg(e)}function l3(t,e){if(t==="input"||t==="change")return Zg(e)}function c3(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vi=typeof Object.is=="function"?Object.is:c3;function ih(t,e){if(vi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!X0.call(e,i)||!vi(t[i],e[i]))return!1}return!0}function vI(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function _I(t,e){var n=vI(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=vI(n)}}function eP(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?eP(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function tP(){for(var t=window,e=bm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=bm(t.document)}return e}function qS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function u3(t){var e=tP(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&eP(n.ownerDocument.documentElement,n)){if(r!==null&&qS(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=_I(n,s);var o=_I(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var d3=gs&&"documentMode"in document&&11>=document.documentMode,Wl=null,gw=null,xd=null,yw=!1;function wI(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;yw||Wl==null||Wl!==bm(r)||(r=Wl,"selectionStart"in r&&qS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),xd&&ih(xd,r)||(xd=r,r=Am(gw,"onSelect"),0<r.length&&(e=new WS("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Wl)))}function pp(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Hl={animationend:pp("Animation","AnimationEnd"),animationiteration:pp("Animation","AnimationIteration"),animationstart:pp("Animation","AnimationStart"),transitionend:pp("Transition","TransitionEnd")},O_={},nP={};gs&&(nP=document.createElement("div").style,"AnimationEvent"in window||(delete Hl.animationend.animation,delete Hl.animationiteration.animation,delete Hl.animationstart.animation),"TransitionEvent"in window||delete Hl.transitionend.transition);function ey(t){if(O_[t])return O_[t];if(!Hl[t])return t;var e=Hl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in nP)return O_[t]=e[n];return t}var rP=ey("animationend"),iP=ey("animationiteration"),sP=ey("animationstart"),oP=ey("transitionend"),aP=new Map,SI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fo(t,e){aP.set(t,e),dl(e,[t])}for(var L_=0;L_<SI.length;L_++){var M_=SI[L_],h3=M_.toLowerCase(),f3=M_[0].toUpperCase()+M_.slice(1);Fo(h3,"on"+f3)}Fo(rP,"onAnimationEnd");Fo(iP,"onAnimationIteration");Fo(sP,"onAnimationStart");Fo("dblclick","onDoubleClick");Fo("focusin","onFocus");Fo("focusout","onBlur");Fo(oP,"onTransitionEnd");Sc("onMouseEnter",["mouseout","mouseover"]);Sc("onMouseLeave",["mouseout","mouseover"]);Sc("onPointerEnter",["pointerout","pointerover"]);Sc("onPointerLeave",["pointerout","pointerover"]);dl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));dl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));dl("onBeforeInput",["compositionend","keypress","textInput","paste"]);dl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));dl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));dl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),p3=new Set("cancel close invalid load scroll toggle".split(" ").concat(fd));function bI(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,hB(r,e,void 0,t),t.currentTarget=null}function lP(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;bI(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;bI(i,a,c),s=l}}}if(Tm)throw t=hw,Tm=!1,hw=null,t}function xt(t,e){var n=e[bw];n===void 0&&(n=e[bw]=new Set);var r=t+"__bubble";n.has(r)||(cP(e,t,2,!1),n.add(r))}function F_(t,e,n){var r=0;e&&(r|=4),cP(n,t,r,e)}var mp="_reactListening"+Math.random().toString(36).slice(2);function sh(t){if(!t[mp]){t[mp]=!0,gN.forEach(function(n){n!=="selectionchange"&&(p3.has(n)||F_(n,!1,t),F_(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[mp]||(e[mp]=!0,F_("selectionchange",!1,e))}}function cP(t,e,n,r){switch(GN(e)){case 1:var i=kB;break;case 4:i=AB;break;default:i=BS}n=i.bind(null,e,n,t),i=void 0,!dw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function $_(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=fa(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}PN(function(){var c=s,u=$S(n),d=[];e:{var h=aP.get(t);if(h!==void 0){var f=WS,p=t;switch(t){case"keypress":if(Jp(n)===0)break e;case"keydown":case"keyup":f=WB;break;case"focusin":p="focus",f=N_;break;case"focusout":p="blur",f=N_;break;case"beforeblur":case"afterblur":f=N_;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=uI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=PB;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=qB;break;case rP:case iP:case sP:f=LB;break;case oP:f=QB;break;case"scroll":f=RB;break;case"wheel":f=XB;break;case"copy":case"cut":case"paste":f=FB;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=hI}var y=(e&4)!==0,w=!y&&t==="scroll",m=y?h!==null?h+"Capture":null:h;y=[];for(var g=c,v;g!==null;){v=g;var b=v.stateNode;if(v.tag===5&&b!==null&&(v=b,m!==null&&(b=Zd(g,m),b!=null&&y.push(oh(g,b,v)))),w)break;g=g.return}0<y.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:y}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==cw&&(p=n.relatedTarget||n.fromElement)&&(fa(p)||p[ys]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=c,p=p?fa(p):null,p!==null&&(w=hl(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=c),f!==p)){if(y=uI,b="onMouseLeave",m="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(y=hI,b="onPointerLeave",m="onPointerEnter",g="pointer"),w=f==null?h:Gl(f),v=p==null?h:Gl(p),h=new y(b,g+"leave",f,n,u),h.target=w,h.relatedTarget=v,b=null,fa(u)===c&&(y=new y(m,g+"enter",p,n,u),y.target=v,y.relatedTarget=w,b=y),w=b,f&&p)t:{for(y=f,m=p,g=0,v=y;v;v=Rl(v))g++;for(v=0,b=m;b;b=Rl(b))v++;for(;0<g-v;)y=Rl(y),g--;for(;0<v-g;)m=Rl(m),v--;for(;g--;){if(y===m||m!==null&&y===m.alternate)break t;y=Rl(y),m=Rl(m)}y=null}else y=null;f!==null&&EI(d,h,f,y,!1),p!==null&&w!==null&&EI(d,w,p,y,!0)}}e:{if(h=c?Gl(c):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var I=i3;else if(mI(h))if(JN)I=l3;else{I=o3;var E=s3}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(I=a3);if(I&&(I=I(t,c))){XN(d,I,n,u);break e}E&&E(t,h,c),t==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&iw(h,"number",h.value)}switch(E=c?Gl(c):window,t){case"focusin":(mI(E)||E.contentEditable==="true")&&(Wl=E,gw=c,xd=null);break;case"focusout":xd=gw=Wl=null;break;case"mousedown":yw=!0;break;case"contextmenu":case"mouseup":case"dragend":yw=!1,wI(d,n,u);break;case"selectionchange":if(d3)break;case"keydown":case"keyup":wI(d,n,u)}var D;if(GS)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else zl?QN(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(KN&&n.locale!=="ko"&&(zl||S!=="onCompositionStart"?S==="onCompositionEnd"&&zl&&(D=qN()):(Ks=u,zS="value"in Ks?Ks.value:Ks.textContent,zl=!0)),E=Am(c,S),0<E.length&&(S=new dI(S,t,null,n,u),d.push({event:S,listeners:E}),D?S.data=D:(D=YN(n),D!==null&&(S.data=D)))),(D=ZB?e3(t,n):t3(t,n))&&(c=Am(c,"onBeforeInput"),0<c.length&&(u=new dI("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=D))}lP(d,e)})}function oh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Am(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Zd(t,n),s!=null&&r.unshift(oh(t,s,i)),s=Zd(t,e),s!=null&&r.push(oh(t,s,i))),t=t.return}return r}function Rl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function EI(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Zd(n,s),l!=null&&o.unshift(oh(n,l,a))):i||(l=Zd(n,s),l!=null&&o.push(oh(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var m3=/\r\n?/g,g3=/\u0000|\uFFFD/g;function TI(t){return(typeof t=="string"?t:""+t).replace(m3,`
`).replace(g3,"")}function gp(t,e,n){if(e=TI(e),TI(t)!==e&&n)throw Error(oe(425))}function Rm(){}var vw=null,_w=null;function ww(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Sw=typeof setTimeout=="function"?setTimeout:void 0,y3=typeof clearTimeout=="function"?clearTimeout:void 0,xI=typeof Promise=="function"?Promise:void 0,v3=typeof queueMicrotask=="function"?queueMicrotask:typeof xI<"u"?function(t){return xI.resolve(null).then(t).catch(_3)}:Sw;function _3(t){setTimeout(function(){throw t})}function U_(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),nh(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);nh(e)}function so(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function II(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var au=Math.random().toString(36).slice(2),Ii="__reactFiber$"+au,ah="__reactProps$"+au,ys="__reactContainer$"+au,bw="__reactEvents$"+au,w3="__reactListeners$"+au,S3="__reactHandles$"+au;function fa(t){var e=t[Ii];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ys]||n[Ii]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=II(t);t!==null;){if(n=t[Ii])return n;t=II(t)}return e}t=n,n=t.parentNode}return null}function lf(t){return t=t[Ii]||t[ys],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Gl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(oe(33))}function ty(t){return t[ah]||null}var Ew=[],ql=-1;function $o(t){return{current:t}}function kt(t){0>ql||(t.current=Ew[ql],Ew[ql]=null,ql--)}function Et(t,e){ql++,Ew[ql]=t.current,t.current=e}var vo={},Kn=$o(vo),vr=$o(!1),Ma=vo;function bc(t,e){var n=t.type.contextTypes;if(!n)return vo;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function _r(t){return t=t.childContextTypes,t!=null}function Nm(){kt(vr),kt(Kn)}function CI(t,e,n){if(Kn.current!==vo)throw Error(oe(168));Et(Kn,e),Et(vr,n)}function uP(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(oe(108,sB(t)||"Unknown",i));return Vt({},n,r)}function Pm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||vo,Ma=Kn.current,Et(Kn,t),Et(vr,vr.current),!0}function kI(t,e,n){var r=t.stateNode;if(!r)throw Error(oe(169));n?(t=uP(t,e,Ma),r.__reactInternalMemoizedMergedChildContext=t,kt(vr),kt(Kn),Et(Kn,t)):kt(vr),Et(vr,n)}var ns=null,ny=!1,j_=!1;function dP(t){ns===null?ns=[t]:ns.push(t)}function b3(t){ny=!0,dP(t)}function Uo(){if(!j_&&ns!==null){j_=!0;var t=0,e=gt;try{var n=ns;for(gt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ns=null,ny=!1}catch(i){throw ns!==null&&(ns=ns.slice(t+1)),MN(US,Uo),i}finally{gt=e,j_=!1}}return null}var Kl=[],Ql=0,Dm=null,Om=0,Wr=[],Hr=0,Fa=null,rs=1,is="";function ta(t,e){Kl[Ql++]=Om,Kl[Ql++]=Dm,Dm=t,Om=e}function hP(t,e,n){Wr[Hr++]=rs,Wr[Hr++]=is,Wr[Hr++]=Fa,Fa=t;var r=rs;t=is;var i=32-mi(r)-1;r&=~(1<<i),n+=1;var s=32-mi(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,rs=1<<32-mi(e)+i|n<<i|r,is=s+t}else rs=1<<s|n<<i|r,is=t}function KS(t){t.return!==null&&(ta(t,1),hP(t,1,0))}function QS(t){for(;t===Dm;)Dm=Kl[--Ql],Kl[Ql]=null,Om=Kl[--Ql],Kl[Ql]=null;for(;t===Fa;)Fa=Wr[--Hr],Wr[Hr]=null,is=Wr[--Hr],Wr[Hr]=null,rs=Wr[--Hr],Wr[Hr]=null}var Dr=null,Rr=null,Pt=!1,ui=null;function fP(t,e){var n=qr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function AI(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Dr=t,Rr=so(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Dr=t,Rr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Fa!==null?{id:rs,overflow:is}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=qr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Dr=t,Rr=null,!0):!1;default:return!1}}function Tw(t){return(t.mode&1)!==0&&(t.flags&128)===0}function xw(t){if(Pt){var e=Rr;if(e){var n=e;if(!AI(t,e)){if(Tw(t))throw Error(oe(418));e=so(n.nextSibling);var r=Dr;e&&AI(t,e)?fP(r,n):(t.flags=t.flags&-4097|2,Pt=!1,Dr=t)}}else{if(Tw(t))throw Error(oe(418));t.flags=t.flags&-4097|2,Pt=!1,Dr=t}}}function RI(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Dr=t}function yp(t){if(t!==Dr)return!1;if(!Pt)return RI(t),Pt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ww(t.type,t.memoizedProps)),e&&(e=Rr)){if(Tw(t))throw pP(),Error(oe(418));for(;e;)fP(t,e),e=so(e.nextSibling)}if(RI(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(oe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Rr=so(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Rr=null}}else Rr=Dr?so(t.stateNode.nextSibling):null;return!0}function pP(){for(var t=Rr;t;)t=so(t.nextSibling)}function Ec(){Rr=Dr=null,Pt=!1}function YS(t){ui===null?ui=[t]:ui.push(t)}var E3=Is.ReactCurrentBatchConfig;function li(t,e){if(t&&t.defaultProps){e=Vt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Lm=$o(null),Mm=null,Yl=null,XS=null;function JS(){XS=Yl=Mm=null}function ZS(t){var e=Lm.current;kt(Lm),t._currentValue=e}function Iw(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function cc(t,e){Mm=t,XS=Yl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(fr=!0),t.firstContext=null)}function Zr(t){var e=t._currentValue;if(XS!==t)if(t={context:t,memoizedValue:e,next:null},Yl===null){if(Mm===null)throw Error(oe(308));Yl=t,Mm.dependencies={lanes:0,firstContext:t}}else Yl=Yl.next=t;return e}var pa=null;function eb(t){pa===null?pa=[t]:pa.push(t)}function mP(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,eb(e)):(n.next=i.next,i.next=n),e.interleaved=n,vs(t,r)}function vs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Bs=!1;function tb(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gP(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function cs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function oo(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,lt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,vs(t,n)}return i=r.interleaved,i===null?(e.next=e,eb(r)):(e.next=i.next,i.next=e),r.interleaved=e,vs(t,n)}function Zp(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,jS(t,n)}}function NI(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Fm(t,e,n,r){var i=t.updateQueue;Bs=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,u=c=l=null,a=s;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,y=a;switch(h=e,f=n,y.tag){case 1:if(p=y.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=y.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=Vt({},d,h);break e;case 2:Bs=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ua|=o,t.lanes=o,t.memoizedState=d}}function PI(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(oe(191,i));i.call(r)}}}var yP=new mN.Component().refs;function Cw(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Vt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ry={isMounted:function(t){return(t=t._reactInternals)?hl(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=rr(),i=lo(t),s=cs(r,i);s.payload=e,n!=null&&(s.callback=n),e=oo(t,s,i),e!==null&&(gi(e,t,i,r),Zp(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=rr(),i=lo(t),s=cs(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=oo(t,s,i),e!==null&&(gi(e,t,i,r),Zp(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=rr(),r=lo(t),i=cs(n,r);i.tag=2,e!=null&&(i.callback=e),e=oo(t,i,r),e!==null&&(gi(e,t,r,n),Zp(e,t,r))}};function DI(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ih(n,r)||!ih(i,s):!0}function vP(t,e,n){var r=!1,i=vo,s=e.contextType;return typeof s=="object"&&s!==null?s=Zr(s):(i=_r(e)?Ma:Kn.current,r=e.contextTypes,s=(r=r!=null)?bc(t,i):vo),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ry,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function OI(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ry.enqueueReplaceState(e,e.state,null)}function kw(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=yP,tb(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Zr(s):(s=_r(e)?Ma:Kn.current,i.context=bc(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Cw(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ry.enqueueReplaceState(i,i.state,null),Fm(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Fu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(oe(309));var r=n.stateNode}if(!r)throw Error(oe(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===yP&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(oe(284));if(!n._owner)throw Error(oe(290,t))}return t}function vp(t,e){throw t=Object.prototype.toString.call(e),Error(oe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function LI(t){var e=t._init;return e(t._payload)}function _P(t){function e(m,g){if(t){var v=m.deletions;v===null?(m.deletions=[g],m.flags|=16):v.push(g)}}function n(m,g){if(!t)return null;for(;g!==null;)e(m,g),g=g.sibling;return null}function r(m,g){for(m=new Map;g!==null;)g.key!==null?m.set(g.key,g):m.set(g.index,g),g=g.sibling;return m}function i(m,g){return m=co(m,g),m.index=0,m.sibling=null,m}function s(m,g,v){return m.index=v,t?(v=m.alternate,v!==null?(v=v.index,v<g?(m.flags|=2,g):v):(m.flags|=2,g)):(m.flags|=1048576,g)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,g,v,b){return g===null||g.tag!==6?(g=q_(v,m.mode,b),g.return=m,g):(g=i(g,v),g.return=m,g)}function l(m,g,v,b){var I=v.type;return I===Bl?u(m,g,v.props.children,b,v.key):g!==null&&(g.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Vs&&LI(I)===g.type)?(b=i(g,v.props),b.ref=Fu(m,g,v),b.return=m,b):(b=sm(v.type,v.key,v.props,null,m.mode,b),b.ref=Fu(m,g,v),b.return=m,b)}function c(m,g,v,b){return g===null||g.tag!==4||g.stateNode.containerInfo!==v.containerInfo||g.stateNode.implementation!==v.implementation?(g=K_(v,m.mode,b),g.return=m,g):(g=i(g,v.children||[]),g.return=m,g)}function u(m,g,v,b,I){return g===null||g.tag!==7?(g=Ia(v,m.mode,b,I),g.return=m,g):(g=i(g,v),g.return=m,g)}function d(m,g,v){if(typeof g=="string"&&g!==""||typeof g=="number")return g=q_(""+g,m.mode,v),g.return=m,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case ap:return v=sm(g.type,g.key,g.props,null,m.mode,v),v.ref=Fu(m,null,g),v.return=m,v;case Vl:return g=K_(g,m.mode,v),g.return=m,g;case Vs:var b=g._init;return d(m,b(g._payload),v)}if(dd(g)||Pu(g))return g=Ia(g,m.mode,v,null),g.return=m,g;vp(m,g)}return null}function h(m,g,v,b){var I=g!==null?g.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return I!==null?null:a(m,g,""+v,b);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ap:return v.key===I?l(m,g,v,b):null;case Vl:return v.key===I?c(m,g,v,b):null;case Vs:return I=v._init,h(m,g,I(v._payload),b)}if(dd(v)||Pu(v))return I!==null?null:u(m,g,v,b,null);vp(m,v)}return null}function f(m,g,v,b,I){if(typeof b=="string"&&b!==""||typeof b=="number")return m=m.get(v)||null,a(g,m,""+b,I);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ap:return m=m.get(b.key===null?v:b.key)||null,l(g,m,b,I);case Vl:return m=m.get(b.key===null?v:b.key)||null,c(g,m,b,I);case Vs:var E=b._init;return f(m,g,v,E(b._payload),I)}if(dd(b)||Pu(b))return m=m.get(v)||null,u(g,m,b,I,null);vp(g,b)}return null}function p(m,g,v,b){for(var I=null,E=null,D=g,S=g=0,T=null;D!==null&&S<v.length;S++){D.index>S?(T=D,D=null):T=D.sibling;var O=h(m,D,v[S],b);if(O===null){D===null&&(D=T);break}t&&D&&O.alternate===null&&e(m,D),g=s(O,g,S),E===null?I=O:E.sibling=O,E=O,D=T}if(S===v.length)return n(m,D),Pt&&ta(m,S),I;if(D===null){for(;S<v.length;S++)D=d(m,v[S],b),D!==null&&(g=s(D,g,S),E===null?I=D:E.sibling=D,E=D);return Pt&&ta(m,S),I}for(D=r(m,D);S<v.length;S++)T=f(D,m,S,v[S],b),T!==null&&(t&&T.alternate!==null&&D.delete(T.key===null?S:T.key),g=s(T,g,S),E===null?I=T:E.sibling=T,E=T);return t&&D.forEach(function(C){return e(m,C)}),Pt&&ta(m,S),I}function y(m,g,v,b){var I=Pu(v);if(typeof I!="function")throw Error(oe(150));if(v=I.call(v),v==null)throw Error(oe(151));for(var E=I=null,D=g,S=g=0,T=null,O=v.next();D!==null&&!O.done;S++,O=v.next()){D.index>S?(T=D,D=null):T=D.sibling;var C=h(m,D,O.value,b);if(C===null){D===null&&(D=T);break}t&&D&&C.alternate===null&&e(m,D),g=s(C,g,S),E===null?I=C:E.sibling=C,E=C,D=T}if(O.done)return n(m,D),Pt&&ta(m,S),I;if(D===null){for(;!O.done;S++,O=v.next())O=d(m,O.value,b),O!==null&&(g=s(O,g,S),E===null?I=O:E.sibling=O,E=O);return Pt&&ta(m,S),I}for(D=r(m,D);!O.done;S++,O=v.next())O=f(D,m,S,O.value,b),O!==null&&(t&&O.alternate!==null&&D.delete(O.key===null?S:O.key),g=s(O,g,S),E===null?I=O:E.sibling=O,E=O);return t&&D.forEach(function(k){return e(m,k)}),Pt&&ta(m,S),I}function w(m,g,v,b){if(typeof v=="object"&&v!==null&&v.type===Bl&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case ap:e:{for(var I=v.key,E=g;E!==null;){if(E.key===I){if(I=v.type,I===Bl){if(E.tag===7){n(m,E.sibling),g=i(E,v.props.children),g.return=m,m=g;break e}}else if(E.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Vs&&LI(I)===E.type){n(m,E.sibling),g=i(E,v.props),g.ref=Fu(m,E,v),g.return=m,m=g;break e}n(m,E);break}else e(m,E);E=E.sibling}v.type===Bl?(g=Ia(v.props.children,m.mode,b,v.key),g.return=m,m=g):(b=sm(v.type,v.key,v.props,null,m.mode,b),b.ref=Fu(m,g,v),b.return=m,m=b)}return o(m);case Vl:e:{for(E=v.key;g!==null;){if(g.key===E)if(g.tag===4&&g.stateNode.containerInfo===v.containerInfo&&g.stateNode.implementation===v.implementation){n(m,g.sibling),g=i(g,v.children||[]),g.return=m,m=g;break e}else{n(m,g);break}else e(m,g);g=g.sibling}g=K_(v,m.mode,b),g.return=m,m=g}return o(m);case Vs:return E=v._init,w(m,g,E(v._payload),b)}if(dd(v))return p(m,g,v,b);if(Pu(v))return y(m,g,v,b);vp(m,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,g!==null&&g.tag===6?(n(m,g.sibling),g=i(g,v),g.return=m,m=g):(n(m,g),g=q_(v,m.mode,b),g.return=m,m=g),o(m)):n(m,g)}return w}var Tc=_P(!0),wP=_P(!1),cf={},$i=$o(cf),lh=$o(cf),ch=$o(cf);function ma(t){if(t===cf)throw Error(oe(174));return t}function nb(t,e){switch(Et(ch,e),Et(lh,t),Et($i,cf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ow(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ow(e,t)}kt($i),Et($i,e)}function xc(){kt($i),kt(lh),kt(ch)}function SP(t){ma(ch.current);var e=ma($i.current),n=ow(e,t.type);e!==n&&(Et(lh,t),Et($i,n))}function rb(t){lh.current===t&&(kt($i),kt(lh))}var $t=$o(0);function $m(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var V_=[];function ib(){for(var t=0;t<V_.length;t++)V_[t]._workInProgressVersionPrimary=null;V_.length=0}var em=Is.ReactCurrentDispatcher,B_=Is.ReactCurrentBatchConfig,$a=0,jt=null,nn=null,dn=null,Um=!1,Id=!1,uh=0,T3=0;function $n(){throw Error(oe(321))}function sb(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!vi(t[n],e[n]))return!1;return!0}function ob(t,e,n,r,i,s){if($a=s,jt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,em.current=t===null||t.memoizedState===null?k3:A3,t=n(r,i),Id){s=0;do{if(Id=!1,uh=0,25<=s)throw Error(oe(301));s+=1,dn=nn=null,e.updateQueue=null,em.current=R3,t=n(r,i)}while(Id)}if(em.current=jm,e=nn!==null&&nn.next!==null,$a=0,dn=nn=jt=null,Um=!1,e)throw Error(oe(300));return t}function ab(){var t=uh!==0;return uh=0,t}function Ti(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dn===null?jt.memoizedState=dn=t:dn=dn.next=t,dn}function ei(){if(nn===null){var t=jt.alternate;t=t!==null?t.memoizedState:null}else t=nn.next;var e=dn===null?jt.memoizedState:dn.next;if(e!==null)dn=e,nn=t;else{if(t===null)throw Error(oe(310));nn=t,t={memoizedState:nn.memoizedState,baseState:nn.baseState,baseQueue:nn.baseQueue,queue:nn.queue,next:null},dn===null?jt.memoizedState=dn=t:dn=dn.next=t}return dn}function dh(t,e){return typeof e=="function"?e(t):e}function z_(t){var e=ei(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var r=nn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if(($a&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,jt.lanes|=u,Ua|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,vi(r,e.memoizedState)||(fr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,jt.lanes|=s,Ua|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function W_(t){var e=ei(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);vi(s,e.memoizedState)||(fr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function bP(){}function EP(t,e){var n=jt,r=ei(),i=e(),s=!vi(r.memoizedState,i);if(s&&(r.memoizedState=i,fr=!0),r=r.queue,lb(IP.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||dn!==null&&dn.memoizedState.tag&1){if(n.flags|=2048,hh(9,xP.bind(null,n,r,i,e),void 0,null),yn===null)throw Error(oe(349));$a&30||TP(n,e,i)}return i}function TP(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=jt.updateQueue,e===null?(e={lastEffect:null,stores:null},jt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function xP(t,e,n,r){e.value=n,e.getSnapshot=r,CP(e)&&kP(t)}function IP(t,e,n){return n(function(){CP(e)&&kP(t)})}function CP(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!vi(t,n)}catch{return!0}}function kP(t){var e=vs(t,1);e!==null&&gi(e,t,1,-1)}function MI(t){var e=Ti();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:dh,lastRenderedState:t},e.queue=t,t=t.dispatch=C3.bind(null,jt,t),[e.memoizedState,t]}function hh(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=jt.updateQueue,e===null?(e={lastEffect:null,stores:null},jt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function AP(){return ei().memoizedState}function tm(t,e,n,r){var i=Ti();jt.flags|=t,i.memoizedState=hh(1|e,n,void 0,r===void 0?null:r)}function iy(t,e,n,r){var i=ei();r=r===void 0?null:r;var s=void 0;if(nn!==null){var o=nn.memoizedState;if(s=o.destroy,r!==null&&sb(r,o.deps)){i.memoizedState=hh(e,n,s,r);return}}jt.flags|=t,i.memoizedState=hh(1|e,n,s,r)}function FI(t,e){return tm(8390656,8,t,e)}function lb(t,e){return iy(2048,8,t,e)}function RP(t,e){return iy(4,2,t,e)}function NP(t,e){return iy(4,4,t,e)}function PP(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function DP(t,e,n){return n=n!=null?n.concat([t]):null,iy(4,4,PP.bind(null,e,t),n)}function cb(){}function OP(t,e){var n=ei();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sb(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function LP(t,e){var n=ei();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sb(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function MP(t,e,n){return $a&21?(vi(n,e)||(n=UN(),jt.lanes|=n,Ua|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,fr=!0),t.memoizedState=n)}function x3(t,e){var n=gt;gt=n!==0&&4>n?n:4,t(!0);var r=B_.transition;B_.transition={};try{t(!1),e()}finally{gt=n,B_.transition=r}}function FP(){return ei().memoizedState}function I3(t,e,n){var r=lo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$P(t))UP(e,n);else if(n=mP(t,e,n,r),n!==null){var i=rr();gi(n,t,r,i),jP(n,e,r)}}function C3(t,e,n){var r=lo(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($P(t))UP(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,vi(a,o)){var l=e.interleaved;l===null?(i.next=i,eb(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=mP(t,e,i,r),n!==null&&(i=rr(),gi(n,t,r,i),jP(n,e,r))}}function $P(t){var e=t.alternate;return t===jt||e!==null&&e===jt}function UP(t,e){Id=Um=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function jP(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,jS(t,n)}}var jm={readContext:Zr,useCallback:$n,useContext:$n,useEffect:$n,useImperativeHandle:$n,useInsertionEffect:$n,useLayoutEffect:$n,useMemo:$n,useReducer:$n,useRef:$n,useState:$n,useDebugValue:$n,useDeferredValue:$n,useTransition:$n,useMutableSource:$n,useSyncExternalStore:$n,useId:$n,unstable_isNewReconciler:!1},k3={readContext:Zr,useCallback:function(t,e){return Ti().memoizedState=[t,e===void 0?null:e],t},useContext:Zr,useEffect:FI,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,tm(4194308,4,PP.bind(null,e,t),n)},useLayoutEffect:function(t,e){return tm(4194308,4,t,e)},useInsertionEffect:function(t,e){return tm(4,2,t,e)},useMemo:function(t,e){var n=Ti();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ti();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=I3.bind(null,jt,t),[r.memoizedState,t]},useRef:function(t){var e=Ti();return t={current:t},e.memoizedState=t},useState:MI,useDebugValue:cb,useDeferredValue:function(t){return Ti().memoizedState=t},useTransition:function(){var t=MI(!1),e=t[0];return t=x3.bind(null,t[1]),Ti().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=jt,i=Ti();if(Pt){if(n===void 0)throw Error(oe(407));n=n()}else{if(n=e(),yn===null)throw Error(oe(349));$a&30||TP(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,FI(IP.bind(null,r,s,t),[t]),r.flags|=2048,hh(9,xP.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Ti(),e=yn.identifierPrefix;if(Pt){var n=is,r=rs;n=(r&~(1<<32-mi(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=uh++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=T3++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},A3={readContext:Zr,useCallback:OP,useContext:Zr,useEffect:lb,useImperativeHandle:DP,useInsertionEffect:RP,useLayoutEffect:NP,useMemo:LP,useReducer:z_,useRef:AP,useState:function(){return z_(dh)},useDebugValue:cb,useDeferredValue:function(t){var e=ei();return MP(e,nn.memoizedState,t)},useTransition:function(){var t=z_(dh)[0],e=ei().memoizedState;return[t,e]},useMutableSource:bP,useSyncExternalStore:EP,useId:FP,unstable_isNewReconciler:!1},R3={readContext:Zr,useCallback:OP,useContext:Zr,useEffect:lb,useImperativeHandle:DP,useInsertionEffect:RP,useLayoutEffect:NP,useMemo:LP,useReducer:W_,useRef:AP,useState:function(){return W_(dh)},useDebugValue:cb,useDeferredValue:function(t){var e=ei();return nn===null?e.memoizedState=t:MP(e,nn.memoizedState,t)},useTransition:function(){var t=W_(dh)[0],e=ei().memoizedState;return[t,e]},useMutableSource:bP,useSyncExternalStore:EP,useId:FP,unstable_isNewReconciler:!1};function Ic(t,e){try{var n="",r=e;do n+=iB(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function H_(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Aw(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var N3=typeof WeakMap=="function"?WeakMap:Map;function VP(t,e,n){n=cs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Bm||(Bm=!0,Uw=r),Aw(t,e)},n}function BP(t,e,n){n=cs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Aw(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Aw(t,e),typeof r!="function"&&(ao===null?ao=new Set([this]):ao.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function $I(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new N3;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=H3.bind(null,t,e,n),e.then(t,t))}function UI(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function jI(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=cs(-1,1),e.tag=2,oo(n,e,1))),n.lanes|=1),t)}var P3=Is.ReactCurrentOwner,fr=!1;function Jn(t,e,n,r){e.child=t===null?wP(e,null,n,r):Tc(e,t.child,n,r)}function VI(t,e,n,r,i){n=n.render;var s=e.ref;return cc(e,i),r=ob(t,e,n,r,s,i),n=ab(),t!==null&&!fr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,_s(t,e,i)):(Pt&&n&&KS(e),e.flags|=1,Jn(t,e,r,i),e.child)}function BI(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!yb(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,zP(t,e,s,r,i)):(t=sm(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ih,n(o,r)&&t.ref===e.ref)return _s(t,e,i)}return e.flags|=1,t=co(s,r),t.ref=e.ref,t.return=e,e.child=t}function zP(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ih(s,r)&&t.ref===e.ref)if(fr=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(fr=!0);else return e.lanes=t.lanes,_s(t,e,i)}return Rw(t,e,n,r,i)}function WP(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Et(Jl,Cr),Cr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Et(Jl,Cr),Cr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Et(Jl,Cr),Cr|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Et(Jl,Cr),Cr|=r;return Jn(t,e,i,n),e.child}function HP(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Rw(t,e,n,r,i){var s=_r(n)?Ma:Kn.current;return s=bc(e,s),cc(e,i),n=ob(t,e,n,r,s,i),r=ab(),t!==null&&!fr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,_s(t,e,i)):(Pt&&r&&KS(e),e.flags|=1,Jn(t,e,n,i),e.child)}function zI(t,e,n,r,i){if(_r(n)){var s=!0;Pm(e)}else s=!1;if(cc(e,i),e.stateNode===null)nm(t,e),vP(e,n,r),kw(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Zr(c):(c=_r(n)?Ma:Kn.current,c=bc(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&OI(e,o,r,c),Bs=!1;var h=e.memoizedState;o.state=h,Fm(e,r,o,i),l=e.memoizedState,a!==r||h!==l||vr.current||Bs?(typeof u=="function"&&(Cw(e,n,u,r),l=e.memoizedState),(a=Bs||DI(e,n,a,r,h,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,gP(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:li(e.type,a),o.props=c,d=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Zr(l):(l=_r(n)?Ma:Kn.current,l=bc(e,l));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&OI(e,o,r,l),Bs=!1,h=e.memoizedState,o.state=h,Fm(e,r,o,i);var p=e.memoizedState;a!==d||h!==p||vr.current||Bs?(typeof f=="function"&&(Cw(e,n,f,r),p=e.memoizedState),(c=Bs||DI(e,n,c,r,h,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return Nw(t,e,n,r,s,i)}function Nw(t,e,n,r,i,s){HP(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&kI(e,n,!1),_s(t,e,s);r=e.stateNode,P3.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Tc(e,t.child,null,s),e.child=Tc(e,null,a,s)):Jn(t,e,a,s),e.memoizedState=r.state,i&&kI(e,n,!0),e.child}function GP(t){var e=t.stateNode;e.pendingContext?CI(t,e.pendingContext,e.pendingContext!==e.context):e.context&&CI(t,e.context,!1),nb(t,e.containerInfo)}function WI(t,e,n,r,i){return Ec(),YS(i),e.flags|=256,Jn(t,e,n,r),e.child}var Pw={dehydrated:null,treeContext:null,retryLane:0};function Dw(t){return{baseLanes:t,cachePool:null,transitions:null}}function qP(t,e,n){var r=e.pendingProps,i=$t.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Et($t,i&1),t===null)return xw(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ay(o,r,0,null),t=Ia(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Dw(n),e.memoizedState=Pw,t):ub(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return D3(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=co(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=co(a,s):(s=Ia(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Dw(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Pw,r}return s=t.child,t=s.sibling,r=co(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ub(t,e){return e=ay({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function _p(t,e,n,r){return r!==null&&YS(r),Tc(e,t.child,null,n),t=ub(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function D3(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=H_(Error(oe(422))),_p(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=ay({mode:"visible",children:r.children},i,0,null),s=Ia(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Tc(e,t.child,null,o),e.child.memoizedState=Dw(o),e.memoizedState=Pw,s);if(!(e.mode&1))return _p(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(oe(419)),r=H_(s,r,void 0),_p(t,e,o,r)}if(a=(o&t.childLanes)!==0,fr||a){if(r=yn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,vs(t,i),gi(r,t,i,-1))}return gb(),r=H_(Error(oe(421))),_p(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=G3.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Rr=so(i.nextSibling),Dr=e,Pt=!0,ui=null,t!==null&&(Wr[Hr++]=rs,Wr[Hr++]=is,Wr[Hr++]=Fa,rs=t.id,is=t.overflow,Fa=e),e=ub(e,r.children),e.flags|=4096,e)}function HI(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Iw(t.return,e,n)}function G_(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function KP(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Jn(t,e,r.children,n),r=$t.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&HI(t,n,e);else if(t.tag===19)HI(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Et($t,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&$m(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),G_(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&$m(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}G_(e,!0,n,null,s);break;case"together":G_(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function nm(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function _s(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ua|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(oe(153));if(e.child!==null){for(t=e.child,n=co(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=co(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function O3(t,e,n){switch(e.tag){case 3:GP(e),Ec();break;case 5:SP(e);break;case 1:_r(e.type)&&Pm(e);break;case 4:nb(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Et(Lm,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Et($t,$t.current&1),e.flags|=128,null):n&e.child.childLanes?qP(t,e,n):(Et($t,$t.current&1),t=_s(t,e,n),t!==null?t.sibling:null);Et($t,$t.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return KP(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Et($t,$t.current),r)break;return null;case 22:case 23:return e.lanes=0,WP(t,e,n)}return _s(t,e,n)}var QP,Ow,YP,XP;QP=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ow=function(){};YP=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ma($i.current);var s=null;switch(n){case"input":i=nw(t,i),r=nw(t,r),s=[];break;case"select":i=Vt({},i,{value:void 0}),r=Vt({},r,{value:void 0}),s=[];break;case"textarea":i=sw(t,i),r=sw(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Rm)}aw(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Xd.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Xd.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&xt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};XP=function(t,e,n,r){n!==r&&(e.flags|=4)};function $u(t,e){if(!Pt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Un(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function L3(t,e,n){var r=e.pendingProps;switch(QS(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Un(e),null;case 1:return _r(e.type)&&Nm(),Un(e),null;case 3:return r=e.stateNode,xc(),kt(vr),kt(Kn),ib(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(yp(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ui!==null&&(Bw(ui),ui=null))),Ow(t,e),Un(e),null;case 5:rb(e);var i=ma(ch.current);if(n=e.type,t!==null&&e.stateNode!=null)YP(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(oe(166));return Un(e),null}if(t=ma($i.current),yp(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Ii]=e,r[ah]=s,t=(e.mode&1)!==0,n){case"dialog":xt("cancel",r),xt("close",r);break;case"iframe":case"object":case"embed":xt("load",r);break;case"video":case"audio":for(i=0;i<fd.length;i++)xt(fd[i],r);break;case"source":xt("error",r);break;case"img":case"image":case"link":xt("error",r),xt("load",r);break;case"details":xt("toggle",r);break;case"input":eI(r,s),xt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},xt("invalid",r);break;case"textarea":nI(r,s),xt("invalid",r)}aw(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&gp(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&gp(r.textContent,a,t),i=["children",""+a]):Xd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&xt("scroll",r)}switch(n){case"input":lp(r),tI(r,s,!0);break;case"textarea":lp(r),rI(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Rm)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=TN(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Ii]=e,t[ah]=r,QP(t,e,!1,!1),e.stateNode=t;e:{switch(o=lw(n,r),n){case"dialog":xt("cancel",t),xt("close",t),i=r;break;case"iframe":case"object":case"embed":xt("load",t),i=r;break;case"video":case"audio":for(i=0;i<fd.length;i++)xt(fd[i],t);i=r;break;case"source":xt("error",t),i=r;break;case"img":case"image":case"link":xt("error",t),xt("load",t),i=r;break;case"details":xt("toggle",t),i=r;break;case"input":eI(t,r),i=nw(t,r),xt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Vt({},r,{value:void 0}),xt("invalid",t);break;case"textarea":nI(t,r),i=sw(t,r),xt("invalid",t);break;default:i=r}aw(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?CN(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&xN(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Jd(t,l):typeof l=="number"&&Jd(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Xd.hasOwnProperty(s)?l!=null&&s==="onScroll"&&xt("scroll",t):l!=null&&OS(t,s,l,o))}switch(n){case"input":lp(t),tI(t,r,!1);break;case"textarea":lp(t),rI(t);break;case"option":r.value!=null&&t.setAttribute("value",""+yo(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?sc(t,!!r.multiple,s,!1):r.defaultValue!=null&&sc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Rm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Un(e),null;case 6:if(t&&e.stateNode!=null)XP(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(oe(166));if(n=ma(ch.current),ma($i.current),yp(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ii]=e,(s=r.nodeValue!==n)&&(t=Dr,t!==null))switch(t.tag){case 3:gp(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&gp(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ii]=e,e.stateNode=r}return Un(e),null;case 13:if(kt($t),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Pt&&Rr!==null&&e.mode&1&&!(e.flags&128))pP(),Ec(),e.flags|=98560,s=!1;else if(s=yp(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(oe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(oe(317));s[Ii]=e}else Ec(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Un(e),s=!1}else ui!==null&&(Bw(ui),ui=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||$t.current&1?on===0&&(on=3):gb())),e.updateQueue!==null&&(e.flags|=4),Un(e),null);case 4:return xc(),Ow(t,e),t===null&&sh(e.stateNode.containerInfo),Un(e),null;case 10:return ZS(e.type._context),Un(e),null;case 17:return _r(e.type)&&Nm(),Un(e),null;case 19:if(kt($t),s=e.memoizedState,s===null)return Un(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)$u(s,!1);else{if(on!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=$m(t),o!==null){for(e.flags|=128,$u(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Et($t,$t.current&1|2),e.child}t=t.sibling}s.tail!==null&&Qt()>Cc&&(e.flags|=128,r=!0,$u(s,!1),e.lanes=4194304)}else{if(!r)if(t=$m(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),$u(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Pt)return Un(e),null}else 2*Qt()-s.renderingStartTime>Cc&&n!==1073741824&&(e.flags|=128,r=!0,$u(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Qt(),e.sibling=null,n=$t.current,Et($t,r?n&1|2:n&1),e):(Un(e),null);case 22:case 23:return mb(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Cr&1073741824&&(Un(e),e.subtreeFlags&6&&(e.flags|=8192)):Un(e),null;case 24:return null;case 25:return null}throw Error(oe(156,e.tag))}function M3(t,e){switch(QS(e),e.tag){case 1:return _r(e.type)&&Nm(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xc(),kt(vr),kt(Kn),ib(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return rb(e),null;case 13:if(kt($t),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(oe(340));Ec()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return kt($t),null;case 4:return xc(),null;case 10:return ZS(e.type._context),null;case 22:case 23:return mb(),null;case 24:return null;default:return null}}var wp=!1,Vn=!1,F3=typeof WeakSet=="function"?WeakSet:Set,Te=null;function Xl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Wt(t,e,r)}else n.current=null}function Lw(t,e,n){try{n()}catch(r){Wt(t,e,r)}}var GI=!1;function $3(t,e){if(vw=Cm,t=tP(),qS(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++c===i&&(a=o),h===s&&++u===r&&(l=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(_w={focusedElem:t,selectionRange:n},Cm=!1,Te=e;Te!==null;)if(e=Te,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Te=t;else for(;Te!==null;){e=Te;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var y=p.memoizedProps,w=p.memoizedState,m=e.stateNode,g=m.getSnapshotBeforeUpdate(e.elementType===e.type?y:li(e.type,y),w);m.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(oe(163))}}catch(b){Wt(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,Te=t;break}Te=e.return}return p=GI,GI=!1,p}function Cd(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Lw(e,n,s)}i=i.next}while(i!==r)}}function sy(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Mw(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function JP(t){var e=t.alternate;e!==null&&(t.alternate=null,JP(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ii],delete e[ah],delete e[bw],delete e[w3],delete e[S3])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ZP(t){return t.tag===5||t.tag===3||t.tag===4}function qI(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ZP(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Fw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Rm));else if(r!==4&&(t=t.child,t!==null))for(Fw(t,e,n),t=t.sibling;t!==null;)Fw(t,e,n),t=t.sibling}function $w(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for($w(t,e,n),t=t.sibling;t!==null;)$w(t,e,n),t=t.sibling}var Cn=null,ci=!1;function Ms(t,e,n){for(n=n.child;n!==null;)eD(t,e,n),n=n.sibling}function eD(t,e,n){if(Fi&&typeof Fi.onCommitFiberUnmount=="function")try{Fi.onCommitFiberUnmount(Xg,n)}catch{}switch(n.tag){case 5:Vn||Xl(n,e);case 6:var r=Cn,i=ci;Cn=null,Ms(t,e,n),Cn=r,ci=i,Cn!==null&&(ci?(t=Cn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Cn.removeChild(n.stateNode));break;case 18:Cn!==null&&(ci?(t=Cn,n=n.stateNode,t.nodeType===8?U_(t.parentNode,n):t.nodeType===1&&U_(t,n),nh(t)):U_(Cn,n.stateNode));break;case 4:r=Cn,i=ci,Cn=n.stateNode.containerInfo,ci=!0,Ms(t,e,n),Cn=r,ci=i;break;case 0:case 11:case 14:case 15:if(!Vn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Lw(n,e,o),i=i.next}while(i!==r)}Ms(t,e,n);break;case 1:if(!Vn&&(Xl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Wt(n,e,a)}Ms(t,e,n);break;case 21:Ms(t,e,n);break;case 22:n.mode&1?(Vn=(r=Vn)||n.memoizedState!==null,Ms(t,e,n),Vn=r):Ms(t,e,n);break;default:Ms(t,e,n)}}function KI(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new F3),e.forEach(function(r){var i=q3.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ii(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Cn=a.stateNode,ci=!1;break e;case 3:Cn=a.stateNode.containerInfo,ci=!0;break e;case 4:Cn=a.stateNode.containerInfo,ci=!0;break e}a=a.return}if(Cn===null)throw Error(oe(160));eD(s,o,i),Cn=null,ci=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Wt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)tD(e,t),e=e.sibling}function tD(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ii(e,t),bi(t),r&4){try{Cd(3,t,t.return),sy(3,t)}catch(y){Wt(t,t.return,y)}try{Cd(5,t,t.return)}catch(y){Wt(t,t.return,y)}}break;case 1:ii(e,t),bi(t),r&512&&n!==null&&Xl(n,n.return);break;case 5:if(ii(e,t),bi(t),r&512&&n!==null&&Xl(n,n.return),t.flags&32){var i=t.stateNode;try{Jd(i,"")}catch(y){Wt(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&bN(i,s),lw(a,o);var c=lw(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?CN(i,d):u==="dangerouslySetInnerHTML"?xN(i,d):u==="children"?Jd(i,d):OS(i,u,d,c)}switch(a){case"input":rw(i,s);break;case"textarea":EN(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?sc(i,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?sc(i,!!s.multiple,s.defaultValue,!0):sc(i,!!s.multiple,s.multiple?[]:"",!1))}i[ah]=s}catch(y){Wt(t,t.return,y)}}break;case 6:if(ii(e,t),bi(t),r&4){if(t.stateNode===null)throw Error(oe(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(y){Wt(t,t.return,y)}}break;case 3:if(ii(e,t),bi(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{nh(e.containerInfo)}catch(y){Wt(t,t.return,y)}break;case 4:ii(e,t),bi(t);break;case 13:ii(e,t),bi(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(fb=Qt())),r&4&&KI(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Vn=(c=Vn)||u,ii(e,t),Vn=c):ii(e,t),bi(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Te=t,u=t.child;u!==null;){for(d=Te=u;Te!==null;){switch(h=Te,f=h.child,h.tag){case 0:case 11:case 14:case 15:Cd(4,h,h.return);break;case 1:Xl(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(y){Wt(r,n,y)}}break;case 5:Xl(h,h.return);break;case 22:if(h.memoizedState!==null){YI(d);continue}}f!==null?(f.return=h,Te=f):YI(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=IN("display",o))}catch(y){Wt(t,t.return,y)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(y){Wt(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ii(e,t),bi(t),r&4&&KI(t);break;case 21:break;default:ii(e,t),bi(t)}}function bi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ZP(n)){var r=n;break e}n=n.return}throw Error(oe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Jd(i,""),r.flags&=-33);var s=qI(t);$w(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=qI(t);Fw(t,a,o);break;default:throw Error(oe(161))}}catch(l){Wt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function U3(t,e,n){Te=t,nD(t)}function nD(t,e,n){for(var r=(t.mode&1)!==0;Te!==null;){var i=Te,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||wp;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Vn;a=wp;var c=Vn;if(wp=o,(Vn=l)&&!c)for(Te=i;Te!==null;)o=Te,l=o.child,o.tag===22&&o.memoizedState!==null?XI(i):l!==null?(l.return=o,Te=l):XI(i);for(;s!==null;)Te=s,nD(s),s=s.sibling;Te=i,wp=a,Vn=c}QI(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Te=s):QI(t)}}function QI(t){for(;Te!==null;){var e=Te;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Vn||sy(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Vn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:li(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&PI(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}PI(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&nh(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(oe(163))}Vn||e.flags&512&&Mw(e)}catch(h){Wt(e,e.return,h)}}if(e===t){Te=null;break}if(n=e.sibling,n!==null){n.return=e.return,Te=n;break}Te=e.return}}function YI(t){for(;Te!==null;){var e=Te;if(e===t){Te=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Te=n;break}Te=e.return}}function XI(t){for(;Te!==null;){var e=Te;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{sy(4,e)}catch(l){Wt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Wt(e,i,l)}}var s=e.return;try{Mw(e)}catch(l){Wt(e,s,l)}break;case 5:var o=e.return;try{Mw(e)}catch(l){Wt(e,o,l)}}}catch(l){Wt(e,e.return,l)}if(e===t){Te=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Te=a;break}Te=e.return}}var j3=Math.ceil,Vm=Is.ReactCurrentDispatcher,db=Is.ReactCurrentOwner,Jr=Is.ReactCurrentBatchConfig,lt=0,yn=null,tn=null,Rn=0,Cr=0,Jl=$o(0),on=0,fh=null,Ua=0,oy=0,hb=0,kd=null,ur=null,fb=0,Cc=1/0,Zi=null,Bm=!1,Uw=null,ao=null,Sp=!1,Qs=null,zm=0,Ad=0,jw=null,rm=-1,im=0;function rr(){return lt&6?Qt():rm!==-1?rm:rm=Qt()}function lo(t){return t.mode&1?lt&2&&Rn!==0?Rn&-Rn:E3.transition!==null?(im===0&&(im=UN()),im):(t=gt,t!==0||(t=window.event,t=t===void 0?16:GN(t.type)),t):1}function gi(t,e,n,r){if(50<Ad)throw Ad=0,jw=null,Error(oe(185));of(t,n,r),(!(lt&2)||t!==yn)&&(t===yn&&(!(lt&2)&&(oy|=n),on===4&&Hs(t,Rn)),wr(t,r),n===1&&lt===0&&!(e.mode&1)&&(Cc=Qt()+500,ny&&Uo()))}function wr(t,e){var n=t.callbackNode;EB(t,e);var r=Im(t,t===yn?Rn:0);if(r===0)n!==null&&oI(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&oI(n),e===1)t.tag===0?b3(JI.bind(null,t)):dP(JI.bind(null,t)),v3(function(){!(lt&6)&&Uo()}),n=null;else{switch(jN(r)){case 1:n=US;break;case 4:n=FN;break;case 16:n=xm;break;case 536870912:n=$N;break;default:n=xm}n=uD(n,rD.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function rD(t,e){if(rm=-1,im=0,lt&6)throw Error(oe(327));var n=t.callbackNode;if(uc()&&t.callbackNode!==n)return null;var r=Im(t,t===yn?Rn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Wm(t,r);else{e=r;var i=lt;lt|=2;var s=sD();(yn!==t||Rn!==e)&&(Zi=null,Cc=Qt()+500,xa(t,e));do try{z3();break}catch(a){iD(t,a)}while(1);JS(),Vm.current=s,lt=i,tn!==null?e=0:(yn=null,Rn=0,e=on)}if(e!==0){if(e===2&&(i=fw(t),i!==0&&(r=i,e=Vw(t,i))),e===1)throw n=fh,xa(t,0),Hs(t,r),wr(t,Qt()),n;if(e===6)Hs(t,r);else{if(i=t.current.alternate,!(r&30)&&!V3(i)&&(e=Wm(t,r),e===2&&(s=fw(t),s!==0&&(r=s,e=Vw(t,s))),e===1))throw n=fh,xa(t,0),Hs(t,r),wr(t,Qt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(oe(345));case 2:na(t,ur,Zi);break;case 3:if(Hs(t,r),(r&130023424)===r&&(e=fb+500-Qt(),10<e)){if(Im(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){rr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Sw(na.bind(null,t,ur,Zi),e);break}na(t,ur,Zi);break;case 4:if(Hs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-mi(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Qt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*j3(r/1960))-r,10<r){t.timeoutHandle=Sw(na.bind(null,t,ur,Zi),r);break}na(t,ur,Zi);break;case 5:na(t,ur,Zi);break;default:throw Error(oe(329))}}}return wr(t,Qt()),t.callbackNode===n?rD.bind(null,t):null}function Vw(t,e){var n=kd;return t.current.memoizedState.isDehydrated&&(xa(t,e).flags|=256),t=Wm(t,e),t!==2&&(e=ur,ur=n,e!==null&&Bw(e)),t}function Bw(t){ur===null?ur=t:ur.push.apply(ur,t)}function V3(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!vi(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Hs(t,e){for(e&=~hb,e&=~oy,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-mi(e),r=1<<n;t[n]=-1,e&=~r}}function JI(t){if(lt&6)throw Error(oe(327));uc();var e=Im(t,0);if(!(e&1))return wr(t,Qt()),null;var n=Wm(t,e);if(t.tag!==0&&n===2){var r=fw(t);r!==0&&(e=r,n=Vw(t,r))}if(n===1)throw n=fh,xa(t,0),Hs(t,e),wr(t,Qt()),n;if(n===6)throw Error(oe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,na(t,ur,Zi),wr(t,Qt()),null}function pb(t,e){var n=lt;lt|=1;try{return t(e)}finally{lt=n,lt===0&&(Cc=Qt()+500,ny&&Uo())}}function ja(t){Qs!==null&&Qs.tag===0&&!(lt&6)&&uc();var e=lt;lt|=1;var n=Jr.transition,r=gt;try{if(Jr.transition=null,gt=1,t)return t()}finally{gt=r,Jr.transition=n,lt=e,!(lt&6)&&Uo()}}function mb(){Cr=Jl.current,kt(Jl)}function xa(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,y3(n)),tn!==null)for(n=tn.return;n!==null;){var r=n;switch(QS(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Nm();break;case 3:xc(),kt(vr),kt(Kn),ib();break;case 5:rb(r);break;case 4:xc();break;case 13:kt($t);break;case 19:kt($t);break;case 10:ZS(r.type._context);break;case 22:case 23:mb()}n=n.return}if(yn=t,tn=t=co(t.current,null),Rn=Cr=e,on=0,fh=null,hb=oy=Ua=0,ur=kd=null,pa!==null){for(e=0;e<pa.length;e++)if(n=pa[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}pa=null}return t}function iD(t,e){do{var n=tn;try{if(JS(),em.current=jm,Um){for(var r=jt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Um=!1}if($a=0,dn=nn=jt=null,Id=!1,uh=0,db.current=null,n===null||n.return===null){on=1,fh=e,tn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Rn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=UI(o);if(f!==null){f.flags&=-257,jI(f,o,a,s,e),f.mode&1&&$I(s,c,e),e=f,l=c;var p=e.updateQueue;if(p===null){var y=new Set;y.add(l),e.updateQueue=y}else p.add(l);break e}else{if(!(e&1)){$I(s,c,e),gb();break e}l=Error(oe(426))}}else if(Pt&&a.mode&1){var w=UI(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),jI(w,o,a,s,e),YS(Ic(l,a));break e}}s=l=Ic(l,a),on!==4&&(on=2),kd===null?kd=[s]:kd.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=VP(s,l,e);NI(s,m);break e;case 1:a=l;var g=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(ao===null||!ao.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=BP(s,a,e);NI(s,b);break e}}s=s.return}while(s!==null)}aD(n)}catch(I){e=I,tn===n&&n!==null&&(tn=n=n.return);continue}break}while(1)}function sD(){var t=Vm.current;return Vm.current=jm,t===null?jm:t}function gb(){(on===0||on===3||on===2)&&(on=4),yn===null||!(Ua&268435455)&&!(oy&268435455)||Hs(yn,Rn)}function Wm(t,e){var n=lt;lt|=2;var r=sD();(yn!==t||Rn!==e)&&(Zi=null,xa(t,e));do try{B3();break}catch(i){iD(t,i)}while(1);if(JS(),lt=n,Vm.current=r,tn!==null)throw Error(oe(261));return yn=null,Rn=0,on}function B3(){for(;tn!==null;)oD(tn)}function z3(){for(;tn!==null&&!pB();)oD(tn)}function oD(t){var e=cD(t.alternate,t,Cr);t.memoizedProps=t.pendingProps,e===null?aD(t):tn=e,db.current=null}function aD(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=M3(n,e),n!==null){n.flags&=32767,tn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{on=6,tn=null;return}}else if(n=L3(n,e,Cr),n!==null){tn=n;return}if(e=e.sibling,e!==null){tn=e;return}tn=e=t}while(e!==null);on===0&&(on=5)}function na(t,e,n){var r=gt,i=Jr.transition;try{Jr.transition=null,gt=1,W3(t,e,n,r)}finally{Jr.transition=i,gt=r}return null}function W3(t,e,n,r){do uc();while(Qs!==null);if(lt&6)throw Error(oe(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(oe(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(TB(t,s),t===yn&&(tn=yn=null,Rn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Sp||(Sp=!0,uD(xm,function(){return uc(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Jr.transition,Jr.transition=null;var o=gt;gt=1;var a=lt;lt|=4,db.current=null,$3(t,n),tD(n,t),u3(_w),Cm=!!vw,_w=vw=null,t.current=n,U3(n),mB(),lt=a,gt=o,Jr.transition=s}else t.current=n;if(Sp&&(Sp=!1,Qs=t,zm=i),s=t.pendingLanes,s===0&&(ao=null),vB(n.stateNode),wr(t,Qt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Bm)throw Bm=!1,t=Uw,Uw=null,t;return zm&1&&t.tag!==0&&uc(),s=t.pendingLanes,s&1?t===jw?Ad++:(Ad=0,jw=t):Ad=0,Uo(),null}function uc(){if(Qs!==null){var t=jN(zm),e=Jr.transition,n=gt;try{if(Jr.transition=null,gt=16>t?16:t,Qs===null)var r=!1;else{if(t=Qs,Qs=null,zm=0,lt&6)throw Error(oe(331));var i=lt;for(lt|=4,Te=t.current;Te!==null;){var s=Te,o=s.child;if(Te.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Te=c;Te!==null;){var u=Te;switch(u.tag){case 0:case 11:case 15:Cd(8,u,s)}var d=u.child;if(d!==null)d.return=u,Te=d;else for(;Te!==null;){u=Te;var h=u.sibling,f=u.return;if(JP(u),u===c){Te=null;break}if(h!==null){h.return=f,Te=h;break}Te=f}}}var p=s.alternate;if(p!==null){var y=p.child;if(y!==null){p.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}Te=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Te=o;else e:for(;Te!==null;){if(s=Te,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Cd(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,Te=m;break e}Te=s.return}}var g=t.current;for(Te=g;Te!==null;){o=Te;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,Te=v;else e:for(o=g;Te!==null;){if(a=Te,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:sy(9,a)}}catch(I){Wt(a,a.return,I)}if(a===o){Te=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,Te=b;break e}Te=a.return}}if(lt=i,Uo(),Fi&&typeof Fi.onPostCommitFiberRoot=="function")try{Fi.onPostCommitFiberRoot(Xg,t)}catch{}r=!0}return r}finally{gt=n,Jr.transition=e}}return!1}function ZI(t,e,n){e=Ic(n,e),e=VP(t,e,1),t=oo(t,e,1),e=rr(),t!==null&&(of(t,1,e),wr(t,e))}function Wt(t,e,n){if(t.tag===3)ZI(t,t,n);else for(;e!==null;){if(e.tag===3){ZI(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ao===null||!ao.has(r))){t=Ic(n,t),t=BP(e,t,1),e=oo(e,t,1),t=rr(),e!==null&&(of(e,1,t),wr(e,t));break}}e=e.return}}function H3(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=rr(),t.pingedLanes|=t.suspendedLanes&n,yn===t&&(Rn&n)===n&&(on===4||on===3&&(Rn&130023424)===Rn&&500>Qt()-fb?xa(t,0):hb|=n),wr(t,e)}function lD(t,e){e===0&&(t.mode&1?(e=dp,dp<<=1,!(dp&130023424)&&(dp=4194304)):e=1);var n=rr();t=vs(t,e),t!==null&&(of(t,e,n),wr(t,n))}function G3(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),lD(t,n)}function q3(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(oe(314))}r!==null&&r.delete(e),lD(t,n)}var cD;cD=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||vr.current)fr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return fr=!1,O3(t,e,n);fr=!!(t.flags&131072)}else fr=!1,Pt&&e.flags&1048576&&hP(e,Om,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;nm(t,e),t=e.pendingProps;var i=bc(e,Kn.current);cc(e,n),i=ob(null,e,r,t,i,n);var s=ab();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,_r(r)?(s=!0,Pm(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,tb(e),i.updater=ry,e.stateNode=i,i._reactInternals=e,kw(e,r,t,n),e=Nw(null,e,r,!0,s,n)):(e.tag=0,Pt&&s&&KS(e),Jn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(nm(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Q3(r),t=li(r,t),i){case 0:e=Rw(null,e,r,t,n);break e;case 1:e=zI(null,e,r,t,n);break e;case 11:e=VI(null,e,r,t,n);break e;case 14:e=BI(null,e,r,li(r.type,t),n);break e}throw Error(oe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:li(r,i),Rw(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:li(r,i),zI(t,e,r,i,n);case 3:e:{if(GP(e),t===null)throw Error(oe(387));r=e.pendingProps,s=e.memoizedState,i=s.element,gP(t,e),Fm(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ic(Error(oe(423)),e),e=WI(t,e,r,n,i);break e}else if(r!==i){i=Ic(Error(oe(424)),e),e=WI(t,e,r,n,i);break e}else for(Rr=so(e.stateNode.containerInfo.firstChild),Dr=e,Pt=!0,ui=null,n=wP(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ec(),r===i){e=_s(t,e,n);break e}Jn(t,e,r,n)}e=e.child}return e;case 5:return SP(e),t===null&&xw(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,ww(r,i)?o=null:s!==null&&ww(r,s)&&(e.flags|=32),HP(t,e),Jn(t,e,o,n),e.child;case 6:return t===null&&xw(e),null;case 13:return qP(t,e,n);case 4:return nb(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Tc(e,null,r,n):Jn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:li(r,i),VI(t,e,r,i,n);case 7:return Jn(t,e,e.pendingProps,n),e.child;case 8:return Jn(t,e,e.pendingProps.children,n),e.child;case 12:return Jn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Et(Lm,r._currentValue),r._currentValue=o,s!==null)if(vi(s.value,o)){if(s.children===i.children&&!vr.current){e=_s(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=cs(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Iw(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(oe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Iw(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Jn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,cc(e,n),i=Zr(i),r=r(i),e.flags|=1,Jn(t,e,r,n),e.child;case 14:return r=e.type,i=li(r,e.pendingProps),i=li(r.type,i),BI(t,e,r,i,n);case 15:return zP(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:li(r,i),nm(t,e),e.tag=1,_r(r)?(t=!0,Pm(e)):t=!1,cc(e,n),vP(e,r,i),kw(e,r,i,n),Nw(null,e,r,!0,t,n);case 19:return KP(t,e,n);case 22:return WP(t,e,n)}throw Error(oe(156,e.tag))};function uD(t,e){return MN(t,e)}function K3(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qr(t,e,n,r){return new K3(t,e,n,r)}function yb(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Q3(t){if(typeof t=="function")return yb(t)?1:0;if(t!=null){if(t=t.$$typeof,t===MS)return 11;if(t===FS)return 14}return 2}function co(t,e){var n=t.alternate;return n===null?(n=qr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function sm(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")yb(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Bl:return Ia(n.children,i,s,e);case LS:o=8,i|=8;break;case J0:return t=qr(12,n,e,i|2),t.elementType=J0,t.lanes=s,t;case Z0:return t=qr(13,n,e,i),t.elementType=Z0,t.lanes=s,t;case ew:return t=qr(19,n,e,i),t.elementType=ew,t.lanes=s,t;case _N:return ay(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case yN:o=10;break e;case vN:o=9;break e;case MS:o=11;break e;case FS:o=14;break e;case Vs:o=16,r=null;break e}throw Error(oe(130,t==null?t:typeof t,""))}return e=qr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ia(t,e,n,r){return t=qr(7,t,r,e),t.lanes=n,t}function ay(t,e,n,r){return t=qr(22,t,r,e),t.elementType=_N,t.lanes=n,t.stateNode={isHidden:!1},t}function q_(t,e,n){return t=qr(6,t,null,e),t.lanes=n,t}function K_(t,e,n){return e=qr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Y3(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=k_(0),this.expirationTimes=k_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=k_(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function vb(t,e,n,r,i,s,o,a,l){return t=new Y3(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=qr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},tb(s),t}function X3(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function dD(t){if(!t)return vo;t=t._reactInternals;e:{if(hl(t)!==t||t.tag!==1)throw Error(oe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(_r(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(oe(171))}if(t.tag===1){var n=t.type;if(_r(n))return uP(t,n,e)}return e}function hD(t,e,n,r,i,s,o,a,l){return t=vb(n,r,!0,t,i,s,o,a,l),t.context=dD(null),n=t.current,r=rr(),i=lo(n),s=cs(r,i),s.callback=e??null,oo(n,s,i),t.current.lanes=i,of(t,i,r),wr(t,r),t}function ly(t,e,n,r){var i=e.current,s=rr(),o=lo(i);return n=dD(n),e.context===null?e.context=n:e.pendingContext=n,e=cs(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=oo(i,e,o),t!==null&&(gi(t,i,o,s),Zp(t,i,o)),o}function Hm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function eC(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function _b(t,e){eC(t,e),(t=t.alternate)&&eC(t,e)}function J3(){return null}var fD=typeof reportError=="function"?reportError:function(t){console.error(t)};function wb(t){this._internalRoot=t}cy.prototype.render=wb.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(oe(409));ly(t,e,null,null)};cy.prototype.unmount=wb.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ja(function(){ly(null,t,null,null)}),e[ys]=null}};function cy(t){this._internalRoot=t}cy.prototype.unstable_scheduleHydration=function(t){if(t){var e=zN();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ws.length&&e!==0&&e<Ws[n].priority;n++);Ws.splice(n,0,t),n===0&&HN(t)}};function Sb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function uy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function tC(){}function Z3(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Hm(o);s.call(c)}}var o=hD(e,r,t,0,null,!1,!1,"",tC);return t._reactRootContainer=o,t[ys]=o.current,sh(t.nodeType===8?t.parentNode:t),ja(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Hm(l);a.call(c)}}var l=vb(t,0,!1,null,null,!1,!1,"",tC);return t._reactRootContainer=l,t[ys]=l.current,sh(t.nodeType===8?t.parentNode:t),ja(function(){ly(e,l,n,r)}),l}function dy(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Hm(o);a.call(l)}}ly(e,o,t,i)}else o=Z3(n,e,t,i,r);return Hm(o)}VN=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=hd(e.pendingLanes);n!==0&&(jS(e,n|1),wr(e,Qt()),!(lt&6)&&(Cc=Qt()+500,Uo()))}break;case 13:ja(function(){var r=vs(t,1);if(r!==null){var i=rr();gi(r,t,1,i)}}),_b(t,1)}};VS=function(t){if(t.tag===13){var e=vs(t,134217728);if(e!==null){var n=rr();gi(e,t,134217728,n)}_b(t,134217728)}};BN=function(t){if(t.tag===13){var e=lo(t),n=vs(t,e);if(n!==null){var r=rr();gi(n,t,e,r)}_b(t,e)}};zN=function(){return gt};WN=function(t,e){var n=gt;try{return gt=t,e()}finally{gt=n}};uw=function(t,e,n){switch(e){case"input":if(rw(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ty(r);if(!i)throw Error(oe(90));SN(r),rw(r,i)}}}break;case"textarea":EN(t,n);break;case"select":e=n.value,e!=null&&sc(t,!!n.multiple,e,!1)}};RN=pb;NN=ja;var e4={usingClientEntryPoint:!1,Events:[lf,Gl,ty,kN,AN,pb]},Uu={findFiberByHostInstance:fa,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},t4={bundleType:Uu.bundleType,version:Uu.version,rendererPackageName:Uu.rendererPackageName,rendererConfig:Uu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Is.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ON(t),t===null?null:t.stateNode},findFiberByHostInstance:Uu.findFiberByHostInstance||J3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bp.isDisabled&&bp.supportsFiber)try{Xg=bp.inject(t4),Fi=bp}catch{}}jr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=e4;jr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sb(e))throw Error(oe(200));return X3(t,e,null,n)};jr.createRoot=function(t,e){if(!Sb(t))throw Error(oe(299));var n=!1,r="",i=fD;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=vb(t,1,!1,null,null,n,!1,r,i),t[ys]=e.current,sh(t.nodeType===8?t.parentNode:t),new wb(e)};jr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(oe(188)):(t=Object.keys(t).join(","),Error(oe(268,t)));return t=ON(e),t=t===null?null:t.stateNode,t};jr.flushSync=function(t){return ja(t)};jr.hydrate=function(t,e,n){if(!uy(e))throw Error(oe(200));return dy(null,t,e,!0,n)};jr.hydrateRoot=function(t,e,n){if(!Sb(t))throw Error(oe(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=fD;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=hD(e,null,t,1,n??null,i,!1,s,o),t[ys]=e.current,sh(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new cy(e)};jr.render=function(t,e,n){if(!uy(e))throw Error(oe(200));return dy(null,t,e,!1,n)};jr.unmountComponentAtNode=function(t){if(!uy(t))throw Error(oe(40));return t._reactRootContainer?(ja(function(){dy(null,null,t,!1,function(){t._reactRootContainer=null,t[ys]=null})}),!0):!1};jr.unstable_batchedUpdates=pb;jr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!uy(n))throw Error(oe(200));if(t==null||t._reactInternals===void 0)throw Error(oe(38));return dy(t,e,n,!1,r)};jr.version="18.2.0-next-9e3b772b8-20220608";(function(t){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}e(),t.exports=jr})(JV);const n4=CS(Sm);var nC=Sm;Q0.createRoot=nC.createRoot,Q0.hydrateRoot=nC.hydrateRoot;/**
 * @remix-run/router v1.3.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dt(){return dt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dt.apply(this,arguments)}var en;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(en||(en={}));const rC="popstate";function r4(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return ph("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:ws(i)}return s4(e,n,null,t)}function Qe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function i4(){return Math.random().toString(36).substr(2,8)}function iC(t,e){return{usr:t.state,key:t.key,idx:e}}function ph(t,e,n,r){return n===void 0&&(n=null),dt({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Cs(e):e,{state:n,key:e&&e.key||r||i4()})}function ws(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Cs(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function s4(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=en.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(dt({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=en.Pop;let w=u(),m=w==null?null:w-c;c=w,l&&l({action:a,location:y.location,delta:m})}function h(w,m){a=en.Push;let g=ph(y.location,w,m);n&&n(g,w),c=u()+1;let v=iC(g,c),b=y.createHref(g);try{o.pushState(v,"",b)}catch{i.location.assign(b)}s&&l&&l({action:a,location:y.location,delta:1})}function f(w,m){a=en.Replace;let g=ph(y.location,w,m);n&&n(g,w),c=u();let v=iC(g,c),b=y.createHref(g);o.replaceState(v,"",b),s&&l&&l({action:a,location:y.location,delta:0})}function p(w){let m=i.location.origin!=="null"?i.location.origin:i.location.href,g=typeof w=="string"?w:ws(w);return Qe(m,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,m)}let y={get action(){return a},get location(){return t(i,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(rC,d),l=w,()=>{i.removeEventListener(rC,d),l=null}},createHref(w){return e(i,w)},createURL:p,encodeLocation(w){let m=p(w);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:h,replace:f,go(w){return o.go(w)}};return y}var hn;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(hn||(hn={}));function o4(t){return t.index===!0}function pD(t,e,n){return e===void 0&&(e=[]),n===void 0&&(n=new Set),t.map((r,i)=>{let s=[...e,i],o=typeof r.id=="string"?r.id:s.join("-");return Qe(r.index!==!0||!r.children,"Cannot specify children on an index route"),Qe(!n.has(o),'Found a route id collision on id "'+o+`".  Route id's must be globally unique within Data Router usages`),n.add(o),o4(r)?dt({},r,{id:o}):dt({},r,{id:o,children:r.children?pD(r.children,s,n):void 0})})}function Zl(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Cs(e):e,i=uf(r.pathname||"/",n);if(i==null)return null;let s=mD(t);a4(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=g4(s[a],_4(i));return o}function mD(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Qe(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=us([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(Qe(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),mD(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:p4(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of gD(s.path))i(s,o,l)}),e}function gD(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=gD(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function a4(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:m4(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const l4=/^:\w+$/,c4=3,u4=2,d4=1,h4=10,f4=-2,sC=t=>t==="*";function p4(t,e){let n=t.split("/"),r=n.length;return n.some(sC)&&(r+=f4),e&&(r+=u4),n.filter(i=>!sC(i)).reduce((i,s)=>i+(l4.test(s)?c4:s===""?d4:h4),r)}function m4(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function g4(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=i==="/"?e:e.slice(i.length)||"/",u=y4({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!u)return null;Object.assign(r,u.params);let d=a.route;s.push({params:r,pathname:us([i,u.pathname]),pathnameBase:E4(us([i,u.pathnameBase])),route:d}),u.pathnameBase!=="/"&&(i=us([i,u.pathnameBase]))}return s}function y4(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=v4(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,d)=>{if(u==="*"){let h=a[d]||"";o=s.slice(0,s.length-h.length).replace(/(.)\/+$/,"$1")}return c[u]=w4(a[d]||"",u),c},{}),pathname:s,pathnameBase:o,pattern:t}}function v4(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),mh(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function _4(t){try{return decodeURI(t)}catch(e){return mh(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function w4(t,e){try{return decodeURIComponent(t)}catch(n){return mh(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function uf(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function mh(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function S4(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Cs(t):t;return{pathname:n?n.startsWith("/")?n:b4(n,e):e,search:T4(r),hash:x4(i)}}function b4(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Q_(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function hy(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function bb(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Cs(t):(i=dt({},t),Qe(!i.pathname||!i.pathname.includes("?"),Q_("?","pathname","search",i)),Qe(!i.pathname||!i.pathname.includes("#"),Q_("#","pathname","hash",i)),Qe(!i.search||!i.search.includes("#"),Q_("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(r||o==null)a=n;else{let d=e.length-1;if(o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}a=d>=0?e[d]:"/"}let l=S4(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const us=t=>t.join("/").replace(/\/\/+/g,"/"),E4=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),T4=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,x4=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class oC extends Error{}class I4{constructor(e,n){this.pendingKeysSet=new Set,this.subscribers=new Set,this.deferredKeys=[],Qe(e&&typeof e=="object"&&!Array.isArray(e),"defer() only accepts plain objects");let r;this.abortPromise=new Promise((s,o)=>r=o),this.controller=new AbortController;let i=()=>r(new oC("Deferred data aborted"));this.unlistenAbortSignal=()=>this.controller.signal.removeEventListener("abort",i),this.controller.signal.addEventListener("abort",i),this.data=Object.entries(e).reduce((s,o)=>{let[a,l]=o;return Object.assign(s,{[a]:this.trackPromise(a,l)})},{}),this.done&&this.unlistenAbortSignal(),this.init=n}trackPromise(e,n){if(!(n instanceof Promise))return n;this.deferredKeys.push(e),this.pendingKeysSet.add(e);let r=Promise.race([n,this.abortPromise]).then(i=>this.onSettle(r,e,null,i),i=>this.onSettle(r,e,i));return r.catch(()=>{}),Object.defineProperty(r,"_tracked",{get:()=>!0}),r}onSettle(e,n,r,i){return this.controller.signal.aborted&&r instanceof oC?(this.unlistenAbortSignal(),Object.defineProperty(e,"_error",{get:()=>r}),Promise.reject(r)):(this.pendingKeysSet.delete(n),this.done&&this.unlistenAbortSignal(),r?(Object.defineProperty(e,"_error",{get:()=>r}),this.emit(!1,n),Promise.reject(r)):(Object.defineProperty(e,"_data",{get:()=>i}),this.emit(!1,n),i))}emit(e,n){this.subscribers.forEach(r=>r(e,n))}subscribe(e){return this.subscribers.add(e),()=>this.subscribers.delete(e)}cancel(){this.controller.abort(),this.pendingKeysSet.forEach((e,n)=>this.pendingKeysSet.delete(n)),this.emit(!0)}async resolveData(e){let n=!1;if(!this.done){let r=()=>this.cancel();e.addEventListener("abort",r),n=await new Promise(i=>{this.subscribe(s=>{e.removeEventListener("abort",r),(s||this.done)&&i(s)})})}return n}get done(){return this.pendingKeysSet.size===0}get unwrappedData(){return Qe(this.data!==null&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce((e,n)=>{let[r,i]=n;return Object.assign(e,{[r]:k4(i)})},{})}get pendingKeys(){return Array.from(this.pendingKeysSet)}}function C4(t){return t instanceof Promise&&t._tracked===!0}function k4(t){if(!C4(t))return t;if(t._error)throw t._error;return t._data}class Eb{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function yD(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const vD=["post","put","patch","delete"],A4=new Set(vD),R4=["get",...vD],N4=new Set(R4),P4=new Set([301,302,303,307,308]),D4=new Set([307,308]),Y_={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},O4={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},aC={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},_D=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",L4=!wD;function M4(t){Qe(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let e=pD(t.routes),n,r=null,i=new Set,s=null,o=null,a=null,l=t.hydrationData!=null,c=Zl(e,t.history.location,t.basename),u=null;if(c==null){let K=Xi(404,{pathname:t.history.location.pathname}),{matches:Y,route:X}=fC(e);c=Y,u={[X.id]:K}}let d=!c.some(K=>K.route.loader)||t.hydrationData!=null,h,f={historyAction:t.history.action,location:t.history.location,matches:c,initialized:d,navigation:Y_,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||u,fetchers:new Map,blockers:new Map},p=en.Pop,y=!1,w,m=!1,g=!1,v=[],b=[],I=new Map,E=0,D=-1,S=new Map,T=new Set,O=new Map,C=new Map,k=new Map,R=!1;function P(){return r=t.history.listen(K=>{let{action:Y,location:X,delta:Se}=K;if(R){R=!1;return}mh(k.size===0||Se!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let _e=qe({currentLocation:f.location,nextLocation:X,historyAction:Y});if(_e&&Se!=null){R=!0,t.history.go(Se*-1),ft(_e,{state:"blocked",location:X,proceed(){ft(_e,{state:"proceeding",proceed:void 0,reset:void 0,location:X}),t.history.go(Se)},reset(){Le(_e),x({blockers:new Map(h.state.blockers)})}});return}return Z(Y,X)}),f.initialized||Z(en.Pop,f.location),h}function B(){r&&r(),i.clear(),w&&w.abort(),f.fetchers.forEach((K,Y)=>se(Y)),f.blockers.forEach((K,Y)=>Le(Y))}function A(K){return i.add(K),()=>i.delete(K)}function x(K){f=dt({},f,K),i.forEach(Y=>Y(f))}function j(K,Y){var X,Se;let _e=f.actionData!=null&&f.navigation.formMethod!=null&&es(f.navigation.formMethod)&&f.navigation.state==="loading"&&((X=K.state)==null?void 0:X._isRedirect)!==!0,Re;Y.actionData?Object.keys(Y.actionData).length>0?Re=Y.actionData:Re=null:_e?Re=f.actionData:Re=null;let xe=Y.loaderData?hC(f.loaderData,Y.loaderData,Y.matches||[],Y.errors):f.loaderData;for(let[we]of k)Le(we);let $e=y===!0||f.navigation.formMethod!=null&&es(f.navigation.formMethod)&&((Se=K.state)==null?void 0:Se._isRedirect)!==!0;n&&(e=n,n=void 0),x(dt({},Y,{actionData:Re,loaderData:xe,historyAction:p,location:K,initialized:!0,navigation:Y_,revalidation:"idle",restoreScrollPosition:pe(K,Y.matches||f.matches),preventScrollReset:$e,blockers:new Map(f.blockers)})),m||p===en.Pop||(p===en.Push?t.history.push(K,K.state):p===en.Replace&&t.history.replace(K,K.state)),p=en.Pop,y=!1,m=!1,g=!1,v=[],b=[]}async function F(K,Y){if(typeof K=="number"){t.history.go(K);return}let{path:X,submission:Se,error:_e}=lC(K,Y),Re=f.location,xe=ph(f.location,X,Y&&Y.state);xe=dt({},xe,t.history.encodeLocation(xe));let $e=Y&&Y.replace!=null?Y.replace:void 0,we=en.Push;$e===!0?we=en.Replace:$e===!1||Se!=null&&es(Se.formMethod)&&Se.formAction===f.location.pathname+f.location.search&&(we=en.Replace);let W=Y&&"preventScrollReset"in Y?Y.preventScrollReset===!0:void 0,V=qe({currentLocation:Re,nextLocation:xe,historyAction:we});if(V){ft(V,{state:"blocked",location:xe,proceed(){ft(V,{state:"proceeding",proceed:void 0,reset:void 0,location:xe}),F(K,Y)},reset(){Le(V),x({blockers:new Map(f.blockers)})}});return}return await Z(we,xe,{submission:Se,pendingError:_e,preventScrollReset:W,replace:Y&&Y.replace})}function z(){if(ue(),x({revalidation:"loading"}),f.navigation.state!=="submitting"){if(f.navigation.state==="idle"){Z(f.historyAction,f.location,{startUninterruptedRevalidation:!0});return}Z(p||f.historyAction,f.navigation.location,{overrideNavigation:f.navigation})}}async function Z(K,Y,X){w&&w.abort(),w=null,p=K,m=(X&&X.startUninterruptedRevalidation)===!0,et(f.location,f.matches),y=(X&&X.preventScrollReset)===!0;let Se=n||e,_e=X&&X.overrideNavigation,Re=Zl(Se,Y,t.basename);if(!Re){let re=Xi(404,{pathname:Y.pathname}),{matches:ce,route:he}=fC(Se);ut(),j(Y,{matches:ce,loaderData:{},errors:{[he.id]:re}});return}if(V4(f.location,Y)&&!(X&&X.submission&&es(X.submission.formMethod))){j(Y,{matches:Re});return}w=new AbortController;let xe=Vu(t.history,Y,w.signal,X&&X.submission),$e,we;if(X&&X.pendingError)we={[ec(Re).route.id]:X.pendingError};else if(X&&X.submission&&es(X.submission.formMethod)){let re=await N(xe,Y,X.submission,Re,{replace:X.replace});if(re.shortCircuited)return;$e=re.pendingActionData,we=re.pendingActionError,_e=dt({state:"loading",location:Y},X.submission),xe=new Request(xe.url,{signal:xe.signal})}let{shortCircuited:W,loaderData:V,errors:J}=await $(xe,Y,Re,_e,X&&X.submission,X&&X.replace,$e,we);W||(w=null,j(Y,dt({matches:Re},$e?{actionData:$e}:{},{loaderData:V,errors:J})))}async function N(K,Y,X,Se,_e){ue();let Re=dt({state:"submitting",location:Y},X);x({navigation:Re});let xe,$e=zw(Se,Y);if(!$e.route.action)xe={type:hn.error,error:Xi(405,{method:K.method,pathname:Y.pathname,routeId:$e.route.id})};else if(xe=await ju("action",K,$e,Se,h.basename),K.signal.aborted)return{shortCircuited:!0};if(dc(xe)){let we;return _e&&_e.replace!=null?we=_e.replace:we=xe.location===f.location.pathname+f.location.search,await G(f,xe,{submission:X,replace:we}),{shortCircuited:!0}}if(Rd(xe)){let we=ec(Se,$e.route.id);return(_e&&_e.replace)!==!0&&(p=en.Push),{pendingActionData:{},pendingActionError:{[we.route.id]:xe.error}}}if(ga(xe))throw Xi(400,{type:"defer-action"});return{pendingActionData:{[$e.route.id]:xe.data}}}async function $(K,Y,X,Se,_e,Re,xe,$e){let we=Se;we||(we=dt({state:"loading",location:Y,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},_e));let W=_e||(we.formMethod&&we.formAction&&we.formData&&we.formEncType?{formMethod:we.formMethod,formAction:we.formAction,formData:we.formData,formEncType:we.formEncType}:void 0),V=n||e,[J,re]=cC(t.history,f,X,W,Y,g,v,b,O,V,t.basename,xe,$e);if(ut(it=>!(X&&X.some(Ze=>Ze.route.id===it))||J&&J.some(Ze=>Ze.route.id===it)),J.length===0&&re.length===0)return j(Y,dt({matches:X,loaderData:{},errors:$e||null},xe?{actionData:xe}:{})),{shortCircuited:!0};if(!m){re.forEach(Ze=>{let vt=f.fetchers.get(Ze.key),Fn={state:"loading",data:vt&&vt.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};f.fetchers.set(Ze.key,Fn)});let it=xe||f.actionData;x(dt({navigation:we},it?Object.keys(it).length===0?{actionData:null}:{actionData:it}:{},re.length>0?{fetchers:new Map(f.fetchers)}:{}))}D=++E,re.forEach(it=>I.set(it.key,w));let{results:ce,loaderResults:he,fetcherResults:Oe}=await ee(f.matches,X,J,re,K);if(K.signal.aborted)return{shortCircuited:!0};re.forEach(it=>I.delete(it.key));let Ie=pC(ce);if(Ie)return await G(f,Ie,{replace:Re}),{shortCircuited:!0};let{loaderData:Ce,errors:Fe}=dC(f,X,J,he,$e,re,Oe,C);C.forEach((it,Ze)=>{it.subscribe(vt=>{(vt||it.done)&&C.delete(Ze)})}),Ee();let rt=Me(D);return dt({loaderData:Ce,errors:Fe},rt||re.length>0?{fetchers:new Map(f.fetchers)}:{})}function L(K){return f.fetchers.get(K)||O4}function U(K,Y,X,Se){if(L4)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");I.has(K)&&De(K);let Re=Zl(n||e,X,t.basename);if(!Re){ye(K,Y,Xi(404,{pathname:X}));return}let{path:xe,submission:$e}=lC(X,Se,!0),we=zw(Re,xe);if(y=(Se&&Se.preventScrollReset)===!0,$e&&es($e.formMethod)){M(K,Y,xe,we,Re,$e);return}O.set(K,{routeId:Y,path:xe}),te(K,Y,xe,we,Re,$e)}async function M(K,Y,X,Se,_e,Re){if(ue(),O.delete(K),!Se.route.action){let Yn=Xi(405,{method:Re.formMethod,pathname:X,routeId:Y});ye(K,Y,Yn);return}let xe=f.fetchers.get(K),$e=dt({state:"submitting"},Re,{data:xe&&xe.data," _hasFetcherDoneAnything ":!0});f.fetchers.set(K,$e),x({fetchers:new Map(f.fetchers)});let we=new AbortController,W=Vu(t.history,X,we.signal,Re);I.set(K,we);let V=await ju("action",W,Se,_e,h.basename);if(W.signal.aborted){I.get(K)===we&&I.delete(K);return}if(dc(V)){I.delete(K),T.add(K);let Yn=dt({state:"loading"},Re,{data:void 0," _hasFetcherDoneAnything ":!0});return f.fetchers.set(K,Yn),x({fetchers:new Map(f.fetchers)}),G(f,V,{isFetchActionRedirect:!0})}if(Rd(V)){ye(K,Y,V.error);return}if(ga(V))throw Xi(400,{type:"defer-action"});let J=f.navigation.location||f.location,re=Vu(t.history,J,we.signal),ce=n||e,he=f.navigation.state!=="idle"?Zl(ce,f.navigation.location,t.basename):f.matches;Qe(he,"Didn't find any matches after fetcher action");let Oe=++E;S.set(K,Oe);let Ie=dt({state:"loading",data:V.data},Re,{" _hasFetcherDoneAnything ":!0});f.fetchers.set(K,Ie);let[Ce,Fe]=cC(t.history,f,he,Re,J,g,v,b,O,ce,t.basename,{[Se.route.id]:V.data},void 0);Fe.filter(Yn=>Yn.key!==K).forEach(Yn=>{let b_=Yn.key,qx=f.fetchers.get(b_),IV={state:"loading",data:qx&&qx.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};f.fetchers.set(b_,IV),I.set(b_,we)}),x({fetchers:new Map(f.fetchers)});let{results:rt,loaderResults:it,fetcherResults:Ze}=await ee(f.matches,he,Ce,Fe,re);if(we.signal.aborted)return;S.delete(K),I.delete(K),Fe.forEach(Yn=>I.delete(Yn.key));let vt=pC(rt);if(vt)return G(f,vt);let{loaderData:Fn,errors:Si}=dC(f,f.matches,Ce,it,void 0,Fe,Ze,C),Al={state:"idle",data:V.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};f.fetchers.set(K,Al);let Zo=Me(Oe);f.navigation.state==="loading"&&Oe>D?(Qe(p,"Expected pending action"),w&&w.abort(),j(f.navigation.location,{matches:he,loaderData:Fn,errors:Si,fetchers:new Map(f.fetchers)})):(x(dt({errors:Si,loaderData:hC(f.loaderData,Fn,he,Si)},Zo?{fetchers:new Map(f.fetchers)}:{})),g=!1)}async function te(K,Y,X,Se,_e,Re){let xe=f.fetchers.get(K),$e=dt({state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},Re,{data:xe&&xe.data," _hasFetcherDoneAnything ":!0});f.fetchers.set(K,$e),x({fetchers:new Map(f.fetchers)});let we=new AbortController,W=Vu(t.history,X,we.signal);I.set(K,we);let V=await ju("loader",W,Se,_e,h.basename);if(ga(V)&&(V=await TD(V,W.signal,!0)||V),I.get(K)===we&&I.delete(K),W.signal.aborted)return;if(dc(V)){await G(f,V);return}if(Rd(V)){let re=ec(f.matches,Y);f.fetchers.delete(K),x({fetchers:new Map(f.fetchers),errors:{[re.route.id]:V.error}});return}Qe(!ga(V),"Unhandled fetcher deferred data");let J={state:"idle",data:V.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};f.fetchers.set(K,J),x({fetchers:new Map(f.fetchers)})}async function G(K,Y,X){var Se;let{submission:_e,replace:Re,isFetchActionRedirect:xe}=X===void 0?{}:X;Y.revalidate&&(g=!0);let $e=ph(K.location,Y.location,dt({_isRedirect:!0},xe?{_isFetchActionRedirect:!0}:{}));if(Qe($e,"Expected a location on the redirect navigation"),_D.test(Y.location)&&wD&&typeof((Se=window)==null?void 0:Se.location)<"u"){let ce=t.history.createURL(Y.location),he=uf(ce.pathname,t.basename||"/")==null;if(window.location.origin!==ce.origin||he){Re?window.location.replace(Y.location):window.location.assign(Y.location);return}}w=null;let we=Re===!0?en.Replace:en.Push,{formMethod:W,formAction:V,formEncType:J,formData:re}=K.navigation;!_e&&W&&V&&re&&J&&(_e={formMethod:W,formAction:V,formEncType:J,formData:re}),D4.has(Y.status)&&_e&&es(_e.formMethod)?await Z(we,$e,{submission:dt({},_e,{formAction:Y.location}),preventScrollReset:y}):await Z(we,$e,{overrideNavigation:{state:"loading",location:$e,formMethod:_e?_e.formMethod:void 0,formAction:_e?_e.formAction:void 0,formEncType:_e?_e.formEncType:void 0,formData:_e?_e.formData:void 0},preventScrollReset:y})}async function ee(K,Y,X,Se,_e){let Re=await Promise.all([...X.map(we=>ju("loader",_e,we,Y,h.basename)),...Se.map(we=>we.matches&&we.match?ju("loader",Vu(t.history,we.path,_e.signal),we.match,we.matches,h.basename):{type:hn.error,error:Xi(404,{pathname:we.path})})]),xe=Re.slice(0,X.length),$e=Re.slice(X.length);return await Promise.all([mC(K,X,xe,_e.signal,!1,f.loaderData),mC(K,Se.map(we=>we.match),$e,_e.signal,!0)]),{results:Re,loaderResults:xe,fetcherResults:$e}}function ue(){g=!0,v.push(...ut()),O.forEach((K,Y)=>{I.has(Y)&&(b.push(Y),De(Y))})}function ye(K,Y,X){let Se=ec(f.matches,Y);se(K),x({errors:{[Se.route.id]:X},fetchers:new Map(f.fetchers)})}function se(K){I.has(K)&&De(K),O.delete(K),S.delete(K),T.delete(K),f.fetchers.delete(K)}function De(K){let Y=I.get(K);Qe(Y,"Expected fetch controller: "+K),Y.abort(),I.delete(K)}function He(K){for(let Y of K){let Se={state:"idle",data:L(Y).data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};f.fetchers.set(Y,Se)}}function Ee(){let K=[];for(let Y of T){let X=f.fetchers.get(Y);Qe(X,"Expected fetcher: "+Y),X.state==="loading"&&(T.delete(Y),K.push(Y))}He(K)}function Me(K){let Y=[];for(let[X,Se]of S)if(Se<K){let _e=f.fetchers.get(X);Qe(_e,"Expected fetcher: "+X),_e.state==="loading"&&(De(X),S.delete(X),Y.push(X))}return He(Y),Y.length>0}function ve(K,Y){let X=f.blockers.get(K)||aC;return k.get(K)!==Y&&k.set(K,Y),X}function Le(K){f.blockers.delete(K),k.delete(K)}function ft(K,Y){let X=f.blockers.get(K)||aC;Qe(X.state==="unblocked"&&Y.state==="blocked"||X.state==="blocked"&&Y.state==="blocked"||X.state==="blocked"&&Y.state==="proceeding"||X.state==="blocked"&&Y.state==="unblocked"||X.state==="proceeding"&&Y.state==="unblocked","Invalid blocker state transition: "+X.state+" -> "+Y.state),f.blockers.set(K,Y),x({blockers:new Map(f.blockers)})}function qe(K){let{currentLocation:Y,nextLocation:X,historyAction:Se}=K;if(k.size===0)return;k.size>1&&mh(!1,"A router only supports one blocker at a time");let _e=Array.from(k.entries()),[Re,xe]=_e[_e.length-1],$e=f.blockers.get(Re);if(!($e&&$e.state==="proceeding")&&xe({currentLocation:Y,nextLocation:X,historyAction:Se}))return Re}function ut(K){let Y=[];return C.forEach((X,Se)=>{(!K||K(Se))&&(X.cancel(),Y.push(Se),C.delete(Se))}),Y}function Nt(K,Y,X){if(s=K,a=Y,o=X||(Se=>Se.key),!l&&f.navigation===Y_){l=!0;let Se=pe(f.location,f.matches);Se!=null&&x({restoreScrollPosition:Se})}return()=>{s=null,a=null,o=null}}function et(K,Y){if(s&&o&&a){let X=Y.map(_e=>gC(_e,f.loaderData)),Se=o(K,X)||K.key;s[Se]=a()}}function pe(K,Y){if(s&&o&&a){let X=Y.map(Re=>gC(Re,f.loaderData)),Se=o(K,X)||K.key,_e=s[Se];if(typeof _e=="number")return _e}return null}function Ge(K){n=K}return h={get basename(){return t.basename},get state(){return f},get routes(){return e},initialize:P,subscribe:A,enableScrollRestoration:Nt,navigate:F,fetch:U,revalidate:z,createHref:K=>t.history.createHref(K),encodeLocation:K=>t.history.encodeLocation(K),getFetcher:L,deleteFetcher:se,dispose:B,getBlocker:ve,deleteBlocker:Le,_internalFetchControllers:I,_internalActiveDeferreds:C,_internalSetRoutes:Ge},h}function F4(t){return t!=null&&"formData"in t}function lC(t,e,n){n===void 0&&(n=!1);let r=typeof t=="string"?t:ws(t);if(!e||!F4(e))return{path:r};if(e.formMethod&&!z4(e.formMethod))return{path:r,error:Xi(405,{method:e.formMethod})};let i;if(e.formData&&(i={formMethod:e.formMethod||"get",formAction:ED(r),formEncType:e&&e.formEncType||"application/x-www-form-urlencoded",formData:e.formData},es(i.formMethod)))return{path:r,submission:i};let s=Cs(r),o=bD(e.formData);return n&&s.search&&xD(s.search)&&o.append("index",""),s.search="?"+o,{path:ws(s),submission:i}}function $4(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function cC(t,e,n,r,i,s,o,a,l,c,u,d,h){let f=h?Object.values(h)[0]:d?Object.values(d)[0]:void 0,p=t.createURL(e.location),y=t.createURL(i),w=s||p.toString()===y.toString()||p.search!==y.search,m=h?Object.keys(h)[0]:void 0,v=$4(n,m).filter((I,E)=>{if(I.route.loader==null)return!1;if(U4(e.loaderData,e.matches[E],I)||o.some(T=>T===I.route.id))return!0;let D=e.matches[E],S=I;return uC(I,dt({currentUrl:p,currentParams:D.params,nextUrl:y,nextParams:S.params},r,{actionResult:f,defaultShouldRevalidate:w||SD(D,S)}))}),b=[];return l.forEach((I,E)=>{if(!n.some(O=>O.route.id===I.routeId))return;let D=Zl(c,I.path,u);if(!D){b.push(dt({key:E},I,{matches:null,match:null}));return}let S=zw(D,I.path);if(a.includes(E)){b.push(dt({key:E,matches:D,match:S},I));return}uC(S,dt({currentUrl:p,currentParams:e.matches[e.matches.length-1].params,nextUrl:y,nextParams:n[n.length-1].params},r,{actionResult:f,defaultShouldRevalidate:w}))&&b.push(dt({key:E,matches:D,match:S},I))}),[v,b]}function U4(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function SD(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function uC(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function ju(t,e,n,r,i,s,o,a){i===void 0&&(i="/"),s===void 0&&(s=!1),o===void 0&&(o=!1);let l,c,u,d=new Promise((y,w)=>u=w),h=()=>u();e.signal.addEventListener("abort",h);try{let y=n.route[t];Qe(y,"Could not find the "+t+' to run on the "'+n.route.id+'" route'),c=await Promise.race([y({request:e,params:n.params,context:a}),d]),Qe(c!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(y){l=hn.error,c=y}finally{e.signal.removeEventListener("abort",h)}if(B4(c)){let y=c.status;if(P4.has(y)){let g=c.headers.get("Location");if(Qe(g,"Redirects returned/thrown from loaders/actions must have a Location header"),_D.test(g)){if(!s){let v=new URL(e.url),b=g.startsWith("//")?new URL(v.protocol+g):new URL(g),I=uf(b.pathname,i)!=null;b.origin===v.origin&&I&&(g=b.pathname+b.search+b.hash)}}else{let v=r.slice(0,r.indexOf(n)+1),b=hy(v).map(E=>E.pathnameBase),I=bb(g,b,new URL(e.url).pathname);if(Qe(ws(I),"Unable to resolve redirect location: "+g),i){let E=I.pathname;I.pathname=E==="/"?i:us([i,E])}g=ws(I)}if(s)throw c.headers.set("Location",g),c;return{type:hn.redirect,status:y,location:g,revalidate:c.headers.get("X-Remix-Revalidate")!==null}}if(o)throw{type:l||hn.data,response:c};let w,m=c.headers.get("Content-Type");return m&&/\bapplication\/json\b/.test(m)?w=await c.json():w=await c.text(),l===hn.error?{type:l,error:new Eb(y,c.statusText,w),headers:c.headers}:{type:hn.data,data:w,statusCode:c.status,headers:c.headers}}if(l===hn.error)return{type:l,error:c};if(c instanceof I4){var f,p;return{type:hn.deferred,deferredData:c,statusCode:(f=c.init)==null?void 0:f.status,headers:((p=c.init)==null?void 0:p.headers)&&new Headers(c.init.headers)}}return{type:hn.data,data:c}}function Vu(t,e,n,r){let i=t.createURL(ED(e)).toString(),s={signal:n};if(r&&es(r.formMethod)){let{formMethod:o,formEncType:a,formData:l}=r;s.method=o.toUpperCase(),s.body=a==="application/x-www-form-urlencoded"?bD(l):l}return new Request(i,s)}function bD(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,r instanceof File?r.name:r);return e}function j4(t,e,n,r,i){let s={},o=null,a,l=!1,c={};return n.forEach((u,d)=>{let h=e[d].route.id;if(Qe(!dc(u),"Cannot handle redirect results in processLoaderData"),Rd(u)){let f=ec(t,h),p=u.error;r&&(p=Object.values(r)[0],r=void 0),o=o||{},o[f.route.id]==null&&(o[f.route.id]=p),s[h]=void 0,l||(l=!0,a=yD(u.error)?u.error.status:500),u.headers&&(c[h]=u.headers)}else ga(u)?(i.set(h,u.deferredData),s[h]=u.deferredData.data):s[h]=u.data,u.statusCode!=null&&u.statusCode!==200&&!l&&(a=u.statusCode),u.headers&&(c[h]=u.headers)}),r&&(o=r,s[Object.keys(r)[0]]=void 0),{loaderData:s,errors:o,statusCode:a||200,loaderHeaders:c}}function dC(t,e,n,r,i,s,o,a){let{loaderData:l,errors:c}=j4(e,n,r,i,a);for(let u=0;u<s.length;u++){let{key:d,match:h}=s[u];Qe(o!==void 0&&o[u]!==void 0,"Did not find corresponding fetcher result");let f=o[u];if(Rd(f)){let p=ec(t.matches,h==null?void 0:h.route.id);c&&c[p.route.id]||(c=dt({},c,{[p.route.id]:f.error})),t.fetchers.delete(d)}else if(dc(f))Qe(!1,"Unhandled fetcher revalidation redirect");else if(ga(f))Qe(!1,"Unhandled fetcher deferred data");else{let p={state:"idle",data:f.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};t.fetchers.set(d,p)}}return{loaderData:l,errors:c}}function hC(t,e,n,r){let i=dt({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function ec(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function fC(t){let e=t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Xi(t,e){let{pathname:n,routeId:r,method:i,type:s}=e===void 0?{}:e,o="Unknown Server Error",a="Unknown @remix-run/router error";return t===400?(o="Bad Request",i&&n&&r?a="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"&&(a="defer() is not supported in actions")):t===403?(o="Forbidden",a='Route "'+r+'" does not match URL "'+n+'"'):t===404?(o="Not Found",a='No route matches URL "'+n+'"'):t===405&&(o="Method Not Allowed",i&&n&&r?a="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(a='Invalid request method "'+i.toUpperCase()+'"')),new Eb(t||500,o,new Error(a),!0)}function pC(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(dc(n))return n}}function ED(t){let e=typeof t=="string"?Cs(t):t;return ws(dt({},e,{hash:""}))}function V4(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.hash!==e.hash}function ga(t){return t.type===hn.deferred}function Rd(t){return t.type===hn.error}function dc(t){return(t&&t.type)===hn.redirect}function B4(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function z4(t){return N4.has(t)}function es(t){return A4.has(t)}async function mC(t,e,n,r,i,s){for(let o=0;o<n.length;o++){let a=n[o],l=e[o];if(!l)continue;let c=t.find(d=>d.route.id===l.route.id),u=c!=null&&!SD(c,l)&&(s&&s[l.route.id])!==void 0;ga(a)&&(i||u)&&await TD(a,r,i).then(d=>{d&&(n[o]=d||n[o])})}}async function TD(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:hn.data,data:t.deferredData.unwrappedData}}catch(i){return{type:hn.error,error:i}}return{type:hn.data,data:t.deferredData.data}}}function xD(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function gC(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function zw(t,e){let n=typeof e=="string"?Cs(e).search:e.search;if(t[t.length-1].route.index&&xD(n||""))return t[t.length-1];let r=hy(t);return r[r.length-1]}/**
 * React Router v6.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gm(){return Gm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gm.apply(this,arguments)}function W4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}const H4=typeof Object.is=="function"?Object.is:W4,{useState:G4,useEffect:q4,useLayoutEffect:K4,useDebugValue:Q4}=K0;function Y4(t,e,n){const r=e(),[{inst:i},s]=G4({inst:{value:r,getSnapshot:e}});return K4(()=>{i.value=r,i.getSnapshot=e,X_(i)&&s({inst:i})},[t,r,e]),q4(()=>(X_(i)&&s({inst:i}),t(()=>{X_(i)&&s({inst:i})})),[t]),Q4(r),r}function X_(t){const e=t.getSnapshot,n=t.value;try{const r=e();return!H4(n,r)}catch{return!0}}function X4(t,e,n){return e()}const J4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Z4=!J4,ez=Z4?X4:Y4,tz="useSyncExternalStore"in K0?(t=>t.useSyncExternalStore)(K0):ez,Tb=H.createContext(null),xb=H.createContext(null),df=H.createContext(null),fy=H.createContext(null),jo=H.createContext({outlet:null,matches:[]}),ID=H.createContext(null);function nz(t,e){let{relative:n}=e===void 0?{}:e;hf()||Qe(!1);let{basename:r,navigator:i}=H.useContext(df),{hash:s,pathname:o,search:a}=kD(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:us([r,o])),i.createHref({pathname:l,search:a,hash:s})}function hf(){return H.useContext(fy)!=null}function py(){return hf()||Qe(!1),H.useContext(fy).location}function Vo(){hf()||Qe(!1);let{basename:t,navigator:e}=H.useContext(df),{matches:n}=H.useContext(jo),{pathname:r}=py(),i=JSON.stringify(hy(n).map(a=>a.pathnameBase)),s=H.useRef(!1);return H.useEffect(()=>{s.current=!0}),H.useCallback(function(a,l){if(l===void 0&&(l={}),!s.current)return;if(typeof a=="number"){e.go(a);return}let c=bb(a,JSON.parse(i),r,l.relative==="path");t!=="/"&&(c.pathname=c.pathname==="/"?t:us([t,c.pathname])),(l.replace?e.replace:e.push)(c,l.state,l)},[t,e,i,r])}const rz=H.createContext(null);function iz(t){let e=H.useContext(jo).outlet;return e&&H.createElement(rz.Provider,{value:t},e)}function CD(){let{matches:t}=H.useContext(jo),e=t[t.length-1];return e?e.params:{}}function kD(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=H.useContext(jo),{pathname:i}=py(),s=JSON.stringify(hy(r).map(o=>o.pathnameBase));return H.useMemo(()=>bb(t,JSON.parse(s),i,n==="path"),[t,s,i,n])}function sz(t,e){hf()||Qe(!1);let{navigator:n}=H.useContext(df),r=H.useContext(xb),{matches:i}=H.useContext(jo),s=i[i.length-1],o=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let l=py(),c;if(e){var u;let y=typeof e=="string"?Cs(e):e;a==="/"||(u=y.pathname)!=null&&u.startsWith(a)||Qe(!1),c=y}else c=l;let d=c.pathname||"/",h=a==="/"?d:d.slice(a.length)||"/",f=Zl(t,{pathname:h}),p=cz(f&&f.map(y=>Object.assign({},y,{params:Object.assign({},o,y.params),pathname:us([a,n.encodeLocation?n.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?a:us([a,n.encodeLocation?n.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,r||void 0);return e&&p?H.createElement(fy.Provider,{value:{location:Gm({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:en.Pop}},p):p}function oz(){let t=fz(),e=yD(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},e),n?H.createElement("pre",{style:i},n):null,s)}class az extends H.Component{constructor(e){super(e),this.state={location:e.location,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location?{error:e.error,location:e.location}:{error:e.error||n.error,location:n.location}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?H.createElement(jo.Provider,{value:this.props.routeContext},H.createElement(ID.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function lz(t){let{routeContext:e,match:n,children:r}=t,i=H.useContext(Tb);return i&&i.static&&i.staticContext&&n.route.errorElement&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),H.createElement(jo.Provider,{value:e},r)}function cz(t,e,n){if(e===void 0&&(e=[]),t==null)if(n!=null&&n.errors)t=n.matches;else return null;let r=t,i=n==null?void 0:n.errors;if(i!=null){let s=r.findIndex(o=>o.route.id&&(i==null?void 0:i[o.route.id]));s>=0||Qe(!1),r=r.slice(0,Math.min(r.length,s+1))}return r.reduceRight((s,o,a)=>{let l=o.route.id?i==null?void 0:i[o.route.id]:null,c=n?o.route.errorElement||H.createElement(oz,null):null,u=e.concat(r.slice(0,a+1)),d=()=>H.createElement(lz,{match:o,routeContext:{outlet:s,matches:u}},l?c:o.route.element!==void 0?o.route.element:s);return n&&(o.route.errorElement||a===0)?H.createElement(az,{location:n.location,component:c,error:l,children:d(),routeContext:{outlet:null,matches:u}}):d()},null)}var yC;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator"})(yC||(yC={}));var qm;(function(t){t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator"})(qm||(qm={}));function uz(t){let e=H.useContext(xb);return e||Qe(!1),e}function dz(t){let e=H.useContext(jo);return e||Qe(!1),e}function hz(t){let e=dz(),n=e.matches[e.matches.length-1];return n.route.id||Qe(!1),n.route.id}function fz(){var t;let e=H.useContext(ID),n=uz(qm.UseRouteError),r=hz(qm.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function pz(t){let{fallbackElement:e,router:n}=t,r=tz(n.subscribe,()=>n.state,()=>n.state),i=H.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:o=>n.navigate(o),push:(o,a,l)=>n.navigate(o,{state:a,preventScrollReset:l==null?void 0:l.preventScrollReset}),replace:(o,a,l)=>n.navigate(o,{replace:!0,state:a,preventScrollReset:l==null?void 0:l.preventScrollReset})}),[n]),s=n.basename||"/";return H.createElement(H.Fragment,null,H.createElement(Tb.Provider,{value:{router:n,navigator:i,static:!1,basename:s}},H.createElement(xb.Provider,{value:r},H.createElement(yz,{basename:n.basename,location:n.state.location,navigationType:n.state.historyAction,navigator:i},n.state.initialized?H.createElement(vz,null):e))),null)}function mz(t){return iz(t.context)}function gz(t){Qe(!1)}function yz(t){let{basename:e="/",children:n=null,location:r,navigationType:i=en.Pop,navigator:s,static:o=!1}=t;hf()&&Qe(!1);let a=e.replace(/^\/*/,"/"),l=H.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof r=="string"&&(r=Cs(r));let{pathname:c="/",search:u="",hash:d="",state:h=null,key:f="default"}=r,p=H.useMemo(()=>{let y=uf(c,a);return y==null?null:{pathname:y,search:u,hash:d,state:h,key:f}},[a,c,u,d,h,f]);return p==null?null:H.createElement(df.Provider,{value:l},H.createElement(fy.Provider,{children:n,value:{location:p,navigationType:i}}))}function vz(t){let{children:e,location:n}=t,r=H.useContext(Tb),i=r&&!e?r.router.routes:Ww(e);return sz(i,n)}var vC;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(vC||(vC={}));new Promise(()=>{});function Ww(t,e){e===void 0&&(e=[]);let n=[];return H.Children.forEach(t,(r,i)=>{if(!H.isValidElement(r))return;if(r.type===H.Fragment){n.push.apply(n,Ww(r.props.children,e));return}r.type!==gz&&Qe(!1),!r.props.index||!r.props.children||Qe(!1);let s=[...e,i],o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,hasErrorBoundary:r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle};r.props.children&&(o.children=Ww(r.props.children,s)),n.push(o)}),n}function AD(t){return t.map(e=>{let n=Gm({},e);return n.hasErrorBoundary==null&&(n.hasErrorBoundary=n.errorElement!=null),n.children&&(n.children=AD(n.children)),n})}/**
 * React Router DOM v6.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Km(){return Km=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Km.apply(this,arguments)}function _z(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function wz(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Sz(t,e){return t.button===0&&(!e||e==="_self")&&!wz(t)}const bz=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function Ez(t,e){return M4({basename:e==null?void 0:e.basename,history:r4({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||Tz(),routes:AD(t)}).initialize()}function Tz(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=Km({},e,{errors:xz(e.errors)})),e}function xz(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new Eb(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){let s=new Error(i.message);s.stack="",n[r]=s}else n[r]=i;return n}const Iz=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Cz=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gh=H.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u}=e,d=_z(e,bz),{basename:h}=H.useContext(df),f,p=!1;if(typeof c=="string"&&Cz.test(c)&&(f=c,Iz)){let g=new URL(window.location.href),v=c.startsWith("//")?new URL(g.protocol+c):new URL(c),b=uf(v.pathname,h);v.origin===g.origin&&b!=null?c=b+v.search+v.hash:p=!0}let y=nz(c,{relative:i}),w=kz(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i});function m(g){r&&r(g),g.defaultPrevented||w(g)}return H.createElement("a",Km({},d,{href:f||y,onClick:p||s?r:m,ref:n,target:l}))});var _C;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmitImpl="useSubmitImpl",t.UseFetcher="useFetcher"})(_C||(_C={}));var wC;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(wC||(wC={}));function kz(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o}=e===void 0?{}:e,a=Vo(),l=py(),c=kD(t,{relative:o});return H.useCallback(u=>{if(Sz(u,n)){u.preventDefault();let d=r!==void 0?r:ws(l)===ws(c);a(t,{replace:d,state:i,preventScrollReset:s,relative:o})}},[l,a,c,r,i,n,t,s,o])}function Az(t){const e=new Error(t);if(e.stack===void 0)try{throw e}catch{}return e}var Rz=Az,Ke=Rz;function Nz(t){return!!t&&typeof t.then=="function"}var Ct=Nz;function Pz(t,e){if(t!=null)return t;throw Ke(e??"Got unexpected null or undefined")}var Ot=Pz;function ze(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class my{getValue(){throw Ke("BaseLoadable")}toPromise(){throw Ke("BaseLoadable")}valueMaybe(){throw Ke("BaseLoadable")}valueOrThrow(){throw Ke(`Loadable expected value, but in "${this.state}" state`)}promiseMaybe(){throw Ke("BaseLoadable")}promiseOrThrow(){throw Ke(`Loadable expected promise, but in "${this.state}" state`)}errorMaybe(){throw Ke("BaseLoadable")}errorOrThrow(){throw Ke(`Loadable expected error, but in "${this.state}" state`)}is(e){return e.state===this.state&&e.contents===this.contents}map(e){throw Ke("BaseLoadable")}}class Dz extends my{constructor(e){super(),ze(this,"state","hasValue"),ze(this,"contents",void 0),this.contents=e}getValue(){return this.contents}toPromise(){return Promise.resolve(this.contents)}valueMaybe(){return this.contents}valueOrThrow(){return this.contents}promiseMaybe(){}errorMaybe(){}map(e){try{const n=e(this.contents);return Ct(n)?Va(n):kc(n)?n:ff(n)}catch(n){return Ct(n)?Va(n.next(()=>this.map(e))):gy(n)}}}class Oz extends my{constructor(e){super(),ze(this,"state","hasError"),ze(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return Promise.reject(this.contents)}valueMaybe(){}promiseMaybe(){}errorMaybe(){return this.contents}errorOrThrow(){return this.contents}map(e){return this}}class RD extends my{constructor(e){super(),ze(this,"state","loading"),ze(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return this.contents}valueMaybe(){}promiseMaybe(){return this.contents}promiseOrThrow(){return this.contents}errorMaybe(){}map(e){return Va(this.contents.then(n=>{const r=e(n);if(kc(r)){const i=r;switch(i.state){case"hasValue":return i.contents;case"hasError":throw i.contents;case"loading":return i.contents}}return r}).catch(n=>{if(Ct(n))return n.then(()=>this.map(e).contents);throw n}))}}function ff(t){return Object.freeze(new Dz(t))}function gy(t){return Object.freeze(new Oz(t))}function Va(t){return Object.freeze(new RD(t))}function ND(){return Object.freeze(new RD(new Promise(()=>{})))}function Lz(t){return t.every(e=>e.state==="hasValue")?ff(t.map(e=>e.contents)):t.some(e=>e.state==="hasError")?gy(Ot(t.find(e=>e.state==="hasError"),"Invalid loadable passed to loadableAll").contents):Va(Promise.all(t.map(e=>e.contents)))}function PD(t){const n=(Array.isArray(t)?t:Object.getOwnPropertyNames(t).map(i=>t[i])).map(i=>kc(i)?i:Ct(i)?Va(i):ff(i)),r=Lz(n);return Array.isArray(t)?r:r.map(i=>Object.getOwnPropertyNames(t).reduce((s,o,a)=>({...s,[o]:i[a]}),{}))}function kc(t){return t instanceof my}const Mz={of:t=>Ct(t)?Va(t):kc(t)?t:ff(t),error:t=>gy(t),loading:()=>ND(),all:PD,isLoadable:kc};var fl={loadableWithValue:ff,loadableWithError:gy,loadableWithPromise:Va,loadableLoading:ND,loadableAll:PD,isLoadable:kc,RecoilLoadable:Mz},Fz=fl.loadableWithValue,$z=fl.loadableWithError,Uz=fl.loadableWithPromise,jz=fl.loadableLoading,Vz=fl.loadableAll,Bz=fl.isLoadable,zz=fl.RecoilLoadable,pf=Object.freeze({__proto__:null,loadableWithValue:Fz,loadableWithError:$z,loadableWithPromise:Uz,loadableLoading:jz,loadableAll:Vz,isLoadable:Bz,RecoilLoadable:zz});const Hw={RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED:!0,RECOIL_GKS_ENABLED:new Set(["recoil_hamt_2020","recoil_sync_external_store","recoil_suppress_rerender_in_callback","recoil_memory_managament_2020"])};function Wz(t,e){var n,r;const i=(n=process.env[t])===null||n===void 0||(r=n.toLowerCase())===null||r===void 0?void 0:r.trim();if(i==null||i==="")return;if(!["true","false"].includes(i))throw Ke(`({}).${t} value must be 'true', 'false', or empty: ${i}`);e(i==="true")}function Hz(t,e){var n;const r=(n=process.env[t])===null||n===void 0?void 0:n.trim();r==null||r===""||e(r.split(/\s*,\s*|\s+/))}function Gz(){var t;typeof process>"u"||((t=process)===null||t===void 0?void 0:t.env)!=null&&(Wz("RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED",e=>{Hw.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED=e}),Hz("RECOIL_GKS_ENABLED",e=>{e.forEach(n=>{Hw.RECOIL_GKS_ENABLED.add(n)})}))}Gz();var lu=Hw;function yy(t){return lu.RECOIL_GKS_ENABLED.has(t)}yy.setPass=t=>{lu.RECOIL_GKS_ENABLED.add(t)};yy.setFail=t=>{lu.RECOIL_GKS_ENABLED.delete(t)};yy.clear=()=>{lu.RECOIL_GKS_ENABLED.clear()};var St=yy;function qz(t,e,{error:n}={}){return null}var Kz=qz,Ib=Kz,J_,Z_,e0;const Qz=(J_=Pe.createMutableSource)!==null&&J_!==void 0?J_:Pe.unstable_createMutableSource,DD=(Z_=Pe.useMutableSource)!==null&&Z_!==void 0?Z_:Pe.unstable_useMutableSource,OD=(e0=Pe.useSyncExternalStore)!==null&&e0!==void 0?e0:Pe.unstable_useSyncExternalStore;function Yz(){var t;const{ReactCurrentDispatcher:e,ReactCurrentOwner:n}=Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;return((t=e==null?void 0:e.current)!==null&&t!==void 0?t:n.currentDispatcher).useSyncExternalStore!=null}function Xz(){return St("recoil_transition_support")?{mode:"TRANSITION_SUPPORT",early:!0,concurrent:!0}:St("recoil_sync_external_store")&&OD!=null?{mode:"SYNC_EXTERNAL_STORE",early:!0,concurrent:!1}:St("recoil_mutable_source")&&DD!=null&&typeof window<"u"&&!window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE?St("recoil_suppress_rerender_in_callback")?{mode:"MUTABLE_SOURCE",early:!0,concurrent:!0}:{mode:"MUTABLE_SOURCE",early:!1,concurrent:!1}:St("recoil_suppress_rerender_in_callback")?{mode:"LEGACY",early:!0,concurrent:!1}:{mode:"LEGACY",early:!1,concurrent:!1}}function Jz(){return!1}var mf={createMutableSource:Qz,useMutableSource:DD,useSyncExternalStore:OD,currentRendererSupportsUseSyncExternalStore:Yz,reactMode:Xz,isFastRefreshEnabled:Jz};class Cb{constructor(e){ze(this,"key",void 0),this.key=e}toJSON(){return{key:this.key}}}class LD extends Cb{}class MD extends Cb{}function Zz(t){return t instanceof LD||t instanceof MD}var vy={AbstractRecoilValue:Cb,RecoilState:LD,RecoilValueReadOnly:MD,isRecoilValue:Zz},e5=vy.AbstractRecoilValue,t5=vy.RecoilState,n5=vy.RecoilValueReadOnly,r5=vy.isRecoilValue,Ac=Object.freeze({__proto__:null,AbstractRecoilValue:e5,RecoilState:t5,RecoilValueReadOnly:n5,isRecoilValue:r5});function i5(t,e){return function*(){let n=0;for(const r of t)yield e(r,n++)}()}var _y=i5;class FD{}const s5=new FD,Ba=new Map,kb=new Map;function o5(t){return _y(t,e=>Ot(kb.get(e)))}function a5(t){if(Ba.has(t)){const e=`Duplicate atom key "${t}". This is a FATAL ERROR in
      production. But it is safe to ignore this warning if it occurred because of
      hot module replacement.`;console.warn(e)}}function l5(t){lu.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED&&a5(t.key),Ba.set(t.key,t);const e=t.set==null?new Ac.RecoilValueReadOnly(t.key):new Ac.RecoilState(t.key);return kb.set(t.key,e),e}class $D extends Error{}function c5(t){const e=Ba.get(t);if(e==null)throw new $D(`Missing definition for RecoilValue: "${t}""`);return e}function u5(t){return Ba.get(t)}const Qm=new Map;function d5(t){var e;if(!St("recoil_memory_managament_2020"))return;const n=Ba.get(t);if(n!=null&&(e=n.shouldDeleteConfigOnRelease)!==null&&e!==void 0&&e.call(n)){var r;Ba.delete(t),(r=UD(t))===null||r===void 0||r(),Qm.delete(t)}}function h5(t,e){St("recoil_memory_managament_2020")&&(e===void 0?Qm.delete(t):Qm.set(t,e))}function UD(t){return Qm.get(t)}var xr={nodes:Ba,recoilValues:kb,registerNode:l5,getNode:c5,getNodeMaybe:u5,deleteNodeConfigIfPossible:d5,setConfigDeletionHandler:h5,getConfigDeletionHandler:UD,recoilValuesForKeys:o5,NodeMissingError:$D,DefaultValue:FD,DEFAULT_VALUE:s5};function f5(t,e){e()}var p5={enqueueExecution:f5};function m5(t,e){return e={exports:{}},t(e,e.exports),e.exports}var g5=m5(function(t){var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},n={},r=5,i=Math.pow(2,r),s=i-1,o=i/2,a=i/4,l={},c=function(V){return function(){return V}},u=n.hash=function(W){var V=typeof W>"u"?"undefined":e(W);if(V==="number")return W;V!=="string"&&(W+="");for(var J=0,re=0,ce=W.length;re<ce;++re){var he=W.charCodeAt(re);J=(J<<5)-J+he|0}return J},d=function(V){return V-=V>>1&1431655765,V=(V&858993459)+(V>>2&858993459),V=V+(V>>4)&252645135,V+=V>>8,V+=V>>16,V&127},h=function(V,J){return J>>>V&s},f=function(V){return 1<<V},p=function(V,J){return d(V&J-1)},y=function(V,J,re,ce){var he=ce;if(!V){var Oe=ce.length;he=new Array(Oe);for(var Ie=0;Ie<Oe;++Ie)he[Ie]=ce[Ie]}return he[J]=re,he},w=function(V,J,re){var ce=re.length-1,he=0,Oe=0,Ie=re;if(V)he=Oe=J;else for(Ie=new Array(ce);he<J;)Ie[Oe++]=re[he++];for(++he;he<=ce;)Ie[Oe++]=re[he++];return V&&(Ie.length=ce),Ie},m=function(V,J,re,ce){var he=ce.length;if(V){for(var Oe=he;Oe>=J;)ce[Oe--]=ce[Oe];return ce[J]=re,ce}for(var Ie=0,Ce=0,Fe=new Array(he+1);Ie<J;)Fe[Ce++]=ce[Ie++];for(Fe[J]=re;Ie<he;)Fe[++Ce]=ce[Ie++];return Fe},g=1,v=2,b=3,I=4,E={__hamt_isEmpty:!0},D=function(V){return V===E||V&&V.__hamt_isEmpty},S=function(V,J,re,ce){return{type:g,edit:V,hash:J,key:re,value:ce,_modify:j}},T=function(V,J,re){return{type:v,edit:V,hash:J,children:re,_modify:F}},O=function(V,J,re){return{type:b,edit:V,mask:J,children:re,_modify:z}},C=function(V,J,re){return{type:I,edit:V,size:J,children:re,_modify:Z}},k=function(V){return V===E||V.type===g||V.type===v},R=function(V,J,re,ce,he){for(var Oe=[],Ie=ce,Ce=0,Fe=0;Ie;++Fe)Ie&1&&(Oe[Fe]=he[Ce++]),Ie>>>=1;return Oe[J]=re,C(V,Ce+1,Oe)},P=function(V,J,re,ce){for(var he=new Array(J-1),Oe=0,Ie=0,Ce=0,Fe=ce.length;Ce<Fe;++Ce)if(Ce!==re){var rt=ce[Ce];rt&&!D(rt)&&(he[Oe++]=rt,Ie|=1<<Ce)}return O(V,Ie,he)},B=function W(V,J,re,ce,he,Oe){if(re===he)return T(V,re,[Oe,ce]);var Ie=h(J,re),Ce=h(J,he);return O(V,f(Ie)|f(Ce),Ie===Ce?[W(V,J+r,re,ce,he,Oe)]:Ie<Ce?[ce,Oe]:[Oe,ce])},A=function(V,J,re,ce,he,Oe,Ie,Ce){for(var Fe=he.length,rt=0;rt<Fe;++rt){var it=he[rt];if(re(Ie,it.key)){var Ze=it.value,vt=Oe(Ze);return vt===Ze?he:vt===l?(--Ce.value,w(V,rt,he)):y(V,rt,S(J,ce,Ie,vt),he)}}var Fn=Oe();return Fn===l?he:(++Ce.value,y(V,Fe,S(J,ce,Ie,Fn),he))},x=function(V,J){return V===J.edit},j=function(V,J,re,ce,he,Oe,Ie){if(J(Oe,this.key)){var Ce=ce(this.value);return Ce===this.value?this:Ce===l?(--Ie.value,E):x(V,this)?(this.value=Ce,this):S(V,he,Oe,Ce)}var Fe=ce();return Fe===l?this:(++Ie.value,B(V,re,this.hash,this,he,S(V,he,Oe,Fe)))},F=function(V,J,re,ce,he,Oe,Ie){if(he===this.hash){var Ce=x(V,this),Fe=A(Ce,V,J,this.hash,this.children,ce,Oe,Ie);return Fe===this.children?this:Fe.length>1?T(V,this.hash,Fe):Fe[0]}var rt=ce();return rt===l?this:(++Ie.value,B(V,re,this.hash,this,he,S(V,he,Oe,rt)))},z=function(V,J,re,ce,he,Oe,Ie){var Ce=this.mask,Fe=this.children,rt=h(re,he),it=f(rt),Ze=p(Ce,it),vt=Ce&it,Fn=vt?Fe[Ze]:E,Si=Fn._modify(V,J,re+r,ce,he,Oe,Ie);if(Fn===Si)return this;var Al=x(V,this),Zo=Ce,Yn=void 0;if(vt&&D(Si)){if(Zo&=~it,!Zo)return E;if(Fe.length<=2&&k(Fe[Ze^1]))return Fe[Ze^1];Yn=w(Al,Ze,Fe)}else if(!vt&&!D(Si)){if(Fe.length>=o)return R(V,rt,Si,Ce,Fe);Zo|=it,Yn=m(Al,Ze,Si,Fe)}else Yn=y(Al,Ze,Si,Fe);return Al?(this.mask=Zo,this.children=Yn,this):O(V,Zo,Yn)},Z=function(V,J,re,ce,he,Oe,Ie){var Ce=this.size,Fe=this.children,rt=h(re,he),it=Fe[rt],Ze=(it||E)._modify(V,J,re+r,ce,he,Oe,Ie);if(it===Ze)return this;var vt=x(V,this),Fn=void 0;if(D(it)&&!D(Ze))++Ce,Fn=y(vt,rt,Ze,Fe);else if(!D(it)&&D(Ze)){if(--Ce,Ce<=a)return P(V,Ce,rt,Fe);Fn=y(vt,rt,E,Fe)}else Fn=y(vt,rt,Ze,Fe);return vt?(this.size=Ce,this.children=Fn,this):C(V,Ce,Fn)};E._modify=function(W,V,J,re,ce,he,Oe){var Ie=re();return Ie===l?E:(++Oe.value,S(W,ce,he,Ie))};function N(W,V,J,re,ce){this._editable=W,this._edit=V,this._config=J,this._root=re,this._size=ce}N.prototype.setTree=function(W,V){return this._editable?(this._root=W,this._size=V,this):W===this._root?this:new N(this._editable,this._edit,this._config,W,V)};var $=n.tryGetHash=function(W,V,J,re){for(var ce=re._root,he=0,Oe=re._config.keyEq;;)switch(ce.type){case g:return Oe(J,ce.key)?ce.value:W;case v:{if(V===ce.hash)for(var Ie=ce.children,Ce=0,Fe=Ie.length;Ce<Fe;++Ce){var rt=Ie[Ce];if(Oe(J,rt.key))return rt.value}return W}case b:{var it=h(he,V),Ze=f(it);if(ce.mask&Ze){ce=ce.children[p(ce.mask,Ze)],he+=r;break}return W}case I:{if(ce=ce.children[h(he,V)],ce){he+=r;break}return W}default:return W}};N.prototype.tryGetHash=function(W,V,J){return $(W,V,J,this)};var L=n.tryGet=function(W,V,J){return $(W,J._config.hash(V),V,J)};N.prototype.tryGet=function(W,V){return L(W,V,this)};var U=n.getHash=function(W,V,J){return $(void 0,W,V,J)};N.prototype.getHash=function(W,V){return U(W,V,this)},n.get=function(W,V){return $(void 0,V._config.hash(W),W,V)},N.prototype.get=function(W,V){return L(V,W,this)};var M=n.has=function(W,V,J){return $(l,W,V,J)!==l};N.prototype.hasHash=function(W,V){return M(W,V,this)};var te=n.has=function(W,V){return M(V._config.hash(W),W,V)};N.prototype.has=function(W){return te(W,this)};var G=function(V,J){return V===J};n.make=function(W){return new N(0,0,{keyEq:W&&W.keyEq||G,hash:W&&W.hash||u},E,0)},n.empty=n.make();var ee=n.isEmpty=function(W){return W&&!!D(W._root)};N.prototype.isEmpty=function(){return ee(this)};var ue=n.modifyHash=function(W,V,J,re){var ce={value:re._size},he=re._root._modify(re._editable?re._edit:NaN,re._config.keyEq,0,W,V,J,ce);return re.setTree(he,ce.value)};N.prototype.modifyHash=function(W,V,J){return ue(J,W,V,this)};var ye=n.modify=function(W,V,J){return ue(W,J._config.hash(V),V,J)};N.prototype.modify=function(W,V){return ye(V,W,this)};var se=n.setHash=function(W,V,J,re){return ue(c(J),W,V,re)};N.prototype.setHash=function(W,V,J){return se(W,V,J,this)};var De=n.set=function(W,V,J){return se(J._config.hash(W),W,V,J)};N.prototype.set=function(W,V){return De(W,V,this)};var He=c(l),Ee=n.removeHash=function(W,V,J){return ue(He,W,V,J)};N.prototype.removeHash=N.prototype.deleteHash=function(W,V){return Ee(W,V,this)};var Me=n.remove=function(W,V){return Ee(V._config.hash(W),W,V)};N.prototype.remove=N.prototype.delete=function(W){return Me(W,this)};var ve=n.beginMutation=function(W){return new N(W._editable+1,W._edit+1,W._config,W._root,W._size)};N.prototype.beginMutation=function(){return ve(this)};var Le=n.endMutation=function(W){return W._editable=W._editable&&W._editable-1,W};N.prototype.endMutation=function(){return Le(this)};var ft=n.mutate=function(W,V){var J=ve(V);return W(J),Le(J)};N.prototype.mutate=function(W){return ft(W,this)};var qe=function(V){return V&&ut(V[0],V[1],V[2],V[3],V[4])},ut=function(V,J,re,ce,he){for(;re<V;){var Oe=J[re++];if(Oe&&!D(Oe))return Nt(Oe,ce,[V,J,re,ce,he])}return qe(he)},Nt=function(V,J,re){switch(V.type){case g:return{value:J(V),rest:re};case v:case I:case b:var ce=V.children;return ut(ce.length,ce,0,J,re);default:return qe(re)}},et={done:!0};function pe(W){this.v=W}pe.prototype.next=function(){if(!this.v)return et;var W=this.v;return this.v=qe(W.rest),W},pe.prototype[Symbol.iterator]=function(){return this};var Ge=function(V,J){return new pe(Nt(V._root,J))},K=function(V){return[V.key,V.value]},Y=n.entries=function(W){return Ge(W,K)};N.prototype.entries=N.prototype[Symbol.iterator]=function(){return Y(this)};var X=function(V){return V.key},Se=n.keys=function(W){return Ge(W,X)};N.prototype.keys=function(){return Se(this)};var _e=function(V){return V.value},Re=n.values=N.prototype.values=function(W){return Ge(W,_e)};N.prototype.values=function(){return Re(this)};var xe=n.fold=function(W,V,J){var re=J._root;if(re.type===g)return W(V,re.value,re.key);for(var ce=[re.children],he=void 0;he=ce.pop();)for(var Oe=0,Ie=he.length;Oe<Ie;){var Ce=he[Oe++];Ce&&Ce.type&&(Ce.type===g?V=W(V,Ce.value,Ce.key):ce.push(Ce.children))}return V};N.prototype.fold=function(W,V){return xe(W,V,this)};var $e=n.forEach=function(W,V){return xe(function(J,re,ce){return W(re,ce,V)},null,V)};N.prototype.forEach=function(W){return $e(W,this)};var we=n.count=function(W){return W._size};N.prototype.count=function(){return we(this)},Object.defineProperty(N.prototype,"size",{get:N.prototype.count}),t.exports?t.exports=n:(void 0).hamt=n});class y5{constructor(e){ze(this,"_map",void 0),this._map=new Map(e==null?void 0:e.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(e){return this._map.get(e)}has(e){return this._map.has(e)}set(e,n){return this._map.set(e,n),this}delete(e){return this._map.delete(e),this}clone(){return Rb(this)}toMap(){return new Map(this._map)}}class Ab{constructor(e){if(ze(this,"_hamt",g5.empty.beginMutation()),e instanceof Ab){const n=e._hamt.endMutation();e._hamt=n.beginMutation(),this._hamt=n.beginMutation()}else if(e)for(const[n,r]of e.entries())this._hamt.set(n,r)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(e){return this._hamt.get(e)}has(e){return this._hamt.has(e)}set(e,n){return this._hamt.set(e,n),this}delete(e){return this._hamt.delete(e),this}clone(){return Rb(this)}toMap(){return new Map(this._hamt)}}function Rb(t){return St("recoil_hamt_2020")?new Ab(t):new y5(t)}var v5={persistentMap:Rb},_5=v5.persistentMap,w5=Object.freeze({__proto__:null,persistentMap:_5});function S5(t,...e){const n=new Set;e:for(const r of t){for(const i of e)if(i.has(r))continue e;n.add(r)}return n}var Nd=S5;function b5(t,e){const n=new Map;return t.forEach((r,i)=>{n.set(i,e(r,i))}),n}var Ym=b5;function E5(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}}function T5(t){return{nodeDeps:Ym(t.nodeDeps,e=>new Set(e)),nodeToNodeSubscriptions:Ym(t.nodeToNodeSubscriptions,e=>new Set(e))}}function t0(t,e,n,r){const{nodeDeps:i,nodeToNodeSubscriptions:s}=n,o=i.get(t);if(o&&r&&o!==r.nodeDeps.get(t))return;i.set(t,e);const a=o==null?e:Nd(e,o);for(const l of a)s.has(l)||s.set(l,new Set),Ot(s.get(l)).add(t);if(o){const l=Nd(o,e);for(const c of l){if(!s.has(c))return;const u=Ot(s.get(c));u.delete(t),u.size===0&&s.delete(c)}}}function x5(t,e,n,r){var i,s,o,a;const l=n.getState();r===l.currentTree.version||r===((i=l.nextTree)===null||i===void 0?void 0:i.version)||((s=l.previousTree)===null||s===void 0||s.version);const c=n.getGraph(r);if(t0(t,e,c),r===((o=l.previousTree)===null||o===void 0?void 0:o.version)){const d=n.getGraph(l.currentTree.version);t0(t,e,d,c)}if(r===((a=l.previousTree)===null||a===void 0?void 0:a.version)||r===l.currentTree.version){var u;const d=(u=l.nextTree)===null||u===void 0?void 0:u.version;if(d!==void 0){const h=n.getGraph(d);t0(t,e,h,c)}}}var gf={cloneGraph:T5,graph:E5,saveDepsToStore:x5};let I5=0;const C5=()=>I5++;let k5=0;const A5=()=>k5++;let R5=0;const N5=()=>R5++;var wy={getNextTreeStateVersion:C5,getNextStoreID:A5,getNextComponentID:N5};const{persistentMap:SC}=w5,{graph:P5}=gf,{getNextTreeStateVersion:jD}=wy;function VD(){const t=jD();return{version:t,stateID:t,transactionMetadata:{},dirtyAtoms:new Set,atomValues:SC(),nonvalidatedAtoms:SC()}}function D5(){const t=VD();return{currentTree:t,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(t.version,P5()),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}var BD={makeEmptyTreeState:VD,makeEmptyStoreState:D5,getNextTreeStateVersion:jD};class zD{}function O5(){return new zD}var Sy={RetentionZone:zD,retentionZone:O5};function L5(t,e){const n=new Set(t);return n.add(e),n}function M5(t,e){const n=new Set(t);return n.delete(e),n}function F5(t,e,n){const r=new Map(t);return r.set(e,n),r}function $5(t,e,n){const r=new Map(t);return r.set(e,n(r.get(e))),r}function U5(t,e){const n=new Map(t);return n.delete(e),n}function j5(t,e){const n=new Map(t);return e.forEach(r=>n.delete(r)),n}var WD={setByAddingToSet:L5,setByDeletingFromSet:M5,mapBySettingInMap:F5,mapByUpdatingInMap:$5,mapByDeletingFromMap:U5,mapByDeletingMultipleFromMap:j5};function*V5(t,e){let n=0;for(const r of t)e(r,n++)&&(yield r)}var Nb=V5;function B5(t,e){return new Proxy(t,{get:(r,i)=>(!(i in r)&&i in e&&(r[i]=e[i]()),r[i]),ownKeys:r=>Object.keys(r)})}var HD=B5;const{getNode:yf,getNodeMaybe:z5,recoilValuesForKeys:bC}=xr,{RetentionZone:EC}=Sy,{setByAddingToSet:W5}=WD,H5=Object.freeze(new Set);class G5 extends Error{}function q5(t,e,n){if(!St("recoil_memory_managament_2020"))return()=>{};const{nodesRetainedByZone:r}=t.getState().retention;function i(s){let o=r.get(s);o||r.set(s,o=new Set),o.add(e)}if(n instanceof EC)i(n);else if(Array.isArray(n))for(const s of n)i(s);return()=>{if(!St("recoil_memory_managament_2020"))return;const{retention:s}=t.getState();function o(a){const l=s.nodesRetainedByZone.get(a);l==null||l.delete(e),l&&l.size===0&&s.nodesRetainedByZone.delete(a)}if(n instanceof EC)o(n);else if(Array.isArray(n))for(const a of n)o(a)}}function Pb(t,e,n,r){const i=t.getState();if(i.nodeCleanupFunctions.has(n))return;const s=yf(n),o=q5(t,n,s.retainedBy),a=s.init(t,e,r);i.nodeCleanupFunctions.set(n,()=>{a(),o()})}function K5(t,e,n){Pb(t,t.getState().currentTree,e,n)}function Q5(t,e){var n;const r=t.getState();(n=r.nodeCleanupFunctions.get(e))===null||n===void 0||n(),r.nodeCleanupFunctions.delete(e)}function Y5(t,e,n){return Pb(t,e,n,"get"),yf(n).get(t,e)}function GD(t,e,n){return yf(n).peek(t,e)}function X5(t,e,n){var r;const i=z5(e);return i==null||(r=i.invalidate)===null||r===void 0||r.call(i,t),{...t,atomValues:t.atomValues.clone().delete(e),nonvalidatedAtoms:t.nonvalidatedAtoms.clone().set(e,n),dirtyAtoms:W5(t.dirtyAtoms,e)}}function J5(t,e,n,r){const i=yf(n);if(i.set==null)throw new G5(`Attempt to set read-only RecoilValue: ${n}`);const s=i.set;return Pb(t,e,n,"set"),s(t,e,r)}function Z5(t,e,n){const r=t.getState(),i=t.getGraph(e.version),s=yf(n).nodeType;return HD({type:s},{loadable:()=>GD(t,e,n),isActive:()=>r.knownAtoms.has(n)||r.knownSelectors.has(n),isSet:()=>s==="selector"?!1:e.atomValues.has(n),isModified:()=>e.dirtyAtoms.has(n),deps:()=>{var o;return bC((o=i.nodeDeps.get(n))!==null&&o!==void 0?o:[])},subscribers:()=>{var o,a;return{nodes:bC(Nb(qD(t,e,new Set([n])),l=>l!==n)),components:_y((o=(a=r.nodeToComponentSubscriptions.get(n))===null||a===void 0?void 0:a.values())!==null&&o!==void 0?o:[],([l])=>({name:l}))}}})}function qD(t,e,n){const r=new Set,i=Array.from(n),s=t.getGraph(e.version);for(let a=i.pop();a;a=i.pop()){var o;r.add(a);const l=(o=s.nodeToNodeSubscriptions.get(a))!==null&&o!==void 0?o:H5;for(const c of l)r.has(c)||i.push(c)}return r}var Bo={getNodeLoadable:Y5,peekNodeLoadable:GD,setNodeValue:J5,initializeNode:K5,cleanUpNode:Q5,setUnvalidatedAtomValue_DEPRECATED:X5,peekNodeInfo:Z5,getDownstreamNodes:qD};let KD=null;function e6(t){KD=t}function t6(){var t;(t=KD)===null||t===void 0||t()}var QD={setInvalidateMemoizedSnapshot:e6,invalidateMemoizedSnapshot:t6};const{getDownstreamNodes:n6,getNodeLoadable:YD,setNodeValue:r6}=Bo,{getNextComponentID:i6}=wy,{getNode:s6,getNodeMaybe:XD}=xr,{DefaultValue:Db}=xr,{reactMode:o6}=mf,{AbstractRecoilValue:a6,RecoilState:l6,RecoilValueReadOnly:c6,isRecoilValue:u6}=Ac,{invalidateMemoizedSnapshot:d6}=QD;function h6(t,{key:e},n=t.getState().currentTree){var r,i;const s=t.getState();n.version===s.currentTree.version||n.version===((r=s.nextTree)===null||r===void 0?void 0:r.version)||(n.version,(i=s.previousTree)===null||i===void 0||i.version);const o=YD(t,n,e);return o.state==="loading"&&o.contents.catch(()=>{}),o}function f6(t,e){const n=t.clone();return e.forEach((r,i)=>{r.state==="hasValue"&&r.contents instanceof Db?n.delete(i):n.set(i,r)}),n}function p6(t,e,{key:n},r){if(typeof r=="function"){const i=YD(t,e,n);if(i.state==="loading"){const s=`Tried to set atom or selector "${n}" using an updater function while the current state is pending, this is not currently supported.`;throw Ke(s)}else if(i.state==="hasError")throw i.contents;return r(i.contents)}else return r}function m6(t,e,n){if(n.type==="set"){const{recoilValue:i,valueOrUpdater:s}=n,o=p6(t,e,i,s),a=r6(t,e,i.key,o);for(const[l,c]of a.entries())Gw(e,l,c)}else if(n.type==="setLoadable"){const{recoilValue:{key:i},loadable:s}=n;Gw(e,i,s)}else if(n.type==="markModified"){const{recoilValue:{key:i}}=n;e.dirtyAtoms.add(i)}else if(n.type==="setUnvalidated"){var r;const{recoilValue:{key:i},unvalidatedValue:s}=n,o=XD(i);o==null||(r=o.invalidate)===null||r===void 0||r.call(o,e),e.atomValues.delete(i),e.nonvalidatedAtoms.set(i,s),e.dirtyAtoms.add(i)}else Ib(`Unknown action ${n.type}`)}function Gw(t,e,n){n.state==="hasValue"&&n.contents instanceof Db?t.atomValues.delete(e):t.atomValues.set(e,n),t.dirtyAtoms.add(e),t.nonvalidatedAtoms.delete(e)}function JD(t,e){t.replaceState(n=>{const r=ZD(n);for(const i of e)m6(t,r,i);return eO(t,r),d6(),r})}function by(t,e){if(Pd.length){const n=Pd[Pd.length-1];let r=n.get(t);r||n.set(t,r=[]),r.push(e)}else JD(t,[e])}const Pd=[];function g6(){const t=new Map;return Pd.push(t),()=>{for(const[e,n]of t)JD(e,n);Pd.pop()}}function ZD(t){return{...t,atomValues:t.atomValues.clone(),nonvalidatedAtoms:t.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(t.dirtyAtoms)}}function eO(t,e){const n=n6(t,e,e.dirtyAtoms);for(const s of n){var r,i;(r=XD(s))===null||r===void 0||(i=r.invalidate)===null||i===void 0||i.call(r,e)}}function tO(t,e,n){by(t,{type:"set",recoilValue:e,valueOrUpdater:n})}function y6(t,e,n){if(n instanceof Db)return tO(t,e,n);by(t,{type:"setLoadable",recoilValue:e,loadable:n})}function v6(t,e){by(t,{type:"markModified",recoilValue:e})}function _6(t,e,n){by(t,{type:"setUnvalidated",recoilValue:e,unvalidatedValue:n})}function w6(t,{key:e},n,r=null){const i=i6(),s=t.getState();s.nodeToComponentSubscriptions.has(e)||s.nodeToComponentSubscriptions.set(e,new Map),Ot(s.nodeToComponentSubscriptions.get(e)).set(i,[r??"<not captured>",n]);const o=o6();if(o.early&&(o.mode==="LEGACY"||o.mode==="MUTABLE_SOURCE")){const a=t.getState().nextTree;a&&a.dirtyAtoms.has(e)&&n(a)}return{release:()=>{const a=t.getState(),l=a.nodeToComponentSubscriptions.get(e);l===void 0||!l.has(i)||(l.delete(i),l.size===0&&a.nodeToComponentSubscriptions.delete(e))}}}function S6(t,e){var n;const{currentTree:r}=t.getState(),i=s6(e.key);(n=i.clearCache)===null||n===void 0||n.call(i,t,r)}var Qi={RecoilValueReadOnly:c6,AbstractRecoilValue:a6,RecoilState:l6,getRecoilValueAsLoadable:h6,setRecoilValue:tO,setRecoilValueLoadable:y6,markRecoilValueModified:v6,setUnvalidatedRecoilValue:_6,subscribeToRecoilValue:w6,isRecoilValue:u6,applyAtomValueWrites:f6,batchStart:g6,writeLoadableToTreeState:Gw,invalidateDownstreams:eO,copyTreeState:ZD,refreshRecoilValue:S6};function b6(t,e,n){const r=t.entries();let i=r.next();for(;!i.done;){const s=i.value;if(e.call(n,s[1],s[0],t))return!0;i=r.next()}return!1}var E6=b6;const{cleanUpNode:T6}=Bo,{deleteNodeConfigIfPossible:x6,getNode:nO}=xr,{RetentionZone:rO}=Sy,I6=12e4,iO=new Set;function sO(t,e){const n=t.getState(),r=n.currentTree;if(n.nextTree)return;const i=new Set;for(const o of e)if(o instanceof rO)for(const a of R6(n,o))i.add(a);else i.add(o);const s=C6(t,i);for(const o of s)A6(t,r,o)}function C6(t,e){const n=t.getState(),r=n.currentTree,i=t.getGraph(r.version),s=new Set,o=new Set;return a(e),s;function a(l){const c=new Set,u=k6(t,r,l,s,o);for(const p of u){var d;if(nO(p).retainedBy==="recoilRoot"){o.add(p);continue}if(((d=n.retention.referenceCounts.get(p))!==null&&d!==void 0?d:0)>0){o.add(p);continue}if(oO(p).some(w=>n.retention.referenceCounts.get(w))){o.add(p);continue}const y=i.nodeToNodeSubscriptions.get(p);if(y&&E6(y,w=>o.has(w))){o.add(p);continue}s.add(p),c.add(p)}const h=new Set;for(const p of c)for(const y of(f=i.nodeDeps.get(p))!==null&&f!==void 0?f:iO){var f;s.has(y)||h.add(y)}h.size&&a(h)}}function k6(t,e,n,r,i){const s=t.getGraph(e.version),o=[],a=new Set;for(;n.size>0;)l(Ot(n.values().next().value));return o;function l(c){if(r.has(c)||i.has(c)){n.delete(c);return}if(a.has(c))return;const u=s.nodeToNodeSubscriptions.get(c);if(u)for(const d of u)l(d);a.add(c),n.delete(c),o.push(c)}}function A6(t,e,n){if(!St("recoil_memory_managament_2020"))return;T6(t,n);const r=t.getState();r.knownAtoms.delete(n),r.knownSelectors.delete(n),r.nodeTransactionSubscriptions.delete(n),r.retention.referenceCounts.delete(n);const i=oO(n);for(const l of i){var s;(s=r.retention.nodesRetainedByZone.get(l))===null||s===void 0||s.delete(n)}e.atomValues.delete(n),e.dirtyAtoms.delete(n),e.nonvalidatedAtoms.delete(n);const o=r.graphsByVersion.get(e.version);if(o){const l=o.nodeDeps.get(n);if(l!==void 0){o.nodeDeps.delete(n);for(const c of l){var a;(a=o.nodeToNodeSubscriptions.get(c))===null||a===void 0||a.delete(n)}}o.nodeToNodeSubscriptions.delete(n)}x6(n)}function R6(t,e){var n;return(n=t.retention.nodesRetainedByZone.get(e))!==null&&n!==void 0?n:iO}function oO(t){const e=nO(t).retainedBy;return e===void 0||e==="components"||e==="recoilRoot"?[]:e instanceof rO?[e]:e}function N6(t,e){const n=t.getState();n.nextTree?n.retention.retainablesToCheckForRelease.add(e):sO(t,new Set([e]))}function P6(t,e,n){var r;if(!St("recoil_memory_managament_2020"))return;const i=t.getState().retention.referenceCounts,s=((r=i.get(e))!==null&&r!==void 0?r:0)+n;s===0?aO(t,e):i.set(e,s)}function aO(t,e){if(!St("recoil_memory_managament_2020"))return;t.getState().retention.referenceCounts.delete(e),N6(t,e)}function D6(t){if(!St("recoil_memory_managament_2020"))return;const e=t.getState();sO(t,e.retention.retainablesToCheckForRelease),e.retention.retainablesToCheckForRelease.clear()}function O6(t){return t===void 0?"recoilRoot":t}var pl={SUSPENSE_TIMEOUT_MS:I6,updateRetainCount:P6,updateRetainCountToZero:aO,releaseScheduledRetainablesNow:D6,retainedByOptionWithDefault:O6};const{unstable_batchedUpdates:L6}=n4;var M6={unstable_batchedUpdates:L6};const{unstable_batchedUpdates:F6}=M6;var $6={unstable_batchedUpdates:F6};const{batchStart:U6}=Qi,{unstable_batchedUpdates:j6}=$6;let Ob=j6||(t=>t());const V6=t=>{Ob=t},B6=()=>Ob,z6=t=>{Ob(()=>{let e=()=>{};try{e=U6(),t()}finally{e()}})};var Ey={getBatcher:B6,setBatcher:V6,batchUpdates:z6};function*W6(t){for(const e of t)for(const n of e)yield n}var lO=W6;const cO=typeof Window>"u"||typeof window>"u",H6=t=>!cO&&(t===window||t instanceof Window),G6=typeof navigator<"u"&&navigator.product==="ReactNative";var Ty={isSSR:cO,isReactNative:G6,isWindow:H6};function q6(t,e){let n;return(...r)=>{n||(n={});const i=e(...r);return Object.hasOwnProperty.call(n,i)||(n[i]=t(...r)),n[i]}}function K6(t,e){let n,r;return(...i)=>{const s=e(...i);return n===s||(n=s,r=t(...i)),r}}function Q6(t,e){let n,r;return[(...o)=>{const a=e(...o);return n===a||(n=a,r=t(...o)),r},()=>{n=null}]}var Y6={memoizeWithArgsHash:q6,memoizeOneWithArgsHash:K6,memoizeOneWithArgsHashAndInvalidation:Q6};const{batchUpdates:qw}=Ey,{initializeNode:X6,peekNodeInfo:J6}=Bo,{graph:Z6}=gf,{getNextStoreID:e8}=wy,{DEFAULT_VALUE:t8,recoilValues:TC,recoilValuesForKeys:xC}=xr,{AbstractRecoilValue:n8,getRecoilValueAsLoadable:r8,setRecoilValue:IC,setUnvalidatedRecoilValue:i8}=Qi,{updateRetainCount:om}=pl,{setInvalidateMemoizedSnapshot:s8}=QD,{getNextTreeStateVersion:o8,makeEmptyStoreState:a8}=BD,{isSSR:l8}=Ty,{memoizeOneWithArgsHashAndInvalidation:c8}=Y6;class xy{constructor(e,n){ze(this,"_store",void 0),ze(this,"_refCount",1),ze(this,"getLoadable",r=>(this.checkRefCount_INTERNAL(),r8(this._store,r))),ze(this,"getPromise",r=>(this.checkRefCount_INTERNAL(),this.getLoadable(r).toPromise())),ze(this,"getNodes_UNSTABLE",r=>{if(this.checkRefCount_INTERNAL(),(r==null?void 0:r.isModified)===!0){if((r==null?void 0:r.isInitialized)===!1)return[];const o=this._store.getState().currentTree;return xC(o.dirtyAtoms)}const i=this._store.getState().knownAtoms,s=this._store.getState().knownSelectors;return(r==null?void 0:r.isInitialized)==null?TC.values():r.isInitialized===!0?xC(lO([i,s])):Nb(TC.values(),({key:o})=>!i.has(o)&&!s.has(o))}),ze(this,"getInfo_UNSTABLE",({key:r})=>(this.checkRefCount_INTERNAL(),J6(this._store,this._store.getState().currentTree,r))),ze(this,"map",r=>{this.checkRefCount_INTERNAL();const i=new Kw(this,qw);return r(i),i}),ze(this,"asyncMap",async r=>{this.checkRefCount_INTERNAL();const i=new Kw(this,qw);return i.retain(),await r(i),i.autoRelease_INTERNAL(),i}),this._store={storeID:e8(),parentStoreID:n,getState:()=>e,replaceState:r=>{e.currentTree=r(e.currentTree)},getGraph:r=>{const i=e.graphsByVersion;if(i.has(r))return Ot(i.get(r));const s=Z6();return i.set(r,s),s},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw Ke("Cannot subscribe to Snapshots")}};for(const r of this._store.getState().knownAtoms)X6(this._store,r,"get"),om(this._store,r,1);this.autoRelease_INTERNAL()}retain(){this._refCount<=0,this._refCount++;let e=!1;return()=>{e||(e=!0,this._release())}}autoRelease_INTERNAL(){l8||window.setTimeout(()=>this._release(),10)}_release(){if(this._refCount--,this._refCount===0){if(this._store.getState().nodeCleanupFunctions.forEach(e=>e()),this._store.getState().nodeCleanupFunctions.clear(),!St("recoil_memory_managament_2020"))return}else this._refCount<0}isRetained(){return this._refCount>0}checkRefCount_INTERNAL(){St("recoil_memory_managament_2020")&&this._refCount<=0}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}getStoreID(){return this.checkRefCount_INTERNAL(),this._store.storeID}}function uO(t,e,n=!1){const r=t.getState(),i=n?o8():e.version;return{currentTree:{version:n?i:e.version,stateID:n?i:e.stateID,transactionMetadata:{...e.transactionMetadata},dirtyAtoms:new Set(e.dirtyAtoms),atomValues:e.atomValues.clone(),nonvalidatedAtoms:e.nonvalidatedAtoms.clone()},commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(r.knownAtoms),knownSelectors:new Set(r.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(i,t.getGraph(e.version)),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map(_y(r.nodeCleanupFunctions.entries(),([s])=>[s,()=>{}]))}}function u8(t){const e=new xy(a8());return t!=null?e.map(t):e}const[CC,dO]=c8((t,e)=>{var n;const r=t.getState(),i=e==="latest"?(n=r.nextTree)!==null&&n!==void 0?n:r.currentTree:Ot(r.previousTree);return new xy(uO(t,i),t.storeID)},(t,e)=>{var n,r;return String(e)+String(t.storeID)+String((n=t.getState().nextTree)===null||n===void 0?void 0:n.version)+String(t.getState().currentTree.version)+String((r=t.getState().previousTree)===null||r===void 0?void 0:r.version)});s8(dO);function d8(t,e="latest"){const n=CC(t,e);return n.isRetained()?n:(dO(),CC(t,e))}class Kw extends xy{constructor(e,n){super(uO(e.getStore_INTERNAL(),e.getStore_INTERNAL().getState().currentTree,!0),e.getStoreID()),ze(this,"_batch",void 0),ze(this,"set",(r,i)=>{this.checkRefCount_INTERNAL();const s=this.getStore_INTERNAL();this._batch(()=>{om(s,r.key,1),IC(this.getStore_INTERNAL(),r,i)})}),ze(this,"reset",r=>{this.checkRefCount_INTERNAL();const i=this.getStore_INTERNAL();this._batch(()=>{om(i,r.key,1),IC(this.getStore_INTERNAL(),r,t8)})}),ze(this,"setUnvalidatedAtomValues_DEPRECATED",r=>{this.checkRefCount_INTERNAL();const i=this.getStore_INTERNAL();qw(()=>{for(const[s,o]of r.entries())om(i,s,1),i8(i,new n8(s),o)})}),this._batch=n}}var Iy={Snapshot:xy,MutableSnapshot:Kw,freshSnapshot:u8,cloneSnapshot:d8},h8=Iy.Snapshot,f8=Iy.MutableSnapshot,p8=Iy.freshSnapshot,m8=Iy.cloneSnapshot,Cy=Object.freeze({__proto__:null,Snapshot:h8,MutableSnapshot:f8,freshSnapshot:p8,cloneSnapshot:m8});function g8(...t){const e=new Set;for(const n of t)for(const r of n)e.add(r);return e}var y8=g8;const{useRef:v8}=Pe;function _8(t){const e=v8(t);return e.current===t&&typeof t=="function"&&(e.current=t()),e}var kC=_8;const{getNextTreeStateVersion:w8,makeEmptyStoreState:hO}=BD,{cleanUpNode:S8,getDownstreamNodes:b8,initializeNode:E8,setNodeValue:T8,setUnvalidatedAtomValue_DEPRECATED:x8}=Bo,{graph:I8}=gf,{cloneGraph:C8}=gf,{getNextStoreID:fO}=wy,{createMutableSource:n0,reactMode:pO}=mf,{applyAtomValueWrites:k8}=Qi,{releaseScheduledRetainablesNow:mO}=pl,{freshSnapshot:A8}=Cy,{useCallback:R8,useContext:gO,useEffect:Qw,useMemo:N8,useRef:P8,useState:D8}=Pe;function Bu(){throw Ke("This component must be used inside a <RecoilRoot> component.")}const yO=Object.freeze({storeID:fO(),getState:Bu,replaceState:Bu,getGraph:Bu,subscribeToTransactions:Bu,addTransactionMetadata:Bu});let Yw=!1;function AC(t){if(Yw)throw Ke("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");const e=t.getState();if(e.nextTree===null){St("recoil_memory_managament_2020")&&St("recoil_release_on_cascading_update_killswitch_2021")&&e.commitDepth>0&&mO(t);const n=e.currentTree.version,r=w8();e.nextTree={...e.currentTree,version:r,stateID:r,dirtyAtoms:new Set,transactionMetadata:{}},e.graphsByVersion.set(r,C8(Ot(e.graphsByVersion.get(n))))}}const vO=Pe.createContext({current:yO}),ky=()=>gO(vO),_O=Pe.createContext(null);function O8(){return gO(_O)}function Lb(t,e,n){const r=b8(t,n,n.dirtyAtoms);for(const i of r){const s=e.nodeToComponentSubscriptions.get(i);if(s)for(const[o,[a,l]]of s)l(n)}}function wO(t){const e=t.getState(),n=e.currentTree,r=n.dirtyAtoms;if(r.size){for(const[i,s]of e.nodeTransactionSubscriptions)if(r.has(i))for(const[o,a]of s)a(t);for(const[i,s]of e.transactionSubscriptions)s(t);(!pO().early||e.suspendedComponentResolvers.size>0)&&(Lb(t,e,n),e.suspendedComponentResolvers.forEach(i=>i()),e.suspendedComponentResolvers.clear())}e.queuedComponentCallbacks_DEPRECATED.forEach(i=>i(n)),e.queuedComponentCallbacks_DEPRECATED.splice(0,e.queuedComponentCallbacks_DEPRECATED.length)}function L8(t){const e=t.getState();e.commitDepth++;try{const{nextTree:n}=e;if(n==null)return;e.previousTree=e.currentTree,e.currentTree=n,e.nextTree=null,wO(t),e.previousTree!=null?e.graphsByVersion.delete(e.previousTree.version):Ib("Ended batch with no previous state, which is unexpected","recoil"),e.previousTree=null,St("recoil_memory_managament_2020")&&n==null&&mO(t)}finally{e.commitDepth--}}function M8({setNotifyBatcherOfChange:t}){const e=ky(),[,n]=D8([]);return t(()=>n({})),Qw(()=>(t(()=>n({})),()=>{t(()=>{})}),[t]),Qw(()=>{p5.enqueueExecution("Batcher",()=>{L8(e.current)})}),null}function F8(t,e){const n=hO();return e({set:(r,i)=>{const s=n.currentTree,o=T8(t,s,r.key,i),a=new Set(o.keys()),l=s.nonvalidatedAtoms.clone();for(const c of a)l.delete(c);n.currentTree={...s,dirtyAtoms:y8(s.dirtyAtoms,a),atomValues:k8(s.atomValues,o),nonvalidatedAtoms:l}},setUnvalidatedAtomValues:r=>{r.forEach((i,s)=>{n.currentTree=x8(n.currentTree,s,i)})}}),n}function $8(t){const e=A8(t),n=e.getStore_INTERNAL().getState();return e.retain(),n.nodeCleanupFunctions.forEach(r=>r()),n.nodeCleanupFunctions.clear(),n}let RC=0;function U8({initializeState_DEPRECATED:t,initializeState:e,store_INTERNAL:n,children:r}){let i;const s=f=>{const p=i.current.graphsByVersion;if(p.has(f))return Ot(p.get(f));const y=I8();return p.set(f,y),y},o=(f,p)=>{if(p==null){const{transactionSubscriptions:y}=d.current.getState(),w=RC++;return y.set(w,f),{release:()=>{y.delete(w)}}}else{const{nodeTransactionSubscriptions:y}=d.current.getState();y.has(p)||y.set(p,new Map);const w=RC++;return Ot(y.get(p)).set(w,f),{release:()=>{const m=y.get(p);m&&(m.delete(w),m.size===0&&y.delete(p))}}}},a=f=>{AC(d.current);for(const p of Object.keys(f))Ot(d.current.getState().nextTree).transactionMetadata[p]=f[p]},l=f=>{AC(d.current);const p=Ot(i.current.nextTree);let y;try{Yw=!0,y=f(p)}finally{Yw=!1}y!==p&&(i.current.nextTree=y,pO().early&&Lb(d.current,i.current,y),Ot(c.current)())},c=P8(null),u=R8(f=>{c.current=f},[c]),d=kC(()=>n??{storeID:fO(),getState:()=>i.current,replaceState:l,getGraph:s,subscribeToTransactions:o,addTransactionMetadata:a});n!=null&&(d.current=n),i=kC(()=>t!=null?F8(d.current,t):e!=null?$8(e):hO());const h=N8(()=>n0==null?void 0:n0(i,()=>i.current.currentTree.version),[i]);return Qw(()=>{const f=d.current;for(const p of new Set(f.getState().knownAtoms))E8(f,p,"get");return()=>{for(const p of f.getState().knownAtoms)S8(f,p)}},[d]),Pe.createElement(vO.Provider,{value:d},Pe.createElement(_O.Provider,{value:h},Pe.createElement(M8,{setNotifyBatcherOfChange:u}),r))}function j8(t){const{override:e,...n}=t,r=ky();return e===!1&&r.current!==yO?t.children:Pe.createElement(U8,n)}function V8(){return ky().current.storeID}var ks={RecoilRoot:j8,useStoreRef:ky,useRecoilMutableSource:O8,useRecoilStoreID:V8,notifyComponents_FOR_TESTING:Lb,sendEndOfBatchNotifications_FOR_TESTING:wO};function B8(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}var z8=B8;const{useEffect:W8,useRef:H8}=Pe;function G8(t){const e=H8();return W8(()=>{e.current=t}),e.current}var SO=G8;const{useStoreRef:q8}=ks,{SUSPENSE_TIMEOUT_MS:K8}=pl,{updateRetainCount:zu}=pl,{RetentionZone:Q8}=Sy,{useEffect:Y8,useRef:X8}=Pe,{isSSR:NC}=Ty;function J8(t){if(St("recoil_memory_managament_2020"))return Z8(t)}function Z8(t){const n=(Array.isArray(t)?t:[t]).map(o=>o instanceof Q8?o:o.key),r=q8();Y8(()=>{if(!St("recoil_memory_managament_2020"))return;const o=r.current;if(i.current&&!NC)window.clearTimeout(i.current),i.current=null;else for(const a of n)zu(o,a,1);return()=>{for(const a of n)zu(o,a,-1)}},[r,...n]);const i=X8(),s=SO(n);if(!NC&&(s===void 0||!z8(s,n))){const o=r.current;for(const a of n)zu(o,a,1);if(s)for(const a of s)zu(o,a,-1);i.current&&window.clearTimeout(i.current),i.current=window.setTimeout(()=>{i.current=null;for(const a of n)zu(o,a,-1)},K8)}}var Mb=J8;function eW(){return"<component name not available>"}var vf=eW;const{batchUpdates:tW}=Ey,{DEFAULT_VALUE:bO}=xr,{currentRendererSupportsUseSyncExternalStore:nW,reactMode:cu,useMutableSource:rW,useSyncExternalStore:iW}=mf,{useRecoilMutableSource:sW,useStoreRef:Yi}=ks,{AbstractRecoilValue:Xw,getRecoilValueAsLoadable:_f,setRecoilValue:Xm,setUnvalidatedRecoilValue:oW,subscribeToRecoilValue:Rc}=Qi,{useCallback:Sr,useEffect:Nc,useMemo:EO,useRef:Dd,useState:Fb}=Pe,{setByAddingToSet:aW}=WD,{isSSR:lW}=Ty;function $b(t,e,n){if(t.state==="hasValue")return t.contents;throw t.state==="loading"?new Promise(i=>{const s=n.current.getState().suspendedComponentResolvers;s.add(i),lW&&Ct(t.contents)&&t.contents.finally(()=>{s.delete(i)})}):t.state==="hasError"?t.contents:Ke(`Invalid value of loadable atom "${e.key}"`)}function cW(){const t=vf(),e=Yi(),[,n]=Fb([]),r=Dd(new Set);r.current=new Set;const i=Dd(new Set),s=Dd(new Map),o=Sr(l=>{const c=s.current.get(l);c&&(c.release(),s.current.delete(l))},[s]),a=Sr((l,c)=>{s.current.has(c)&&n([])},[]);return Nc(()=>{const l=e.current;Nd(r.current,i.current).forEach(c=>{if(s.current.has(c))return;const u=Rc(l,new Xw(c),h=>a(h,c),t);s.current.set(c,u),l.getState().nextTree?l.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{a(l.getState(),c)}):a(l.getState(),c)}),Nd(i.current,r.current).forEach(c=>{o(c)}),i.current=r.current}),Nc(()=>{const l=s.current;return Nd(r.current,new Set(l.keys())).forEach(c=>{const u=Rc(e.current,new Xw(c),d=>a(d,c),t);l.set(c,u)}),()=>l.forEach((c,u)=>o(u))},[t,e,o,a]),EO(()=>{function l(p){return y=>{Xm(e.current,p,y)}}function c(p){return()=>Xm(e.current,p,bO)}function u(p){var y;r.current.has(p.key)||(r.current=aW(r.current,p.key));const w=e.current.getState();return _f(e.current,p,cu().early&&(y=w.nextTree)!==null&&y!==void 0?y:w.currentTree)}function d(p){const y=u(p);return $b(y,p,e)}function h(p){return[d(p),l(p)]}function f(p){return[u(p),l(p)]}return{getRecoilValue:d,getRecoilValueLoadable:u,getRecoilState:h,getRecoilStateLoadable:f,getSetRecoilState:l,getResetRecoilState:c}},[r,e])}const uW={current:0};function dW(t){const e=Yi(),n=vf(),r=Sr(()=>{var a;const l=e.current,c=l.getState(),u=cu().early&&(a=c.nextTree)!==null&&a!==void 0?a:c.currentTree;return{loadable:_f(l,t,u),key:t.key}},[e,t]),i=Sr(a=>{let l;return()=>{var c,u;const d=a();return(c=l)!==null&&c!==void 0&&c.loadable.is(d.loadable)&&((u=l)===null||u===void 0?void 0:u.key)===d.key?l:(l=d,d)}},[]),s=EO(()=>i(r),[r,i]),o=Sr(a=>{const l=e.current;return Rc(l,t,a,n).release},[e,t,n]);return iW(o,s,s).loadable}function hW(t){const e=Yi(),n=Sr(()=>{var c;const u=e.current,d=u.getState(),h=cu().early&&(c=d.nextTree)!==null&&c!==void 0?c:d.currentTree;return _f(u,t,h)},[e,t]),r=Sr(()=>n(),[n]),i=vf(),s=Sr((c,u)=>{const d=e.current;return Rc(d,t,()=>{if(!St("recoil_suppress_rerender_in_callback"))return u();const f=n();l.current.is(f)||u(),l.current=f},i).release},[e,t,i,n]),o=sW();if(o==null)throw Ke("Recoil hooks must be used in components contained within a <RecoilRoot> component.");const a=rW(o,r,s),l=Dd(a);return Nc(()=>{l.current=a}),a}function Jw(t){const e=Yi(),n=vf(),r=Sr(()=>{var l;const c=e.current,u=c.getState(),d=cu().early&&(l=u.nextTree)!==null&&l!==void 0?l:u.currentTree;return _f(c,t,d)},[e,t]),i=Sr(()=>({loadable:r(),key:t.key}),[r,t.key]),s=Sr(l=>{const c=i();return l.loadable.is(c.loadable)&&l.key===c.key?l:c},[i]);Nc(()=>{const l=Rc(e.current,t,c=>{a(s)},n);return a(s),l.release},[n,t,e,s]);const[o,a]=Fb(i);return o.key!==t.key?i().loadable:o.loadable}function fW(t){const e=Yi(),[,n]=Fb([]),r=vf(),i=Sr(()=>{var a;const l=e.current,c=l.getState(),u=cu().early&&(a=c.nextTree)!==null&&a!==void 0?a:c.currentTree;return _f(l,t,u)},[e,t]),s=i(),o=Dd(s);return Nc(()=>{o.current=s}),Nc(()=>{const a=e.current,l=a.getState(),c=Rc(a,t,d=>{var h;if(!St("recoil_suppress_rerender_in_callback"))return n([]);const f=i();(h=o.current)!==null&&h!==void 0&&h.is(f)||n(f),o.current=f},r);if(l.nextTree)a.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{o.current=null,n([])});else{var u;if(!St("recoil_suppress_rerender_in_callback"))return n([]);const d=i();(u=o.current)!==null&&u!==void 0&&u.is(d)||n(d),o.current=d}return c.release},[r,i,t,e]),s}function Ub(t){return St("recoil_memory_managament_2020")&&Mb(t),{TRANSITION_SUPPORT:Jw,SYNC_EXTERNAL_STORE:nW()?dW:Jw,MUTABLE_SOURCE:hW,LEGACY:fW}[cu().mode](t)}function TO(t){const e=Yi(),n=Ub(t);return $b(n,t,e)}function Ay(t){const e=Yi();return Sr(n=>{Xm(e.current,t,n)},[e,t])}function pW(t){const e=Yi();return Sr(()=>{Xm(e.current,t,bO)},[e,t])}function mW(t){return[TO(t),Ay(t)]}function gW(t){return[Ub(t),Ay(t)]}function yW(){const t=Yi();return(e,n={})=>{tW(()=>{t.current.addTransactionMetadata(n),e.forEach((r,i)=>oW(t.current,new Xw(i),r))})}}function xO(t){return St("recoil_memory_managament_2020")&&Mb(t),Jw(t)}function IO(t){const e=Yi(),n=xO(t);return $b(n,t,e)}function vW(t){return[IO(t),Ay(t)]}var _W={recoilComponentGetRecoilValueCount_FOR_TESTING:uW,useRecoilInterface:cW,useRecoilState:mW,useRecoilStateLoadable:gW,useRecoilValue:TO,useRecoilValueLoadable:Ub,useResetRecoilState:pW,useSetRecoilState:Ay,useSetUnvalidatedAtomValues:yW,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:xO,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:IO,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:vW};function wW(t,e){const n=new Map;for(const[r,i]of t)e(i,r)&&n.set(r,i);return n}var SW=wW;function bW(t,e){const n=new Set;for(const r of t)e(r)&&n.add(r);return n}var EW=bW;function TW(...t){const e=new Map;for(let n=0;n<t.length;n++){const r=t[n].keys();let i;for(;!(i=r.next()).done;)e.set(i.value,t[n].get(i.value))}return e}var xW=TW;const{batchUpdates:IW}=Ey,{DEFAULT_VALUE:CW,getNode:CO,nodes:kW}=xr,{useStoreRef:jb}=ks,{AbstractRecoilValue:AW,setRecoilValueLoadable:RW}=Qi,{SUSPENSE_TIMEOUT_MS:NW}=pl,{cloneSnapshot:Jm}=Cy,{useCallback:Ry,useEffect:kO,useRef:PC,useState:PW}=Pe,{isSSR:DC}=Ty;function Ny(t){const e=jb();kO(()=>e.current.subscribeToTransactions(t).release,[t,e])}function OC(t){const e=t.atomValues.toMap(),n=Ym(SW(e,(r,i)=>{const o=CO(i).persistence_UNSTABLE;return o!=null&&o.type!=="none"&&r.state==="hasValue"}),r=>r.contents);return xW(t.nonvalidatedAtoms.toMap(),n)}function DW(t){Ny(Ry(e=>{let n=e.getState().previousTree;const r=e.getState().currentTree;n||(n=e.getState().currentTree);const i=OC(r),s=OC(n),o=Ym(kW,l=>{var c,u,d,h;return{persistence_UNSTABLE:{type:(c=(u=l.persistence_UNSTABLE)===null||u===void 0?void 0:u.type)!==null&&c!==void 0?c:"none",backButton:(d=(h=l.persistence_UNSTABLE)===null||h===void 0?void 0:h.backButton)!==null&&d!==void 0?d:!1}}}),a=EW(r.dirtyAtoms,l=>i.has(l)||s.has(l));t({atomValues:i,previousAtomValues:s,atomInfo:o,modifiedAtoms:a,transactionMetadata:{...r.transactionMetadata}})},[t]))}function OW(t){Ny(Ry(e=>{const n=Jm(e,"latest"),r=Jm(e,"previous");t({snapshot:n,previousSnapshot:r})},[t]))}function LW(){const t=jb(),[e,n]=PW(()=>Jm(t.current)),r=SO(e),i=PC(),s=PC();if(Ny(Ry(a=>n(Jm(a)),[])),kO(()=>{const a=e.retain();if(i.current&&!DC){var l;window.clearTimeout(i.current),i.current=null,(l=s.current)===null||l===void 0||l.call(s),s.current=null}return()=>{window.setTimeout(a,10)}},[e]),r!==e&&!DC){if(i.current){var o;window.clearTimeout(i.current),i.current=null,(o=s.current)===null||o===void 0||o.call(s),s.current=null}s.current=e.retain(),i.current=window.setTimeout(()=>{var a;i.current=null,(a=s.current)===null||a===void 0||a.call(s),s.current=null},NW)}return e}function AO(t,e){var n;const r=t.getState(),i=(n=r.nextTree)!==null&&n!==void 0?n:r.currentTree,s=e.getStore_INTERNAL().getState().currentTree;IW(()=>{const o=new Set;for(const c of[i.atomValues.keys(),s.atomValues.keys()])for(const u of c){var a,l;((a=i.atomValues.get(u))===null||a===void 0?void 0:a.contents)!==((l=s.atomValues.get(u))===null||l===void 0?void 0:l.contents)&&CO(u).shouldRestoreFromSnapshots&&o.add(u)}o.forEach(c=>{RW(t,new AW(c),s.atomValues.has(c)?Ot(s.atomValues.get(c)):CW)}),t.replaceState(c=>({...c,stateID:e.getID()}))})}function MW(){const t=jb();return Ry(e=>AO(t.current,e),[t])}var RO={useRecoilSnapshot:LW,gotoSnapshot:AO,useGotoRecoilSnapshot:MW,useRecoilTransactionObserver:OW,useTransactionObservation_DEPRECATED:DW,useTransactionSubscription_DEPRECATED:Ny};const{peekNodeInfo:FW}=Bo,{useStoreRef:$W}=ks;function UW(){const t=$W();return({key:e})=>FW(t.current,t.current.getState().currentTree,e)}var jW=UW;const{reactMode:VW}=mf,{RecoilRoot:BW,useStoreRef:zW}=ks,{useMemo:WW}=Pe;function HW(){VW().mode==="MUTABLE_SOURCE"&&console.warn("Warning: There are known issues using useRecoilBridgeAcrossReactRoots() in recoil_mutable_source rendering mode.  Please consider upgrading to recoil_sync_external_store mode.");const t=zW().current;return WW(()=>{function e({children:n}){return Pe.createElement(BW,{store_INTERNAL:t},n)}return e},[t])}var GW=HW;const{loadableWithValue:qW}=pf,{initializeNode:KW}=Bo,{DEFAULT_VALUE:QW,getNode:YW}=xr,{copyTreeState:XW,getRecoilValueAsLoadable:JW,invalidateDownstreams:ZW,writeLoadableToTreeState:eH}=Qi;function LC(t){return YW(t.key).nodeType==="atom"}class tH{constructor(e,n){ze(this,"_store",void 0),ze(this,"_treeState",void 0),ze(this,"_changes",void 0),ze(this,"get",r=>{if(this._changes.has(r.key))return this._changes.get(r.key);if(!LC(r))throw Ke("Reading selectors within atomicUpdate is not supported");const i=JW(this._store,r,this._treeState);if(i.state==="hasValue")return i.contents;throw i.state==="hasError"?i.contents:Ke(`Expected Recoil atom ${r.key} to have a value, but it is in a loading state.`)}),ze(this,"set",(r,i)=>{if(!LC(r))throw Ke("Setting selectors within atomicUpdate is not supported");if(typeof i=="function"){const s=this.get(r);this._changes.set(r.key,i(s))}else KW(this._store,r.key,"set"),this._changes.set(r.key,i)}),ze(this,"reset",r=>{this.set(r,QW)}),this._store=e,this._treeState=n,this._changes=new Map}newTreeState_INTERNAL(){if(this._changes.size===0)return this._treeState;const e=XW(this._treeState);for(const[n,r]of this._changes)eH(e,n,qW(r));return ZW(this._store,e),e}}function nH(t){return e=>{t.replaceState(n=>{const r=new tH(t,n);return e(r),r.newTreeState_INTERNAL()})}}var rH={atomicUpdater:nH},iH=rH.atomicUpdater,NO=Object.freeze({__proto__:null,atomicUpdater:iH});function sH(t,e){if(!t)throw new Error(e)}var oH=sH,pd=oH;const{atomicUpdater:aH}=NO,{batchUpdates:lH}=Ey,{DEFAULT_VALUE:cH}=xr,{useStoreRef:uH}=ks,{refreshRecoilValue:dH,setRecoilValue:MC}=Qi,{cloneSnapshot:hH}=Cy,{gotoSnapshot:fH}=RO,{useCallback:pH}=Pe;class PO{}const mH=new PO;function DO(t,e,n,r){let i=mH,s;if(lH(()=>{const a="useRecoilCallback() expects a function that returns a function: it accepts a function of the type (RecoilInterface) => (Args) => ReturnType and returns a callback function (Args) => ReturnType, where RecoilInterface is an object {snapshot, set, ...} and Args and ReturnType are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if(typeof e!="function")throw Ke(a);const l=HD({...r??{},set:(u,d)=>MC(t,u,d),reset:u=>MC(t,u,cH),refresh:u=>dH(t,u),gotoSnapshot:u=>fH(t,u),transact_UNSTABLE:u=>aH(t)(u)},{snapshot:()=>{const u=hH(t);return s=u.retain(),u}}),c=e(l);if(typeof c!="function")throw Ke(a);i=c(...n)}),i instanceof PO&&pd(!1),Ct(i))i=i.finally(()=>{var a;(a=s)===null||a===void 0||a()});else{var o;(o=s)===null||o===void 0||o()}return i}function gH(t,e){const n=uH();return pH((...r)=>DO(n.current,t,r),e!=null?[...e,n]:void 0)}var OO={recoilCallback:DO,useRecoilCallback:gH};const{useStoreRef:yH}=ks,{refreshRecoilValue:vH}=Qi,{useCallback:_H}=Pe;function wH(t){const e=yH();return _H(()=>{const n=e.current;vH(n,t)},[t,e])}var SH=wH;const{atomicUpdater:bH}=NO,{useStoreRef:EH}=ks,{useMemo:TH}=Pe;function xH(t,e){const n=EH();return TH(()=>(...r)=>{bH(n.current)(s=>{t(s)(...r)})},e!=null?[...e,n]:void 0)}var IH=xH;class CH{constructor(e){ze(this,"value",void 0),this.value=e}}var kH={WrappedValue:CH},AH=kH.WrappedValue,LO=Object.freeze({__proto__:null,WrappedValue:AH});const{isFastRefreshEnabled:RH}=mf;class FC extends Error{}class NH{constructor(e){var n,r,i;ze(this,"_name",void 0),ze(this,"_numLeafs",void 0),ze(this,"_root",void 0),ze(this,"_onHit",void 0),ze(this,"_onSet",void 0),ze(this,"_mapNodeValue",void 0),this._name=e==null?void 0:e.name,this._numLeafs=0,this._root=null,this._onHit=(n=e==null?void 0:e.onHit)!==null&&n!==void 0?n:()=>{},this._onSet=(r=e==null?void 0:e.onSet)!==null&&r!==void 0?r:()=>{},this._mapNodeValue=(i=e==null?void 0:e.mapNodeValue)!==null&&i!==void 0?i:s=>s}size(){return this._numLeafs}root(){return this._root}get(e,n){var r;return(r=this.getLeafNode(e,n))===null||r===void 0?void 0:r.value}getLeafNode(e,n){if(this._root==null)return;let r=this._root;for(;r;){if(n==null||n.onNodeVisit(r),r.type==="leaf")return this._onHit(r),r;const i=this._mapNodeValue(e(r.nodeKey));r=r.branches.get(i)}}set(e,n,r){const i=()=>{var s,o,a,l;let c,u;for(const[w,m]of e){var d,h,f;const g=this._root;if((g==null?void 0:g.type)==="leaf")throw this.invalidCacheError();const v=c;if(c=v?v.branches.get(u):g,c=(d=c)!==null&&d!==void 0?d:{type:"branch",nodeKey:w,parent:v,branches:new Map,branchKey:u},c.type!=="branch"||c.nodeKey!==w)throw this.invalidCacheError();v==null||v.branches.set(u,c),r==null||(h=r.onNodeVisit)===null||h===void 0||h.call(r,c),u=this._mapNodeValue(m),this._root=(f=this._root)!==null&&f!==void 0?f:c}const p=c?(s=c)===null||s===void 0?void 0:s.branches.get(u):this._root;if(p!=null&&(p.type!=="leaf"||p.branchKey!==u))throw this.invalidCacheError();const y={type:"leaf",value:n,parent:c,branchKey:u};(o=c)===null||o===void 0||o.branches.set(u,y),this._root=(a=this._root)!==null&&a!==void 0?a:y,this._numLeafs++,this._onSet(y),r==null||(l=r.onNodeVisit)===null||l===void 0||l.call(r,y)};try{i()}catch(s){if(s instanceof FC)this.clear(),i();else throw s}}delete(e){const n=this.root();if(!n)return!1;if(e===n)return this._root=null,this._numLeafs=0,!0;let r=e.parent,i=e.branchKey;for(;r;){var s;if(r.branches.delete(i),r===n)return r.branches.size===0?(this._root=null,this._numLeafs=0):this._numLeafs--,!0;if(r.branches.size>0)break;i=(s=r)===null||s===void 0?void 0:s.branchKey,r=r.parent}for(;r!==n;r=r.parent)if(r==null)return!1;return this._numLeafs--,!0}clear(){this._numLeafs=0,this._root=null}invalidCacheError(){const e=RH()?"Possible Fast Refresh module reload detected.  This may also be caused by an selector returning inconsistent values. Resetting cache.":"Invalid cache values.  This happens when selectors do not return consistent values for the same input dependency values.  That may also be caused when using Fast Refresh to change a selector implementation.  Resetting cache.";throw Ib(e+(this._name!=null?` - ${this._name}`:"")),new FC}}var PH={TreeCache:NH},DH=PH.TreeCache,MO=Object.freeze({__proto__:null,TreeCache:DH});class OH{constructor(e){var n;ze(this,"_maxSize",void 0),ze(this,"_size",void 0),ze(this,"_head",void 0),ze(this,"_tail",void 0),ze(this,"_map",void 0),ze(this,"_keyMapper",void 0),this._maxSize=e.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=(n=e.mapKey)!==null&&n!==void 0?n:r=>r}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(e){return this._map.has(this._keyMapper(e))}get(e){const n=this._keyMapper(e),r=this._map.get(n);if(r)return this.set(e,r.value),r.value}set(e,n){const r=this._keyMapper(e);this._map.get(r)&&this.delete(e);const s=this.head(),o={key:e,right:s,left:null,value:n};s?s.left=o:this._tail=o,this._map.set(r,o),this._head=o,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){const e=this.tail();e&&this.delete(e.key)}delete(e){const n=this._keyMapper(e);if(!this._size||!this._map.has(n))return;const r=Ot(this._map.get(n)),i=r.right,s=r.left;i&&(i.left=r.left),s&&(s.right=r.right),r===this.head()&&(this._head=i),r===this.tail()&&(this._tail=s),this._map.delete(n),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}}var LH={LRUCache:OH},MH=LH.LRUCache,FO=Object.freeze({__proto__:null,LRUCache:MH});const{LRUCache:FH}=FO,{TreeCache:$H}=MO;function UH({name:t,maxSize:e,mapNodeValue:n=r=>r}){const r=new FH({maxSize:e}),i=new $H({name:t,mapNodeValue:n,onHit:s=>{r.set(s,!0)},onSet:s=>{const o=r.tail();r.set(s,!0),o&&i.size()>e&&i.delete(o.key)}});return i}var $C=UH;function oi(t,e,n){if(typeof t=="string"&&!t.includes('"')&&!t.includes("\\"))return`"${t}"`;switch(typeof t){case"undefined":return"";case"boolean":return t?"true":"false";case"number":case"symbol":return String(t);case"string":return JSON.stringify(t);case"function":if((e==null?void 0:e.allowFunctions)!==!0)throw Ke("Attempt to serialize function in a Recoil cache key");return`__FUNCTION(${t.name})__`}if(t===null)return"null";if(typeof t!="object"){var r;return(r=JSON.stringify(t))!==null&&r!==void 0?r:""}if(Ct(t))return"__PROMISE__";if(Array.isArray(t))return`[${t.map((i,s)=>oi(i,e,s.toString()))}]`;if(typeof t.toJSON=="function")return oi(t.toJSON(n),e,n);if(t instanceof Map){const i={};for(const[s,o]of t)i[typeof s=="string"?s:oi(s,e)]=o;return oi(i,e,n)}return t instanceof Set?oi(Array.from(t).sort((i,s)=>oi(i,e).localeCompare(oi(s,e))),e,n):Symbol!==void 0&&t[Symbol.iterator]!=null&&typeof t[Symbol.iterator]=="function"?oi(Array.from(t),e,n):`{${Object.keys(t).filter(i=>t[i]!==void 0).sort().map(i=>`${oi(i,e)}:${oi(t[i],e,i)}`).join(",")}}`}function jH(t,e={allowFunctions:!1}){return oi(t,e)}var Py=jH;const{TreeCache:VH}=MO,Ep={equality:"reference",eviction:"keep-all",maxSize:1/0};function BH({equality:t=Ep.equality,eviction:e=Ep.eviction,maxSize:n=Ep.maxSize}=Ep,r){const i=zH(t);return WH(e,n,i,r)}function zH(t){switch(t){case"reference":return e=>e;case"value":return e=>Py(e)}throw Ke(`Unrecognized equality policy ${t}`)}function WH(t,e,n,r){switch(t){case"keep-all":return new VH({name:r,mapNodeValue:n});case"lru":return $C({name:r,maxSize:Ot(e),mapNodeValue:n});case"most-recent":return $C({name:r,maxSize:1,mapNodeValue:n})}throw Ke(`Unrecognized eviction policy ${t}`)}var HH=BH;function GH(t){return()=>null}var qH={startPerfBlock:GH};const{isLoadable:KH,loadableWithError:Tp,loadableWithPromise:QH,loadableWithValue:r0}=pf,{WrappedValue:$O}=LO,{getNodeLoadable:xp,peekNodeLoadable:YH,setNodeValue:XH}=Bo,{saveDepsToStore:JH}=gf,{DEFAULT_VALUE:ZH,getConfigDeletionHandler:eG,getNode:tG,registerNode:UC}=xr,{isRecoilValue:nG}=Ac,{markRecoilValueModified:jC}=Qi,{retainedByOptionWithDefault:rG}=pl,{recoilCallback:iG}=OO,{startPerfBlock:sG}=qH;class UO{}const Wu=new UO,Hu=[],Ip=new Map,oG=(()=>{let t=0;return()=>t++})();function jO(t){let e=null;const{key:n,get:r,cachePolicy_UNSTABLE:i}=t,s=t.set!=null?t.set:void 0,o=new Set,a=HH(i??{equality:"reference",eviction:"keep-all"},n),l=rG(t.retainedBy_UNSTABLE),c=new Map;let u=0;function d(){return!St("recoil_memory_managament_2020")||u>0}function h(N){return N.getState().knownSelectors.add(n),u++,()=>{u--}}function f(){return eG(n)!==void 0&&!d()}function p(N,$,L,U,M){A($,U,M),y(N,L)}function y(N,$){P(N,$)&&R(N),m($,!0)}function w(N,$){P(N,$)&&(Ot(O(N)).stateVersions.clear(),m($,!1))}function m(N,$){const L=Ip.get(N);if(L!=null){for(const U of L)jC(U,Ot(e));$&&Ip.delete(N)}}function g(N,$){let L=Ip.get($);L==null&&Ip.set($,L=new Set),L.add(N)}function v(N,$,L,U,M,te){return $.then(G=>{if(!d())throw R(N),Wu;const ee=r0(G);return p(N,L,M,ee,U),G}).catch(G=>{if(!d())throw R(N),Wu;if(Ct(G))return b(N,G,L,U,M,te);const ee=Tp(G);throw p(N,L,M,ee,U),G})}function b(N,$,L,U,M,te){return $.then(G=>{if(!d())throw R(N),Wu;te.loadingDepKey!=null&&te.loadingDepPromise===$?L.atomValues.set(te.loadingDepKey,r0(G)):N.getState().knownSelectors.forEach(se=>{L.atomValues.delete(se)});const ee=D(N,L);if(ee&&ee.state!=="loading"){if((P(N,M)||O(N)==null)&&y(N,M),ee.state==="hasValue")return ee.contents;throw ee.contents}if(!P(N,M)){const se=T(N,L);if(se!=null)return se.loadingLoadable.contents}const[ue,ye]=E(N,L,M);if(ue.state!=="loading"&&p(N,L,M,ue,ye),ue.state==="hasError")throw ue.contents;return ue.contents}).catch(G=>{if(G instanceof UO)throw Wu;if(!d())throw R(N),Wu;const ee=Tp(G);throw p(N,L,M,ee,U),G})}function I(N,$,L,U){var M,te,G,ee;if(P(N,U)||$.version===((M=N.getState())===null||M===void 0||(te=M.currentTree)===null||te===void 0?void 0:te.version)||$.version===((G=N.getState())===null||G===void 0||(ee=G.nextTree)===null||ee===void 0?void 0:ee.version)){var ue,ye,se;JH(n,L,N,(ue=(ye=N.getState())===null||ye===void 0||(se=ye.nextTree)===null||se===void 0?void 0:se.version)!==null&&ue!==void 0?ue:N.getState().currentTree.version)}for(const De of L)o.add(De)}function E(N,$,L){const U=sG(n);let M=!0,te=!0;const G=()=>{U(),te=!1};let ee,ue=!1,ye;const se={loadingDepKey:null,loadingDepPromise:null},De=new Map;function He({key:Me}){const ve=xp(N,$,Me);switch(De.set(Me,ve),M||(I(N,$,new Set(De.keys()),L),w(N,L)),ve.state){case"hasValue":return ve.contents;case"hasError":throw ve.contents;case"loading":throw se.loadingDepKey=Me,se.loadingDepPromise=ve.contents,ve.contents}throw Ke("Invalid Loadable state")}const Ee=Me=>(...ve)=>{if(te)throw Ke("Callbacks from getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can work with Recoil state without a subscription.");return e==null&&pd(!1),iG(N,Me,ve,{node:e})};try{ee=r({get:He,getCallback:Ee}),ee=nG(ee)?He(ee):ee,KH(ee)&&(ee.state==="hasError"&&(ue=!0),ee=ee.contents),Ct(ee)?ee=v(N,ee,$,De,L,se).finally(G):G(),ee=ee instanceof $O?ee.value:ee}catch(Me){ee=Me,Ct(ee)?ee=b(N,ee,$,De,L,se).finally(G):(ue=!0,G())}return ue?ye=Tp(ee):Ct(ee)?ye=QH(ee):ye=r0(ee),M=!1,k(N,L,De),I(N,$,new Set(De.keys()),L),[ye,De]}function D(N,$){let L=$.atomValues.get(n);if(L!=null)return L;const U=new Set;try{L=a.get(te=>(typeof te!="string"&&pd(!1),xp(N,$,te).contents),{onNodeVisit:te=>{te.type==="branch"&&te.nodeKey!==n&&U.add(te.nodeKey)}})}catch(te){throw Ke(`Problem with cache lookup for selector "${n}": ${te.message}`)}if(L){var M;$.atomValues.set(n,L),I(N,$,U,(M=O(N))===null||M===void 0?void 0:M.executionID)}return L}function S(N,$){const L=D(N,$);if(L!=null)return R(N),L;const U=T(N,$);if(U!=null){var M;return((M=U.loadingLoadable)===null||M===void 0?void 0:M.state)==="loading"&&g(N,U.executionID),U.loadingLoadable}const te=oG(),[G,ee]=E(N,$,te);return G.state==="loading"?(C(N,te,G,ee,$),g(N,te)):(R(N),A($,G,ee)),G}function T(N,$){const L=lO([c.has(N)?[Ot(c.get(N))]:[],_y(Nb(c,([M])=>M!==N),([,M])=>M)]);function U(M){for(const[te,G]of M)if(!xp(N,$,te).is(G))return!0;return!1}for(const M of L){if(M.stateVersions.get($.version)||!U(M.depValuesDiscoveredSoFarDuringAsyncWork))return M.stateVersions.set($.version,!0),M;M.stateVersions.set($.version,!1)}}function O(N){return c.get(N)}function C(N,$,L,U,M){c.set(N,{depValuesDiscoveredSoFarDuringAsyncWork:U,executionID:$,loadingLoadable:L,stateVersions:new Map([[M.version,!0]])})}function k(N,$,L){if(P(N,$)){const U=O(N);U!=null&&(U.depValuesDiscoveredSoFarDuringAsyncWork=L)}}function R(N){c.delete(N)}function P(N,$){var L;return $===((L=O(N))===null||L===void 0?void 0:L.executionID)}function B(N){return Array.from(N.entries()).map(([$,L])=>[$,L.contents])}function A(N,$,L){N.atomValues.set(n,$);try{a.set(B(L),$)}catch(U){throw Ke(`Problem with setting cache for selector "${n}": ${U.message}`)}}function x(N){if(Hu.includes(n)){const $=`Recoil selector has circular dependencies: ${Hu.slice(Hu.indexOf(n)).join("  ")}`;return Tp(Ke($))}Hu.push(n);try{return N()}finally{Hu.pop()}}function j(N,$){const L=$.atomValues.get(n);return L??a.get(U=>{var M;return typeof U!="string"&&pd(!1),(M=YH(N,$,U))===null||M===void 0?void 0:M.contents})}function F(N,$){return x(()=>S(N,$))}function z(N){N.atomValues.delete(n)}function Z(N,$){e==null&&pd(!1);for(const U of o){var L;const M=tG(U);(L=M.clearCache)===null||L===void 0||L.call(M,N,$)}o.clear(),z($),a.clear(),jC(N,e)}return s!=null?e=UC({key:n,nodeType:"selector",peek:j,get:F,set:($,L,U)=>{let M=!1;const te=new Map;function G({key:se}){if(M)throw Ke("Recoil: Async selector sets are not currently supported.");const De=xp($,L,se);if(De.state==="hasValue")return De.contents;if(De.state==="loading"){const He=`Getting value of asynchronous atom or selector "${se}" in a pending state while setting selector "${n}" is not yet supported.`;throw Ke(He)}else throw De.contents}function ee(se,De){if(M)throw Ke("Recoil: Async selector sets are not currently supported.");const He=typeof De=="function"?De(G(se)):De;XH($,L,se.key,He).forEach((Me,ve)=>te.set(ve,Me))}function ue(se){ee(se,ZH)}const ye=s({set:ee,get:G,reset:ue},U);if(ye!==void 0)throw Ct(ye)?Ke("Recoil: Async selector sets are not currently supported."):Ke("Recoil: selector set should be a void function.");return M=!0,te},init:h,invalidate:z,clearCache:Z,shouldDeleteConfigOnRelease:f,dangerouslyAllowMutability:t.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:l}):e=UC({key:n,nodeType:"selector",peek:j,get:F,init:h,invalidate:z,clearCache:Z,shouldDeleteConfigOnRelease:f,dangerouslyAllowMutability:t.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:l})}jO.value=t=>new $O(t);var Pc=jO;const{isLoadable:aG,loadableWithError:i0,loadableWithPromise:s0,loadableWithValue:Nl}=pf,{WrappedValue:VO}=LO,{peekNodeInfo:lG}=Bo,{DEFAULT_VALUE:oa,DefaultValue:zs,getConfigDeletionHandler:BO,registerNode:cG,setConfigDeletionHandler:uG}=xr,{isRecoilValue:dG}=Ac,{getRecoilValueAsLoadable:hG,markRecoilValueModified:fG,setRecoilValue:VC,setRecoilValueLoadable:pG}=Qi,{retainedByOptionWithDefault:mG}=pl,Gu=t=>t instanceof VO?t.value:t;function gG(t){const{key:e,persistence_UNSTABLE:n}=t,r=mG(t.retainedBy_UNSTABLE);let i=0;function s(g){return s0(g.then(v=>(o=Nl(v),v)).catch(v=>{throw o=i0(v),v}))}let o=Ct(t.default)?s(t.default):aG(t.default)?t.default.state==="loading"?s(t.default.contents):t.default:Nl(Gu(t.default));o.contents;let a;const l=new Map;function c(g){return g}function u(g,v){const b=v.then(I=>{var E,D;return((D=((E=g.getState().nextTree)!==null&&E!==void 0?E:g.getState().currentTree).atomValues.get(e))===null||D===void 0?void 0:D.contents)===b&&VC(g,m,I),I}).catch(I=>{var E,D;throw((D=((E=g.getState().nextTree)!==null&&E!==void 0?E:g.getState().currentTree).atomValues.get(e))===null||D===void 0?void 0:D.contents)===b&&pG(g,m,i0(I)),I});return b}function d(g,v,b){var I;i++;const E=()=>{var R;i--,(R=l.get(g))===null||R===void 0||R.forEach(P=>P()),l.delete(g)};if(g.getState().knownAtoms.add(e),o.state==="loading"){const R=()=>{var P;((P=g.getState().nextTree)!==null&&P!==void 0?P:g.getState().currentTree).atomValues.has(e)||fG(g,m)};o.contents.finally(R)}const D=(I=t.effects)!==null&&I!==void 0?I:t.effects_UNSTABLE;if(D!=null){let x=function($){if(P&&$.key===e){const L=R;return L instanceof zs?h(g,v):Ct(L)?s0(L.then(U=>U instanceof zs?o.toPromise():U)):Nl(L)}return hG(g,$)},j=function($){return x($).toPromise()},F=function($){var L;const U=lG(g,(L=g.getState().nextTree)!==null&&L!==void 0?L:g.getState().currentTree,$.key);return P&&$.key===e&&!(R instanceof zs)?{...U,isSet:!0,loadable:x($)}:U};var O=x,C=j,k=F;let R=oa,P=!0,B=!1,A=null;const z=$=>L=>{if(P){const U=x(m),M=U.state==="hasValue"?U.contents:oa;R=typeof L=="function"?L(M):L,Ct(R)&&(R=R.then(te=>(A={effect:$,value:te},te)))}else{if(Ct(L))throw Ke("Setting atoms to async values is not implemented.");typeof L!="function"&&(A={effect:$,value:Gu(L)}),VC(g,m,typeof L=="function"?U=>{const M=Gu(L(U));return A={effect:$,value:M},M}:Gu(L))}},Z=$=>()=>z($)(oa),N=$=>L=>{var U;const{release:M}=g.subscribeToTransactions(te=>{var G;let{currentTree:ee,previousTree:ue}=te.getState();ue||(ue=ee);const ye=(G=ee.atomValues.get(e))!==null&&G!==void 0?G:o;if(ye.state==="hasValue"){var se,De,He,Ee;const Me=ye.contents,ve=(se=ue.atomValues.get(e))!==null&&se!==void 0?se:o,Le=ve.state==="hasValue"?ve.contents:oa;((De=A)===null||De===void 0?void 0:De.effect)!==$||((He=A)===null||He===void 0?void 0:He.value)!==Me?L(Me,Le,!ee.atomValues.has(e)):((Ee=A)===null||Ee===void 0?void 0:Ee.effect)===$&&(A=null)}},e);l.set(g,[...(U=l.get(g))!==null&&U!==void 0?U:[],M])};for(const $ of D)try{const L=$({node:m,storeID:g.storeID,parentStoreID_UNSTABLE:g.parentStoreID,trigger:b,setSelf:z($),resetSelf:Z($),onSet:N($),getPromise:j,getLoadable:x,getInfo_UNSTABLE:F});if(L!=null){var S;l.set(g,[...(S=l.get(g))!==null&&S!==void 0?S:[],L])}}catch(L){R=L,B=!0}if(P=!1,!(R instanceof zs)){var T;const $=B?i0(R):Ct(R)?s0(u(g,R)):Nl(Gu(R));$.contents,v.atomValues.set(e,$),(T=g.getState().nextTree)===null||T===void 0||T.atomValues.set(e,$)}}return E}function h(g,v){var b,I;return(b=(I=v.atomValues.get(e))!==null&&I!==void 0?I:a)!==null&&b!==void 0?b:o}function f(g,v){if(v.atomValues.has(e))return Ot(v.atomValues.get(e));if(v.nonvalidatedAtoms.has(e)){if(a!=null)return a;if(n==null)return o;const b=v.nonvalidatedAtoms.get(e),I=n.validator(b,oa);return a=I instanceof zs?o:Nl(I),a}else return o}function p(){a=void 0}function y(g,v,b){if(v.atomValues.has(e)){const I=Ot(v.atomValues.get(e));if(I.state==="hasValue"&&b===I.contents)return new Map}else if(!v.nonvalidatedAtoms.has(e)&&b instanceof zs)return new Map;return a=void 0,new Map().set(e,Nl(b))}function w(){return BO(e)!==void 0&&i<=0}const m=cG({key:e,nodeType:"atom",peek:h,get:f,set:y,init:d,invalidate:p,shouldDeleteConfigOnRelease:w,dangerouslyAllowMutability:t.dangerouslyAllowMutability,persistence_UNSTABLE:t.persistence_UNSTABLE?{type:t.persistence_UNSTABLE.type,backButton:t.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:r});return m}function Vb(t){const{...e}=t,n="default"in t?t.default:new Promise(()=>{});return dG(n)?yG({...e,default:n}):gG({...e,default:n})}function yG(t){const e=Vb({...t,default:oa,persistence_UNSTABLE:t.persistence_UNSTABLE===void 0?void 0:{...t.persistence_UNSTABLE,validator:r=>r instanceof zs?r:Ot(t.persistence_UNSTABLE).validator(r,oa)},effects:t.effects,effects_UNSTABLE:t.effects_UNSTABLE}),n=Pc({key:`${t.key}__withFallback`,get:({get:r})=>{const i=r(e);return i instanceof zs?t.default:i},set:({set:r},i)=>r(e,i),cachePolicy_UNSTABLE:{eviction:"most-recent"},dangerouslyAllowMutability:t.dangerouslyAllowMutability});return uG(n.key,BO(t.key)),n}Vb.value=t=>new VO(t);var zO=Vb;class vG{constructor(e){var n;ze(this,"_map",void 0),ze(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=(n=e==null?void 0:e.mapKey)!==null&&n!==void 0?n:r=>r}size(){return this._map.size}has(e){return this._map.has(this._keyMapper(e))}get(e){return this._map.get(this._keyMapper(e))}set(e,n){this._map.set(this._keyMapper(e),n)}delete(e){this._map.delete(this._keyMapper(e))}clear(){this._map.clear()}}var _G={MapCache:vG},wG=_G.MapCache,SG=Object.freeze({__proto__:null,MapCache:wG});const{LRUCache:BC}=FO,{MapCache:bG}=SG,Cp={equality:"reference",eviction:"none",maxSize:1/0};function EG({equality:t=Cp.equality,eviction:e=Cp.eviction,maxSize:n=Cp.maxSize}=Cp){const r=TG(t);return xG(e,n,r)}function TG(t){switch(t){case"reference":return e=>e;case"value":return e=>Py(e)}throw Ke(`Unrecognized equality policy ${t}`)}function xG(t,e,n){switch(t){case"keep-all":return new bG({mapKey:n});case"lru":return new BC({mapKey:n,maxSize:Ot(e)});case"most-recent":return new BC({mapKey:n,maxSize:1})}throw Ke(`Unrecognized eviction policy ${t}`)}var WO=EG;const{setConfigDeletionHandler:IG}=xr;function CG(t){var e,n;const r=WO({equality:(e=(n=t.cachePolicyForParams_UNSTABLE)===null||n===void 0?void 0:n.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return i=>{var s,o;const a=r.get(i);if(a!=null)return a;const{cachePolicyForParams_UNSTABLE:l,...c}=t,u="default"in t?t.default:new Promise(()=>{}),d=zO({...c,key:`${t.key}__${(s=Py(i))!==null&&s!==void 0?s:"void"}`,default:typeof u=="function"?u(i):u,retainedBy_UNSTABLE:typeof t.retainedBy_UNSTABLE=="function"?t.retainedBy_UNSTABLE(i):t.retainedBy_UNSTABLE,effects:typeof t.effects=="function"?t.effects(i):typeof t.effects_UNSTABLE=="function"?t.effects_UNSTABLE(i):(o=t.effects)!==null&&o!==void 0?o:t.effects_UNSTABLE});return r.set(i,d),IG(d.key,()=>{r.delete(i)}),d}}var kG=CG;const{setConfigDeletionHandler:AG}=xr;let RG=0;function NG(t){var e,n;const r=WO({equality:(e=(n=t.cachePolicyForParams_UNSTABLE)===null||n===void 0?void 0:n.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return i=>{var s;let o;try{o=r.get(i)}catch(h){throw Ke(`Problem with cache lookup for selector ${t.key}: ${h.message}`)}if(o!=null)return o;const a=`${t.key}__selectorFamily/${(s=Py(i,{allowFunctions:!0}))!==null&&s!==void 0?s:"void"}/${RG++}`,l=h=>t.get(i)(h),c=t.cachePolicy_UNSTABLE,u=typeof t.retainedBy_UNSTABLE=="function"?t.retainedBy_UNSTABLE(i):t.retainedBy_UNSTABLE;let d;if(t.set!=null){const h=t.set;d=Pc({key:a,get:l,set:(p,y)=>h(i)(p,y),cachePolicy_UNSTABLE:c,dangerouslyAllowMutability:t.dangerouslyAllowMutability,retainedBy_UNSTABLE:u})}else d=Pc({key:a,get:l,cachePolicy_UNSTABLE:c,dangerouslyAllowMutability:t.dangerouslyAllowMutability,retainedBy_UNSTABLE:u});return r.set(i,d),AG(d.key,()=>{r.delete(i)}),d}}var zo=NG;const PG=zo({key:"__constant",get:t=>()=>t,cachePolicyForParams_UNSTABLE:{equality:"reference"}});function DG(t){return PG(t)}var OG=DG;const LG=zo({key:"__error",get:t=>()=>{throw Ke(t)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});function MG(t){return LG(t)}var FG=MG;function $G(t){return t}var UG=$G;const{loadableWithError:HO,loadableWithPromise:GO,loadableWithValue:qO}=pf;function Dy(t,e){const n=Array(e.length).fill(void 0),r=Array(e.length).fill(void 0);for(const[i,s]of e.entries())try{n[i]=t(s)}catch(o){r[i]=o}return[n,r]}function jG(t){return t!=null&&!Ct(t)}function Oy(t){return Array.isArray(t)?t:Object.getOwnPropertyNames(t).map(e=>t[e])}function Zw(t,e){return Array.isArray(t)?e:Object.getOwnPropertyNames(t).reduce((n,r,i)=>({...n,[r]:e[i]}),{})}function hc(t,e,n){const r=n.map((i,s)=>i==null?qO(e[s]):Ct(i)?GO(i):HO(i));return Zw(t,r)}function VG(t,e){return e.map((n,r)=>n===void 0?t[r]:n)}const BG=zo({key:"__waitForNone",get:t=>({get:e})=>{const n=Oy(t),[r,i]=Dy(e,n);return hc(t,r,i)},dangerouslyAllowMutability:!0}),zG=zo({key:"__waitForAny",get:t=>({get:e})=>{const n=Oy(t),[r,i]=Dy(e,n);return i.some(s=>!Ct(s))?hc(t,r,i):new Promise(s=>{for(const[o,a]of i.entries())Ct(a)&&a.then(l=>{r[o]=l,i[o]=void 0,s(hc(t,r,i))}).catch(l=>{i[o]=l,s(hc(t,r,i))})})},dangerouslyAllowMutability:!0}),WG=zo({key:"__waitForAll",get:t=>({get:e})=>{const n=Oy(t),[r,i]=Dy(e,n);if(i.every(o=>o==null))return Zw(t,r);const s=i.find(jG);if(s!=null)throw s;return Promise.all(i).then(o=>Zw(t,VG(r,o)))},dangerouslyAllowMutability:!0}),HG=zo({key:"__waitForAllSettled",get:t=>({get:e})=>{const n=Oy(t),[r,i]=Dy(e,n);return i.every(s=>!Ct(s))?hc(t,r,i):Promise.all(i.map((s,o)=>Ct(s)?s.then(a=>{r[o]=a,i[o]=void 0}).catch(a=>{r[o]=void 0,i[o]=a}):null)).then(()=>hc(t,r,i))},dangerouslyAllowMutability:!0}),GG=zo({key:"__noWait",get:t=>({get:e})=>{try{return Pc.value(qO(e(t)))}catch(n){return Pc.value(Ct(n)?GO(n):HO(n))}},dangerouslyAllowMutability:!0});var qG={waitForNone:BG,waitForAny:zG,waitForAll:WG,waitForAllSettled:HG,noWait:GG};const{RecoilLoadable:KG}=pf,{DefaultValue:QG}=xr,{RecoilRoot:YG,useRecoilStoreID:XG}=ks,{isRecoilValue:JG}=Ac,{retentionZone:ZG}=Sy,{freshSnapshot:eq}=Cy,{useRecoilState:tq,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:nq,useRecoilStateLoadable:rq,useRecoilValue:iq,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:sq,useRecoilValueLoadable:oq,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:aq,useResetRecoilState:lq,useSetRecoilState:cq}=_W,{useGotoRecoilSnapshot:uq,useRecoilSnapshot:dq,useRecoilTransactionObserver:hq}=RO,{useRecoilCallback:fq}=OO,{noWait:pq,waitForAll:mq,waitForAllSettled:gq,waitForAny:yq,waitForNone:vq}=qG;var Ly={DefaultValue:QG,isRecoilValue:JG,RecoilLoadable:KG,RecoilEnv:lu,RecoilRoot:YG,useRecoilStoreID:XG,useRecoilBridgeAcrossReactRoots_UNSTABLE:GW,atom:zO,selector:Pc,atomFamily:kG,selectorFamily:zo,constSelector:OG,errorSelector:FG,readOnlySelector:UG,noWait:pq,waitForNone:vq,waitForAny:yq,waitForAll:mq,waitForAllSettled:gq,useRecoilValue:iq,useRecoilValueLoadable:oq,useRecoilState:tq,useRecoilStateLoadable:rq,useSetRecoilState:cq,useResetRecoilState:lq,useGetRecoilValueInfo_UNSTABLE:jW,useRecoilRefresher_UNSTABLE:SH,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:aq,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:sq,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:nq,useRecoilCallback:fq,useRecoilTransaction_UNSTABLE:IH,useGotoRecoilSnapshot:uq,useRecoilSnapshot:dq,useRecoilTransactionObserver_UNSTABLE:hq,snapshot_UNSTABLE:eq,useRetain:Mb,retentionZone:ZG},_q=Ly.RecoilRoot,My=Ly.atom,wq=Ly.useRecoilValue,Lr=Ly.useRecoilState,yh={},Sq={get exports(){return yh},set exports(t){yh=t}},yt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bn=typeof Symbol=="function"&&Symbol.for,Bb=bn?Symbol.for("react.element"):60103,zb=bn?Symbol.for("react.portal"):60106,Fy=bn?Symbol.for("react.fragment"):60107,$y=bn?Symbol.for("react.strict_mode"):60108,Uy=bn?Symbol.for("react.profiler"):60114,jy=bn?Symbol.for("react.provider"):60109,Vy=bn?Symbol.for("react.context"):60110,Wb=bn?Symbol.for("react.async_mode"):60111,By=bn?Symbol.for("react.concurrent_mode"):60111,zy=bn?Symbol.for("react.forward_ref"):60112,Wy=bn?Symbol.for("react.suspense"):60113,bq=bn?Symbol.for("react.suspense_list"):60120,Hy=bn?Symbol.for("react.memo"):60115,Gy=bn?Symbol.for("react.lazy"):60116,Eq=bn?Symbol.for("react.block"):60121,Tq=bn?Symbol.for("react.fundamental"):60117,xq=bn?Symbol.for("react.responder"):60118,Iq=bn?Symbol.for("react.scope"):60119;function Br(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Bb:switch(t=t.type,t){case Wb:case By:case Fy:case Uy:case $y:case Wy:return t;default:switch(t=t&&t.$$typeof,t){case Vy:case zy:case Gy:case Hy:case jy:return t;default:return e}}case zb:return e}}}function KO(t){return Br(t)===By}yt.AsyncMode=Wb;yt.ConcurrentMode=By;yt.ContextConsumer=Vy;yt.ContextProvider=jy;yt.Element=Bb;yt.ForwardRef=zy;yt.Fragment=Fy;yt.Lazy=Gy;yt.Memo=Hy;yt.Portal=zb;yt.Profiler=Uy;yt.StrictMode=$y;yt.Suspense=Wy;yt.isAsyncMode=function(t){return KO(t)||Br(t)===Wb};yt.isConcurrentMode=KO;yt.isContextConsumer=function(t){return Br(t)===Vy};yt.isContextProvider=function(t){return Br(t)===jy};yt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Bb};yt.isForwardRef=function(t){return Br(t)===zy};yt.isFragment=function(t){return Br(t)===Fy};yt.isLazy=function(t){return Br(t)===Gy};yt.isMemo=function(t){return Br(t)===Hy};yt.isPortal=function(t){return Br(t)===zb};yt.isProfiler=function(t){return Br(t)===Uy};yt.isStrictMode=function(t){return Br(t)===$y};yt.isSuspense=function(t){return Br(t)===Wy};yt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Fy||t===By||t===Uy||t===$y||t===Wy||t===bq||typeof t=="object"&&t!==null&&(t.$$typeof===Gy||t.$$typeof===Hy||t.$$typeof===jy||t.$$typeof===Vy||t.$$typeof===zy||t.$$typeof===Tq||t.$$typeof===xq||t.$$typeof===Iq||t.$$typeof===Eq)};yt.typeOf=Br;(function(t){t.exports=yt})(Sq);var Cq=function(e,n,r,i){var s=r?r.call(i,e,n):void 0;if(s!==void 0)return!!s;if(e===n)return!0;if(typeof e!="object"||!e||typeof n!="object"||!n)return!1;var o=Object.keys(e),a=Object.keys(n);if(o.length!==a.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(n),c=0;c<o.length;c++){var u=o[c];if(!l(u))return!1;var d=e[u],h=n[u];if(s=r?r.call(i,d,h,u):void 0,s===!1||s===void 0&&d!==h)return!1}return!0};function kq(t){function e(N,$,L,U,M){for(var te=0,G=0,ee=0,ue=0,ye,se,De=0,He=0,Ee,Me=Ee=ye=0,ve=0,Le=0,ft=0,qe=0,ut=L.length,Nt=ut-1,et,pe="",Ge="",K="",Y="",X;ve<ut;){if(se=L.charCodeAt(ve),ve===Nt&&G+ue+ee+te!==0&&(G!==0&&(se=G===47?10:47),ue=ee=te=0,ut++,Nt++),G+ue+ee+te===0){if(ve===Nt&&(0<Le&&(pe=pe.replace(h,"")),0<pe.trim().length)){switch(se){case 32:case 9:case 59:case 13:case 10:break;default:pe+=L.charAt(ve)}se=59}switch(se){case 123:for(pe=pe.trim(),ye=pe.charCodeAt(0),Ee=1,qe=++ve;ve<ut;){switch(se=L.charCodeAt(ve)){case 123:Ee++;break;case 125:Ee--;break;case 47:switch(se=L.charCodeAt(ve+1)){case 42:case 47:e:{for(Me=ve+1;Me<Nt;++Me)switch(L.charCodeAt(Me)){case 47:if(se===42&&L.charCodeAt(Me-1)===42&&ve+2!==Me){ve=Me+1;break e}break;case 10:if(se===47){ve=Me+1;break e}}ve=Me}}break;case 91:se++;case 40:se++;case 34:case 39:for(;ve++<Nt&&L.charCodeAt(ve)!==se;);}if(Ee===0)break;ve++}switch(Ee=L.substring(qe,ve),ye===0&&(ye=(pe=pe.replace(d,"").trim()).charCodeAt(0)),ye){case 64:switch(0<Le&&(pe=pe.replace(h,"")),se=pe.charCodeAt(1),se){case 100:case 109:case 115:case 45:Le=$;break;default:Le=A}if(Ee=e($,Le,Ee,se,M+1),qe=Ee.length,0<j&&(Le=n(A,pe,ft),X=a(3,Ee,Le,$,R,k,qe,se,M,U),pe=Le.join(""),X!==void 0&&(qe=(Ee=X.trim()).length)===0&&(se=0,Ee="")),0<qe)switch(se){case 115:pe=pe.replace(E,o);case 100:case 109:case 45:Ee=pe+"{"+Ee+"}";break;case 107:pe=pe.replace(g,"$1 $2"),Ee=pe+"{"+Ee+"}",Ee=B===1||B===2&&s("@"+Ee,3)?"@-webkit-"+Ee+"@"+Ee:"@"+Ee;break;default:Ee=pe+Ee,U===112&&(Ee=(Ge+=Ee,""))}else Ee="";break;default:Ee=e($,n($,pe,ft),Ee,U,M+1)}K+=Ee,Ee=ft=Le=Me=ye=0,pe="",se=L.charCodeAt(++ve);break;case 125:case 59:if(pe=(0<Le?pe.replace(h,""):pe).trim(),1<(qe=pe.length))switch(Me===0&&(ye=pe.charCodeAt(0),ye===45||96<ye&&123>ye)&&(qe=(pe=pe.replace(" ",":")).length),0<j&&(X=a(1,pe,$,N,R,k,Ge.length,U,M,U))!==void 0&&(qe=(pe=X.trim()).length)===0&&(pe="\0\0"),ye=pe.charCodeAt(0),se=pe.charCodeAt(1),ye){case 0:break;case 64:if(se===105||se===99){Y+=pe+L.charAt(ve);break}default:pe.charCodeAt(qe-1)!==58&&(Ge+=i(pe,ye,se,pe.charCodeAt(2)))}ft=Le=Me=ye=0,pe="",se=L.charCodeAt(++ve)}}switch(se){case 13:case 10:G===47?G=0:1+ye===0&&U!==107&&0<pe.length&&(Le=1,pe+="\0"),0<j*z&&a(0,pe,$,N,R,k,Ge.length,U,M,U),k=1,R++;break;case 59:case 125:if(G+ue+ee+te===0){k++;break}default:switch(k++,et=L.charAt(ve),se){case 9:case 32:if(ue+te+G===0)switch(De){case 44:case 58:case 9:case 32:et="";break;default:se!==32&&(et=" ")}break;case 0:et="\\0";break;case 12:et="\\f";break;case 11:et="\\v";break;case 38:ue+G+te===0&&(Le=ft=1,et="\f"+et);break;case 108:if(ue+G+te+P===0&&0<Me)switch(ve-Me){case 2:De===112&&L.charCodeAt(ve-3)===58&&(P=De);case 8:He===111&&(P=He)}break;case 58:ue+G+te===0&&(Me=ve);break;case 44:G+ee+ue+te===0&&(Le=1,et+="\r");break;case 34:case 39:G===0&&(ue=ue===se?0:ue===0?se:ue);break;case 91:ue+G+ee===0&&te++;break;case 93:ue+G+ee===0&&te--;break;case 41:ue+G+te===0&&ee--;break;case 40:if(ue+G+te===0){if(ye===0)switch(2*De+3*He){case 533:break;default:ye=1}ee++}break;case 64:G+ee+ue+te+Me+Ee===0&&(Ee=1);break;case 42:case 47:if(!(0<ue+te+ee))switch(G){case 0:switch(2*se+3*L.charCodeAt(ve+1)){case 235:G=47;break;case 220:qe=ve,G=42}break;case 42:se===47&&De===42&&qe+2!==ve&&(L.charCodeAt(qe+2)===33&&(Ge+=L.substring(qe,ve+1)),et="",G=0)}}G===0&&(pe+=et)}He=De,De=se,ve++}if(qe=Ge.length,0<qe){if(Le=$,0<j&&(X=a(2,Ge,Le,N,R,k,qe,U,M,U),X!==void 0&&(Ge=X).length===0))return Y+Ge+K;if(Ge=Le.join(",")+"{"+Ge+"}",B*P!==0){switch(B!==2||s(Ge,2)||(P=0),P){case 111:Ge=Ge.replace(b,":-moz-$1")+Ge;break;case 112:Ge=Ge.replace(v,"::-webkit-input-$1")+Ge.replace(v,"::-moz-$1")+Ge.replace(v,":-ms-input-$1")+Ge}P=0}}return Y+Ge+K}function n(N,$,L){var U=$.trim().split(w);$=U;var M=U.length,te=N.length;switch(te){case 0:case 1:var G=0;for(N=te===0?"":N[0]+" ";G<M;++G)$[G]=r(N,$[G],L).trim();break;default:var ee=G=0;for($=[];G<M;++G)for(var ue=0;ue<te;++ue)$[ee++]=r(N[ue]+" ",U[G],L).trim()}return $}function r(N,$,L){var U=$.charCodeAt(0);switch(33>U&&(U=($=$.trim()).charCodeAt(0)),U){case 38:return $.replace(m,"$1"+N.trim());case 58:return N.trim()+$.replace(m,"$1"+N.trim());default:if(0<1*L&&0<$.indexOf("\f"))return $.replace(m,(N.charCodeAt(0)===58?"":"$1")+N.trim())}return N+$}function i(N,$,L,U){var M=N+";",te=2*$+3*L+4*U;if(te===944){N=M.indexOf(":",9)+1;var G=M.substring(N,M.length-1).trim();return G=M.substring(0,N).trim()+G+";",B===1||B===2&&s(G,1)?"-webkit-"+G+G:G}if(B===0||B===2&&!s(M,1))return M;switch(te){case 1015:return M.charCodeAt(10)===97?"-webkit-"+M+M:M;case 951:return M.charCodeAt(3)===116?"-webkit-"+M+M:M;case 963:return M.charCodeAt(5)===110?"-webkit-"+M+M:M;case 1009:if(M.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+M+M;case 978:return"-webkit-"+M+"-moz-"+M+M;case 1019:case 983:return"-webkit-"+M+"-moz-"+M+"-ms-"+M+M;case 883:if(M.charCodeAt(8)===45)return"-webkit-"+M+M;if(0<M.indexOf("image-set(",11))return M.replace(C,"$1-webkit-$2")+M;break;case 932:if(M.charCodeAt(4)===45)switch(M.charCodeAt(5)){case 103:return"-webkit-box-"+M.replace("-grow","")+"-webkit-"+M+"-ms-"+M.replace("grow","positive")+M;case 115:return"-webkit-"+M+"-ms-"+M.replace("shrink","negative")+M;case 98:return"-webkit-"+M+"-ms-"+M.replace("basis","preferred-size")+M}return"-webkit-"+M+"-ms-"+M+M;case 964:return"-webkit-"+M+"-ms-flex-"+M+M;case 1023:if(M.charCodeAt(8)!==99)break;return G=M.substring(M.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+G+"-webkit-"+M+"-ms-flex-pack"+G+M;case 1005:return p.test(M)?M.replace(f,":-webkit-")+M.replace(f,":-moz-")+M:M;case 1e3:switch(G=M.substring(13).trim(),$=G.indexOf("-")+1,G.charCodeAt(0)+G.charCodeAt($)){case 226:G=M.replace(I,"tb");break;case 232:G=M.replace(I,"tb-rl");break;case 220:G=M.replace(I,"lr");break;default:return M}return"-webkit-"+M+"-ms-"+G+M;case 1017:if(M.indexOf("sticky",9)===-1)break;case 975:switch($=(M=N).length-10,G=(M.charCodeAt($)===33?M.substring(0,$):M).substring(N.indexOf(":",7)+1).trim(),te=G.charCodeAt(0)+(G.charCodeAt(7)|0)){case 203:if(111>G.charCodeAt(8))break;case 115:M=M.replace(G,"-webkit-"+G)+";"+M;break;case 207:case 102:M=M.replace(G,"-webkit-"+(102<te?"inline-":"")+"box")+";"+M.replace(G,"-webkit-"+G)+";"+M.replace(G,"-ms-"+G+"box")+";"+M}return M+";";case 938:if(M.charCodeAt(5)===45)switch(M.charCodeAt(6)){case 105:return G=M.replace("-items",""),"-webkit-"+M+"-webkit-box-"+G+"-ms-flex-"+G+M;case 115:return"-webkit-"+M+"-ms-flex-item-"+M.replace(S,"")+M;default:return"-webkit-"+M+"-ms-flex-line-pack"+M.replace("align-content","").replace(S,"")+M}break;case 973:case 989:if(M.charCodeAt(3)!==45||M.charCodeAt(4)===122)break;case 931:case 953:if(O.test(N)===!0)return(G=N.substring(N.indexOf(":")+1)).charCodeAt(0)===115?i(N.replace("stretch","fill-available"),$,L,U).replace(":fill-available",":stretch"):M.replace(G,"-webkit-"+G)+M.replace(G,"-moz-"+G.replace("fill-",""))+M;break;case 962:if(M="-webkit-"+M+(M.charCodeAt(5)===102?"-ms-"+M:"")+M,L+U===211&&M.charCodeAt(13)===105&&0<M.indexOf("transform",10))return M.substring(0,M.indexOf(";",27)+1).replace(y,"$1-webkit-$2")+M}return M}function s(N,$){var L=N.indexOf($===1?":":"{"),U=N.substring(0,$!==3?L:10);return L=N.substring(L+1,N.length-1),F($!==2?U:U.replace(T,"$1"),L,$)}function o(N,$){var L=i($,$.charCodeAt(0),$.charCodeAt(1),$.charCodeAt(2));return L!==$+";"?L.replace(D," or ($1)").substring(4):"("+$+")"}function a(N,$,L,U,M,te,G,ee,ue,ye){for(var se=0,De=$,He;se<j;++se)switch(He=x[se].call(u,N,De,L,U,M,te,G,ee,ue,ye)){case void 0:case!1:case!0:case null:break;default:De=He}if(De!==$)return De}function l(N){switch(N){case void 0:case null:j=x.length=0;break;default:if(typeof N=="function")x[j++]=N;else if(typeof N=="object")for(var $=0,L=N.length;$<L;++$)l(N[$]);else z=!!N|0}return l}function c(N){return N=N.prefix,N!==void 0&&(F=null,N?typeof N!="function"?B=1:(B=2,F=N):B=0),c}function u(N,$){var L=N;if(33>L.charCodeAt(0)&&(L=L.trim()),Z=L,L=[Z],0<j){var U=a(-1,$,L,L,R,k,0,0,0,0);U!==void 0&&typeof U=="string"&&($=U)}var M=e(A,L,$,0,0);return 0<j&&(U=a(-2,M,L,L,R,k,M.length,0,0,0),U!==void 0&&(M=U)),Z="",P=0,k=R=1,M}var d=/^\0+/g,h=/[\0\r\f]/g,f=/: */g,p=/zoo|gra/,y=/([,: ])(transform)/g,w=/,\r+?/g,m=/([\t\r\n ])*\f?&/g,g=/@(k\w+)\s*(\S*)\s*/,v=/::(place)/g,b=/:(read-only)/g,I=/[svh]\w+-[tblr]{2}/,E=/\(\s*(.*)\s*\)/g,D=/([\s\S]*?);/g,S=/-self|flex-/g,T=/[^]*?(:[rp][el]a[\w-]+)[^]*/,O=/stretch|:\s*\w+\-(?:conte|avail)/,C=/([^-])(image-set\()/,k=1,R=1,P=0,B=1,A=[],x=[],j=0,F=null,z=0,Z="";return u.use=l,u.set=c,t!==void 0&&c(t),u}var Aq={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function Rq(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var Nq=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,zC=Rq(function(t){return Nq.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),Hb=yh,Pq={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Dq={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Oq={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},QO={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Gb={};Gb[Hb.ForwardRef]=Oq;Gb[Hb.Memo]=QO;function WC(t){return Hb.isMemo(t)?QO:Gb[t.$$typeof]||Pq}var Lq=Object.defineProperty,Mq=Object.getOwnPropertyNames,HC=Object.getOwnPropertySymbols,Fq=Object.getOwnPropertyDescriptor,$q=Object.getPrototypeOf,GC=Object.prototype;function YO(t,e,n){if(typeof e!="string"){if(GC){var r=$q(e);r&&r!==GC&&YO(t,r,n)}var i=Mq(e);HC&&(i=i.concat(HC(e)));for(var s=WC(t),o=WC(e),a=0;a<i.length;++a){var l=i[a];if(!Dq[l]&&!(n&&n[l])&&!(o&&o[l])&&!(s&&s[l])){var c=Fq(e,l);try{Lq(t,l,c)}catch{}}}}return t}var XO=YO;function Nr(){return(Nr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var qC=function(t,e){for(var n=[t[0]],r=0,i=e.length;r<i;r+=1)n.push(e[r],t[r+1]);return n},e1=function(t){return t!==null&&typeof t=="object"&&(t.toString?t.toString():Object.prototype.toString.call(t))==="[object Object]"&&!yh.typeOf(t)},Zm=Object.freeze([]),uo=Object.freeze({});function Dc(t){return typeof t=="function"}function t1(t){return t.displayName||t.name||"Component"}function qy(t){return t&&typeof t.styledComponentId=="string"}var _o=typeof process<"u"&&process.env!==void 0&&({}.REACT_APP_SC_ATTR||{}.SC_ATTR)||"data-styled",Uq="5.3.9",qb=typeof window<"u"&&"HTMLElement"in window,jq=Boolean(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&process.env!==void 0&&({}.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==""?{}.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&{}.REACT_APP_SC_DISABLE_SPEEDY:{}.SC_DISABLE_SPEEDY!==void 0&&{}.SC_DISABLE_SPEEDY!==""?{}.SC_DISABLE_SPEEDY!=="false"&&{}.SC_DISABLE_SPEEDY:!1)),Vq={};function hi(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+t+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var Bq=function(){function t(n){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=n}var e=t.prototype;return e.indexOfGroup=function(n){for(var r=0,i=0;i<n;i++)r+=this.groupSizes[i];return r},e.insertRules=function(n,r){if(n>=this.groupSizes.length){for(var i=this.groupSizes,s=i.length,o=s;n>=o;)(o<<=1)<0&&hi(16,""+n);this.groupSizes=new Uint32Array(o),this.groupSizes.set(i),this.length=o;for(var a=s;a<o;a++)this.groupSizes[a]=0}for(var l=this.indexOfGroup(n+1),c=0,u=r.length;c<u;c++)this.tag.insertRule(l,r[c])&&(this.groupSizes[n]++,l++)},e.clearGroup=function(n){if(n<this.length){var r=this.groupSizes[n],i=this.indexOfGroup(n),s=i+r;this.groupSizes[n]=0;for(var o=i;o<s;o++)this.tag.deleteRule(i)}},e.getGroup=function(n){var r="";if(n>=this.length||this.groupSizes[n]===0)return r;for(var i=this.groupSizes[n],s=this.indexOfGroup(n),o=s+i,a=s;a<o;a++)r+=this.tag.getRule(a)+`/*!sc*/
`;return r},t}(),am=new Map,eg=new Map,Od=1,kp=function(t){if(am.has(t))return am.get(t);for(;eg.has(Od);)Od++;var e=Od++;return am.set(t,e),eg.set(e,t),e},zq=function(t){return eg.get(t)},Wq=function(t,e){e>=Od&&(Od=e+1),am.set(t,e),eg.set(e,t)},Hq="style["+_o+'][data-styled-version="5.3.9"]',Gq=new RegExp("^"+_o+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),qq=function(t,e,n){for(var r,i=n.split(","),s=0,o=i.length;s<o;s++)(r=i[s])&&t.registerName(e,r)},Kq=function(t,e){for(var n=(e.textContent||"").split(`/*!sc*/
`),r=[],i=0,s=n.length;i<s;i++){var o=n[i].trim();if(o){var a=o.match(Gq);if(a){var l=0|parseInt(a[1],10),c=a[2];l!==0&&(Wq(c,l),qq(t,c,a[3]),t.getTag().insertRules(l,r)),r.length=0}else r.push(o)}}},n1=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null},JO=function(t){var e=document.head,n=t||e,r=document.createElement("style"),i=function(a){for(var l=a.childNodes,c=l.length;c>=0;c--){var u=l[c];if(u&&u.nodeType===1&&u.hasAttribute(_o))return u}}(n),s=i!==void 0?i.nextSibling:null;r.setAttribute(_o,"active"),r.setAttribute("data-styled-version","5.3.9");var o=n1();return o&&r.setAttribute("nonce",o),n.insertBefore(r,s),r},Qq=function(){function t(n){var r=this.element=JO(n);r.appendChild(document.createTextNode("")),this.sheet=function(i){if(i.sheet)return i.sheet;for(var s=document.styleSheets,o=0,a=s.length;o<a;o++){var l=s[o];if(l.ownerNode===i)return l}hi(17)}(r),this.length=0}var e=t.prototype;return e.insertRule=function(n,r){try{return this.sheet.insertRule(r,n),this.length++,!0}catch{return!1}},e.deleteRule=function(n){this.sheet.deleteRule(n),this.length--},e.getRule=function(n){var r=this.sheet.cssRules[n];return r!==void 0&&typeof r.cssText=="string"?r.cssText:""},t}(),Yq=function(){function t(n){var r=this.element=JO(n);this.nodes=r.childNodes,this.length=0}var e=t.prototype;return e.insertRule=function(n,r){if(n<=this.length&&n>=0){var i=document.createTextNode(r),s=this.nodes[n];return this.element.insertBefore(i,s||null),this.length++,!0}return!1},e.deleteRule=function(n){this.element.removeChild(this.nodes[n]),this.length--},e.getRule=function(n){return n<this.length?this.nodes[n].textContent:""},t}(),Xq=function(){function t(n){this.rules=[],this.length=0}var e=t.prototype;return e.insertRule=function(n,r){return n<=this.length&&(this.rules.splice(n,0,r),this.length++,!0)},e.deleteRule=function(n){this.rules.splice(n,1),this.length--},e.getRule=function(n){return n<this.length?this.rules[n]:""},t}(),KC=qb,Jq={isServer:!qb,useCSSOMInjection:!jq},Oc=function(){function t(n,r,i){n===void 0&&(n=uo),r===void 0&&(r={}),this.options=Nr({},Jq,{},n),this.gs=r,this.names=new Map(i),this.server=!!n.isServer,!this.server&&qb&&KC&&(KC=!1,function(s){for(var o=document.querySelectorAll(Hq),a=0,l=o.length;a<l;a++){var c=o[a];c&&c.getAttribute(_o)!=="active"&&(Kq(s,c),c.parentNode&&c.parentNode.removeChild(c))}}(this))}t.registerId=function(n){return kp(n)};var e=t.prototype;return e.reconstructWithOptions=function(n,r){return r===void 0&&(r=!0),new t(Nr({},this.options,{},n),this.gs,r&&this.names||void 0)},e.allocateGSInstance=function(n){return this.gs[n]=(this.gs[n]||0)+1},e.getTag=function(){return this.tag||(this.tag=(i=(r=this.options).isServer,s=r.useCSSOMInjection,o=r.target,n=i?new Xq(o):s?new Qq(o):new Yq(o),new Bq(n)));var n,r,i,s,o},e.hasNameForId=function(n,r){return this.names.has(n)&&this.names.get(n).has(r)},e.registerName=function(n,r){if(kp(n),this.names.has(n))this.names.get(n).add(r);else{var i=new Set;i.add(r),this.names.set(n,i)}},e.insertRules=function(n,r,i){this.registerName(n,r),this.getTag().insertRules(kp(n),i)},e.clearNames=function(n){this.names.has(n)&&this.names.get(n).clear()},e.clearRules=function(n){this.getTag().clearGroup(kp(n)),this.clearNames(n)},e.clearTag=function(){this.tag=void 0},e.toString=function(){return function(n){for(var r=n.getTag(),i=r.length,s="",o=0;o<i;o++){var a=zq(o);if(a!==void 0){var l=n.names.get(a),c=r.getGroup(o);if(l&&c&&l.size){var u=_o+".g"+o+'[id="'+a+'"]',d="";l!==void 0&&l.forEach(function(h){h.length>0&&(d+=h+",")}),s+=""+c+u+'{content:"'+d+`"}/*!sc*/
`}}}return s}(this)},t}(),Zq=/(a)(d)/gi,QC=function(t){return String.fromCharCode(t+(t>25?39:97))};function r1(t){var e,n="";for(e=Math.abs(t);e>52;e=e/52|0)n=QC(e%52)+n;return(QC(e%52)+n).replace(Zq,"$1-$2")}var tc=function(t,e){for(var n=e.length;n;)t=33*t^e.charCodeAt(--n);return t},ZO=function(t){return tc(5381,t)};function eL(t){for(var e=0;e<t.length;e+=1){var n=t[e];if(Dc(n)&&!qy(n))return!1}return!0}var eK=ZO("5.3.9"),tK=function(){function t(e,n,r){this.rules=e,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&eL(e),this.componentId=n,this.baseHash=tc(eK,n),this.baseStyle=r,Oc.registerId(n)}return t.prototype.generateAndInjectStyles=function(e,n,r){var i=this.componentId,s=[];if(this.baseStyle&&s.push(this.baseStyle.generateAndInjectStyles(e,n,r)),this.isStatic&&!r.hash)if(this.staticRulesId&&n.hasNameForId(i,this.staticRulesId))s.push(this.staticRulesId);else{var o=za(this.rules,e,n,r).join(""),a=r1(tc(this.baseHash,o)>>>0);if(!n.hasNameForId(i,a)){var l=r(o,"."+a,void 0,i);n.insertRules(i,a,l)}s.push(a),this.staticRulesId=a}else{for(var c=this.rules.length,u=tc(this.baseHash,r.hash),d="",h=0;h<c;h++){var f=this.rules[h];if(typeof f=="string")d+=f;else if(f){var p=za(f,e,n,r),y=Array.isArray(p)?p.join(""):p;u=tc(u,y+h),d+=y}}if(d){var w=r1(u>>>0);if(!n.hasNameForId(i,w)){var m=r(d,"."+w,void 0,i);n.insertRules(i,w,m)}s.push(w)}}return s.join(" ")},t}(),nK=/^\s*\/\/.*$/gm,rK=[":","[",".","#"];function tL(t){var e,n,r,i,s=t===void 0?uo:t,o=s.options,a=o===void 0?uo:o,l=s.plugins,c=l===void 0?Zm:l,u=new kq(a),d=[],h=function(y){function w(m){if(m)try{y(m+"}")}catch{}}return function(m,g,v,b,I,E,D,S,T,O){switch(m){case 1:if(T===0&&g.charCodeAt(0)===64)return y(g+";"),"";break;case 2:if(S===0)return g+"/*|*/";break;case 3:switch(S){case 102:case 112:return y(v[0]+g),"";default:return g+(O===0?"/*|*/":"")}case-2:g.split("/*|*/}").forEach(w)}}}(function(y){d.push(y)}),f=function(y,w,m){return w===0&&rK.indexOf(m[n.length])!==-1||m.match(i)?y:"."+e};function p(y,w,m,g){g===void 0&&(g="&");var v=y.replace(nK,""),b=w&&m?m+" "+w+" { "+v+" }":v;return e=g,n=w,r=new RegExp("\\"+n+"\\b","g"),i=new RegExp("(\\"+n+"\\b){2,}"),u(m||!w?"":w,b)}return u.use([].concat(c,[function(y,w,m){y===2&&m.length&&m[0].lastIndexOf(n)>0&&(m[0]=m[0].replace(r,f))},h,function(y){if(y===-2){var w=d;return d=[],w}}])),p.hash=c.length?c.reduce(function(y,w){return w.name||hi(15),tc(y,w.name)},5381).toString():"",p}var Ky=Pe.createContext(),iK=Ky.Consumer,Kb=Pe.createContext(),nL=(Kb.Consumer,new Oc),i1=tL();function Qb(){return H.useContext(Ky)||nL}function rL(){return H.useContext(Kb)||i1}function iL(t){var e=H.useState(t.stylisPlugins),n=e[0],r=e[1],i=Qb(),s=H.useMemo(function(){var a=i;return t.sheet?a=t.sheet:t.target&&(a=a.reconstructWithOptions({target:t.target},!1)),t.disableCSSOMInjection&&(a=a.reconstructWithOptions({useCSSOMInjection:!1})),a},[t.disableCSSOMInjection,t.sheet,t.target]),o=H.useMemo(function(){return tL({options:{prefix:!t.disableVendorPrefixes},plugins:n})},[t.disableVendorPrefixes,n]);return H.useEffect(function(){Cq(n,t.stylisPlugins)||r(t.stylisPlugins)},[t.stylisPlugins]),Pe.createElement(Ky.Provider,{value:s},Pe.createElement(Kb.Provider,{value:o},t.children))}var sL=function(){function t(e,n){var r=this;this.inject=function(i,s){s===void 0&&(s=i1);var o=r.name+s.hash;i.hasNameForId(r.id,o)||i.insertRules(r.id,o,s(r.rules,o,"@keyframes"))},this.toString=function(){return hi(12,String(r.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=n}return t.prototype.getName=function(e){return e===void 0&&(e=i1),this.name+e.hash},t}(),sK=/([A-Z])/,oK=/([A-Z])/g,aK=/^ms-/,lK=function(t){return"-"+t.toLowerCase()};function YC(t){return sK.test(t)?t.replace(oK,lK).replace(aK,"-ms-"):t}var XC=function(t){return t==null||t===!1||t===""};function za(t,e,n,r){if(Array.isArray(t)){for(var i,s=[],o=0,a=t.length;o<a;o+=1)(i=za(t[o],e,n,r))!==""&&(Array.isArray(i)?s.push.apply(s,i):s.push(i));return s}if(XC(t))return"";if(qy(t))return"."+t.styledComponentId;if(Dc(t)){if(typeof(c=t)!="function"||c.prototype&&c.prototype.isReactComponent||!e)return t;var l=t(e);return za(l,e,n,r)}var c;return t instanceof sL?n?(t.inject(n,r),t.getName(r)):t:e1(t)?function u(d,h){var f,p,y=[];for(var w in d)d.hasOwnProperty(w)&&!XC(d[w])&&(Array.isArray(d[w])&&d[w].isCss||Dc(d[w])?y.push(YC(w)+":",d[w],";"):e1(d[w])?y.push.apply(y,u(d[w],w)):y.push(YC(w)+": "+(f=w,(p=d[w])==null||typeof p=="boolean"||p===""?"":typeof p!="number"||p===0||f in Aq?String(p).trim():p+"px")+";"));return h?[h+" {"].concat(y,["}"]):y}(t):t.toString()}var JC=function(t){return Array.isArray(t)&&(t.isCss=!0),t};function wo(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Dc(t)||e1(t)?JC(za(qC(Zm,[t].concat(n)))):n.length===0&&t.length===1&&typeof t[0]=="string"?t:JC(za(qC(t,n)))}var Yb=function(t,e,n){return n===void 0&&(n=uo),t.theme!==n.theme&&t.theme||e||n.theme},cK=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,uK=/(^-|-$)/g;function o0(t){return t.replace(cK,"-").replace(uK,"")}var Xb=function(t){return r1(ZO(t)>>>0)};function Ap(t){return typeof t=="string"&&!0}var s1=function(t){return typeof t=="function"||typeof t=="object"&&t!==null&&!Array.isArray(t)},dK=function(t){return t!=="__proto__"&&t!=="constructor"&&t!=="prototype"};function hK(t,e,n){var r=t[n];s1(e)&&s1(r)?oL(r,e):t[n]=e}function oL(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0,s=n;i<s.length;i++){var o=s[i];if(s1(o))for(var a in o)dK(a)&&hK(t,o[a],a)}return t}var So=Pe.createContext(),fK=So.Consumer;function pK(t){var e=H.useContext(So),n=H.useMemo(function(){return function(r,i){if(!r)return hi(14);if(Dc(r)){var s=r(i);return s}return Array.isArray(r)||typeof r!="object"?hi(8):i?Nr({},i,{},r):r}(t.theme,e)},[t.theme,e]);return t.children?Pe.createElement(So.Provider,{value:n},t.children):null}var a0={};function aL(t,e,n){var r=qy(t),i=!Ap(t),s=e.attrs,o=s===void 0?Zm:s,a=e.componentId,l=a===void 0?function(g,v){var b=typeof g!="string"?"sc":o0(g);a0[b]=(a0[b]||0)+1;var I=b+"-"+Xb("5.3.9"+b+a0[b]);return v?v+"-"+I:I}(e.displayName,e.parentComponentId):a,c=e.displayName,u=c===void 0?function(g){return Ap(g)?"styled."+g:"Styled("+t1(g)+")"}(t):c,d=e.displayName&&e.componentId?o0(e.displayName)+"-"+e.componentId:e.componentId||l,h=r&&t.attrs?Array.prototype.concat(t.attrs,o).filter(Boolean):o,f=e.shouldForwardProp;r&&t.shouldForwardProp&&(f=e.shouldForwardProp?function(g,v,b){return t.shouldForwardProp(g,v,b)&&e.shouldForwardProp(g,v,b)}:t.shouldForwardProp);var p,y=new tK(n,d,r?t.componentStyle:void 0),w=y.isStatic&&o.length===0,m=function(g,v){return function(b,I,E,D){var S=b.attrs,T=b.componentStyle,O=b.defaultProps,C=b.foldedComponentIds,k=b.shouldForwardProp,R=b.styledComponentId,P=b.target,B=function(U,M,te){U===void 0&&(U=uo);var G=Nr({},M,{theme:U}),ee={};return te.forEach(function(ue){var ye,se,De,He=ue;for(ye in Dc(He)&&(He=He(G)),He)G[ye]=ee[ye]=ye==="className"?(se=ee[ye],De=He[ye],se&&De?se+" "+De:se||De):He[ye]}),[G,ee]}(Yb(I,H.useContext(So),O)||uo,I,S),A=B[0],x=B[1],j=function(U,M,te,G){var ee=Qb(),ue=rL(),ye=M?U.generateAndInjectStyles(uo,ee,ue):U.generateAndInjectStyles(te,ee,ue);return ye}(T,D,A),F=E,z=x.$as||I.$as||x.as||I.as||P,Z=Ap(z),N=x!==I?Nr({},I,{},x):I,$={};for(var L in N)L[0]!=="$"&&L!=="as"&&(L==="forwardedAs"?$.as=N[L]:(k?k(L,zC,z):!Z||zC(L))&&($[L]=N[L]));return I.style&&x.style!==I.style&&($.style=Nr({},I.style,{},x.style)),$.className=Array.prototype.concat(C,R,j!==R?j:null,I.className,x.className).filter(Boolean).join(" "),$.ref=F,H.createElement(z,$)}(p,g,v,w)};return m.displayName=u,(p=Pe.forwardRef(m)).attrs=h,p.componentStyle=y,p.displayName=u,p.shouldForwardProp=f,p.foldedComponentIds=r?Array.prototype.concat(t.foldedComponentIds,t.styledComponentId):Zm,p.styledComponentId=d,p.target=r?t.target:t,p.withComponent=function(g){var v=e.componentId,b=function(E,D){if(E==null)return{};var S,T,O={},C=Object.keys(E);for(T=0;T<C.length;T++)S=C[T],D.indexOf(S)>=0||(O[S]=E[S]);return O}(e,["componentId"]),I=v&&v+"-"+(Ap(g)?g:o0(t1(g)));return aL(g,Nr({},b,{attrs:h,componentId:I}),n)},Object.defineProperty(p,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(g){this._foldedDefaultProps=r?oL({},t.defaultProps,g):g}}),Object.defineProperty(p,"toString",{value:function(){return"."+p.styledComponentId}}),i&&XO(p,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),p}var o1=function(t){return function e(n,r,i){if(i===void 0&&(i=uo),!yh.isValidElementType(r))return hi(1,String(r));var s=function(){return n(r,i,wo.apply(void 0,arguments))};return s.withConfig=function(o){return e(n,r,Nr({},i,{},o))},s.attrs=function(o){return e(n,r,Nr({},i,{attrs:Array.prototype.concat(i.attrs,o).filter(Boolean)}))},s}(aL,t)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(t){o1[t]=o1(t)});var mK=function(){function t(n,r){this.rules=n,this.componentId=r,this.isStatic=eL(n),Oc.registerId(this.componentId+1)}var e=t.prototype;return e.createStyles=function(n,r,i,s){var o=s(za(this.rules,r,i,s).join(""),""),a=this.componentId+n;i.insertRules(a,a,o)},e.removeStyles=function(n,r){r.clearRules(this.componentId+n)},e.renderStyles=function(n,r,i,s){n>2&&Oc.registerId(this.componentId+n),this.removeStyles(n,i),this.createStyles(n,r,i,s)},t}();function uu(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=wo.apply(void 0,[t].concat(n)),s="sc-global-"+Xb(JSON.stringify(i)),o=new mK(i,s);function a(c){var u=Qb(),d=rL(),h=H.useContext(So),f=H.useRef(u.allocateGSInstance(s)).current;return u.server&&l(f,c,u,h,d),H.useLayoutEffect(function(){if(!u.server)return l(f,c,u,h,d),function(){return o.removeStyles(f,u)}},[f,c,u,h,d]),null}function l(c,u,d,h,f){if(o.isStatic)o.renderStyles(c,Vq,d,f);else{var p=Nr({},u,{theme:Yb(u,h,a.defaultProps)});o.renderStyles(c,p,d,f)}}return Pe.memo(a)}function gK(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=wo.apply(void 0,[t].concat(n)).join(""),s=Xb(i);return new sL(s,i)}var yK=function(){function t(){var n=this;this._emitSheetCSS=function(){var r=n.instance.toString();if(!r)return"";var i=n1();return"<style "+[i&&'nonce="'+i+'"',_o+'="true"','data-styled-version="5.3.9"'].filter(Boolean).join(" ")+">"+r+"</style>"},this.getStyleTags=function(){return n.sealed?hi(2):n._emitSheetCSS()},this.getStyleElement=function(){var r;if(n.sealed)return hi(2);var i=((r={})[_o]="",r["data-styled-version"]="5.3.9",r.dangerouslySetInnerHTML={__html:n.instance.toString()},r),s=n1();return s&&(i.nonce=s),[Pe.createElement("style",Nr({},i,{key:"sc-0-0"}))]},this.seal=function(){n.sealed=!0},this.instance=new Oc({isServer:!0}),this.sealed=!1}var e=t.prototype;return e.collectStyles=function(n){return this.sealed?hi(2):Pe.createElement(iL,{sheet:this.instance},n)},e.interleaveWithNodeStream=function(n){return hi(3)},t}(),vK=function(t){var e=Pe.forwardRef(function(n,r){var i=H.useContext(So),s=t.defaultProps,o=Yb(n,i,s);return Pe.createElement(t,Nr({},n,{theme:o,ref:r}))});return XO(e,t),e.displayName="WithTheme("+t1(t)+")",e},_K=function(){return H.useContext(So)},wK={StyleSheet:Oc,masterSheet:nL};const de=o1,SK=Object.freeze(Object.defineProperty({__proto__:null,ServerStyleSheet:yK,StyleSheetConsumer:iK,StyleSheetContext:Ky,StyleSheetManager:iL,ThemeConsumer:fK,ThemeContext:So,ThemeProvider:pK,__PRIVATE__:wK,createGlobalStyle:uu,css:wo,default:de,isStyledComponent:qy,keyframes:gK,useTheme:_K,version:Uq,withTheme:vK},Symbol.toStringTag,{value:"Module"})),bK="/assets/facebook-abfdc580.svg",EK="/assets/github-7a0dd11e.svg",TK="/assets/instagram-52ecb7f6.svg",xK="/assets/naverblog-0aad2663.svg",IK="/assets/youtube-ca398db9.svg";var Ca={};const CK=kV(SK);Object.defineProperty(Ca,"__esModule",{value:!0});Ca.default=Ca.Normalize=Zb=Ca.normalize=void 0;var lL=CK,Jb=(0,lL.css)(['html{line-height:1.15;-webkit-text-size-adjust:100%;}body{margin:0;}main{display:block;}h1{font-size:2em;margin:0.67em 0;}hr{box-sizing:content-box;height:0;overflow:visible;}pre{font-family:monospace,monospace;font-size:1em;}a{background-color:transparent;}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted;}b,strong{font-weight:bolder;}code,kbd,samp{font-family:monospace,monospace;font-size:1em;}small{font-size:80%;}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline;}sub{bottom:-0.25em;}sup{top:-0.5em;}img{border-style:none;}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0;}button,input{overflow:visible;}button,select{text-transform:none;}button,[type="button"],[type="reset"],[type="submit"]{-webkit-appearance:button;}button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner{border-style:none;padding:0;}button:-moz-focusring,[type="button"]:-moz-focusring,[type="reset"]:-moz-focusring,[type="submit"]:-moz-focusring{outline:1px dotted ButtonText;}fieldset{padding:0.35em 0.75em 0.625em;}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal;}progress{vertical-align:baseline;}textarea{overflow:auto;}[type="checkbox"],[type="radio"]{box-sizing:border-box;padding:0;}[type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button{height:auto;}[type="search"]{-webkit-appearance:textfield;outline-offset:-2px;}[type="search"]::-webkit-search-decoration{-webkit-appearance:none;}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit;}details{display:block;}summary{display:list-item;}template{display:none;}[hidden]{display:none;}']),Zb=Ca.normalize=Jb,kK=(0,lL.createGlobalStyle)(Jb);Ca.Normalize=kK;var AK=Jb;Ca.default=AK;var cL=globalThis&&globalThis.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},eE=wo(ZC||(ZC=cL([`
/* http://meyerweb.com/eric/tools/css/reset/
   v5.0.1 | 20191019
   License: none (public domain)
*/

html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, menu, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed,
figure, figcaption, footer, header, hgroup,
main, menu, nav, output, ruby, section, summary,
time, mark, audio, video {
  margin: 0;
  padding: 0;
  border: 0;
  font-size: 100%;
  font: inherit;
  vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure,
footer, header, hgroup, main, menu, nav, section {
  display: block;
}
/* HTML5 hidden-attribute fix for newer browsers */
*[hidden] {
    display: none;
}
body {
  line-height: 1;
}
menu, ol, ul {
  list-style: none;
}
blockquote, q {
  quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
  content: '';
  content: none;
}
table {
  border-collapse: collapse;
  border-spacing: 0;
}
`],[`
/* http://meyerweb.com/eric/tools/css/reset/
   v5.0.1 | 20191019
   License: none (public domain)
*/

html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, menu, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed,
figure, figcaption, footer, header, hgroup,
main, menu, nav, output, ruby, section, summary,
time, mark, audio, video {
  margin: 0;
  padding: 0;
  border: 0;
  font-size: 100%;
  font: inherit;
  vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure,
footer, header, hgroup, main, menu, nav, section {
  display: block;
}
/* HTML5 hidden-attribute fix for newer browsers */
*[hidden] {
    display: none;
}
body {
  line-height: 1;
}
menu, ol, ul {
  list-style: none;
}
blockquote, q {
  quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
  content: '';
  content: none;
}
table {
  border-collapse: collapse;
  border-spacing: 0;
}
`])));uu(ek||(ek=cL(["",""],["",""])),eE);var ZC,ek;const RK=uu`
  ${eE}
  ${Zb}
  html{
    scroll-behavior: smooth;
  }
  body {
  font-family: "Pretendard Variable", Pretendard, -apple-system, BlinkMacSystemFont, system-ui, Roboto, "Helvetica Neue", "Segoe UI", "Apple SD Gothic Neo", "Noto Sans KR", "Malgun Gothic", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
}

  .a11yHidden,
  legend {
    display: inline-block;
    overflow: hidden;
    position: absolute !important;
    clip: rect(0, 0, 0, 0);
    clip-path: inset(50%);
    width: 1px;
    height: 1px;
    margin: -1px;
  }

  fieldset {
    padding: 0;
  }
  button {
    cursor: pointer;
  }
`,zn="#CFA36E",wf="#71747A",Qy="#868B94",tE="#ADB5BD",Lc="#C4C4C4",nE="#D1D3D8",ti="#E9ECEF",Mc="#F8F9FA",ml="#F2F3F6",NK=()=>_.jsxs(PK,{children:[_.jsxs(DK,{children:[_.jsxs("ul",{children:[_.jsx("li",{children:""}),_.jsx("li",{children:" "}),_.jsx("li",{children:" "}),_.jsx("li",{children:""}),_.jsx("li",{children:""})]}),_.jsxs("ul",{children:[_.jsx("li",{children:" "}),_.jsx("li",{children:" "}),_.jsx("li",{children:" "}),_.jsx("li",{children:""}),_.jsx("li",{})]}),_.jsxs("ul",{children:[_.jsx("li",{children:"  "}),_.jsx("li",{children:" "}),_.jsx("li",{children:" "})]}),_.jsxs("div",{className:"download-app",children:[_.jsx("p",{children:"  "}),_.jsx("div",{className:"logobox",children:_.jsx("button",{type:"button",children:"Github"})})]})]}),_.jsxs(OK,{children:[_.jsxs("section",{className:"information",children:[_.jsxs("p",{children:[_.jsx("b",{children:"  "}),"    "]}),_.jsxs("p",{children:[_.jsx("b",{children:" "}),"   30 28, 609 ()"]}),_.jsxs("p",{children:[_.jsx("b",{children:" "})," 010-0000-0000"]}),_.jsxs("p",{children:[_.jsx("b",{children:" "})," cs@daangnservice.com"]})]}),_.jsxs("section",{className:"snsgroup",children:[_.jsx("img",{alt:"",src:bK}),_.jsx("img",{alt:"",src:TK}),_.jsx("img",{alt:"",src:IK}),_.jsx("img",{alt:"",src:xK})]})]}),_.jsxs(LK,{children:[_.jsxs("section",{className:"inquirygroup",children:[_.jsx("a",{href:"/",children:" "}),_.jsx("a",{href:"/",children:" "}),_.jsx("a",{href:"/",children:"PR "}),_.jsx("a",{href:"/",children:"IR "})]}),_.jsxs("section",{className:"terms",children:[_.jsx("a",{href:"/",children:""}),_.jsx("a",{href:"/",children:""}),_.jsx("a",{href:"/",children:" "}),_.jsx("a",{href:"/",children:"  "})]})]})]}),PK=de.footer`
  border-top: 1px solid ${ml};
  margin-top: 1rem;
  padding-top: 1rem;
  display: flex;
  flex-direction: column;
  position: relative;
`,DK=de.section` 
  display: flex;
  flex-direction: row;
  width : 64rem;
  height : 16.123rem;
  align-items: flex-start;
  position: relative;
  margin: 0 auto;
  padding-top: 3rem;
  /* justify-content: space-between; */

  ul {
    display: inline-block;
    font-size: 0.875rem;
    margin: 0 2rem;
    position: relative;
    right: 2rem;

    li {
      margin-bottom: 2rem;
    }
    
    a {
      text-decoration: none;
      color: #212325;
    }
  }
  
  .download-app {
    display: block;
    position: absolute;
    right: 10%;
    
    p {
      font-weight: 700;
      font-size: 0.875rem;
    }
        
    .logobox {
      margin-top: 1rem;
      
      button {
        width: 140px;
        height: 40px;
        background-color: ${nE};
        color: #212325;
        background-position: 24px 12px; 
        background-image: url(${EK});
        background-repeat: no-repeat;
        background-size: 16px;
        cursor: pointer;
        vertical-align: middle;
        padding-left: 16px;  
        border: 0;
        border-radius: 6px;
        font-weight: 700;
      }
    }

  }
`,OK=de.div`
  border-top: 1px solid ${ml};
  display: flex;
  flex-direction: row;
  width : 64rem;
  height : 5rem;
  align-items: flex-start;
  position: relative;
  margin: 1rem auto;
  justify-content: space-between;
  padding-top: 1rem;

  .information {
    color: #868B94;
    font-size: 0.813rem;
    line-height: 1.25rem;
    /* position: absolute; */
    /* left: 0%; */
  }

  .snsgroup {
    width : 16rem;
    margin-left: 6rem;

    img {
     margin: 0 1rem;
    }
  }
  
`,LK=de.div`
  width : 64rem;
  margin: 3rem auto;
  /* align-items:; */

  .inquirygroup {
    margin-left: 0.5rem;
    margin-bottom: 1rem;
    position: relative;
    right: 1.5rem;
  }
  .terms {
    margin-left: 0.5rem;
    position: relative;
    right: 1.5rem;

  }
  a {
    text-decoration: none;
    color: #868B94;
    margin: 1rem;
    font-size: 0.813rem;
    line-height: 1.25rem;
    font-weight: 700;
  }
  
  a:hover {
    text-decoration : underline;
  }

`,uL=My({key:"searchKeywordState",default:""}),MK="/assets/defaultProfile-deaa7bc1.svg",FK="/assets/logo(symbol_name)-900da4c3.svg",rE=My({key:"chatClick",default:!1});function $K(){const[t,e]=Lr(uL),[n,r]=Lr(rE),i=Vo();return _.jsxs(UK,{children:[_.jsx(jK,{className:"a11yHidden",children:""}),_.jsx(gh,{to:"/",children:_.jsx("img",{alt:"",src:FK})}),_.jsx(l0,{as:"a",className:"primary",onClick:()=>i("/hotArticles"),children:""}),_.jsx(l0,{as:"a",onClick:()=>i("/writeArticle"),children:" "}),_.jsx(l0,{as:"a",onClick:()=>i("/myPage"),children:""}),_.jsx(VK,{children:_.jsx("input",{placeholder:"  ",type:"text",value:t,onChange:s=>e(s.target.value)})}),_.jsx(BK,{onClick:()=>{r(!0)},children:""}),_.jsx(zK,{"aria-label":""})]})}const UK=de.header`
  flex-direction: row;
  display: flex;
  height : 64px;
  margin-left: auto;
  margin-right: auto;
  justify-content: center;
  flex-wrap: wrap;

  .a11yHidden {
    display: inline-block;
    overflow: hidden;
    position: absolute !important;
    clip: rect(0, 0, 0, 0);
    clip-path: inset(50%);
    width: 1px;
    height: 1px;
    margin: -1px;
  }

  img {
    width: 101px;
    height: 26px;
    display: inline-block;
    margin-top: 16px;
    margin-right: 35px;
  }

  .primary {
    color: ${zn};
  }
  
  .primary:hover {
    color: ${zn};
  }
`,jK=de.h1`
  margin-right: 35px;
  `,VK=de.form`
  margin-right: 12px;
  margin-top: 12px;
  & input {
    color: ${Qy};
    background-color: ${ml};
    font-size: 16px;
    width: 288px;
    height : 40px;
    border: 0;
    border-radius: 6px;
    text-indent: 6px;
  }

  & input:focus {
    outline: none;
  }
`,l0=de.button`
  background-color: transparent;
  border: 0;
  color: #4d5159;
  font-weight: 700;
  font-size: 18px;
  margin-right: 35px;
  display: block;
  line-height: 64px;
  cursor: pointer;
  &:hover {
    color: ${ti};
  }
`,BK=de.button`
  width: 98px;
  margin-top: 12px;
  margin-right: 2rem;
  margin-left: 2rem;
  height: 40px;
  color: #212124;
  font-weight: 700;
  font-size: 16px;
  background-color: #FFF;
  display: inline-block;
  /* border: 0; */
  border: 1px solid #D1D3D8;
  border-radius: 4px;
  cursor: pointer;
  
  &:hover {
    background-color: ${Mc};
  }
`,zK=de.button`
  margin-top: 12px;
  margin-right: 21px;
  width: 36px;
  height: 36px;
  background-color: transparent;
  border: 0;
  border-radius: 50%;
  background: url(${MK}) no-repeat center local;
  background-size: 36px;
  background-clip: border-box;
  cursor: pointer;
`;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le=function(t,e){if(!t)throw du(e)},du=function(t){return new Error("Firebase Database ("+dL.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},WK=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},iE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=s>>2,d=(s&3)<<4|a>>4;let h=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(h=64)),r.push(n[u],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(hL(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):WK(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new HK;const h=s<<2|a>>4;if(r.push(h),c!==64){const f=a<<4&240|c>>2;if(r.push(f),d!==64){const p=c<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class HK extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fL=function(t){const e=hL(t);return iE.encodeByteArray(e,!0)},tg=function(t){return fL(t).replace(/\./g,"")},ng=function(t){try{return iE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GK(t){return vh(void 0,t)}function vh(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!qK(n)||(t[n]=vh(t[n],e[n]));return t}function qK(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KK(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QK=()=>KK().__FIREBASE_DEFAULTS__,YK=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},XK=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ng(t[1]);return e&&JSON.parse(e)},Yy=()=>{try{return QK()||YK()||XK()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},JK=t=>{var e,n;return(n=(e=Yy())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},ZK=t=>{const e=JK(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},e9=()=>{var t;return(t=Yy())===null||t===void 0?void 0:t.config},t9=t=>{var e;return(e=Yy())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[tg(JSON.stringify(n)),tg(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bt())}function Xy(){var t;const e=(t=Yy())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function n9(){return typeof self=="object"&&self.self===self}function pL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Jy(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mL(){const t=Bt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function gL(){return dL.NODE_ADMIN===!0}function r9(){return!Xy()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _h(){try{return typeof indexedDB=="object"}catch{return!1}}function i9(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s9="FirebaseError";class Wn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=s9,Object.setPrototypeOf(this,Wn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gl.prototype.create)}}class gl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?o9(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Wn(i,a,r)}}function o9(t,e){return t.replace(a9,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const a9=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(t){return JSON.parse(t)}function sn(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=wh(ng(s[0])||""),n=wh(ng(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},l9=function(t){const e=yL(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},c9=function(t){const e=yL(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Wa(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function rg(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ig(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function a1(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(tk(s)&&tk(o)){if(!a1(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function tk(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function nc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function md(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u9{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,u;for(let d=0;d<80;d++){d<40?d<20?(c=a^s&(o^a),u=1518500249):(c=s^o^a,u=1859775393):d<60?(c=s&o|a&(s|o),u=2400959708):(c=s^o^a,u=3395469782);const h=(i<<5|i>>>27)+c+l+u+r[d]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function vL(t,e){const n=new d9(t,e);return n.subscribe.bind(n)}class d9{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");h9(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=c0),i.error===void 0&&(i.error=c0),i.complete===void 0&&(i.complete=c0);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function h9(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function c0(){}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const je=function(t,e,n,r){let i;if(r<e?i="at least "+e:r>n&&(i=n===0?"none":"no more than "+n),i){const s=t+" failed: Was called with "+r+(r===1?" argument.":" arguments.")+" Expects "+i+".";throw new Error(s)}};function br(t,e){return`${t} failed: ${e} argument `}function fn(t,e,n,r){if(!(r&&!n)&&typeof n!="function")throw new Error(br(t,e)+"must be a valid function.")}function nk(t,e,n,r){if(!(r&&!n)&&(typeof n!="object"||n===null))throw new Error(br(t,e)+"must be a valid context object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f9=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,le(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Zy=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(t){return t&&t._delegate?t._delegate:t}class sr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new hr;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(m9(e))try{this.getOrInitializeService({instanceIdentifier:ra})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ra){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ra){return this.instances.has(e)}getOptions(e=ra){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:p9(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ra){return this.component?this.component.multipleInstances?e:ra:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function p9(t){return t===ra?void 0:t}function m9(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new _L(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE=[];var ot;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ot||(ot={}));const SL={debug:ot.DEBUG,verbose:ot.VERBOSE,info:ot.INFO,warn:ot.WARN,error:ot.ERROR,silent:ot.SILENT},g9=ot.INFO,y9={[ot.DEBUG]:"log",[ot.VERBOSE]:"log",[ot.INFO]:"info",[ot.WARN]:"warn",[ot.ERROR]:"error"},v9=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=y9[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class hu{constructor(e){this.name=e,this._logLevel=g9,this._logHandler=v9,this._userLogHandler=null,aE.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ot))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?SL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ot.DEBUG,...e),this._logHandler(this,ot.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ot.VERBOSE,...e),this._logHandler(this,ot.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ot.INFO,...e),this._logHandler(this,ot.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ot.WARN,...e),this._logHandler(this,ot.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ot.ERROR,...e),this._logHandler(this,ot.ERROR,...e)}}function _9(t){aE.forEach(e=>{e.setLogLevel(t)})}function w9(t,e){for(const n of aE){let r=null;e&&e.level&&(r=SL[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(r??i.logLevel)&&t({level:ot[s].toLowerCase(),message:a,args:o,type:i.name})}}}const S9=(t,e)=>e.some(n=>t instanceof n);let rk,ik;function b9(){return rk||(rk=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function E9(){return ik||(ik=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bL=new WeakMap,l1=new WeakMap,EL=new WeakMap,u0=new WeakMap,lE=new WeakMap;function T9(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ho(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&bL.set(n,t)}).catch(()=>{}),lE.set(e,t),e}function x9(t){if(l1.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});l1.set(t,e)}let c1={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return l1.get(t);if(e==="objectStoreNames")return t.objectStoreNames||EL.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ho(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function I9(t){c1=t(c1)}function C9(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(d0(this),e,...n);return EL.set(r,e.sort?e.sort():[e]),ho(r)}:E9().includes(t)?function(...e){return t.apply(d0(this),e),ho(bL.get(this))}:function(...e){return ho(t.apply(d0(this),e))}}function k9(t){return typeof t=="function"?C9(t):(t instanceof IDBTransaction&&x9(t),S9(t,b9())?new Proxy(t,c1):t)}function ho(t){if(t instanceof IDBRequest)return T9(t);if(u0.has(t))return u0.get(t);const e=k9(t);return e!==t&&(u0.set(t,e),lE.set(e,t)),e}const d0=t=>lE.get(t);function A9(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=ho(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ho(o.result),l.oldVersion,l.newVersion,ho(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}const R9=["get","getKey","getAll","getAllKeys","count"],N9=["put","add","delete","clear"],h0=new Map;function sk(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(h0.get(e))return h0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=N9.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||R9.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return h0.set(e,s),s}I9(t=>({...t,get:(e,n,r)=>sk(e,n)||t.get(e,n,r),has:(e,n)=>!!sk(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P9{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(D9(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function D9(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const u1="@firebase/app",ok="0.9.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ha=new hu("@firebase/app"),O9="@firebase/app-compat",L9="@firebase/analytics-compat",M9="@firebase/analytics",F9="@firebase/app-check-compat",$9="@firebase/app-check",U9="@firebase/auth",j9="@firebase/auth-compat",V9="@firebase/database",B9="@firebase/database-compat",z9="@firebase/functions",W9="@firebase/functions-compat",H9="@firebase/installations",G9="@firebase/installations-compat",q9="@firebase/messaging",K9="@firebase/messaging-compat",Q9="@firebase/performance",Y9="@firebase/performance-compat",X9="@firebase/remote-config",J9="@firebase/remote-config-compat",Z9="@firebase/storage",e7="@firebase/storage-compat",t7="@firebase/firestore",n7="@firebase/firestore-compat",r7="firebase",i7="9.17.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo="[DEFAULT]",s7={[u1]:"fire-core",[O9]:"fire-core-compat",[M9]:"fire-analytics",[L9]:"fire-analytics-compat",[$9]:"fire-app-check",[F9]:"fire-app-check-compat",[U9]:"fire-auth",[j9]:"fire-auth-compat",[V9]:"fire-rtdb",[B9]:"fire-rtdb-compat",[z9]:"fire-fn",[W9]:"fire-fn-compat",[H9]:"fire-iid",[G9]:"fire-iid-compat",[q9]:"fire-fcm",[K9]:"fire-fcm-compat",[Q9]:"fire-perf",[Y9]:"fire-perf-compat",[X9]:"fire-rc",[J9]:"fire-rc-compat",[Z9]:"fire-gcs",[e7]:"fire-gcs-compat",[t7]:"fire-fst",[n7]:"fire-fst-compat","fire-js":"fire-js",[r7]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo=new Map,Sh=new Map;function sg(t,e){try{t.container.addComponent(e)}catch(n){Ha.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function TL(t,e){t.container.addOrOverwriteComponent(e)}function zi(t){const e=t.name;if(Sh.has(e))return Ha.debug(`There were multiple attempts to register component ${e}.`),!1;Sh.set(e,t);for(const n of Eo.values())sg(n,t);return!0}function cE(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function o7(t,e,n=bo){cE(t,e).clearInstance(n)}function a7(){Sh.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l7={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ds=new gl("app","Firebase",l7);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let c7=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new sr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ds.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As=i7;function uE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:bo,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ds.create("bad-app-name",{appName:String(i)});if(n||(n=e9()),!n)throw ds.create("no-options");const s=Eo.get(i);if(s){if(a1(n,s.options)&&a1(r,s.config))return s;throw ds.create("duplicate-app",{appName:i})}const o=new wL(i);for(const l of Sh.values())o.addComponent(l);const a=new c7(n,r,o);return Eo.set(i,a),a}function xL(t=bo){const e=Eo.get(t);if(!e&&t===bo)return uE();if(!e)throw ds.create("no-app",{appName:t});return e}function u7(){return Array.from(Eo.values())}async function IL(t){const e=t.name;Eo.has(e)&&(Eo.delete(e),await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function Er(t,e,n){var r;let i=(r=s7[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ha.warn(a.join(" "));return}zi(new sr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function CL(t,e){if(t!==null&&typeof t!="function")throw ds.create("invalid-log-argument");w9(t,e)}function kL(t){_9(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d7="firebase-heartbeat-database",h7=1,bh="firebase-heartbeat-store";let f0=null;function AL(){return f0||(f0=A9(d7,h7,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(bh)}}}).catch(t=>{throw ds.create("idb-open",{originalErrorMessage:t.message})})),f0}async function f7(t){try{return(await AL()).transaction(bh).objectStore(bh).get(RL(t))}catch(e){if(e instanceof Wn)Ha.warn(e.message);else{const n=ds.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ha.warn(n.message)}}}async function ak(t,e){try{const r=(await AL()).transaction(bh,"readwrite");return await r.objectStore(bh).put(e,RL(t)),r.done}catch(n){if(n instanceof Wn)Ha.warn(n.message);else{const r=ds.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ha.warn(r.message)}}}function RL(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p7=1024,m7=30*24*60*60*1e3;class g7{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new v7(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=lk();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=m7}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=lk(),{heartbeatsToSend:n,unsentEntries:r}=y7(this._heartbeatsCache.heartbeats),i=tg(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function lk(){return new Date().toISOString().substring(0,10)}function y7(t,e=p7){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),ck(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ck(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class v7{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _h()?i9().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await f7(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ak(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ak(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function ck(t){return tg(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _7(t){zi(new sr("platform-logger",e=>new P9(e),"PRIVATE")),zi(new sr("heartbeat",e=>new g7(e),"PRIVATE")),Er(u1,ok,t),Er(u1,ok,"esm2017"),Er("fire-js","")}_7("");const w7=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Wn,SDK_VERSION:As,_DEFAULT_ENTRY_NAME:bo,_addComponent:sg,_addOrOverwriteComponent:TL,_apps:Eo,_clearComponents:a7,_components:Sh,_getProvider:cE,_registerComponent:zi,_removeServiceInstance:o7,deleteApp:IL,getApp:xL,getApps:u7,initializeApp:uE,onLog:CL,registerVersion:Er,setLogLevel:kL},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S7{constructor(e,n){this._delegate=e,this.firebase=n,sg(e,new sr("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),IL(this._delegate)))}_getService(e,n=bo){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=bo){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){sg(this._delegate,e)}_addOrOverwriteComponent(e){TL(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b7={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance."},uk=new gl("app-compat","Firebase",b7);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E7(t){const e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:Er,setLogLevel:kL,onLog:CL,apps:null,SDK_VERSION:As,INTERNAL:{registerComponent:a,removeApp:r,useAsService:l,modularAPIs:w7}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(c){delete e[c]}function i(c){if(c=c||bo,!Mr(e,c))throw uk.create("no-app",{appName:c});return e[c]}i.App=t;function s(c,u={}){const d=uE(c,u);if(Mr(e,d.name))return e[d.name];const h=new t(d,n);return e[d.name]=h,h}function o(){return Object.keys(e).map(c=>e[c])}function a(c){const u=c.name,d=u.replace("-compat","");if(zi(c)&&c.type==="PUBLIC"){const h=(f=i())=>{if(typeof f[d]!="function")throw uk.create("invalid-app-argument",{appName:u});return f[d]()};c.serviceProps!==void 0&&vh(h,c.serviceProps),n[d]=h,t.prototype[d]=function(...f){return this._getService.bind(this,u).apply(this,c.multipleInstances?f:[])}}return c.type==="PUBLIC"?n[d]:null}function l(c,u){return u==="serverAuth"?null:u}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NL(){const t=E7(S7);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:NL,extendNamespace:e,createSubscribe:vL,ErrorFactory:gl,deepExtend:vh});function e(n){vh(t,n)}return t}const T7=NL();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk=new hu("@firebase/app-compat"),x7="@firebase/app-compat",I7="0.2.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C7(t){Er(x7,I7,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(n9()&&self.firebase!==void 0){dk.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&dk.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const Qn=T7;C7();var k7="firebase",A7="9.17.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qn.registerVersion(k7,A7,"app-compat");function dE(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}const qu={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Pl={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R7(){return{["admin-restricted-operation"]:"This operation is restricted to administrators only.",["argument-error"]:"",["app-not-authorized"]:"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.",["app-not-installed"]:"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.",["captcha-check-failed"]:"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.",["code-expired"]:"The SMS code has expired. Please re-send the verification code to try again.",["cordova-not-ready"]:"Cordova framework is not ready.",["cors-unsupported"]:"This browser is not supported.",["credential-already-in-use"]:"This credential is already associated with a different user account.",["custom-token-mismatch"]:"The custom token corresponds to a different audience.",["requires-recent-login"]:"This operation is sensitive and requires recent authentication. Log in again before retrying this request.",["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.",["dynamic-link-not-activated"]:"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.",["email-change-needs-verification"]:"Multi-factor users must always have a verified email.",["email-already-in-use"]:"The email address is already in use by another account.",["emulator-config-failed"]:'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',["expired-action-code"]:"The action code has expired.",["cancelled-popup-request"]:"This operation has been cancelled due to another conflicting popup being opened.",["internal-error"]:"An internal AuthError has occurred.",["invalid-app-credential"]:"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.",["invalid-app-id"]:"The mobile app identifier is not registed for the current project.",["invalid-user-token"]:"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.",["invalid-auth-event"]:"An internal AuthError has occurred.",["invalid-verification-code"]:"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.",["invalid-continue-uri"]:"The continue URL provided in the request is invalid.",["invalid-cordova-configuration"]:"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.",["invalid-custom-token"]:"The custom token format is incorrect. Please check the documentation.",["invalid-dynamic-link-domain"]:"The provided dynamic link domain is not configured or authorized for the current project.",["invalid-email"]:"The email address is badly formatted.",["invalid-emulator-scheme"]:"Emulator URL must start with a valid scheme (http:// or https://).",["invalid-api-key"]:"Your API key is invalid, please check you have copied it correctly.",["invalid-cert-hash"]:"The SHA-1 certificate hash provided is invalid.",["invalid-credential"]:"The supplied auth credential is malformed or has expired.",["invalid-message-payload"]:"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-multi-factor-session"]:"The request does not contain a valid proof of first factor successful sign-in.",["invalid-oauth-provider"]:"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.",["invalid-oauth-client-id"]:"The OAuth client ID provided is either invalid or does not match the specified API key.",["unauthorized-domain"]:"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.",["invalid-action-code"]:"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.",["wrong-password"]:"The password is invalid or the user does not have a password.",["invalid-persistence-type"]:"The specified persistence type is invalid. It can only be local, session or none.",["invalid-phone-number"]:"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].",["invalid-provider-id"]:"The specified provider ID is invalid.",["invalid-recipient-email"]:"The email corresponding to this action failed to send as the provided recipient email address is invalid.",["invalid-sender"]:"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-verification-id"]:"The verification ID used to create the phone auth credential is invalid.",["invalid-tenant-id"]:"The Auth instance's tenant ID is invalid.",["login-blocked"]:"Login blocked by user-provided method: {$originalMessage}",["missing-android-pkg-name"]:"An Android Package Name must be provided if the Android App is required to be installed.",["auth-domain-config-required"]:"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.",["missing-app-credential"]:"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.",["missing-verification-code"]:"The phone auth credential was created with an empty SMS verification code.",["missing-continue-uri"]:"A continue URL must be provided in the request.",["missing-iframe-start"]:"An internal AuthError has occurred.",["missing-ios-bundle-id"]:"An iOS Bundle ID must be provided if an App Store ID is provided.",["missing-or-invalid-nonce"]:"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.",["missing-multi-factor-info"]:"No second factor identifier is provided.",["missing-multi-factor-session"]:"The request is missing proof of first factor successful sign-in.",["missing-phone-number"]:"To send verification codes, provide a phone number for the recipient.",["missing-verification-id"]:"The phone auth credential was created with an empty verification ID.",["app-deleted"]:"This instance of FirebaseApp has been deleted.",["multi-factor-info-not-found"]:"The user does not have a second factor matching the identifier provided.",["multi-factor-auth-required"]:"Proof of ownership of a second factor is required to complete sign-in.",["account-exists-with-different-credential"]:"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.",["network-request-failed"]:"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.",["no-auth-event"]:"An internal AuthError has occurred.",["no-such-provider"]:"User was not linked to an account with the given provider.",["null-user"]:"A null user object was provided as the argument for an operation which requires a non-null user object.",["operation-not-allowed"]:"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.",["operation-not-supported-in-this-environment"]:'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',["popup-blocked"]:"Unable to establish a connection with the popup. It may have been blocked by the browser.",["popup-closed-by-user"]:"The popup has been closed by the user before finalizing the operation.",["provider-already-linked"]:"User can only be linked to one identity for the given provider.",["quota-exceeded"]:"The project's quota for this operation has been exceeded.",["redirect-cancelled-by-user"]:"The redirect operation has been cancelled by the user before finalizing.",["redirect-operation-pending"]:"A redirect sign-in operation is already pending.",["rejected-credential"]:"The request contains malformed or mismatching credentials.",["second-factor-already-in-use"]:"The second factor is already enrolled on this account.",["maximum-second-factor-count-exceeded"]:"The maximum allowed number of second factors on a user has been exceeded.",["tenant-id-mismatch"]:"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.",["user-token-expired"]:"The user's credential is no longer valid. The user must sign in again.",["too-many-requests"]:"We have blocked all requests from this device due to unusual activity. Try again later.",["unauthorized-continue-uri"]:"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.",["unsupported-first-factor"]:"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.",["unsupported-persistence-type"]:"The current environment does not support the specified persistence type.",["unsupported-tenant-operation"]:"This operation is not supported in a multi-tenant context.",["unverified-email"]:"The operation requires a verified email.",["user-cancelled"]:"The user did not grant your application the permissions it requested.",["user-not-found"]:"There is no user record corresponding to this identifier. The user may have been deleted.",["user-disabled"]:"The user account has been disabled by an administrator.",["user-mismatch"]:"The supplied credentials do not correspond to the previously signed in user.",["user-signed-out"]:"",["weak-password"]:"The password must be 6 characters long or more.",["web-storage-unsupported"]:"This browser is not supported or 3rd party cookies and data may be disabled.",["already-initialized"]:"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}}function PL(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const N7=R7,P7=PL,DL=new gl("auth","Firebase",PL());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk=new hu("@firebase/auth");function lm(t,...e){hk.logLevel<=ot.ERROR&&hk.error(`Auth (${As}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(t,...e){throw hE(t,...e)}function Nn(t,...e){return hE(t,...e)}function OL(t,e,n){const r=Object.assign(Object.assign({},P7()),{[e]:n});return new gl("auth","Firebase",r).create(e,{appName:t.name})}function fu(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&On(t,"argument-error"),OL(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function hE(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return DL.create(t,...e)}function ae(t,e,...n){if(!t)throw hE(e,...n)}function Di(t){const e="INTERNAL ASSERTION FAILED: "+t;throw lm(e),new Error(e)}function _i(t,e){t||Di(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk=new Map;function Pr(t){_i(t instanceof Function,"Expected a class definition");let e=fk.get(t);return e?(_i(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,fk.set(t,e),e)}function D7(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Pr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function fE(){return pk()==="http:"||pk()==="https:"}function pk(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O7(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(fE()||pL()||"connection"in navigator)?navigator.onLine:!0}function L7(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e,n){this.shortDelay=e,this.longDelay=n,_i(n>e,"Short delay should be less than long delay!"),this.isMobile=oE()||Jy()}get(){return O7()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(t,e){_i(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Di("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Di("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Di("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M7={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F7=new Sf(3e4,6e4);function ln(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function En(t,e,n,r,i={}){return ML(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=yl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),LL.fetch()(FL(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function ML(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},M7),e);try{const i=new $7(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw gd(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw gd(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw gd(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw gd(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw OL(t,u,c);On(t,u)}}catch(i){if(i instanceof Wn)throw i;On(t,"internal-error",{message:String(i)})}}async function Rs(t,e,n,r,i={}){const s=await En(t,e,n,r,i);return"mfaPendingCredential"in s&&On(t,"multi-factor-auth-required",{_serverResponse:s}),s}function FL(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?pE(t.config,i):`${t.config.apiScheme}://${i}`}class $7{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Nn(this.auth,"network-request-failed")),F7.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function gd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Nn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U7(t,e){return En(t,"POST","/v1/accounts:delete",e)}async function j7(t,e){return En(t,"POST","/v1/accounts:update",e)}async function V7(t,e){return En(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ld(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function B7(t,e=!1){const n=me(t),r=await n.getIdToken(e),i=ev(r);ae(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ld(p0(i.auth_time)),issuedAtTime:Ld(p0(i.iat)),expirationTime:Ld(p0(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function p0(t){return Number(t)*1e3}function ev(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return lm("JWT malformed, contained fewer than 3 sections"),null;try{const i=ng(n);return i?JSON.parse(i):(lm("Failed to decode base64 JWT payload"),null)}catch(i){return lm("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function z7(t){const e=ev(t);return ae(e,"internal-error"),ae(typeof e.exp<"u","internal-error"),ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ss(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Wn&&W7(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function W7({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H7{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ld(this.lastLoginAt),this.creationTime=Ld(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Th(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Ss(t,V7(n,{idToken:r}));ae(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?K7(s.providerUserInfo):[],a=q7(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new $L(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function G7(t){const e=me(t);await Th(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function q7(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function K7(t){return t.map(e=>{var{providerId:n}=e,r=dE(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q7(t,e){const n=await ML(t,{},async()=>{const r=yl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=FL(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",LL.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ae(e.idToken,"internal-error"),ae(typeof e.idToken<"u","internal-error"),ae(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):z7(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return ae(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await Q7(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new xh;return r&&(ae(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ae(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ae(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xh,this.toJSON())}_performRefresh(){return Di("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fs(t,e){ae(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ka{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=dE(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new H7(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new $L(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ss(this,this.stsTokenManager.getToken(this.auth,e));return ae(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return B7(this,e)}reload(){return G7(this)}_assign(e){this!==e&&(ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new ka(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Th(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Ss(this,U7(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,u;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,y=(a=n.tenantId)!==null&&a!==void 0?a:void 0,w=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,m=(c=n.createdAt)!==null&&c!==void 0?c:void 0,g=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:v,emailVerified:b,isAnonymous:I,providerData:E,stsTokenManager:D}=n;ae(v&&D,e,"internal-error");const S=xh.fromJSON(this.name,D);ae(typeof v=="string",e,"internal-error"),Fs(d,e.name),Fs(h,e.name),ae(typeof b=="boolean",e,"internal-error"),ae(typeof I=="boolean",e,"internal-error"),Fs(f,e.name),Fs(p,e.name),Fs(y,e.name),Fs(w,e.name),Fs(m,e.name),Fs(g,e.name);const T=new ka({uid:v,auth:e,email:h,emailVerified:b,displayName:d,isAnonymous:I,photoURL:p,phoneNumber:f,tenantId:y,stsTokenManager:S,createdAt:m,lastLoginAt:g});return E&&Array.isArray(E)&&(T.providerData=E.map(O=>Object.assign({},O))),w&&(T._redirectEventId=w),T}static async _fromIdTokenResponse(e,n,r=!1){const i=new xh;i.updateFromServerResponse(n);const s=new ka({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Th(s),s}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}UL.type="NONE";const Fc=UL;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aa(t,e,n){return`firebase:${t}:${e}:${n}`}class fc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Aa(this.userKey,i.apiKey,s),this.fullPersistenceKey=Aa("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ka._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new fc(Pr(Fc),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Pr(Fc);const o=Aa(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const d=ka._fromJSON(e,u);c!==s&&(a=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new fc(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new fc(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(BL(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(jL(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(zL(e))return"Blackberry";if(WL(e))return"Webos";if(mE(e))return"Safari";if((e.includes("chrome/")||VL(e))&&!e.includes("edge/"))return"Chrome";if(bf(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function jL(t=Bt()){return/firefox\//i.test(t)}function mE(t=Bt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function VL(t=Bt()){return/crios\//i.test(t)}function BL(t=Bt()){return/iemobile/i.test(t)}function bf(t=Bt()){return/android/i.test(t)}function zL(t=Bt()){return/blackberry/i.test(t)}function WL(t=Bt()){return/webos/i.test(t)}function pu(t=Bt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Y7(t=Bt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function X7(t=Bt()){var e;return pu(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function J7(){return mL()&&document.documentMode===10}function HL(t=Bt()){return pu(t)||bf(t)||WL(t)||zL(t)||/windows phone/i.test(t)||BL(t)}function Z7(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GL(t,e=[]){let n;switch(t){case"Browser":n=mk(Bt());break;case"Worker":n=`${mk(Bt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${As}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eQ{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tQ{constructor(e,n,r){this.app=e,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gk(this),this.idTokenSubscription=new gk(this),this.beforeStateQueue=new eQ(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=DL,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Pr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await fc.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Th(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=L7()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?me(e):null;return n&&ae(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Pr(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new gl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Pr(e)||this._popupRedirectResolver;ae(n,this,"argument-error"),this.redirectPersistenceManager=await fc.create(this,[Pr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return ae(o,this,"internal-error"),o.then(()=>s(this.currentUser)),typeof n=="function"?e.addObserver(n,r,i):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=GL(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());return r&&(n["X-Firebase-Client"]=r),n}}function _n(t){return me(t)}class gk{constructor(e){this.auth=e,this.observer=null,this.addObserver=vL(n=>this.observer=n)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function nQ(t,e,n){const r=_n(t);ae(r._canInitEmulator,r,"emulator-config-failed"),ae(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=qL(e),{host:o,port:a}=rQ(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||iQ()}function qL(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function rQ(t){const e=qL(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:yk(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:yk(o)}}}function yk(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function iQ(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Di("not implemented")}_getIdTokenResponse(e){return Di("not implemented")}_linkToIdToken(e,n){return Di("not implemented")}_getReauthenticationResolver(e){return Di("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KL(t,e){return En(t,"POST","/v1/accounts:resetPassword",ln(t,e))}async function QL(t,e){return En(t,"POST","/v1/accounts:update",e)}async function sQ(t,e){return En(t,"POST","/v1/accounts:update",ln(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oQ(t,e){return Rs(t,"POST","/v1/accounts:signInWithPassword",ln(t,e))}async function tv(t,e){return En(t,"POST","/v1/accounts:sendOobCode",ln(t,e))}async function aQ(t,e){return tv(t,e)}async function lQ(t,e){return tv(t,e)}async function cQ(t,e){return tv(t,e)}async function uQ(t,e){return tv(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dQ(t,e){return Rs(t,"POST","/v1/accounts:signInWithEmailLink",ln(t,e))}async function hQ(t,e){return Rs(t,"POST","/v1/accounts:signInWithEmailLink",ln(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih extends mu{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Ih(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ih(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return oQ(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return dQ(e,{email:this._email,oobCode:this._password});default:On(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return QL(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return hQ(e,{idToken:n,email:this._email,oobCode:this._password});default:On(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hs(t,e){return Rs(t,"POST","/v1/accounts:signInWithIdp",ln(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fQ="http://localhost";class Wi extends mu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Wi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):On("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=dE(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Wi(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return hs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,hs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,hs(e,n)}buildRequest(){const e={requestUri:fQ,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=yl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pQ(t,e){return En(t,"POST","/v1/accounts:sendVerificationCode",ln(t,e))}async function mQ(t,e){return Rs(t,"POST","/v1/accounts:signInWithPhoneNumber",ln(t,e))}async function gQ(t,e){const n=await Rs(t,"POST","/v1/accounts:signInWithPhoneNumber",ln(t,e));if(n.temporaryProof)throw gd(t,"account-exists-with-different-credential",n);return n}const yQ={USER_NOT_FOUND:"user-not-found"};async function vQ(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Rs(t,"POST","/v1/accounts:signInWithPhoneNumber",ln(t,n),yQ)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra extends mu{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Ra({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Ra({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return mQ(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return gQ(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return vQ(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new Ra({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _Q(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function wQ(t){const e=nc(md(t)).link,n=e?nc(md(e)).deep_link_id:null,r=nc(md(t)).deep_link_id;return(r?nc(md(r)).link:null)||r||n||e||t}class nv{constructor(e){var n,r,i,s,o,a;const l=nc(md(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,d=_Q((i=l.mode)!==null&&i!==void 0?i:null);ae(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=wQ(e);try{return new nv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(){this.providerId=Wo.PROVIDER_ID}static credential(e,n){return Ih._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=nv.parseLink(n);return ae(r,"argument-error"),Ih._fromEmailAndCode(e,r.code,r.tenantId)}}Wo.PROVIDER_ID="password";Wo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Wo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu extends Ns{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class pc extends gu{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return ae("providerId"in n&&"signInMethod"in n,"argument-error"),Wi._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return ae(e.idToken||e.accessToken,"argument-error"),Wi._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return pc.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return pc.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!n&&!s||!a)return null;try{return new pc(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends gu{constructor(){super("facebook.com")}static credential(e){return Wi._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ci.credentialFromTaggedObject(e)}static credentialFromError(e){return Ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ci.credential(e.oauthAccessToken)}catch{return null}}}Ci.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ci.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends gu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Wi._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ki.credential(n,r)}catch{return null}}}ki.GOOGLE_SIGN_IN_METHOD="google.com";ki.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends gu{constructor(){super("github.com")}static credential(e){return Wi._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ai.credential(e.oauthAccessToken)}catch{return null}}}Ai.GITHUB_SIGN_IN_METHOD="github.com";Ai.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SQ="http://localhost";class $c extends mu{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return hs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,hs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,hs(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new $c(r,s)}static _create(e,n){return new $c(e,n)}buildRequest(){return{requestUri:SQ,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bQ="saml.";class og extends Ns{constructor(e){ae(e.startsWith(bQ),"argument-error"),super(e)}static credentialFromResult(e){return og.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return og.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=$c.fromJSON(e);return ae(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return $c._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends gu{constructor(){super("twitter.com")}static credential(e,n){return Wi._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ri.credentialFromTaggedObject(e)}static credentialFromError(e){return Ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ri.credential(n,r)}catch{return null}}}Ri.TWITTER_SIGN_IN_METHOD="twitter.com";Ri.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YL(t,e){return Rs(t,"POST","/v1/accounts:signUp",ln(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await ka._fromIdTokenResponse(e,r,i),o=vk(r);return new ni({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=vk(r);return new ni({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function vk(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EQ(t){var e;const n=_n(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new ni({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await YL(n,{returnSecureToken:!0}),i=await ni._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag extends Wn{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,ag.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new ag(e,n,r,i)}}function XL(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ag._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JL(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TQ(t,e){const n=me(t);await rv(!0,n,e);const{providerUserInfo:r}=await j7(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=JL(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function gE(t,e,n=!1){const r=await Ss(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ni._forOperation(t,"link",r)}async function rv(t,e,n){await Th(e);const r=JL(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";ae(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZL(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await Ss(t,XL(r,i,e,t),n);ae(s.idToken,r,"internal-error");const o=ev(s.idToken);ae(o,r,"internal-error");const{sub:a}=o;return ae(t.uid===a,r,"user-mismatch"),ni._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&On(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eM(t,e,n=!1){const r="signIn",i=await XL(t,r,e),s=await ni._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function iv(t,e){return eM(_n(t),e)}async function tM(t,e){const n=me(t);return await rv(!1,n,e.providerId),gE(n,e)}async function nM(t,e){return ZL(me(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xQ(t,e){return Rs(t,"POST","/v1/accounts:signInWithCustomToken",ln(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IQ(t,e){const n=_n(t),r=await xQ(n,{token:e,returnSecureToken:!0}),i=await ni._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?yE._fromServerResponse(e,n):On(e,"internal-error")}}class yE extends sv{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new yE(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(t,e,n){var r;ae(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),ae(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ae(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(ae(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CQ(t,e,n){const r=me(t),i={requestType:"PASSWORD_RESET",email:e};n&&ov(r,i,n),await lQ(r,i)}async function kQ(t,e,n){await KL(me(t),{oobCode:e,newPassword:n})}async function AQ(t,e){await sQ(me(t),{oobCode:e})}async function rM(t,e){const n=me(t),r=await KL(n,{oobCode:e}),i=r.requestType;switch(ae(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ae(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ae(r.mfaInfo,n,"internal-error");default:ae(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=sv._fromServerResponse(_n(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function RQ(t,e){const{data:n}=await rM(me(t),e);return n.email}async function NQ(t,e,n){const r=_n(t),i=await YL(r,{returnSecureToken:!0,email:e,password:n}),s=await ni._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(s.user),s}function PQ(t,e,n){return iv(me(t),Wo.credential(e,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DQ(t,e,n){const r=me(t),i={requestType:"EMAIL_SIGNIN",email:e};ae(n.handleCodeInApp,r,"argument-error"),n&&ov(r,i,n),await cQ(r,i)}function OQ(t,e){const n=nv.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function LQ(t,e,n){const r=me(t),i=Wo.credentialWithLink(e,n||Eh());return ae(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),iv(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MQ(t,e){return En(t,"POST","/v1/accounts:createAuthUri",ln(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FQ(t,e){const n=fE()?Eh():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await MQ(me(t),r);return i||[]}async function $Q(t,e){const n=me(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&ov(n.auth,i,e);const{email:s}=await aQ(n.auth,i);s!==t.email&&await t.reload()}async function UQ(t,e,n){const r=me(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&ov(r.auth,s,n);const{email:o}=await uQ(r.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jQ(t,e){return En(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VQ(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=me(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Ss(r,jQ(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function BQ(t,e){return iM(me(t),e,null)}function zQ(t,e){return iM(me(t),null,e)}async function iM(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await Ss(t,QL(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WQ(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const o=(n=(e=ev(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new mc(s,a)}}if(!r)return null;switch(r){case"facebook.com":return new HQ(s,i);case"github.com":return new GQ(s,i);case"google.com":return new qQ(s,i);case"twitter.com":return new KQ(s,i,t.screenName||null);case"custom":case"anonymous":return new mc(s,null);default:return new mc(s,r,i)}}class mc{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class sM extends mc{constructor(e,n,r,i){super(e,n,r),this.username=i}}class HQ extends mc{constructor(e,n){super(e,"facebook.com",n)}}class GQ extends sM{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class qQ extends mc{constructor(e,n){super(e,"google.com",n)}}class KQ extends sM{constructor(e,n,r){super(e,"twitter.com",n,r)}}function QQ(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:WQ(n)}class ya{constructor(e,n,r){this.type=e,this.credential=n,this.auth=r}static _fromIdtoken(e,n){return new ya("enroll",e,n)}static _fromMfaPendingCredential(e){return new ya("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return ya._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return ya._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=_n(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>sv._fromServerResponse(r,a));ae(i.mfaPendingCredential,r,"internal-error");const o=ya._fromMfaPendingCredential(i.mfaPendingCredential);return new vE(o,s,async a=>{const l=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const c=Object.assign(Object.assign({},i),{idToken:l.idToken,refreshToken:l.refreshToken});switch(n.operationType){case"signIn":const u=await ni._fromIdTokenResponse(r,n.operationType,c);return await r._updateCurrentUser(u.user),u;case"reauthenticate":return ae(n.user,r,"internal-error"),ni._forOperation(n.user,n.operationType,c);default:On(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function YQ(t,e){var n;const r=me(t),i=e;return ae(e.customData.operationType,r,"argument-error"),ae((n=i.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),vE._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XQ(t,e){return En(t,"POST","/v2/accounts/mfaEnrollment:start",ln(t,e))}function JQ(t,e){return En(t,"POST","/v2/accounts/mfaEnrollment:finalize",ln(t,e))}function ZQ(t,e){return En(t,"POST","/v2/accounts/mfaEnrollment:withdraw",ln(t,e))}class _E{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>sv._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new _E(e)}async getSession(){return ya._fromIdtoken(await this.user.getIdToken(),this.user.auth)}async enroll(e,n){const r=e,i=await this.getSession(),s=await Ss(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await Ss(this.user,ZQ(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const m0=new WeakMap;function eY(t){const e=me(t);return m0.has(e)||m0.set(e,_E._fromUser(e)),m0.get(e)}const lg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(lg,"1"),this.storage.removeItem(lg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tY(){const t=Bt();return mE(t)||pu(t)}const nY=1e3,rY=10;class aM extends oM{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=tY()&&Z7(),this.fallbackToPolling=HL(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);J7()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,rY):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},nY)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}aM.type="LOCAL";const wE=aM;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM extends oM{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}lM.type="SESSION";const Ga=lM;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iY(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new av(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await iY(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}av.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sY{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Ef("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const h=d;if(h.data.eventId===c)switch(h.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(){return window}function oY(t){rn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SE(){return typeof rn().WorkerGlobalScope<"u"&&typeof rn().importScripts=="function"}async function aY(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function lY(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function cY(){return SE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cM="firebaseLocalStorageDb",uY=1,cg="firebaseLocalStorage",uM="fbase_key";class Tf{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function lv(t,e){return t.transaction([cg],e?"readwrite":"readonly").objectStore(cg)}function dY(){const t=indexedDB.deleteDatabase(cM);return new Tf(t).toPromise()}function d1(){const t=indexedDB.open(cM,uY);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(cg,{keyPath:uM})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(cg)?e(r):(r.close(),await dY(),e(await d1()))})})}async function _k(t,e,n){const r=lv(t,!0).put({[uM]:e,value:n});return new Tf(r).toPromise()}async function hY(t,e){const n=lv(t,!1).get(e),r=await new Tf(n).toPromise();return r===void 0?null:r.value}function wk(t,e){const n=lv(t,!0).delete(e);return new Tf(n).toPromise()}const fY=800,pY=3;class dM{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await d1(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>pY)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return SE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=av._getInstance(cY()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await aY(),!this.activeServiceWorker)return;this.sender=new sY(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||lY()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await d1();return await _k(e,lg,"1"),await wk(e,lg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>_k(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>hY(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>wk(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=lv(i,!1).getAll();return new Tf(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),fY)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dM.type="LOCAL";const Ch=dM;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mY(t,e){return En(t,"POST","/v2/accounts/mfaSignIn:start",ln(t,e))}function gY(t,e){return En(t,"POST","/v2/accounts/mfaSignIn:finalize",ln(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yY(t){return(await En(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vY(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function hM(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Nn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",vY().appendChild(r)})}function fM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Y=500,wY=6e4,Rp=1e12;class SY{constructor(e){this.auth=e,this.counter=Rp,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new bY(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||Rp;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||Rp;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||Rp;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class bY{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;ae(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=EY(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},wY)},_Y))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function EY(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0=fM("rcb"),TY=new Sf(3e4,6e4),xY="https://www.google.com/recaptcha/api.js?";class IY{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=rn().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return ae(CY(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(rn().grecaptcha):new Promise((r,i)=>{const s=rn().setTimeout(()=>{i(Nn(e,"network-request-failed"))},TY.get());rn()[g0]=()=>{rn().clearTimeout(s),delete rn()[g0];const a=rn().grecaptcha;if(!a){i(Nn(e,"internal-error"));return}const l=a.render;a.render=(c,u)=>{const d=l(c,u);return this.counter++,d},this.hostLanguage=n,r(a)};const o=`${xY}?${yl({onload:g0,render:"explicit",hl:n})}`;hM(o).catch(()=>{clearTimeout(s),i(Nn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=rn().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function CY(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class kY{async load(e){return new SY(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pM="recaptcha",AY={theme:"light",type:"image"};let RY=class{constructor(e,n=Object.assign({},AY),r){this.parameters=n,this.type=pM,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=_n(r),this.isInvisible=this.parameters.size==="invisible",ae(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof e=="string"?document.getElementById(e):e;ae(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new kY:new IY,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){ae(!this.parameters.sitekey,this.auth,"argument-error"),ae(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ae(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=rn()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){ae(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ae(fE()&&!SE(),this.auth,"internal-error"),await NY(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await yY(this.auth);ae(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ae(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function NY(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Ra._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function PY(t,e,n){const r=_n(t),i=await cv(r,e,me(n));return new bE(i,s=>iv(r,s))}async function DY(t,e,n){const r=me(t);await rv(!1,r,"phone");const i=await cv(r.auth,e,me(n));return new bE(i,s=>tM(r,s))}async function OY(t,e,n){const r=me(t),i=await cv(r.auth,e,me(n));return new bE(i,s=>nM(r,s))}async function cv(t,e,n){var r;const i=await n.verify();try{ae(typeof i=="string",t,"argument-error"),ae(n.type===pM,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s)return ae(o.type==="enroll",t,"internal-error"),(await XQ(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{ae(o.type==="signin",t,"internal-error");const a=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return ae(a,t,"missing-multi-factor-info"),(await mY(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await pQ(t,{phoneNumber:s.phoneNumber,recaptchaToken:i});return o}}finally{n._reset()}}async function LY(t,e){await gE(me(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qa=class cm{constructor(e){this.providerId=cm.PROVIDER_ID,this.auth=_n(e)}verifyPhoneNumber(e,n){return cv(this.auth,e,me(n))}static credential(e,n){return Ra._fromVerification(e,n)}static credentialFromResult(e){const n=e;return cm.credentialFromTaggedObject(n)}static credentialFromError(e){return cm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?Ra._fromTokenResponse(n,r):null}};qa.PROVIDER_ID="phone";qa.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl(t,e){return e?Pr(e):(ae(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE extends mu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return hs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return hs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return hs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function MY(t){return eM(t.auth,new EE(t),t.bypassAuthState)}function FY(t){const{auth:e,user:n}=t;return ae(n,e,"internal-error"),ZL(n,new EE(t),t.bypassAuthState)}async function $Y(t){const{auth:e,user:n}=t;return ae(n,e,"internal-error"),gE(n,new EE(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return MY;case"linkViaPopup":case"linkViaRedirect":return $Y;case"reauthViaPopup":case"reauthViaRedirect":return FY;default:On(this.auth,"internal-error")}}resolve(e){_i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UY=new Sf(2e3,1e4);async function jY(t,e,n){const r=_n(t);fu(t,e,Ns);const i=vl(r,n);return new ss(r,"signInViaPopup",e,i).executeNotNull()}async function VY(t,e,n){const r=me(t);fu(r.auth,e,Ns);const i=vl(r.auth,n);return new ss(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function BY(t,e,n){const r=me(t);fu(r.auth,e,Ns);const i=vl(r.auth,n);return new ss(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class ss extends mM{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ss.currentPopupAction&&ss.currentPopupAction.cancel(),ss.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ae(e,this.auth,"internal-error"),e}async onExecution(){_i(this.filter.length===1,"Popup operations only handle one event");const e=Ef();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Nn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Nn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ss.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Nn(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(e,UY.get())};e()}}ss.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zY="pendingRedirect",Md=new Map;class WY extends mM{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Md.get(this.auth._key());if(!e){try{const r=await HY(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Md.set(this.auth._key(),e)}return this.bypassAuthState||Md.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function HY(t,e){const n=yM(e),r=gM(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function TE(t,e){return gM(t)._set(yM(e),"true")}function GY(){Md.clear()}function xE(t,e){Md.set(t._key(),e)}function gM(t){return Pr(t._redirectPersistence)}function yM(t){return Aa(zY,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qY(t,e,n){return KY(t,e,n)}async function KY(t,e,n){const r=_n(t);fu(t,e,Ns),await r._initializationPromise;const i=vl(r,n);return await TE(i,r),i._openRedirect(r,e,"signInViaRedirect")}function QY(t,e,n){return YY(t,e,n)}async function YY(t,e,n){const r=me(t);fu(r.auth,e,Ns),await r.auth._initializationPromise;const i=vl(r.auth,n);await TE(i,r.auth);const s=await vM(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function XY(t,e,n){return JY(t,e,n)}async function JY(t,e,n){const r=me(t);fu(r.auth,e,Ns),await r.auth._initializationPromise;const i=vl(r.auth,n);await rv(!1,r,e.providerId),await TE(i,r.auth);const s=await vM(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function ZY(t,e){return await _n(t)._initializationPromise,uv(t,e,!1)}async function uv(t,e,n=!1){const r=_n(t),i=vl(r,e),o=await new WY(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function vM(t){const e=Ef(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eX=10*60*1e3;class _M{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tX(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!wM(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Nn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=eX&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sk(e))}saveEventToCache(e){this.cachedEventUids.add(Sk(e)),this.lastProcessedEventTime=Date.now()}}function Sk(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function wM({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function tX(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wM(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SM(t,e={}){return En(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rX=/^https?/;async function iX(t){if(t.config.emulator)return;const{authorizedDomains:e}=await SM(t);for(const n of e)try{if(sX(n))return}catch{}On(t,"unauthorized-domain")}function sX(t){const e=Eh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!rX.test(n))return!1;if(nX.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oX=new Sf(3e4,6e4);function bk(){const t=rn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function aX(t){return new Promise((e,n)=>{var r,i,s;function o(){bk(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{bk(),n(Nn(t,"network-request-failed"))},timeout:oX.get()})}if(!((i=(r=rn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=rn().gapi)===null||s===void 0)&&s.load)o();else{const a=fM("iframefcb");return rn()[a]=()=>{gapi.load?o():n(Nn(t,"network-request-failed"))},hM(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw um=null,e})}let um=null;function lX(t){return um=um||aX(t),um}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cX=new Sf(5e3,15e3),uX="__/auth/iframe",dX="emulator/auth/iframe",hX={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fX=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pX(t){const e=t.config;ae(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?pE(e,dX):`https://${t.config.authDomain}/${uX}`,r={apiKey:e.apiKey,appName:t.name,v:As},i=fX.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${yl(r).slice(1)}`}async function mX(t){const e=await lX(t),n=rn().gapi;return ae(n,t,"internal-error"),e.open({where:document.body,url:pX(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hX,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Nn(t,"network-request-failed"),a=rn().setTimeout(()=>{s(o)},cX.get());function l(){rn().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gX={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yX=500,vX=600,_X="_blank",wX="http://localhost";class Ek{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function SX(t,e,n,r=yX,i=vX){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},gX),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Bt().toLowerCase();n&&(a=VL(c)?_X:n),jL(c)&&(e=e||wX,l.scrollbars="yes");const u=Object.entries(l).reduce((h,[f,p])=>`${h}${f}=${p},`,"");if(X7(c)&&a!=="_self")return bX(e||"",a),new Ek(null);const d=window.open(e||"",a,u);ae(d,t,"popup-blocked");try{d.focus()}catch{}return new Ek(d)}function bX(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EX="__/auth/handler",TX="emulator/auth/handler";function h1(t,e,n,r,i,s){ae(t.config.authDomain,t,"auth-domain-config-required"),ae(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:As,eventId:i};if(e instanceof Ns){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",rg(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,c]of Object.entries(s||{}))o[l]=c}if(e instanceof gu){const l=e.getScopes().filter(c=>c!=="");l.length>0&&(o.scopes=l.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const l of Object.keys(a))a[l]===void 0&&delete a[l];return`${xX(t)}?${yl(a).slice(1)}`}function xX({config:t}){return t.emulator?pE(t,TX):`https://${t.authDomain}/${EX}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0="webStorageSupport";class IX{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ga,this._completeRedirectFn=uv,this._overrideRedirectResult=xE}async _openPopup(e,n,r,i){var s;_i((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=h1(e,n,r,Eh(),i);return SX(e,o,Ef())}async _openRedirect(e,n,r,i){return await this._originValidation(e),oY(h1(e,n,r,Eh(),i)),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(_i(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await mX(e),r=new _M(e);return n.register("authEvent",i=>(ae(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(y0,{type:y0},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[y0];o!==void 0&&n(!!o),On(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=iX(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return HL()||mE()||pu()}}const CX=IX;class kX{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return Di("unexpected MultiFactorSessionType")}}}class IE extends kX{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new IE(e)}_finalizeEnroll(e,n,r){return JQ(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return gY(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class bM{constructor(){}static assertion(e){return IE._fromCredential(e)}}bM.FACTOR_ID="phone";var Tk="@firebase/auth",xk="0.21.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AX{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RX(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function NX(t){zi(new sr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:s,authDomain:o}=r.options;return((a,l)=>{ae(s&&!s.includes(":"),"invalid-api-key",{appName:a.name}),ae(!(o!=null&&o.includes(":")),"argument-error",{appName:a.name});const c={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:GL(t)},u=new tQ(a,l,c);return D7(u,n),u})(r,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),zi(new sr("auth-internal",e=>{const n=_n(e.getProvider("auth").getImmediate());return(r=>new AX(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Er(Tk,xk,RX(t)),Er(Tk,xk,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PX=5*60;t9("authIdTokenMaxAge");NX("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ka(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DX=2e3;async function OX(t,e,n){var r;const{BuildInfo:i}=Ka();_i(e.sessionId,"AuthEvent did not contain a session ID");const s=await UX(e.sessionId),o={};return pu()?o.ibi=i.packageName:bf()?o.apn=i.packageName:On(t,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,h1(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,o)}async function LX(t){const{BuildInfo:e}=Ka(),n={};pu()?n.iosBundleId=e.packageName:bf()?n.androidPackageName=e.packageName:On(t,"operation-not-supported-in-this-environment"),await SM(t,n)}function MX(t){const{cordova:e}=Ka();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,Y7()?"_blank":"_system","location=yes"),n(i)})})}async function FX(t,e,n){const{cordova:r}=Ka();let i=()=>{};try{await new Promise((s,o)=>{let a=null;function l(){var d;s();const h=(d=r.plugins.browsertab)===null||d===void 0?void 0:d.close;typeof h=="function"&&h(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function c(){a||(a=window.setTimeout(()=>{o(Nn(t,"redirect-cancelled-by-user"))},DX))}function u(){(document==null?void 0:document.visibilityState)==="visible"&&c()}e.addPassiveListener(l),document.addEventListener("resume",c,!1),bf()&&document.addEventListener("visibilitychange",u,!1),i=()=>{e.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}})}finally{i()}}function $X(t){var e,n,r,i,s,o,a,l,c,u;const d=Ka();ae(typeof((e=d==null?void 0:d.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ae(typeof((n=d==null?void 0:d.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ae(typeof((s=(i=(r=d==null?void 0:d.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ae(typeof((l=(a=(o=d==null?void 0:d.cordova)===null||o===void 0?void 0:o.plugins)===null||a===void 0?void 0:a.browsertab)===null||l===void 0?void 0:l.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ae(typeof((u=(c=d==null?void 0:d.cordova)===null||c===void 0?void 0:c.InAppBrowser)===null||u===void 0?void 0:u.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function UX(t){const e=jX(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function jX(t){if(_i(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VX=20;class BX extends _M{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function zX(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:GX(),postBody:null,tenantId:t.tenantId,error:Nn(t,"no-auth-event")}}function WX(t,e){return f1()._set(p1(t),e)}async function Ik(t){const e=await f1()._get(p1(t));return e&&await f1()._remove(p1(t)),e}function HX(t,e){var n,r;const i=KX(e);if(i.includes("/__/auth/callback")){const s=dm(i),o=s.firebaseError?qX(decodeURIComponent(s.firebaseError)):null,a=(r=(n=o==null?void 0:o.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],l=a?Nn(a):null;return l?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:i,postBody:null}}return null}function GX(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<VX;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function f1(){return Pr(wE)}function p1(t){return Aa("authEvent",t.config.apiKey,t.name)}function qX(t){try{return JSON.parse(t)}catch{return null}}function KX(t){const e=dm(t),n=e.link?decodeURIComponent(e.link):void 0,r=dm(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return dm(i).link||i||r||n||t}function dm(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return nc(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QX=500;class YX{constructor(){this._redirectPersistence=Ga,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=uv,this._overrideRedirectResult=xE}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new BX(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){On(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){$X(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),GY(),await this._originValidation(e);const o=zX(e,r,i);await WX(e,o);const a=await OX(e,o,n),l=await MX(a);return FX(e,s,l)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=LX(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=Ka(),o=setTimeout(async()=>{await Ik(e),n.onEvent(Ck())},QX),a=async u=>{clearTimeout(o);const d=await Ik(e);let h=null;d&&(u!=null&&u.url)&&(h=HX(d,u.url)),n.onEvent(h||Ck())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,a);const l=i,c=`${s.packageName.toLowerCase()}://`;Ka().handleOpenURL=async u=>{if(u.toLowerCase().startsWith(c)&&a({url:u}),typeof l=="function")try{l(u)}catch(d){console.error(d)}}}}const XX=YX;function Ck(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Nn("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JX(t,e){_n(t)._logFramework(e)}var ZX="@firebase/auth-compat",eJ="0.3.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tJ=1e3;function Fd(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function nJ(){return Fd()==="http:"||Fd()==="https:"}function EM(t=Bt()){return!!((Fd()==="file:"||Fd()==="ionic:"||Fd()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function rJ(){return Jy()||Xy()}function iJ(){return mL()&&(document==null?void 0:document.documentMode)===11}function sJ(t=Bt()){return/Edge\/\d+/.test(t)}function oJ(t=Bt()){return iJ()||sJ(t)}function TM(){try{const t=self.localStorage,e=Ef();if(t)return t.setItem(e,"1"),t.removeItem(e),oJ()?_h():!0}catch{return CE()&&_h()}return!1}function CE(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function v0(){return(nJ()||pL()||EM())&&!rJ()&&TM()&&!CE()}function xM(){return EM()&&typeof document<"u"}async function aJ(){return xM()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},tJ);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function lJ(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar={LOCAL:"local",NONE:"none",SESSION:"session"},Ku=ae,IM="persistence";function cJ(t,e){if(Ku(Object.values(Ar).includes(e),t,"invalid-persistence-type"),Jy()){Ku(e!==Ar.SESSION,t,"unsupported-persistence-type");return}if(Xy()){Ku(e===Ar.NONE,t,"unsupported-persistence-type");return}if(CE()){Ku(e===Ar.NONE||e===Ar.LOCAL&&_h(),t,"unsupported-persistence-type");return}Ku(e===Ar.NONE||TM(),t,"unsupported-persistence-type")}async function m1(t){await t._initializationPromise;const e=CM(),n=Aa(IM,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function uJ(t,e){const n=CM();if(!n)return[];const r=Aa(IM,t,e);switch(n.getItem(r)){case Ar.NONE:return[Fc];case Ar.LOCAL:return[Ch,Ga];case Ar.SESSION:return[Ga];default:return[]}}function CM(){var t;try{return((t=lJ())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dJ=ae;class Ys{constructor(){this.browserResolver=Pr(CX),this.cordovaResolver=Pr(XX),this.underlyingResolver=null,this._redirectPersistence=Ga,this._completeRedirectFn=uv,this._overrideRedirectResult=xE}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return xM()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return dJ(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await aJ();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kM(t){return t.unwrap()}function hJ(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fJ(t){return AM(t)}function pJ(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new mJ(t,YQ(t,e))}else if(r){const i=AM(e),s=e;i&&(s.credential=i,s.tenantId=r.tenantId||void 0,s.email=r.email||void 0,s.phoneNumber=r.phoneNumber||void 0)}}function AM(t){const{_tokenResponse:e}=t instanceof Wn?t.customData:t;if(!e)return null;if(!(t instanceof Wn)&&"temporaryProof"in e&&"phoneNumber"in e)return qa.credentialFromResult(t);const n=e.providerId;if(!n||n===qu.PASSWORD)return null;let r;switch(n){case qu.GOOGLE:r=ki;break;case qu.FACEBOOK:r=Ci;break;case qu.GITHUB:r=Ai;break;case qu.TWITTER:r=Ri;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:l}=e;return!s&&!o&&!i&&!a?null:a?n.startsWith("saml.")?$c._create(n,a):Wi._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:i,accessToken:s}):new pc(n).credential({idToken:i,accessToken:s,rawNonce:l})}return t instanceof Wn?r.credentialFromError(t):r.credentialFromResult(t)}function lr(t,e){return e.catch(n=>{throw n instanceof Wn&&pJ(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:fJ(n),additionalUserInfo:QQ(n),user:os.getOrCreate(i)}})}async function g1(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>lr(t,n.confirm(r))}}class mJ{constructor(e,n){this.resolver=n,this.auth=hJ(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return lr(kM(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e){this._delegate=e,this.multiFactor=eY(e)}static getOrCreate(e){return os.USER_MAP.has(e)||os.USER_MAP.set(e,new os(e)),os.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return lr(this.auth,tM(this._delegate,e))}async linkWithPhoneNumber(e,n){return g1(this.auth,DY(this._delegate,e,n))}async linkWithPopup(e){return lr(this.auth,BY(this._delegate,e,Ys))}async linkWithRedirect(e){return await m1(_n(this.auth)),XY(this._delegate,e,Ys)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return lr(this.auth,nM(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return g1(this.auth,OY(this._delegate,e,n))}reauthenticateWithPopup(e){return lr(this.auth,VY(this._delegate,e,Ys))}async reauthenticateWithRedirect(e){return await m1(_n(this.auth)),QY(this._delegate,e,Ys)}sendEmailVerification(e){return $Q(this._delegate,e)}async unlink(e){return await TQ(this._delegate,e),this}updateEmail(e){return BQ(this._delegate,e)}updatePassword(e){return zQ(this._delegate,e)}updatePhoneNumber(e){return LY(this._delegate,e)}updateProfile(e){return VQ(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return UQ(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}os.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qu=ae;class y1{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;Qu(r,"invalid-api-key",{appName:e.name}),Qu(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?Ys:void 0;this._delegate=n.initialize({options:{persistence:gJ(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(N7),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?os.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){nQ(this._delegate,e,n)}applyActionCode(e){return AQ(this._delegate,e)}checkActionCode(e){return rM(this._delegate,e)}confirmPasswordReset(e,n){return kQ(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return lr(this._delegate,NQ(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return FQ(this._delegate,e)}isSignInWithEmailLink(e){return OQ(this._delegate,e)}async getRedirectResult(){Qu(v0(),this._delegate,"operation-not-supported-in-this-environment");const e=await ZY(this._delegate,Ys);return e?lr(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){JX(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:s,complete:o}=kk(e,n,r);return this._delegate.onAuthStateChanged(i,s,o)}onIdTokenChanged(e,n,r){const{next:i,error:s,complete:o}=kk(e,n,r);return this._delegate.onIdTokenChanged(i,s,o)}sendSignInLinkToEmail(e,n){return DQ(this._delegate,e,n)}sendPasswordResetEmail(e,n){return CQ(this._delegate,e,n||void 0)}async setPersistence(e){cJ(this._delegate,e);let n;switch(e){case Ar.SESSION:n=Ga;break;case Ar.LOCAL:n=await Pr(Ch)._isAvailable()?Ch:wE;break;case Ar.NONE:n=Fc;break;default:return On("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return lr(this._delegate,EQ(this._delegate))}signInWithCredential(e){return lr(this._delegate,iv(this._delegate,e))}signInWithCustomToken(e){return lr(this._delegate,IQ(this._delegate,e))}signInWithEmailAndPassword(e,n){return lr(this._delegate,PQ(this._delegate,e,n))}signInWithEmailLink(e,n){return lr(this._delegate,LQ(this._delegate,e,n))}signInWithPhoneNumber(e,n){return g1(this._delegate,PY(this._delegate,e,n))}async signInWithPopup(e){return Qu(v0(),this._delegate,"operation-not-supported-in-this-environment"),lr(this._delegate,jY(this._delegate,e,Ys))}async signInWithRedirect(e){return Qu(v0(),this._delegate,"operation-not-supported-in-this-environment"),await m1(this._delegate),qY(this._delegate,e,Ys)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return RQ(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}y1.Persistence=Ar;function kk(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:o=>i(o&&os.getOrCreate(o)),error:e,complete:n}}function gJ(t,e){const n=uJ(t,e);if(typeof self<"u"&&!n.includes(Ch)&&n.push(Ch),typeof window<"u")for(const r of[wE,Ga])n.includes(r)||n.push(r);return n.includes(Fc)||n.push(Fc),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(){this.providerId="phone",this._delegate=new qa(kM(Qn.auth()))}static credential(e,n){return qa.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}kE.PHONE_SIGN_IN_METHOD=qa.PHONE_SIGN_IN_METHOD;kE.PROVIDER_ID=qa.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yJ=ae;class vJ{constructor(e,n,r=Qn.app()){var i;yJ((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new RY(e,n,r.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _J="auth-compat";function wJ(t){t.INTERNAL.registerComponent(new sr(_J,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new y1(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Pl.EMAIL_SIGNIN,PASSWORD_RESET:Pl.PASSWORD_RESET,RECOVER_EMAIL:Pl.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Pl.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Pl.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Pl.VERIFY_EMAIL}},EmailAuthProvider:Wo,FacebookAuthProvider:Ci,GithubAuthProvider:Ai,GoogleAuthProvider:ki,OAuthProvider:pc,SAMLAuthProvider:og,PhoneAuthProvider:kE,PhoneMultiFactorGenerator:bM,RecaptchaVerifier:vJ,TwitterAuthProvider:Ri,Auth:y1,AuthCredential:mu,Error:Wn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(ZX,eJ)}wJ(Qn);var SJ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ke,AE=AE||{},Ve=SJ||self;function ug(){}function dv(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function xf(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function bJ(t){return Object.prototype.hasOwnProperty.call(t,_0)&&t[_0]||(t[_0]=++EJ)}var _0="closure_uid_"+(1e9*Math.random()>>>0),EJ=0;function TJ(t,e,n){return t.call.apply(t.bind,arguments)}function xJ(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Hn(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Hn=TJ:Hn=xJ,Hn.apply(null,arguments)}function Np(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Mn(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Wb=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Ho(){this.s=this.s,this.o=this.o}var IJ=0;Ho.prototype.s=!1;Ho.prototype.na=function(){!this.s&&(this.s=!0,this.M(),IJ!=0)&&bJ(this)};Ho.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const RM=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function RE(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Ak(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(dv(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Gn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Gn.prototype.h=function(){this.defaultPrevented=!0};var CJ=function(){if(!Ve.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Ve.addEventListener("test",ug,e),Ve.removeEventListener("test",ug,e)}catch{}return t}();function dg(t){return/^[\s\xa0]*$/.test(t)}var Rk=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function w0(t,e){return t<e?-1:t>e?1:0}function hv(){var t=Ve.navigator;return t&&(t=t.userAgent)?t:""}function Ni(t){return hv().indexOf(t)!=-1}function NE(t){return NE[" "](t),t}NE[" "]=ug;function kJ(t){var e=NJ;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var AJ=Ni("Opera"),Uc=Ni("Trident")||Ni("MSIE"),NM=Ni("Edge"),v1=NM||Uc,PM=Ni("Gecko")&&!(hv().toLowerCase().indexOf("webkit")!=-1&&!Ni("Edge"))&&!(Ni("Trident")||Ni("MSIE"))&&!Ni("Edge"),RJ=hv().toLowerCase().indexOf("webkit")!=-1&&!Ni("Edge");function DM(){var t=Ve.document;return t?t.documentMode:void 0}var hg;e:{var S0="",b0=function(){var t=hv();if(PM)return/rv:([^\);]+)(\)|;)/.exec(t);if(NM)return/Edge\/([\d\.]+)/.exec(t);if(Uc)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(RJ)return/WebKit\/(\S+)/.exec(t);if(AJ)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(b0&&(S0=b0?b0[1]:""),Uc){var E0=DM();if(E0!=null&&E0>parseFloat(S0)){hg=String(E0);break e}}hg=S0}var NJ={};function PJ(){return kJ(function(){let t=0;const e=Rk(String(hg)).split("."),n=Rk("9").split("."),r=Math.max(e.length,n.length);for(let o=0;t==0&&o<r;o++){var i=e[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],i[0].length==0&&s[0].length==0)break;t=w0(i[1].length==0?0:parseInt(i[1],10),s[1].length==0?0:parseInt(s[1],10))||w0(i[2].length==0,s[2].length==0)||w0(i[2],s[2]),i=i[3],s=s[3]}while(t==0)}return 0<=t})}var _1;if(Ve.document&&Uc){var Nk=DM();_1=Nk||parseInt(hg,10)||void 0}else _1=void 0;var DJ=_1;function kh(t,e){if(Gn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(PM){e:{try{NE(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:OJ[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&kh.X.h.call(this)}}Mn(kh,Gn);var OJ={2:"touch",3:"pen",4:"mouse"};kh.prototype.h=function(){kh.X.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var If="closure_listenable_"+(1e6*Math.random()|0),LJ=0;function MJ(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ha=i,this.key=++LJ,this.ba=this.ea=!1}function fv(t){t.ba=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function PE(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function OM(t){const e={};for(const n in t)e[n]=t[n];return e}const Pk="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function LM(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<Pk.length;s++)n=Pk[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function pv(t){this.src=t,this.g={},this.h=0}pv.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=S1(t,e,r,i);return-1<o?(e=t[o],n||(e.ea=!1)):(e=new MJ(e,this.src,s,!!r,i),e.ea=n,t.push(e)),e};function w1(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=RM(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(fv(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function S1(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.ba&&s.listener==e&&s.capture==!!n&&s.ha==r)return i}return-1}var DE="closure_lm_"+(1e6*Math.random()|0),T0={};function MM(t,e,n,r,i){if(r&&r.once)return $M(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)MM(t,e[s],n,r,i);return null}return n=ME(n),t&&t[If]?t.N(e,n,xf(r)?!!r.capture:!!r,i):FM(t,e,n,!1,r,i)}function FM(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=xf(i)?!!i.capture:!!i,a=LE(t);if(a||(t[DE]=a=new pv(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=FJ(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)CJ||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(jM(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function FJ(){function t(n){return e.call(t.src,t.listener,n)}const e=$J;return t}function $M(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)$M(t,e[s],n,r,i);return null}return n=ME(n),t&&t[If]?t.O(e,n,xf(r)?!!r.capture:!!r,i):FM(t,e,n,!0,r,i)}function UM(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)UM(t,e[s],n,r,i);else r=xf(r)?!!r.capture:!!r,n=ME(n),t&&t[If]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=S1(s,n,r,i),-1<n&&(fv(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=LE(t))&&(e=t.g[e.toString()],t=-1,e&&(t=S1(e,n,r,i)),(n=-1<t?e[t]:null)&&OE(n))}function OE(t){if(typeof t!="number"&&t&&!t.ba){var e=t.src;if(e&&e[If])w1(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(jM(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=LE(e))?(w1(n,t),n.h==0&&(n.src=null,e[DE]=null)):fv(t)}}}function jM(t){return t in T0?T0[t]:T0[t]="on"+t}function $J(t,e){if(t.ba)t=!0;else{e=new kh(e,this);var n=t.listener,r=t.ha||t.src;t.ea&&OE(t),t=n.call(r,e)}return t}function LE(t){return t=t[DE],t instanceof pv?t:null}var x0="__closure_events_fn_"+(1e9*Math.random()>>>0);function ME(t){return typeof t=="function"?t:(t[x0]||(t[x0]=function(e){return t.handleEvent(e)}),t[x0])}function wn(){Ho.call(this),this.i=new pv(this),this.P=this,this.I=null}Mn(wn,Ho);wn.prototype[If]=!0;wn.prototype.removeEventListener=function(t,e,n,r){UM(this,t,e,n,r)};function Pn(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,typeof e=="string")e=new Gn(e,t);else if(e instanceof Gn)e.target=e.target||t;else{var i=e;e=new Gn(r,t),LM(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Pp(o,r,!0,e)&&i}if(o=e.g=t,i=Pp(o,r,!0,e)&&i,i=Pp(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=Pp(o,r,!1,e)&&i}wn.prototype.M=function(){if(wn.X.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)fv(n[r]);delete t.g[e],t.h--}}this.I=null};wn.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};wn.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Pp(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ba&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.ea&&w1(t.i,o),i=a.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var FE=Ve.JSON.stringify;function UJ(){var t=zM;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class jJ{constructor(){this.h=this.g=null}add(e,n){const r=VM.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var VM=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new VJ,t=>t.reset());class VJ{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function BJ(t){Ve.setTimeout(()=>{throw t},0)}function BM(t,e){b1||zJ(),E1||(b1(),E1=!0),zM.add(t,e)}var b1;function zJ(){var t=Ve.Promise.resolve(void 0);b1=function(){t.then(WJ)}}var E1=!1,zM=new jJ;function WJ(){for(var t;t=UJ();){try{t.h.call(t.g)}catch(n){BJ(n)}var e=VM;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}E1=!1}function mv(t,e){wn.call(this),this.h=t||1,this.g=e||Ve,this.j=Hn(this.lb,this),this.l=Date.now()}Mn(mv,wn);ke=mv.prototype;ke.ca=!1;ke.R=null;ke.lb=function(){if(this.ca){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-t):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Pn(this,"tick"),this.ca&&($E(this),this.start()))}};ke.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function $E(t){t.ca=!1,t.R&&(t.g.clearTimeout(t.R),t.R=null)}ke.M=function(){mv.X.M.call(this),$E(this),delete this.g};function UE(t,e,n){if(typeof t=="function")n&&(t=Hn(t,n));else if(t&&typeof t.handleEvent=="function")t=Hn(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Ve.setTimeout(t,e||0)}function WM(t){t.g=UE(()=>{t.g=null,t.i&&(t.i=!1,WM(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class HJ extends Ho{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:WM(this)}M(){super.M(),this.g&&(Ve.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ah(t){Ho.call(this),this.h=t,this.g={}}Mn(Ah,Ho);var Dk=[];function HM(t,e,n,r){Array.isArray(n)||(n&&(Dk[0]=n.toString()),n=Dk);for(var i=0;i<n.length;i++){var s=MM(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function GM(t){PE(t.g,function(e,n){this.g.hasOwnProperty(n)&&OE(e)},t),t.g={}}Ah.prototype.M=function(){Ah.X.M.call(this),GM(this)};Ah.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function gv(){this.g=!0}gv.prototype.Aa=function(){this.g=!1};function GJ(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");o=2<=d.length&&d[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function qJ(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function rc(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+QJ(t,n)+(r?" "+r:"")})}function KJ(t,e){t.info(function(){return"TIMEOUT: "+e})}gv.prototype.info=function(){};function QJ(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return FE(n)}catch{return e}}var _l={},Ok=null;function yv(){return Ok=Ok||new wn}_l.Pa="serverreachability";function qM(t){Gn.call(this,_l.Pa,t)}Mn(qM,Gn);function Rh(t){const e=yv();Pn(e,new qM(e))}_l.STAT_EVENT="statevent";function KM(t,e){Gn.call(this,_l.STAT_EVENT,t),this.stat=e}Mn(KM,Gn);function tr(t){const e=yv();Pn(e,new KM(e,t))}_l.Qa="timingevent";function QM(t,e){Gn.call(this,_l.Qa,t),this.size=e}Mn(QM,Gn);function Cf(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Ve.setTimeout(function(){t()},e)}var vv={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},YM={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function jE(){}jE.prototype.h=null;function Lk(t){return t.h||(t.h=t.i())}function XM(){}var kf={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function VE(){Gn.call(this,"d")}Mn(VE,Gn);function BE(){Gn.call(this,"c")}Mn(BE,Gn);var T1;function _v(){}Mn(_v,jE);_v.prototype.g=function(){return new XMLHttpRequest};_v.prototype.i=function(){return{}};T1=new _v;function Af(t,e,n,r){this.l=t,this.j=e,this.m=n,this.U=r||1,this.S=new Ah(this),this.O=YJ,t=v1?125:void 0,this.T=new mv(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new JM}function JM(){this.i=null,this.g="",this.h=!1}var YJ=45e3,x1={},fg={};ke=Af.prototype;ke.setTimeout=function(t){this.O=t};function I1(t,e,n){t.K=1,t.v=Sv(bs(e)),t.s=n,t.P=!0,ZM(t,null)}function ZM(t,e){t.F=Date.now(),Rf(t),t.A=bs(t.v);var n=t.A,r=t.U;Array.isArray(r)||(r=[String(r)]),a2(n.i,"t",r),t.C=0,n=t.l.H,t.h=new JM,t.g=k2(t.l,n?e:null,!t.s),0<t.N&&(t.L=new HJ(Hn(t.La,t,t.g),t.N)),HM(t.S,t.g,"readystatechange",t.ib),e=t.H?OM(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.da(t.A,t.u,t.s,e)):(t.u="GET",t.g.da(t.A,t.u,null,e)),Rh(),GJ(t.j,t.u,t.A,t.m,t.U,t.s)}ke.ib=function(t){t=t.target;const e=this.L;e&&as(t)==3?e.l():this.La(t)};ke.La=function(t){try{if(t==this.g)e:{const u=as(this.g);var e=this.g.Ea();const d=this.g.aa();if(!(3>u)&&(u!=3||v1||this.g&&(this.h.h||this.g.fa()||Uk(this.g)))){this.I||u!=4||e==7||(e==8||0>=d?Rh(3):Rh(2)),wv(this);var n=this.g.aa();this.Y=n;t:if(e2(this)){var r=Uk(this.g);t="";var i=r.length,s=as(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){va(this),$d(this);var o="";break t}this.h.i=new Ve.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=n==200,qJ(this.j,this.u,this.A,this.m,this.U,u,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!dg(a)){var c=a;break t}}c=null}if(n=c)rc(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,C1(this,n);else{this.i=!1,this.o=3,tr(12),va(this),$d(this);break e}}this.P?(t2(this,u,o),v1&&this.i&&u==3&&(HM(this.S,this.T,"tick",this.hb),this.T.start())):(rc(this.j,this.m,o,null),C1(this,o)),u==4&&va(this),this.i&&!this.I&&(u==4?T2(this.l,this):(this.i=!1,Rf(this)))}else n==400&&0<o.indexOf("Unknown SID")?(this.o=3,tr(12)):(this.o=0,tr(13)),va(this),$d(this)}}}catch{}finally{}};function e2(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Da:!1}function t2(t,e,n){let r=!0,i;for(;!t.I&&t.C<n.length;)if(i=XJ(t,n),i==fg){e==4&&(t.o=4,tr(14),r=!1),rc(t.j,t.m,null,"[Incomplete Response]");break}else if(i==x1){t.o=4,tr(15),rc(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else rc(t.j,t.m,i,null),C1(t,i);e2(t)&&i!=fg&&i!=x1&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,tr(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.$&&(t.$=!0,e=t.l,e.g==t&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),QE(e),e.K=!0,tr(11))):(rc(t.j,t.m,n,"[Invalid Chunked Response]"),va(t),$d(t))}ke.hb=function(){if(this.g){var t=as(this.g),e=this.g.fa();this.C<e.length&&(wv(this),t2(this,t,e),this.i&&t!=4&&Rf(this))}};function XJ(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?fg:(n=Number(e.substring(n,r)),isNaN(n)?x1:(r+=1,r+n>e.length?fg:(e=e.substr(r,n),t.C=r+n,e)))}ke.cancel=function(){this.I=!0,va(this)};function Rf(t){t.V=Date.now()+t.O,n2(t,t.O)}function n2(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Cf(Hn(t.gb,t),e)}function wv(t){t.B&&(Ve.clearTimeout(t.B),t.B=null)}ke.gb=function(){this.B=null;const t=Date.now();0<=t-this.V?(KJ(this.j,this.A),this.K!=2&&(Rh(),tr(17)),va(this),this.o=2,$d(this)):n2(this,this.V-t)};function $d(t){t.l.G==0||t.I||T2(t.l,t)}function va(t){wv(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,$E(t.T),GM(t.S),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function C1(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||k1(n.h,t))){if(!t.J&&k1(n.h,t)&&n.G==3){try{var r=n.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)gg(n),Tv(n);else break e;KE(n),tr(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&n.A==0&&!n.v&&(n.v=Cf(Hn(n.cb,n),6e3));if(1>=u2(n.h)&&n.ja){try{n.ja()}catch{}n.ja=void 0}}else _a(n,11)}else if((t.J||n.g==t)&&gg(n),!dg(e))for(i=n.Fa.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.T=c[0],c=c[1],n.G==2)if(c[0]=="c"){n.I=c[1],n.ka=c[2];const u=c[3];u!=null&&(n.ma=u,n.j.info("VER="+n.ma));const d=c[4];d!=null&&(n.Ca=d,n.j.info("SVER="+n.Ca));const h=c[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.h;s.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(zE(s,s.h),s.h=null))}if(r.D){const y=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;y&&(r.za=y,Dt(r.F,r.D,y))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-t.F,n.j.info("Handshake RTT: "+n.P+"ms")),r=n;var o=t;if(r.sa=C2(r,r.H?r.ka:null,r.V),o.J){d2(r.h,o);var a=o,l=r.J;l&&a.setTimeout(l),a.B&&(wv(a),Rf(a)),r.g=o}else b2(r);0<n.i.length&&xv(n)}else c[0]!="stop"&&c[0]!="close"||_a(n,7);else n.G==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?_a(n,7):qE(n):c[0]!="noop"&&n.l&&n.l.wa(c),n.A=0)}}Rh(4)}catch{}}function JJ(t){if(t.W&&typeof t.W=="function")return t.W();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(dv(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function ZJ(t){if(t.oa&&typeof t.oa=="function")return t.oa();if(!t.W||typeof t.W!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(dv(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function r2(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(dv(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=ZJ(t),r=JJ(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var i2=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function eZ(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Na(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Na){this.h=e!==void 0?e:t.h,pg(this,t.j),this.s=t.s,this.g=t.g,mg(this,t.m),this.l=t.l,e=t.i;var n=new Nh;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Mk(this,n),this.o=t.o}else t&&(n=String(t).match(i2))?(this.h=!!e,pg(this,n[1]||"",!0),this.s=yd(n[2]||""),this.g=yd(n[3]||"",!0),mg(this,n[4]),this.l=yd(n[5]||"",!0),Mk(this,n[6]||"",!0),this.o=yd(n[7]||"")):(this.h=!!e,this.i=new Nh(null,this.h))}Na.prototype.toString=function(){var t=[],e=this.j;e&&t.push(vd(e,Fk,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(vd(e,Fk,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(vd(n,n.charAt(0)=="/"?rZ:nZ,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",vd(n,sZ)),t.join("")};function bs(t){return new Na(t)}function pg(t,e,n){t.j=n?yd(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function mg(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Mk(t,e,n){e instanceof Nh?(t.i=e,oZ(t.i,t.h)):(n||(e=vd(e,iZ)),t.i=new Nh(e,t.h))}function Dt(t,e,n){t.i.set(e,n)}function Sv(t){return Dt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function yd(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function vd(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,tZ),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function tZ(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Fk=/[#\/\?@]/g,nZ=/[#\?:]/g,rZ=/[#\?]/g,iZ=/[#\?@]/g,sZ=/#/g;function Nh(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Go(t){t.g||(t.g=new Map,t.h=0,t.i&&eZ(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}ke=Nh.prototype;ke.add=function(t,e){Go(this),this.i=null,t=yu(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function s2(t,e){Go(t),e=yu(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function o2(t,e){return Go(t),e=yu(t,e),t.g.has(e)}ke.forEach=function(t,e){Go(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};ke.oa=function(){Go(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};ke.W=function(t){Go(this);let e=[];if(typeof t=="string")o2(this,t)&&(e=e.concat(this.g.get(yu(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};ke.set=function(t,e){return Go(this),this.i=null,t=yu(this,t),o2(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};ke.get=function(t,e){return t?(t=this.W(t),0<t.length?String(t[0]):e):e};function a2(t,e,n){s2(t,e),0<n.length&&(t.i=null,t.g.set(yu(t,e),RE(n)),t.h+=n.length)}ke.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.W(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function yu(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function oZ(t,e){e&&!t.j&&(Go(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(s2(this,r),a2(this,i,n))},t)),t.j=e}var aZ=class{constructor(e,n){this.h=e,this.g=n}};function l2(t){this.l=t||lZ,Ve.PerformanceNavigationTiming?(t=Ve.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Ve.g&&Ve.g.Ga&&Ve.g.Ga()&&Ve.g.Ga().$b),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var lZ=10;function c2(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function u2(t){return t.h?1:t.g?t.g.size:0}function k1(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function zE(t,e){t.g?t.g.add(e):t.h=e}function d2(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}l2.prototype.cancel=function(){if(this.i=h2(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function h2(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return RE(t.i)}function WE(){}WE.prototype.stringify=function(t){return Ve.JSON.stringify(t,void 0)};WE.prototype.parse=function(t){return Ve.JSON.parse(t,void 0)};function cZ(){this.g=new WE}function uZ(t,e,n){const r=n||"";try{r2(t,function(i,s){let o=i;xf(i)&&(o=FE(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function dZ(t,e){const n=new gv;if(Ve.Image){const r=new Image;r.onload=Np(Dp,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Np(Dp,n,r,"TestLoadImage: error",!1,e),r.onabort=Np(Dp,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Np(Dp,n,r,"TestLoadImage: timeout",!1,e),Ve.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Dp(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Nf(t){this.l=t.ac||null,this.j=t.jb||!1}Mn(Nf,jE);Nf.prototype.g=function(){return new bv(this.l,this.j)};Nf.prototype.i=function(t){return function(){return t}}({});function bv(t,e){wn.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=HE,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Mn(bv,wn);var HE=0;ke=bv.prototype;ke.open=function(t,e){if(this.readyState!=HE)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Ph(this)};ke.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Ve).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))};ke.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Pf(this)),this.readyState=HE};ke.Wa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Ph(this)),this.g&&(this.readyState=3,Ph(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Ve.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;f2(this)}else t.text().then(this.Va.bind(this),this.ga.bind(this))};function f2(t){t.j.read().then(t.Ta.bind(t)).catch(t.ga.bind(t))}ke.Ta=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Pf(this):Ph(this),this.readyState==3&&f2(this)}};ke.Va=function(t){this.g&&(this.response=this.responseText=t,Pf(this))};ke.Ua=function(t){this.g&&(this.response=t,Pf(this))};ke.ga=function(){this.g&&Pf(this)};function Pf(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Ph(t)}ke.setRequestHeader=function(t,e){this.v.append(t,e)};ke.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};ke.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Ph(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(bv.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var hZ=Ve.JSON.parse;function Gt(t){wn.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=p2,this.K=this.L=!1}Mn(Gt,wn);var p2="",fZ=/^https?$/i,pZ=["POST","PUT"];ke=Gt.prototype;ke.Ka=function(t){this.L=t};ke.da=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():T1.g(),this.C=this.u?Lk(this.u):Lk(T1),this.g.onreadystatechange=Hn(this.Ha,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(s){$k(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=Ve.FormData&&t instanceof Ve.FormData,!(0<=RM(pZ,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{y2(this),0<this.B&&((this.K=mZ(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Hn(this.qa,this)):this.A=UE(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){$k(this,s)}};function mZ(t){return Uc&&PJ()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}ke.qa=function(){typeof AE<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Pn(this,"timeout"),this.abort(8))};function $k(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,m2(t),Ev(t)}function m2(t){t.D||(t.D=!0,Pn(t,"complete"),Pn(t,"error"))}ke.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Pn(this,"complete"),Pn(this,"abort"),Ev(this))};ke.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ev(this,!0)),Gt.X.M.call(this)};ke.Ha=function(){this.s||(this.F||this.v||this.l?g2(this):this.fb())};ke.fb=function(){g2(this)};function g2(t){if(t.h&&typeof AE<"u"&&(!t.C[1]||as(t)!=4||t.aa()!=2)){if(t.v&&as(t)==4)UE(t.Ha,0,t);else if(Pn(t,"readystatechange"),as(t)==4){t.h=!1;try{const a=t.aa();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=a===0){var i=String(t.H).match(i2)[1]||null;if(!i&&Ve.self&&Ve.self.location){var s=Ve.self.location.protocol;i=s.substr(0,s.length-1)}r=!fZ.test(i?i.toLowerCase():"")}n=r}if(n)Pn(t,"complete"),Pn(t,"success");else{t.m=6;try{var o=2<as(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.aa()+"]",m2(t)}}finally{Ev(t)}}}}function Ev(t,e){if(t.g){y2(t);const n=t.g,r=t.C[0]?ug:null;t.g=null,t.C=null,e||Pn(t,"ready");try{n.onreadystatechange=r}catch{}}}function y2(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Ve.clearTimeout(t.A),t.A=null)}function as(t){return t.g?t.g.readyState:0}ke.aa=function(){try{return 2<as(this)?this.g.status:-1}catch{return-1}};ke.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}};ke.Sa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),hZ(e)}};function Uk(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case p2:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}ke.Ea=function(){return this.m};ke.Oa=function(){return typeof this.j=="string"?this.j:String(this.j)};function v2(t){let e="";return PE(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function GE(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=v2(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Dt(t,e,n))}function Yu(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function _2(t){this.Ca=0,this.i=[],this.j=new gv,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Yu("failFast",!1,t),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Yu("baseRetryDelayMs",5e3,t),this.bb=Yu("retryDelaySeedMs",1e4,t),this.$a=Yu("forwardChannelMaxRetries",2,t),this.ta=Yu("forwardChannelRequestTimeoutMs",2e4,t),this.ra=t&&t.xmlHttpFactory||void 0,this.Da=t&&t.Zb||!1,this.J=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.I="",this.h=new l2(t&&t.concurrentRequestLimit),this.Fa=new cZ,this.O=t&&t.fastHandshake||!1,this.N=t&&t.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=t&&t.Xb||!1,t&&t.Aa&&this.j.Aa(),t&&t.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&t&&t.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}ke=_2.prototype;ke.ma=8;ke.G=1;function qE(t){if(w2(t),t.G==3){var e=t.U++,n=bs(t.F);Dt(n,"SID",t.I),Dt(n,"RID",e),Dt(n,"TYPE","terminate"),Df(t,n),e=new Af(t,t.j,e,void 0),e.K=2,e.v=Sv(bs(n)),n=!1,Ve.navigator&&Ve.navigator.sendBeacon&&(n=Ve.navigator.sendBeacon(e.v.toString(),"")),!n&&Ve.Image&&(new Image().src=e.v,n=!0),n||(e.g=k2(e.l,null),e.g.da(e.v)),e.F=Date.now(),Rf(e)}I2(t)}function Tv(t){t.g&&(QE(t),t.g.cancel(),t.g=null)}function w2(t){Tv(t),t.u&&(Ve.clearTimeout(t.u),t.u=null),gg(t),t.h.cancel(),t.m&&(typeof t.m=="number"&&Ve.clearTimeout(t.m),t.m=null)}function xv(t){c2(t.h)||t.m||(t.m=!0,BM(t.Ja,t),t.C=0)}function gZ(t,e){return u2(t.h)>=t.h.j-(t.m?1:0)?!1:t.m?(t.i=e.D.concat(t.i),!0):t.G==1||t.G==2||t.C>=(t.Za?0:t.$a)?!1:(t.m=Cf(Hn(t.Ja,t,e),x2(t,t.C)),t.C++,!0)}ke.Ja=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const i=new Af(this,this.j,t,void 0);let s=this.s;if(this.S&&(s?(s=OM(s),LM(s,this.S)):s=this.S),this.o!==null||this.N||(i.H=s,s=null),this.O)e:{for(var e=0,n=0;n<this.i.length;n++){t:{var r=this.i[n];if("__data__"in r.g&&(r=r.g.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=S2(this,i,e),n=bs(this.F),Dt(n,"RID",t),Dt(n,"CVER",22),this.D&&Dt(n,"X-HTTP-Session-Id",this.D),Df(this,n),s&&(this.N?e="headers="+encodeURIComponent(String(v2(s)))+"&"+e:this.o&&GE(n,this.o,s)),zE(this.h,i),this.Ya&&Dt(n,"TYPE","init"),this.O?(Dt(n,"$req",e),Dt(n,"SID","null"),i.Z=!0,I1(i,n,null)):I1(i,n,e),this.G=2}}else this.G==3&&(t?jk(this,t):this.i.length==0||c2(this.h)||jk(this))};function jk(t,e){var n;e?n=e.m:n=t.U++;const r=bs(t.F);Dt(r,"SID",t.I),Dt(r,"RID",n),Dt(r,"AID",t.T),Df(t,r),t.o&&t.s&&GE(r,t.o,t.s),n=new Af(t,t.j,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.i=e.D.concat(t.i)),e=S2(t,n,1e3),n.setTimeout(Math.round(.5*t.ta)+Math.round(.5*t.ta*Math.random())),zE(t.h,n),I1(n,r,e)}function Df(t,e){t.ia&&PE(t.ia,function(n,r){Dt(e,r,n)}),t.l&&r2({},function(n,r){Dt(e,r,n)})}function S2(t,e,n){n=Math.min(t.i.length,n);var r=t.l?Hn(t.l.Ra,t.l,t):null;e:{var i=t.i;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let c=i[l].h;const u=i[l].g;if(c-=s,0>c)s=Math.max(0,i[l].h-100),a=!1;else try{uZ(u,o,"req"+c+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break e}}}return t=t.i.splice(0,n),e.D=t,r}function b2(t){t.g||t.u||(t.Z=1,BM(t.Ia,t),t.A=0)}function KE(t){return t.g||t.u||3<=t.A?!1:(t.Z++,t.u=Cf(Hn(t.Ia,t),x2(t,t.A)),t.A++,!0)}ke.Ia=function(){if(this.u=null,E2(this),this.$&&!(this.K||this.g==null||0>=this.P)){var t=2*this.P;this.j.info("BP detection timer enabled: "+t),this.B=Cf(Hn(this.eb,this),t)}};ke.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,tr(10),Tv(this),E2(this))};function QE(t){t.B!=null&&(Ve.clearTimeout(t.B),t.B=null)}function E2(t){t.g=new Af(t,t.j,"rpc",t.Z),t.o===null&&(t.g.H=t.s),t.g.N=0;var e=bs(t.sa);Dt(e,"RID","rpc"),Dt(e,"SID",t.I),Dt(e,"CI",t.L?"0":"1"),Dt(e,"AID",t.T),Dt(e,"TYPE","xmlhttp"),Df(t,e),t.o&&t.s&&GE(e,t.o,t.s),t.J&&t.g.setTimeout(t.J);var n=t.g;t=t.ka,n.K=1,n.v=Sv(bs(e)),n.s=null,n.P=!0,ZM(n,t)}ke.cb=function(){this.v!=null&&(this.v=null,Tv(this),KE(this),tr(19))};function gg(t){t.v!=null&&(Ve.clearTimeout(t.v),t.v=null)}function T2(t,e){var n=null;if(t.g==e){gg(t),QE(t),t.g=null;var r=2}else if(k1(t.h,e))n=e.D,d2(t.h,e),r=1;else return;if(t.G!=0){if(t.pa=e.Y,e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;r=yv(),Pn(r,new QM(r,n)),xv(t)}else b2(t);else if(i=e.o,i==3||i==0&&0<t.pa||!(r==1&&gZ(t,e)||r==2&&KE(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),i){case 1:_a(t,5);break;case 4:_a(t,10);break;case 3:_a(t,6);break;default:_a(t,2)}}}function x2(t,e){let n=t.Xa+Math.floor(Math.random()*t.bb);return t.l||(n*=2),n*e}function _a(t,e){if(t.j.info("Error code "+e),e==2){var n=null;t.l&&(n=null);var r=Hn(t.kb,t);n||(n=new Na("//www.google.com/images/cleardot.gif"),Ve.location&&Ve.location.protocol=="http"||pg(n,"https"),Sv(n)),dZ(n.toString(),r)}else tr(2);t.G=0,t.l&&t.l.va(e),I2(t),w2(t)}ke.kb=function(t){t?(this.j.info("Successfully pinged google.com"),tr(2)):(this.j.info("Failed to ping google.com"),tr(1))};function I2(t){if(t.G=0,t.la=[],t.l){const e=h2(t.h);(e.length!=0||t.i.length!=0)&&(Ak(t.la,e),Ak(t.la,t.i),t.h.i.length=0,RE(t.i),t.i.length=0),t.l.ua()}}function C2(t,e,n){var r=n instanceof Na?bs(n):new Na(n,void 0);if(r.g!="")e&&(r.g=e+"."+r.g),mg(r,r.m);else{var i=Ve.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Na(null,void 0);r&&pg(s,r),e&&(s.g=e),i&&mg(s,i),n&&(s.l=n),r=s}return n=t.D,e=t.za,n&&e&&Dt(r,n,e),Dt(r,"VER",t.ma),Df(t,r),r}function k2(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Da&&!t.ra?new Gt(new Nf({jb:!0})):new Gt(t.ra),e.Ka(t.H),e}function A2(){}ke=A2.prototype;ke.xa=function(){};ke.wa=function(){};ke.va=function(){};ke.ua=function(){};ke.Ra=function(){};function yg(){if(Uc&&!(10<=Number(DJ)))throw Error("Environmental error: no available transport.")}yg.prototype.g=function(t,e){return new Fr(t,e)};function Fr(t,e){wn.call(this),this.g=new _2(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.S=t,(t=e&&e.Yb)&&!dg(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!dg(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new vu(this)}Mn(Fr,wn);Fr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;tr(0),t.V=e,t.ia=n||{},t.L=t.Y,t.F=C2(t,null,t.V),xv(t)};Fr.prototype.close=function(){qE(this.g)};Fr.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=FE(t),t=n);e.i.push(new aZ(e.ab++,t)),e.G==3&&xv(e)};Fr.prototype.M=function(){this.g.l=null,delete this.j,qE(this.g),delete this.g,Fr.X.M.call(this)};function R2(t){VE.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Mn(R2,VE);function N2(){BE.call(this),this.status=1}Mn(N2,BE);function vu(t){this.g=t}Mn(vu,A2);vu.prototype.xa=function(){Pn(this.g,"a")};vu.prototype.wa=function(t){Pn(this.g,new R2(t))};vu.prototype.va=function(t){Pn(this.g,new N2)};vu.prototype.ua=function(){Pn(this.g,"b")};yg.prototype.createWebChannel=yg.prototype.g;Fr.prototype.send=Fr.prototype.u;Fr.prototype.open=Fr.prototype.m;Fr.prototype.close=Fr.prototype.close;vv.NO_ERROR=0;vv.TIMEOUT=8;vv.HTTP_ERROR=6;YM.COMPLETE="complete";XM.EventType=kf;kf.OPEN="a";kf.CLOSE="b";kf.ERROR="c";kf.MESSAGE="d";wn.prototype.listen=wn.prototype.N;Gt.prototype.listenOnce=Gt.prototype.O;Gt.prototype.getLastError=Gt.prototype.Oa;Gt.prototype.getLastErrorCode=Gt.prototype.Ea;Gt.prototype.getStatus=Gt.prototype.aa;Gt.prototype.getResponseJson=Gt.prototype.Sa;Gt.prototype.getResponseText=Gt.prototype.fa;Gt.prototype.send=Gt.prototype.da;Gt.prototype.setWithCredentials=Gt.prototype.Ka;var yZ=function(){return new yg},vZ=function(){return yv()},I0=vv,_Z=YM,wZ=_l,Vk={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},SZ=Nf,Op=XM,bZ=Gt;const Bk="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pn.UNAUTHENTICATED=new pn(null),pn.GOOGLE_CREDENTIALS=new pn("google-credentials-uid"),pn.FIRST_PARTY=new pn("first-party-uid"),pn.MOCK_USER=new pn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _u="9.17.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To=new hu("@firebase/firestore");function A1(){return To.logLevel}function EZ(t){To.setLogLevel(t)}function ie(t,...e){if(To.logLevel<=ot.DEBUG){const n=e.map(YE);To.debug(`Firestore (${_u}): ${t}`,...n)}}function Yt(t,...e){if(To.logLevel<=ot.ERROR){const n=e.map(YE);To.error(`Firestore (${_u}): ${t}`,...n)}}function jc(t,...e){if(To.logLevel<=ot.WARN){const n=e.map(YE);To.warn(`Firestore (${_u}): ${t}`,...n)}}function YE(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(t="Unexpected state"){const e=`FIRESTORE (${_u}) INTERNAL ASSERTION FAILED: `+t;throw Yt(e),new Error(e)}function Ae(t,e){t||be()}function TZ(t,e){t||be()}function ge(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends Wn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class xZ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(pn.UNAUTHENTICATED))}shutdown(){}}class IZ{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class CZ{constructor(e){this.t=e,this.currentUser=pn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new vn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new vn,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new vn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ae(typeof r.accessToken=="string"),new P2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string"),new pn(e)}}class kZ{constructor(e,n,r,i){this.h=e,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=pn.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Ae(!(typeof this.h!="object"||this.h===null||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class AZ{constructor(e,n,r,i){this.h=e,this.l=n,this.m=r,this.g=i}getToken(){return Promise.resolve(new kZ(this.h,this.l,this.m,this.g))}start(e,n){e.enqueueRetryable(()=>n(pn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class RZ{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class NZ{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,n){const r=s=>{s.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.A;return this.A=s.token,ie("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?i(s):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ae(typeof n.token=="string"),this.A=n.token,new RZ(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PZ(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=PZ(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Be(t,e){return t<e?-1:t>e?1:0}function Vc(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function O2(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ne(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ne(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ne(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ft.fromMillis(Date.now())}static fromDate(e){return Ft.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ft(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new Ft(0,0))}static max(){return new Ne(new Ft(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n,r){n===void 0?n=0:n>e.length&&be(),r===void 0?r=e.length-n:r>e.length-n&&be(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Dh.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Dh?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class at extends Dh{construct(e,n,r){return new at(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ne(Q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new at(n)}static emptyPath(){return new at([])}}const DZ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xt extends Dh{construct(e,n,r){return new Xt(e,n,r)}static isValidIdentifier(e){return DZ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Xt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ne(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ne(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ne(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ne(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xt(n)}static emptyPath(){return new Xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.path=e}static fromPath(e){return new fe(at.fromString(e))}static fromName(e){return new fe(at.fromString(e).popFirst(5))}static empty(){return new fe(at.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&at.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return at.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fe(new at(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function R1(t){return t.fields.find(e=>e.kind===2)}function ia(t){return t.fields.filter(e=>e.kind!==2)}L2.UNKNOWN_ID=-1;class OZ{constructor(e,n){this.fieldPath=e,this.kind=n}}class vg{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new vg(0,$r.min())}}function M2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ne.fromTimestamp(r===1e9?new Ft(n+1,0):new Ft(n,r));return new $r(i,fe.empty(),e)}function F2(t){return new $r(t.readTime,t.key,-1)}class $r{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new $r(Ne.min(),fe.empty(),-1)}static max(){return new $r(Ne.max(),fe.empty(),-1)}}function XE(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=fe.comparator(t.documentKey,e.documentKey),n!==0?n:Be(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class U2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qo(t){if(t.code!==Q.FAILED_PRECONDITION||t.message!==$2)throw t;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&be(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,r)=>{n(e)})}static reject(e){return new q((n,r)=>{r(e)})}static waitFor(e){return new q((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=q.resolve(!1);for(const r of e)n=n.next(i=>i?q.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new q((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new q((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.v=new vn,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{n.error?this.v.reject(new Ud(e,n.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=JE(r.target.error);this.v.reject(new Ud(e,i))}}static open(e,n,r,i){try{return new Iv(n,e.transaction(i,r))}catch(s){throw new Ud(n,s)}}get P(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(ie("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new MZ(n)}}class fi{constructor(e,n,r){this.name=e,this.version=n,this.S=r,fi.D(Bt())===12.2&&Yt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ie("SimpleDb","Removing database:",e),aa(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!_h())return!1;if(fi.N())return!0;const e=Bt(),n=fi.D(e),r=0<n&&n<10,i=fi.k(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static N(){var e;return typeof process<"u"&&((e=process.env)===null||e===void 0?void 0:e.O)==="YES"}static M(e,n){return e.store(n)}static D(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async F(e){return this.db||(ie("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new Ud(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new ne(Q.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new ne(Q.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Ud(e,o))},i.onupgradeneeded=s=>{ie("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.S.$(o,i.transaction,s.oldVersion,this.version).next(()=>{ie("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.F(e);const a=Iv.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(c=>(a.V(),c)).catch(c=>(a.abort(c),q.reject(c))).toPromise();return l.catch(()=>{}),await a.P,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(ie("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class LZ{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return aa(this.q.delete())}}class Ud extends ne{constructor(e,n){super(Q.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Ko(t){return t.name==="IndexedDbTransactionError"}class MZ{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(ie("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(ie("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),aa(r)}add(e){return ie("SimpleDb","ADD",this.store.name,e,e),aa(this.store.add(e))}get(e){return aa(this.store.get(e)).next(n=>(n===void 0&&(n=null),ie("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return ie("SimpleDb","DELETE",this.store.name,e),aa(this.store.delete(e))}count(){return ie("SimpleDb","COUNT",this.store.name),aa(this.store.count())}W(e,n){const r=this.options(e,n);if(r.index||typeof this.store.getAll!="function"){const i=this.cursor(r),s=[];return this.H(i,(o,a)=>{s.push(a)}).next(()=>s)}{const i=this.store.getAll(r.range);return new q((s,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{s(a.target.result)}})}}J(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new q((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}Y(e,n){ie("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.Z=!1;const i=this.cursor(r);return this.H(i,(s,o,a)=>a.delete())}X(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}tt(e){const n=this.cursor({});return new q((r,i)=>{n.onerror=s=>{const o=JE(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new q((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new LZ(a),c=n(a.primaryKey,a.value,l);if(c instanceof q){const u=c.catch(d=>(l.done(),q.reject(d)));r.push(u)}l.isDone?i():l.G===null?a.continue():a.continue(l.G)}}).next(()=>q.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.Z?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function aa(t){return new q((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=JE(r.target.error);n(i)}})}let zk=!1;function JE(t){const e=fi.D(Bt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return zk||(zk=!0,setTimeout(()=>{throw r},0)),r}}return t}class FZ{constructor(e,n){this.asyncQueue=e,this.et=n,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}nt(e){ie("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{ie("IndexBackiller",`Documents written: ${await this.et.st()}`)}catch(n){Ko(n)?ie("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):await qo(n)}await this.nt(6e4)})}}class $Z{constructor(e,n){this.localStore=e,this.persistence=n}async st(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.it(n,e))}it(e,n){const r=new Set;let i=n,s=!0;return q.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return ie("IndexBackiller",`Processing collection: ${o}`),this.rt(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}rt(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ot(i,s)).next(a=>(ie("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ot(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=F2(s);XE(o,r)>0&&(r=o)}),new $r(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>n.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}pr.at=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UZ{constructor(e,n,r,i,s,o,a,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=l}}class xo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new xo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof xo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wk(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function wl(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function j2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Of(t){return t==null}function Oh(t){return t===0&&1/t==-1/0}function V2(t){return typeof t=="number"&&Number.isInteger(t)&&!Oh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jZ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VZ(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw i instanceof DOMException?new jZ("Invalid base64 string: "+i):i}}(e);return new an(n)}static fromUint8Array(e){const n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new an(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}an.EMPTY_BYTE_STRING=new an("");const BZ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Io(t){if(Ae(!!t),typeof t=="string"){let e=0;const n=BZ.exec(t);if(Ae(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ht(t.seconds),nanos:Ht(t.nanos)}}function Ht(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Qa(t){return typeof t=="string"?an.fromBase64String(t):an.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function B2(t){const e=t.mapValue.fields.__previous_value__;return ZE(e)?B2(e):e}function Lh(t){const e=Io(t.mapValue.fields.__local_write_time__.timestampValue);return new Ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},hm={nullValue:"NULL_VALUE"};function Ya(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ZE(t)?4:z2(t)?9007199254740991:10:be()}function Hi(t,e){if(t===e)return!0;const n=Ya(t);if(n!==Ya(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Lh(t).isEqual(Lh(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Io(r.timestampValue),o=Io(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return Qa(r.bytesValue).isEqual(Qa(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return Ht(r.geoPointValue.latitude)===Ht(i.geoPointValue.latitude)&&Ht(r.geoPointValue.longitude)===Ht(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Ht(r.integerValue)===Ht(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=Ht(r.doubleValue),o=Ht(i.doubleValue);return s===o?Oh(s)===Oh(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return Vc(t.arrayValue.values||[],e.arrayValue.values||[],Hi);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(Wk(s)!==Wk(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(o[a]===void 0||!Hi(s[a],o[a])))return!1;return!0}(t,e);default:return be()}}function Mh(t,e){return(t.values||[]).find(n=>Hi(n,e))!==void 0}function Co(t,e){if(t===e)return 0;const n=Ya(t),r=Ya(e);if(n!==r)return Be(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Be(t.booleanValue,e.booleanValue);case 2:return function(i,s){const o=Ht(i.integerValue||i.doubleValue),a=Ht(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return Hk(t.timestampValue,e.timestampValue);case 4:return Hk(Lh(t),Lh(e));case 5:return Be(t.stringValue,e.stringValue);case 6:return function(i,s){const o=Qa(i),a=Qa(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),a=s.split("/");for(let l=0;l<o.length&&l<a.length;l++){const c=Be(o[l],a[l]);if(c!==0)return c}return Be(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const o=Be(Ht(i.latitude),Ht(s.latitude));return o!==0?o:Be(Ht(i.longitude),Ht(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],a=s.values||[];for(let l=0;l<o.length&&l<a.length;++l){const c=Co(o[l],a[l]);if(c)return c}return Be(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Xs.mapValue&&s===Xs.mapValue)return 0;if(i===Xs.mapValue)return 1;if(s===Xs.mapValue)return-1;const o=i.fields||{},a=Object.keys(o),l=s.fields||{},c=Object.keys(l);a.sort(),c.sort();for(let u=0;u<a.length&&u<c.length;++u){const d=Be(a[u],c[u]);if(d!==0)return d;const h=Co(o[a[u]],l[c[u]]);if(h!==0)return h}return Be(a.length,c.length)}(t.mapValue,e.mapValue);default:throw be()}}function Hk(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Be(t,e);const n=Io(t),r=Io(e),i=Be(n.seconds,r.seconds);return i!==0?i:Be(n.nanos,r.nanos)}function Bc(t){return N1(t)}function N1(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=Io(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Qa(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,fe.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=N1(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${N1(r.fields[a])}`;return s+"}"}(t.mapValue):be();var e,n}function Xa(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function P1(t){return!!t&&"integerValue"in t}function Fh(t){return!!t&&"arrayValue"in t}function Gk(t){return!!t&&"nullValue"in t}function qk(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function fm(t){return!!t&&"mapValue"in t}function jd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return wl(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=jd(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=jd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function z2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function zZ(t){return"nullValue"in t?hm:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Xa(xo.empty(),fe.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:be()}function WZ(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Xa(xo.empty(),fe.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Xs:be()}function Kk(t,e){const n=Co(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function Qk(t,e){const n=Co(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e,n){this.position=e,this.inclusive=n}}function Yk(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=fe.comparator(fe.fromName(o.referenceValue),n.key):r=Co(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Xk(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Hi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{}class tt extends W2{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new HZ(e,n,r):n==="array-contains"?new KZ(e,r):n==="in"?new Y2(e,r):n==="not-in"?new QZ(e,r):n==="array-contains-any"?new YZ(e,r):new tt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new GZ(e,r):new qZ(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Co(n,this.value)):n!==null&&Ya(this.value)===Ya(n)&&this.matchesComparison(Co(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class mt extends W2{constructor(e,n){super(),this.filters=e,this.op=n,this.ft=null}static create(e,n){return new mt(e,n)}matches(e){return zc(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ft!==null||(this.ft=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ft}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.dt(n=>n.isInequality());return e!==null?e.field:null}dt(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function zc(t){return t.op==="and"}function D1(t){return t.op==="or"}function eT(t){return H2(t)&&zc(t)}function H2(t){for(const e of t.filters)if(e instanceof mt)return!1;return!0}function O1(t){if(t instanceof tt)return t.field.canonicalString()+t.op.toString()+Bc(t.value);if(eT(t))return t.filters.map(e=>O1(e)).join(",");{const e=t.filters.map(n=>O1(n)).join(",");return`${t.op}(${e})`}}function G2(t,e){return t instanceof tt?function(n,r){return r instanceof tt&&n.op===r.op&&n.field.isEqual(r.field)&&Hi(n.value,r.value)}(t,e):t instanceof mt?function(n,r){return r instanceof mt&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((i,s,o)=>i&&G2(s,r.filters[o]),!0):!1}(t,e):void be()}function q2(t,e){const n=t.filters.concat(e);return mt.create(n,t.op)}function K2(t){return t instanceof tt?function(e){return`${e.field.canonicalString()} ${e.op} ${Bc(e.value)}`}(t):t instanceof mt?function(e){return e.op.toString()+" {"+e.getFilters().map(K2).join(" ,")+"}"}(t):"Filter"}class HZ extends tt{constructor(e,n,r){super(e,n,r),this.key=fe.fromName(r.referenceValue)}matches(e){const n=fe.comparator(e.key,this.key);return this.matchesComparison(n)}}class GZ extends tt{constructor(e,n){super(e,"in",n),this.keys=Q2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class qZ extends tt{constructor(e,n){super(e,"not-in",n),this.keys=Q2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Q2(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>fe.fromName(r.referenceValue))}class KZ extends tt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Fh(n)&&Mh(n.arrayValue,this.value)}}class Y2 extends tt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Mh(this.value.arrayValue,n)}}class QZ extends tt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Mh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Mh(this.value.arrayValue,n)}}class YZ extends tt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Fh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Mh(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,n="asc"){this.field=e,this.dir=n}}function XZ(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e,n){this.comparator=e,this.root=n||kn.EMPTY}insert(e,n){return new qt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,kn.BLACK,null,null))}remove(e){return new qt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lp(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lp(this.root,e,this.comparator,!0)}}class Lp{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??kn.RED,this.left=i??kn.EMPTY,this.right=s??kn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new kn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return kn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return kn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw be();const e=this.left.check();if(e!==this.right.check())throw be();return e+(this.isRed()?0:1)}}kn.EMPTY=null,kn.RED=!0,kn.BLACK=!1;kn.EMPTY=new class{constructor(){this.size=0}get key(){throw be()}get value(){throw be()}get color(){throw be()}get left(){throw be()}get right(){throw be()}copy(t,e,n,r,i){return this}insert(t,e,n){return new kn(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.comparator=e,this.data=new qt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Jk(this.data.getIterator())}getIteratorFrom(e){return new Jk(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof _t)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new _t(this.comparator);return n.data=e,n}}class Jk{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Dl(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this.fields=e,e.sort(Xt.comparator)}static empty(){return new mr([])}unionWith(e){let n=new _t(Xt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new mr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Vc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.value=e}static empty(){return new An({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!fm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=jd(n)}setAll(e){let n=Xt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=jd(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());fm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Hi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];fm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){wl(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new An(jd(this.value))}}function X2(t){const e=[];return wl(t.fields,(n,r)=>{const i=new Xt([n]);if(fm(r)){const s=X2(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new mr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new It(e,0,Ne.min(),Ne.min(),Ne.min(),An.empty(),0)}static newFoundDocument(e,n,r,i){return new It(e,1,n,Ne.min(),r,i,0)}static newNoDocument(e,n){return new It(e,2,n,Ne.min(),Ne.min(),An.empty(),0)}static newUnknownDocument(e,n){return new It(e,3,n,Ne.min(),Ne.min(),An.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=An.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=An.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof It&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new It(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JZ{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this._t=null}}function L1(t,e=null,n=[],r=[],i=null,s=null,o=null){return new JZ(t,e,n,r,i,s,o)}function Ja(t){const e=ge(t);if(e._t===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>O1(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Of(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Bc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Bc(r)).join(",")),e._t=n}return e._t}function Lf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!XZ(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!G2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Xk(t.startAt,e.startAt)&&Xk(t.endAt,e.endAt)}function _g(t){return fe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function wg(t,e){return t.filters.filter(n=>n instanceof tt&&n.field.isEqual(e))}function Zk(t,e,n){let r=hm,i=!0;for(const s of wg(t,e)){let o=hm,a=!0;switch(s.op){case"<":case"<=":o=zZ(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=hm}Kk({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];Kk({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function eA(t,e,n){let r=Xs,i=!0;for(const s of wg(t,e)){let o=Xs,a=!0;switch(s.op){case">=":case">":o=WZ(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Xs}Qk({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];Qk({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.wt=null,this.gt=null,this.startAt,this.endAt}}function J2(t,e,n,r,i,s,o,a){return new Ps(t,e,n,r,i,s,o,a)}function wu(t){return new Ps(t)}function tA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function tT(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Cv(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function nT(t){return t.collectionGroup!==null}function Pa(t){const e=ge(t);if(e.wt===null){e.wt=[];const n=Cv(e),r=tT(e);if(n!==null&&r===null)n.isKeyField()||e.wt.push(new gc(n)),e.wt.push(new gc(Xt.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new gc(Xt.keyField(),s))}}}return e.wt}function Tr(t){const e=ge(t);if(!e.gt)if(e.limitType==="F")e.gt=L1(e.path,e.collectionGroup,Pa(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of Pa(e)){const o=s.dir==="desc"?"asc":"desc";n.push(new gc(s.field,o))}const r=e.endAt?new ko(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new ko(e.startAt.position,e.startAt.inclusive):null;e.gt=L1(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e.gt}function M1(t,e){e.getFirstInequalityField(),Cv(t);const n=t.filters.concat([e]);return new Ps(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Sg(t,e,n){return new Ps(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Mf(t,e){return Lf(Tr(t),Tr(e))&&t.limitType===e.limitType}function Z2(t){return`${Ja(Tr(t))}|lt:${t.limitType}`}function F1(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>K2(r)).join(", ")}]`),Of(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(r)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Bc(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Bc(r)).join(",")),`Target(${n})`}(Tr(t))}; limitType=${t.limitType})`}function Ff(t,e){return e.isFoundDocument()&&function(n,r){const i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):fe.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(const i of Pa(n))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(i,s,o){const a=Yk(i,s,o);return i.inclusive?a<=0:a<0}(n.startAt,Pa(n),r)||n.endAt&&!function(i,s,o){const a=Yk(i,s,o);return i.inclusive?a>=0:a>0}(n.endAt,Pa(n),r))}(t,e)}function eF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function tF(t){return(e,n)=>{let r=!1;for(const i of Pa(t)){const s=ZZ(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function ZZ(t,e,n){const r=t.field.isKeyField()?fe.comparator(e.key,n.key):function(i,s,o){const a=s.data.field(i),l=o.data.field(i);return a!==null&&l!==null?Co(a,l):be()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return be()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nF(t,e){if(t.yt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Oh(e)?"-0":e}}function rF(t){return{integerValue:""+t}}function iF(t,e){return V2(e)?rF(e):nF(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(){this._=void 0}}function eee(t,e,n){return t instanceof Wc?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,e):t instanceof Za?oF(t,e):t instanceof el?aF(t,e):function(r,i){const s=sF(r,i),o=nA(s)+nA(r.It);return P1(s)&&P1(r.It)?rF(o):nF(r.Tt,o)}(t,e)}function tee(t,e,n){return t instanceof Za?oF(t,e):t instanceof el?aF(t,e):n}function sF(t,e){return t instanceof Hc?P1(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class Wc extends kv{}class Za extends kv{constructor(e){super(),this.elements=e}}function oF(t,e){const n=lF(e);for(const r of t.elements)n.some(i=>Hi(i,r))||n.push(r);return{arrayValue:{values:n}}}class el extends kv{constructor(e){super(),this.elements=e}}function aF(t,e){let n=lF(e);for(const r of t.elements)n=n.filter(i=>!Hi(i,r));return{arrayValue:{values:n}}}class Hc extends kv{constructor(e,n){super(),this.Tt=e,this.It=n}}function nA(t){return Ht(t.integerValue||t.doubleValue)}function lF(t){return Fh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e,n){this.field=e,this.transform=n}}function nee(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof Za&&r instanceof Za||n instanceof el&&r instanceof el?Vc(n.elements,r.elements,Hi):n instanceof Hc&&r instanceof Hc?Hi(n.It,r.It):n instanceof Wc&&r instanceof Wc}(t.transform,e.transform)}class ree{constructor(e,n){this.version=e,this.transformResults=n}}class Lt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Lt}static exists(e){return new Lt(void 0,e)}static updateTime(e){return new Lt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Av{}function cF(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new bu(t.key,Lt.none()):new Su(t.key,t.data,Lt.none());{const n=t.data,r=An.empty();let i=new _t(Xt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ds(t.key,r,new mr(i.toArray()),Lt.none())}}function iee(t,e,n){t instanceof Su?function(r,i,s){const o=r.value.clone(),a=iA(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Ds?function(r,i,s){if(!pm(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=iA(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(uF(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):function(r,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Vd(t,e,n,r){return t instanceof Su?function(i,s,o,a){if(!pm(i.precondition,s))return o;const l=i.value.clone(),c=sA(i.fieldTransforms,a,s);return l.setAll(c),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ds?function(i,s,o,a){if(!pm(i.precondition,s))return o;const l=sA(i.fieldTransforms,a,s),c=s.data;return c.setAll(uF(i)),c.setAll(l),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(u=>u.field))}(t,e,n,r):function(i,s,o){return pm(i.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(t,e,n)}function see(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=sF(r.transform,i||null);s!=null&&(n===null&&(n=An.empty()),n.set(r.field,s))}return n||null}function rA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&Vc(n,r,(i,s)=>nee(i,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Su extends Av{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ds extends Av{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function uF(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function iA(t,e,n){const r=new Map;Ae(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,tee(o,a,n[i]))}return r}function sA(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,eee(s,o,e))}return r}class bu extends Av{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rT extends Av{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oee{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zt,st;function dF(t){switch(t){default:return be();case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0}}function hF(t){if(t===void 0)return Yt("GRPC error has no .code"),Q.UNKNOWN;switch(t){case Zt.OK:return Q.OK;case Zt.CANCELLED:return Q.CANCELLED;case Zt.UNKNOWN:return Q.UNKNOWN;case Zt.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case Zt.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case Zt.INTERNAL:return Q.INTERNAL;case Zt.UNAVAILABLE:return Q.UNAVAILABLE;case Zt.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case Zt.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case Zt.NOT_FOUND:return Q.NOT_FOUND;case Zt.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case Zt.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case Zt.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case Zt.ABORTED:return Q.ABORTED;case Zt.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case Zt.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case Zt.DATA_LOSS:return Q.DATA_LOSS;default:return be()}}(st=Zt||(Zt={}))[st.OK=0]="OK",st[st.CANCELLED=1]="CANCELLED",st[st.UNKNOWN=2]="UNKNOWN",st[st.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",st[st.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",st[st.NOT_FOUND=5]="NOT_FOUND",st[st.ALREADY_EXISTS=6]="ALREADY_EXISTS",st[st.PERMISSION_DENIED=7]="PERMISSION_DENIED",st[st.UNAUTHENTICATED=16]="UNAUTHENTICATED",st[st.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",st[st.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",st[st.ABORTED=10]="ABORTED",st[st.OUT_OF_RANGE=11]="OUT_OF_RANGE",st[st.UNIMPLEMENTED=12]="UNIMPLEMENTED",st[st.INTERNAL=13]="INTERNAL",st[st.UNAVAILABLE=14]="UNAVAILABLE",st[st.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){wl(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return j2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aee=new qt(fe.comparator);function gr(){return aee}const fF=new qt(fe.comparator);function _d(...t){let e=fF;for(const n of t)e=e.insert(n.key,n);return e}function pF(t){let e=fF;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Oi(){return Bd()}function mF(){return Bd()}function Bd(){return new Qo(t=>t.toString(),(t,e)=>t.isEqual(e))}const lee=new qt(fe.comparator),cee=new _t(fe.comparator);function We(...t){let e=cee;for(const n of t)e=e.add(n);return e}const uee=new _t(Be);function Rv(){return uee}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,jf.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Uf(Ne.min(),i,Rv(),gr(),We())}}class jf{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new jf(r,n,We(),We(),We())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e,n,r,i){this.Et=e,this.removedTargetIds=n,this.key=r,this.At=i}}class gF{constructor(e,n){this.targetId=e,this.Rt=n}}class yF{constructor(e,n,r=an.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class oA{constructor(){this.bt=0,this.vt=lA(),this.Pt=an.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}get current(){return this.Vt}get resumeToken(){return this.Pt}get Dt(){return this.bt!==0}get Ct(){return this.St}xt(e){e.approximateByteSize()>0&&(this.St=!0,this.Pt=e)}Nt(){let e=We(),n=We(),r=We();return this.vt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:be()}}),new jf(this.Pt,this.Vt,e,n,r)}kt(){this.St=!1,this.vt=lA()}Ot(e,n){this.St=!0,this.vt=this.vt.insert(e,n)}Mt(e){this.St=!0,this.vt=this.vt.remove(e)}Ft(){this.bt+=1}$t(){this.bt-=1}Bt(){this.St=!0,this.Vt=!0}}class dee{constructor(e){this.Lt=e,this.qt=new Map,this.Ut=gr(),this.Kt=aA(),this.Gt=new _t(Be)}Qt(e){for(const n of e.Et)e.At&&e.At.isFoundDocument()?this.jt(n,e.At):this.zt(n,e.key,e.At);for(const n of e.removedTargetIds)this.zt(n,e.key,e.At)}Wt(e){this.forEachTarget(e,n=>{const r=this.Ht(n);switch(e.state){case 0:this.Jt(n)&&r.xt(e.resumeToken);break;case 1:r.$t(),r.Dt||r.kt(),r.xt(e.resumeToken);break;case 2:r.$t(),r.Dt||this.removeTarget(n);break;case 3:this.Jt(n)&&(r.Bt(),r.xt(e.resumeToken));break;case 4:this.Jt(n)&&(this.Yt(n),r.xt(e.resumeToken));break;default:be()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qt.forEach((r,i)=>{this.Jt(i)&&n(i)})}Zt(e){const n=e.targetId,r=e.Rt.count,i=this.Xt(n);if(i){const s=i.target;if(_g(s))if(r===0){const o=new fe(s.path);this.zt(n,o,It.newNoDocument(o,Ne.min()))}else Ae(r===1);else this.te(n)!==r&&(this.Yt(n),this.Gt=this.Gt.add(n))}}ee(e){const n=new Map;this.qt.forEach((s,o)=>{const a=this.Xt(o);if(a){if(s.current&&_g(a.target)){const l=new fe(a.target.path);this.Ut.get(l)!==null||this.ne(o,l)||this.zt(o,l,It.newNoDocument(l,e))}s.Ct&&(n.set(o,s.Nt()),s.kt())}});let r=We();this.Kt.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Xt(l);return!c||c.purpose===2||(a=!1,!1)}),a&&(r=r.add(s))}),this.Ut.forEach((s,o)=>o.setReadTime(e));const i=new Uf(e,n,this.Gt,this.Ut,r);return this.Ut=gr(),this.Kt=aA(),this.Gt=new _t(Be),i}jt(e,n){if(!this.Jt(e))return;const r=this.ne(e,n.key)?2:0;this.Ht(e).Ot(n.key,r),this.Ut=this.Ut.insert(n.key,n),this.Kt=this.Kt.insert(n.key,this.se(n.key).add(e))}zt(e,n,r){if(!this.Jt(e))return;const i=this.Ht(e);this.ne(e,n)?i.Ot(n,1):i.Mt(n),this.Kt=this.Kt.insert(n,this.se(n).delete(e)),r&&(this.Ut=this.Ut.insert(n,r))}removeTarget(e){this.qt.delete(e)}te(e){const n=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ft(e){this.Ht(e).Ft()}Ht(e){let n=this.qt.get(e);return n||(n=new oA,this.qt.set(e,n)),n}se(e){let n=this.Kt.get(e);return n||(n=new _t(Be),this.Kt=this.Kt.insert(e,n)),n}Jt(e){const n=this.Xt(e)!==null;return n||ie("WatchChangeAggregator","Detected inactive target",e),n}Xt(e){const n=this.qt.get(e);return n&&n.Dt?null:this.Lt.ie(e)}Yt(e){this.qt.set(e,new oA),this.Lt.getRemoteKeysForTarget(e).forEach(n=>{this.zt(e,n,null)})}ne(e,n){return this.Lt.getRemoteKeysForTarget(e).has(n)}}function aA(){return new qt(fe.comparator)}function lA(){return new qt(fe.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hee=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),fee=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),pee=(()=>({and:"AND",or:"OR"}))();class mee{constructor(e,n){this.databaseId=e,this.yt=n}}function Gc(t,e){return t.yt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vF(t,e){return t.yt?e.toBase64():e.toUint8Array()}function gee(t,e){return Gc(t,e.toTimestamp())}function Jt(t){return Ae(!!t),Ne.fromTimestamp(function(e){const n=Io(e);return new Ft(n.seconds,n.nanos)}(t))}function iT(t,e){return function(n){return new at(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function _F(t){const e=at.fromString(t);return Ae(kF(e)),e}function $h(t,e){return iT(t.databaseId,e.path)}function Ui(t,e){const n=_F(e);if(n.get(1)!==t.databaseId.projectId)throw new ne(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ne(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new fe(SF(n))}function $1(t,e){return iT(t.databaseId,e)}function wF(t){const e=_F(t);return e.length===4?at.emptyPath():SF(e)}function Uh(t){return new at(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function SF(t){return Ae(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function cA(t,e,n){return{name:$h(t,e),fields:n.value.mapValue.fields}}function bF(t,e,n){const r=Ui(t,e.name),i=Jt(e.updateTime),s=e.createTime?Jt(e.createTime):Ne.min(),o=new An({mapValue:{fields:e.fields}}),a=It.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function yee(t,e){return"found"in e?function(n,r){Ae(!!r.found),r.found.name,r.found.updateTime;const i=Ui(n,r.found.name),s=Jt(r.found.updateTime),o=r.found.createTime?Jt(r.found.createTime):Ne.min(),a=new An({mapValue:{fields:r.found.fields}});return It.newFoundDocument(i,s,o,a)}(t,e):"missing"in e?function(n,r){Ae(!!r.missing),Ae(!!r.readTime);const i=Ui(n,r.missing),s=Jt(r.readTime);return It.newNoDocument(i,s)}(t,e):be()}function vee(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:be()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,c){return l.yt?(Ae(c===void 0||typeof c=="string"),an.fromBase64String(c||"")):(Ae(c===void 0||c instanceof Uint8Array),an.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const c=l.code===void 0?Q.UNKNOWN:hF(l.code);return new ne(c,l.message||"")}(o);n=new yF(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ui(t,r.document.name),s=Jt(r.document.updateTime),o=r.document.createTime?Jt(r.document.createTime):Ne.min(),a=new An({mapValue:{fields:r.document.fields}}),l=It.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new mm(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ui(t,r.document),s=r.readTime?Jt(r.readTime):Ne.min(),o=It.newNoDocument(i,s),a=r.removedTargetIds||[];n=new mm([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ui(t,r.document),s=r.removedTargetIds||[];n=new mm([],s,i,null)}else{if(!("filter"in e))return be();{e.filter;const r=e.filter;r.targetId;const i=r.count||0,s=new oee(i),o=r.targetId;n=new gF(o,s)}}return n}function jh(t,e){let n;if(e instanceof Su)n={update:cA(t,e.key,e.value)};else if(e instanceof bu)n={delete:$h(t,e.key)};else if(e instanceof Ds)n={update:cA(t,e.key,e.data),updateMask:Tee(e.fieldMask)};else{if(!(e instanceof rT))return be();n={verify:$h(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof Wc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Za)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof el)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Hc)return{fieldPath:s.field.canonicalString(),increment:o.It};throw be()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:gee(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:be()}(t,e.precondition)),n}function U1(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?Lt.updateTime(Jt(i.updateTime)):i.exists!==void 0?Lt.exists(i.exists):Lt.none()}(e.currentDocument):Lt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,o){let a=null;if("setToServerValue"in o)Ae(o.setToServerValue==="REQUEST_TIME"),a=new Wc;else if("appendMissingElements"in o){const c=o.appendMissingElements.values||[];a=new Za(c)}else if("removeAllFromArray"in o){const c=o.removeAllFromArray.values||[];a=new el(c)}else"increment"in o?a=new Hc(s,o.increment):be();const l=Xt.fromServerFormat(o.fieldPath);return new $f(l,a)}(t,i)):[];if(e.update){e.update.name;const i=Ui(t,e.update.name),s=new An({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(a){const l=a.fieldPaths||[];return new mr(l.map(c=>Xt.fromServerFormat(c)))}(e.updateMask);return new Ds(i,s,o,n,r)}return new Su(i,s,n,r)}if(e.delete){const i=Ui(t,e.delete);return new bu(i,n)}if(e.verify){const i=Ui(t,e.verify);return new rT(i,n)}return be()}function _ee(t,e){return t&&t.length>0?(Ae(e!==void 0),t.map(n=>function(r,i){let s=r.updateTime?Jt(r.updateTime):Jt(i);return s.isEqual(Ne.min())&&(s=Jt(i)),new ree(s,r.transformResults||[])}(n,e))):[]}function EF(t,e){return{documents:[$1(t,e.path)]}}function TF(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=$1(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=$1(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(l){if(l.length!==0)return CF(mt.create(l,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(l){if(l.length!==0)return l.map(c=>function(u){return{field:Fl(u.field),direction:See(u.dir)}}(c))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(l,c){return l.yt||Of(c)?c:{value:c}}(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function xF(t){let e=wF(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ae(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(u){const d=IF(u);return d instanceof mt&&eT(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(u=>function(d){return new gc($l(d.field),function(h){switch(h){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction))}(u)));let a=null;n.limit&&(a=function(u){let d;return d=typeof u=="object"?u.value:u,Of(d)?null:d}(n.limit));let l=null;n.startAt&&(l=function(u){const d=!!u.before,h=u.values||[];return new ko(h,d)}(n.startAt));let c=null;return n.endAt&&(c=function(u){const d=!u.before,h=u.values||[];return new ko(h,d)}(n.endAt)),J2(e,i,o,s,a,"F",l,c)}function wee(t,e){const n=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return be()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function IF(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=$l(e.unaryFilter.field);return tt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=$l(e.unaryFilter.field);return tt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=$l(e.unaryFilter.field);return tt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=$l(e.unaryFilter.field);return tt.create(s,"!=",{nullValue:"NULL_VALUE"});default:return be()}}(t):t.fieldFilter!==void 0?function(e){return tt.create($l(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return be()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return mt.create(e.compositeFilter.filters.map(n=>IF(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return be()}}(e.compositeFilter.op))}(t):be()}function See(t){return hee[t]}function bee(t){return fee[t]}function Eee(t){return pee[t]}function Fl(t){return{fieldPath:t.canonicalString()}}function $l(t){return Xt.fromServerFormat(t.fieldPath)}function CF(t){return t instanceof tt?function(e){if(e.op==="=="){if(qk(e.value))return{unaryFilter:{field:Fl(e.field),op:"IS_NAN"}};if(Gk(e.value))return{unaryFilter:{field:Fl(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(qk(e.value))return{unaryFilter:{field:Fl(e.field),op:"IS_NOT_NAN"}};if(Gk(e.value))return{unaryFilter:{field:Fl(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fl(e.field),op:bee(e.op),value:e.value}}}(t):t instanceof mt?function(e){const n=e.getFilters().map(r=>CF(r));return n.length===1?n[0]:{compositeFilter:{op:Eee(e.op),filters:n}}}(t):be()}function Tee(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function kF(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=uA(e)),e=xee(t.get(n),e);return uA(e)}function xee(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function uA(t){return t+""}function Li(t){const e=t.length;if(Ae(e>=2),e===2)return Ae(t.charAt(0)===""&&t.charAt(1)===""),at.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&be(),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:be()}s=o+2}return new at(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(t,e){return[t,ir(e)]}function AF(t,e,n){return[t,ir(e),n]}const Iee={},Cee=["prefixPath","collectionGroup","readTime","documentId"],kee=["prefixPath","collectionGroup","documentId"],Aee=["collectionGroup","readTime","prefixPath","documentId"],Ree=["canonicalId","targetId"],Nee=["targetId","path"],Pee=["path","targetId"],Dee=["collectionId","parent"],Oee=["indexId","uid"],Lee=["uid","sequenceNumber"],Mee=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Fee=["indexId","uid","orderedDocumentKey"],$ee=["userId","collectionPath","documentId"],Uee=["userId","collectionPath","largestBatchId"],jee=["userId","collectionGroup","largestBatchId"],RF=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Vee=[...RF,"documentOverlays"],NF=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],PF=NF,Bee=[...PF,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1 extends U2{constructor(e,n){super(),this.re=e,this.currentSequenceNumber=n}}function Tn(t,e){const n=ge(t);return fi.M(n.re,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&iee(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Vd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Vd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=mF();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=cF(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),We())}isEqual(e){return this.batchId===e.batchId&&Vc(this.mutations,e.mutations,(n,r)=>rA(n,r))&&Vc(this.baseMutations,e.baseMutations,(n,r)=>rA(n,r))}}class oT{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ae(e.mutations.length===r.length);let i=lee;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new oT(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,n,r,i,s=Ne.min(),o=Ne.min(),a=an.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new fo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new fo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new fo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DF{constructor(e){this.oe=e}}function zee(t,e){let n;if(e.document)n=bF(t.oe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=fe.fromSegments(e.noDocument.path),i=nl(e.noDocument.readTime);n=It.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return be();{const r=fe.fromSegments(e.unknownDocument.path),i=nl(e.unknownDocument.version);n=It.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(r){const i=new Ft(r[0],r[1]);return Ne.fromTimestamp(i)}(e.readTime)),n}function hA(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:bg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,s){return{name:$h(i,s.key),fields:s.data.value.mapValue.fields,updateTime:Gc(i,s.version.toTimestamp()),createTime:Gc(i,s.createTime.toTimestamp())}}(t.oe,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:tl(e.version)};else{if(!e.isUnknownDocument())return be();r.unknownDocument={path:n.path.toArray(),version:tl(e.version)}}return r}function bg(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function tl(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function nl(t){const e=new Ft(t.seconds,t.nanoseconds);return Ne.fromTimestamp(e)}function la(t,e){const n=(e.baseMutations||[]).map(s=>U1(t.oe,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>U1(t.oe,s)),i=Ft.fromMillis(e.localWriteTimeMs);return new sT(e.batchId,i,n,r)}function wd(t){const e=nl(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?nl(t.lastLimboFreeSnapshotVersion):Ne.min();let r;var i;return t.query.documents!==void 0?(Ae((i=t.query).documents.length===1),r=Tr(wu(wF(i.documents[0])))):r=function(s){return Tr(xF(s))}(t.query),new fo(r,t.targetId,0,t.lastListenSequenceNumber,e,n,an.fromBase64String(t.resumeToken))}function OF(t,e){const n=tl(e.snapshotVersion),r=tl(e.lastLimboFreeSnapshotVersion);let i;i=_g(e.target)?EF(t.oe,e.target):TF(t.oe,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ja(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function lT(t){const e=xF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Sg(e,e.limit,"L"):e}function C0(t,e){return new aT(e.largestBatchId,U1(t.oe,e.overlayMutation))}function fA(t,e){const n=e.path.lastSegment();return[t,ir(e.path.popLast()),n]}function pA(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:tl(r.readTime),documentKey:ir(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wee{getBundleMetadata(e,n){return mA(e).get(n).next(r=>{if(r)return{id:(i=r).bundleId,createTime:nl(i.createTime),version:i.version};var i})}saveBundleMetadata(e,n){return mA(e).put({bundleId:(r=n).id,createTime:tl(Jt(r.createTime)),version:r.version});var r}getNamedQuery(e,n){return gA(e).get(n).next(r=>{if(r)return{name:(i=r).name,query:lT(i.bundledQuery),readTime:nl(i.readTime)};var i})}saveNamedQuery(e,n){return gA(e).put(function(r){return{name:r.name,readTime:tl(Jt(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function mA(t){return Tn(t,"bundles")}function gA(t){return Tn(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e,n){this.Tt=e,this.userId=n}static ue(e,n){const r=n.uid||"";return new Nv(e,r)}getOverlay(e,n){return Xu(e).get(fA(this.userId,n)).next(r=>r?C0(this.Tt,r):null)}getOverlays(e,n){const r=Oi();return q.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new aT(n,o);i.push(this.ce(e,a))}),q.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(ir(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Xu(e).Y("collectionPathOverlayIndex",a))}),q.waitFor(s)}getOverlaysForCollection(e,n,r){const i=Oi(),s=ir(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Xu(e).W("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=C0(this.Tt,l);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=Oi();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Xu(e).X({index:"collectionGroupOverlayIndex",range:a},(l,c,u)=>{const d=C0(this.Tt,c);s.size()<i||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):u.done()}).next(()=>s)}ce(e,n){return Xu(e).put(function(r,i,s){const[o,a,l]=fA(i,s.mutation.key);return{userId:i,collectionPath:a,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:jh(r.oe,s.mutation)}}(this.Tt,this.userId,n))}}function Xu(t){return Tn(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(){}ae(e,n){this.he(e,n),n.le()}he(e,n){if("nullValue"in e)this.fe(n,5);else if("booleanValue"in e)this.fe(n,10),n.de(e.booleanValue?1:0);else if("integerValue"in e)this.fe(n,15),n.de(Ht(e.integerValue));else if("doubleValue"in e){const r=Ht(e.doubleValue);isNaN(r)?this.fe(n,13):(this.fe(n,15),Oh(r)?n.de(0):n.de(r))}else if("timestampValue"in e){const r=e.timestampValue;this.fe(n,20),typeof r=="string"?n._e(r):(n._e(`${r.seconds||""}`),n.de(r.nanos||0))}else if("stringValue"in e)this.we(e.stringValue,n),this.me(n);else if("bytesValue"in e)this.fe(n,30),n.ge(Qa(e.bytesValue)),this.me(n);else if("referenceValue"in e)this.ye(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.fe(n,45),n.de(r.latitude||0),n.de(r.longitude||0)}else"mapValue"in e?z2(e)?this.fe(n,Number.MAX_SAFE_INTEGER):(this.pe(e.mapValue,n),this.me(n)):"arrayValue"in e?(this.Ie(e.arrayValue,n),this.me(n)):be()}we(e,n){this.fe(n,25),this.Te(e,n)}Te(e,n){n._e(e)}pe(e,n){const r=e.fields||{};this.fe(n,55);for(const i of Object.keys(r))this.we(i,n),this.he(r[i],n)}Ie(e,n){const r=e.values||[];this.fe(n,50);for(const i of r)this.he(i,n)}ye(e,n){this.fe(n,37),fe.fromName(e).path.forEach(r=>{this.fe(n,60),this.Te(r,n)})}fe(e,n){e.de(n)}me(e){e.de(2)}}ca.Ee=new ca;function Hee(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function yA(t){const e=64-function(n){let r=0;for(let i=0;i<8;++i){const s=Hee(255&n[i]);if(r+=s,s!==8)break}return r}(t);return Math.ceil(e/8)}class Gee{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ae(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Re(r.value),r=n.next();this.be()}ve(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Pe(r.value),r=n.next();this.Ve()}Se(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Re(r);else if(r<2048)this.Re(960|r>>>6),this.Re(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Re(480|r>>>12),this.Re(128|63&r>>>6),this.Re(128|63&r);else{const i=n.codePointAt(0);this.Re(240|i>>>18),this.Re(128|63&i>>>12),this.Re(128|63&i>>>6),this.Re(128|63&i)}}this.be()}De(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=n.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.Ve()}Ce(e){const n=this.xe(e),r=yA(n);this.Ne(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}ke(e){const n=this.xe(e),r=yA(n);this.Ne(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Oe(){this.Me(255),this.Me(255)}Fe(){this.$e(255),this.$e(255)}reset(){this.position=0}seed(e){this.Ne(e.length),this.buffer.set(e,this.position),this.position+=e.length}Be(){return this.buffer.slice(0,this.position)}xe(e){const n=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Re(e){const n=255&e;n===0?(this.Me(0),this.Me(255)):n===255?(this.Me(255),this.Me(0)):this.Me(n)}Pe(e){const n=255&e;n===0?(this.$e(0),this.$e(255)):n===255?(this.$e(255),this.$e(0)):this.$e(e)}be(){this.Me(0),this.Me(1)}Ve(){this.$e(0),this.$e(1)}Me(e){this.Ne(1),this.buffer[this.position++]=e}$e(e){this.Ne(1),this.buffer[this.position++]=~e}Ne(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class qee{constructor(e){this.Le=e}ge(e){this.Le.Ae(e)}_e(e){this.Le.Se(e)}de(e){this.Le.Ce(e)}le(){this.Le.Oe()}}class Kee{constructor(e){this.Le=e}ge(e){this.Le.ve(e)}_e(e){this.Le.De(e)}de(e){this.Le.ke(e)}le(){this.Le.Fe()}}class Ju{constructor(){this.Le=new Gee,this.qe=new qee(this.Le),this.Ue=new Kee(this.Le)}seed(e){this.Le.seed(e)}Ke(e){return e===0?this.qe:this.Ue}Be(){return this.Le.Be()}reset(){this.Le.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Ge(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ua(this.indexId,this.documentKey,this.arrayValue,r)}}function $s(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=vA(t.arrayValue,e.arrayValue),n!==0?n:(n=vA(t.directionalValue,e.directionalValue),n!==0?n:fe.comparator(t.documentKey,e.documentKey)))}function vA(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qee{constructor(e){this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Qe=e.orderBy,this.je=[];for(const n of e.filters){const r=n;r.isInequality()?this.ze=r:this.je.push(r)}}We(e){Ae(e.collectionGroup===this.collectionId);const n=R1(e);if(n!==void 0&&!this.He(n))return!1;const r=ia(e);let i=0,s=0;for(;i<r.length&&this.He(r[i]);++i);if(i===r.length)return!0;if(this.ze!==void 0){const o=r[i];if(!this.Je(this.ze,o)||!this.Ye(this.Qe[s++],o))return!1;++i}for(;i<r.length;++i){const o=r[i];if(s>=this.Qe.length||!this.Ye(this.Qe[s++],o))return!1}return!0}He(e){for(const n of this.je)if(this.Je(n,e))return!0;return!1}Je(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}Ye(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LF(t){var e,n;if(Ae(t instanceof tt||t instanceof mt),t instanceof tt){if(t instanceof Y2){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>tt.create(t.field,"==",s)))||[];return mt.create(i,"or")}return t}const r=t.filters.map(i=>LF(i));return mt.create(r,t.op)}function Yee(t){if(t.getFilters().length===0)return[];const e=z1(LF(t));return Ae(MF(e)),V1(e)||B1(e)?[e]:e.getFilters()}function V1(t){return t instanceof tt}function B1(t){return t instanceof mt&&eT(t)}function MF(t){return V1(t)||B1(t)||function(e){if(e instanceof mt&&D1(e)){for(const n of e.getFilters())if(!V1(n)&&!B1(n))return!1;return!0}return!1}(t)}function z1(t){if(Ae(t instanceof tt||t instanceof mt),t instanceof tt)return t;if(t.filters.length===1)return z1(t.filters[0]);const e=t.filters.map(r=>z1(r));let n=mt.create(e,t.op);return n=Eg(n),MF(n)?n:(Ae(n instanceof mt),Ae(zc(n)),Ae(n.filters.length>1),n.filters.reduce((r,i)=>cT(r,i)))}function cT(t,e){let n;return Ae(t instanceof tt||t instanceof mt),Ae(e instanceof tt||e instanceof mt),n=t instanceof tt?e instanceof tt?function(r,i){return mt.create([r,i],"and")}(t,e):_A(t,e):e instanceof tt?_A(e,t):function(r,i){if(Ae(r.filters.length>0&&i.filters.length>0),zc(r)&&zc(i))return q2(r,i.getFilters());const s=D1(r)?r:i,o=D1(r)?i:r,a=s.filters.map(l=>cT(l,o));return mt.create(a,"or")}(t,e),Eg(n)}function _A(t,e){if(zc(e))return q2(e,t.getFilters());{const n=e.filters.map(r=>cT(t,r));return mt.create(n,"or")}}function Eg(t){if(Ae(t instanceof tt||t instanceof mt),t instanceof tt)return t;const e=t.getFilters();if(e.length===1)return Eg(e[0]);if(H2(t))return t;const n=e.map(i=>Eg(i)),r=[];return n.forEach(i=>{i instanceof tt?r.push(i):i instanceof mt&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:mt.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xee{constructor(){this.Ze=new uT}addToCollectionParentIndex(e,n){return this.Ze.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.Ze.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve($r.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve($r.min())}updateCollectionGroup(e,n,r){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class uT{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new _t(at.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new _t(at.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp=new Uint8Array(0);class Jee{constructor(e,n){this.user=e,this.databaseId=n,this.Xe=new uT,this.tn=new Qo(r=>Ja(r),(r,i)=>Lf(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Xe.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.Xe.add(n)});const s={collectionId:r,parent:ir(i)};return wA(e).put(s)}return q.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[O2(n),""],!1,!0);return wA(e).W(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(Li(o.parent))}return r})}addFieldIndex(e,n){const r=Fp(e),i=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=ed(e);return s.next(a=>{o.put(pA(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Fp(e),i=ed(e),s=Zu(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const r=Zu(e);let i=!0;const s=new Map;return q.forEach(this.en(n),o=>this.nn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=We();const a=[];return q.forEach(s,(l,c)=>{var u;ie("IndexedDbIndexManager",`Using index ${u=l,`id=${u.indexId}|cg=${u.collectionGroup}|f=${u.fields.map(v=>`${v.fieldPath}:${v.kind}`).join(",")}`} to execute ${Ja(n)}`);const d=function(v,b){const I=R1(b);if(I===void 0)return null;for(const E of wg(v,I.fieldPath))switch(E.op){case"array-contains-any":return E.value.arrayValue.values||[];case"array-contains":return[E.value]}return null}(c,l),h=function(v,b){const I=new Map;for(const E of ia(b))for(const D of wg(v,E.fieldPath))switch(D.op){case"==":case"in":I.set(E.fieldPath.canonicalString(),D.value);break;case"not-in":case"!=":return I.set(E.fieldPath.canonicalString(),D.value),Array.from(I.values())}return null}(c,l),f=function(v,b){const I=[];let E=!0;for(const D of ia(b)){const S=D.kind===0?Zk(v,D.fieldPath,v.startAt):eA(v,D.fieldPath,v.startAt);I.push(S.value),E&&(E=S.inclusive)}return new ko(I,E)}(c,l),p=function(v,b){const I=[];let E=!0;for(const D of ia(b)){const S=D.kind===0?eA(v,D.fieldPath,v.endAt):Zk(v,D.fieldPath,v.endAt);I.push(S.value),E&&(E=S.inclusive)}return new ko(I,E)}(c,l),y=this.sn(l,c,f),w=this.sn(l,c,p),m=this.rn(l,c,h),g=this.on(l.indexId,d,y,f.inclusive,w,p.inclusive,m);return q.forEach(g,v=>r.J(v,n.limit).next(b=>{b.forEach(I=>{const E=fe.fromSegments(I.documentKey);o.has(E)||(o=o.add(E),a.push(E))})}))}).next(()=>a)}return q.resolve(null)})}en(e){let n=this.tn.get(e);return n||(e.filters.length===0?n=[e]:n=Yee(mt.create(e.filters,"and")).map(r=>L1(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.tn.set(e,n),n)}on(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),c=l/(n!=null?n.length:1),u=[];for(let d=0;d<l;++d){const h=n?this.un(n[d/c]):Mp,f=this.cn(e,h,r[d%c],i),p=this.an(e,h,s[d%c],o),y=a.map(w=>this.cn(e,h,w,!0));u.push(...this.createRange(f,p,y))}return u}cn(e,n,r,i){const s=new ua(e,fe.empty(),n,r);return i?s:s.Ge()}an(e,n,r,i){const s=new ua(e,fe.empty(),n,r);return i?s.Ge():s}nn(e,n){const r=new Qee(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.We(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.en(n);return q.forEach(i,s=>this.nn(e,s).next(o=>{o?r!==0&&o.fields.length<function(a){let l=new _t(Xt.comparator),c=!1;for(const u of a.filters)for(const d of u.getFlattenedFilters())d.field.isKeyField()||(d.op==="array-contains"||d.op==="array-contains-any"?c=!0:l=l.add(d.field));for(const u of a.orderBy)u.field.isKeyField()||(l=l.add(u.field));return l.size+(c?1:0)}(s)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(n)&&i.length>1&&r===2?1:r)}hn(e,n){const r=new Ju;for(const i of ia(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Ke(i.kind);ca.Ee.ae(s,o)}return r.Be()}un(e){const n=new Ju;return ca.Ee.ae(e,n.Ke(0)),n.Be()}ln(e,n){const r=new Ju;return ca.Ee.ae(Xa(this.databaseId,n),r.Ke(function(i){const s=ia(i);return s.length===0?0:s[s.length-1].kind}(e))),r.Be()}rn(e,n,r){if(r===null)return[];let i=[];i.push(new Ju);let s=0;for(const o of ia(e)){const a=r[s++];for(const l of i)if(this.fn(n,o.fieldPath)&&Fh(a))i=this.dn(i,o,a);else{const c=l.Ke(o.kind);ca.Ee.ae(a,c)}}return this._n(i)}sn(e,n,r){return this.rn(e,n,r.position)}_n(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Be();return n}dn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new Ju;l.seed(a.Be()),ca.Ee.ae(o,l.Ke(n.kind)),s.push(l)}return s}fn(e,n){return!!e.filters.find(r=>r instanceof tt&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Fp(e),i=ed(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(s=>{const o=[];return q.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(c,u){const d=u?new vg(u.sequenceNumber,new $r(nl(u.readTime),new fe(Li(u.documentKey)),u.largestBatchId)):vg.empty(),h=c.fields.map(([f,p])=>new OZ(Xt.fromServerFormat(f),p));return new L2(c.indexId,c.collectionGroup,h,d)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:Be(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Fp(e),s=ed(e);return this.wn(e).next(o=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>q.forEach(a,l=>s.put(pA(l.indexId,this.user,o,r)))))}updateIndexEntries(e,n){const r=new Map;return q.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?q.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),q.forEach(a,l=>this.mn(e,i,l).next(c=>{const u=this.gn(s,l);return c.isEqual(u)?q.resolve():this.yn(e,s,l,c,u)}))))})}pn(e,n,r,i){return Zu(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.ln(r,n.key),documentKey:n.key.path.toArray()})}In(e,n,r,i){return Zu(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.ln(r,n.key),n.key.path.toArray()])}mn(e,n,r){const i=Zu(e);let s=new _t($s);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.ln(r,n)])},(o,a)=>{s=s.add(new ua(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}gn(e,n){let r=new _t($s);const i=this.hn(n,e);if(i==null)return r;const s=R1(n);if(s!=null){const o=e.data.field(s.fieldPath);if(Fh(o))for(const a of o.arrayValue.values||[])r=r.add(new ua(n.indexId,e.key,this.un(a),i))}else r=r.add(new ua(n.indexId,e.key,Mp,i));return r}yn(e,n,r,i,s){ie("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(a,l,c,u,d){const h=a.getIterator(),f=l.getIterator();let p=Dl(h),y=Dl(f);for(;p||y;){let w=!1,m=!1;if(p&&y){const g=c(p,y);g<0?m=!0:g>0&&(w=!0)}else p!=null?m=!0:w=!0;w?(u(y),y=Dl(f)):m?(d(p),p=Dl(h)):(p=Dl(h),y=Dl(f))}}(i,s,$s,a=>{o.push(this.pn(e,n,r,a))},a=>{o.push(this.In(e,n,r,a))}),q.waitFor(o)}wn(e){let n=1;return ed(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>$s(o,a)).filter((o,a,l)=>!a||$s(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=$s(o,e),l=$s(o,n);if(a===0)i[0]=e.Ge();else if(a>0&&l<0)i.push(o),i.push(o.Ge());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Tn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Mp,[]],l=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Mp,[]];s.push(IDBKeyRange.bound(a,l))}return s}Tn(e,n){return $s(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(SA)}getMinOffset(e,n){return q.mapArray(this.en(n),r=>this.nn(e,r).next(i=>i||be())).next(SA)}}function wA(t){return Tn(t,"collectionParents")}function Zu(t){return Tn(t,"indexEntries")}function Fp(t){return Tn(t,"indexConfiguration")}function ed(t){return Tn(t,"indexState")}function SA(t){Ae(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;XE(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new $r(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class cr{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new cr(e,cr.DEFAULT_COLLECTION_PERCENTILE,cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FF(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.X({range:o},(u,d,h)=>(a++,h.delete()));s.push(l.next(()=>{Ae(a===1)}));const c=[];for(const u of n.mutations){const d=AF(e,u.key.path,n.batchId);s.push(i.delete(d)),c.push(u.key)}return q.waitFor(s).next(()=>c)}function Tg(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw be();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cr.DEFAULT_COLLECTION_PERCENTILE=10,cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cr.DEFAULT=new cr(41943040,cr.DEFAULT_COLLECTION_PERCENTILE,cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cr.DISABLED=new cr(-1,0,0);class Pv{constructor(e,n,r,i){this.userId=e,this.Tt=n,this.indexManager=r,this.referenceDelegate=i,this.En={}}static ue(e,n,r,i){Ae(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Pv(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Us(e).X({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=Ul(e),o=Us(e);return o.add({}).next(a=>{Ae(typeof a=="number");const l=new sT(a,n,r,i),c=function(h,f,p){const y=p.baseMutations.map(m=>jh(h.oe,m)),w=p.mutations.map(m=>jh(h.oe,m));return{userId:f,batchId:p.batchId,localWriteTimeMs:p.localWriteTime.toMillis(),baseMutations:y,mutations:w}}(this.Tt,this.userId,l),u=[];let d=new _t((h,f)=>Be(h.canonicalString(),f.canonicalString()));for(const h of i){const f=AF(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),u.push(o.put(c)),u.push(s.put(f,Iee))}return d.forEach(h=>{u.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.En[a]=l.keys()}),q.waitFor(u).next(()=>l)})}lookupMutationBatch(e,n){return Us(e).get(n).next(r=>r?(Ae(r.userId===this.userId),la(this.Tt,r)):null)}An(e,n){return this.En[n]?q.resolve(this.En[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.En[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Us(e).X({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(Ae(a.batchId>=r),s=la(this.Tt,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Us(e).X({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Us(e).W("userMutationsIndex",n).next(r=>r.map(i=>la(this.Tt,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=gm(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Ul(e).X({range:i},(o,a,l)=>{const[c,u,d]=o,h=Li(u);if(c===this.userId&&n.path.isEqual(h))return Us(e).get(d).next(f=>{if(!f)throw be();Ae(f.userId===this.userId),s.push(la(this.Tt,f))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new _t(Be);const i=[];return n.forEach(s=>{const o=gm(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=Ul(e).X({range:a},(c,u,d)=>{const[h,f,p]=c,y=Li(f);h===this.userId&&s.path.isEqual(y)?r=r.add(p):d.done()});i.push(l)}),q.waitFor(i).next(()=>this.Rn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=gm(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new _t(Be);return Ul(e).X({range:o},(l,c,u)=>{const[d,h,f]=l,p=Li(h);d===this.userId&&r.isPrefixOf(p)?p.length===i&&(a=a.add(f)):u.done()}).next(()=>this.Rn(e,a))}Rn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Us(e).get(s).next(o=>{if(o===null)throw be();Ae(o.userId===this.userId),r.push(la(this.Tt,o))}))}),q.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return FF(e.re,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.bn(n.batchId)}),q.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}bn(e){delete this.En[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return q.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Ul(e).X({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=Li(s[1]);i.push(l)}else a.done()}).next(()=>{Ae(i.length===0)})})}containsKey(e,n){return $F(e,this.userId,n)}vn(e){return UF(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function $F(t,e,n){const r=gm(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Ul(t).X({range:s,Z:!0},(a,l,c)=>{const[u,d,h]=a;u===e&&d===i&&(o=!0),c.done()}).next(()=>o)}function Us(t){return Tn(t,"mutations")}function Ul(t){return Tn(t,"documentMutations")}function UF(t){return Tn(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e){this.Pn=e}next(){return this.Pn+=2,this.Pn}static Vn(){return new rl(0)}static Sn(){return new rl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zee{constructor(e,n){this.referenceDelegate=e,this.Tt=n}allocateTargetId(e){return this.Dn(e).next(n=>{const r=new rl(n.highestTargetId);return n.highestTargetId=r.next(),this.Cn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Dn(e).next(n=>Ne.fromTimestamp(new Ft(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Dn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Dn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Cn(e,i)))}addTargetData(e,n){return this.xn(e,n).next(()=>this.Dn(e).next(r=>(r.targetCount+=1,this.Nn(n,r),this.Cn(e,r))))}updateTargetData(e,n){return this.xn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Ol(e).delete(n.targetId)).next(()=>this.Dn(e)).next(r=>(Ae(r.targetCount>0),r.targetCount-=1,this.Cn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return Ol(e).X((o,a)=>{const l=wd(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>q.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Ol(e).X((r,i)=>{const s=wd(i);n(s)})}Dn(e){return EA(e).get("targetGlobalKey").next(n=>(Ae(n!==null),n))}Cn(e,n){return EA(e).put("targetGlobalKey",n)}xn(e,n){return Ol(e).put(OF(this.Tt,n))}Nn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Dn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Ja(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Ol(e).X({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const c=wd(a);Lf(n,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Gs(e);return n.forEach(o=>{const a=ir(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),q.waitFor(i)}removeMatchingKeys(e,n,r){const i=Gs(e);return q.forEach(n,s=>{const o=ir(s.path);return q.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Gs(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Gs(e);let s=We();return i.X({range:r,Z:!0},(o,a,l)=>{const c=Li(o[1]),u=new fe(c);s=s.add(u)}).next(()=>s)}containsKey(e,n){const r=ir(n.path),i=IDBKeyRange.bound([r],[O2(r)],!1,!0);let s=0;return Gs(e).X({index:"documentTargetsIndex",Z:!0,range:i},([o,a],l,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}ie(e,n){return Ol(e).get(n).next(r=>r?wd(r):null)}}function Ol(t){return Tn(t,"targets")}function EA(t){return Tn(t,"targetGlobal")}function Gs(t){return Tn(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA([t,e],[n,r]){const i=Be(t,n);return i===0?Be(e,r):i}class ete{constructor(e){this.kn=e,this.buffer=new _t(TA),this.On=0}Mn(){return++this.On}Fn(e){const n=[e,this.Mn()];if(this.buffer.size<this.kn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();TA(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class tte{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.$n=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Bn(6e4)}stop(){this.$n&&(this.$n.cancel(),this.$n=null)}get started(){return this.$n!==null}Bn(e){ie("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.$n=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.$n=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ko(n)?ie("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await qo(n)}await this.Bn(3e5)})}}class nte{constructor(e,n){this.Ln=e,this.params=n}calculateTargetCount(e,n){return this.Ln.qn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return q.resolve(pr.at);const r=new ete(n);return this.Ln.forEachTarget(e,i=>r.Fn(i.sequenceNumber)).next(()=>this.Ln.Un(e,i=>r.Fn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Ln.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Ln.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(bA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bA):this.Kn(e,n))}getCacheSize(e){return this.Ln.getCacheSize(e)}Kn(e,n){let r,i,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(c=Date.now(),A1()<=ot.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rte{constructor(e,n){this.db=e,this.garbageCollector=function(r,i){return new nte(r,i)}(this,n)}qn(e){const n=this.Gn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Gn(e){let n=0;return this.Un(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Un(e,n){return this.Qn(e,(r,i)=>n(i))}addReference(e,n,r){return $p(e,r)}removeReference(e,n,r){return $p(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return $p(e,n)}jn(e,n){return function(r,i){let s=!1;return UF(r).tt(o=>$F(r,o,i).next(a=>(a&&(s=!0),q.resolve(!a)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Qn(e,(o,a)=>{if(a<=n){const l=this.jn(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Ne.min()),Gs(e).delete([0,ir(o.path)])))});i.push(l)}}).next(()=>q.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return $p(e,n)}Qn(e,n){const r=Gs(e);let i,s=pr.at;return r.X({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{o===0?(s!==pr.at&&n(new fe(Li(i)),s),s=c,i=l):s=pr.at}).next(()=>{s!==pr.at&&n(new fe(Li(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function $p(t,e){return Gs(t).put(function(n,r){return{targetId:0,path:ir(n.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jF{constructor(){this.changes=new Qo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,It.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ite{constructor(e){this.Tt=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return ea(e).put(r)}removeEntry(e,n,r){return ea(e).delete(function(i,s){const o=i.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],bg(s),o[o.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.zn(e,r)))}getEntry(e,n){let r=It.newInvalidDocument(n);return ea(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(td(n))},(i,s)=>{r=this.Wn(n,s)}).next(()=>r)}Hn(e,n){let r={size:0,document:It.newInvalidDocument(n)};return ea(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(td(n))},(i,s)=>{r={document:this.Wn(n,s),size:Tg(s)}}).next(()=>r)}getEntries(e,n){let r=gr();return this.Jn(e,n,(i,s)=>{const o=this.Wn(i,s);r=r.insert(i,o)}).next(()=>r)}Yn(e,n){let r=gr(),i=new qt(fe.comparator);return this.Jn(e,n,(s,o)=>{const a=this.Wn(s,o);r=r.insert(s,a),i=i.insert(s,Tg(o))}).next(()=>({documents:r,Zn:i}))}Jn(e,n,r){if(n.isEmpty())return q.resolve();let i=new _t(CA);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(td(i.first()),td(i.last())),o=i.getIterator();let a=o.getNext();return ea(e).X({index:"documentKeyIndex",range:s},(l,c,u)=>{const d=fe.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&CA(a,d)<0;)r(a,null),a=o.getNext();a&&a.isEqual(d)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?u.j(td(a)):u.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i){const s=n.path,o=[s.popLast().toArray(),s.lastSegment(),bg(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ea(e).W(IDBKeyRange.bound(o,a,!0)).next(l=>{let c=gr();for(const u of l){const d=this.Wn(fe.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);d.isFoundDocument()&&(Ff(n,d)||i.has(d.key))&&(c=c.insert(d.key,d))}return c})}getAllFromCollectionGroup(e,n,r,i){let s=gr();const o=IA(n,r),a=IA(n,$r.max());return ea(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,u)=>{const d=this.Wn(fe.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(d.key,d),s.size===i&&u.done()}).next(()=>s)}newChangeBuffer(e){return new ste(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return xA(e).get("remoteDocumentGlobalKey").next(n=>(Ae(!!n),n))}zn(e,n){return xA(e).put("remoteDocumentGlobalKey",n)}Wn(e,n){if(n){const r=zee(this.Tt,n);if(!(r.isNoDocument()&&r.version.isEqual(Ne.min())))return r}return It.newInvalidDocument(e)}}function VF(t){return new ite(t)}class ste extends jF{constructor(e,n){super(),this.Xn=e,this.trackRemovals=n,this.ts=new Qo(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new _t((s,o)=>Be(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ts.get(s);if(n.push(this.Xn.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=hA(this.Xn.Tt,o);i=i.add(s.path.popLast());const c=Tg(l);r+=c-a.size,n.push(this.Xn.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=hA(this.Xn.Tt,o.convertToNoDocument(Ne.min()));n.push(this.Xn.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.Xn.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.Xn.updateMetadata(e,r)),q.waitFor(n)}getFromCache(e,n){return this.Xn.Hn(e,n).next(r=>(this.ts.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Xn.Yn(e,n).next(({documents:r,Zn:i})=>(i.forEach((s,o)=>{this.ts.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function xA(t){return Tn(t,"remoteDocumentGlobal")}function ea(t){return Tn(t,"remoteDocumentsV14")}function td(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function IA(t,e){const n=e.documentKey.path.toArray();return[t,bg(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function CA(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Be(n[s],r[s]),i)return i;return i=Be(n.length,r.length),i||(i=Be(n[n.length-2],r[r.length-2]),i||Be(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ote{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BF{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Vd(r.mutation,i,mr.empty(),Ft.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,We()).next(()=>r))}getLocalViewOfDocuments(e,n,r=We()){const i=Oi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=_d();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Oi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,We()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=gr();const o=Bd(),a=Bd();return n.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof Ds)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),Vd(u.mutation,c,u.mutation.getFieldMask(),Ft.now())):o.set(c.key,mr.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var d;return a.set(c,new ote(u,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Bd();let i=new qt((o,a)=>o-a),s=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||mr.empty();u=a.applyToLocalView(c,u),r.set(l,u);const d=(i.get(a.batchId)||We()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=mF();u.forEach(h=>{if(!s.has(h)){const f=cF(n.get(h),r.get(h));f!==null&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return fe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):nT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):q.resolve(Oi());let a=-1,l=s;return o.next(c=>q.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?q.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{l=l.insert(u,h)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,We())).next(u=>({batchId:a,changes:pF(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new fe(n)).next(r=>{let i=_d();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=_d();return this.indexManager.getCollectionParents(e,i).next(o=>q.forEach(o,a=>{const l=function(c,u){return new Ps(u,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(n,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(c=>{c.forEach((u,d)=>{s=s.insert(u,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i))).next(s=>{i.forEach((a,l)=>{const c=l.getKey();s.get(c)===null&&(s=s.insert(c,It.newInvalidDocument(c)))});let o=_d();return s.forEach((a,l)=>{const c=i.get(a);c!==void 0&&Vd(c.mutation,l,mr.empty(),Ft.now()),Ff(n,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ate{constructor(e){this.Tt=e,this.es=new Map,this.ns=new Map}getBundleMetadata(e,n){return q.resolve(this.es.get(n))}saveBundleMetadata(e,n){var r;return this.es.set(n.id,{id:(r=n).id,version:r.version,createTime:Jt(r.createTime)}),q.resolve()}getNamedQuery(e,n){return q.resolve(this.ns.get(n))}saveNamedQuery(e,n){return this.ns.set(n.name,function(r){return{name:r.name,query:lT(r.bundledQuery),readTime:Jt(r.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lte{constructor(){this.overlays=new qt(fe.comparator),this.ss=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Oi();return q.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ce(e,n,s)}),q.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.ss.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.ss.delete(r)),q.resolve()}getOverlaysForCollection(e,n,r){const i=Oi(),s=n.length+1,o=new fe(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return q.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new qt((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=Oi(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Oi(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return q.resolve(a)}ce(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.ss.get(i.largestBatchId).delete(r.key);this.ss.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new aT(n,r));let s=this.ss.get(n);s===void 0&&(s=We(),this.ss.set(n,s)),this.ss.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(){this.rs=new _t(un.os),this.us=new _t(un.cs)}isEmpty(){return this.rs.isEmpty()}addReference(e,n){const r=new un(e,n);this.rs=this.rs.add(r),this.us=this.us.add(r)}hs(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.ls(new un(e,n))}fs(e,n){e.forEach(r=>this.removeReference(r,n))}ds(e){const n=new fe(new at([])),r=new un(n,e),i=new un(n,e+1),s=[];return this.us.forEachInRange([r,i],o=>{this.ls(o),s.push(o.key)}),s}_s(){this.rs.forEach(e=>this.ls(e))}ls(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}ws(e){const n=new fe(new at([])),r=new un(n,e),i=new un(n,e+1);let s=We();return this.us.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new un(e,0),r=this.rs.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class un{constructor(e,n){this.key=e,this.gs=n}static os(e,n){return fe.comparator(e.key,n.key)||Be(e.gs,n.gs)}static cs(e,n){return Be(e.gs,n.gs)||fe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cte{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.ys=1,this.ps=new _t(un.os)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.ys;this.ys++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new sT(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.ps=this.ps.add(new un(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return q.resolve(o)}lookupMutationBatch(e,n){return q.resolve(this.Is(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Ts(r),s=i<0?0:i;return q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?-1:this.ys-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new un(n,0),i=new un(n,Number.POSITIVE_INFINITY),s=[];return this.ps.forEachInRange([r,i],o=>{const a=this.Is(o.gs);s.push(a)}),q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new _t(Be);return n.forEach(i=>{const s=new un(i,0),o=new un(i,Number.POSITIVE_INFINITY);this.ps.forEachInRange([s,o],a=>{r=r.add(a.gs)})}),q.resolve(this.Es(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;fe.isDocumentKey(s)||(s=s.child(""));const o=new un(new fe(s),0);let a=new _t(Be);return this.ps.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.gs)),!0)},o),q.resolve(this.Es(a))}Es(e){const n=[];return e.forEach(r=>{const i=this.Is(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ae(this.As(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.ps;return q.forEach(n.mutations,i=>{const s=new un(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ps=r})}bn(e){}containsKey(e,n){const r=new un(n,0),i=this.ps.firstAfterOrEqual(r);return q.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}As(e,n){return this.Ts(e)}Ts(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Is(e){const n=this.Ts(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ute{constructor(e){this.Rs=e,this.docs=new qt(fe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Rs(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return q.resolve(r?r.document.mutableCopy():It.newInvalidDocument(n))}getEntries(e,n){let r=gr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():It.newInvalidDocument(i))}),q.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=gr();const o=n.path,a=new fe(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||XE(F2(u),r)<=0||(i.has(u.key)||Ff(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return q.resolve(s)}getAllFromCollectionGroup(e,n,r,i){be()}bs(e,n){return q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new dte(this)}getSize(e){return q.resolve(this.size)}}class dte extends jF{constructor(e){super(),this.Xn=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Xn.addEntry(e,i)):this.Xn.removeEntry(r)}),q.waitFor(n)}getFromCache(e,n){return this.Xn.getEntry(e,n)}getAllFromCache(e,n){return this.Xn.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hte{constructor(e){this.persistence=e,this.vs=new Qo(n=>Ja(n),Lf),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.Ps=0,this.Vs=new dT,this.targetCount=0,this.Ss=rl.Vn()}forEachTarget(e,n){return this.vs.forEach((r,i)=>n(i)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.Ps)}allocateTargetId(e){return this.highestTargetId=this.Ss.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Ps&&(this.Ps=n),q.resolve()}xn(e){this.vs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ss=new rl(n),this.highestTargetId=n),e.sequenceNumber>this.Ps&&(this.Ps=e.sequenceNumber)}addTargetData(e,n){return this.xn(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.xn(n),q.resolve()}removeTargetData(e,n){return this.vs.delete(n.target),this.Vs.ds(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.vs.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.vs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),q.waitFor(s).next(()=>i)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const r=this.vs.get(n)||null;return q.resolve(r)}addMatchingKeys(e,n,r){return this.Vs.hs(n,r),q.resolve()}removeMatchingKeys(e,n,r){this.Vs.fs(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),q.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Vs.ds(n),q.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Vs.ws(n);return q.resolve(r)}containsKey(e,n){return q.resolve(this.Vs.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zF{constructor(e,n){this.Ds={},this.overlays={},this.Cs=new pr(0),this.xs=!1,this.xs=!0,this.referenceDelegate=e(this),this.Ns=new hte(this),this.indexManager=new Xee,this.remoteDocumentCache=function(r){return new ute(r)}(r=>this.referenceDelegate.ks(r)),this.Tt=new DF(n),this.Os=new ate(this.Tt)}start(){return Promise.resolve()}shutdown(){return this.xs=!1,Promise.resolve()}get started(){return this.xs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new lte,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Ds[e.toKey()];return r||(r=new cte(n,this.referenceDelegate),this.Ds[e.toKey()]=r),r}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Os}runTransaction(e,n,r){ie("MemoryPersistence","Starting transaction:",e);const i=new fte(this.Cs.next());return this.referenceDelegate.Ms(),r(i).next(s=>this.referenceDelegate.Fs(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}$s(e,n){return q.or(Object.values(this.Ds).map(r=>()=>r.containsKey(e,n)))}}class fte extends U2{constructor(e){super(),this.currentSequenceNumber=e}}class Dv{constructor(e){this.persistence=e,this.Bs=new dT,this.Ls=null}static qs(e){return new Dv(e)}get Us(){if(this.Ls)return this.Ls;throw be()}addReference(e,n,r){return this.Bs.addReference(r,n),this.Us.delete(r.toString()),q.resolve()}removeReference(e,n,r){return this.Bs.removeReference(r,n),this.Us.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.Us.add(n.toString()),q.resolve()}removeTarget(e,n){this.Bs.ds(n.targetId).forEach(i=>this.Us.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Us.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ms(){this.Ls=new Set}Fs(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.Us,r=>{const i=fe.fromPath(r);return this.Ks(e,i).next(s=>{s||n.removeEntry(i,Ne.min())})}).next(()=>(this.Ls=null,n.apply(e)))}updateLimboDocument(e,n){return this.Ks(e,n).next(r=>{r?this.Us.delete(n.toString()):this.Us.add(n.toString())})}ks(e){return 0}Ks(e,n){return q.or([()=>q.resolve(this.Bs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.$s(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pte{constructor(e){this.Tt=e}$(e,n,r,i){const s=new Iv("createOrUpgrade",n);r<1&&i>=1&&(function(a){a.createObjectStore("owner")}(e),function(a){a.createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",dA,{unique:!0}),a.createObjectStore("documentMutations")}(e),kA(e),function(a){a.createObjectStore("remoteDocuments")}(e));let o=q.resolve();return r<3&&i>=3&&(r!==0&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(e),kA(e)),o=o.next(()=>function(a){const l=a.store("targetGlobal"),c={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ne.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",c)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(a,l){return l.store("mutations").W().next(c=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",dA,{unique:!0});const u=l.store("mutations"),d=c.map(h=>u.put(h));return q.waitFor(d)})}(e,s))),o=o.next(()=>{(function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.Gs(s))),r<6&&i>=6&&(o=o.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(e),this.Qs(s)))),r<7&&i>=7&&(o=o.next(()=>this.js(s))),r<8&&i>=8&&(o=o.next(()=>this.zs(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.Ws(s))),r<11&&i>=11&&(o=o.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(a){const l=a.createObjectStore("documentOverlays",{keyPath:$ee});l.createIndex("collectionPathOverlayIndex",Uee,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",jee,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(a){const l=a.createObjectStore("remoteDocumentsV14",{keyPath:Cee});l.createIndex("documentKeyIndex",kee),l.createIndex("collectionGroupIndex",Aee)}(e)).next(()=>this.Hs(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.Js(e,s))),r<15&&i>=15&&(o=o.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:Oee}).createIndex("sequenceNumberIndex",Lee,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:Mee}).createIndex("documentKeyIndex",Fee,{unique:!1})}(e))),o}Qs(e){let n=0;return e.store("remoteDocuments").X((r,i)=>{n+=Tg(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Gs(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>q.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>q.forEach(a,l=>{Ae(l.userId===s.userId);const c=la(this.Tt,l);return FF(e,s.userId,c).next(()=>{})}))}))}js(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.X((o,a)=>{const l=new at(o),c=function(u){return[0,ir(u)]}(l);s.push(n.get(c).next(u=>u?q.resolve():(d=>n.put({targetId:0,path:ir(d),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>q.waitFor(s))})}zs(e,n){e.createObjectStore("collectionParents",{keyPath:Dee});const r=n.store("collectionParents"),i=new uT,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:ir(l)})}};return n.store("remoteDocuments").X({Z:!0},(o,a)=>{const l=new at(o);return s(l.popLast())}).next(()=>n.store("documentMutations").X({Z:!0},([o,a,l],c)=>{const u=Li(a);return s(u.popLast())}))}Ws(e){const n=e.store("targets");return n.X((r,i)=>{const s=wd(i),o=OF(this.Tt,s);return n.put(o)})}Hs(e,n){const r=n.store("remoteDocuments"),i=[];return r.X((s,o)=>{const a=n.store("remoteDocumentsV14"),l=(c=o,c.document?new fe(at.fromString(c.document.name).popFirst(5)):c.noDocument?fe.fromSegments(c.noDocument.path):c.unknownDocument?fe.fromSegments(c.unknownDocument.path):be()).path.toArray();var c;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(u))}).next(()=>q.waitFor(i))}Js(e,n){const r=n.store("mutations"),i=VF(this.Tt),s=new zF(Dv.qs,this.Tt.oe);return r.W().next(o=>{const a=new Map;return o.forEach(l=>{var c;let u=(c=a.get(l.userId))!==null&&c!==void 0?c:We();la(this.Tt,l).keys().forEach(d=>u=u.add(d)),a.set(l.userId,u)}),q.forEach(a,(l,c)=>{const u=new pn(c),d=Nv.ue(this.Tt,u),h=s.getIndexManager(u),f=Pv.ue(u,this.Tt,h,s.referenceDelegate);return new BF(i,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new j1(n,pr.at),l).next()})})}}function kA(t){t.createObjectStore("targetDocuments",{keyPath:Nee}).createIndex("documentTargetsIndex",Pee,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ree,{unique:!0}),t.createObjectStore("targetGlobal")}const k0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class hT{constructor(e,n,r,i,s,o,a,l,c,u,d=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Ys=s,this.window=o,this.document=a,this.Zs=c,this.Xs=u,this.ti=d,this.Cs=null,this.xs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ei=null,this.inForeground=!1,this.ni=null,this.si=null,this.ii=Number.NEGATIVE_INFINITY,this.ri=h=>Promise.resolve(),!hT.C())throw new ne(Q.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new rte(this,i),this.oi=n+"main",this.Tt=new DF(l),this.ui=new fi(this.oi,this.ti,new pte(this.Tt)),this.Ns=new Zee(this.referenceDelegate,this.Tt),this.remoteDocumentCache=VF(this.Tt),this.Os=new Wee,this.window&&this.window.localStorage?this.ci=this.window.localStorage:(this.ci=null,u===!1&&Yt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ne(Q.FAILED_PRECONDITION,k0);return this.hi(),this.li(),this.fi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ns.getHighestSequenceNumber(e))}).then(e=>{this.Cs=new pr(e,this.Zs)}).then(()=>{this.xs=!0}).catch(e=>(this.ui&&this.ui.close(),Promise.reject(e)))}di(e){return this.ri=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.ui.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ys.enqueueAndForget(async()=>{this.started&&await this.ai()}))}ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Up(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this._i(e).next(n=>{n||(this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)))})}).next(()=>this.wi(e)).next(n=>this.isPrimary&&!n?this.mi(e).next(()=>!1):!!n&&this.gi(e).next(()=>!0))).catch(e=>{if(Ko(e))return ie("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ie("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ys.enqueueRetryable(()=>this.ri(e)),this.isPrimary=e})}_i(e){return nd(e).get("owner").next(n=>q.resolve(this.yi(n)))}pi(e){return Up(e).delete(this.clientId)}async Ii(){if(this.isPrimary&&!this.Ti(this.ii,18e5)){this.ii=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Tn(n,"clientMetadata");return r.W().next(i=>{const s=this.Ei(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return q.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.ci)for(const n of e)this.ci.removeItem(this.Ai(n.clientId))}}fi(){this.si=this.Ys.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ai().then(()=>this.Ii()).then(()=>this.fi()))}yi(e){return!!e&&e.ownerId===this.clientId}wi(e){return this.Xs?q.resolve(!0):nd(e).get("owner").next(n=>{if(n!==null&&this.Ti(n.leaseTimestampMs,5e3)&&!this.Ri(n.ownerId)){if(this.yi(n)&&this.networkEnabled)return!0;if(!this.yi(n)){if(!n.allowTabSynchronization)throw new ne(Q.FAILED_PRECONDITION,k0);return!1}}return!(!this.networkEnabled||!this.inForeground)||Up(e).W().next(r=>this.Ei(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&ie("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.xs=!1,this.bi(),this.si&&(this.si.cancel(),this.si=null),this.vi(),this.Pi(),await this.ui.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new j1(e,pr.at);return this.mi(n).next(()=>this.pi(n))}),this.ui.close(),this.Vi()}Ei(e,n){return e.filter(r=>this.Ti(r.updateTimeMs,n)&&!this.Ri(r.clientId))}Si(){return this.runTransaction("getActiveClients","readonly",e=>Up(e).W().next(n=>this.Ei(n,18e5).map(r=>r.clientId)))}get started(){return this.xs}getMutationQueue(e,n){return Pv.ue(e,this.Tt,n,this.referenceDelegate)}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Jee(e,this.Tt.oe.databaseId)}getDocumentOverlayCache(e){return Nv.ue(this.Tt,e)}getBundleCache(){return this.Os}runTransaction(e,n,r){ie("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=(o=this.ti)===15?Bee:o===14?PF:o===13?NF:o===12?Vee:o===11?RF:void be();var o;let a;return this.ui.runTransaction(e,i,s,l=>(a=new j1(l,this.Cs?this.Cs.next():pr.at),n==="readwrite-primary"?this._i(a).next(c=>!!c||this.wi(a)).next(c=>{if(!c)throw Yt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)),new ne(Q.FAILED_PRECONDITION,$2);return r(a)}).next(c=>this.gi(a).next(()=>c)):this.Di(a).next(()=>r(a)))).then(l=>(a.raiseOnCommittedEvent(),l))}Di(e){return nd(e).get("owner").next(n=>{if(n!==null&&this.Ti(n.leaseTimestampMs,5e3)&&!this.Ri(n.ownerId)&&!this.yi(n)&&!(this.Xs||this.allowTabSynchronization&&n.allowTabSynchronization))throw new ne(Q.FAILED_PRECONDITION,k0)})}gi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return nd(e).put("owner",n)}static C(){return fi.C()}mi(e){const n=nd(e);return n.get("owner").next(r=>this.yi(r)?(ie("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):q.resolve())}Ti(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Yt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}hi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ni=()=>{this.Ys.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.ai()))},this.document.addEventListener("visibilitychange",this.ni),this.inForeground=this.document.visibilityState==="visible")}vi(){this.ni&&(this.document.removeEventListener("visibilitychange",this.ni),this.ni=null)}li(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ei=()=>{this.bi(),r9()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Ys.enterRestrictedMode(!0),this.Ys.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ei))}Pi(){this.ei&&(this.window.removeEventListener("pagehide",this.ei),this.ei=null)}Ri(e){var n;try{const r=((n=this.ci)===null||n===void 0?void 0:n.getItem(this.Ai(e)))!==null;return ie("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Yt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}bi(){if(this.ci)try{this.ci.setItem(this.Ai(this.clientId),String(Date.now()))}catch(e){Yt("Failed to set zombie client id.",e)}}Vi(){if(this.ci)try{this.ci.removeItem(this.Ai(this.clientId))}catch{}}Ai(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function nd(t){return Tn(t,"owner")}function Up(t){return Tn(t,"clientMetadata")}function fT(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ci=r,this.xi=i}static Ni(e,n){let r=We(),i=We();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new pT(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WF{constructor(){this.ki=!1}initialize(e,n){this.Oi=e,this.indexManager=n,this.ki=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Mi(e,n).next(s=>s||this.Fi(e,n,i,r)).next(s=>s||this.$i(e,n))}Mi(e,n){if(tA(n))return q.resolve(null);let r=Tr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Sg(n,null,"F"),r=Tr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=We(...s);return this.Oi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Bi(n,a);return this.Li(n,c,o,l.readTime)?this.Mi(e,Sg(n,null,"F")):this.qi(e,c,n,l)}))})))}Fi(e,n,r,i){return tA(n)||i.isEqual(Ne.min())?this.$i(e,n):this.Oi.getDocuments(e,r).next(s=>{const o=this.Bi(n,s);return this.Li(n,o,r,i)?this.$i(e,n):(A1()<=ot.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),F1(n)),this.qi(e,o,n,M2(i,-1)))})}Bi(e,n){let r=new _t(tF(e));return n.forEach((i,s)=>{Ff(e,s)&&(r=r.add(s))}),r}Li(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}$i(e,n){return A1()<=ot.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",F1(n)),this.Oi.getDocumentsMatchingQuery(e,n,$r.min())}qi(e,n,r,i){return this.Oi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mte{constructor(e,n,r,i){this.persistence=e,this.Ui=n,this.Tt=i,this.Ki=new qt(Be),this.Gi=new Qo(s=>Ja(s),Lf),this.Qi=new Map,this.ji=e.getRemoteDocumentCache(),this.Ns=e.getTargetCache(),this.Os=e.getBundleCache(),this.zi(r)}zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new BF(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ki))}}function HF(t,e,n,r){return new mte(t,e,n,r)}async function GF(t,e){const n=ge(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.zi(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=We();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Wi:c,removedBatchIds:o,addedBatchIds:a}))})})}function gte(t,e){const n=ge(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.ji.newChangeBuffer({trackRemovals:!0});return function(o,a,l,c){const u=l.batch,d=u.keys();let h=q.resolve();return d.forEach(f=>{h=h.next(()=>c.getEntry(a,f)).next(p=>{const y=l.docVersions.get(f);Ae(y!==null),p.version.compareTo(y)<0&&(u.applyToRemoteDocument(p,l),p.isValidDocument()&&(p.setReadTime(l.commitVersion),c.addEntry(p)))})}),h.next(()=>o.mutationQueue.removeMutationBatch(a,u))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=We();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function qF(t){const e=ge(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ns.getLastRemoteSnapshotVersion(n))}function yte(t,e){const n=ge(t),r=e.snapshotVersion;let i=n.Ki;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.ji.newChangeBuffer({trackRemovals:!0});i=n.Ki;const a=[];e.targetChanges.forEach((u,d)=>{const h=i.get(d);if(!h)return;a.push(n.Ns.removeMatchingKeys(s,u.removedDocuments,d).next(()=>n.Ns.addMatchingKeys(s,u.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.has(d)?f=f.withResumeToken(an.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,r)),i=i.insert(d,f),function(p,y,w){return p.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(h,f,u)&&a.push(n.Ns.updateTargetData(s,f))});let l=gr(),c=We();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(KF(s,o,e.documentUpdates).next(u=>{l=u.Hi,c=u.Ji})),!r.isEqual(Ne.min())){const u=n.Ns.getLastRemoteSnapshotVersion(s).next(d=>n.Ns.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return q.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.Ki=i,s))}function KF(t,e,n){let r=We(),i=We();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=gr();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Ne.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ie("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Hi:o,Ji:i}})}function vte(t,e){const n=ge(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function qc(t,e){const n=ge(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ns.getTargetData(r,e).next(s=>s?(i=s,q.resolve(i)):n.Ns.allocateTargetId(r).next(o=>(i=new fo(e,o,0,r.currentSequenceNumber),n.Ns.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ki.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ki=n.Ki.insert(r.targetId,r),n.Gi.set(e,r.targetId)),r})}async function Kc(t,e,n){const r=ge(t),i=r.Ki.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Ko(o))throw o;ie("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ki=r.Ki.remove(e),r.Gi.delete(i.target)}function xg(t,e,n){const r=ge(t);let i=Ne.min(),s=We();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,l,c){const u=ge(a),d=u.Gi.get(c);return d!==void 0?q.resolve(u.Ki.get(d)):u.Ns.getTargetData(l,c)}(r,o,Tr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ns.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Ui.getDocumentsMatchingQuery(o,e,n?i:Ne.min(),n?s:We())).next(a=>(XF(r,eF(e),a),{documents:a,Yi:s})))}function QF(t,e){const n=ge(t),r=ge(n.Ns),i=n.Ki.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ie(s,e).next(o=>o?o.target:null))}function YF(t,e){const n=ge(t),r=n.Qi.get(e)||Ne.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.ji.getAllFromCollectionGroup(i,e,M2(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(XF(n,e,i),i))}function XF(t,e,n){let r=t.Qi.get(e)||Ne.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Qi.set(e,r)}async function _te(t,e,n,r){const i=ge(t);let s=We(),o=gr();for(const c of n){const u=e.Zi(c.metadata.name);c.document&&(s=s.add(u));const d=e.Xi(c);d.setReadTime(e.tr(c.metadata.readTime)),o=o.insert(u,d)}const a=i.ji.newChangeBuffer({trackRemovals:!0}),l=await qc(i,function(c){return Tr(wu(at.fromString(`__bundle__/docs/${c}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>KF(c,a,o).next(u=>(a.apply(c),u)).next(u=>i.Ns.removeMatchingKeysForTargetId(c,l.targetId).next(()=>i.Ns.addMatchingKeys(c,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,u.Hi,u.Ji)).next(()=>u.Hi)))}async function wte(t,e,n=We()){const r=await qc(t,Tr(lT(e.bundledQuery))),i=ge(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Jt(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Os.saveNamedQuery(s,e);const a=r.withResumeToken(an.EMPTY_BYTE_STRING,o);return i.Ki=i.Ki.insert(a.targetId,a),i.Ns.updateTargetData(s,a).next(()=>i.Ns.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ns.addMatchingKeys(s,n,r.targetId)).next(()=>i.Os.saveNamedQuery(s,e))})}function AA(t,e){return`firestore_clients_${t}_${e}`}function RA(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function A0(t,e){return`firestore_targets_${t}_${e}`}class Ig{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static er(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new ne(i.error.code,i.error.message))),o?new Ig(e,n,i.state,s):(Yt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class zd{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static er(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new ne(r.error.code,r.error.message))),s?new zd(e,r.state,i):(Yt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Cg{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static er(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=Rv();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=V2(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new Cg(e,s):(Yt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class mT{constructor(e,n){this.clientId=e,this.onlineState=n}static er(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new mT(n.clientId,n.onlineState):(Yt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class W1{constructor(){this.activeTargetIds=Rv()}sr(e){this.activeTargetIds=this.activeTargetIds.add(e)}ir(e){this.activeTargetIds=this.activeTargetIds.delete(e)}nr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class R0{constructor(e,n,r,i,s){this.window=e,this.Ys=n,this.persistenceKey=r,this.rr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ur=this.cr.bind(this),this.ar=new qt(Be),this.started=!1,this.hr=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.lr=AA(this.persistenceKey,this.rr),this.dr=function(a){return`firestore_sequence_number_${a}`}(this.persistenceKey),this.ar=this.ar.insert(this.rr,new W1),this._r=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.wr=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.mr=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.gr=function(a){return`firestore_online_state_${a}`}(this.persistenceKey),this.yr=function(a){return`firestore_bundle_loaded_v2_${a}`}(this.persistenceKey),this.window.addEventListener("storage",this.ur)}static C(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Si();for(const r of e){if(r===this.rr)continue;const i=this.getItem(AA(this.persistenceKey,r));if(i){const s=Cg.er(r,i);s&&(this.ar=this.ar.insert(s.clientId,s))}}this.pr();const n=this.storage.getItem(this.gr);if(n){const r=this.Ir(n);r&&this.Tr(r)}for(const r of this.hr)this.cr(r);this.hr=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.dr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Er(this.ar)}isActiveQueryTarget(e){let n=!1;return this.ar.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ar(e,"pending")}updateMutationState(e,n,r){this.Ar(e,n,r),this.Rr(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(A0(this.persistenceKey,e));if(r){const i=zd.er(e,r);i&&(n=i.state)}}return this.br.sr(e),this.pr(),n}removeLocalQueryTarget(e){this.br.ir(e),this.pr()}isLocalQueryTarget(e){return this.br.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(A0(this.persistenceKey,e))}updateQueryState(e,n,r){this.vr(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Rr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ur),this.removeItem(this.lr),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return ie("SharedClientState","READ",e,n),n}setItem(e,n){ie("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){ie("SharedClientState","REMOVE",e),this.storage.removeItem(e)}cr(e){const n=e;if(n.storageArea===this.storage){if(ie("SharedClientState","EVENT",n.key,n.newValue),n.key===this.lr)return void Yt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ys.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this._r.test(n.key)){if(n.newValue==null){const r=this.Sr(n.key);return this.Dr(r,null)}{const r=this.Cr(n.key,n.newValue);if(r)return this.Dr(r.clientId,r)}}else if(this.wr.test(n.key)){if(n.newValue!==null){const r=this.Nr(n.key,n.newValue);if(r)return this.kr(r)}}else if(this.mr.test(n.key)){if(n.newValue!==null){const r=this.Or(n.key,n.newValue);if(r)return this.Mr(r)}}else if(n.key===this.gr){if(n.newValue!==null){const r=this.Ir(n.newValue);if(r)return this.Tr(r)}}else if(n.key===this.dr){const r=function(i){let s=pr.at;if(i!=null)try{const o=JSON.parse(i);Ae(typeof o=="number"),s=o}catch(o){Yt("SharedClientState","Failed to read sequence number from WebStorage",o)}return s}(n.newValue);r!==pr.at&&this.sequenceNumberHandler(r)}else if(n.key===this.yr){const r=this.Fr(n.newValue);await Promise.all(r.map(i=>this.syncEngine.$r(i)))}}}else this.hr.push(n)})}}get br(){return this.ar.get(this.rr)}pr(){this.setItem(this.lr,this.br.nr())}Ar(e,n,r){const i=new Ig(this.currentUser,e,n,r),s=RA(this.persistenceKey,this.currentUser,e);this.setItem(s,i.nr())}Rr(e){const n=RA(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Pr(e){const n={clientId:this.rr,onlineState:e};this.storage.setItem(this.gr,JSON.stringify(n))}vr(e,n,r){const i=A0(this.persistenceKey,e),s=new zd(e,n,r);this.setItem(i,s.nr())}Vr(e){const n=JSON.stringify(Array.from(e));this.setItem(this.yr,n)}Sr(e){const n=this._r.exec(e);return n?n[1]:null}Cr(e,n){const r=this.Sr(e);return Cg.er(r,n)}Nr(e,n){const r=this.wr.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Ig.er(new pn(s),i,n)}Or(e,n){const r=this.mr.exec(e),i=Number(r[1]);return zd.er(i,n)}Ir(e){return mT.er(e)}Fr(e){return JSON.parse(e)}async kr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Br(e.batchId,e.state,e.error);ie("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Mr(e){return this.syncEngine.Lr(e.targetId,e.state,e.error)}Dr(e,n){const r=n?this.ar.insert(e,n):this.ar.remove(e),i=this.Er(this.ar),s=this.Er(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.qr(o,a).then(()=>{this.ar=r})}Tr(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Er(e){let n=Rv();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class JF{constructor(){this.Ur=new W1,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}updateQueryState(e,n,r){this.Kr[e]=n}removeLocalQueryTarget(e){this.Ur.ir(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.Kr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new W1,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ste{Gr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(){this.Qr=()=>this.jr(),this.zr=()=>this.Wr(),this.Hr=[],this.Jr()}Gr(e){this.Hr.push(e)}shutdown(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}Jr(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}jr(){ie("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Hr)e(0)}Wr(){ie("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Hr)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bte={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ete{constructor(e){this.Yr=e.Yr,this.Zr=e.Zr}Xr(e){this.eo=e}no(e){this.so=e}onMessage(e){this.io=e}close(){this.Zr()}send(e){this.Yr(e)}ro(){this.eo()}oo(e){this.so(e)}uo(e){this.io(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tte extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.co=n+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get ho(){return!1}lo(e,n,r,i,s){const o=this.fo(e,n);ie("RestConnection","Sending: ",o,r);const a={};return this._o(a,i,s),this.wo(e,o,a,r).then(l=>(ie("RestConnection","Received: ",l),l),l=>{throw jc("RestConnection",`${e} failed with error: `,l,"url: ",o,"request:",r),l})}mo(e,n,r,i,s,o){return this.lo(e,n,r,i,s)}_o(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+_u,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}fo(e,n){const r=bte[e];return`${this.co}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}wo(e,n,r,i){return new Promise((s,o)=>{const a=new bZ;a.setWithCredentials(!0),a.listenOnce(_Z.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case I0.NO_ERROR:const c=a.getResponseJson();ie("Connection","XHR received:",JSON.stringify(c)),s(c);break;case I0.TIMEOUT:ie("Connection",'RPC "'+e+'" timed out'),o(new ne(Q.DEADLINE_EXCEEDED,"Request time out"));break;case I0.HTTP_ERROR:const u=a.getStatus();if(ie("Connection",'RPC "'+e+'" failed with status:',u,"response text:",a.getResponseText()),u>0){let d=a.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const f=function(p){const y=p.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(y)>=0?y:Q.UNKNOWN}(h.status);o(new ne(f,h.message))}else o(new ne(Q.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new ne(Q.UNAVAILABLE,"Connection failed."));break;default:be()}}finally{ie("Connection",'RPC "'+e+'" completed.')}});const l=JSON.stringify(i);a.send(n,"POST",l,r,15)})}yo(e,n,r){const i=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=yZ(),o=vZ(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new SZ({})),this._o(a.initMessageHeaders,n,r),a.encodeInitMessageHeaders=!0;const l=i.join("");ie("Connection","Creating WebChannel: "+l,a);const c=s.createWebChannel(l,a);let u=!1,d=!1;const h=new Ete({Yr:p=>{d?ie("Connection","Not sending because WebChannel is closed:",p):(u||(ie("Connection","Opening WebChannel transport."),c.open(),u=!0),ie("Connection","WebChannel sending:",p),c.send(p))},Zr:()=>c.close()}),f=(p,y,w)=>{p.listen(y,m=>{try{w(m)}catch(g){setTimeout(()=>{throw g},0)}})};return f(c,Op.EventType.OPEN,()=>{d||ie("Connection","WebChannel transport opened.")}),f(c,Op.EventType.CLOSE,()=>{d||(d=!0,ie("Connection","WebChannel transport closed"),h.oo())}),f(c,Op.EventType.ERROR,p=>{d||(d=!0,jc("Connection","WebChannel transport errored:",p),h.oo(new ne(Q.UNAVAILABLE,"The operation could not be completed")))}),f(c,Op.EventType.MESSAGE,p=>{var y;if(!d){const w=p.data[0];Ae(!!w);const m=w,g=m.error||((y=m[0])===null||y===void 0?void 0:y.error);if(g){ie("Connection","WebChannel received error:",g);const v=g.status;let b=function(E){const D=Zt[E];if(D!==void 0)return hF(D)}(v),I=g.message;b===void 0&&(b=Q.INTERNAL,I="Unknown error status: "+v+" with message "+g.message),d=!0,h.oo(new ne(b,I)),c.close()}else ie("Connection","WebChannel received:",w),h.uo(w)}}),f(o,wZ.STAT_EVENT,p=>{p.stat===Vk.PROXY?ie("Connection","Detected buffering proxy"):p.stat===Vk.NOPROXY&&ie("Connection","Detected no buffering proxy")}),setTimeout(()=>{h.ro()},0),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZF(){return typeof window<"u"?window:null}function ym(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vf(t){return new mee(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Ys=e,this.timerId=n,this.po=r,this.Io=i,this.To=s,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}reset(){this.Eo=0}bo(){this.Eo=this.To}vo(e){this.cancel();const n=Math.floor(this.Eo+this.Po()),r=Math.max(0,Date.now()-this.Ro),i=Math.max(0,n-r);i>0&&ie("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Eo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,i,()=>(this.Ro=Date.now(),e())),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}Vo(){this.Ao!==null&&(this.Ao.skipDelay(),this.Ao=null)}cancel(){this.Ao!==null&&(this.Ao.cancel(),this.Ao=null)}Po(){return(Math.random()-.5)*this.Eo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e${constructor(e,n,r,i,s,o,a,l){this.Ys=e,this.So=r,this.Do=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new gT(e,n)}Oo(){return this.state===1||this.state===5||this.Mo()}Mo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Fo()}async stop(){this.Oo()&&await this.close(0)}$o(){this.state=0,this.ko.reset()}Bo(){this.Mo()&&this.xo===null&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,()=>this.Lo()))}qo(e){this.Uo(),this.stream.send(e)}async Lo(){if(this.Mo())return this.close(0)}Uo(){this.xo&&(this.xo.cancel(),this.xo=null)}Ko(){this.No&&(this.No.cancel(),this.No=null)}async close(e,n){this.Uo(),this.Ko(),this.ko.cancel(),this.Co++,e!==4?this.ko.reset():n&&n.code===Q.RESOURCE_EXHAUSTED?(Yt(n.toString()),Yt("Using maximum backoff delay to prevent overloading the backend."),this.ko.bo()):n&&n.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Go(),this.stream.close(),this.stream=null),this.state=e,await this.listener.no(n)}Go(){}auth(){this.state=1;const e=this.Qo(this.Co),n=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Co===n&&this.jo(r,i)},r=>{e(()=>{const i=new ne(Q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.zo(i)})})}jo(e,n){const r=this.Qo(this.Co);this.stream=this.Wo(e,n),this.stream.Xr(()=>{r(()=>(this.state=2,this.No=this.Ys.enqueueAfterDelay(this.Do,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.no(i=>{r(()=>this.zo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Fo(){this.state=5,this.ko.vo(async()=>{this.state=0,this.start()})}zo(e){return ie("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Qo(e){return n=>{this.Ys.enqueueAndForget(()=>this.Co===e?n():(ie("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xte extends e${constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.Tt=s}Wo(e,n){return this.connection.yo("Listen",e,n)}onMessage(e){this.ko.reset();const n=vee(this.Tt,e),r=function(i){if(!("targetChange"in i))return Ne.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?Ne.min():s.readTime?Jt(s.readTime):Ne.min()}(e);return this.listener.Ho(n,r)}Jo(e){const n={};n.database=Uh(this.Tt),n.addTarget=function(i,s){let o;const a=s.target;return o=_g(a)?{documents:EF(i,a)}:{query:TF(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=vF(i,s.resumeToken):s.snapshotVersion.compareTo(Ne.min())>0&&(o.readTime=Gc(i,s.snapshotVersion.toTimestamp())),o}(this.Tt,e);const r=wee(this.Tt,e);r&&(n.labels=r),this.qo(n)}Yo(e){const n={};n.database=Uh(this.Tt),n.removeTarget=e,this.qo(n)}}class Ite extends e${constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.Tt=s,this.Zo=!1}get Xo(){return this.Zo}start(){this.Zo=!1,this.lastStreamToken=void 0,super.start()}Go(){this.Zo&&this.tu([])}Wo(e,n){return this.connection.yo("Write",e,n)}onMessage(e){if(Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Zo){this.ko.reset();const n=_ee(e.writeResults,e.commitTime),r=Jt(e.commitTime);return this.listener.eu(r,n)}return Ae(!e.writeResults||e.writeResults.length===0),this.Zo=!0,this.listener.nu()}su(){const e={};e.database=Uh(this.Tt),this.qo(e)}tu(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>jh(this.Tt,r))};this.qo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cte extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.Tt=i,this.iu=!1}ru(){if(this.iu)throw new ne(Q.FAILED_PRECONDITION,"The client has already been terminated.")}lo(e,n,r){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.lo(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ne(Q.UNKNOWN,i.toString())})}mo(e,n,r,i){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.mo(e,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ne(Q.UNKNOWN,s.toString())})}terminate(){this.iu=!0}}class kte{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}au(){this.ou===0&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.uu=null,this.lu("Backend didn't respond within 10 seconds."),this.hu("Offline"),Promise.resolve())))}fu(e){this.state==="Online"?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.hu("Offline")))}set(e){this.du(),this.ou=0,e==="Online"&&(this.cu=!1),this.hu(e)}hu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}lu(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.cu?(Yt(n),this.cu=!1):ie("OnlineStateTracker",n)}du(){this.uu!==null&&(this.uu.cancel(),this.uu=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ate{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=s,this.yu.Gr(o=>{r.enqueueAndForget(async()=>{Yo(this)&&(ie("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=ge(a);l.mu.add(4),await Eu(l),l.pu.set("Unknown"),l.mu.delete(4),await Bf(l)}(this))})}),this.pu=new kte(r,i)}}async function Bf(t){if(Yo(t))for(const e of t.gu)await e(!0)}async function Eu(t){for(const e of t.gu)await e(!1)}function Ov(t,e){const n=ge(t);n.wu.has(e.targetId)||(n.wu.set(e.targetId,e),_T(n)?vT(n):xu(n).Mo()&&yT(n,e))}function Vh(t,e){const n=ge(t),r=xu(n);n.wu.delete(e),r.Mo()&&t$(n,e),n.wu.size===0&&(r.Mo()?r.Bo():Yo(n)&&n.pu.set("Unknown"))}function yT(t,e){t.Iu.Ft(e.targetId),xu(t).Jo(e)}function t$(t,e){t.Iu.Ft(e),xu(t).Yo(e)}function vT(t){t.Iu=new dee({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ie:e=>t.wu.get(e)||null}),xu(t).start(),t.pu.au()}function _T(t){return Yo(t)&&!xu(t).Oo()&&t.wu.size>0}function Yo(t){return ge(t).mu.size===0}function n$(t){t.Iu=void 0}async function Rte(t){t.wu.forEach((e,n)=>{yT(t,e)})}async function Nte(t,e){n$(t),_T(t)?(t.pu.fu(e),vT(t)):t.pu.set("Unknown")}async function Pte(t,e,n){if(t.pu.set("Online"),e instanceof yF&&e.state===2&&e.cause)try{await async function(r,i){const s=i.cause;for(const o of i.targetIds)r.wu.has(o)&&(await r.remoteSyncer.rejectListen(o,s),r.wu.delete(o),r.Iu.removeTarget(o))}(t,e)}catch(r){ie("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await kg(t,r)}else if(e instanceof mm?t.Iu.Qt(e):e instanceof gF?t.Iu.Zt(e):t.Iu.Wt(e),!n.isEqual(Ne.min()))try{const r=await qF(t.localStore);n.compareTo(r)>=0&&await function(i,s){const o=i.Iu.ee(s);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const c=i.wu.get(l);c&&i.wu.set(l,c.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach(a=>{const l=i.wu.get(a);if(!l)return;i.wu.set(a,l.withResumeToken(an.EMPTY_BYTE_STRING,l.snapshotVersion)),t$(i,a);const c=new fo(l.target,a,1,l.sequenceNumber);yT(i,c)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){ie("RemoteStore","Failed to raise snapshot:",r),await kg(t,r)}}async function kg(t,e,n){if(!Ko(e))throw e;t.mu.add(1),await Eu(t),t.pu.set("Offline"),n||(n=()=>qF(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ie("RemoteStore","Retrying IndexedDB access"),await n(),t.mu.delete(1),await Bf(t)})}function r$(t,e){return e().catch(n=>kg(t,n,e))}async function Tu(t){const e=ge(t),n=Ao(e);let r=e._u.length>0?e._u[e._u.length-1].batchId:-1;for(;Dte(e);)try{const i=await vte(e.localStore,r);if(i===null){e._u.length===0&&n.Bo();break}r=i.batchId,Ote(e,i)}catch(i){await kg(e,i)}i$(e)&&s$(e)}function Dte(t){return Yo(t)&&t._u.length<10}function Ote(t,e){t._u.push(e);const n=Ao(t);n.Mo()&&n.Xo&&n.tu(e.mutations)}function i$(t){return Yo(t)&&!Ao(t).Oo()&&t._u.length>0}function s$(t){Ao(t).start()}async function Lte(t){Ao(t).su()}async function Mte(t){const e=Ao(t);for(const n of t._u)e.tu(n.mutations)}async function Fte(t,e,n){const r=t._u.shift(),i=oT.from(r,e,n);await r$(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Tu(t)}async function $te(t,e){e&&Ao(t).Xo&&await async function(n,r){if(i=r.code,dF(i)&&i!==Q.ABORTED){const s=n._u.shift();Ao(n).$o(),await r$(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Tu(n)}var i}(t,e),i$(t)&&s$(t)}async function PA(t,e){const n=ge(t);n.asyncQueue.verifyOperationInProgress(),ie("RemoteStore","RemoteStore received new credentials");const r=Yo(n);n.mu.add(3),await Eu(n),r&&n.pu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.mu.delete(3),await Bf(n)}async function H1(t,e){const n=ge(t);e?(n.mu.delete(2),await Bf(n)):e||(n.mu.add(2),await Eu(n),n.pu.set("Unknown"))}function xu(t){return t.Tu||(t.Tu=function(e,n,r){const i=ge(e);return i.ru(),new xte(n,i.connection,i.authCredentials,i.appCheckCredentials,i.Tt,r)}(t.datastore,t.asyncQueue,{Xr:Rte.bind(null,t),no:Nte.bind(null,t),Ho:Pte.bind(null,t)}),t.gu.push(async e=>{e?(t.Tu.$o(),_T(t)?vT(t):t.pu.set("Unknown")):(await t.Tu.stop(),n$(t))})),t.Tu}function Ao(t){return t.Eu||(t.Eu=function(e,n,r){const i=ge(e);return i.ru(),new Ite(n,i.connection,i.authCredentials,i.appCheckCredentials,i.Tt,r)}(t.datastore,t.asyncQueue,{Xr:Lte.bind(null,t),no:$te.bind(null,t),nu:Mte.bind(null,t),eu:Fte.bind(null,t)}),t.gu.push(async e=>{e?(t.Eu.$o(),await Tu(t)):(await t.Eu.stop(),t._u.length>0&&(ie("RemoteStore",`Stopping write stream with ${t._u.length} pending writes`),t._u=[]))})),t.Eu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new vn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new wT(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Iu(t,e){if(Yt("AsyncQueue",`${e}: ${t}`),Ko(t))return new ne(Q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e){this.comparator=e?(n,r)=>e(n,r)||fe.comparator(n.key,r.key):(n,r)=>fe.comparator(n.key,r.key),this.keyedMap=_d(),this.sortedSet=new qt(this.comparator)}static emptySet(e){return new yc(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof yc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new yc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(){this.Au=new qt(fe.comparator)}track(e){const n=e.doc.key,r=this.Au.get(n);r?e.type!==0&&r.type===3?this.Au=this.Au.insert(n,e):e.type===3&&r.type!==1?this.Au=this.Au.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Au=this.Au.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Au=this.Au.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Au=this.Au.remove(n):e.type===1&&r.type===2?this.Au=this.Au.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Au=this.Au.insert(n,{type:2,doc:e.doc}):be():this.Au=this.Au.insert(n,e)}Ru(){const e=[];return this.Au.inorderTraversal((n,r)=>{e.push(r)}),e}}class Qc{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Qc(e,n,yc.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ute{constructor(){this.bu=void 0,this.listeners=[]}}class jte{constructor(){this.queries=new Qo(e=>Z2(e),Mf),this.onlineState="Unknown",this.vu=new Set}}async function ST(t,e){const n=ge(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Ute),i)try{s.bu=await n.onListen(r)}catch(o){const a=Iu(o,`Initialization of query '${F1(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.Pu(n.onlineState),s.bu&&e.Vu(s.bu)&&ET(n)}async function bT(t,e){const n=ge(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function Vte(t,e){const n=ge(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.Vu(i)&&(r=!0);o.bu=i}}r&&ET(n)}function Bte(t,e,n){const r=ge(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function ET(t){t.vu.forEach(e=>{e.next()})}class TT{constructor(e,n,r){this.query=e,this.Su=n,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Qc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Du?this.xu(e)&&(this.Su.next(e),n=!0):this.Nu(e,this.onlineState)&&(this.ku(e),n=!0),this.Cu=e,n}onError(e){this.Su.error(e)}Pu(e){this.onlineState=e;let n=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),n=!0),n}Nu(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Ou||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}xu(e){if(e.docChanges.length>0)return!0;const n=this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ku(e){e=Qc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zte{constructor(e,n){this.Mu=e,this.byteLength=n}Fu(){return"metadata"in this.Mu}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e){this.Tt=e}Zi(e){return Ui(this.Tt,e)}Xi(e){return e.metadata.exists?bF(this.Tt,e.document,!1):It.newNoDocument(this.Zi(e.metadata.name),this.tr(e.metadata.readTime))}tr(e){return Jt(e)}}class Wte{constructor(e,n,r){this.$u=e,this.localStore=n,this.Tt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=o$(e)}Bu(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Mu.namedQuery)this.queries.push(e.Mu.namedQuery);else if(e.Mu.documentMetadata){this.documents.push({metadata:e.Mu.documentMetadata}),e.Mu.documentMetadata.exists||++n;const r=at.fromString(e.Mu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Mu.document&&(this.documents[this.documents.length-1].document=e.Mu.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}Lu(e){const n=new Map,r=new OA(this.Tt);for(const i of e)if(i.metadata.queries){const s=r.Zi(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||We()).add(s);n.set(o,a)}}return n}async complete(){const e=await _te(this.localStore,new OA(this.Tt),this.documents,this.$u.id),n=this.Lu(this.documents);for(const r of this.queries)await wte(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,qu:this.collectionGroups,Uu:e}}}function o$(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a${constructor(e){this.key=e}}class l${constructor(e){this.key=e}}class c${constructor(e,n){this.query=e,this.Ku=n,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=We(),this.mutatedKeys=We(),this.ju=tF(e),this.zu=new yc(this.ju)}get Wu(){return this.Ku}Hu(e,n){const r=n?n.Ju:new DA,i=n?n.zu:this.zu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{const h=i.get(u),f=Ff(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),y=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let w=!1;h&&f?h.data.isEqual(f.data)?p!==y&&(r.track({type:3,doc:f}),w=!0):this.Yu(h,f)||(r.track({type:2,doc:f}),w=!0,(l&&this.ju(f,l)>0||c&&this.ju(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),w=!0):h&&!f&&(r.track({type:1,doc:h}),w=!0,(l||c)&&(a=!0)),w&&(f?(o=o.add(f),s=y?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{zu:o,Ju:r,Li:a,mutatedKeys:s}}Yu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;const s=e.Ju.Ru();s.sort((c,u)=>function(d,h){const f=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be()}};return f(d)-f(h)}(c.type,u.type)||this.ju(c.doc,u.doc)),this.Zu(r);const o=n?this.Xu():[],a=this.Qu.size===0&&this.current?1:0,l=a!==this.Gu;return this.Gu=a,s.length!==0||l?{snapshot:new Qc(this.query,e.zu,i,s,e.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),tc:o}:{tc:o}}Pu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new DA,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}ec(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}Zu(e){e&&(e.addedDocuments.forEach(n=>this.Ku=this.Ku.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ku=this.Ku.delete(n)),this.current=e.current)}Xu(){if(!this.current)return[];const e=this.Qu;this.Qu=We(),this.zu.forEach(r=>{this.ec(r.key)&&(this.Qu=this.Qu.add(r.key))});const n=[];return e.forEach(r=>{this.Qu.has(r)||n.push(new l$(r))}),this.Qu.forEach(r=>{e.has(r)||n.push(new a$(r))}),n}nc(e){this.Ku=e.Yi,this.Qu=We();const n=this.Hu(e.documents);return this.applyChanges(n,!0)}sc(){return Qc.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,this.Gu===0,this.hasCachedResults)}}class Hte{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Gte{constructor(e){this.key=e,this.ic=!1}}class qte{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.rc={},this.oc=new Qo(a=>Z2(a),Mf),this.uc=new Map,this.cc=new Set,this.ac=new qt(fe.comparator),this.hc=new Map,this.lc=new dT,this.fc={},this.dc=new Map,this._c=rl.Sn(),this.onlineState="Unknown",this.wc=void 0}get isPrimaryClient(){return this.wc===!0}}async function Kte(t,e){const n=AT(t);let r,i;const s=n.oc.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.sc();else{const o=await qc(n.localStore,Tr(e));n.isPrimaryClient&&Ov(n.remoteStore,o);const a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await xT(n,e,r,a==="current",o.resumeToken)}return i}async function xT(t,e,n,r,i){t.mc=(d,h,f)=>async function(p,y,w,m){let g=y.view.Hu(w);g.Li&&(g=await xg(p.localStore,y.query,!1).then(({documents:I})=>y.view.Hu(I,g)));const v=m&&m.targetChanges.get(y.targetId),b=y.view.applyChanges(g,p.isPrimaryClient,v);return G1(p,y.targetId,b.tc),b.snapshot}(t,d,h,f);const s=await xg(t.localStore,e,!0),o=new c$(e,s.Yi),a=o.Hu(s.documents),l=jf.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);G1(t,n,c.tc);const u=new Hte(e,n,o);return t.oc.set(e,u),t.uc.has(n)?t.uc.get(n).push(e):t.uc.set(n,[e]),c.snapshot}async function Qte(t,e){const n=ge(t),r=n.oc.get(e),i=n.uc.get(r.targetId);if(i.length>1)return n.uc.set(r.targetId,i.filter(s=>!Mf(s,e))),void n.oc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Kc(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Vh(n.remoteStore,r.targetId),Yc(n,r.targetId)}).catch(qo)):(Yc(n,r.targetId),await Kc(n.localStore,r.targetId,!0))}async function Yte(t,e,n){const r=RT(t);try{const i=await function(s,o){const a=ge(s),l=Ft.now(),c=o.reduce((h,f)=>h.add(f.key),We());let u,d;return a.persistence.runTransaction("Locally write mutations","readwrite",h=>{let f=gr(),p=We();return a.ji.getEntries(h,c).next(y=>{f=y,f.forEach((w,m)=>{m.isValidDocument()||(p=p.add(w))})}).next(()=>a.localDocuments.getOverlayedDocuments(h,f)).next(y=>{u=y;const w=[];for(const m of o){const g=see(m,u.get(m.key).overlayedDocument);g!=null&&w.push(new Ds(m.key,g,X2(g.value.mapValue),Lt.exists(!0)))}return a.mutationQueue.addMutationBatch(h,l,w,o)}).next(y=>{d=y;const w=y.applyToLocalDocumentSet(u,p);return a.documentOverlayCache.saveOverlays(h,y.batchId,w)})}).then(()=>({batchId:d.batchId,changes:pF(u)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let l=s.fc[s.currentUser.toKey()];l||(l=new qt(Be)),l=l.insert(o,a),s.fc[s.currentUser.toKey()]=l}(r,i.batchId,n),await Os(r,i.changes),await Tu(r.remoteStore)}catch(i){const s=Iu(i,"Failed to persist write");n.reject(s)}}async function u$(t,e){const n=ge(t);try{const r=await yte(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.hc.get(s);o&&(Ae(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.ic=!0:i.modifiedDocuments.size>0?Ae(o.ic):i.removedDocuments.size>0&&(Ae(o.ic),o.ic=!1))}),await Os(n,r,e)}catch(r){await qo(r)}}function LA(t,e,n){const r=ge(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.oc.forEach((s,o)=>{const a=o.view.Pu(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){const a=ge(s);a.onlineState=o;let l=!1;a.queries.forEach((c,u)=>{for(const d of u.listeners)d.Pu(o)&&(l=!0)}),l&&ET(a)}(r.eventManager,e),i.length&&r.rc.Ho(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Xte(t,e,n){const r=ge(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.hc.get(e),s=i&&i.key;if(s){let o=new qt(fe.comparator);o=o.insert(s,It.newNoDocument(s,Ne.min()));const a=We().add(s),l=new Uf(Ne.min(),new Map,new _t(Be),o,a);await u$(r,l),r.ac=r.ac.remove(s),r.hc.delete(e),kT(r)}else await Kc(r.localStore,e,!1).then(()=>Yc(r,e,n)).catch(qo)}async function Jte(t,e){const n=ge(t),r=e.batch.batchId;try{const i=await gte(n.localStore,e);CT(n,r,null),IT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Os(n,i)}catch(i){await qo(i)}}async function Zte(t,e,n){const r=ge(t);try{const i=await function(s,o){const a=ge(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return a.mutationQueue.lookupMutationBatch(l,o).next(u=>(Ae(u!==null),c=u.keys(),a.mutationQueue.removeMutationBatch(l,u))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,c,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>a.localDocuments.getDocuments(l,c))})}(r.localStore,e);CT(r,e,n),IT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Os(r,i)}catch(i){await qo(i)}}async function ene(t,e){const n=ge(t);Yo(n.remoteStore)||ie("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(s){const o=ge(s);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",a=>o.mutationQueue.getHighestUnacknowledgedBatchId(a))}(n.localStore);if(r===-1)return void e.resolve();const i=n.dc.get(r)||[];i.push(e),n.dc.set(r,i)}catch(r){const i=Iu(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function IT(t,e){(t.dc.get(e)||[]).forEach(n=>{n.resolve()}),t.dc.delete(e)}function CT(t,e,n){const r=ge(t);let i=r.fc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.fc[r.currentUser.toKey()]=i}}function Yc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.uc.get(e))t.oc.delete(r),n&&t.rc.gc(r,n);t.uc.delete(e),t.isPrimaryClient&&t.lc.ds(e).forEach(r=>{t.lc.containsKey(r)||d$(t,r)})}function d$(t,e){t.cc.delete(e.path.canonicalString());const n=t.ac.get(e);n!==null&&(Vh(t.remoteStore,n),t.ac=t.ac.remove(e),t.hc.delete(n),kT(t))}function G1(t,e,n){for(const r of n)r instanceof a$?(t.lc.addReference(r.key,e),tne(t,r)):r instanceof l$?(ie("SyncEngine","Document no longer in limbo: "+r.key),t.lc.removeReference(r.key,e),t.lc.containsKey(r.key)||d$(t,r.key)):be()}function tne(t,e){const n=e.key,r=n.path.canonicalString();t.ac.get(n)||t.cc.has(r)||(ie("SyncEngine","New document in limbo: "+n),t.cc.add(r),kT(t))}function kT(t){for(;t.cc.size>0&&t.ac.size<t.maxConcurrentLimboResolutions;){const e=t.cc.values().next().value;t.cc.delete(e);const n=new fe(at.fromString(e)),r=t._c.next();t.hc.set(r,new Gte(n)),t.ac=t.ac.insert(n,r),Ov(t.remoteStore,new fo(Tr(wu(n.path)),r,2,pr.at))}}async function Os(t,e,n){const r=ge(t),i=[],s=[],o=[];r.oc.isEmpty()||(r.oc.forEach((a,l)=>{o.push(r.mc(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){i.push(c);const u=pT.Ni(l.targetId,c);s.push(u)}}))}),await Promise.all(o),r.rc.Ho(i),await async function(a,l){const c=ge(a);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>q.forEach(l,d=>q.forEach(d.Ci,h=>c.persistence.referenceDelegate.addReference(u,d.targetId,h)).next(()=>q.forEach(d.xi,h=>c.persistence.referenceDelegate.removeReference(u,d.targetId,h)))))}catch(u){if(!Ko(u))throw u;ie("LocalStore","Failed to update sequence numbers: "+u)}for(const u of l){const d=u.targetId;if(!u.fromCache){const h=c.Ki.get(d),f=h.snapshotVersion,p=h.withLastLimboFreeSnapshotVersion(f);c.Ki=c.Ki.insert(d,p)}}}(r.localStore,s))}async function nne(t,e){const n=ge(t);if(!n.currentUser.isEqual(e)){ie("SyncEngine","User change. New user:",e.toKey());const r=await GF(n.localStore,e);n.currentUser=e,function(i,s){i.dc.forEach(o=>{o.forEach(a=>{a.reject(new ne(Q.CANCELLED,s))})}),i.dc.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Os(n,r.Wi)}}function rne(t,e){const n=ge(t),r=n.hc.get(e);if(r&&r.ic)return We().add(r.key);{let i=We();const s=n.uc.get(e);if(!s)return i;for(const o of s){const a=n.oc.get(o);i=i.unionWith(a.view.Wu)}return i}}async function ine(t,e){const n=ge(t),r=await xg(n.localStore,e.query,!0),i=e.view.nc(r);return n.isPrimaryClient&&G1(n,e.targetId,i.tc),i}async function sne(t,e){const n=ge(t);return YF(n.localStore,e).then(r=>Os(n,r))}async function one(t,e,n,r){const i=ge(t),s=await function(o,a){const l=ge(o),c=ge(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",u=>c.An(u,a).next(d=>d?l.localDocuments.getDocuments(u,d):q.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await Tu(i.remoteStore):n==="acknowledged"||n==="rejected"?(CT(i,e,r||null),IT(i,e),function(o,a){ge(ge(o).mutationQueue).bn(a)}(i.localStore,e)):be(),await Os(i,s)):ie("SyncEngine","Cannot apply mutation batch with id: "+e)}async function ane(t,e){const n=ge(t);if(AT(n),RT(n),e===!0&&n.wc!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await MA(n,r.toArray());n.wc=!0,await H1(n.remoteStore,!0);for(const s of i)Ov(n.remoteStore,s)}else if(e===!1&&n.wc!==!1){const r=[];let i=Promise.resolve();n.uc.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Yc(n,o),Kc(n.localStore,o,!0))),Vh(n.remoteStore,o)}),await i,await MA(n,r),function(s){const o=ge(s);o.hc.forEach((a,l)=>{Vh(o.remoteStore,l)}),o.lc._s(),o.hc=new Map,o.ac=new qt(fe.comparator)}(n),n.wc=!1,await H1(n.remoteStore,!1)}}async function MA(t,e,n){const r=ge(t),i=[],s=[];for(const o of e){let a;const l=r.uc.get(o);if(l&&l.length!==0){a=await qc(r.localStore,Tr(l[0]));for(const c of l){const u=r.oc.get(c),d=await ine(r,u);d.snapshot&&s.push(d.snapshot)}}else{const c=await QF(r.localStore,o);a=await qc(r.localStore,c),await xT(r,h$(c),o,!1,a.resumeToken)}i.push(a)}return r.rc.Ho(s),i}function h$(t){return J2(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function lne(t){const e=ge(t);return ge(ge(e.localStore).persistence).Si()}async function cne(t,e,n,r){const i=ge(t);if(i.wc)return void ie("SyncEngine","Ignoring unexpected query state notification.");const s=i.uc.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await YF(i.localStore,eF(s[0])),a=Uf.createSynthesizedRemoteEventForCurrentChange(e,n==="current",an.EMPTY_BYTE_STRING);await Os(i,o,a);break}case"rejected":await Kc(i.localStore,e,!0),Yc(i,e,r);break;default:be()}}async function une(t,e,n){const r=AT(t);if(r.wc){for(const i of e){if(r.uc.has(i)){ie("SyncEngine","Adding an already active target "+i);continue}const s=await QF(r.localStore,i),o=await qc(r.localStore,s);await xT(r,h$(s),o.targetId,!1,o.resumeToken),Ov(r.remoteStore,o)}for(const i of n)r.uc.has(i)&&await Kc(r.localStore,i,!1).then(()=>{Vh(r.remoteStore,i),Yc(r,i)}).catch(qo)}}function AT(t){const e=ge(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=u$.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rne.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Xte.bind(null,e),e.rc.Ho=Vte.bind(null,e.eventManager),e.rc.gc=Bte.bind(null,e.eventManager),e}function RT(t){const e=ge(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Jte.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Zte.bind(null,e),e}function dne(t,e,n){const r=ge(t);(async function(i,s,o){try{const a=await s.getMetadata();if(await function(d,h){const f=ge(d),p=Jt(h.createTime);return f.persistence.runTransaction("hasNewerBundle","readonly",y=>f.Os.getBundleMetadata(y,h.id)).then(y=>!!y&&y.createTime.compareTo(p)>=0)}(i.localStore,a))return await s.close(),o._completeWith(function(d){return{taskState:"Success",documentsLoaded:d.totalDocuments,bytesLoaded:d.totalBytes,totalDocuments:d.totalDocuments,totalBytes:d.totalBytes}}(a)),Promise.resolve(new Set);o._updateProgress(o$(a));const l=new Wte(a,i.localStore,s.Tt);let c=await s.yc();for(;c;){const d=await l.Bu(c);d&&o._updateProgress(d),c=await s.yc()}const u=await l.complete();return await Os(i,u.Uu,void 0),await function(d,h){const f=ge(d);return f.persistence.runTransaction("Save bundle","readwrite",p=>f.Os.saveBundleMetadata(p,h))}(i.localStore,a),o._completeWith(u.progress),Promise.resolve(u.qu)}catch(a){return jc("SyncEngine",`Loading bundle failed with ${a}`),o._failWith(a),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class f${constructor(){this.synchronizeTabs=!1}async initialize(e){this.Tt=Vf(e.databaseInfo.databaseId),this.sharedClientState=this.Ic(e),this.persistence=this.Tc(e),await this.persistence.start(),this.localStore=this.Ec(e),this.gcScheduler=this.Ac(e,this.localStore),this.indexBackfillerScheduler=this.Rc(e,this.localStore)}Ac(e,n){return null}Rc(e,n){return null}Ec(e){return HF(this.persistence,new WF,e.initialUser,this.Tt)}Tc(e){return new zF(Dv.qs,this.Tt)}Ic(e){return new JF}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class p$ extends f${constructor(e,n,r){super(),this.bc=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.bc.initialize(this,e),await RT(this.bc.syncEngine),await Tu(this.bc.remoteStore),await this.persistence.di(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}Ec(e){return HF(this.persistence,new WF,e.initialUser,this.Tt)}Ac(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new tte(r,e.asyncQueue,n)}Rc(e,n){const r=new $Z(n,this.persistence);return new FZ(e.asyncQueue,r)}Tc(e){const n=fT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?cr.withCacheSize(this.cacheSizeBytes):cr.DEFAULT;return new hT(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,ZF(),ym(),this.Tt,this.sharedClientState,!!this.forceOwnership)}Ic(e){return new JF}}class hne extends p${constructor(e,n){super(e,n,!1),this.bc=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.bc.syncEngine;this.sharedClientState instanceof R0&&(this.sharedClientState.syncEngine={Br:one.bind(null,n),Lr:cne.bind(null,n),qr:une.bind(null,n),Si:lne.bind(null,n),$r:sne.bind(null,n)},await this.sharedClientState.start()),await this.persistence.di(async r=>{await ane(this.bc.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Ic(e){const n=ZF();if(!R0.C(n))throw new ne(Q.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=fT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new R0(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class NT{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>LA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=nne.bind(null,this.syncEngine),await H1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new jte}createDatastore(e){const n=Vf(e.databaseInfo.databaseId),r=(i=e.databaseInfo,new Tte(i));var i;return function(s,o,a,l){return new Cte(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>LA(this.syncEngine,a,0),o=NA.C()?new NA:new Ste,new Ate(n,r,i,s,o);var n,r,i,s,o}createSyncEngine(e,n){return function(r,i,s,o,a,l,c){const u=new qte(r,i,s,o,a,l);return c&&(u.wc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=ge(e);ie("RemoteStore","RemoteStore shutting down."),n.mu.add(5),await Eu(n),n.yu.shutdown(),n.pu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.vc(this.observer.next,e)}error(e){this.observer.error?this.vc(this.observer.error,e):Yt("Uncaught Error in snapshot listener:",e.toString())}Pc(){this.muted=!0}vc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fne{constructor(e,n){this.Vc=e,this.Tt=n,this.metadata=new vn,this.buffer=new Uint8Array,this.Sc=new TextDecoder("utf-8"),this.Dc().then(r=>{r&&r.Fu()?this.metadata.resolve(r.Mu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Mu)}`))},r=>this.metadata.reject(r))}close(){return this.Vc.cancel()}async getMetadata(){return this.metadata.promise}async yc(){return await this.getMetadata(),this.Dc()}async Dc(){const e=await this.Cc();if(e===null)return null;const n=this.Sc.decode(e),r=Number(n);isNaN(r)&&this.xc(`length string (${n}) is not valid number`);const i=await this.Nc(r);return new zte(JSON.parse(i),e.length+r)}kc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async Cc(){for(;this.kc()<0&&!await this.Oc(););if(this.buffer.length===0)return null;const e=this.kc();e<0&&this.xc("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Nc(e){for(;this.buffer.length<e;)await this.Oc()&&this.xc("Reached the end of bundle when more is expected.");const n=this.Sc.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}xc(e){throw this.Vc.cancel(),new Error(`Invalid bundle format: ${e}`)}async Oc(){const e=await this.Vc.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pne{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new ne(Q.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=await async function(r,i){const s=ge(r),o=Uh(s.Tt)+"/documents",a={documents:i.map(d=>$h(s.Tt,d))},l=await s.mo("BatchGetDocuments",o,a,i.length),c=new Map;l.forEach(d=>{const h=yee(s.Tt,d);c.set(h.key.toString(),h)});const u=[];return i.forEach(d=>{const h=c.get(d.toString());Ae(!!h),u.push(h)}),u}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new bu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=fe.fromPath(r);this.mutations.push(new rT(i,this.precondition(i)))}),await async function(n,r){const i=ge(n),s=Uh(i.Tt)+"/documents",o={writes:r.map(a=>jh(i.Tt,a))};await i.lo("Commit",s,o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw be();n=Ne.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new ne(Q.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Ne.min())?Lt.exists(!1):Lt.updateTime(n):Lt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Ne.min()))throw new ne(Q.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Lt.updateTime(n)}return Lt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mne{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Mc=r.maxAttempts,this.ko=new gT(this.asyncQueue,"transaction_retry")}run(){this.Mc-=1,this.Fc()}Fc(){this.ko.vo(async()=>{const e=new pne(this.datastore),n=this.$c(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Bc(i)}))}).catch(r=>{this.Bc(r)})})}$c(e){try{const n=this.updateFunction(e);return!Of(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Bc(e){this.Mc>0&&this.Lc(e)?(this.Mc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Fc(),Promise.resolve()))):this.deferred.reject(e)}Lc(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!dF(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gne{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=pn.UNAUTHENTICATED,this.clientId=D2.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{ie("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(ie("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ne(Q.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Iu(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function m$(t,e){t.asyncQueue.verifyOperationInProgress(),ie("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await GF(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function g$(t,e){t.asyncQueue.verifyOperationInProgress();const n=await PT(t);ie("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>PA(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>PA(e.remoteStore,s)),t.onlineComponents=e}async function PT(t){return t.offlineComponents||(ie("FirestoreClient","Using default OfflineComponentProvider"),await m$(t,new f$)),t.offlineComponents}async function Mv(t){return t.onlineComponents||(ie("FirestoreClient","Using default OnlineComponentProvider"),await g$(t,new NT)),t.onlineComponents}function y$(t){return PT(t).then(e=>e.persistence)}function DT(t){return PT(t).then(e=>e.localStore)}function v$(t){return Mv(t).then(e=>e.remoteStore)}function OT(t){return Mv(t).then(e=>e.syncEngine)}function yne(t){return Mv(t).then(e=>e.datastore)}async function Xc(t){const e=await Mv(t),n=e.eventManager;return n.onListen=Kte.bind(null,e.syncEngine),n.onUnlisten=Qte.bind(null,e.syncEngine),n}function vne(t){return t.asyncQueue.enqueue(async()=>{const e=await y$(t),n=await v$(t);return e.setNetworkEnabled(!0),function(r){const i=ge(r);return i.mu.delete(0),Bf(i)}(n)})}function _ne(t){return t.asyncQueue.enqueue(async()=>{const e=await y$(t),n=await v$(t);return e.setNetworkEnabled(!1),async function(r){const i=ge(r);i.mu.add(0),await Eu(i),i.pu.set("Offline")}(n)})}function wne(t,e){const n=new vn;return t.asyncQueue.enqueueAndForget(async()=>async function(r,i,s){try{const o=await function(a,l){const c=ge(a);return c.persistence.runTransaction("read document","readonly",u=>c.localDocuments.getDocument(u,l))}(r,i);o.isFoundDocument()?s.resolve(o):o.isNoDocument()?s.resolve(null):s.reject(new ne(Q.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const a=Iu(o,`Failed to get document '${i} from cache`);s.reject(a)}}(await DT(t),e,n)),n.promise}function _$(t,e,n={}){const r=new vn;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,l){const c=new Lv({next:d=>{s.enqueueAndForget(()=>bT(i,u));const h=d.docs.has(o);!h&&d.fromCache?l.reject(new ne(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&a&&a.source==="server"?l.reject(new ne(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),u=new TT(wu(o.path),c,{includeMetadataChanges:!0,Ou:!0});return ST(i,u)}(await Xc(t),t.asyncQueue,e,n,r)),r.promise}function Sne(t,e){const n=new vn;return t.asyncQueue.enqueueAndForget(async()=>async function(r,i,s){try{const o=await xg(r,i,!0),a=new c$(i,o.Yi),l=a.Hu(o.documents),c=a.applyChanges(l,!1);s.resolve(c.snapshot)}catch(o){const a=Iu(o,`Failed to execute query '${i} against cache`);s.reject(a)}}(await DT(t),e,n)),n.promise}function w$(t,e,n={}){const r=new vn;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,l){const c=new Lv({next:d=>{s.enqueueAndForget(()=>bT(i,u)),d.fromCache&&a.source==="server"?l.reject(new ne(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),u=new TT(o,c,{includeMetadataChanges:!0,Ou:!0});return ST(i,u)}(await Xc(t),t.asyncQueue,e,n,r)),r.promise}function bne(t,e){const n=new Lv(e);return t.asyncQueue.enqueueAndForget(async()=>function(r,i){ge(r).vu.add(i),i.next()}(await Xc(t),n)),()=>{n.Pc(),t.asyncQueue.enqueueAndForget(async()=>function(r,i){ge(r).vu.delete(i)}(await Xc(t),n))}}function Ene(t,e,n,r){const i=function(s,o){let a;return a=typeof s=="string"?new TextEncoder().encode(s):s,function(l,c){return new fne(l,c)}(function(l,c){if(l instanceof Uint8Array)return FA(l,c);if(l instanceof ArrayBuffer)return FA(new Uint8Array(l),c);if(l instanceof ReadableStream)return l.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(a),o)}(n,Vf(e));t.asyncQueue.enqueueAndForget(async()=>{dne(await OT(t),i,r)})}function Tne(t,e){return t.asyncQueue.enqueue(async()=>function(n,r){const i=ge(n);return i.persistence.runTransaction("Get named query","readonly",s=>i.Os.getNamedQuery(s,r))}(await DT(t),e))}const $A=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(t,e,n){if(!n)throw new ne(Q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function S$(t,e,n,r){if(e===!0&&r===!0)throw new ne(Q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function UA(t){if(!fe.isDocumentKey(t))throw new ne(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function jA(t){if(fe.isDocumentKey(t))throw new ne(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Fv(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":be()}function ct(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ne(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Fv(t);throw new ne(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function b$(t,e){if(e<=0)throw new ne(Q.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new ne(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ne(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,S$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new VA({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ne(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new ne(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new VA(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new xZ;switch(n.type){case"gapi":const r=n.client;return new AZ(r,n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ne(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=$A.get(e);n&&(ie("ComponentProvider","Removing Datastore"),$A.delete(e),n.terminate())}(this),Promise.resolve()}}function xne(t,e,n,r={}){var i;const s=(t=ct(t,zf))._getSettings();if(s.host!=="firestore.googleapis.com"&&s.host!==e&&jc("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${n}`,ssl:!1})),r.mockUserToken){let o,a;if(typeof r.mockUserToken=="string")o=r.mockUserToken,a=pn.MOCK_USER;else{o=sE(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new ne(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new pn(l)}t._authCredentials=new IZ(new P2(o,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ji(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new At(this.firestore,e,this._key)}}class Ln{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ln(this.firestore,e,this._query)}}class ji extends Ln{constructor(e,n,r){super(e,n,wu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new At(this.firestore,null,new fe(e))}withConverter(e){return new ji(this.firestore,e,this._path)}}function E$(t,e,...n){if(t=me(t),LT("collection","path",e),t instanceof zf){const r=at.fromString(e,...n);return jA(r),new ji(t,null,r)}{if(!(t instanceof At||t instanceof ji))throw new ne(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(at.fromString(e,...n));return jA(r),new ji(t.firestore,null,r)}}function Ine(t,e){if(t=ct(t,zf),LT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ne(Q.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ln(t,null,function(n){return new Ps(at.emptyPath(),n)}(e))}function Es(t,e,...n){if(t=me(t),arguments.length===1&&(e=D2.R()),LT("doc","path",e),t instanceof zf){const r=at.fromString(e,...n);return UA(r),new At(t,null,new fe(r))}{if(!(t instanceof At||t instanceof ji))throw new ne(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(at.fromString(e,...n));return UA(r),new At(t.firestore,t instanceof ji?t.converter:null,new fe(r))}}function T$(t,e){return t=me(t),e=me(e),(t instanceof At||t instanceof ji)&&(e instanceof At||e instanceof ji)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function x$(t,e){return t=me(t),e=me(e),t instanceof Ln&&e instanceof Ln&&t.firestore===e.firestore&&Mf(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cne{constructor(){this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new gT(this,"async_queue_retry"),this.Hc=()=>{const n=ym();n&&ie("AsyncQueue","Visibility state changed to "+n.visibilityState),this.ko.Vo()};const e=ym();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Hc)}get isShuttingDown(){return this.Kc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Jc(),this.Yc(e)}enterRestrictedMode(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;const n=ym();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Hc)}}enqueue(e){if(this.Jc(),this.Kc)return new Promise(()=>{});const n=new vn;return this.Yc(()=>this.Kc&&this.zc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Uc.push(e),this.Zc()))}async Zc(){if(this.Uc.length!==0){try{await this.Uc[0](),this.Uc.shift(),this.ko.reset()}catch(e){if(!Ko(e))throw e;ie("AsyncQueue","Operation failed with retryable error: "+e)}this.Uc.length>0&&this.ko.vo(()=>this.Zc())}}Yc(e){const n=this.qc.then(()=>(this.jc=!0,e().catch(r=>{this.Qc=r,this.jc=!1;const i=function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),o}(r);throw Yt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.jc=!1,r))));return this.qc=n,n}enqueueAfterDelay(e,n,r){this.Jc(),this.Wc.indexOf(e)>-1&&(n=0);const i=wT.createAndSchedule(this,e,n,r,s=>this.Xc(s));return this.Gc.push(i),i}Jc(){this.Qc&&be()}verifyOperationInProgress(){}async ta(){let e;do e=this.qc,await e;while(e!==this.qc)}ea(e){for(const n of this.Gc)if(n.timerId===e)return!0;return!1}na(e){return this.ta().then(()=>{this.Gc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Gc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ta()})}sa(e){this.Wc.push(e)}Xc(e){const n=this.Gc.indexOf(e);this.Gc.splice(n,1)}}function q1(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const i of n)if(i in r&&typeof r[i]=="function")return!0;return!1}(t,["next","error","complete"])}class kne{constructor(){this._progressObserver={},this._taskCompletionResolver=new vn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ane=-1;class Kt extends zf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Cne,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||I$(this),this._firestoreClient.terminate()}}function xn(t){return t._firestoreClient||I$(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function I$(t){var e;const n=t._freezeSettings(),r=function(i,s,o,a){return new UZ(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new gne(t._authCredentials,t._appCheckCredentials,t._queue,r)}function Rne(t,e){k$(t=ct(t,Kt));const n=xn(t),r=t._freezeSettings(),i=new NT;return C$(n,i,new p$(i,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function Nne(t){k$(t=ct(t,Kt));const e=xn(t),n=t._freezeSettings(),r=new NT;return C$(e,r,new hne(r,n.cacheSizeBytes))}function C$(t,e,n){const r=new vn;return t.asyncQueue.enqueue(async()=>{try{await m$(t,n),await g$(t,e),r.resolve()}catch(i){const s=i;if(!function(o){return o.name==="FirebaseError"?o.code===Q.FAILED_PRECONDITION||o.code===Q.UNIMPLEMENTED:typeof DOMException<"u"&&o instanceof DOMException?o.code===22||o.code===20||o.code===11:!0}(s))throw s;jc("Error enabling offline persistence. Falling back to persistence disabled: "+s),r.reject(s)}}).then(()=>r.promise)}function Pne(t){if(t._initialized&&!t._terminated)throw new ne(Q.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new vn;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(n){if(!fi.C())return Promise.resolve();const r=n+"main";await fi.delete(r)}(fT(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function Dne(t){return function(e){const n=new vn;return e.asyncQueue.enqueueAndForget(async()=>ene(await OT(e),n)),n.promise}(xn(t=ct(t,Kt)))}function One(t){return vne(xn(t=ct(t,Kt)))}function Lne(t){return _ne(xn(t=ct(t,Kt)))}function Mne(t,e){const n=xn(t=ct(t,Kt)),r=new kne;return Ene(n,t._databaseId,e,r),r}function Fne(t,e){return Tne(xn(t=ct(t,Kt)),e).then(n=>n?new Ln(t,null,n.query):null)}function k$(t){if(t._initialized||t._terminated)throw new ne(Q.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gi(an.fromBase64String(e))}catch(n){throw new ne(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Gi(an.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ne(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ne(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ne(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $ne=/^__.*__$/;class Une{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ds(e,this.data,this.fieldMask,n,this.fieldTransforms):new Su(e,this.data,n,this.fieldTransforms)}}class A${constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ds(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function R$(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be()}}class Uv{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.Tt=r,this.ignoreUndefinedProperties=i,s===void 0&&this.ia(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ra(){return this.settings.ra}oa(e){return new Uv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ua(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.oa({path:r,ca:!1});return i.aa(e),i}ha(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.oa({path:r,ca:!1});return i.ia(),i}la(e){return this.oa({path:void 0,ca:!0})}fa(e){return Ag(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}ia(){if(this.path)for(let e=0;e<this.path.length;e++)this.aa(this.path.get(e))}aa(e){if(e.length===0)throw this.fa("Document fields must not be empty");if(R$(this.ra)&&$ne.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}class jne{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.Tt=r||Vf(e)}wa(e,n,r,i=!1){return new Uv({ra:e,methodName:n,_a:r,path:Xt.emptyPath(),ca:!1,da:i},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}function bl(t){const e=t._freezeSettings(),n=Vf(t._databaseId);return new jne(t._databaseId,!!e.ignoreUndefinedProperties,n)}function jv(t,e,n,r,i,s={}){const o=t.wa(s.merge||s.mergeFields?2:0,e,n,i);UT("Data must be an object, but it was:",o,r);const a=D$(r,o);let l,c;if(s.merge)l=new mr(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const d of s.mergeFields){const h=K1(e,d,n);if(!o.contains(h))throw new ne(Q.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);L$(u,h)||u.push(h)}l=new mr(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new Une(new An(a),l,c)}class Wf extends Sl{_toFieldTransform(e){if(e.ra!==2)throw e.ra===1?e.fa(`${this._methodName}() can only appear at the top level of your update data`):e.fa(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Wf}}function N$(t,e,n){return new Uv({ra:3,_a:e.settings._a,methodName:t._methodName,ca:n},e.databaseId,e.Tt,e.ignoreUndefinedProperties)}class MT extends Sl{_toFieldTransform(e){return new $f(e.path,new Wc)}isEqual(e){return e instanceof MT}}class Vne extends Sl{constructor(e,n){super(e),this.ma=n}_toFieldTransform(e){const n=N$(this,e,!0),r=this.ma.map(s=>El(s,n)),i=new Za(r);return new $f(e.path,i)}isEqual(e){return this===e}}class Bne extends Sl{constructor(e,n){super(e),this.ma=n}_toFieldTransform(e){const n=N$(this,e,!0),r=this.ma.map(s=>El(s,n)),i=new el(r);return new $f(e.path,i)}isEqual(e){return this===e}}class zne extends Sl{constructor(e,n){super(e),this.ga=n}_toFieldTransform(e){const n=new Hc(e.Tt,iF(e.Tt,this.ga));return new $f(e.path,n)}isEqual(e){return this===e}}function FT(t,e,n,r){const i=t.wa(1,e,n);UT("Data must be an object, but it was:",i,r);const s=[],o=An.empty();wl(r,(l,c)=>{const u=jT(e,l,n);c=me(c);const d=i.ha(u);if(c instanceof Wf)s.push(u);else{const h=El(c,d);h!=null&&(s.push(u),o.set(u,h))}});const a=new mr(s);return new A$(o,a,i.fieldTransforms)}function $T(t,e,n,r,i,s){const o=t.wa(1,e,n),a=[K1(e,r,n)],l=[i];if(s.length%2!=0)throw new ne(Q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(K1(e,s[h])),l.push(s[h+1]);const c=[],u=An.empty();for(let h=a.length-1;h>=0;--h)if(!L$(c,a[h])){const f=a[h];let p=l[h];p=me(p);const y=o.ha(f);if(p instanceof Wf)c.push(f);else{const w=El(p,y);w!=null&&(c.push(f),u.set(f,w))}}const d=new mr(c);return new A$(u,d,o.fieldTransforms)}function P$(t,e,n,r=!1){return El(n,t.wa(r?4:3,e))}function El(t,e){if(O$(t=me(t)))return UT("Unsupported field value:",e,t),D$(t,e);if(t instanceof Sl)return function(n,r){if(!R$(r.ra))throw r.fa(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.fa(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.ca&&e.ra!==4)throw e.fa("Nested arrays are not supported");return function(n,r){const i=[];let s=0;for(const o of n){let a=El(o,r.la(s));a==null&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if((n=me(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return iF(r.Tt,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Ft.fromDate(n);return{timestampValue:Gc(r.Tt,i)}}if(n instanceof Ft){const i=new Ft(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Gc(r.Tt,i)}}if(n instanceof $v)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Gi)return{bytesValue:vF(r.Tt,n._byteString)};if(n instanceof At){const i=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw r.fa(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:iT(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.fa(`Unsupported field value: ${Fv(n)}`)}(t,e)}function D$(t,e){const n={};return j2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wl(t,(r,i)=>{const s=El(i,e.ua(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function O$(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ft||t instanceof $v||t instanceof Gi||t instanceof At||t instanceof Sl)}function UT(t,e,n){if(!O$(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=Fv(n);throw r==="an object"?e.fa(t+" a custom object"):e.fa(t+" "+r)}}function K1(t,e,n){if((e=me(e))instanceof Ro)return e._internalPath;if(typeof e=="string")return jT(t,e);throw Ag("Field path arguments must be of type string or ",t,!1,void 0,n)}const Wne=new RegExp("[~\\*/\\[\\]]");function jT(t,e,n){if(e.search(Wne)>=0)throw Ag(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ro(...e.split("."))._internalPath}catch{throw Ag(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ag(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new ne(Q.INVALID_ARGUMENT,a+t+l)}function L$(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new At(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Hne(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Vv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Hne extends Bh{data(){return super.data()}}function Vv(t,e){return typeof e=="string"?jT(t,e):e instanceof Ro?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M$(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ne(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class VT{}class Hf extends VT{}function js(t,e,...n){let r=[];e instanceof VT&&r.push(e),r=r.concat(n),function(i){const s=i.filter(a=>a instanceof BT).length,o=i.filter(a=>a instanceof Bv).length;if(s>1||s>0&&o>0)throw new ne(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Bv extends Hf{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Bv(e,n,r)}_apply(e){const n=this._parse(e);return $$(e._query,n),new Ln(e.firestore,e.converter,M1(e._query,n))}_parse(e){const n=bl(e.firestore);return function(i,s,o,a,l,c,u){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new ne(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){zA(u,c);const h=[];for(const f of u)h.push(BA(a,i,f));d={arrayValue:{values:h}}}else d=BA(a,i,u)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||zA(u,c),d=P$(o,s,u,c==="in"||c==="not-in");return tt.create(l,c,d)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Gne(t,e,n){const r=e,i=Vv("where",t);return Bv._create(i,r,n)}class BT extends VT{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new BT(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:mt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let s=r;const o=i.getFlattenedFilters();for(const a of o)$$(s,a),s=M1(s,a)}(e._query,n),new Ln(e.firestore,e.converter,M1(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class zT extends Hf{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new zT(e,n)}_apply(e){const n=function(r,i,s){if(r.startAt!==null)throw new ne(Q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new ne(Q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new gc(i,s);return function(a,l){if(tT(a)===null){const c=Cv(a);c!==null&&U$(a,c,l.field)}}(r,o),o}(e._query,this._field,this._direction);return new Ln(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new Ps(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function qne(t,e="asc"){const n=e,r=Vv("orderBy",t);return zT._create(r,n)}class zv extends Hf{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new zv(e,n,r)}_apply(e){return new Ln(e.firestore,e.converter,Sg(e._query,this._limit,this._limitType))}}function Kne(t){return b$("limit",t),zv._create("limit",t,"F")}function Qne(t){return b$("limitToLast",t),zv._create("limitToLast",t,"L")}class Wv extends Hf{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Wv(e,n,r)}_apply(e){const n=F$(e,this.type,this._docOrFields,this._inclusive);return new Ln(e.firestore,e.converter,function(r,i){return new Ps(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)}(e._query,n))}}function Yne(...t){return Wv._create("startAt",t,!0)}function Xne(...t){return Wv._create("startAfter",t,!1)}class Hv extends Hf{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Hv(e,n,r)}_apply(e){const n=F$(e,this.type,this._docOrFields,this._inclusive);return new Ln(e.firestore,e.converter,function(r,i){return new Ps(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)}(e._query,n))}}function Jne(...t){return Hv._create("endBefore",t,!1)}function Zne(...t){return Hv._create("endAt",t,!0)}function F$(t,e,n,r){if(n[0]=me(n[0]),n[0]instanceof Bh)return function(i,s,o,a,l){if(!a)throw new ne(Q.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const c=[];for(const u of Pa(i))if(u.field.isKeyField())c.push(Xa(s,a.key));else{const d=a.data.field(u.field);if(ZE(d))throw new ne(Q.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(d===null){const h=u.field.canonicalString();throw new ne(Q.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${h}' (used as the orderBy) does not exist.`)}c.push(d)}return new ko(c,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=bl(t.firestore);return function(s,o,a,l,c,u){const d=s.explicitOrderBy;if(c.length>d.length)throw new ne(Q.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const h=[];for(let f=0;f<c.length;f++){const p=c[f];if(d[f].field.isKeyField()){if(typeof p!="string")throw new ne(Q.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof p}`);if(!nT(s)&&p.indexOf("/")!==-1)throw new ne(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${p}' contains a slash.`);const y=s.path.child(at.fromString(p));if(!fe.isDocumentKey(y))throw new ne(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${y}' is not because it contains an odd number of segments.`);const w=new fe(y);h.push(Xa(o,w))}else{const y=P$(a,l,p);h.push(y)}}return new ko(h,u)}(t._query,t.firestore._databaseId,i,e,n,r)}}function BA(t,e,n){if(typeof(n=me(n))=="string"){if(n==="")throw new ne(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nT(e)&&n.indexOf("/")!==-1)throw new ne(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(at.fromString(n));if(!fe.isDocumentKey(r))throw new ne(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Xa(t,new fe(r))}if(n instanceof At)return Xa(t,n._key);throw new ne(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fv(n)}.`)}function zA(t,e){if(!Array.isArray(t)||t.length===0)throw new ne(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $$(t,e){if(e.isInequality()){const r=Cv(t),i=e.field;if(r!==null&&!r.isEqual(i))throw new ne(Q.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=tT(t);s!==null&&U$(t,i,s)}const n=function(r,i){for(const s of r)for(const o of s.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ne(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ne(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function U$(t,e,n){if(!n.isEqual(e))throw new ne(Q.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class WT{convertValue(e,n="none"){switch(Ya(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Qa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw be()}}convertObject(e,n){const r={};return wl(e.fields,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new $v(Ht(e.latitude),Ht(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=B2(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Lh(e));default:return null}}convertTimestamp(e){const n=Io(e);return new Ft(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=at.fromString(e);Ae(kF(r));const i=new xo(r.get(1),r.get(3)),s=new fe(r.popFirst(5));return i.isEqual(n)||Yt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ere extends WT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new At(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ts extends Bh{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Wd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Vv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Wd extends Ts{data(e={}){return super.data(e)}}class No{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new wa(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Wd(this._firestore,this._userDataWriter,r.key,r,new wa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ne(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>{const a=new Wd(r._firestore,r._userDataWriter,o.doc.key,o.doc,new wa(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const a=new Wd(r._firestore,r._userDataWriter,o.doc.key,o.doc,new wa(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let l=-1,c=-1;return o.type!==0&&(l=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),c=s.indexOf(o.doc.key)),{type:tre(o.type),doc:a,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function tre(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be()}}function j$(t,e){return t instanceof Ts&&e instanceof Ts?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof No&&e instanceof No&&t._firestore===e._firestore&&x$(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zh(t){t=ct(t,At);const e=ct(t.firestore,Kt);return _$(xn(e),t._key).then(n=>HT(e,t,n))}class Tl extends WT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new At(this.firestore,null,n)}}function nre(t){t=ct(t,At);const e=ct(t.firestore,Kt),n=xn(e),r=new Tl(e);return wne(n,t._key).then(i=>new Ts(e,r,t._key,i,new wa(i!==null&&i.hasLocalMutations,!0),t.converter))}function rre(t){t=ct(t,At);const e=ct(t.firestore,Kt);return _$(xn(e),t._key,{source:"server"}).then(n=>HT(e,t,n))}function ire(t){t=ct(t,Ln);const e=ct(t.firestore,Kt),n=xn(e),r=new Tl(e);return M$(t._query),w$(n,t._query).then(i=>new No(e,r,t,i))}function sre(t){t=ct(t,Ln);const e=ct(t.firestore,Kt),n=xn(e),r=new Tl(e);return Sne(n,t._query).then(i=>new No(e,r,t,i))}function ore(t){t=ct(t,Ln);const e=ct(t.firestore,Kt),n=xn(e),r=new Tl(e);return w$(n,t._query,{source:"server"}).then(i=>new No(e,r,t,i))}function WA(t,e,n){t=ct(t,At);const r=ct(t.firestore,Kt),i=Gv(t.converter,e,n);return Gf(r,[jv(bl(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Lt.none())])}function il(t,e,n,...r){t=ct(t,At);const i=ct(t.firestore,Kt),s=bl(i);let o;return o=typeof(e=me(e))=="string"||e instanceof Ro?$T(s,"updateDoc",t._key,e,n,r):FT(s,"updateDoc",t._key,e),Gf(i,[o.toMutation(t._key,Lt.exists(!0))])}function V$(t){return Gf(ct(t.firestore,Kt),[new bu(t._key,Lt.none())])}function are(t,e){const n=ct(t.firestore,Kt),r=Es(t),i=Gv(t.converter,e);return Gf(n,[jv(bl(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Lt.exists(!1))]).then(()=>r)}function Jc(t,...e){var n,r,i;t=me(t);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||q1(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(q1(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let l,c,u;if(t instanceof At)c=ct(t.firestore,Kt),u=wu(t._key.path),l={next:d=>{e[o]&&e[o](HT(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=ct(t,Ln);c=ct(d.firestore,Kt),u=d._query;const h=new Tl(c);l={next:f=>{e[o]&&e[o](new No(c,h,d,f))},error:e[o+1],complete:e[o+2]},M$(t._query)}return function(d,h,f,p){const y=new Lv(p),w=new TT(h,y,f);return d.asyncQueue.enqueueAndForget(async()=>ST(await Xc(d),w)),()=>{y.Pc(),d.asyncQueue.enqueueAndForget(async()=>bT(await Xc(d),w))}}(xn(c),u,a,l)}function lre(t,e){return bne(xn(t=ct(t,Kt)),q1(e)?e:{next:e})}function Gf(t,e){return function(n,r){const i=new vn;return n.asyncQueue.enqueueAndForget(async()=>Yte(await OT(n),r,i)),i.promise}(xn(t),e)}function HT(t,e,n){const r=n.docs.get(e._key),i=new Tl(t);return new Ts(t,i,e._key,r,new wa(n.hasPendingWrites,n.fromCache),e.converter)}const cre={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ure{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=bl(e)}set(e,n,r){this._verifyNotCommitted();const i=qs(e,this._firestore),s=Gv(i.converter,n,r),o=jv(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Lt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=qs(e,this._firestore);let o;return o=typeof(n=me(n))=="string"||n instanceof Ro?$T(this._dataReader,"WriteBatch.update",s._key,n,r,i):FT(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Lt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=qs(e,this._firestore);return this._mutations=this._mutations.concat(new bu(n._key,Lt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ne(Q.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function qs(t,e){if((t=me(t)).firestore!==e)throw new ne(Q.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dre extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=bl(e)}get(e){const n=qs(e,this._firestore),r=new ere(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return be();const s=i[0];if(s.isFoundDocument())return new Bh(this._firestore,r,s.key,s,n.converter);if(s.isNoDocument())return new Bh(this._firestore,r,n._key,null,n.converter);throw be()})}set(e,n,r){const i=qs(e,this._firestore),s=Gv(i.converter,n,r),o=jv(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,o),this}update(e,n,r,...i){const s=qs(e,this._firestore);let o;return o=typeof(n=me(n))=="string"||n instanceof Ro?$T(this._dataReader,"Transaction.update",s._key,n,r,i):FT(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,o),this}delete(e){const n=qs(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=qs(e,this._firestore),r=new Tl(this._firestore);return super.get(e).then(i=>new Ts(this._firestore,r,n._key,i._document,new wa(!1,!1),n.converter))}}function hre(t,e,n){t=ct(t,Kt);const r=Object.assign(Object.assign({},cre),n);return function(i){if(i.maxAttempts<1)throw new ne(Q.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,s,o){const a=new vn;return i.asyncQueue.enqueueAndForget(async()=>{const l=await yne(i);new mne(i.asyncQueue,l,o,s,a).run()}),a.promise}(xn(t),i=>e(new dre(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fre(){return new Wf("deleteField")}function pre(){return new MT("serverTimestamp")}function mre(...t){return new Vne("arrayUnion",t)}function gre(...t){return new Bne("arrayRemove",t)}function B$(t){return new zne("increment",t)}(function(t,e=!0){(function(n){_u=n})(As),zi(new sr("firestore",(n,{instanceIdentifier:r,options:i})=>{const s=n.getProvider("app").getImmediate(),o=new Kt(new CZ(n.getProvider("auth-internal")),new NZ(n.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new ne(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xo(a.options.projectId,l)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Er(Bk,"3.8.4",t),Er(Bk,"3.8.4","esm2017")})();const yre="@firebase/firestore-compat",vre="0.3.4";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new ne("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(){if(typeof Uint8Array>"u")throw new ne("unimplemented","Uint8Arrays are not available in this environment.")}function GA(){if(!VZ())throw new ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}let z$=class Q1{constructor(e){this._delegate=e}static fromBase64String(e){return GA(),new Q1(Gi.fromBase64String(e))}static fromUint8Array(e){return HA(),new Q1(Gi.fromUint8Array(e))}toBase64(){return GA(),this._delegate.toBase64()}toUint8Array(){return HA(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(t){return _re(t,["next","error","complete"])}function _re(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wre{enableIndexedDbPersistence(e,n){return Rne(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return Nne(e._delegate)}clearIndexedDbPersistence(e){return Pne(e._delegate)}}class W${constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof xo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&jc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){xne(this._delegate,e,n,r)}enableNetwork(){return One(this._delegate)}disableNetwork(){return Lne(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,S$("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Dne(this._delegate)}onSnapshotsInSync(e){return lre(this._delegate,e)}get app(){if(!this._appCompat)throw new ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Zc(this,E$(this._delegate,e))}catch(n){throw Zn(n,"collection()","Firestore.collection()")}}doc(e){try{return new Kr(this,Es(this._delegate,e))}catch(n){throw Zn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Gh(this,Ine(this._delegate,e))}catch(n){throw Zn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return hre(this._delegate,n=>e(new H$(this,n)))}batch(){return xn(this._delegate),new G$(new ure(this._delegate,e=>Gf(this._delegate,e)))}loadBundle(e){return Mne(this._delegate,e)}namedQuery(e){return Fne(this._delegate,e).then(n=>n?new Gh(this,n):null)}}class qv extends WT{constructor(e){super(),this.firestore=e}convertBytes(e){return new z$(new Gi(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Kr.forKey(n,this.firestore,null)}}function Sre(t){EZ(t)}class H${constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new qv(e)}get(e){const n=Sa(e);return this._delegate.get(n).then(r=>new Wh(this._firestore,new Ts(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Sa(e);return r?(GT("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Sa(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Sa(e);return this._delegate.delete(n),this}}class G${constructor(e){this._delegate=e}set(e,n,r){const i=Sa(e);return r?(GT("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Sa(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Sa(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class sl{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Wd(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Hh(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=sl.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new sl(e,new qv(e),n),i.set(n,s)),s}}sl.INSTANCES=new WeakMap;class Kr{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new qv(e)}static forPath(e,n,r){if(e.length%2!==0)throw new ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Kr(n,new At(n._delegate,r,new fe(e)))}static forKey(e,n,r){return new Kr(n,new At(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Zc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Zc(this.firestore,E$(this._delegate,e))}catch(n){throw Zn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=me(e),e instanceof At?T$(this._delegate,e):!1}set(e,n){n=GT("DocumentReference.set",n);try{return n?WA(this._delegate,e,n):WA(this._delegate,e)}catch(r){throw Zn(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?il(this._delegate,e):il(this._delegate,e,n,...r)}catch(i){throw Zn(i,"updateDoc()","DocumentReference.update()")}}delete(){return V$(this._delegate)}onSnapshot(...e){const n=q$(e),r=K$(e,i=>new Wh(this.firestore,new Ts(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Jc(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=nre(this._delegate):(e==null?void 0:e.source)==="server"?n=rre(this._delegate):n=zh(this._delegate),n.then(r=>new Wh(this.firestore,new Ts(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Kr(this.firestore,e?this._delegate.withConverter(sl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Zn(t,e,n){return t.message=t.message.replace(e,n),t}function q$(t){for(const e of t)if(typeof e=="object"&&!Y1(e))return e;return{}}function K$(t,e){var n,r;let i;return Y1(t[0])?i=t[0]:Y1(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class Wh{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Kr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return j$(this._delegate,e._delegate)}}class Hh extends Wh{data(e){const n=this._delegate.data(e);return TZ(n!==void 0),n}}let Gh=class Ei{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new qv(e)}where(e,n,r){try{return new Ei(this.firestore,js(this._delegate,Gne(e,n,r)))}catch(i){throw Zn(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Ei(this.firestore,js(this._delegate,qne(e,n)))}catch(r){throw Zn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ei(this.firestore,js(this._delegate,Kne(e)))}catch(n){throw Zn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Ei(this.firestore,js(this._delegate,Qne(e)))}catch(n){throw Zn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ei(this.firestore,js(this._delegate,Yne(...e)))}catch(n){throw Zn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ei(this.firestore,js(this._delegate,Xne(...e)))}catch(n){throw Zn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ei(this.firestore,js(this._delegate,Jne(...e)))}catch(n){throw Zn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ei(this.firestore,js(this._delegate,Zne(...e)))}catch(n){throw Zn(n,"endAt()","Query.endAt()")}}isEqual(e){return x$(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=sre(this._delegate):(e==null?void 0:e.source)==="server"?n=ore(this._delegate):n=ire(this._delegate),n.then(r=>new X1(this.firestore,new No(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=q$(e),r=K$(e,i=>new X1(this.firestore,new No(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Jc(this._delegate,n,r)}withConverter(e){return new Ei(this.firestore,e?this._delegate.withConverter(sl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};class bre{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Hh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class X1{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Gh(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Hh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new bre(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Hh(this._firestore,r))})}isEqual(e){return j$(this._delegate,e._delegate)}}class Zc extends Gh{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Kr(this.firestore,e):null}doc(e){try{return e===void 0?new Kr(this.firestore,Es(this._delegate)):new Kr(this.firestore,Es(this._delegate,e))}catch(n){throw Zn(n,"doc()","CollectionReference.doc()")}}add(e){return are(this._delegate,e).then(n=>new Kr(this.firestore,n))}isEqual(e){return T$(this._delegate,e._delegate)}withConverter(e){return new Zc(this.firestore,e?this._delegate.withConverter(sl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Sa(t){return ct(t,At)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(...e){this._delegate=new Ro(...e)}static documentId(){return new qT(Xt.keyField().canonicalString())}isEqual(e){return e=me(e),e instanceof Ro?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e){this._delegate=e}static serverTimestamp(){const e=pre();return e._methodName="FieldValue.serverTimestamp",new da(e)}static delete(){const e=fre();return e._methodName="FieldValue.delete",new da(e)}static arrayUnion(...e){const n=mre(...e);return n._methodName="FieldValue.arrayUnion",new da(n)}static arrayRemove(...e){const n=gre(...e);return n._methodName="FieldValue.arrayRemove",new da(n)}static increment(e){const n=B$(e);return n._methodName="FieldValue.increment",new da(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ere={Firestore:W$,GeoPoint:$v,Timestamp:Ft,Blob:z$,Transaction:H$,WriteBatch:G$,DocumentReference:Kr,DocumentSnapshot:Wh,Query:Gh,QueryDocumentSnapshot:Hh,QuerySnapshot:X1,CollectionReference:Zc,FieldPath:qT,FieldValue:da,setLogLevel:Sre,CACHE_SIZE_UNLIMITED:Ane};function Tre(t,e){t.INTERNAL.registerComponent(new sr("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Ere)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xre(t){Tre(t,(e,n)=>new W$(e,n,new wre)),t.registerVersion(yre,vre)}xre(Qn);const qA="@firebase/database",KA="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Q$="";function Y$(t){Q$=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ire{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),sn(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:wh(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cre{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Mr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X$=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Ire(e)}}catch{}return new Cre},ba=X$("localStorage"),J1=X$("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc=new hu("@firebase/database"),J$=function(){let t=1;return function(){return t++}}(),Z$=function(t){const e=f9(t),n=new u9;n.update(e);const r=n.digest();return iE.encodeByteArray(r)},qf=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=qf.apply(null,r):typeof r=="object"?e+=sn(r):e+=r,e+=" "}return e};let Da=null,QA=!0;const eU=function(t,e){le(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(vc.logLevel=ot.VERBOSE,Da=vc.log.bind(vc),e&&J1.set("logging_enabled",!0)):typeof t=="function"?Da=t:(Da=null,J1.remove("logging_enabled"))},gn=function(...t){if(QA===!0&&(QA=!1,Da===null&&J1.get("logging_enabled")===!0&&eU(!0)),Da){const e=qf.apply(null,t);Da(e)}},Kf=function(t){return function(...e){gn(t,...e)}},Z1=function(...t){const e="FIREBASE INTERNAL ERROR: "+qf(...t);vc.error(e)},qi=function(...t){const e=`FIREBASE FATAL ERROR: ${qf(...t)}`;throw vc.error(e),new Error(e)},qn=function(...t){const e="FIREBASE WARNING: "+qf(...t);vc.warn(e)},kre=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&qn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Kv=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Are=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Po="[MIN_NAME]",xs="[MAX_NAME]",xl=function(t,e){if(t===e)return 0;if(t===Po||e===xs)return-1;if(e===Po||t===xs)return 1;{const n=YA(t),r=YA(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},Rre=function(t,e){return t===e?0:t<e?-1:1},rd=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+sn(e))},KT=function(t){if(typeof t!="object"||t===null)return sn(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=sn(e[r]),n+=":",n+=KT(t[e[r]]);return n+="}",n},tU=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Sn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const nU=function(t){le(!Kv(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,l;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const u=c.join("");let d="";for(l=0;l<64;l+=8){let h=parseInt(u.substr(l,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},Nre=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Pre=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Dre(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const Ore=new RegExp("^-?(0*)\\d{1,10}$"),Lre=-2147483648,Mre=2147483647,YA=function(t){if(Ore.test(t)){const e=Number(t);if(e>=Lre&&e<=Mre)return e}return null},Cu=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw qn("Exception was thrown by user callback.",n),e},Math.floor(0))}},Fre=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Hd=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $re{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){qn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ure{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(gn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',qn(e)}}class _c{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}_c.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT="5",rU="v",iU="s",sU="r",oU="f",aU=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,lU="ls",cU="p",eS="ac",uU="websocket",dU="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hU{constructor(e,n,r,i,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ba.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ba.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function jre(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function fU(t,e,n){le(typeof e=="string","typeof type must == string"),le(typeof n=="object","typeof params must == object");let r;if(e===uU)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===dU)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);jre(t)&&(n.ns=t.namespace);const i=[];return Sn(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vre{constructor(){this.counters_={}}incrementCounter(e,n=1){Mr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return GK(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0={},P0={};function YT(t){const e=t.toString();return N0[e]||(N0[e]=new Vre),N0[e]}function Bre(t,e){const n=t.toString();return P0[n]||(P0[n]=e()),P0[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zre{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Cu(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA="start",Wre="close",Hre="pLPCommand",Gre="pRTLPCB",pU="id",mU="pw",gU="ser",qre="cb",Kre="seg",Qre="ts",Yre="d",Xre="dframe",yU=1870,vU=30,Jre=yU-vU,Zre=25e3,eie=3e4;class Js{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Kf(e),this.stats_=YT(n),this.urlFn=l=>(this.appCheckToken&&(l[eS]=this.appCheckToken),fU(n,dU,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new zre(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(eie)),Are(()=>{if(this.isClosed_)return;this.scriptTagHolder=new XT((...s)=>{const[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===XA)this.id=a,this.password=l;else if(o===Wre)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[XA]="t",r[gU]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[qre]=this.scriptTagHolder.uniqueCallbackIdentifier),r[rU]=QT,this.transportSessionId&&(r[iU]=this.transportSessionId),this.lastSessionId&&(r[lU]=this.lastSessionId),this.applicationId&&(r[cU]=this.applicationId),this.appCheckToken&&(r[eS]=this.appCheckToken),typeof location<"u"&&location.hostname&&aU.test(location.hostname)&&(r[sU]=oU);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Js.forceAllow_=!0}static forceDisallow(){Js.forceDisallow_=!0}static isAvailable(){return Js.forceAllow_?!0:!Js.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Nre()&&!Pre()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=sn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=fL(n),i=tU(r,Jre);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[Xre]="t",r[pU]=e,r[mU]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=sn(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class XT{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=J$(),window[Hre+this.uniqueCallbackIdentifier]=e,window[Gre+this.uniqueCallbackIdentifier]=n,this.myIFrame=XT.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){gn("frame writing exception"),a.stack&&gn(a.stack),gn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||gn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[pU]=this.myID,e[mU]=this.myPW,e[gU]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+vU+r.length<=yU;){const o=this.pendingSegs.shift();r=r+"&"+Kre+i+"="+o.seg+"&"+Qre+i+"="+o.ts+"&"+Yre+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(Zre)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{gn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tie=16384,nie=45e3;let Rg=null;typeof MozWebSocket<"u"?Rg=MozWebSocket:typeof WebSocket<"u"&&(Rg=WebSocket);class Gr{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Kf(this.connId),this.stats_=YT(n),this.connURL=Gr.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[rU]=QT,typeof location<"u"&&location.hostname&&aU.test(location.hostname)&&(o[sU]=oU),n&&(o[iU]=n),r&&(o[lU]=r),i&&(o[eS]=i),s&&(o[cU]=s),fU(e,uU,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ba.set("previous_websocket_failure",!0);try{let r;gL(),this.mySock=new Rg(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){Gr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Rg!==null&&!Gr.forceDisallow_}static previouslyFailed(){return ba.isInMemoryStorage||ba.get("previous_websocket_failure")===!0}markConnectionHealthy(){ba.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=wh(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(le(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=sn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=tU(n,tie);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(nie))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Gr.responsesRequiredToBeHealthy=2;Gr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Js,Gr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Gr&&Gr.isAvailable();let r=n&&!Gr.previouslyFailed();if(e.webSocketOnly&&(n||qn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Gr];else{const i=this.transports_=[];for(const s of eu.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);eu.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}eu.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rie=6e4,iie=5e3,sie=10*1024,oie=100*1024,D0="t",JA="d",aie="s",ZA="r",lie="e",eR="o",tR="a",nR="n",rR="p",cie="h";class uie{constructor(e,n,r,i,s,o,a,l,c,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Kf("c:"+this.id+":"),this.transportManager_=new eu(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Hd(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>oie?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>sie?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(D0 in e){const n=e[D0];n===tR?this.upgradeIfSecondaryHealthy_():n===ZA?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===eR&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=rd("t",e),r=rd("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:rR,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:tR,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:nR,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=rd("t",e),r=rd("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=rd(D0,e);if(JA in e){const r=e[JA];if(n===cie){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===nR){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===aie?this.onConnectionShutdown_(r):n===ZA?this.onReset_(r):n===lie?Z1("Server Error: "+r):n===eR?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Z1("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),QT!==r&&qn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Hd(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(rie))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Hd(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(iie))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:rR,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ba.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _U{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wU{constructor(e){this.allowedEvents_=e,this.listeners_={},le(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){le(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng extends wU{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!oE()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Ng}getInitialEvent(e){return le(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR=32,sR=768;class pt{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function ht(){return new pt("")}function Ye(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Do(t){return t.pieces_.length-t.pieceNum_}function wt(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new pt(t.pieces_,e)}function JT(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function die(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function qh(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function SU(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new pt(e,0)}function Mt(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof pt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new pt(n,0)}function Xe(t){return t.pieceNum_>=t.pieces_.length}function nr(t,e){const n=Ye(t),r=Ye(e);if(n===null)return e;if(n===r)return nr(wt(t),wt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function hie(t,e){const n=qh(t,0),r=qh(e,0);for(let i=0;i<n.length&&i<r.length;i++){const s=xl(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function ZT(t,e){if(Do(t)!==Do(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Qr(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Do(t)>Do(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class fie{constructor(e,n){this.errorPrefix_=n,this.parts_=qh(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Zy(this.parts_[r]);bU(this)}}function pie(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Zy(e),bU(t)}function mie(t){const e=t.parts_.pop();t.byteLength_-=Zy(e),t.parts_.length>0&&(t.byteLength_-=1)}function bU(t){if(t.byteLength_>sR)throw new Error(t.errorPrefix_+"has a key path longer than "+sR+" bytes ("+t.byteLength_+").");if(t.parts_.length>iR)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+iR+") or object contains a cycle "+sa(t))}function sa(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex extends wU{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new ex}getInitialEvent(e){return le(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const id=1e3,gie=60*5*1e3,oR=30*1e3,yie=1.3,vie=3e4,_ie="server_kill",aR=3;class fs extends _U{constructor(e,n,r,i,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=fs.nextPersistentConnectionId_++,this.log_=Kf("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=id,this.maxReconnectDelay_=gie,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!gL())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ex.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Ng.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(sn(s)),le(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new hr,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),le(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),le(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,c=a.s;fs.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Mr(e,"w")){const r=Wa(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();qn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||c9(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=oR)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=l9(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),le(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+sn(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Z1("Unrecognized action received from server: "+sn(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){le(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=id,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=id,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>vie&&(this.reconnectDelay_=id),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*yie)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+fs.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},c=function(d){le(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?gn("getToken() completed but was canceled"):(gn("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,a=new uie(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,f=>{qn(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(_ie)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&qn(d),l())}}}interrupt(e){gn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){gn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],rg(this.interruptReasons_)&&(this.reconnectDelay_=id,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>KT(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new pt(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){gn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=aR&&(this.reconnectDelay_=oR,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){gn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=aR&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Q$.replace(/\./g,"-")]=1,oE()?e["framework.cordova"]=1:Jy()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Ng.getInstance().currentlyOnline();return rg(this.interruptReasons_)&&e}}fs.nextPersistentConnectionId_=0;fs.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Je(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Je(Po,e),i=new Je(Po,n);return this.compare(r,i)!==0}minPost(){return Je.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jp;class EU extends Qv{static get __EMPTY_NODE(){return jp}static set __EMPTY_NODE(e){jp=e}compare(e,n){return xl(e.name,n.name)}isDefinedOn(e){throw du("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Je.MIN}maxPost(){return new Je(xs,jp)}makePost(e,n){return le(typeof e=="string","KeyIndex indexValue must always be a string."),new Je(e,jp)}toString(){return".key"}}const Vi=new EU;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class mn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??mn.RED,this.left=i??yr.EMPTY_NODE,this.right=s??yr.EMPTY_NODE}copy(e,n,r,i,s){return new mn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return yr.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return yr.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}mn.RED=!0;mn.BLACK=!1;class wie{copy(e,n,r,i,s){return this}insert(e,n,r){return new mn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class yr{constructor(e,n=yr.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new yr(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,mn.BLACK,null,null))}remove(e){return new yr(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,mn.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Vp(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Vp(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Vp(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Vp(this.root_,null,this.comparator_,!0,e)}}yr.EMPTY_NODE=new wie;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sie(t,e){return xl(t.name,e.name)}function tx(t,e){return xl(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tS;function bie(t){tS=t}const TU=function(t){return typeof t=="number"?"number:"+nU(t):"string:"+t},xU=function(t){if(t.isLeafNode()){const e=t.val();le(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Mr(e,".sv"),"Priority must be a string or number.")}else le(t===tS||t.isEmpty(),"priority of unexpected type.");le(t===tS||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lR;class cn{constructor(e,n=cn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,le(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),xU(this.priorityNode_)}static set __childrenNodeConstructor(e){lR=e}static get __childrenNodeConstructor(){return lR}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new cn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:cn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Xe(e)?this:Ye(e)===".priority"?this.priorityNode_:cn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:cn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Ye(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(le(r!==".priority"||Do(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,cn.__childrenNodeConstructor.EMPTY_NODE.updateChild(wt(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+TU(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=nU(this.value_):e+=this.value_,this.lazyHash_=Z$(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===cn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof cn.__childrenNodeConstructor?-1:(le(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=cn.VALUE_TYPE_ORDER.indexOf(n),s=cn.VALUE_TYPE_ORDER.indexOf(r);return le(i>=0,"Unknown leaf type: "+n),le(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}cn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let IU,CU;function Eie(t){IU=t}function Tie(t){CU=t}class xie extends Qv{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?xl(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Je.MIN}maxPost(){return new Je(xs,new cn("[PRIORITY-POST]",CU))}makePost(e,n){const r=IU(e);return new Je(n,new cn("[PRIORITY-POST]",r))}toString(){return".priority"}}const Tt=new xie;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iie=Math.log(2);class Cie{constructor(e){const n=s=>parseInt(Math.log(s)/Iie,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Pg=function(t,e,n,r){t.sort(e);const i=function(l,c){const u=c-l;let d,h;if(u===0)return null;if(u===1)return d=t[l],h=n?n(d):d,new mn(h,d.node,mn.BLACK,null,null);{const f=parseInt(u/2,10)+l,p=i(l,f),y=i(f+1,c);return d=t[f],h=n?n(d):d,new mn(h,d.node,mn.BLACK,p,y)}},s=function(l){let c=null,u=null,d=t.length;const h=function(p,y){const w=d-p,m=d;d-=p;const g=i(w+1,m),v=t[w],b=n?n(v):v;f(new mn(b,v.node,y,null,g))},f=function(p){c?(c.left=p,c=p):(u=p,c=p)};for(let p=0;p<l.count;++p){const y=l.nextBitIsOne(),w=Math.pow(2,l.count-(p+1));y?h(w,mn.BLACK):(h(w,mn.BLACK),h(w,mn.RED))}return u},o=new Cie(t.length),a=s(o);return new yr(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let O0;const Ll={};class ls{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return le(Ll&&Tt,"ChildrenNode.ts has not been loaded"),O0=O0||new ls({".priority":Ll},{".priority":Tt}),O0}get(e){const n=Wa(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof yr?n:null}hasIndex(e){return Mr(this.indexSet_,e.toString())}addIndex(e,n){le(e!==Vi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(Je.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Pg(r,e.getCompare()):a=Ll;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new ls(u,c)}addToIndexes(e,n){const r=ig(this.indexes_,(i,s)=>{const o=Wa(this.indexSet_,s);if(le(o,"Missing index implementation for "+s),i===Ll)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(Je.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Pg(a,o.getCompare())}else return Ll;else{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new Je(e.name,a))),l.insert(e,e.node)}});return new ls(r,this.indexSet_)}removeFromIndexes(e,n){const r=ig(this.indexes_,i=>{if(i===Ll)return i;{const s=n.get(e.name);return s?i.remove(new Je(e.name,s)):i}});return new ls(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sd;class Ue{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&xU(this.priorityNode_),this.children_.isEmpty()&&le(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return sd||(sd=new Ue(new yr(tx),null,ls.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||sd}updatePriority(e){return this.children_.isEmpty()?this:new Ue(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?sd:n}}getChild(e){const n=Ye(e);return n===null?this:this.getImmediateChild(n).getChild(wt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(le(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Je(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?sd:this.priorityNode_;return new Ue(i,o,s)}}updateChild(e,n){const r=Ye(e);if(r===null)return n;{le(Ye(e)!==".priority"||Do(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(wt(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(Tt,(o,a)=>{n[o]=a.val(e),r++,s&&Ue.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+TU(this.getPriority().val())+":"),this.forEachChild(Tt,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":Z$(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new Je(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Je(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Je(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,Je.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,Je.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Qf?-1:0}withIndex(e){if(e===Vi||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Ue(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Vi||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Tt),i=n.getIterator(Tt);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Vi?null:this.indexMap_.get(e.toString())}}Ue.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class kie extends Ue{constructor(){super(new yr(tx),Ue.EMPTY_NODE,ls.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ue.EMPTY_NODE}isEmpty(){return!1}}const Qf=new kie;Object.defineProperties(Je,{MIN:{value:new Je(Po,Ue.EMPTY_NODE)},MAX:{value:new Je(xs,Qf)}});EU.__EMPTY_NODE=Ue.EMPTY_NODE;cn.__childrenNodeConstructor=Ue;bie(Qf);Tie(Qf);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aie=!0;function Ut(t,e=null){if(t===null)return Ue.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),le(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new cn(n,Ut(e))}if(!(t instanceof Array)&&Aie){const n=[];let r=!1;if(Sn(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=Ut(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new Je(o,l)))}}),n.length===0)return Ue.EMPTY_NODE;const s=Pg(n,Sie,o=>o.name,tx);if(r){const o=Pg(n,Tt.getCompare());return new Ue(s,Ut(e),new ls({".priority":o},{".priority":Tt}))}else return new Ue(s,Ut(e),ls.Default)}else{let n=Ue.EMPTY_NODE;return Sn(t,(r,i)=>{if(Mr(t,r)&&r.substring(0,1)!=="."){const s=Ut(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Ut(e))}}Eie(Ut);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx extends Qv{constructor(e){super(),this.indexPath_=e,le(!Xe(e)&&Ye(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?xl(e.name,n.name):s}makePost(e,n){const r=Ut(e),i=Ue.EMPTY_NODE.updateChild(this.indexPath_,r);return new Je(n,i)}maxPost(){const e=Ue.EMPTY_NODE.updateChild(this.indexPath_,Qf);return new Je(xs,e)}toString(){return qh(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rie extends Qv{compare(e,n){const r=e.node.compareTo(n.node);return r===0?xl(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Je.MIN}maxPost(){return Je.MAX}makePost(e,n){const r=Ut(e);return new Je(n,r)}toString(){return".value"}}const rx=new Rie;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kU(t){return{type:"value",snapshotNode:t}}function tu(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Kh(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Qh(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Nie(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){le(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Kh(n,a)):le(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(tu(n,r)):o.trackChildChange(Qh(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Tt,(i,s)=>{n.hasChild(i)||r.trackChildChange(Kh(i,s))}),n.isLeafNode()||n.forEachChild(Tt,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Qh(i,s,o))}else r.trackChildChange(tu(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?Ue.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e){this.indexedFilter_=new ix(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Yh.getStartPost_(e),this.endPost_=Yh.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new Je(n,r))||(r=Ue.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=Ue.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(Ue.EMPTY_NODE);const s=this;return n.forEachChild(Tt,(o,a)=>{s.matches(new Je(o,a))||(i=i.updateImmediateChild(o,Ue.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pie{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Yh(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new Je(n,r))||(r=Ue.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=Ue.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=Ue.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(Ue.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,Ue.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();const a=e;le(a.numChildren()===this.limit_,"");const l=new Je(n,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(n)){const d=a.getImmediateChild(n);let h=i.getChildAfterChild(this.index_,c,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);const f=h==null?1:o(h,l);if(u&&!r.isEmpty()&&f>=0)return s!=null&&s.trackChildChange(Qh(n,r,d)),a.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(Kh(n,d));const y=a.updateImmediateChild(n,Ue.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(s!=null&&s.trackChildChange(tu(h.name,h.node)),y.updateImmediateChild(h.name,h.node)):y}}else return r.isEmpty()?e:u&&o(c,l)>=0?(s!=null&&(s.trackChildChange(Kh(c.name,c.node)),s.trackChildChange(tu(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(c.name,Ue.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Tt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return le(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return le(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Po}hasEnd(){return this.endSet_}getIndexEndValue(){return le(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return le(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:xs}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return le(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Tt}copy(){const e=new Yv;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Die(t){return t.loadsAllData()?new ix(t.getIndex()):t.hasLimit()?new Pie(t):new Yh(t)}function Oie(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function Lie(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function nS(t,e,n){const r=t.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Mie(t,e,n){let r;return t.index_===Vi||n?r=nS(t,e,n):r=nS(t,e,xs),r.startAfterSet_=!0,r}function rS(t,e,n){const r=t.copy();return r.endSet_=!0,e===void 0&&(e=null),r.indexEndValue_=e,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Fie(t,e,n){let r;return t.index_===Vi||n?r=rS(t,e,n):r=rS(t,e,Po),r.endBeforeSet_=!0,r}function Xv(t,e){const n=t.copy();return n.index_=e,n}function cR(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Tt?n="$priority":t.index_===rx?n="$value":t.index_===Vi?n="$key":(le(t.index_ instanceof nx,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=sn(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=sn(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+sn(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=sn(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+sn(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function uR(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Tt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg extends _U{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Kf("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(le(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Dg.getListenId_(e,r),a={};this.listens_[o]=a;const l=cR(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let d=u;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(s,d,!1,r),Wa(this.listens_,o)===a){let h;c?c===401?h="permission_denied":h="rest_error:"+c:h="ok",i(h,null)}})}unlisten(e,n){const r=Dg.getListenId_(e,n);delete this.listens_[r]}get(e){const n=cR(e._queryParams),r=e._path.toString(),i=new hr;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+yl(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=wh(a.responseText)}catch{qn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&qn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ie{constructor(){this.rootNode_=Ue.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(){return{value:null,children:new Map}}function ku(t,e,n){if(Xe(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Ye(e);t.children.has(r)||t.children.set(r,Og());const i=t.children.get(r);e=wt(e),ku(i,e,n)}}function iS(t,e){if(Xe(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(Tt,(r,i)=>{ku(t,new pt(r),i)}),iS(t,e)}}else if(t.children.size>0){const n=Ye(e);return e=wt(e),t.children.has(n)&&iS(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function sS(t,e,n){t.value!==null?n(e,t.value):Uie(t,(r,i)=>{const s=new pt(e.toString()+"/"+r);sS(i,s,n)})}function Uie(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jie{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Sn(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR=10*1e3,Vie=30*1e3,Bie=5*60*1e3;class zie{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new jie(e);const r=dR+(Vie-dR)*Math.random();Hd(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Sn(e,(i,s)=>{s>0&&Mr(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Hd(this.reportStats_.bind(this),Math.floor(Math.random()*2*Bie))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pi;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(pi||(pi={}));function sx(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function ox(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function ax(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=pi.ACK_USER_WRITE,this.source=sx()}operationForChild(e){if(Xe(this.path)){if(this.affectedTree.value!=null)return le(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new pt(e));return new Lg(ht(),n,this.revert)}}else return le(Ye(this.path)===e,"operationForChild called for unrelated child."),new Lg(wt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,n){this.source=e,this.path=n,this.type=pi.LISTEN_COMPLETE}operationForChild(e){return Xe(this.path)?new Xh(this.source,ht()):new Xh(this.source,wt(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=pi.OVERWRITE}operationForChild(e){return Xe(this.path)?new ol(this.source,ht(),this.snap.getImmediateChild(e)):new ol(this.source,wt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=pi.MERGE}operationForChild(e){if(Xe(this.path)){const n=this.children.subtree(new pt(e));return n.isEmpty()?null:n.value?new ol(this.source,ht(),n.value):new nu(this.source,ht(),n)}else return le(Ye(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new nu(this.source,wt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Xe(e))return this.isFullyInitialized()&&!this.filtered_;const n=Ye(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wie{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Hie(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(Nie(o.childName,o.snapshotNode))}),od(t,i,"child_removed",e,r,n),od(t,i,"child_added",e,r,n),od(t,i,"child_moved",s,r,n),od(t,i,"child_changed",e,r,n),od(t,i,"value",e,r,n),i}function od(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,l)=>qie(t,a,l)),o.forEach(a=>{const l=Gie(t,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function Gie(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function qie(t,e,n){if(e.childName==null||n.childName==null)throw du("Should only compare child_ events.");const r=new Je(e.childName,e.snapshotNode),i=new Je(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(t,e){return{eventCache:t,serverCache:e}}function Gd(t,e,n,r){return Jv(new Oo(e,n,r),t.serverCache)}function AU(t,e,n,r){return Jv(t.eventCache,new Oo(e,n,r))}function Mg(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function al(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let L0;const Kie=()=>(L0||(L0=new yr(Rre)),L0);class bt{constructor(e,n=Kie()){this.value=e,this.children=n}static fromObject(e){let n=new bt(null);return Sn(e,(r,i)=>{n=n.set(new pt(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:ht(),value:this.value};if(Xe(e))return null;{const r=Ye(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(wt(e),n);return s!=null?{path:Mt(new pt(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Xe(e))return this;{const n=Ye(e),r=this.children.get(n);return r!==null?r.subtree(wt(e)):new bt(null)}}set(e,n){if(Xe(e))return new bt(n,this.children);{const r=Ye(e),s=(this.children.get(r)||new bt(null)).set(wt(e),n),o=this.children.insert(r,s);return new bt(this.value,o)}}remove(e){if(Xe(e))return this.children.isEmpty()?new bt(null):new bt(null,this.children);{const n=Ye(e),r=this.children.get(n);if(r){const i=r.remove(wt(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new bt(null):new bt(this.value,s)}else return this}}get(e){if(Xe(e))return this.value;{const n=Ye(e),r=this.children.get(n);return r?r.get(wt(e)):null}}setTree(e,n){if(Xe(e))return n;{const r=Ye(e),s=(this.children.get(r)||new bt(null)).setTree(wt(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new bt(this.value,o)}}fold(e){return this.fold_(ht(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Mt(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,ht(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(Xe(e))return null;{const s=Ye(e),o=this.children.get(s);return o?o.findOnPath_(wt(e),Mt(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ht(),n)}foreachOnPath_(e,n,r){if(Xe(e))return this;{this.value&&r(n,this.value);const i=Ye(e),s=this.children.get(i);return s?s.foreachOnPath_(wt(e),Mt(n,i),r):new bt(null)}}foreach(e){this.foreach_(ht(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Mt(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this.writeTree_=e}static empty(){return new yi(new bt(null))}}function qd(t,e,n){if(Xe(e))return new yi(new bt(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=nr(i,e);return s=s.updateChild(o,n),new yi(t.writeTree_.set(i,s))}else{const i=new bt(n),s=t.writeTree_.setTree(e,i);return new yi(s)}}}function oS(t,e,n){let r=t;return Sn(n,(i,s)=>{r=qd(r,Mt(e,i),s)}),r}function hR(t,e){if(Xe(e))return yi.empty();{const n=t.writeTree_.setTree(e,new bt(null));return new yi(n)}}function aS(t,e){return Il(t,e)!=null}function Il(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(nr(n.path,e)):null}function fR(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Tt,(r,i)=>{e.push(new Je(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Je(r,i.value))}),e}function po(t,e){if(Xe(e))return t;{const n=Il(t,e);return n!=null?new yi(new bt(n)):new yi(t.writeTree_.subtree(e))}}function lS(t){return t.writeTree_.isEmpty()}function ru(t,e){return RU(ht(),t.writeTree_,e)}function RU(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(le(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=RU(Mt(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Mt(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(t,e){return OU(e,t)}function Qie(t,e,n,r,i){le(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=qd(t.visibleWrites,e,n)),t.lastWriteId=r}function Yie(t,e,n,r){le(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=oS(t.visibleWrites,e,n),t.lastWriteId=r}function Xie(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function Jie(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);le(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&Zie(a,r.path)?i=!1:Qr(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return ese(t),!0;if(r.snap)t.visibleWrites=hR(t.visibleWrites,r.path);else{const a=r.children;Sn(a,l=>{t.visibleWrites=hR(t.visibleWrites,Mt(r.path,l))})}return!0}else return!1}function Zie(t,e){if(t.snap)return Qr(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Qr(Mt(t.path,n),e))return!0;return!1}function ese(t){t.visibleWrites=NU(t.allWrites,tse,ht()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function tse(t){return t.visible}function NU(t,e,n){let r=yi.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)Qr(n,o)?(a=nr(n,o),r=qd(r,a,s.snap)):Qr(o,n)&&(a=nr(o,n),r=qd(r,ht(),s.snap.getChild(a)));else if(s.children){if(Qr(n,o))a=nr(n,o),r=oS(r,a,s.children);else if(Qr(o,n))if(a=nr(o,n),Xe(a))r=oS(r,ht(),s.children);else{const l=Wa(s.children,Ye(a));if(l){const c=l.getChild(wt(a));r=qd(r,ht(),c)}}}else throw du("WriteRecord should have .snap or .children")}}return r}function PU(t,e,n,r,i){if(!r&&!i){const s=Il(t.visibleWrites,e);if(s!=null)return s;{const o=po(t.visibleWrites,e);if(lS(o))return n;if(n==null&&!aS(o,ht()))return null;{const a=n||Ue.EMPTY_NODE;return ru(o,a)}}}else{const s=po(t.visibleWrites,e);if(!i&&lS(s))return n;if(!i&&n==null&&!aS(s,ht()))return null;{const o=function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(Qr(c.path,e)||Qr(e,c.path))},a=NU(t.allWrites,o,e),l=n||Ue.EMPTY_NODE;return ru(a,l)}}}function nse(t,e,n){let r=Ue.EMPTY_NODE;const i=Il(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Tt,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=po(t.visibleWrites,e);return n.forEachChild(Tt,(o,a)=>{const l=ru(po(s,new pt(o)),a);r=r.updateImmediateChild(o,l)}),fR(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=po(t.visibleWrites,e);return fR(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function rse(t,e,n,r,i){le(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Mt(e,n);if(aS(t.visibleWrites,s))return null;{const o=po(t.visibleWrites,s);return lS(o)?i.getChild(n):ru(o,i.getChild(n))}}function ise(t,e,n,r){const i=Mt(e,n),s=Il(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=po(t.visibleWrites,i);return ru(o,r.getNode().getImmediateChild(n))}else return null}function sse(t,e){return Il(t.visibleWrites,e)}function ose(t,e,n,r,i,s,o){let a;const l=po(t.visibleWrites,e),c=Il(l,ht());if(c!=null)a=c;else if(n!=null)a=ru(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=h.getNext();for(;f&&u.length<i;)d(f,r)!==0&&u.push(f),f=h.getNext();return u}else return[]}function ase(){return{visibleWrites:yi.empty(),allWrites:[],lastWriteId:-1}}function Fg(t,e,n,r){return PU(t.writeTree,t.treePath,e,n,r)}function lx(t,e){return nse(t.writeTree,t.treePath,e)}function pR(t,e,n,r){return rse(t.writeTree,t.treePath,e,n,r)}function $g(t,e){return sse(t.writeTree,Mt(t.treePath,e))}function lse(t,e,n,r,i,s){return ose(t.writeTree,t.treePath,e,n,r,i,s)}function cx(t,e,n){return ise(t.writeTree,t.treePath,e,n)}function DU(t,e){return OU(Mt(t.treePath,e),t.writeTree)}function OU(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cse{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;le(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),le(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Qh(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Kh(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,tu(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Qh(r,e.snapshotNode,i.oldSnap));else throw du("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class use{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const LU=new use;class ux{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Oo(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return cx(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:al(this.viewCache_),s=lse(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dse(t){return{filter:t}}function hse(t,e){le(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),le(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function fse(t,e,n,r,i){const s=new cse;let o,a;if(n.type===pi.OVERWRITE){const c=n;c.source.fromUser?o=cS(t,e,c.path,c.snap,r,i,s):(le(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!Xe(c.path),o=Ug(t,e,c.path,c.snap,r,i,a,s))}else if(n.type===pi.MERGE){const c=n;c.source.fromUser?o=mse(t,e,c.path,c.children,r,i,s):(le(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=uS(t,e,c.path,c.children,r,i,a,s))}else if(n.type===pi.ACK_USER_WRITE){const c=n;c.revert?o=vse(t,e,c.path,r,i,s):o=gse(t,e,c.path,c.affectedTree,r,i,s)}else if(n.type===pi.LISTEN_COMPLETE)o=yse(t,e,n.path,r,s);else throw du("Unknown operation type: "+n.type);const l=s.getChanges();return pse(e,o,l),{viewCache:o,changes:l}}function pse(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Mg(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(kU(Mg(e)))}}function MU(t,e,n,r,i,s){const o=e.eventCache;if($g(r,n)!=null)return e;{let a,l;if(Xe(n))if(le(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=al(e),u=c instanceof Ue?c:Ue.EMPTY_NODE,d=lx(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const c=Fg(r,al(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=Ye(n);if(c===".priority"){le(Do(n)===1,"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const d=pR(r,n,u,l);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{const u=wt(n);let d;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const h=pR(r,n,o.getNode(),l);h!=null?d=o.getNode().getImmediateChild(c).updateChild(u,h):d=o.getNode().getImmediateChild(c)}else d=cx(r,c,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),c,d,u,i,s):a=o.getNode()}}return Gd(e,a,o.isFullyInitialized()||Xe(n),t.filter.filtersNodes())}}function Ug(t,e,n,r,i,s,o,a){const l=e.serverCache;let c;const u=o?t.filter:t.filter.getIndexedFilter();if(Xe(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const f=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),f,null)}else{const f=Ye(n);if(!l.isCompleteForPath(n)&&Do(n)>1)return e;const p=wt(n),w=l.getNode().getImmediateChild(f).updateChild(p,r);f===".priority"?c=u.updatePriority(l.getNode(),w):c=u.updateChild(l.getNode(),f,w,p,LU,null)}const d=AU(e,c,l.isFullyInitialized()||Xe(n),u.filtersNodes()),h=new ux(i,d,s);return MU(t,d,n,i,h,a)}function cS(t,e,n,r,i,s,o){const a=e.eventCache;let l,c;const u=new ux(i,e,s);if(Xe(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=Gd(e,c,!0,t.filter.filtersNodes());else{const d=Ye(n);if(d===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),l=Gd(e,c,a.isFullyInitialized(),a.isFiltered());else{const h=wt(n),f=a.getNode().getImmediateChild(d);let p;if(Xe(h))p=r;else{const y=u.getCompleteChild(d);y!=null?JT(h)===".priority"&&y.getChild(SU(h)).isEmpty()?p=y:p=y.updateChild(h,r):p=Ue.EMPTY_NODE}if(f.equals(p))l=e;else{const y=t.filter.updateChild(a.getNode(),d,p,h,u,o);l=Gd(e,y,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function mR(t,e){return t.eventCache.isCompleteForChild(e)}function mse(t,e,n,r,i,s,o){let a=e;return r.foreach((l,c)=>{const u=Mt(n,l);mR(e,Ye(u))&&(a=cS(t,a,u,c,i,s,o))}),r.foreach((l,c)=>{const u=Mt(n,l);mR(e,Ye(u))||(a=cS(t,a,u,c,i,s,o))}),a}function gR(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function uS(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;Xe(n)?c=r:c=new bt(null).setTree(n,r);const u=e.serverCache.getNode();return c.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const f=e.serverCache.getNode().getImmediateChild(d),p=gR(t,f,h);l=Ug(t,l,new pt(d),p,i,s,o,a)}}),c.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){const p=e.serverCache.getNode().getImmediateChild(d),y=gR(t,p,h);l=Ug(t,l,new pt(d),y,i,s,o,a)}}),l}function gse(t,e,n,r,i,s,o){if($g(i,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(Xe(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Ug(t,e,n,l.getNode().getChild(n),i,s,a,o);if(Xe(n)){let c=new bt(null);return l.getNode().forEachChild(Vi,(u,d)=>{c=c.set(new pt(u),d)}),uS(t,e,n,c,i,s,a,o)}else return e}else{let c=new bt(null);return r.foreach((u,d)=>{const h=Mt(n,u);l.isCompleteForPath(h)&&(c=c.set(u,l.getNode().getChild(h)))}),uS(t,e,n,c,i,s,a,o)}}function yse(t,e,n,r,i){const s=e.serverCache,o=AU(e,s.getNode(),s.isFullyInitialized()||Xe(n),s.isFiltered());return MU(t,o,n,r,LU,i)}function vse(t,e,n,r,i,s){let o;if($g(r,n)!=null)return e;{const a=new ux(r,e,i),l=e.eventCache.getNode();let c;if(Xe(n)||Ye(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Fg(r,al(e));else{const d=e.serverCache.getNode();le(d instanceof Ue,"serverChildren would be complete if leaf node"),u=lx(r,d)}u=u,c=t.filter.updateFullNode(l,u,s)}else{const u=Ye(n);let d=cx(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=l.getImmediateChild(u)),d!=null?c=t.filter.updateChild(l,u,d,wt(n),a,s):e.eventCache.getNode().hasChild(u)?c=t.filter.updateChild(l,u,Ue.EMPTY_NODE,wt(n),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Fg(r,al(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||$g(r,ht())!=null,Gd(e,c,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _se{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new ix(r.getIndex()),s=Die(r);this.processor_=dse(s);const o=n.serverCache,a=n.eventCache,l=i.updateFullNode(Ue.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(Ue.EMPTY_NODE,a.getNode(),null),u=new Oo(l,o.isFullyInitialized(),i.filtersNodes()),d=new Oo(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Jv(d,u),this.eventGenerator_=new Wie(this.query_)}get query(){return this.query_}}function wse(t){return t.viewCache_.serverCache.getNode()}function Sse(t){return Mg(t.viewCache_)}function bse(t,e){const n=al(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Xe(e)&&!n.getImmediateChild(Ye(e)).isEmpty())?n.getChild(e):null}function yR(t){return t.eventRegistrations_.length===0}function Ese(t,e){t.eventRegistrations_.push(e)}function vR(t,e,n){const r=[];if(n){le(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function _R(t,e,n,r){e.type===pi.MERGE&&e.source.queryId!==null&&(le(al(t.viewCache_),"We should always have a full cache before handling merges"),le(Mg(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=fse(t.processor_,i,e,n,r);return hse(t.processor_,s.viewCache),le(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,FU(t,s.changes,s.viewCache.eventCache.getNode(),null)}function Tse(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Tt,(s,o)=>{r.push(tu(s,o))}),n.isFullyInitialized()&&r.push(kU(n.getNode())),FU(t,r,n.getNode(),e)}function FU(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return Hie(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jg;class $U{constructor(){this.views=new Map}}function xse(t){le(!jg,"__referenceConstructor has already been defined"),jg=t}function Ise(){return le(jg,"Reference.ts has not been loaded"),jg}function Cse(t){return t.views.size===0}function dx(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return le(s!=null,"SyncTree gave us an op for an invalid query."),_R(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(_R(o,e,n,r));return s}}function UU(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=Fg(n,i?r:null),l=!1;a?l=!0:r instanceof Ue?(a=lx(n,r),l=!1):(a=Ue.EMPTY_NODE,l=!1);const c=Jv(new Oo(a,l,!1),new Oo(r,i,!1));return new _se(e,c)}return o}function kse(t,e,n,r,i,s){const o=UU(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),Ese(o,n),Tse(o,n)}function Ase(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const a=Lo(t);if(i==="default")for(const[l,c]of t.views.entries())o=o.concat(vR(c,n,r)),yR(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const l=t.views.get(i);l&&(o=o.concat(vR(l,n,r)),yR(l)&&(t.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!Lo(t)&&s.push(new(Ise())(e._repo,e._path)),{removed:s,events:o}}function jU(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function mo(t,e){let n=null;for(const r of t.views.values())n=n||bse(r,e);return n}function VU(t,e){if(e._queryParams.loadsAllData())return e_(t);{const r=e._queryIdentifier;return t.views.get(r)}}function BU(t,e){return VU(t,e)!=null}function Lo(t){return e_(t)!=null}function e_(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vg;function Rse(t){le(!Vg,"__referenceConstructor has already been defined"),Vg=t}function Nse(){return le(Vg,"Reference.ts has not been loaded"),Vg}let Pse=1;class wR{constructor(e){this.listenProvider_=e,this.syncPointTree_=new bt(null),this.pendingWriteTree_=ase(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function hx(t,e,n,r,i){return Qie(t.pendingWriteTree_,e,n,r,i),i?Au(t,new ol(sx(),e,n)):[]}function Dse(t,e,n,r){Yie(t.pendingWriteTree_,e,n,r);const i=bt.fromObject(n);return Au(t,new nu(sx(),e,i))}function Zs(t,e,n=!1){const r=Xie(t.pendingWriteTree_,e);if(Jie(t.pendingWriteTree_,e)){let s=new bt(null);return r.snap!=null?s=s.set(ht(),!0):Sn(r.children,o=>{s=s.set(new pt(o),!0)}),Au(t,new Lg(r.path,s,n))}else return[]}function Yf(t,e,n){return Au(t,new ol(ox(),e,n))}function Ose(t,e,n){const r=bt.fromObject(n);return Au(t,new nu(ox(),e,r))}function Lse(t,e){return Au(t,new Xh(ox(),e))}function Mse(t,e,n){const r=fx(t,n);if(r){const i=px(r),s=i.path,o=i.queryId,a=nr(s,e),l=new Xh(ax(o),a);return mx(t,s,l)}else return[]}function Bg(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let a=[];if(o&&(e._queryIdentifier==="default"||BU(o,e))){const l=Ase(o,e,n,r);Cse(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const u=c.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(h,f)=>Lo(f));if(u&&!d){const h=t.syncPointTree_.subtree(s);if(!h.isEmpty()){const f=Use(h);for(let p=0;p<f.length;++p){const y=f[p],w=y.query,m=GU(t,y);t.listenProvider_.startListening(Kd(w),Jh(t,w),m.hashFn,m.onComplete)}}}!d&&c.length>0&&!r&&(u?t.listenProvider_.stopListening(Kd(e),null):c.forEach(h=>{const f=t.queryToTagMap.get(n_(h));t.listenProvider_.stopListening(Kd(h),f)}))}jse(t,c)}return a}function zU(t,e,n,r){const i=fx(t,r);if(i!=null){const s=px(i),o=s.path,a=s.queryId,l=nr(o,e),c=new ol(ax(a),l,n);return mx(t,o,c)}else return[]}function Fse(t,e,n,r){const i=fx(t,r);if(i){const s=px(i),o=s.path,a=s.queryId,l=nr(o,e),c=bt.fromObject(n),u=new nu(ax(a),l,c);return mx(t,o,u)}else return[]}function dS(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(h,f)=>{const p=nr(h,i);s=s||mo(f,p),o=o||Lo(f)});let a=t.syncPointTree_.get(i);a?(o=o||Lo(a),s=s||mo(a,ht())):(a=new $U,t.syncPointTree_=t.syncPointTree_.set(i,a));let l;s!=null?l=!0:(l=!1,s=Ue.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((f,p)=>{const y=mo(p,ht());y&&(s=s.updateImmediateChild(f,y))}));const c=BU(a,e);if(!c&&!e._queryParams.loadsAllData()){const h=n_(e);le(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const f=Vse();t.queryToTagMap.set(h,f),t.tagToQueryMap.set(f,h)}const u=Zv(t.pendingWriteTree_,i);let d=kse(a,e,n,u,s,l);if(!c&&!o&&!r){const h=VU(a,e);d=d.concat(Bse(t,e,h))}return d}function t_(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=nr(o,e),c=mo(a,l);if(c)return c});return PU(i,e,s,n,!0)}function $se(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(c,u)=>{const d=nr(c,n);r=r||mo(u,d)});let i=t.syncPointTree_.get(n);i?r=r||mo(i,ht()):(i=new $U,t.syncPointTree_=t.syncPointTree_.set(n,i));const s=r!=null,o=s?new Oo(r,!0,!1):null,a=Zv(t.pendingWriteTree_,e._path),l=UU(i,e,a,s?o.getNode():Ue.EMPTY_NODE,s);return Sse(l)}function Au(t,e){return WU(e,t.syncPointTree_,null,Zv(t.pendingWriteTree_,ht()))}function WU(t,e,n,r){if(Xe(t.path))return HU(t,e,n,r);{const i=e.get(ht());n==null&&i!=null&&(n=mo(i,ht()));let s=[];const o=Ye(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,u=DU(r,o);s=s.concat(WU(a,l,c,u))}return i&&(s=s.concat(dx(i,t,r,n))),s}}function HU(t,e,n,r){const i=e.get(ht());n==null&&i!=null&&(n=mo(i,ht()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=DU(r,o),u=t.operationForChild(o);u&&(s=s.concat(HU(u,a,l,c)))}),i&&(s=s.concat(dx(i,t,r,n))),s}function GU(t,e){const n=e.query,r=Jh(t,n);return{hashFn:()=>(wse(e)||Ue.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?Mse(t,n._path,r):Lse(t,n._path);{const s=Dre(i,n);return Bg(t,n,null,s)}}}}function Jh(t,e){const n=n_(e);return t.queryToTagMap.get(n)}function n_(t){return t._path.toString()+"$"+t._queryIdentifier}function fx(t,e){return t.tagToQueryMap.get(e)}function px(t){const e=t.indexOf("$");return le(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new pt(t.substr(0,e))}}function mx(t,e,n){const r=t.syncPointTree_.get(e);le(r,"Missing sync point for query tag that we're tracking");const i=Zv(t.pendingWriteTree_,e);return dx(r,n,i,null)}function Use(t){return t.fold((e,n,r)=>{if(n&&Lo(n))return[e_(n)];{let i=[];return n&&(i=jU(n)),Sn(r,(s,o)=>{i=i.concat(o)}),i}})}function Kd(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Nse())(t._repo,t._path):t}function jse(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=n_(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function Vse(){return Pse++}function Bse(t,e,n){const r=e._path,i=Jh(t,e),s=GU(t,n),o=t.listenProvider_.startListening(Kd(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)le(!Lo(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,u,d)=>{if(!Xe(c)&&u&&Lo(u))return[e_(u).query];{let h=[];return u&&(h=h.concat(jU(u).map(f=>f.query))),Sn(d,(f,p)=>{h=h.concat(p)}),h}});for(let c=0;c<l.length;++c){const u=l[c];t.listenProvider_.stopListening(Kd(u),Jh(t,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new gx(n)}node(){return this.node_}}class yx{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Mt(this.path_,e);return new yx(this.syncTree_,n)}node(){return t_(this.syncTree_,this.path_)}}const zse=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},SR=function(t,e,n){if(!t||typeof t!="object")return t;if(le(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Wse(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Hse(t[".sv"],e);le(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Wse=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:le(!1,"Unexpected server value: "+t)}},Hse=function(t,e,n){t.hasOwnProperty("increment")||le(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&le(!1,"Unexpected increment value: "+r);const i=e.node();if(le(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},qU=function(t,e,n,r){return _x(e,new yx(n,t),r)},vx=function(t,e,n){return _x(t,new gx(e),n)};function _x(t,e,n){const r=t.getPriority().val(),i=SR(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=SR(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new cn(a,Ut(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new cn(i))),o.forEachChild(Tt,(a,l)=>{const c=_x(l,e.getImmediateChild(a),n);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function r_(t,e){let n=e instanceof pt?e:new pt(e),r=t,i=Ye(n);for(;i!==null;){const s=Wa(r.node.children,i)||{children:{},childCount:0};r=new wx(i,r,s),n=wt(n),i=Ye(n)}return r}function Cl(t){return t.node.value}function Sx(t,e){t.node.value=e,hS(t)}function KU(t){return t.node.childCount>0}function Gse(t){return Cl(t)===void 0&&!KU(t)}function i_(t,e){Sn(t.node.children,(n,r)=>{e(new wx(n,t,r))})}function QU(t,e,n,r){n&&!r&&e(t),i_(t,i=>{QU(i,e,!0,r)}),n&&r&&e(t)}function qse(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Xf(t){return new pt(t.parent===null?t.name:Xf(t.parent)+"/"+t.name)}function hS(t){t.parent!==null&&Kse(t.parent,t.name,t)}function Kse(t,e,n){const r=Gse(n),i=Mr(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,hS(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,hS(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qse=/[\[\].#$\/\u0000-\u001F\u007F]/,Yse=/[\[\].#$\u0000-\u001F\u007F]/,M0=10*1024*1024,s_=function(t){return typeof t=="string"&&t.length!==0&&!Qse.test(t)},YU=function(t){return typeof t=="string"&&t.length!==0&&!Yse.test(t)},Xse=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),YU(t)},Zh=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Kv(t)||t&&typeof t=="object"&&Mr(t,".sv")},Ki=function(t,e,n,r){r&&e===void 0||Jf(br(t,"value"),e,n)},Jf=function(t,e,n){const r=n instanceof pt?new fie(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+sa(r));if(typeof e=="function")throw new Error(t+"contains a function "+sa(r)+" with contents = "+e.toString());if(Kv(e))throw new Error(t+"contains "+e.toString()+" "+sa(r));if(typeof e=="string"&&e.length>M0/3&&Zy(e)>M0)throw new Error(t+"contains a string greater than "+M0+" utf8 bytes "+sa(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Sn(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!s_(o)))throw new Error(t+" contains an invalid key ("+o+") "+sa(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);pie(r,o),Jf(t,a,r),mie(r)}),i&&s)throw new Error(t+' contains ".value" child '+sa(r)+" in addition to actual children.")}},Jse=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const s=qh(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!s_(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(hie);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&Qr(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},XU=function(t,e,n,r){if(r&&e===void 0)return;const i=br(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];Sn(e,(o,a)=>{const l=new pt(o);if(Jf(i,a,Mt(n,l)),JT(l)===".priority"&&!Zh(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),Jse(i,s)},bx=function(t,e,n){if(!(n&&e===void 0)){if(Kv(e))throw new Error(br(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Zh(e))throw new Error(br(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Zf=function(t,e,n,r){if(!(r&&n===void 0)&&!s_(n))throw new Error(br(t,e)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},ef=function(t,e,n,r){if(!(r&&n===void 0)&&!YU(n))throw new Error(br(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Zse=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ef(t,e,n,r)},Yr=function(t,e){if(Ye(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},JU=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!s_(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Xse(n))throw new Error(br(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eoe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function o_(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!ZT(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function ZU(t,e,n){o_(t,n),ej(t,r=>ZT(r,e))}function Ur(t,e,n){o_(t,n),ej(t,r=>Qr(r,e)||Qr(e,r))}function ej(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(toe(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function toe(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Da&&gn("event: "+n.toString()),Cu(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tj="repo_interrupt",noe=25;class roe{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new eoe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Og(),this.transactionQueueTree_=new wx,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function ioe(t,e,n){if(t.stats_=YT(t.repoInfo_),t.forceRestClient_||Fre())t.server_=new Dg(t.repoInfo_,(r,i,s,o)=>{bR(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>ER(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{sn(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new fs(t.repoInfo_,e,(r,i,s,o)=>{bR(t,r,i,s,o)},r=>{ER(t,r)},r=>{soe(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Bre(t.repoInfo_,()=>new zie(t.stats_,t.server_)),t.infoData_=new $ie,t.infoSyncTree_=new wR({startListening:(r,i,s,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=Yf(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Ex(t,"connected",!1),t.serverSyncTree_=new wR({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);Ur(t.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function nj(t){const n=t.infoData_.getNode(new pt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function ep(t){return zse({timestamp:nj(t)})}function bR(t,e,n,r,i){t.dataUpdateCount++;const s=new pt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const l=ig(n,c=>Ut(c));o=Fse(t.serverSyncTree_,s,l,i)}else{const l=Ut(n);o=zU(t.serverSyncTree_,s,l,i)}else if(r){const l=ig(n,c=>Ut(c));o=Ose(t.serverSyncTree_,s,l)}else{const l=Ut(n);o=Yf(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=iu(t,s)),Ur(t.eventQueue_,a,o)}function ER(t,e){Ex(t,"connected",e),e===!1&&loe(t)}function soe(t,e){Sn(e,(n,r)=>{Ex(t,n,r)})}function Ex(t,e,n){const r=new pt("/.info/"+e),i=Ut(n);t.infoData_.updateSnapshot(r,i);const s=Yf(t.infoSyncTree_,r,i);Ur(t.eventQueue_,r,s)}function a_(t){return t.nextWriteId_++}function ooe(t,e,n){const r=$se(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{const s=Ut(i).withIndex(e._queryParams.getIndex());dS(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=Yf(t.serverSyncTree_,e._path,s);else{const a=Jh(t.serverSyncTree_,e);o=zU(t.serverSyncTree_,e._path,s,a)}return Ur(t.eventQueue_,e._path,o),Bg(t.serverSyncTree_,e,n,null,!0),s},i=>(Ru(t,"get for query "+sn(e)+" failed: "+i),Promise.reject(new Error(i))))}function Tx(t,e,n,r,i){Ru(t,"set",{path:e.toString(),value:n,priority:r});const s=ep(t),o=Ut(n,r),a=t_(t.serverSyncTree_,e),l=vx(o,a,s),c=a_(t),u=hx(t.serverSyncTree_,e,l,c,!0);o_(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(h,f)=>{const p=h==="ok";p||qn("set at "+e+" failed: "+h);const y=Zs(t.serverSyncTree_,c,!p);Ur(t.eventQueue_,e,y),Mo(t,i,h,f)});const d=Ix(t,e);iu(t,d),Ur(t.eventQueue_,d,[])}function aoe(t,e,n,r){Ru(t,"update",{path:e.toString(),value:n});let i=!0;const s=ep(t),o={};if(Sn(n,(a,l)=>{i=!1,o[a]=qU(Mt(e,a),Ut(l),t.serverSyncTree_,s)}),i)gn("update() called with empty data.  Don't do anything."),Mo(t,r,"ok",void 0);else{const a=a_(t),l=Dse(t.serverSyncTree_,e,o,a);o_(t.eventQueue_,l),t.server_.merge(e.toString(),n,(c,u)=>{const d=c==="ok";d||qn("update at "+e+" failed: "+c);const h=Zs(t.serverSyncTree_,a,!d),f=h.length>0?iu(t,e):e;Ur(t.eventQueue_,f,h),Mo(t,r,c,u)}),Sn(n,c=>{const u=Ix(t,Mt(e,c));iu(t,u)}),Ur(t.eventQueue_,e,[])}}function loe(t){Ru(t,"onDisconnectEvents");const e=ep(t),n=Og();sS(t.onDisconnect_,ht(),(i,s)=>{const o=qU(i,s,t.serverSyncTree_,e);ku(n,i,o)});let r=[];sS(n,ht(),(i,s)=>{r=r.concat(Yf(t.serverSyncTree_,i,s));const o=Ix(t,i);iu(t,o)}),t.onDisconnect_=Og(),Ur(t.eventQueue_,ht(),r)}function coe(t,e,n){t.server_.onDisconnectCancel(e.toString(),(r,i)=>{r==="ok"&&iS(t.onDisconnect_,e),Mo(t,n,r,i)})}function TR(t,e,n,r){const i=Ut(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(s,o)=>{s==="ok"&&ku(t.onDisconnect_,e,i),Mo(t,r,s,o)})}function uoe(t,e,n,r,i){const s=Ut(n,r);t.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{o==="ok"&&ku(t.onDisconnect_,e,s),Mo(t,i,o,a)})}function doe(t,e,n,r){if(rg(n)){gn("onDisconnect().update() called with empty data.  Don't do anything."),Mo(t,r,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(i,s)=>{i==="ok"&&Sn(n,(o,a)=>{const l=Ut(a);ku(t.onDisconnect_,Mt(e,o),l)}),Mo(t,r,i,s)})}function hoe(t,e,n){let r;Ye(e._path)===".info"?r=dS(t.infoSyncTree_,e,n):r=dS(t.serverSyncTree_,e,n),ZU(t.eventQueue_,e._path,r)}function fS(t,e,n){let r;Ye(e._path)===".info"?r=Bg(t.infoSyncTree_,e,n):r=Bg(t.serverSyncTree_,e,n),ZU(t.eventQueue_,e._path,r)}function rj(t){t.persistentConnection_&&t.persistentConnection_.interrupt(tj)}function foe(t){t.persistentConnection_&&t.persistentConnection_.resume(tj)}function Ru(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),gn(n,...e)}function Mo(t,e,n,r){e&&Cu(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function poe(t,e,n,r,i,s){Ru(t,"transaction on "+e);const o={path:e,update:n,onComplete:r,status:null,order:J$(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=xx(t,e,void 0);o.currentInputSnapshot=a;const l=o.update(a.val());if(l===void 0)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{Jf("transaction failed: Data returned ",l,o.path),o.status=0;const c=r_(t.transactionQueueTree_,e),u=Cl(c)||[];u.push(o),Sx(c,u);let d;typeof l=="object"&&l!==null&&Mr(l,".priority")?(d=Wa(l,".priority"),le(Zh(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(t_(t.serverSyncTree_,e)||Ue.EMPTY_NODE).getPriority().val();const h=ep(t),f=Ut(l,d),p=vx(f,a,h);o.currentOutputSnapshotRaw=f,o.currentOutputSnapshotResolved=p,o.currentWriteId=a_(t);const y=hx(t.serverSyncTree_,e,p,o.currentWriteId,o.applyLocally);Ur(t.eventQueue_,e,y),l_(t,t.transactionQueueTree_)}}function xx(t,e,n){return t_(t.serverSyncTree_,e,n)||Ue.EMPTY_NODE}function l_(t,e=t.transactionQueueTree_){if(e||c_(t,e),Cl(e)){const n=sj(t,e);le(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&moe(t,Xf(e),n)}else KU(e)&&i_(e,n=>{l_(t,n)})}function moe(t,e,n){const r=n.map(c=>c.currentWriteId),i=xx(t,e,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const u=n[c];le(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=nr(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,c=>{Ru(t,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(Zs(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();c_(t,r_(t.transactionQueueTree_,e)),l_(t,t.transactionQueueTree_),Ur(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)Cu(d[h])}else{if(c==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{qn("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}iu(t,e)}},o)}function iu(t,e){const n=ij(t,e),r=Xf(n),i=sj(t,n);return goe(t,i,r),r}function goe(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=nr(n,l.path);let u=!1,d;if(le(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,d=l.abortReason,i=i.concat(Zs(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=noe)u=!0,d="maxretry",i=i.concat(Zs(t.serverSyncTree_,l.currentWriteId,!0));else{const h=xx(t,l.path,o);l.currentInputSnapshot=h;const f=e[a].update(h.val());if(f!==void 0){Jf("transaction failed: Data returned ",f,l.path);let p=Ut(f);typeof f=="object"&&f!=null&&Mr(f,".priority")||(p=p.updatePriority(h.getPriority()));const w=l.currentWriteId,m=ep(t),g=vx(p,h,m);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=g,l.currentWriteId=a_(t),o.splice(o.indexOf(w),1),i=i.concat(hx(t.serverSyncTree_,l.path,g,l.currentWriteId,l.applyLocally)),i=i.concat(Zs(t.serverSyncTree_,w,!0))}else u=!0,d="nodata",i=i.concat(Zs(t.serverSyncTree_,l.currentWriteId,!0))}Ur(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}c_(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Cu(r[a]);l_(t,t.transactionQueueTree_)}function ij(t,e){let n,r=t.transactionQueueTree_;for(n=Ye(e);n!==null&&Cl(r)===void 0;)r=r_(r,n),e=wt(e),n=Ye(e);return r}function sj(t,e){const n=[];return oj(t,e,n),n.sort((r,i)=>r.order-i.order),n}function oj(t,e,n){const r=Cl(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);i_(e,i=>{oj(t,i,n)})}function c_(t,e){const n=Cl(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,Sx(e,n.length>0?n:void 0)}i_(e,r=>{c_(t,r)})}function Ix(t,e){const n=Xf(ij(t,e)),r=r_(t.transactionQueueTree_,e);return qse(r,i=>{F0(t,i)}),F0(t,r),QU(r,i=>{F0(t,i)}),n}function F0(t,e){const n=Cl(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(le(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(le(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Zs(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Sx(e,void 0):n.length=s+1,Ur(t.eventQueue_,Xf(e),i);for(let o=0;o<r.length;o++)Cu(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yoe(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function voe(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):qn(`Invalid query segment '${n}' in query '${t}'`)}return e}const pS=function(t,e){const n=_oe(t),r=n.namespace;n.domain==="firebase.com"&&qi(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&qi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||kre();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new hU(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new pt(n.pathString)}},_oe=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(i=yoe(t.substring(u,d)));const h=voe(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const f=e.slice(0,c);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",woe=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let i;const s=new Array(8);for(i=7;i>=0;i--)s[i]=xR.charAt(n%64),n=Math.floor(n/64);le(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=xR.charAt(e[i]);return le(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+sn(this.snapshot.exportVal())}}class lj{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return le(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Soe=class{constructor(e,n){this._repo=e,this._path=n}cancel(){const e=new hr;return coe(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Yr("OnDisconnect.remove",this._path);const e=new hr;return TR(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Yr("OnDisconnect.set",this._path),Ki("OnDisconnect.set",e,this._path,!1);const n=new hr;return TR(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){Yr("OnDisconnect.setWithPriority",this._path),Ki("OnDisconnect.setWithPriority",e,this._path,!1),bx("OnDisconnect.setWithPriority",n,!1);const r=new hr;return uoe(this._repo,this._path,e,n,r.wrapCallback(()=>{})),r.promise}update(e){Yr("OnDisconnect.update",this._path),XU("OnDisconnect.update",e,this._path,!1);const n=new hr;return doe(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return Xe(this._path)?null:JT(this._path)}get ref(){return new ri(this._repo,this._path)}get _queryIdentifier(){const e=uR(this._queryParams),n=KT(e);return n==="{}"?"default":n}get _queryObject(){return uR(this._queryParams)}isEqual(e){if(e=me(e),!(e instanceof Ir))return!1;const n=this._repo===e._repo,r=ZT(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+die(this._path)}}function u_(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function Xo(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Vi){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Po)throw new Error(r);if(typeof e!="string")throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==xs)throw new Error(r);if(typeof n!="string")throw new Error(i)}}else if(t.getIndex()===Tt){if(e!=null&&!Zh(e)||n!=null&&!Zh(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(le(t.getIndex()instanceof nx||t.getIndex()===rx,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function d_(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ri extends Ir{constructor(e,n){super(e,n,new Yv,!1)}get parent(){const e=SU(this._path);return e===null?null:new ri(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}let h_=class mS{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new pt(e),r=ll(this.ref,e);return new mS(this._node.getChild(n),r,Tt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new mS(i,ll(this.ref,r),Tt)))}hasChild(e){const n=new pt(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function cj(t,e){return t=me(t),t._checkNotDeleted("ref"),e!==void 0?ll(t._root,e):t._root}function IR(t,e){t=me(t),t._checkNotDeleted("refFromURL");const n=pS(e,t._repo.repoInfo_.nodeAdmin);JU("refFromURL",n);const r=n.repoInfo;return!t._repo.repoInfo_.isCustomHost()&&r.host!==t._repo.repoInfo_.host&&qi("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),cj(t,n.path.toString())}function ll(t,e){return t=me(t),Ye(t._path)===null?Zse("child","path",e,!1):ef("child","path",e,!1),new ri(t._repo,Mt(t._path,e))}function boe(t,e){t=me(t),Yr("push",t._path),Ki("push",e,t._path,!0);const n=nj(t._repo),r=woe(n),i=ll(t,r),s=ll(t,r);let o;return e!=null?o=kx(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function Eoe(t){return Yr("remove",t._path),kx(t,null)}function kx(t,e){t=me(t),Yr("set",t._path),Ki("set",e,t._path,!1);const n=new hr;return Tx(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Toe(t,e){t=me(t),Yr("setPriority",t._path),bx("setPriority",e,!1);const n=new hr;return Tx(t._repo,Mt(t._path,".priority"),e,null,n.wrapCallback(()=>{})),n.promise}function xoe(t,e,n){if(Yr("setWithPriority",t._path),Ki("setWithPriority",e,t._path,!1),bx("setWithPriority",n,!1),t.key===".length"||t.key===".keys")throw"setWithPriority failed: "+t.key+" is a read-only object.";const r=new hr;return Tx(t._repo,t._path,e,n,r.wrapCallback(()=>{})),r.promise}function Ioe(t,e){XU("update",e,t._path,!1);const n=new hr;return aoe(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function Coe(t){t=me(t);const e=new Cx(()=>{}),n=new tp(e);return ooe(t._repo,t,n).then(r=>new h_(r,new ri(t._repo,t._path),t._queryParams.getIndex()))}class tp{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new aj("value",this,new h_(e.snapshotNode,new ri(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new lj(this,e,n):null}matches(e){return e instanceof tp?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class f_{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new lj(this,e,n):null}createEvent(e,n){le(e.childName!=null,"Child events should have a childName.");const r=ll(new ri(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new aj(e.type,this,new h_(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof f_?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function np(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){const l=n,c=(u,d)=>{fS(t._repo,t,a),l(u,d)};c.userCallback=n.userCallback,c.context=n.context,n=c}const o=new Cx(n,s||void 0),a=e==="value"?new tp(o):new f_(e,o);return hoe(t._repo,t,a),()=>fS(t._repo,t,a)}function gS(t,e,n,r){return np(t,"value",e,n,r)}function CR(t,e,n,r){return np(t,"child_added",e,n,r)}function kR(t,e,n,r){return np(t,"child_changed",e,n,r)}function AR(t,e,n,r){return np(t,"child_moved",e,n,r)}function RR(t,e,n,r){return np(t,"child_removed",e,n,r)}function NR(t,e,n){let r=null;const i=n?new Cx(n):null;e==="value"?r=new tp(i):e&&(r=new f_(e,i)),fS(t._repo,t,r)}class wi{}class uj extends wi{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){Ki("endAt",this._value,e._path,!0);const n=rS(e._queryParams,this._value,this._key);if(d_(n),Xo(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ir(e._repo,e._path,n,e._orderByCalled)}}function koe(t,e){return Zf("endAt","key",e,!0),new uj(t,e)}class Aoe extends wi{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){Ki("endBefore",this._value,e._path,!1);const n=Fie(e._queryParams,this._value,this._key);if(d_(n),Xo(n),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ir(e._repo,e._path,n,e._orderByCalled)}}function Roe(t,e){return Zf("endBefore","key",e,!0),new Aoe(t,e)}class dj extends wi{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){Ki("startAt",this._value,e._path,!0);const n=nS(e._queryParams,this._value,this._key);if(d_(n),Xo(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ir(e._repo,e._path,n,e._orderByCalled)}}function Noe(t=null,e){return Zf("startAt","key",e,!0),new dj(t,e)}class Poe extends wi{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){Ki("startAfter",this._value,e._path,!1);const n=Mie(e._queryParams,this._value,this._key);if(d_(n),Xo(n),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ir(e._repo,e._path,n,e._orderByCalled)}}function Doe(t,e){return Zf("startAfter","key",e,!0),new Poe(t,e)}class Ooe extends wi{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ir(e._repo,e._path,Oie(e._queryParams,this._limit),e._orderByCalled)}}function Loe(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Ooe(t)}class Moe extends wi{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ir(e._repo,e._path,Lie(e._queryParams,this._limit),e._orderByCalled)}}function Foe(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Moe(t)}class $oe extends wi{constructor(e){super(),this._path=e}_apply(e){u_(e,"orderByChild");const n=new pt(this._path);if(Xe(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new nx(n),i=Xv(e._queryParams,r);return Xo(i),new Ir(e._repo,e._path,i,!0)}}function Uoe(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return ef("orderByChild","path",t,!1),new $oe(t)}class joe extends wi{_apply(e){u_(e,"orderByKey");const n=Xv(e._queryParams,Vi);return Xo(n),new Ir(e._repo,e._path,n,!0)}}function Voe(){return new joe}class Boe extends wi{_apply(e){u_(e,"orderByPriority");const n=Xv(e._queryParams,Tt);return Xo(n),new Ir(e._repo,e._path,n,!0)}}function zoe(){return new Boe}class Woe extends wi{_apply(e){u_(e,"orderByValue");const n=Xv(e._queryParams,rx);return Xo(n),new Ir(e._repo,e._path,n,!0)}}function Hoe(){return new Woe}class Goe extends wi{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){if(Ki("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new uj(this._value,this._key)._apply(new dj(this._value,this._key)._apply(e))}}function qoe(t,e){return Zf("equalTo","key",e,!0),new Goe(t,e)}function si(t,...e){let n=me(t);for(const r of e)n=r._apply(n);return n}xse(ri);Rse(ri);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Koe="FIREBASE_DATABASE_EMULATOR_HOST",yS={};let Qoe=!1;function Yoe(t,e,n,r){t.repoInfo_=new hU(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function hj(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||qi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),gn("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=pS(s,i),a=o.repoInfo,l,c;typeof process<"u"&&process.env&&(c=process.env[Koe]),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=pS(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const u=i&&l?new _c(_c.OWNER):new Ure(t.name,t.options,e);JU("Invalid Firebase Database URL",o),Xe(o.path)||qi("Database URL must point to the root of a Firebase Database (not including a child path).");const d=Joe(a,t,u,new $re(t.name,n));return new Zoe(d,t)}function Xoe(t,e){const n=yS[e];(!n||n[t.key]!==t)&&qi(`Database ${e}(${t.repoInfo_}) has already been deleted.`),rj(t),delete n[t.key]}function Joe(t,e,n,r){let i=yS[e.name];i||(i={},yS[e.name]=i);let s=i[t.toURLString()];return s&&qi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new roe(t,Qoe,n,r),i[t.toURLString()]=s,s}let Zoe=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(ioe(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ri(this._repo,ht())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Xoe(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&qi("Cannot call "+e+" on a deleted database.")}};function fj(){eu.IS_TRANSPORT_INITIALIZED&&qn("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function eae(){fj(),Js.forceDisallow()}function tae(){fj(),Gr.forceDisallow(),Js.forceAllow()}function nae(t,e,n,r={}){t=me(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&qi("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&qi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new _c(_c.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:sE(r.mockUserToken,t.app.options.projectId);s=new _c(o)}Yoe(i,e,n,s)}function rae(t){t=me(t),t._checkNotDeleted("goOffline"),rj(t._repo)}function iae(t){t=me(t),t._checkNotDeleted("goOnline"),foe(t._repo)}function sae(t,e){eU(t,e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oae(t){Y$(As),zi(new sr("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return hj(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Er(qA,KA,t),Er(qA,KA,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aae={".sv":"timestamp"};function lae(){return aae}function cae(t){return{".sv":{increment:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uae=class{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}};function dae(t,e,n){var r;if(t=me(t),Yr("Reference.transaction",t._path),t.key===".length"||t.key===".keys")throw"Reference.transaction failed: "+t.key+" is a read-only object.";const i=(r=n==null?void 0:n.applyLocally)!==null&&r!==void 0?r:!0,s=new hr,o=(l,c,u)=>{let d=null;l?s.reject(l):(d=new h_(u,new ri(t._repo,t._path),Tt),s.resolve(new uae(c,d)))},a=gS(t,()=>{});return poe(t._repo,t._path,e,o,a,i),s.promise}fs.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};fs.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};oae();const hae="@firebase/database-compat",fae="0.3.4";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pae=new hu("@firebase/database-compat"),pj=function(t){const e="FIREBASE WARNING: "+t;pae.warn(e)};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mae=function(t,e,n,r){if(!(r&&n===void 0)&&typeof n!="boolean")throw new Error(br(t,e)+"must be a boolean.")},gae=function(t,e,n){if(!(n&&e===void 0))switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(br(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yae{constructor(e){this._delegate=e}cancel(e){je("OnDisconnect.cancel",0,1,arguments.length),fn("OnDisconnect.cancel","onComplete",e,!0);const n=this._delegate.cancel();return e&&n.then(()=>e(null),r=>e(r)),n}remove(e){je("OnDisconnect.remove",0,1,arguments.length),fn("OnDisconnect.remove","onComplete",e,!0);const n=this._delegate.remove();return e&&n.then(()=>e(null),r=>e(r)),n}set(e,n){je("OnDisconnect.set",1,2,arguments.length),fn("OnDisconnect.set","onComplete",n,!0);const r=this._delegate.set(e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){je("OnDisconnect.setWithPriority",2,3,arguments.length),fn("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,n);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,n){if(je("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,pj("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}fn("OnDisconnect.update","onComplete",n,!0);const r=this._delegate.update(e);return n&&r.then(()=>n(null),i=>n(i)),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vae{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return je("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,n){this._database=e,this._delegate=n}val(){return je("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return je("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return je("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return je("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return je("DataSnapshot.child",0,1,arguments.length),e=String(e),ef("DataSnapshot.child","path",e,!1),new go(this._database,this._delegate.child(e))}hasChild(e){return je("DataSnapshot.hasChild",1,1,arguments.length),ef("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return je("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return je("DataSnapshot.forEach",1,1,arguments.length),fn("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(n=>e(new go(this._database,n)))}hasChildren(){return je("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return je("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return je("DataSnapshot.ref",0,0,arguments.length),new Ea(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class In{constructor(e,n){this.database=e,this._delegate=n}on(e,n,r,i){var s;je("Query.on",2,4,arguments.length),fn("Query.on","callback",n,!1);const o=In.getCancelAndContextArgs_("Query.on",r,i),a=(c,u)=>{n.call(o.context,new go(this.database,c),u)};a.userCallback=n,a.context=o.context;const l=(s=o.cancel)===null||s===void 0?void 0:s.bind(o.context);switch(e){case"value":return gS(this._delegate,a,l),n;case"child_added":return CR(this._delegate,a,l),n;case"child_removed":return RR(this._delegate,a,l),n;case"child_changed":return kR(this._delegate,a,l),n;case"child_moved":return AR(this._delegate,a,l),n;default:throw new Error(br("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,n,r){if(je("Query.off",0,3,arguments.length),gae("Query.off",e,!0),fn("Query.off","callback",n,!0),nk("Query.off","context",r,!0),n){const i=()=>{};i.userCallback=n,i.context=r,NR(this._delegate,e,i)}else NR(this._delegate,e)}get(){return Coe(this._delegate).then(e=>new go(this.database,e))}once(e,n,r,i){je("Query.once",1,4,arguments.length),fn("Query.once","callback",n,!0);const s=In.getCancelAndContextArgs_("Query.once",r,i),o=new hr,a=(c,u)=>{const d=new go(this.database,c);n&&n.call(s.context,d,u),o.resolve(d)};a.userCallback=n,a.context=s.context;const l=c=>{s.cancel&&s.cancel.call(s.context,c),o.reject(c)};switch(e){case"value":gS(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":CR(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":RR(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":kR(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":AR(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error(br("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return je("Query.limitToFirst",1,1,arguments.length),new In(this.database,si(this._delegate,Loe(e)))}limitToLast(e){return je("Query.limitToLast",1,1,arguments.length),new In(this.database,si(this._delegate,Foe(e)))}orderByChild(e){return je("Query.orderByChild",1,1,arguments.length),new In(this.database,si(this._delegate,Uoe(e)))}orderByKey(){return je("Query.orderByKey",0,0,arguments.length),new In(this.database,si(this._delegate,Voe()))}orderByPriority(){return je("Query.orderByPriority",0,0,arguments.length),new In(this.database,si(this._delegate,zoe()))}orderByValue(){return je("Query.orderByValue",0,0,arguments.length),new In(this.database,si(this._delegate,Hoe()))}startAt(e=null,n){return je("Query.startAt",0,2,arguments.length),new In(this.database,si(this._delegate,Noe(e,n)))}startAfter(e=null,n){return je("Query.startAfter",0,2,arguments.length),new In(this.database,si(this._delegate,Doe(e,n)))}endAt(e=null,n){return je("Query.endAt",0,2,arguments.length),new In(this.database,si(this._delegate,koe(e,n)))}endBefore(e=null,n){return je("Query.endBefore",0,2,arguments.length),new In(this.database,si(this._delegate,Roe(e,n)))}equalTo(e,n){return je("Query.equalTo",1,2,arguments.length),new In(this.database,si(this._delegate,qoe(e,n)))}toString(){return je("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return je("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(je("Query.isEqual",1,1,arguments.length),!(e instanceof In)){const n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,n,r){const i={cancel:void 0,context:void 0};if(n&&r)i.cancel=n,fn(e,"cancel",i.cancel,!0),i.context=r,nk(e,"context",i.context,!0);else if(n)if(typeof n=="object"&&n!==null)i.context=n;else if(typeof n=="function")i.cancel=n;else throw new Error(br(e,"cancelOrContext")+" must either be a cancel callback or a context object.");return i}get ref(){return new Ea(this.database,new ri(this._delegate._repo,this._delegate._path))}}let Ea=class jl extends In{constructor(e,n){super(e,new Ir(n._repo,n._path,new Yv,!1)),this.database=e,this._delegate=n}getKey(){return je("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return je("Reference.child",1,1,arguments.length),typeof e=="number"&&(e=String(e)),new jl(this.database,ll(this._delegate,e))}getParent(){je("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new jl(this.database,e):null}getRoot(){return je("Reference.root",0,0,arguments.length),new jl(this.database,this._delegate.root)}set(e,n){je("Reference.set",1,2,arguments.length),fn("Reference.set","onComplete",n,!0);const r=kx(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}update(e,n){if(je("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,pj("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Yr("Reference.update",this._delegate._path),fn("Reference.update","onComplete",n,!0);const r=Ioe(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){je("Reference.setWithPriority",2,3,arguments.length),fn("Reference.setWithPriority","onComplete",r,!0);const i=xoe(this._delegate,e,n);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){je("Reference.remove",0,1,arguments.length),fn("Reference.remove","onComplete",e,!0);const n=Eoe(this._delegate);return e&&n.then(()=>e(null),r=>e(r)),n}transaction(e,n,r){je("Reference.transaction",1,3,arguments.length),fn("Reference.transaction","transactionUpdate",e,!1),fn("Reference.transaction","onComplete",n,!0),mae("Reference.transaction","applyLocally",r,!0);const i=dae(this._delegate,e,{applyLocally:r}).then(s=>new vae(s.committed,new go(this.database,s.snapshot)));return n&&i.then(s=>n(null,s.committed,s.snapshot),s=>n(s,!1,null)),i}setPriority(e,n){je("Reference.setPriority",1,2,arguments.length),fn("Reference.setPriority","onComplete",n,!0);const r=Toe(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}push(e,n){je("Reference.push",0,2,arguments.length),fn("Reference.push","onComplete",n,!0);const r=boe(this._delegate,e),i=r.then(o=>new jl(this.database,o));n&&i.then(()=>n(null),o=>n(o));const s=new jl(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return Yr("Reference.onDisconnect",this._delegate._path),new yae(new Soe(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,n){this._delegate=e,this.app=n,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:eae,forceLongPolling:tae}}useEmulator(e,n,r={}){nae(this._delegate,e,n,r)}ref(e){if(je("database.ref",0,1,arguments.length),e instanceof Ea){const n=IR(this._delegate,e.toString());return new Ea(this,n)}else{const n=cj(this._delegate,e);return new Ea(this,n)}}refFromURL(e){je("database.refFromURL",1,1,arguments.length);const r=IR(this._delegate,e);return new Ea(this,r)}goOffline(){return je("database.goOffline",0,0,arguments.length),rae(this._delegate)}goOnline(){return je("database.goOnline",0,0,arguments.length),iae(this._delegate)}}tf.ServerValue={TIMESTAMP:lae(),increment:t=>cae(t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _ae({app:t,url:e,version:n,customAuthImpl:r,namespace:i,nodeAdmin:s=!1}){Y$(n);const o=new _L("auth-internal",new wL("database-standalone"));return o.setComponent(new sr("auth-internal",()=>r,"PRIVATE")),{instance:new tf(hj(t,o,void 0,e,s),t),namespace:i}}var wae=Object.freeze({__proto__:null,initStandalone:_ae});/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sae=tf.ServerValue;function bae(t){t.INTERNAL.registerComponent(new sr("database-compat",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new tf(i,r)},"PUBLIC").setServiceProps({Reference:Ea,Query:In,Database:tf,DataSnapshot:go,enableLogging:sae,INTERNAL:wae,ServerValue:Sae}).setMultipleInstances(!0)),t.registerVersion(hae,fae)}bae(Qn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mj="firebasestorage.googleapis.com",gj="storageBucket",Eae=2*60*1e3,Tae=10*60*1e3,xae=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt extends Wn{constructor(e,n,r=0){super($0(e),`Firebase Storage: ${n} (${$0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,zt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return $0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Rt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Rt||(Rt={}));function $0(t){return"storage/"+t}function Ax(){const t="An unknown error occurred, please check the error payload for server response.";return new zt(Rt.UNKNOWN,t)}function Iae(t){return new zt(Rt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Cae(t){return new zt(Rt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function kae(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new zt(Rt.UNAUTHENTICATED,t)}function Aae(){return new zt(Rt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Rae(t){return new zt(Rt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function yj(){return new zt(Rt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function vj(){return new zt(Rt.CANCELED,"User canceled the upload/download.")}function Nae(t){return new zt(Rt.INVALID_URL,"Invalid URL '"+t+"'.")}function Pae(t){return new zt(Rt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Dae(){return new zt(Rt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+gj+"' property when initializing the app?")}function _j(){return new zt(Rt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Oae(){return new zt(Rt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function Lae(){return new zt(Rt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Mae(t){return new zt(Rt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function wc(t){return new zt(Rt.INVALID_ARGUMENT,t)}function wj(){return new zt(Rt.APP_DELETED,"The Firebase app was deleted.")}function Sj(t){return new zt(Rt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Qd(t,e){return new zt(Rt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function ad(t){throw new zt(Rt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Bn.makeFromUrl(e,n)}catch{return new Bn(e,"")}if(r.path==="")return r;throw Pae(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(b){b.path.charAt(b.path.length-1)==="/"&&(b.path_=b.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(b){b.path_=decodeURIComponent(b.path)}const u="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",f=new RegExp(`^https?://${d}/${u}/b/${i}/o${h}`,"i"),p={bucket:1,path:3},y=n===mj?"(?:storage.googleapis.com|storage.cloud.google.com)":n,w="([^?#]*)",m=new RegExp(`^https?://${y}/${i}/${w}`,"i"),v=[{regex:a,indices:l,postModify:s},{regex:f,indices:p,postModify:c},{regex:m,indices:{bucket:1,path:2},postModify:c}];for(let b=0;b<v.length;b++){const I=v[b],E=I.regex.exec(e);if(E){const D=E[I.indices.bucket];let S=E[I.indices.path];S||(S=""),r=new Bn(D,S),I.postModify(r);break}}if(r==null)throw Nae(e);return r}}class Fae{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $ae(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...w){c||(c=!0,e.apply(null,w))}function d(w){i=setTimeout(()=>{i=null,t(f,l())},w)}function h(){s&&clearTimeout(s)}function f(w,...m){if(c){h();return}if(w){h(),u.call(null,w,...m);return}if(l()||o){h(),u.call(null,w,...m);return}r<64&&(r*=2);let v;a===1?(a=2,v=0):v=(r+Math.random())*1e3,d(v)}let p=!1;function y(w){p||(p=!0,h(),!c&&(i!==null?(w||(a=2),clearTimeout(i),d(0)):w||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,y(!0)},n),y}function Uae(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jae(t){return t!==void 0}function Vae(t){return typeof t=="function"}function Bae(t){return typeof t=="object"&&!Array.isArray(t)}function p_(t){return typeof t=="string"||t instanceof String}function PR(t){return Rx()&&t instanceof Blob}function Rx(){return typeof Blob<"u"&&!Xy()}function vS(t,e,n,r){if(r<e)throw wc(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw wc(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jo(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function bj(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oa;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Oa||(Oa={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ej(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zae{constructor(e,n,r,i,s,o,a,l,c,u,d,h=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,p)=>{this.resolve_=f,this.reject_=p,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Bp(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Oa.NO_ERROR,l=s.getStatus();if(!a||Ej(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===Oa.ABORT;r(!1,new Bp(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Bp(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());jae(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=Ax();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?wj():vj();o(l)}else{const l=yj();o(l)}};this.canceled_?n(!1,new Bp(!1,null,!0)):this.backoffId_=$ae(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Uae(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Bp{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Wae(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Hae(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Gae(t,e){e&&(t["X-Firebase-GMPID"]=e)}function qae(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Kae(t,e,n,r,i,s,o=!0){const a=bj(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return Gae(c,e),Wae(c,n),Hae(c,s),qae(c,r),new zae(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qae(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Yae(...t){const e=Qae();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Rx())return new Blob(t);throw new zt(Rt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Xae(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jae(t){if(typeof atob>"u")throw Mae("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class U0{constructor(e,n){this.data=e,this.contentType=n||null}}function Tj(t,e){switch(t){case Xr.RAW:return new U0(xj(e));case Xr.BASE64:case Xr.BASE64URL:return new U0(Ij(t,e));case Xr.DATA_URL:return new U0(ele(e),tle(e))}throw Ax()}function xj(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Zae(t){let e;try{e=decodeURIComponent(t)}catch{throw Qd(Xr.DATA_URL,"Malformed data URL.")}return xj(e)}function Ij(t,e){switch(t){case Xr.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Qd(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Xr.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Qd(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Jae(e)}catch(i){throw i.message.includes("polyfill")?i:Qd(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class Cj{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Qd(Xr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=nle(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function ele(t){const e=new Cj(t);return e.base64?Ij(Xr.BASE64,e.rest):Zae(e.rest)}function tle(t){return new Cj(t).contentType}function nle(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,n){let r=0,i="";PR(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(PR(this.data_)){const r=this.data_,i=Xae(r,e,n);return i===null?null:new Pi(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Pi(r,!0)}}static getBlob(...e){if(Rx()){const n=e.map(r=>r instanceof Pi?r.data_:r);return new Pi(Yae.apply(null,n))}else{const n=e.map(o=>p_(o)?Tj(Xr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Pi(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx(t){let e;try{e=JSON.parse(t)}catch{return null}return Bae(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rle(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function ile(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function kj(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sle(t,e){return e}class Xn{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||sle}}let zp=null;function ole(t){return!p_(t)||t.length<2?t:kj(t)}function rp(){if(zp)return zp;const t=[];t.push(new Xn("bucket")),t.push(new Xn("generation")),t.push(new Xn("metageneration")),t.push(new Xn("name","fullPath",!0));function e(s,o){return ole(o)}const n=new Xn("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Xn("size");return i.xform=r,t.push(i),t.push(new Xn("timeCreated")),t.push(new Xn("updated")),t.push(new Xn("md5Hash",null,!0)),t.push(new Xn("cacheControl",null,!0)),t.push(new Xn("contentDisposition",null,!0)),t.push(new Xn("contentEncoding",null,!0)),t.push(new Xn("contentLanguage",null,!0)),t.push(new Xn("contentType",null,!0)),t.push(new Xn("metadata","customMetadata",!0)),zp=t,zp}function ale(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Bn(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function lle(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return ale(r,t),r}function Aj(t,e,n){const r=Nx(e);return r===null?null:lle(t,r,n)}function cle(t,e,n,r){const i=Nx(e);if(i===null||!p_(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const u=t.bucket,d=t.fullPath,h="/b/"+o(u)+"/o/"+o(d),f=Jo(h,n,r),p=bj({alt:"media",token:c});return f+p})[0]}function Px(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR="prefixes",OR="items";function ule(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[DR])for(const i of n[DR]){const s=i.replace(/\/$/,""),o=t._makeStorageReference(new Bn(e,s));r.prefixes.push(o)}if(n[OR])for(const i of n[OR]){const s=t._makeStorageReference(new Bn(e,i.name));r.items.push(s)}return r}function dle(t,e,n){const r=Nx(n);return r===null?null:ule(t,e,r)}class Ls{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bi(t){if(!t)throw Ax()}function m_(t,e){function n(r,i){const s=Aj(t,i,e);return Bi(s!==null),s}return n}function hle(t,e){function n(r,i){const s=dle(t,e,i);return Bi(s!==null),s}return n}function fle(t,e){function n(r,i){const s=Aj(t,i,e);return Bi(s!==null),cle(s,i,t.host,t._protocol)}return n}function Nu(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=Aae():i=kae():n.getStatus()===402?i=Cae(t.bucket):n.getStatus()===403?i=Rae(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function g_(t){const e=Nu(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=Iae(t.path)),s.serverResponse=i.serverResponse,s}return n}function Rj(t,e,n){const r=e.fullServerUrl(),i=Jo(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new Ls(i,s,m_(t,n),o);return a.errorHandler=g_(e),a}function ple(t,e,n,r,i){const s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=e.bucketOnlyServerUrl(),a=Jo(o,t.host,t._protocol),l="GET",c=t.maxOperationRetryTime,u=new Ls(a,l,hle(t,e.bucket),c);return u.urlParams=s,u.errorHandler=Nu(e),u}function mle(t,e,n){const r=e.fullServerUrl(),i=Jo(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new Ls(i,s,fle(t,n),o);return a.errorHandler=g_(e),a}function gle(t,e,n,r){const i=e.fullServerUrl(),s=Jo(i,t.host,t._protocol),o="PATCH",a=Px(n,r),l={"Content-Type":"application/json; charset=utf-8"},c=t.maxOperationRetryTime,u=new Ls(s,o,m_(t,r),c);return u.headers=l,u.body=a,u.errorHandler=g_(e),u}function yle(t,e){const n=e.fullServerUrl(),r=Jo(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(l,c){}const a=new Ls(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=g_(e),a}function vle(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Nj(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=vle(null,e)),r}function Pj(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let v="";for(let b=0;b<2;b++)v=v+Math.random().toString().slice(2);return v}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=Nj(e,r,i),u=Px(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,h=`\r
--`+l+"--",f=Pi.getBlob(d,r,h);if(f===null)throw _j();const p={name:c.fullPath},y=Jo(s,t.host,t._protocol),w="POST",m=t.maxUploadRetryTime,g=new Ls(y,w,m_(t,n),m);return g.urlParams=p,g.headers=o,g.body=f.uploadData(),g.errorHandler=Nu(e),g}class zg{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function Dx(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Bi(!1)}return Bi(!!n&&(e||["active"]).indexOf(n)!==-1),n}function _le(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o=Nj(e,r,i),a={name:o.fullPath},l=Jo(s,t.host,t._protocol),c="POST",u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},d=Px(o,n),h=t.maxUploadRetryTime;function f(y){Dx(y);let w;try{w=y.getResponseHeader("X-Goog-Upload-URL")}catch{Bi(!1)}return Bi(p_(w)),w}const p=new Ls(l,c,f,h);return p.urlParams=a,p.headers=u,p.body=d,p.errorHandler=Nu(e),p}function wle(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function s(c){const u=Dx(c,["active","final"]);let d=null;try{d=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Bi(!1)}d||Bi(!1);const h=Number(d);return Bi(!isNaN(h)),new zg(h,r.size(),u==="final")}const o="POST",a=t.maxUploadRetryTime,l=new Ls(n,o,s,a);return l.headers=i,l.errorHandler=Nu(e),l}const LR=256*1024;function Sle(t,e,n,r,i,s,o,a){const l=new zg(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw Oae();const c=l.total-l.current;let u=c;i>0&&(u=Math.min(u,i));const d=l.current,h=d+u;let f="";u===0?f="finalize":c===u?f="upload, finalize":f="upload";const p={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":`${l.current}`},y=r.slice(d,h);if(y===null)throw _j();function w(b,I){const E=Dx(b,["active","final"]),D=l.current+u,S=r.size();let T;return E==="final"?T=m_(e,s)(b,I):T=null,new zg(D,S,E==="final",T)}const m="POST",g=e.maxUploadRetryTime,v=new Ls(n,m,w,g);return v.headers=p,v.body=y.uploadData(),v.progressCallback=a||null,v.errorHandler=Nu(t),v}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ble={STATE_CHANGED:"state_changed"},er={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function j0(t){switch(t){case"running":case"pausing":case"canceling":return er.RUNNING;case"paused":return er.PAUSED;case"success":return er.SUCCESS;case"canceled":return er.CANCELED;case"error":return er.ERROR;default:return er.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ele=class{constructor(e,n,r){if(Vae(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class Tle{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Oa.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Oa.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Oa.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw ad("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ad("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ad("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ad("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ad("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class xle extends Tle{initXhr(){this.xhr_.responseType="text"}}function di(){return new xle}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=rp(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Rt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(Ej(i.status,[]))if(s)i=yj();else{this.sleepTime=Math.max(this.sleepTime*2,xae),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Rt.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=_le(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,di,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=wle(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,di,n,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=LR*this._chunkMultiplier,n=new zg(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=Sle(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,di,i,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){LR*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=Rj(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,di,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=Pj(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,di,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=vj(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=j0(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const s=new Ele(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(j0(this._state)){case er.SUCCESS:Ml(this._resolve.bind(null,this.snapshot))();break;case er.CANCELED:case er.ERROR:const n=this._reject;Ml(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(j0(this._state)){case er.RUNNING:case er.PAUSED:e.next&&Ml(e.next.bind(e,this.snapshot))();break;case er.SUCCESS:e.complete&&Ml(e.complete.bind(e))();break;case er.CANCELED:case er.ERROR:e.error&&Ml(e.error.bind(e,this._error))();break;default:e.error&&Ml(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,n){this._service=e,n instanceof Bn?this._location=n:this._location=Bn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new cl(e,n)}get root(){const e=new Bn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return kj(this._location.path)}get storage(){return this._service}get parent(){const e=rle(this._location.path);if(e===null)return null;const n=new Bn(this._location.bucket,e);return new cl(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Sj(e)}}function Ile(t,e,n){t._throwIfRoot("uploadBytes");const r=Pj(t.storage,t._location,rp(),new Pi(e,!0),n);return t.storage.makeRequestWithTokens(r,di).then(i=>({metadata:i,ref:t}))}function Cle(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Dj(t,new Pi(e),n)}function kle(t){const e={prefixes:[],items:[]};return Oj(t,e).then(()=>e)}async function Oj(t,e,n){const i=await Lj(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&await Oj(t,e,i.nextPageToken)}function Lj(t,e){e!=null&&typeof e.maxResults=="number"&&vS("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=ple(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,di)}function Ale(t){t._throwIfRoot("getMetadata");const e=Rj(t.storage,t._location,rp());return t.storage.makeRequestWithTokens(e,di)}function Rle(t,e){t._throwIfRoot("updateMetadata");const n=gle(t.storage,t._location,e,rp());return t.storage.makeRequestWithTokens(n,di)}function Nle(t){t._throwIfRoot("getDownloadURL");const e=mle(t.storage,t._location,rp());return t.storage.makeRequestWithTokens(e,di).then(n=>{if(n===null)throw Lae();return n})}function Ple(t){t._throwIfRoot("deleteObject");const e=yle(t.storage,t._location);return t.storage.makeRequestWithTokens(e,di)}function Mj(t,e){const n=ile(t._location.path,e),r=new Bn(t._location.bucket,n);return new cl(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dle(t){return/^[A-Za-z]+:\/\//.test(t)}function Ole(t,e){return new cl(t,e)}function Fj(t,e){if(t instanceof Ox){const n=t;if(n._bucket==null)throw Dae();const r=new cl(n,n._bucket);return e!=null?Fj(r,e):r}else return e!==void 0?Mj(t,e):t}function Lle(t,e){if(e&&Dle(e)){if(t instanceof Ox)return Ole(t,e);throw wc("To use ref(service, url), the first argument must be a Storage instance.")}else return Fj(t,e)}function MR(t,e){const n=e==null?void 0:e[gj];return n==null?null:Bn.makeFromBucketSpec(n,t)}function Mle(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:sE(i,t.app.options.projectId))}class Ox{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=mj,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Eae,this._maxUploadRetryTime=Tae,this._requests=new Set,i!=null?this._bucket=Bn.makeFromBucketSpec(i,this._host):this._bucket=MR(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Bn.makeFromBucketSpec(this._url,e):this._bucket=MR(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){vS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){vS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new cl(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new Fae(wj());{const o=Kae(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const FR="@firebase/storage",$R="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $j="storage";function Fle(t,e,n){return t=me(t),Ile(t,e,n)}function $le(t,e,n){return t=me(t),Cle(t,e,n)}function Ule(t){return t=me(t),Ale(t)}function jle(t,e){return t=me(t),Rle(t,e)}function Vle(t,e){return t=me(t),Lj(t,e)}function Ble(t){return t=me(t),kle(t)}function Uj(t){return t=me(t),Nle(t)}function zle(t){return t=me(t),Ple(t)}function Wg(t,e){return t=me(t),Lle(t,e)}function Wle(t,e){return Mj(t,e)}function Hle(t=xL(),e){t=me(t);const r=cE(t,$j).getImmediate({identifier:e}),i=ZK("storage");return i&&jj(r,...i),r}function jj(t,e,n,r={}){Mle(t,e,n,r)}function Gle(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Ox(n,r,i,e,As)}function qle(){zi(new sr($j,Gle,"PUBLIC").setMultipleInstances(!0)),Er(FR,$R,""),Er(FR,$R,"esm2017")}qle();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Wp(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new Wp(r,this,this._ref))},n)}on(e,n,r,i){let s;return n&&(typeof n=="function"?s=o=>n(new Wp(o,this,this._ref)):s={next:n.next?o=>n.next(new Wp(o,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class jR{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new ps(e,this._service))}get items(){return this._delegate.items.map(e=>new ps(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=Wle(this._delegate,e);return new ps(n,this.storage)}get root(){return new ps(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new ps(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new UR($le(this._delegate,e,n),this)}putString(e,n=Xr.RAW,r){this._throwIfRoot("putString");const i=Tj(n,e),s=Object.assign({},r);return s.contentType==null&&i.contentType!=null&&(s.contentType=i.contentType),new UR(new Dj(this._delegate,new Pi(i.data,!0),s),this)}listAll(){return Ble(this._delegate).then(e=>new jR(e,this.storage))}list(e){return Vle(this._delegate,e||void 0).then(n=>new jR(n,this.storage))}getMetadata(){return Ule(this._delegate)}updateMetadata(e){return jle(this._delegate,e)}getDownloadURL(){return Uj(this._delegate)}delete(){return this._throwIfRoot("delete"),zle(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw Sj(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(VR(e))throw wc("ref() expected a child path but got a URL, use refFromURL instead.");return new ps(Wg(this._delegate,e),this)}refFromURL(e){if(!VR(e))throw wc("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Bn.makeFromUrl(e,this._delegate.host)}catch{throw wc("refFromUrl() expected a valid full URL but got an invalid one.")}return new ps(Wg(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){jj(this._delegate,e,n,r)}}function VR(t){return/^[A-Za-z]+:\/\//.test(t)}const Kle="@firebase/storage-compat",Qle="0.3.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yle="storage-compat";function Xle(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new Vj(n,r)}function Jle(t){const e={TaskState:er,TaskEvent:ble,StringFormat:Xr,Storage:Vj,Reference:ps};t.INTERNAL.registerComponent(new sr(Yle,Xle,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(Kle,Qle)}Jle(Qn);const Zle={apiKey:"AIzaSyAOumwOGF_a3j3v5RqF_OzMEzNrlASGRyE",authDomain:"potato-market-lab18.firebaseapp.com",projectId:"potato-market-lab18",storageBucket:"potato-market-lab18.appspot.com",messagingSenderId:"862520392764",appId:"1:862520392764:web:fa40b5561ca057dcfa5739"};Qn.initializeApp(Zle);Qn.database();const _S=Qn.auth(),ms=Qn.firestore(),ece=Qn.storage(),vm=ms.collection("users"),y_=ms.collection("UserWrite"),tce=Qn.auth(),nce=async()=>{try{await tce.signOut()}catch(t){console.error(t)}};function rce(){return _.jsx("button",{type:"button",onClick:nce,children:""})}const v_=My({key:"userId",default:null}),ip=My({key:"userInformation",default:{uid:"",location:"",agree:"",email:"",nickname:"",phoneNumber:"",profileImage:""}}),ice="/assets/chat-bg-f9f7e2e8.svg",sce="/assets/chat-close-button-c0fb89b0.svg",oce="/assets/chat-send-e70e75a8.svg",ace="/assets/chat_reset-fdfcdda8.svg";function lce(){const t=H.useRef(),[e,n]=H.useState(0),[r]=Lr(ip),[i,s]=Lr(rE);let[o,a]=H.useState({chat:[]});const l=H.useRef(),c=Es(ms,"comment","kviERzom8LpJItP3g23N"),u=zh(c),d=ms.collection("comment");return e||(u.then(h=>{a(h.data())}),n(1)),H.useEffect(()=>(async()=>{Jc(d,()=>{n(0)})})(),[Jc]),H.useMemo(()=>{setTimeout(()=>{l.current.scrollTop=l.current.scrollHeight},150)},[e]),_.jsx(_.Fragment,{children:i==!0?_.jsxs(cce,{children:[_.jsxs("div",{className:"header-div",children:[_.jsx("h2",{className:"chat-h2",children:"  "}),_.jsx("button",{className:"reset-button",type:"button",onClick:()=>{il(c,{chat:[]}).then(()=>{u.then(()=>{n(0)})})}}),_.jsx("button",{className:"chat-false-button",type:"button",onClick:()=>{s(!1)}})]}),_.jsx("div",{className:"div-warpper",children:_.jsx("ul",{ref:l,children:e?o.chat.map((h,f)=>_.jsxs("li",{children:[_.jsx("img",{alt:h.img,src:h.img}),_.jsxs("div",{className:"chat-line",children:[_.jsx("p",{children:h.coment}),_.jsxs("p",{className:"time-class",children:[h.time.slice(7,23),"  ",h.id]})]})]},f)):_.jsx("p",{children:""})})}),_.jsx("div",{className:"comment-div",children:_.jsxs("div",{className:"comment-wrapper-div",children:[_.jsx("input",{ref:t,type:"text"}),_.jsx("button",{className:"send-button",type:"button",onClick:()=>{const h=Es(ms,"comment","kviERzom8LpJItP3g23N"),f=zh(h);f.then(p=>{o=p.data(),o.chat.push({id:r.nickname,coment:t.current.value,time:Date(),img:r.profileImage}),t.current.value="",il(h,o).then(()=>{f.then(()=>{n(0)})})})}})]})})]}):null})}const cce=de.div`
  z-index:9999;
  border-radius: 10px;
  background: #FBF7F2 url(${ice}) no-repeat ;
  background-position: 0% 100%;
  position: fixed;
  right: 0;
  top: 23%;
  margin-right: 35px;
  width: 432.9px;
  height: 400px;
  box-shadow: 0 3px 7px 3px rgb(0 0 0 / 7%);

  button:focus{
    outline-offset: -7px;
    outline-width: medium;
    outline-color: #AFDBAF;
  }

  & .header-div{
    width: 100%;
    position: relative;
    justify-content: flex-start;
    display:flex;
    align-items: center;
    border-radius: 10px 10px 0px 0px;
    color:black;
    height: 30px;
    background: #ffffff;
    width: 432.9px;
    font-weight: 500;
    padding: 0 20px;
    box-sizing: border-box;
  }
  & .chat-h2{
    width: 100%;
    height: 30px;
    line-height: 30px;
    margin:0;
    font-size:15px;
  }

  & .chat-false-button, & .reset-button{
    position:absolute;
    border-radius: 50%;
    border:none;
    width: 35px;
    height: 35px;
    background-color: pink;
  }
  & .chat-false-button{
    background: url(${sce}) no-repeat, 100%;
    background-position: center;
    right:10px;
  }
  & .reset-button{
    right: 30px;
    background: url(${ace}) no-repeat, 100%;
    background-position: center;
  }

  & .time-class{
    font-size:8px;
    position: absolute;
    bottom:-8px;
  }
  & .notice{
    color:white;
    background-color: gray;
  }  

  & ul{
    width: 405px;
    margin:5px 0;
    padding: 10px;
    overflow: auto;
    overflow-x: hidden;
    text-overflow:ellipsis;
    height: 270px;
  }
  & ul::-webkit-scrollbar {
    width: 12px;
  }
  & ul::-webkit-scrollbar-thumb {
    height: 30%;
    background: #AFDBAF;
    border-radius: 10px;
  }
  & ul::-webkit-scrollbar-track {
    background: white;
    border-radius: 10px;
  }
  & li{
    position: relative;
    display:flex;
    align-items: center;
    margin-bottom:8px;
    
  }
  & li img{
    margin: 10px 10px 0 10px;
    border-radius: 50%;
    width: 35px;
    height: 35px;
  }

  & .chat-line{
    min-height: 20px;
    margin-bottom:5px;
    margin-top: 10px;
    padding:5px;
    border-radius: 10px;
    border: 0.666px solid #F2F3F6;
    display: flex;
    align-items: center;
    background: #FFFFFF;
    max-width: 335px;
    letter-spacing: 1px;
  }
  & .chat-line p{
    max-width: 335px;
  }

  & li p:first-child{
    margin-right: 5px;
    margin-left: 5px;
    flex-shrink: 0;
  }
  & li p:nth{
    margin-right:10px;
    flex-shrink: 0;
  }

  & .comment-div{
    gap:5px;
    display:flex;
    justify-content: center;
    position: relative;
    margin-top: 20px;
    overflow: hidden;
    font-size: 15px;
  }
  & .comment-div input:focus {
    outline: none;
  }  
  & .comment-div input{
    padding:0 15px;
    margin:0 auto;
    width: 250px;
    height: 30px;
    border: none;
    border-radius: 15px;
  }
  & .comment-wrapper-div{
    position: relative;
  }
  
  & .send-button{
    position: absolute;
    border: none;
    border-radius: 50%;
    width: 35px;
    height: 35px;
    background: url(${oce}) no-repeat, 100%;
    background-position: center;
    right: 5px;
    top: -3px;
  }
  & .send-button img{
    width: 100%;
  }
`;function uce(){const[t,e]=Lr(v_),[n,r]=Lr(ip),[i,s]=H.useState(0);return H.useEffect(()=>{Qn.auth().onAuthStateChanged(o=>{if(o){Qn.firestore().collection("users").doc(o.uid).get().then(u=>{console.log(`
UID : ${o.uid} 
 : ${u.data().nickname}`),e(c),r({uid:o.uid,location:u.data().location,agree:u.data().agree,email:u.data().email,nickname:u.data().nickname,phoneNumber:u.data().phoneNumber,profileImage:u.data().profileImage}),s(1)});let c=o.uid}else console.log(""),s(1)})},[t]),_.jsxs(_.Fragment,{children:[_.jsx(RK,{}),_.jsxs("div",{className:"App",children:[_.jsx($K,{}),_.jsx(lce,{}),_.jsx(rce,{}),i?_.jsx(mz,{}):null,_.jsx(NK,{})]})]})}function Bj(t){let e=t<0?!1:t;if(t<1e4)return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");let n=["","","","",""],r=1e4,i=n.length,s=[],o="";for(let a=0;a<i;a++){let l=e%Math.pow(r,a+1)/Math.pow(r,a);l=Math.floor(l),l>0&&(s[a]=l)}for(let a=0;a<s.length;a++)s[a]&&(o=String(s[a])+n[a]+`${o%1e4===0?"":" "}`+o);return o}const dce=de.a`
& .product{
  display:inline-block;
  width:201px;
  text-decoration:none;
  color:black;
  cursor:pointer;
}
`,hce=de.div`
  margin-bottom: 7px;
  width:201px;
  display:flex;
  flex-flow: column;
  & > *{
  margin-bottom: 4px;
  }
`,fce=de.div`
margin:0;
  & img{
    display:block;
    border-radius: 12px;
    width:201px;
    height: 201px ;
    overflow:hidden;
  }
`,pce=de.div`

  flex-flow: row;

& span{
  margin-top:5.5px;
  font-size: 12px;
  color: #868E96;
}
& span::after{
  content: '';
  margin : 0 4px;
  
}
& span:last-child::after{
  content:'';
}
`,mce=de.img`
  
  width:100%;
  height:100%;
  
`,gce=de.h3`
  margin-top : 12px;
  font-weight: 400;
  font-size: 16px;
  height: 20px;
  overflow:hidden;
  white-space:nowrap;
  text-overflow:ellipsis;
`,yce=de.span`
font-weight: 700;
margin-top:5px;
`,vce=de.span`
font-size: 13px;
margin-top: 5px;
`;function sp({title:t,price:e,heart:n,chat:r,imgsrc:i,id:s,check:o,location:a}){return _.jsx(dce,{children:_.jsxs(gh,{to:`/detailarticle/${s}`,className:"product",rel:"noopener noreferrer",children:[_.jsx(fce,{children:_.jsx("div",{children:_.jsx(mce,{alt:"  ",src:i[0]!==void 0?i:"https://firebasestorage.googleapis.com/v0/b/patato-market.appspot.com/o/no_image.jpg?alt=media&token=d2d005ba-9dbb-40cb-bd61-4d47f5118b2c"})})}),_.jsxs(hce,{children:[_.jsx(gce,{children:t}),_.jsxs(yce,{children:[Bj(e),""]}),_.jsxs(vce,{children:[a.sido," ",a.sigungu," ",a.bname]})]}),_.jsxs(pce,{children:[_.jsxs("span",{children:[" ",o]}),_.jsxs("span",{children:[" ",n]}),_.jsxs("span",{children:[" ",r]})]})]})})}sp.defaultProps={imgsrc:["https://firebasestorage.googleapis.com/v0/b/patato-market.appspot.com/o/%E1%84%80%E1%85%A5%E1%84%8B%E1%85%AE%E1%86%AF%E1%84%85%E1%85%B5%E1%84%8E%E1%85%B5.png?alt=media&token=f23ce701-2450-495f-8166-2e1049699b2b"],title:" ",price:505445,location:"  ",heart:0,chat:0};const Lx=de.section`
  margin: 35px auto;
  display: grid;
  gap: 55px;
  grid-template-columns: repeat(4, 1fr);
  grid-template-rows: 309px;
  & .loading{
    left:43%;
    position: absolute;
  }
  @media (max-width: 767px){
    grid-template-columns: repeat(2, 1fr);
  }
  @media (min-width:768px) and (max-width: 1023px){
    grid-template-columns: repeat(3, 1fr);
  }
`;function _ce(){const t=Vo(),[e,n]=H.useState(0),[r,i]=H.useState([]),[s,o]=Lr(rE);return H.useEffect(()=>{y_.onSnapshot(a=>{const l=a.docs.map(c=>({id:c.id,...c.data()}));l.sort((c,u)=>u.check-c.check),i(l.slice(0,8)),n(1)})},[]),_.jsxs("main",{children:[_.jsx(wce,{}),_.jsxs(Wj,{children:[_.jsxs("div",{className:"home-main-description",children:[_.jsxs("h2",{children:[" ",_.jsx("br",{}),""]}),_.jsxs("p",{children:["   ,  . ",_.jsx("br",{}),"    ."]})]}),_.jsx("div",{className:"home-main-image",children:_.jsx("img",{alt:"",src:"https://d1unjqcospf8gs.cloudfront.net/assets/home/main/3x/image-top-68ba12f0da7b5af9a574ed92ca8b3a9c0068db176b566dd374ee50359693358b.png"})})]}),_.jsxs(Sce,{children:[_.jsx("div",{className:"home-main-image",children:_.jsx("img",{alt:"",src:"https://d1unjqcospf8gs.cloudfront.net/assets/home/main/3x/image-1-39ac203e8922f615aa3843337871cb654b81269e872494128bf08236157c5f6a.png"})}),_.jsxs("div",{className:"home-main-description",children:[_.jsxs("h2",{children:[" ",_.jsx("br",{}),"   "]}),_.jsx("p",{children:"      ."}),_.jsxs("div",{className:"link-wrap",children:[_.jsx(gh,{to:"/hotarticles",children:" "}),_.jsx("button",{onClick:()=>{o(!0)},children:" "})]})]})]}),_.jsxs(bce,{children:[_.jsx("h2",{children:" "}),_.jsx(Lx,{className:"Hot8",children:e?r.map(({content:a,title:l,price:c,side:u,imgsrc:d,id:h,check:f,heart:p},y)=>_.jsx(sp,{check:f,content:a,heart:p,id:h,imgsrc:d,price:c,side:u,title:l},y)):_.jsx("p",{children:"Render Failed"})}),_.jsx(BR,{as:"a",onClick:()=>t("/hotArticles"),children:" "})]}),_.jsxs(Ece,{children:[_.jsx(BR,{children:" "}),_.jsxs("ul",{children:[_.jsx("li",{children:_.jsx("a",{href:"/",children:""})}),_.jsx("li",{children:_.jsx("a",{href:"/",children:""})}),_.jsx("li",{children:_.jsx("a",{href:"/",children:""})}),_.jsx("li",{children:_.jsx("a",{href:"/",children:""})}),_.jsx("li",{children:_.jsx("a",{href:"/",children:""})}),_.jsx("li",{children:_.jsx("a",{href:"/",children:""})}),_.jsx("li",{children:_.jsx("a",{href:"/",children:""})}),_.jsx("li",{children:_.jsx("a",{href:"/",children:""})}),_.jsx("li",{children:_.jsx("a",{href:"/",children:""})}),_.jsx("li",{children:_.jsx("a",{href:"/",children:""})})]})]})]})}const zj="#212529",wce=uu`
  body {
    color: ${zj};
    background-color: #FFF;
    min-height: 100vh;
  }
  h2 {
    font-weight: 700;
    font-size: 3rem;
    text-align: center;
  }
  @media (min-width: 768px) and (max-width: 1200px){
    h2 {
      font-size: 2.5rem;
    }
  }
  @media (max-width: 768px){
    h2 {
      font-size: 1.5rem;
    }
  }
`,Wj=de.section`
  background-color: #FBF7F2;
  display: flex;
  justify-content: center;
  max-height: 47.5rem;
  padding: 30px 200px;
  .home-main-description {
    display: flex;
    flex-direction: column;
    justify-content: center;
    h2 {
      line-height: 1.3;
      text-align: left;
      margin-bottom: 30px;
    }
    p {
      font-size: 1rem;
      line-height: 1.5;
    }
  }
  .home-main-image {
    width: 60%;
    margin: auto 0;
    img {
      padding: 50px 0 0 50px;
      width: 100%;
      height: auto;
      box-sizing: border-box;
    }
  }
  @media (max-width: 1200px){
    .home-main-description h2 {
      margin-bottom: 10px;
    }
    .home-main-image img {
      padding: 20px 0 0 20px;
    }
  }
  @media (min-width:768px) and (max-width: 1200px){
    padding: 30px 100px;
  }
  @media (max-width: 768px){
    padding: 50px;
    .home-main-description {
      padding-left: 0;
    }
  }
`,Sce=de(Wj)`
  background-color: #FFF;
  .home-main-image {
    width: 40%;
    img {
      padding: 0;
    }
  }
  .home-main-description {
    width: 60%;
    margin-left: 100px;
  }
  .link-wrap {
    display: flex;
    width: 100%;
    gap: 1.174rem;
    margin-top: 30px;
    a, 
    button {
      color: ${zj};
      font-size: 1.125rem;
      font-weight: 700;
      background-color: ${ml};
      text-decoration: none;
      padding: 1rem 1.5rem;
      border: 0;
      border-radius: 6px;
      white-space: nowrap;
    }
  }
  @media (max-width: 1200px){
    .link-wrap {
      margin-top: 10px;
    }
  }
  @media (min-width:768px) and (max-width: 1200px){
    .home-main-description {
      margin-left: 50px;
    }
  }
  @media (max-width: 768px){
    .home-main-description {
      margin-left: 20px;
    }
    .link-wrap {
      flex-direction: column;
      width: fit-content;
      a, 
      button {
        padding: 0.5rem 1rem;
        font-size: 1rem;
      }
    }
  }
`,bce=de.section`
  background-color: ${Mc};
  padding-top: 125px;
  padding-bottom: 5rem;
  margin: 0 auto;
  .Hot8 {
    width: 980px;
    margin: 60px auto 5rem;
  }
  @media (min-width: 768px) and (max-width: 1023px){
    .Hot8 {
      width: 760px;
    }
  }
  @media (max-width: 768px){
    .Hot8 {
      width: 480px;
    }
  }
`,BR=de.button`
  margin-left: auto;
  margin-right: auto;
  background-color: transparent;
  border: 0;
  font-weight: 700;
  text-decoration: underline;
  display: block;
  text-align: center;
  cursor: pointer;
`,Ece=de.section`
  width: 64rem;
  margin: 1.438rem auto 0;
  padding-bottom: 1rem;
  ul {
    display: flex;
    justify-content: center;
    column-gap: 3.2rem;
    flex-wrap: wrap;
    margin-top: 1rem;
  }
  ul li {
    display: inline-block;
    vertical-align: center;
    a {
      color: #212325;
      text-decoration: none;
      line-height: 30px;
      white-space: nowrap;
    }
  }
  @media (min-width: 768px) and (max-width: 1023px){
    width: 760px;
  }
  @media (max-width: 768px){
    width: 480px;
  }
`,Mx="/assets/default_profile-b36669d6.png",Tce="/assets/question-0f6dad00.svg",xce="/assets/check-6d24649b.svg",Hj="/assets/-dc45ad40.png",Ice=de.article`

    display: flex;
    flex-direction: column;
    width: 312px;
    min-width: 312px;
    justify-content: space-between;
    font-family: "Roboto";
    ul,li,ol { list-style: none}
  ;
`,Cce=de.section`
display: flex;
  align-items: center;
  padding: 0 20px;
  height: 64px;
  border-bottom: 1px solid ${ml};
  font-weight: bold;

`,kce=de.section`
  display: flex;
  justify-content: end;
  align-items: center;
  font-size: .75rem;
  color: ${Qy};
  padding: 0 6px;
  height: 44px;
  min-height: 44px;
  border-bottom: 1px solid ${ml};
    button {
      border: none;
      background: transparent;
      font-size:.75rem;
      justify-items: center;
    }

    img {
      width:18px; 
      height:18px;
    }
  
`,Ace=de.section`
    li {
    display: flex;
    border-bottom:1px solid ${ti};
    flex-direction:row;
    justify-content: space-between;
    flex: 1 0 0%clg;
    padding: 16px;
    align-items: center;
  }
  div{
    display: flex;
    &:first-child{
      color: ${wf};
      display: flex;
      align-items: center;
      .chat-preview{
        flex-direction: column;
        font-size: 12px;
        div:first-child{
          margin-bottom: 4px;
        }
        .other-name{
          color: #212122;
          font-weight: bold;
          margin-right: 6px;
        }
        
      }
      .last-talk{
        /* overflow-x: hidden;
        text-overflow: ellipsis;
        white-space: nowrap; */
      }
    }
    .product-preview{
      margin-left:10px;
    }
  }
  img.other-profile{
    border-radius:50%;
    margin-right: 10px;
    border: 1px solid ${ti};
  }

  `,Rce=de.div`
    border-top: 1px solid ${ti};
    display: flex;
    align-items: center;
    font-size: 14px;
    height: 56px;
    min-height: 56px;
    padding-left: 10px;
    a {
    text-decoration: none; 
    font-size: 14px;
    color: ${Qy};
    margin-right: 4px;
    };

  `,Nce=de.img.attrs({src:`${Tce}`})`
align-items: center;
width : 15px;
margin-bottom: 3px;
`,Pce=de.img.attrs({src:`${Mx}`})`
    border-radius:50%;
    margin-right: 10px;
    border: 1px solid ${ti};
    width: 40px;
`;function Dce(){return _.jsxs(Ice,{children:[_.jsxs("main",{children:[_.jsx(Cce,{children:""}),_.jsxs(kce,{children:["  ",_.jsx("button",{type:"button",children:_.jsx("img",{src:xce,alt:"  "})})]}),_.jsx(Ace,{children:_.jsx("ul",{children:_.jsxs("li",{className:"chat-list",children:[_.jsxs("div",{children:[_.jsx(Pce,{alt:""}),_.jsxs("div",{className:"chat-preview",children:[_.jsxs("div",{children:[_.jsx("span",{className:"other-name",children:""}),_.jsx("span",{className:"other-location",children:""}),_.jsx("span",{children:""}),_.jsx("span",{className:"real-daytime",children:""})]}),_.jsx("div",{className:"last-talk",children:_.jsx("span",{children:" "})})]})]}),_.jsx("div",{className:"product-preview",children:_.jsx("img",{src:Hj,width:"40px",alt:""})})]})})})]}),_.jsxs(Rce,{children:[_.jsx("a",{href:"#",children:" "}),_.jsx(Nce,{})]})]})}const Oce="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFESURBVHgB3ZYxTsNAEEX/XygocwOuwBEsCiQ6bkB6FBGKIEUpSAqwkEHBIvRwAzoKJOQjcAS4gU+wwxja9bJZxSsrr7CLkf3X339nh1Dy4ulKaMcQDtAFlJpiHqaTswXzexWzMkcCVGdh9DJGImh4bvTejY1uBgaJSS6466ldEPKJCAQ80NtyLcFGbDoZVYggLx4bUWctuaW8KVbiLAAVyC/EvFTTaEVOXLVWS3UVGUQQg++p/qSU5LMV+40IDM2+iAzXEtTG9zKLT2mmSx66aj3a+DSn178rjUAtbQtce0r1H7Bl8/6HeNLdH0sN+arrrBGA/G3yoGPOY6ktQ3tpfrfK1MUgwf5Y2hwxTdcPIfTrvILKUiJT6mP7R4xGMCj6G6I2AimRCJ2By52P97fq8OhYTyPo4MM9dIGO+tpEbmeXo/kPThNv/X2CylQAAAAASUVORK5CYII=",Lce="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKDSURBVHgBvVZdchJBEO6e3aCPHAFPAJzAcALhBMJjApZFFVHBh8QHoTRUIZWYPCaeIPEEkBNkPYF7A3nRSoCdtnv5kfCzMxKSrwp2dqa3v5me/kOwQOPwaJvAeQGgtwEpAYTxcAGph4QegfIQgu/VvVddky6MJPr8NQ+K9okgATZA8Enjh/dviuerRZYRtU4TNAwueJiCdcDE6DiZannHn19S8xP15slLCobXa5MJ2CK84et68yi7uJdZsk8nWVD6AjYJVPlaZffbAmFoRjnZxCE2hx66Tnpi3n8mDYLOA5AJ4mN/gCmheKO1J66H1Efx+AmhuD48MHDMgaOgxs5yKQ5sQI9HCaMFWFaB6hJQapUsAmWURsiu1DFw09VKKQNEBTDA1SrzrlLMRclqgqxSgMlVArdPb3ojba4PBvzZ6vsmWUR8jvXD4188XuWdHirdJq1egzkR2Mj23AgyQYoVnIEdbGTjCizApjhXiJfrrs9CCHsmoVunXxaHQE7Ki2zgVyvFwo3TNzqWcClYpmQOWzoWejK7e3t+TcqRPJ8MYlmTHs6jnuK4uTIKEu0ftFrx2l7pCxGm+dcWM0pcSe07aJ3FbZKHJvoRHfh34XESzs3XOCGLDX/L98ZyJhsMq0WjefzTKpdKYQXsAgahVUi7SR7nrZI+f1urlJ654YvcA5LZ/aWwAjGByo8mNM8h2GBy11NpTgD3q/JRGJ9OhtM4xKGTA4sQ+X8yLgADJzN5nRJWqzs+t3xl2DQCpyC6FwhDUmnvkDZzUj4Zh0+h9nb3TgZa3iY2ThOwFXTu0QV4ckWzJ4sknBI/ViO8QMzJQZPi4klJqeizrT7/CcmVQn1p0+r/BfNZKEpiO+kdAAAAAElFTkSuQmCC",Mce="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGcSURBVHgB7VZNUsIwFH4v7QH0BI430BvgDeAEwlKho8zwM4UNXSiOsJBR1uIJ5AjcQI7AEVw6FvvMKxQhkKKWdKPfTGaSL0m/NO+9b4LXnYcXADiCFIAAI5GWGIMAMgJSxr8gIMIEkF5hR9ALskggcm6ldNioOPtIWJBsYmG9IKHXqJ8Po6FbKw4IqAemBHFqDVXOt6d3YErQdc8mKtcql81dabtzn1G5q9t+YpOISRpxurZYwAUkhK2bIKJ8u9uXneApOgBzmrU9PrrM5K0HsuMmZwKYnw82rkHEQaNauuT+Tbd/EBBl476ZzGnYFHzhRcM3670QGoUpQSQqLGdzmMWSg18LsttobI0C8tyqM1J55gj1BhGTpTBB3z4Om3pNctysOy3d1mbF4ZiOvy8o/wp964Svi5sVYA4iH53PwRZIp/ras1Xww1qJTa1WHEuhWWykx25yIRXzNd7aQeSbZiXfOTZx1/VTyFJ5Xi4VYVKMoZbKQlAgDnctxlBLZeE0gWzSyh7BFCgsrz17icgSmMcfeLXJDBpBehh/AnH7r4TtbP5CAAAAAElFTkSuQmCC",Fce="/assets/hambuger_menu-c60d0ca7.svg",$ce=de.button`
border: none;
background-color: transparent;
display: inline-flex;
    justify-content: center;
    align-items: center;
    border-radius: 4px;
    padding: 0 10px;
    width: 24px;
    height: 24px;
  &:hover:active{
    background-color: ${Lc};
    background-size: 100%;
    transition: background-color 1s ease-out;
  } 
`,Uce=de.ul`
    position: absolute;
    right: 0;
    top: 60px;
    border: 1px solid ${tE};
    border-radius: 8px;
    padding: 10px;
    font-size: .875rem;
    background-color:${ml};
    color: ${wf};
    will-change: opacity;
    animation: 0.3s ease-in 0s 1 normal none running fadeIn;
    z-index: 999;
    li{
      padding: 6px;
    }
`;function jce({isToggleOpen:t,setIsToggleOpen:e}){const n=()=>{e(!t)};return _.jsxs(_.Fragment,{children:[_.jsx($ce,{type:"button",onClick:n,children:_.jsx("img",{src:Fce,alt:""})}),t&&_.jsxs(Uce,{children:[_.jsx("li",{children:" "}),_.jsx("li",{children:" "}),_.jsx("li",{children:" "})]})]})}const Vce="_main_1rkv1_1",Bce="_header_1rkv1_11",zR={main:Vce,header:Bce},zce=de.section`
  display: flex;
  justify-content: space-between;
  align-items: center;
  height: 70px;
  min-height: 64px;
  border-bottom: 1px solid ${ti};
    div{
      display: flex;
      align-items: center;
        span{
          &:nth-child(2){
            color: ${tE};
            font-size:12px;
            font-weight: 600;
          }
          &:nth-child(3){
          
            border:1px solid ${zn};
            border-radius: 1000px;
            color: ${zn};
            text-align: center;
            font-size: 10px;
            padding: 3px 5px;
            margin-left: 5px;
          }
      }
  }
`,Wce=de.img.attrs({src:`${Mx}`})`
    border-radius:50%;
    margin-right: 10px;
    border: 1px solid ${ti};
    width: 40px;
`,Hce=de.section`
    display: flex;
    flex-direction: row;
    border-bottom: 1px solid ${ti};
    justify-content: space-between;
    align-items: center;
    padding: 10px 20px;
    img{
      margin-right: .75rem;
    }
    div{
      font-size: .875rem;
      .product-name-price{
        display: flex;
        flex-direction: column;
        span {
          margin-bottom: 2px;
          
          &:last-child{
            font-weight: 600;
          }
        }
      }
    }
    .sale-label{
      border: 1px solid ${tE};
      border-radius: 6px;
      padding: 7px;
      font-weight: 600;
    }
    
    a {
      text-decoration: none;
      color: inherit;
      display: flex;
      align-items: center;
    }



`;function Gce(){const[t,e]=H.useState(!1);return _.jsxs("article",{className:zR.main,children:[_.jsxs(zce,{className:zR.header,children:[_.jsxs("div",{children:[_.jsx(Wce,{}),_.jsx("span",{children:""}),_.jsx("span",{children:"36.7"})]}),_.jsx(jce,{isToggleOpen:t,setIsToggleOpen:e})]}),_.jsxs(Hce,{children:[_.jsx("div",{children:_.jsxs("a",{href:"/",children:[_.jsx("img",{src:Hj,width:"40px",alt:""}),_.jsxs("div",{className:"product-name-price",children:[_.jsx("span",{children:""}),_.jsx("span",{children:""})]})]})}),_.jsx("div",{className:"sale-label",children:""})]})]})}const qce="_main_1pocm_5",Kce="_chatRecord_1pocm_23",Qce="_addMessageBox_1pocm_65",V0={main:qce,chatRecord:Kce,addMessageBox:Qce},Yce=de.section`
position: relative;
  border: 1px solid ${Mc};
  border-radius: 10px;
  padding:20px;
  margin: 20px;
  display: inline-flex;
  justify-content: center;
  align-items: center;
  background-color: ${Mc};
  font-size: .875rem;
  color: ${Qy};
`,WR=de.section`
  margin:0 auto;
  border: 1px solid ${nE};
  border-radius: 14px;
  width: fit-content;
  padding: 5px 12px;
  font-size: .875rem;
  color: ${wf};
`,HR=de.section`
  display:none;
`,Xce=de.img.attrs({src:`${Mx}`})`
    border-radius:50%;
    margin-right: 10px;
    border: 1px solid ${ti};
    width: 40px;
`,Jce=de.div`
  display: flex;
  flex-direction: row;
  align-items: center;
  span{

    padding: 10px 14px;
      max-width: 484px;
      font-size: 14px;
      border-radius: 2px 20px 20px;
      background-color: ${ti};
      color:${wf};
  }  
   
`,Zce=de.div`
  display: flex;
  justify-content: end;
  span{
      padding: 10px 14px;
      margin-top: 10px;
      max-width: 484px;
      font-size: 14px;
      border-radius: 20px 2px 20px 20px;
      background-color:${zn};
      color: white;

    }

`,eue=de.section`
display: flex;
flex-direction: column;
justify-content: end;
form{
  display: flex;
  justify-content: space-between;
    flex-direction: column;
    position: relative;
    border: 1px solid #212121;
    margin-top: 15px;
    border-radius: 8px;
    height: 125px;
}
textarea{
      margin: 15px 15px 0px;
      resize: none;
      font-size: 14px;
      border: none;
      outline: none;
      color: #212121;
} 
div{
  margin: 3px 10px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  img{
    margin-right: 20px;
    width: 20px;
  }
  span{
    display: flex;
    align-items: center;
    margin-right: 10px;
    color:${nE};
  }
}
`,tue=de.button`
  border: none;
  background-color: ${ti};
  border-radius: 4px;
  color: ${Mc};
  width: 64px;
  height: 32px;
  margin-left: 10px;
`;function nue(){const[t,e]=H.useState(""),[n,r]=H.useState([]),i=o=>{o.preventDefault(),t.trim()&&(r(a=>[...a,t]),e(""))},s=o=>{e(o.target.value)};return _.jsxs("article",{className:V0.main,children:[_.jsx(Gce,{}),_.jsx(Yce,{children:_.jsx("span",{children:"000  .     ."})}),_.jsxs("section",{className:V0.chatRecord,children:[_.jsx(WR,{children:"0000 00 00"}),_.jsxs(Jce,{children:[_.jsx(Xce,{alt:"  "}),_.jsx("span",{children:""})]}),_.jsx(HR,{children:" 1:55"}),_.jsx(WR,{children:"0000 00 00"}),_.jsxs("div",{children:[_.jsx(HR,{children:" 1:55"}),_.jsx(Zce,{children:_.jsx("span",{children:""})})]}),n.map((o,a)=>_.jsx("span",{className:V0.addMessageBox,children:o},a))]}),_.jsx(eue,{children:_.jsxs("form",{onSubmit:i,children:[_.jsx("textarea",{className:"textbox",placeholder:" ",value:t,maxLength:1e3,onChange:s}),_.jsxs("div",{children:[_.jsxs("div",{children:[_.jsx("label",{htmlFor:"file-input",children:_.jsx("img",{id:"file-input",src:Mce,alt:"   "})}),_.jsx("label",{htmlFor:"file-input",children:_.jsx("img",{id:"file-input",src:Oce,alt:""})}),_.jsx("label",{htmlFor:"file-input",children:_.jsx("img",{id:"file-input",src:Lce,alt:""})})]}),_.jsxs("div",{children:[_.jsxs("span",{className:"text-length",children:[t.length,"/1000"]}),_.jsx(tue,{type:"submit",children:""})]})]})]})})]})}const rue="_main_1m9u3_15",iue={main:rue};function sue(){return _.jsx(_.Fragment,{children:_.jsxs("main",{className:iue.main,children:[_.jsx(Dce,{}),_.jsx(nue,{})]})})}const oue="/assets/loading-spinner-524188d7.gif",aue=de.img`
  position: absolute;  
  left:40%;
  width:240px;

`,__=({className:t})=>_.jsx(_.Fragment,{children:_.jsx(aue,{alt:" .",className:t,src:oue})}),Fx=uu`
  .wrapper{
    width: 980px;
    margin: 60px auto;
    @media (max-width: 767px){
      width: 480px
    }
    @media (min-width:768px) and (max-width: 1023px){
      width: 760px
    }
  }
  h2.articleTitle{
    font-size: 32px;
    font-weight: bold;
    text-align: center;
    margin-bottom: 45px;
  }


`;let Hp=[];function lue(){const[t,e]=H.useState(0),n=wq(uL);return H.useEffect(()=>{window.scrollTo(0,0),Hp=[],Jc(y_,r=>{r.docs.map(i=>{const s={id:i.id,...i.data()};Hp.push(s),Hp.sort((o,a)=>a.date-o.date),e(1)})})},[]),_.jsxs("main",{className:"wrapper",children:[_.jsx(Fx,{}),_.jsx("h2",{className:"articleTitle",children:" "}),_.jsxs(Lx,{children:[_.jsx("h3",{className:"a11yHidden",children:" "}),t?Hp.filter(({title:r})=>r.toLowerCase().includes(n.toLowerCase())).map(({content:r,title:i,price:s,side:o,imgsrc:a,id:l,check:c,heart:u},d)=>_.jsx(sp,{check:c,content:r,heart:u,id:l,imgsrc:a,price:s,side:o,title:i},d)):_.jsx(__,{className:"loading"})]})]})}function cue(){const[t,e]=H.useState(!1),[n]=Lr(v_),[r]=Lr(ip),[i,s]=H.useState([]);return H.useEffect(()=>{y_.where("userId","==",n).onSnapshot(a=>{const l=a.docs.map(c=>({id:c.id,...c.data()}));l.sort((c,u)=>u.date-c.date),s(l),e(!0)})},[n]),_.jsxs(uue,{className:"wrapper",children:[_.jsx(Fx,{}),_.jsx("h2",{className:"articleTitle",children:""}),_.jsx(due,{children:_.jsxs("div",{className:"basicInfo",children:[_.jsx("img",{alt:"  ",className:"profileImage",src:r.profileImage}),_.jsxs("span",{className:"intro",children:[_.jsxs("b",{"aria-label":" ",className:"location",children:['"',r.location.sido," ",r.location.sigungu," ",r.location.bname,'"']}),"  ",_.jsx("br",{}),"",_.jsx("b",{"aria-label":" ",className:"nickname",children:r.nickname})]}),_.jsxs("span",{"aria-label":" UID",className:"uid",children:["#",n]}),_.jsxs(hue,{children:[_.jsx("img",{alt:" ",className:"face",src:"src/assets/icon_temp4.svg"}),_.jsxs("div",{className:"right-box",children:[_.jsx("span",{className:"text",children:"36.5 "}),_.jsx("div",{className:"gauge",children:_.jsx("span",{className:"gauge_bar",style:{width:36+"%"}})})]})]})]})}),_.jsx("h2",{className:"articleTitle",children:" "}),_.jsx(Lx,{children:t?i.map(({content:o,title:a,price:l,side:c,imgsrc:u,id:d,check:h,heart:f},p)=>_.jsx(sp,{check:h,content:o,heart:f,id:d,imgsrc:u,price:l,side:c,title:a},p)):_.jsx(__,{className:"loading"})})]})}const uue=de.main`
  padding: 80px 0 40px;
  h2 {
    line-height: 36px;
    font-size: 32px;
    font-weight: 700;
    text-align: center;
    margin-bottom: 45px;
  }
`,due=de.section`
  .basicInfo {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 640px;
    margin: 0 auto 100px;
    padding: 30px 10px;
    box-sizing: border-box;
    border-radius: 10px;
    box-shadow: 0 3px 7px 3px rgb(0 0 0 / 7%);
    .profileImage {
      width: 100px;
      height: 100px;
      object-fit: cover;
      margin-bottom: 20px;
      border-radius: 50%;
      border: 1px solid ${Lc};
    }
    .intro {
      margin-bottom: 6px;
      line-height: 30px;
      font-size: 12px;
      text-align: center;
    }
    .location {
      padding: 0px 4px;
      color: ${zn};
      font-size: 16px;
      line-height: 24px;
      margin: 0 3px;
    }
    .nickname {
      padding: 0 4px;
      font-size: 22px;
      font-weight: 700;
      line-height: 30px;
    }
    .uid {
      font-size: 12px;
      color: ${Lc};
      vertical-align: top;
    }
    /* button {
      width: auto;
      height: 40px;
      padding: 0 30px;
      line-height: normal;
    } */
    @media screen and (max-width: 767px) {
      width: calc(100% - 60px);
    }
  }
`,hue=de.div`
  display: flex;
  width: 360px;
  padding: 20px;
  box-sizing: border-box;
  .face {
    width: 30px;
    height: 30px;
    margin-right: 10px;
  }
  .right-box {
    flex: 1;
  }
  .text {
    color: rgb(49,158,69);
    font-weight: 700;
    font-size: 16px;
  }
  .gauge {
    position: relative;
    width: 100%;
    height: 8px;
    margin: 4px 0;
    border-radius: 2.5px;
    background-color: rgb(233,236,239);
    &_bar {
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      border-radius: 2.5px;
      background-color: rgb(49,158,69);
    }
  }
  @media screen and (max-width: 767px) {
    max-width: 360px;
    width: 100%;
  }
`,fue="/assets/closebutton-8e17b340.svg";function GR(t){return t!==null&&typeof t=="object"&&"constructor"in t&&t.constructor===Object}function $x(t={},e={}){Object.keys(e).forEach(n=>{typeof t[n]>"u"?t[n]=e[n]:GR(e[n])&&GR(t[n])&&Object.keys(e[n]).length>0&&$x(t[n],e[n])})}const Gj={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function kl(){const t=typeof document<"u"?document:{};return $x(t,Gj),t}const pue={document:Gj,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(t){return typeof setTimeout>"u"?(t(),null):setTimeout(t,0)},cancelAnimationFrame(t){typeof setTimeout>"u"||clearTimeout(t)}};function zr(){const t=typeof window<"u"?window:{};return $x(t,pue),t}function mue(t){const e=t;Object.keys(e).forEach(n=>{try{e[n]=null}catch{}try{delete e[n]}catch{}})}function wS(t,e=0){return setTimeout(t,e)}function nf(){return Date.now()}function gue(t){const e=zr();let n;return e.getComputedStyle&&(n=e.getComputedStyle(t,null)),!n&&t.currentStyle&&(n=t.currentStyle),n||(n=t.style),n}function yue(t,e="x"){const n=zr();let r,i,s;const o=gue(t);return n.WebKitCSSMatrix?(i=o.transform||o.webkitTransform,i.split(",").length>6&&(i=i.split(", ").map(a=>a.replace(",",".")).join(", ")),s=new n.WebKitCSSMatrix(i==="none"?"":i)):(s=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),r=s.toString().split(",")),e==="x"&&(n.WebKitCSSMatrix?i=s.m41:r.length===16?i=parseFloat(r[12]):i=parseFloat(r[4])),e==="y"&&(n.WebKitCSSMatrix?i=s.m42:r.length===16?i=parseFloat(r[13]):i=parseFloat(r[5])),i||0}function Gp(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"}function vue(t){return typeof window<"u"&&typeof window.HTMLElement<"u"?t instanceof HTMLElement:t&&(t.nodeType===1||t.nodeType===11)}function kr(...t){const e=Object(t[0]),n=["__proto__","constructor","prototype"];for(let r=1;r<t.length;r+=1){const i=t[r];if(i!=null&&!vue(i)){const s=Object.keys(Object(i)).filter(o=>n.indexOf(o)<0);for(let o=0,a=s.length;o<a;o+=1){const l=s[o],c=Object.getOwnPropertyDescriptor(i,l);c!==void 0&&c.enumerable&&(Gp(e[l])&&Gp(i[l])?i[l].__swiper__?e[l]=i[l]:kr(e[l],i[l]):!Gp(e[l])&&Gp(i[l])?(e[l]={},i[l].__swiper__?e[l]=i[l]:kr(e[l],i[l])):e[l]=i[l])}}}return e}function qp(t,e,n){t.style.setProperty(e,n)}function qj({swiper:t,targetPosition:e,side:n}){const r=zr(),i=-t.translate;let s=null,o;const a=t.params.speed;t.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(t.cssModeFrameID);const l=e>i?"next":"prev",c=(d,h)=>l==="next"&&d>=h||l==="prev"&&d<=h,u=()=>{o=new Date().getTime(),s===null&&(s=o);const d=Math.max(Math.min((o-s)/a,1),0),h=.5-Math.cos(d*Math.PI)/2;let f=i+h*(e-i);if(c(f,e)&&(f=e),t.wrapperEl.scrollTo({[n]:f}),c(f,e)){t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout(()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[n]:f})}),r.cancelAnimationFrame(t.cssModeFrameID);return}t.cssModeFrameID=r.requestAnimationFrame(u)};u()}function Mi(t,e=""){return[...t.children].filter(n=>n.matches(e))}function Kj(t,e=[]){const n=document.createElement(t);return n.classList.add(...Array.isArray(e)?e:[e]),n}function _ue(t,e){const n=[];for(;t.previousElementSibling;){const r=t.previousElementSibling;e?r.matches(e)&&n.push(r):n.push(r),t=r}return n}function wue(t,e){const n=[];for(;t.nextElementSibling;){const r=t.nextElementSibling;e?r.matches(e)&&n.push(r):n.push(r),t=r}return n}function eo(t,e){return zr().getComputedStyle(t,null).getPropertyValue(e)}function Hg(t){let e=t,n;if(e){for(n=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(n+=1);return n}}function Qj(t,e){const n=[];let r=t.parentElement;for(;r;)e?r.matches(e)&&n.push(r):n.push(r),r=r.parentElement;return n}function SS(t,e,n){const r=zr();return n?t[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(r.getComputedStyle(t,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(r.getComputedStyle(t,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom")):t.offsetWidth}let B0;function Sue(){const t=zr(),e=kl();return{smoothScroll:e.documentElement&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch)}}function Yj(){return B0||(B0=Sue()),B0}let z0;function bue({userAgent:t}={}){const e=Yj(),n=zr(),r=n.navigator.platform,i=t||n.navigator.userAgent,s={ios:!1,android:!1},o=n.screen.width,a=n.screen.height,l=i.match(/(Android);?[\s\/]+([\d.]+)?/);let c=i.match(/(iPad).*OS\s([\d_]+)/);const u=i.match(/(iPod)(.*OS\s([\d_]+))?/),d=!c&&i.match(/(iPhone\sOS|iOS)\s([\d_]+)/),h=r==="Win32";let f=r==="MacIntel";const p=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!c&&f&&e.touch&&p.indexOf(`${o}x${a}`)>=0&&(c=i.match(/(Version)\/([\d.]+)/),c||(c=[0,1,"13_0_0"]),f=!1),l&&!h&&(s.os="android",s.android=!0),(c||d||u)&&(s.os="ios",s.ios=!0),s}function Eue(t={}){return z0||(z0=bue(t)),z0}let W0;function Tue(){const t=zr();let e=!1;function n(){const r=t.navigator.userAgent.toLowerCase();return r.indexOf("safari")>=0&&r.indexOf("chrome")<0&&r.indexOf("android")<0}if(n()){const r=String(t.navigator.userAgent);if(r.includes("Version/")){const[i,s]=r.split("Version/")[1].split(" ")[0].split(".").map(o=>Number(o));e=i<16||i===16&&s<2}}return{isSafari:e||n(),needPerspectiveFix:e,isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent)}}function xue(){return W0||(W0=Tue()),W0}function Iue({swiper:t,on:e,emit:n}){const r=zr();let i=null,s=null;const o=()=>{!t||t.destroyed||!t.initialized||(n("beforeResize"),n("resize"))},a=()=>{!t||t.destroyed||!t.initialized||(i=new ResizeObserver(u=>{s=r.requestAnimationFrame(()=>{const{width:d,height:h}=t;let f=d,p=h;u.forEach(({contentBoxSize:y,contentRect:w,target:m})=>{m&&m!==t.el||(f=w?w.width:(y[0]||y).inlineSize,p=w?w.height:(y[0]||y).blockSize)}),(f!==d||p!==h)&&o()})}),i.observe(t.el))},l=()=>{s&&r.cancelAnimationFrame(s),i&&i.unobserve&&t.el&&(i.unobserve(t.el),i=null)},c=()=>{!t||t.destroyed||!t.initialized||n("orientationchange")};e("init",()=>{if(t.params.resizeObserver&&typeof r.ResizeObserver<"u"){a();return}r.addEventListener("resize",o),r.addEventListener("orientationchange",c)}),e("destroy",()=>{l(),r.removeEventListener("resize",o),r.removeEventListener("orientationchange",c)})}function Cue({swiper:t,extendParams:e,on:n,emit:r}){const i=[],s=zr(),o=(c,u={})=>{const d=s.MutationObserver||s.WebkitMutationObserver,h=new d(f=>{if(t.__preventObserver__)return;if(f.length===1){r("observerUpdate",f[0]);return}const p=function(){r("observerUpdate",f[0])};s.requestAnimationFrame?s.requestAnimationFrame(p):s.setTimeout(p,0)});h.observe(c,{attributes:typeof u.attributes>"u"?!0:u.attributes,childList:typeof u.childList>"u"?!0:u.childList,characterData:typeof u.characterData>"u"?!0:u.characterData}),i.push(h)},a=()=>{if(t.params.observer){if(t.params.observeParents){const c=Qj(t.el);for(let u=0;u<c.length;u+=1)o(c[u])}o(t.el,{childList:t.params.observeSlideChildren}),o(t.wrapperEl,{attributes:!1})}},l=()=>{i.forEach(c=>{c.disconnect()}),i.splice(0,i.length)};e({observer:!1,observeParents:!1,observeSlideChildren:!1}),n("init",a),n("destroy",l)}const kue={on(t,e,n){const r=this;if(!r.eventsListeners||r.destroyed||typeof e!="function")return r;const i=n?"unshift":"push";return t.split(" ").forEach(s=>{r.eventsListeners[s]||(r.eventsListeners[s]=[]),r.eventsListeners[s][i](e)}),r},once(t,e,n){const r=this;if(!r.eventsListeners||r.destroyed||typeof e!="function")return r;function i(...s){r.off(t,i),i.__emitterProxy&&delete i.__emitterProxy,e.apply(r,s)}return i.__emitterProxy=e,r.on(t,i,n)},onAny(t,e){const n=this;if(!n.eventsListeners||n.destroyed||typeof t!="function")return n;const r=e?"unshift":"push";return n.eventsAnyListeners.indexOf(t)<0&&n.eventsAnyListeners[r](t),n},offAny(t){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const n=e.eventsAnyListeners.indexOf(t);return n>=0&&e.eventsAnyListeners.splice(n,1),e},off(t,e){const n=this;return!n.eventsListeners||n.destroyed||!n.eventsListeners||t.split(" ").forEach(r=>{typeof e>"u"?n.eventsListeners[r]=[]:n.eventsListeners[r]&&n.eventsListeners[r].forEach((i,s)=>{(i===e||i.__emitterProxy&&i.__emitterProxy===e)&&n.eventsListeners[r].splice(s,1)})}),n},emit(...t){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsListeners)return e;let n,r,i;return typeof t[0]=="string"||Array.isArray(t[0])?(n=t[0],r=t.slice(1,t.length),i=e):(n=t[0].events,r=t[0].data,i=t[0].context||e),r.unshift(i),(Array.isArray(n)?n:n.split(" ")).forEach(o=>{e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach(a=>{a.apply(i,[o,...r])}),e.eventsListeners&&e.eventsListeners[o]&&e.eventsListeners[o].forEach(a=>{a.apply(i,r)})}),e}};function Aue(){const t=this;let e,n;const r=t.el;typeof t.params.width<"u"&&t.params.width!==null?e=t.params.width:e=r.clientWidth,typeof t.params.height<"u"&&t.params.height!==null?n=t.params.height:n=r.clientHeight,!(e===0&&t.isHorizontal()||n===0&&t.isVertical())&&(e=e-parseInt(eo(r,"padding-left")||0,10)-parseInt(eo(r,"padding-right")||0,10),n=n-parseInt(eo(r,"padding-top")||0,10)-parseInt(eo(r,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(n)&&(n=0),Object.assign(t,{width:e,height:n,size:t.isHorizontal()?e:n}))}function Rue(){const t=this;function e(C){return t.isHorizontal()?C:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[C]}function n(C,k){return parseFloat(C.getPropertyValue(e(k))||0)}const r=t.params,{wrapperEl:i,slidesEl:s,size:o,rtlTranslate:a,wrongRTL:l}=t,c=t.virtual&&r.virtual.enabled,u=c?t.virtual.slides.length:t.slides.length,d=Mi(s,`.${t.params.slideClass}, swiper-slide`),h=c?t.virtual.slides.length:d.length;let f=[];const p=[],y=[];let w=r.slidesOffsetBefore;typeof w=="function"&&(w=r.slidesOffsetBefore.call(t));let m=r.slidesOffsetAfter;typeof m=="function"&&(m=r.slidesOffsetAfter.call(t));const g=t.snapGrid.length,v=t.slidesGrid.length;let b=r.spaceBetween,I=-w,E=0,D=0;if(typeof o>"u")return;typeof b=="string"&&b.indexOf("%")>=0&&(b=parseFloat(b.replace("%",""))/100*o),t.virtualSize=-b,d.forEach(C=>{a?C.style.marginLeft="":C.style.marginRight="",C.style.marginBottom="",C.style.marginTop=""}),r.centeredSlides&&r.cssMode&&(qp(i,"--swiper-centered-offset-before",""),qp(i,"--swiper-centered-offset-after",""));const S=r.grid&&r.grid.rows>1&&t.grid;S&&t.grid.initSlides(h);let T;const O=r.slidesPerView==="auto"&&r.breakpoints&&Object.keys(r.breakpoints).filter(C=>typeof r.breakpoints[C].slidesPerView<"u").length>0;for(let C=0;C<h;C+=1){T=0;let k;if(d[C]&&(k=d[C]),S&&t.grid.updateSlide(C,k,h,e),!(d[C]&&eo(k,"display")==="none")){if(r.slidesPerView==="auto"){O&&(d[C].style[e("width")]="");const R=getComputedStyle(k),P=k.style.transform,B=k.style.webkitTransform;if(P&&(k.style.transform="none"),B&&(k.style.webkitTransform="none"),r.roundLengths)T=t.isHorizontal()?SS(k,"width",!0):SS(k,"height",!0);else{const A=n(R,"width"),x=n(R,"padding-left"),j=n(R,"padding-right"),F=n(R,"margin-left"),z=n(R,"margin-right"),Z=R.getPropertyValue("box-sizing");if(Z&&Z==="border-box")T=A+F+z;else{const{clientWidth:N,offsetWidth:$}=k;T=A+x+j+F+z+($-N)}}P&&(k.style.transform=P),B&&(k.style.webkitTransform=B),r.roundLengths&&(T=Math.floor(T))}else T=(o-(r.slidesPerView-1)*b)/r.slidesPerView,r.roundLengths&&(T=Math.floor(T)),d[C]&&(d[C].style[e("width")]=`${T}px`);d[C]&&(d[C].swiperSlideSize=T),y.push(T),r.centeredSlides?(I=I+T/2+E/2+b,E===0&&C!==0&&(I=I-o/2-b),C===0&&(I=I-o/2-b),Math.abs(I)<1/1e3&&(I=0),r.roundLengths&&(I=Math.floor(I)),D%r.slidesPerGroup===0&&f.push(I),p.push(I)):(r.roundLengths&&(I=Math.floor(I)),(D-Math.min(t.params.slidesPerGroupSkip,D))%t.params.slidesPerGroup===0&&f.push(I),p.push(I),I=I+T+b),t.virtualSize+=T+b,E=T,D+=1}}if(t.virtualSize=Math.max(t.virtualSize,o)+m,a&&l&&(r.effect==="slide"||r.effect==="coverflow")&&(i.style.width=`${t.virtualSize+r.spaceBetween}px`),r.setWrapperSize&&(i.style[e("width")]=`${t.virtualSize+r.spaceBetween}px`),S&&t.grid.updateWrapperSize(T,f,e),!r.centeredSlides){const C=[];for(let k=0;k<f.length;k+=1){let R=f[k];r.roundLengths&&(R=Math.floor(R)),f[k]<=t.virtualSize-o&&C.push(R)}f=C,Math.floor(t.virtualSize-o)-Math.floor(f[f.length-1])>1&&f.push(t.virtualSize-o)}if(c&&r.loop){const C=y[0]+b;if(r.slidesPerGroup>1){const k=Math.ceil((t.virtual.slidesBefore+t.virtual.slidesAfter)/r.slidesPerGroup),R=C*r.slidesPerGroup;for(let P=0;P<k;P+=1)f.push(f[f.length-1]+R)}for(let k=0;k<t.virtual.slidesBefore+t.virtual.slidesAfter;k+=1)r.slidesPerGroup===1&&f.push(f[f.length-1]+C),p.push(p[p.length-1]+C),t.virtualSize+=C}if(f.length===0&&(f=[0]),r.spaceBetween!==0){const C=t.isHorizontal()&&a?"marginLeft":e("marginRight");d.filter((k,R)=>!r.cssMode||r.loop?!0:R!==d.length-1).forEach(k=>{k.style[C]=`${b}px`})}if(r.centeredSlides&&r.centeredSlidesBounds){let C=0;y.forEach(R=>{C+=R+(r.spaceBetween?r.spaceBetween:0)}),C-=r.spaceBetween;const k=C-o;f=f.map(R=>R<0?-w:R>k?k+m:R)}if(r.centerInsufficientSlides){let C=0;if(y.forEach(k=>{C+=k+(r.spaceBetween?r.spaceBetween:0)}),C-=r.spaceBetween,C<o){const k=(o-C)/2;f.forEach((R,P)=>{f[P]=R-k}),p.forEach((R,P)=>{p[P]=R+k})}}if(Object.assign(t,{slides:d,snapGrid:f,slidesGrid:p,slidesSizesGrid:y}),r.centeredSlides&&r.cssMode&&!r.centeredSlidesBounds){qp(i,"--swiper-centered-offset-before",`${-f[0]}px`),qp(i,"--swiper-centered-offset-after",`${t.size/2-y[y.length-1]/2}px`);const C=-t.snapGrid[0],k=-t.slidesGrid[0];t.snapGrid=t.snapGrid.map(R=>R+C),t.slidesGrid=t.slidesGrid.map(R=>R+k)}if(h!==u&&t.emit("slidesLengthChange"),f.length!==g&&(t.params.watchOverflow&&t.checkOverflow(),t.emit("snapGridLengthChange")),p.length!==v&&t.emit("slidesGridLengthChange"),r.watchSlidesProgress&&t.updateSlidesOffset(),!c&&!r.cssMode&&(r.effect==="slide"||r.effect==="fade")){const C=`${r.containerModifierClass}backface-hidden`,k=t.el.classList.contains(C);h<=r.maxBackfaceHiddenSlides?k||t.el.classList.add(C):k&&t.el.classList.remove(C)}}function Nue(t){const e=this,n=[],r=e.virtual&&e.params.virtual.enabled;let i=0,s;typeof t=="number"?e.setTransition(t):t===!0&&e.setTransition(e.params.speed);const o=a=>r?e.slides.filter(l=>parseInt(l.getAttribute("data-swiper-slide-index"),10)===a)[0]:e.slides[a];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(a=>{n.push(a)});else for(s=0;s<Math.ceil(e.params.slidesPerView);s+=1){const a=e.activeIndex+s;if(a>e.slides.length&&!r)break;n.push(o(a))}else n.push(o(e.activeIndex));for(s=0;s<n.length;s+=1)if(typeof n[s]<"u"){const a=n[s].offsetHeight;i=a>i?a:i}(i||i===0)&&(e.wrapperEl.style.height=`${i}px`)}function Pue(){const t=this,e=t.slides,n=t.isElement?t.isHorizontal()?t.wrapperEl.offsetLeft:t.wrapperEl.offsetTop:0;for(let r=0;r<e.length;r+=1)e[r].swiperSlideOffset=(t.isHorizontal()?e[r].offsetLeft:e[r].offsetTop)-n}function Due(t=this&&this.translate||0){const e=this,n=e.params,{slides:r,rtlTranslate:i,snapGrid:s}=e;if(r.length===0)return;typeof r[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let o=-t;i&&(o=t),r.forEach(a=>{a.classList.remove(n.slideVisibleClass)}),e.visibleSlidesIndexes=[],e.visibleSlides=[];for(let a=0;a<r.length;a+=1){const l=r[a];let c=l.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(c-=r[0].swiperSlideOffset);const u=(o+(n.centeredSlides?e.minTranslate():0)-c)/(l.swiperSlideSize+n.spaceBetween),d=(o-s[0]+(n.centeredSlides?e.minTranslate():0)-c)/(l.swiperSlideSize+n.spaceBetween),h=-(o-c),f=h+e.slidesSizesGrid[a];(h>=0&&h<e.size-1||f>1&&f<=e.size||h<=0&&f>=e.size)&&(e.visibleSlides.push(l),e.visibleSlidesIndexes.push(a),r[a].classList.add(n.slideVisibleClass)),l.progress=i?-u:u,l.originalProgress=i?-d:d}}function Oue(t){const e=this;if(typeof t>"u"){const u=e.rtlTranslate?-1:1;t=e&&e.translate&&e.translate*u||0}const n=e.params,r=e.maxTranslate()-e.minTranslate();let{progress:i,isBeginning:s,isEnd:o,progressLoop:a}=e;const l=s,c=o;if(r===0)i=0,s=!0,o=!0;else{i=(t-e.minTranslate())/r;const u=Math.abs(t-e.minTranslate())<1,d=Math.abs(t-e.maxTranslate())<1;s=u||i<=0,o=d||i>=1,u&&(i=0),d&&(i=1)}if(n.loop){const u=e.getSlideIndex(e.slides.filter(w=>w.getAttribute("data-swiper-slide-index")==="0")[0]),d=e.getSlideIndex(e.slides.filter(w=>w.getAttribute("data-swiper-slide-index")*1===e.slides.length-1)[0]),h=e.slidesGrid[u],f=e.slidesGrid[d],p=e.slidesGrid[e.slidesGrid.length-1],y=Math.abs(t);y>=h?a=(y-h)/p:a=(y+p-f)/p,a>1&&(a-=1)}Object.assign(e,{progress:i,progressLoop:a,isBeginning:s,isEnd:o}),(n.watchSlidesProgress||n.centeredSlides&&n.autoHeight)&&e.updateSlidesProgress(t),s&&!l&&e.emit("reachBeginning toEdge"),o&&!c&&e.emit("reachEnd toEdge"),(l&&!s||c&&!o)&&e.emit("fromEdge"),e.emit("progress",i)}function Lue(){const t=this,{slides:e,params:n,slidesEl:r,activeIndex:i}=t,s=t.virtual&&n.virtual.enabled,o=l=>Mi(r,`.${n.slideClass}${l}, swiper-slide${l}`)[0];e.forEach(l=>{l.classList.remove(n.slideActiveClass,n.slideNextClass,n.slidePrevClass)});let a;if(s)if(n.loop){let l=i-t.virtual.slidesBefore;l<0&&(l=t.virtual.slides.length+l),l>=t.virtual.slides.length&&(l-=t.virtual.slides.length),a=o(`[data-swiper-slide-index="${l}"]`)}else a=o(`[data-swiper-slide-index="${i}"]`);else a=e[i];if(a){a.classList.add(n.slideActiveClass);let l=wue(a,`.${n.slideClass}, swiper-slide`)[0];n.loop&&!l&&(l=e[0]),l&&l.classList.add(n.slideNextClass);let c=_ue(a,`.${n.slideClass}, swiper-slide`)[0];n.loop&&!c===0&&(c=e[e.length-1]),c&&c.classList.add(n.slidePrevClass)}t.emitSlidesClasses()}function Mue(t){const{slidesGrid:e,params:n}=t,r=t.rtlTranslate?t.translate:-t.translate;let i;for(let s=0;s<e.length;s+=1)typeof e[s+1]<"u"?r>=e[s]&&r<e[s+1]-(e[s+1]-e[s])/2?i=s:r>=e[s]&&r<e[s+1]&&(i=s+1):r>=e[s]&&(i=s);return n.normalizeSlideIndex&&(i<0||typeof i>"u")&&(i=0),i}function Fue(t){const e=this,n=e.rtlTranslate?e.translate:-e.translate,{snapGrid:r,params:i,activeIndex:s,realIndex:o,snapIndex:a}=e;let l=t,c;const u=h=>{let f=h-e.virtual.slidesBefore;return f<0&&(f=e.virtual.slides.length+f),f>=e.virtual.slides.length&&(f-=e.virtual.slides.length),f};if(typeof l>"u"&&(l=Mue(e)),r.indexOf(n)>=0)c=r.indexOf(n);else{const h=Math.min(i.slidesPerGroupSkip,l);c=h+Math.floor((l-h)/i.slidesPerGroup)}if(c>=r.length&&(c=r.length-1),l===s){c!==a&&(e.snapIndex=c,e.emit("snapIndexChange")),e.params.loop&&e.virtual&&e.params.virtual.enabled&&(e.realIndex=u(l));return}let d;e.virtual&&i.virtual.enabled&&i.loop?d=u(l):e.slides[l]?d=parseInt(e.slides[l].getAttribute("data-swiper-slide-index")||l,10):d=l,Object.assign(e,{snapIndex:c,realIndex:d,previousIndex:s,activeIndex:l}),e.emit("activeIndexChange"),e.emit("snapIndexChange"),o!==d&&e.emit("realIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&e.emit("slideChange")}function $ue(t){const e=this,n=e.params,r=t.closest(`.${n.slideClass}, swiper-slide`);let i=!1,s;if(r){for(let o=0;o<e.slides.length;o+=1)if(e.slides[o]===r){i=!0,s=o;break}}if(r&&i)e.clickedSlide=r,e.virtual&&e.params.virtual.enabled?e.clickedIndex=parseInt(r.getAttribute("data-swiper-slide-index"),10):e.clickedIndex=s;else{e.clickedSlide=void 0,e.clickedIndex=void 0;return}n.slideToClickedSlide&&e.clickedIndex!==void 0&&e.clickedIndex!==e.activeIndex&&e.slideToClickedSlide()}const Uue={updateSize:Aue,updateSlides:Rue,updateAutoHeight:Nue,updateSlidesOffset:Pue,updateSlidesProgress:Due,updateProgress:Oue,updateSlidesClasses:Lue,updateActiveIndex:Fue,updateClickedSlide:$ue};function jue(t=this.isHorizontal()?"x":"y"){const e=this,{params:n,rtlTranslate:r,translate:i,wrapperEl:s}=e;if(n.virtualTranslate)return r?-i:i;if(n.cssMode)return i;let o=yue(s,t);return r&&(o=-o),o||0}function Vue(t,e){const n=this,{rtlTranslate:r,params:i,wrapperEl:s,progress:o}=n;let a=0,l=0;const c=0;n.isHorizontal()?a=r?-t:t:l=t,i.roundLengths&&(a=Math.floor(a),l=Math.floor(l)),i.cssMode?s[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-a:-l:i.virtualTranslate||(s.style.transform=`translate3d(${a}px, ${l}px, ${c}px)`),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?a:l;let u;const d=n.maxTranslate()-n.minTranslate();d===0?u=0:u=(t-n.minTranslate())/d,u!==o&&n.updateProgress(t),n.emit("setTranslate",n.translate,e)}function Bue(){return-this.snapGrid[0]}function zue(){return-this.snapGrid[this.snapGrid.length-1]}function Wue(t=0,e=this.params.speed,n=!0,r=!0,i){const s=this,{params:o,wrapperEl:a}=s;if(s.animating&&o.preventInteractionOnTransition)return!1;const l=s.minTranslate(),c=s.maxTranslate();let u;if(r&&t>l?u=l:r&&t<c?u=c:u=t,s.updateProgress(u),o.cssMode){const d=s.isHorizontal();if(e===0)a[d?"scrollLeft":"scrollTop"]=-u;else{if(!s.support.smoothScroll)return qj({swiper:s,targetPosition:-u,side:d?"left":"top"}),!0;a.scrollTo({[d?"left":"top"]:-u,behavior:"smooth"})}return!0}return e===0?(s.setTransition(0),s.setTranslate(u),n&&(s.emit("beforeTransitionStart",e,i),s.emit("transitionEnd"))):(s.setTransition(e),s.setTranslate(u),n&&(s.emit("beforeTransitionStart",e,i),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(h){!s||s.destroyed||h.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,n&&s.emit("transitionEnd"))}),s.wrapperEl.addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd))),!0}const Hue={getTranslate:jue,setTranslate:Vue,minTranslate:Bue,maxTranslate:zue,translateTo:Wue};function Gue(t,e){const n=this;n.params.cssMode||(n.wrapperEl.style.transitionDuration=`${t}ms`),n.emit("setTransition",t,e)}function Xj({swiper:t,runCallbacks:e,direction:n,step:r}){const{activeIndex:i,previousIndex:s}=t;let o=n;if(o||(i>s?o="next":i<s?o="prev":o="reset"),t.emit(`transition${r}`),e&&i!==s){if(o==="reset"){t.emit(`slideResetTransition${r}`);return}t.emit(`slideChangeTransition${r}`),o==="next"?t.emit(`slideNextTransition${r}`):t.emit(`slidePrevTransition${r}`)}}function que(t=!0,e){const n=this,{params:r}=n;r.cssMode||(r.autoHeight&&n.updateAutoHeight(),Xj({swiper:n,runCallbacks:t,direction:e,step:"Start"}))}function Kue(t=!0,e){const n=this,{params:r}=n;n.animating=!1,!r.cssMode&&(n.setTransition(0),Xj({swiper:n,runCallbacks:t,direction:e,step:"End"}))}const Que={setTransition:Gue,transitionStart:que,transitionEnd:Kue};function Yue(t=0,e=this.params.speed,n=!0,r,i){typeof t=="string"&&(t=parseInt(t,10));const s=this;let o=t;o<0&&(o=0);const{params:a,snapGrid:l,slidesGrid:c,previousIndex:u,activeIndex:d,rtlTranslate:h,wrapperEl:f,enabled:p}=s;if(s.animating&&a.preventInteractionOnTransition||!p&&!r&&!i)return!1;const y=Math.min(s.params.slidesPerGroupSkip,o);let w=y+Math.floor((o-y)/s.params.slidesPerGroup);w>=l.length&&(w=l.length-1);const m=-l[w];if(a.normalizeSlideIndex)for(let v=0;v<c.length;v+=1){const b=-Math.floor(m*100),I=Math.floor(c[v]*100),E=Math.floor(c[v+1]*100);typeof c[v+1]<"u"?b>=I&&b<E-(E-I)/2?o=v:b>=I&&b<E&&(o=v+1):b>=I&&(o=v)}if(s.initialized&&o!==d&&(!s.allowSlideNext&&m<s.translate&&m<s.minTranslate()||!s.allowSlidePrev&&m>s.translate&&m>s.maxTranslate()&&(d||0)!==o))return!1;o!==(u||0)&&n&&s.emit("beforeSlideChangeStart"),s.updateProgress(m);let g;if(o>d?g="next":o<d?g="prev":g="reset",h&&-m===s.translate||!h&&m===s.translate)return s.updateActiveIndex(o),a.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),a.effect!=="slide"&&s.setTranslate(m),g!=="reset"&&(s.transitionStart(n,g),s.transitionEnd(n,g)),!1;if(a.cssMode){const v=s.isHorizontal(),b=h?m:-m;if(e===0){const I=s.virtual&&s.params.virtual.enabled;I&&(s.wrapperEl.style.scrollSnapType="none",s._immediateVirtual=!0),I&&!s._cssModeVirtualInitialSet&&s.params.initialSlide>0?(s._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{f[v?"scrollLeft":"scrollTop"]=b})):f[v?"scrollLeft":"scrollTop"]=b,I&&requestAnimationFrame(()=>{s.wrapperEl.style.scrollSnapType="",s._immediateVirtual=!1})}else{if(!s.support.smoothScroll)return qj({swiper:s,targetPosition:b,side:v?"left":"top"}),!0;f.scrollTo({[v?"left":"top"]:b,behavior:"smooth"})}return!0}return s.setTransition(e),s.setTranslate(m),s.updateActiveIndex(o),s.updateSlidesClasses(),s.emit("beforeTransitionStart",e,r),s.transitionStart(n,g),e===0?s.transitionEnd(n,g):s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(b){!s||s.destroyed||b.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(n,g))}),s.wrapperEl.addEventListener("transitionend",s.onSlideToWrapperTransitionEnd)),!0}function Xue(t=0,e=this.params.speed,n=!0,r){typeof t=="string"&&(t=parseInt(t,10));const i=this;let s=t;return i.params.loop&&(i.virtual&&i.params.virtual.enabled?s=s+i.virtual.slidesBefore:s=i.getSlideIndex(i.slides.filter(o=>o.getAttribute("data-swiper-slide-index")*1===s)[0])),i.slideTo(s,e,n,r)}function Jue(t=this.params.speed,e=!0,n){const r=this,{enabled:i,params:s,animating:o}=r;if(!i)return r;let a=s.slidesPerGroup;s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(a=Math.max(r.slidesPerViewDynamic("current",!0),1));const l=r.activeIndex<s.slidesPerGroupSkip?1:a,c=r.virtual&&s.virtual.enabled;if(s.loop){if(o&&!c&&s.loopPreventsSliding)return!1;r.loopFix({direction:"next"}),r._clientLeft=r.wrapperEl.clientLeft}return s.rewind&&r.isEnd?r.slideTo(0,t,e,n):r.slideTo(r.activeIndex+l,t,e,n)}function Zue(t=this.params.speed,e=!0,n){const r=this,{params:i,snapGrid:s,slidesGrid:o,rtlTranslate:a,enabled:l,animating:c}=r;if(!l)return r;const u=r.virtual&&i.virtual.enabled;if(i.loop){if(c&&!u&&i.loopPreventsSliding)return!1;r.loopFix({direction:"prev"}),r._clientLeft=r.wrapperEl.clientLeft}const d=a?r.translate:-r.translate;function h(m){return m<0?-Math.floor(Math.abs(m)):Math.floor(m)}const f=h(d),p=s.map(m=>h(m));let y=s[p.indexOf(f)-1];if(typeof y>"u"&&i.cssMode){let m;s.forEach((g,v)=>{f>=g&&(m=v)}),typeof m<"u"&&(y=s[m>0?m-1:m])}let w=0;if(typeof y<"u"&&(w=o.indexOf(y),w<0&&(w=r.activeIndex-1),i.slidesPerView==="auto"&&i.slidesPerGroup===1&&i.slidesPerGroupAuto&&(w=w-r.slidesPerViewDynamic("previous",!0)+1,w=Math.max(w,0))),i.rewind&&r.isBeginning){const m=r.params.virtual&&r.params.virtual.enabled&&r.virtual?r.virtual.slides.length-1:r.slides.length-1;return r.slideTo(m,t,e,n)}return r.slideTo(w,t,e,n)}function ede(t=this.params.speed,e=!0,n){const r=this;return r.slideTo(r.activeIndex,t,e,n)}function tde(t=this.params.speed,e=!0,n,r=.5){const i=this;let s=i.activeIndex;const o=Math.min(i.params.slidesPerGroupSkip,s),a=o+Math.floor((s-o)/i.params.slidesPerGroup),l=i.rtlTranslate?i.translate:-i.translate;if(l>=i.snapGrid[a]){const c=i.snapGrid[a],u=i.snapGrid[a+1];l-c>(u-c)*r&&(s+=i.params.slidesPerGroup)}else{const c=i.snapGrid[a-1],u=i.snapGrid[a];l-c<=(u-c)*r&&(s-=i.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,i.slidesGrid.length-1),i.slideTo(s,t,e,n)}function nde(){const t=this,{params:e,slidesEl:n}=t,r=e.slidesPerView==="auto"?t.slidesPerViewDynamic():e.slidesPerView;let i=t.clickedIndex,s;const o=t.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(t.animating)return;s=parseInt(t.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?i<t.loopedSlides-r/2||i>t.slides.length-t.loopedSlides+r/2?(t.loopFix(),i=t.getSlideIndex(Mi(n,`${o}[data-swiper-slide-index="${s}"]`)[0]),wS(()=>{t.slideTo(i)})):t.slideTo(i):i>t.slides.length-r?(t.loopFix(),i=t.getSlideIndex(Mi(n,`${o}[data-swiper-slide-index="${s}"]`)[0]),wS(()=>{t.slideTo(i)})):t.slideTo(i)}else t.slideTo(i)}const rde={slideTo:Yue,slideToLoop:Xue,slideNext:Jue,slidePrev:Zue,slideReset:ede,slideToClosest:tde,slideToClickedSlide:nde};function ide(t){const e=this,{params:n,slidesEl:r}=e;if(!n.loop||e.virtual&&e.params.virtual.enabled)return;Mi(r,`.${n.slideClass}, swiper-slide`).forEach((s,o)=>{s.setAttribute("data-swiper-slide-index",o)}),e.loopFix({slideRealIndex:t,direction:n.centeredSlides?void 0:"next"})}function sde({slideRealIndex:t,slideTo:e=!0,direction:n,setTranslate:r,activeSlideIndex:i,byController:s,byMousewheel:o}={}){const a=this;if(!a.params.loop)return;a.emit("beforeLoopFix");const{slides:l,allowSlidePrev:c,allowSlideNext:u,slidesEl:d,params:h}=a;if(a.allowSlidePrev=!0,a.allowSlideNext=!0,a.virtual&&h.virtual.enabled){e&&(!h.centeredSlides&&a.snapIndex===0?a.slideTo(a.virtual.slides.length,0,!1,!0):h.centeredSlides&&a.snapIndex<h.slidesPerView?a.slideTo(a.virtual.slides.length+a.snapIndex,0,!1,!0):a.snapIndex===a.snapGrid.length-1&&a.slideTo(a.virtual.slidesBefore,0,!1,!0)),a.allowSlidePrev=c,a.allowSlideNext=u,a.emit("loopFix");return}const f=h.slidesPerView==="auto"?a.slidesPerViewDynamic():Math.ceil(parseFloat(h.slidesPerView,10));let p=h.loopedSlides||f;p%h.slidesPerGroup!==0&&(p+=h.slidesPerGroup-p%h.slidesPerGroup),a.loopedSlides=p;const y=[],w=[];let m=a.activeIndex;typeof i>"u"?i=a.getSlideIndex(a.slides.filter(E=>E.classList.contains("swiper-slide-active"))[0]):m=i;const g=n==="next"||!n,v=n==="prev"||!n;let b=0,I=0;if(i<p){b=Math.max(p-i,h.slidesPerGroup);for(let E=0;E<p-i;E+=1){const D=E-Math.floor(E/l.length)*l.length;y.push(l.length-D-1)}}else if(i>a.slides.length-p*2){I=Math.max(i-(a.slides.length-p*2),h.slidesPerGroup);for(let E=0;E<I;E+=1){const D=E-Math.floor(E/l.length)*l.length;w.push(D)}}if(v&&y.forEach(E=>{d.prepend(a.slides[E])}),g&&w.forEach(E=>{d.append(a.slides[E])}),a.recalcSlides(),h.watchSlidesProgress&&a.updateSlidesOffset(),e){if(y.length>0&&v)if(typeof t>"u"){const E=a.slidesGrid[m],S=a.slidesGrid[m+b]-E;o?a.setTranslate(a.translate-S):(a.slideTo(m+b,0,!1,!0),r&&(a.touches[a.isHorizontal()?"startX":"startY"]+=S))}else r&&a.slideToLoop(t,0,!1,!0);else if(w.length>0&&g)if(typeof t>"u"){const E=a.slidesGrid[m],S=a.slidesGrid[m-I]-E;o?a.setTranslate(a.translate-S):(a.slideTo(m-I,0,!1,!0),r&&(a.touches[a.isHorizontal()?"startX":"startY"]+=S))}else a.slideToLoop(t,0,!1,!0)}if(a.allowSlidePrev=c,a.allowSlideNext=u,a.controller&&a.controller.control&&!s){const E={slideRealIndex:t,slideTo:!1,direction:n,setTranslate:r,activeSlideIndex:i,byController:!0};Array.isArray(a.controller.control)?a.controller.control.forEach(D=>{D.params.loop&&D.loopFix(E)}):a.controller.control instanceof a.constructor&&a.controller.control.params.loop&&a.controller.control.loopFix(E)}a.emit("loopFix")}function ode(){const t=this,{slides:e,params:n,slidesEl:r}=t;if(!n.loop||t.virtual&&t.params.virtual.enabled)return;t.recalcSlides();const i=[];e.forEach(s=>{const o=typeof s.swiperSlideIndex>"u"?s.getAttribute("data-swiper-slide-index")*1:s.swiperSlideIndex;i[o]=s}),e.forEach(s=>{s.removeAttribute("data-swiper-slide-index")}),i.forEach(s=>{r.append(s)}),t.recalcSlides(),t.slideTo(t.realIndex,0)}const ade={loopCreate:ide,loopFix:sde,loopDestroy:ode};function lde(t){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const n=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),n.style.cursor="move",n.style.cursor=t?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function cde(){const t=this;t.params.watchOverflow&&t.isLocked||t.params.cssMode||(t.isElement&&(t.__preventObserver__=!0),t[t.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1}))}const ude={setGrabCursor:lde,unsetGrabCursor:cde};function dde(t,e=this){function n(r){if(!r||r===kl()||r===zr())return null;r.assignedSlot&&(r=r.assignedSlot);const i=r.closest(t);return!i&&!r.getRootNode?null:i||n(r.getRootNode().host)}return n(e)}function hde(t){const e=this,n=kl(),r=zr(),i=e.touchEventsData;i.evCache.push(t);const{params:s,touches:o,enabled:a}=e;if(!a||!s.simulateTouch&&t.pointerType==="mouse"||e.animating&&s.preventInteractionOnTransition)return;!e.animating&&s.cssMode&&s.loop&&e.loopFix();let l=t;l.originalEvent&&(l=l.originalEvent);let c=l.target;if(s.touchEventsTarget==="wrapper"&&!e.wrapperEl.contains(c)||"which"in l&&l.which===3||"button"in l&&l.button>0||i.isTouched&&i.isMoved)return;const u=!!s.noSwipingClass&&s.noSwipingClass!=="",d=t.composedPath?t.composedPath():t.path;u&&l.target&&l.target.shadowRoot&&d&&(c=d[0]);const h=s.noSwipingSelector?s.noSwipingSelector:`.${s.noSwipingClass}`,f=!!(l.target&&l.target.shadowRoot);if(s.noSwiping&&(f?dde(h,c):c.closest(h))){e.allowClick=!0;return}if(s.swipeHandler&&!c.closest(s.swipeHandler))return;o.currentX=l.pageX,o.currentY=l.pageY;const p=o.currentX,y=o.currentY,w=s.edgeSwipeDetection||s.iOSEdgeSwipeDetection,m=s.edgeSwipeThreshold||s.iOSEdgeSwipeThreshold;if(w&&(p<=m||p>=r.innerWidth-m))if(w==="prevent")t.preventDefault();else return;Object.assign(i,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=p,o.startY=y,i.touchStartTime=nf(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,s.threshold>0&&(i.allowThresholdMove=!1);let g=!0;c.matches(i.focusableElements)&&(g=!1,c.nodeName==="SELECT"&&(i.isTouched=!1)),n.activeElement&&n.activeElement.matches(i.focusableElements)&&n.activeElement!==c&&n.activeElement.blur();const v=g&&e.allowTouchMove&&s.touchStartPreventDefault;(s.touchStartForcePreventDefault||v)&&!c.isContentEditable&&l.preventDefault(),e.params.freeMode&&e.params.freeMode.enabled&&e.freeMode&&e.animating&&!s.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",l)}function fde(t){const e=kl(),n=this,r=n.touchEventsData,{params:i,touches:s,rtlTranslate:o,enabled:a}=n;if(!a||!i.simulateTouch&&t.pointerType==="mouse")return;let l=t;if(l.originalEvent&&(l=l.originalEvent),!r.isTouched){r.startMoving&&r.isScrolling&&n.emit("touchMoveOpposite",l);return}const c=r.evCache.findIndex(E=>E.pointerId===l.pointerId);c>=0&&(r.evCache[c]=l);const u=r.evCache.length>1?r.evCache[0]:l,d=u.pageX,h=u.pageY;if(l.preventedByNestedSwiper){s.startX=d,s.startY=h;return}if(!n.allowTouchMove){l.target.matches(r.focusableElements)||(n.allowClick=!1),r.isTouched&&(Object.assign(s,{startX:d,startY:h,prevX:n.touches.currentX,prevY:n.touches.currentY,currentX:d,currentY:h}),r.touchStartTime=nf());return}if(i.touchReleaseOnEdges&&!i.loop){if(n.isVertical()){if(h<s.startY&&n.translate<=n.maxTranslate()||h>s.startY&&n.translate>=n.minTranslate()){r.isTouched=!1,r.isMoved=!1;return}}else if(d<s.startX&&n.translate<=n.maxTranslate()||d>s.startX&&n.translate>=n.minTranslate())return}if(e.activeElement&&l.target===e.activeElement&&l.target.matches(r.focusableElements)){r.isMoved=!0,n.allowClick=!1;return}if(r.allowTouchCallbacks&&n.emit("touchMove",l),l.targetTouches&&l.targetTouches.length>1)return;s.currentX=d,s.currentY=h;const f=s.currentX-s.startX,p=s.currentY-s.startY;if(n.params.threshold&&Math.sqrt(f**2+p**2)<n.params.threshold)return;if(typeof r.isScrolling>"u"){let E;n.isHorizontal()&&s.currentY===s.startY||n.isVertical()&&s.currentX===s.startX?r.isScrolling=!1:f*f+p*p>=25&&(E=Math.atan2(Math.abs(p),Math.abs(f))*180/Math.PI,r.isScrolling=n.isHorizontal()?E>i.touchAngle:90-E>i.touchAngle)}if(r.isScrolling&&n.emit("touchMoveOpposite",l),typeof r.startMoving>"u"&&(s.currentX!==s.startX||s.currentY!==s.startY)&&(r.startMoving=!0),r.isScrolling||n.zoom&&n.params.zoom&&n.params.zoom.enabled&&r.evCache.length>1){r.isTouched=!1;return}if(!r.startMoving)return;n.allowClick=!1,!i.cssMode&&l.cancelable&&l.preventDefault(),i.touchMoveStopPropagation&&!i.nested&&l.stopPropagation();let y=n.isHorizontal()?f:p,w=n.isHorizontal()?s.currentX-s.previousX:s.currentY-s.previousY;i.oneWayMovement&&(y=Math.abs(y)*(o?1:-1),w=Math.abs(w)*(o?1:-1)),s.diff=y,y*=i.touchRatio,o&&(y=-y,w=-w);const m=n.touchesDirection;n.swipeDirection=y>0?"prev":"next",n.touchesDirection=w>0?"prev":"next";const g=n.params.loop&&!i.cssMode;if(!r.isMoved){if(g&&n.loopFix({direction:n.swipeDirection}),r.startTranslate=n.getTranslate(),n.setTransition(0),n.animating){const E=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});n.wrapperEl.dispatchEvent(E)}r.allowMomentumBounce=!1,i.grabCursor&&(n.allowSlideNext===!0||n.allowSlidePrev===!0)&&n.setGrabCursor(!0),n.emit("sliderFirstMove",l)}let v;r.isMoved&&m!==n.touchesDirection&&g&&Math.abs(y)>=1&&(n.loopFix({direction:n.swipeDirection,setTranslate:!0}),v=!0),n.emit("sliderMove",l),r.isMoved=!0,r.currentTranslate=y+r.startTranslate;let b=!0,I=i.resistanceRatio;if(i.touchReleaseOnEdges&&(I=0),y>0?(g&&!v&&r.currentTranslate>(i.centeredSlides?n.minTranslate()-n.size/2:n.minTranslate())&&n.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),r.currentTranslate>n.minTranslate()&&(b=!1,i.resistance&&(r.currentTranslate=n.minTranslate()-1+(-n.minTranslate()+r.startTranslate+y)**I))):y<0&&(g&&!v&&r.currentTranslate<(i.centeredSlides?n.maxTranslate()+n.size/2:n.maxTranslate())&&n.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:n.slides.length-(i.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(parseFloat(i.slidesPerView,10)))}),r.currentTranslate<n.maxTranslate()&&(b=!1,i.resistance&&(r.currentTranslate=n.maxTranslate()+1-(n.maxTranslate()-r.startTranslate-y)**I))),b&&(l.preventedByNestedSwiper=!0),!n.allowSlideNext&&n.swipeDirection==="next"&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!n.allowSlidePrev&&n.swipeDirection==="prev"&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),!n.allowSlidePrev&&!n.allowSlideNext&&(r.currentTranslate=r.startTranslate),i.threshold>0)if(Math.abs(y)>i.threshold||r.allowThresholdMove){if(!r.allowThresholdMove){r.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,r.currentTranslate=r.startTranslate,s.diff=n.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY;return}}else{r.currentTranslate=r.startTranslate;return}!i.followFinger||i.cssMode||((i.freeMode&&i.freeMode.enabled&&n.freeMode||i.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),n.params.freeMode&&i.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(r.currentTranslate),n.setTranslate(r.currentTranslate))}function pde(t){const e=this,n=e.touchEventsData,r=n.evCache.findIndex(v=>v.pointerId===t.pointerId);if(r>=0&&n.evCache.splice(r,1),["pointercancel","pointerout","pointerleave"].includes(t.type)&&!(t.type==="pointercancel"&&(e.browser.isSafari||e.browser.isWebView)))return;const{params:i,touches:s,rtlTranslate:o,slidesGrid:a,enabled:l}=e;if(!l||!i.simulateTouch&&t.pointerType==="mouse")return;let c=t;if(c.originalEvent&&(c=c.originalEvent),n.allowTouchCallbacks&&e.emit("touchEnd",c),n.allowTouchCallbacks=!1,!n.isTouched){n.isMoved&&i.grabCursor&&e.setGrabCursor(!1),n.isMoved=!1,n.startMoving=!1;return}i.grabCursor&&n.isMoved&&n.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const u=nf(),d=u-n.touchStartTime;if(e.allowClick){const v=c.path||c.composedPath&&c.composedPath();e.updateClickedSlide(v&&v[0]||c.target),e.emit("tap click",c),d<300&&u-n.lastClickTime<300&&e.emit("doubleTap doubleClick",c)}if(n.lastClickTime=nf(),wS(()=>{e.destroyed||(e.allowClick=!0)}),!n.isTouched||!n.isMoved||!e.swipeDirection||s.diff===0||n.currentTranslate===n.startTranslate){n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;return}n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;let h;if(i.followFinger?h=o?e.translate:-e.translate:h=-n.currentTranslate,i.cssMode)return;if(e.params.freeMode&&i.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:h});return}let f=0,p=e.slidesSizesGrid[0];for(let v=0;v<a.length;v+=v<i.slidesPerGroupSkip?1:i.slidesPerGroup){const b=v<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;typeof a[v+b]<"u"?h>=a[v]&&h<a[v+b]&&(f=v,p=a[v+b]-a[v]):h>=a[v]&&(f=v,p=a[a.length-1]-a[a.length-2])}let y=null,w=null;i.rewind&&(e.isBeginning?w=e.params.virtual&&e.params.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(y=0));const m=(h-a[f])/p,g=f<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;if(d>i.longSwipesMs){if(!i.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(m>=i.longSwipesRatio?e.slideTo(i.rewind&&e.isEnd?y:f+g):e.slideTo(f)),e.swipeDirection==="prev"&&(m>1-i.longSwipesRatio?e.slideTo(f+g):w!==null&&m<0&&Math.abs(m)>i.longSwipesRatio?e.slideTo(w):e.slideTo(f))}else{if(!i.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(c.target===e.navigation.nextEl||c.target===e.navigation.prevEl)?c.target===e.navigation.nextEl?e.slideTo(f+g):e.slideTo(f):(e.swipeDirection==="next"&&e.slideTo(y!==null?y:f+g),e.swipeDirection==="prev"&&e.slideTo(w!==null?w:f))}}let qR;function KR(){const t=this,{params:e,el:n}=t;if(n&&n.offsetWidth===0)return;e.breakpoints&&t.setBreakpoint();const{allowSlideNext:r,allowSlidePrev:i,snapGrid:s}=t,o=t.virtual&&t.params.virtual.enabled;t.allowSlideNext=!0,t.allowSlidePrev=!0,t.updateSize(),t.updateSlides(),t.updateSlidesClasses();const a=o&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&t.isEnd&&!t.isBeginning&&!t.params.centeredSlides&&!a?t.slideTo(t.slides.length-1,0,!1,!0):t.params.loop&&!o?t.slideToLoop(t.realIndex,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0),t.autoplay&&t.autoplay.running&&t.autoplay.paused&&(clearTimeout(qR),qR=setTimeout(()=>{t.autoplay&&t.autoplay.running&&t.autoplay.paused&&t.autoplay.resume()},500)),t.allowSlidePrev=i,t.allowSlideNext=r,t.params.watchOverflow&&s!==t.snapGrid&&t.checkOverflow()}function mde(t){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&t.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(t.stopPropagation(),t.stopImmediatePropagation())))}function gde(){const t=this,{wrapperEl:e,rtlTranslate:n,enabled:r}=t;if(!r)return;t.previousTranslate=t.translate,t.isHorizontal()?t.translate=-e.scrollLeft:t.translate=-e.scrollTop,t.translate===0&&(t.translate=0),t.updateActiveIndex(),t.updateSlidesClasses();let i;const s=t.maxTranslate()-t.minTranslate();s===0?i=0:i=(t.translate-t.minTranslate())/s,i!==t.progress&&t.updateProgress(n?-t.translate:t.translate),t.emit("setTranslate",t.translate,!1)}const _m=(t,e)=>{if(!t||t.destroyed||!t.params)return;const n=()=>t.isElement?"swiper-slide":`.${t.params.slideClass}`,r=e.closest(n());if(r){const i=r.querySelector(`.${t.params.lazyPreloaderClass}`);i&&i.remove()}};function yde(t){const e=this;_m(e,t.target),e.update()}let QR=!1;function vde(){}const Jj=(t,e)=>{const n=kl(),{params:r,el:i,wrapperEl:s,device:o}=t,a=!!r.nested,l=e==="on"?"addEventListener":"removeEventListener",c=e;i[l]("pointerdown",t.onTouchStart,{passive:!1}),n[l]("pointermove",t.onTouchMove,{passive:!1,capture:a}),n[l]("pointerup",t.onTouchEnd,{passive:!0}),n[l]("pointercancel",t.onTouchEnd,{passive:!0}),n[l]("pointerout",t.onTouchEnd,{passive:!0}),n[l]("pointerleave",t.onTouchEnd,{passive:!0}),(r.preventClicks||r.preventClicksPropagation)&&i[l]("click",t.onClick,!0),r.cssMode&&s[l]("scroll",t.onScroll),r.updateOnWindowResize?t[c](o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",KR,!0):t[c]("observerUpdate",KR,!0),i[l]("load",t.onLoad,{capture:!0})};function _de(){const t=this,e=kl(),{params:n}=t;t.onTouchStart=hde.bind(t),t.onTouchMove=fde.bind(t),t.onTouchEnd=pde.bind(t),n.cssMode&&(t.onScroll=gde.bind(t)),t.onClick=mde.bind(t),t.onLoad=yde.bind(t),QR||(e.addEventListener("touchstart",vde),QR=!0),Jj(t,"on")}function wde(){Jj(this,"off")}const Sde={attachEvents:_de,detachEvents:wde},YR=(t,e)=>t.grid&&e.grid&&e.grid.rows>1;function bde(){const t=this,{realIndex:e,initialized:n,params:r,el:i}=t,s=r.breakpoints;if(!s||s&&Object.keys(s).length===0)return;const o=t.getBreakpoint(s,t.params.breakpointsBase,t.el);if(!o||t.currentBreakpoint===o)return;const l=(o in s?s[o]:void 0)||t.originalParams,c=YR(t,r),u=YR(t,l),d=r.enabled;c&&!u?(i.classList.remove(`${r.containerModifierClass}grid`,`${r.containerModifierClass}grid-column`),t.emitContainerClasses()):!c&&u&&(i.classList.add(`${r.containerModifierClass}grid`),(l.grid.fill&&l.grid.fill==="column"||!l.grid.fill&&r.grid.fill==="column")&&i.classList.add(`${r.containerModifierClass}grid-column`),t.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(y=>{const w=r[y]&&r[y].enabled,m=l[y]&&l[y].enabled;w&&!m&&t[y].disable(),!w&&m&&t[y].enable()});const h=l.direction&&l.direction!==r.direction,f=r.loop&&(l.slidesPerView!==r.slidesPerView||h);h&&n&&t.changeDirection(),kr(t.params,l);const p=t.params.enabled;Object.assign(t,{allowTouchMove:t.params.allowTouchMove,allowSlideNext:t.params.allowSlideNext,allowSlidePrev:t.params.allowSlidePrev}),d&&!p?t.disable():!d&&p&&t.enable(),t.currentBreakpoint=o,t.emit("_beforeBreakpoint",l),f&&n&&(t.loopDestroy(),t.loopCreate(e),t.updateSlides()),t.emit("breakpoint",l)}function Ede(t,e="window",n){if(!t||e==="container"&&!n)return;let r=!1;const i=zr(),s=e==="window"?i.innerHeight:n.clientHeight,o=Object.keys(t).map(a=>{if(typeof a=="string"&&a.indexOf("@")===0){const l=parseFloat(a.substr(1));return{value:s*l,point:a}}return{value:a,point:a}});o.sort((a,l)=>parseInt(a.value,10)-parseInt(l.value,10));for(let a=0;a<o.length;a+=1){const{point:l,value:c}=o[a];e==="window"?i.matchMedia(`(min-width: ${c}px)`).matches&&(r=l):c<=n.clientWidth&&(r=l)}return r||"max"}const Tde={setBreakpoint:bde,getBreakpoint:Ede};function xde(t,e){const n=[];return t.forEach(r=>{typeof r=="object"?Object.keys(r).forEach(i=>{r[i]&&n.push(e+i)}):typeof r=="string"&&n.push(e+r)}),n}function Ide(){const t=this,{classNames:e,params:n,rtl:r,el:i,device:s}=t,o=xde(["initialized",n.direction,{"free-mode":t.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:r},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&n.grid.fill==="column"},{android:s.android},{ios:s.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);e.push(...o),i.classList.add(...e),t.emitContainerClasses()}function Cde(){const t=this,{el:e,classNames:n}=t;e.classList.remove(...n),t.emitContainerClasses()}const kde={addClasses:Ide,removeClasses:Cde};function Ade(){const t=this,{isLocked:e,params:n}=t,{slidesOffsetBefore:r}=n;if(r){const i=t.slides.length-1,s=t.slidesGrid[i]+t.slidesSizesGrid[i]+r*2;t.isLocked=t.size>s}else t.isLocked=t.snapGrid.length===1;n.allowSlideNext===!0&&(t.allowSlideNext=!t.isLocked),n.allowSlidePrev===!0&&(t.allowSlidePrev=!t.isLocked),e&&e!==t.isLocked&&(t.isEnd=!1),e!==t.isLocked&&t.emit(t.isLocked?"lock":"unlock")}const Rde={checkOverflow:Ade},XR={init:!0,direction:"horizontal",oneWayMovement:!1,touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopedSlides:null,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",runCallbacksOnInit:!0,_emitClasses:!1};function Nde(t,e){return function(r={}){const i=Object.keys(r)[0],s=r[i];if(typeof s!="object"||s===null){kr(e,r);return}if(["navigation","pagination","scrollbar"].indexOf(i)>=0&&t[i]===!0&&(t[i]={auto:!0}),!(i in t&&"enabled"in s)){kr(e,r);return}t[i]===!0&&(t[i]={enabled:!0}),typeof t[i]=="object"&&!("enabled"in t[i])&&(t[i].enabled=!0),t[i]||(t[i]={enabled:!1}),kr(e,r)}}const H0={eventsEmitter:kue,update:Uue,translate:Hue,transition:Que,slide:rde,loop:ade,grabCursor:ude,events:Sde,breakpoints:Tde,checkOverflow:Rde,classes:kde},G0={};let rf=class Ji{constructor(...e){let n,r;e.length===1&&e[0].constructor&&Object.prototype.toString.call(e[0]).slice(8,-1)==="Object"?r=e[0]:[n,r]=e,r||(r={}),r=kr({},r),n&&!r.el&&(r.el=n);const i=kl();if(r.el&&typeof r.el=="string"&&i.querySelectorAll(r.el).length>1){const l=[];return i.querySelectorAll(r.el).forEach(c=>{const u=kr({},r,{el:c});l.push(new Ji(u))}),l}const s=this;s.__swiper__=!0,s.support=Yj(),s.device=Eue({userAgent:r.userAgent}),s.browser=xue(),s.eventsListeners={},s.eventsAnyListeners=[],s.modules=[...s.__modules__],r.modules&&Array.isArray(r.modules)&&s.modules.push(...r.modules);const o={};s.modules.forEach(l=>{l({params:r,swiper:s,extendParams:Nde(r,o),on:s.on.bind(s),once:s.once.bind(s),off:s.off.bind(s),emit:s.emit.bind(s)})});const a=kr({},XR,o);return s.params=kr({},a,G0,r),s.originalParams=kr({},s.params),s.passedParams=kr({},r),s.params&&s.params.on&&Object.keys(s.params.on).forEach(l=>{s.on(l,s.params.on[l])}),s.params&&s.params.onAny&&s.onAny(s.params.onAny),Object.assign(s,{enabled:s.params.enabled,el:n,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return s.params.direction==="horizontal"},isVertical(){return s.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:s.params.allowSlideNext,allowSlidePrev:s.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:s.params.focusableElements,lastClickTime:nf(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,evCache:[]},allowClick:!0,allowTouchMove:s.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),s.emit("_swiper"),s.params.init&&s.init(),s}getSlideIndex(e){const{slidesEl:n,params:r}=this,i=Mi(n,`.${r.slideClass}, swiper-slide`),s=Hg(i[0]);return Hg(e)-s}recalcSlides(){const e=this,{slidesEl:n,params:r}=e;e.slides=Mi(n,`.${r.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,n){const r=this;e=Math.min(Math.max(e,0),1);const i=r.minTranslate(),o=(r.maxTranslate()-i)*e+i;r.translateTo(o,typeof n>"u"?0:n),r.updateActiveIndex(),r.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const n=e.el.className.split(" ").filter(r=>r.indexOf("swiper")===0||r.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",n.join(" "))}getSlideClasses(e){const n=this;return n.destroyed?"":e.className.split(" ").filter(r=>r.indexOf("swiper-slide")===0||r.indexOf(n.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const n=[];e.slides.forEach(r=>{const i=e.getSlideClasses(r);n.push({slideEl:r,classNames:i}),e.emit("_slideClass",r,i)}),e.emit("_slideClasses",n)}slidesPerViewDynamic(e="current",n=!1){const r=this,{params:i,slides:s,slidesGrid:o,slidesSizesGrid:a,size:l,activeIndex:c}=r;let u=1;if(i.centeredSlides){let d=s[c].swiperSlideSize,h;for(let f=c+1;f<s.length;f+=1)s[f]&&!h&&(d+=s[f].swiperSlideSize,u+=1,d>l&&(h=!0));for(let f=c-1;f>=0;f-=1)s[f]&&!h&&(d+=s[f].swiperSlideSize,u+=1,d>l&&(h=!0))}else if(e==="current")for(let d=c+1;d<s.length;d+=1)(n?o[d]+a[d]-o[c]<l:o[d]-o[c]<l)&&(u+=1);else for(let d=c-1;d>=0;d-=1)o[c]-o[d]<l&&(u+=1);return u}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:n,params:r}=e;r.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(o=>{o.complete&&_m(e,o)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function i(){const o=e.rtlTranslate?e.translate*-1:e.translate,a=Math.min(Math.max(o,e.maxTranslate()),e.minTranslate());e.setTranslate(a),e.updateActiveIndex(),e.updateSlidesClasses()}let s;e.params.freeMode&&e.params.freeMode.enabled?(i(),e.params.autoHeight&&e.updateAutoHeight()):((e.params.slidesPerView==="auto"||e.params.slidesPerView>1)&&e.isEnd&&!e.params.centeredSlides?s=e.slideTo(e.slides.length-1,0,!1,!0):s=e.slideTo(e.activeIndex,0,!1,!0),s||i()),r.watchOverflow&&n!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,n=!0){const r=this,i=r.params.direction;return e||(e=i==="horizontal"?"vertical":"horizontal"),e===i||e!=="horizontal"&&e!=="vertical"||(r.el.classList.remove(`${r.params.containerModifierClass}${i}`),r.el.classList.add(`${r.params.containerModifierClass}${e}`),r.emitContainerClasses(),r.params.direction=e,r.slides.forEach(s=>{e==="vertical"?s.style.width="":s.style.height=""}),r.emit("changeDirection"),n&&r.update()),r}changeLanguageDirection(e){const n=this;n.rtl&&e==="rtl"||!n.rtl&&e==="ltr"||(n.rtl=e==="rtl",n.rtlTranslate=n.params.direction==="horizontal"&&n.rtl,n.rtl?(n.el.classList.add(`${n.params.containerModifierClass}rtl`),n.el.dir="rtl"):(n.el.classList.remove(`${n.params.containerModifierClass}rtl`),n.el.dir="ltr"),n.update())}mount(e){const n=this;if(n.mounted)return!0;let r=e||n.params.el;if(typeof r=="string"&&(r=document.querySelector(r)),!r)return!1;r.swiper=n,r.shadowEl&&(n.isElement=!0);const i=()=>`.${(n.params.wrapperClass||"").trim().split(" ").join(".")}`;let o=(()=>r&&r.shadowRoot&&r.shadowRoot.querySelector?r.shadowRoot.querySelector(i()):Mi(r,i())[0])();return!o&&n.params.createElements&&(o=Kj("div",n.params.wrapperClass),r.append(o),Mi(r,`.${n.params.slideClass}`).forEach(a=>{o.append(a)})),Object.assign(n,{el:r,wrapperEl:o,slidesEl:n.isElement?r:o,mounted:!0,rtl:r.dir.toLowerCase()==="rtl"||eo(r,"direction")==="rtl",rtlTranslate:n.params.direction==="horizontal"&&(r.dir.toLowerCase()==="rtl"||eo(r,"direction")==="rtl"),wrongRTL:eo(o,"display")==="-webkit-box"}),!0}init(e){const n=this;return n.initialized||n.mount(e)===!1||(n.emit("beforeInit"),n.params.breakpoints&&n.setBreakpoint(),n.addClasses(),n.updateSize(),n.updateSlides(),n.params.watchOverflow&&n.checkOverflow(),n.params.grabCursor&&n.enabled&&n.setGrabCursor(),n.params.loop&&n.virtual&&n.params.virtual.enabled?n.slideTo(n.params.initialSlide+n.virtual.slidesBefore,0,n.params.runCallbacksOnInit,!1,!0):n.slideTo(n.params.initialSlide,0,n.params.runCallbacksOnInit,!1,!0),n.params.loop&&n.loopCreate(),n.attachEvents(),[...n.el.querySelectorAll('[loading="lazy"]')].forEach(i=>{i.complete?_m(n,i):i.addEventListener("load",s=>{_m(n,s.target)})}),n.initialized=!0,n.emit("init"),n.emit("afterInit")),n}destroy(e=!0,n=!0){const r=this,{params:i,el:s,wrapperEl:o,slides:a}=r;return typeof r.params>"u"||r.destroyed||(r.emit("beforeDestroy"),r.initialized=!1,r.detachEvents(),i.loop&&r.loopDestroy(),n&&(r.removeClasses(),s.removeAttribute("style"),o.removeAttribute("style"),a&&a.length&&a.forEach(l=>{l.classList.remove(i.slideVisibleClass,i.slideActiveClass,i.slideNextClass,i.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),r.emit("destroy"),Object.keys(r.eventsListeners).forEach(l=>{r.off(l)}),e!==!1&&(r.el.swiper=null,mue(r)),r.destroyed=!0),null}static extendDefaults(e){kr(G0,e)}static get extendedDefaults(){return G0}static get defaults(){return XR}static installModule(e){Ji.prototype.__modules__||(Ji.prototype.__modules__=[]);const n=Ji.prototype.__modules__;typeof e=="function"&&n.indexOf(e)<0&&n.push(e)}static use(e){return Array.isArray(e)?(e.forEach(n=>Ji.installModule(n)),Ji):(Ji.installModule(e),Ji)}};Object.keys(H0).forEach(t=>{Object.keys(H0[t]).forEach(e=>{rf.prototype[e]=H0[t][e]})});rf.use([Iue,Cue]);function Pde(t,e,n,r){return t.params.createElements&&Object.keys(r).forEach(i=>{if(!n[i]&&n.auto===!0){let s=Mi(t.el,`.${r[i]}`)[0];s||(s=Kj("div",r[i]),s.className=r[i],t.el.append(s)),n[i]=s,e[i]=s}}),n}function ld(t=""){return`.${t.trim().replace(/([\.:!\/])/g,"\\$1").replace(/ /g,".")}`}function Dde({swiper:t,extendParams:e,on:n,emit:r}){const i="swiper-pagination";e({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:m=>m,formatFractionTotal:m=>m,bulletClass:`${i}-bullet`,bulletActiveClass:`${i}-bullet-active`,modifierClass:`${i}-`,currentClass:`${i}-current`,totalClass:`${i}-total`,hiddenClass:`${i}-hidden`,progressbarFillClass:`${i}-progressbar-fill`,progressbarOppositeClass:`${i}-progressbar-opposite`,clickableClass:`${i}-clickable`,lockClass:`${i}-lock`,horizontalClass:`${i}-horizontal`,verticalClass:`${i}-vertical`,paginationDisabledClass:`${i}-disabled`}}),t.pagination={el:null,bullets:[]};let s,o=0;const a=m=>(Array.isArray(m)||(m=[m].filter(g=>!!g)),m);function l(){return!t.params.pagination.el||!t.pagination.el||Array.isArray(t.pagination.el)&&t.pagination.el.length===0}function c(m,g){const{bulletActiveClass:v}=t.params.pagination;m&&(m=m[`${g==="prev"?"previous":"next"}ElementSibling`],m&&(m.classList.add(`${v}-${g}`),m=m[`${g==="prev"?"previous":"next"}ElementSibling`],m&&m.classList.add(`${v}-${g}-${g}`)))}function u(m){const g=m.target.closest(ld(t.params.pagination.bulletClass));if(!g)return;m.preventDefault();const v=Hg(g)*t.params.slidesPerGroup;if(t.params.loop){if(t.realIndex===v)return;(v<t.loopedSlides||v>t.slides.length-t.loopedSlides)&&t.loopFix({direction:v<t.loopedSlides?"prev":"next",activeSlideIndex:v,slideTo:!1}),t.slideToLoop(v)}else t.slideTo(v)}function d(){const m=t.rtl,g=t.params.pagination;if(l())return;let v=t.pagination.el;v=a(v);let b;const I=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length,E=t.params.loop?Math.ceil(I/t.params.slidesPerGroup):t.snapGrid.length;if(t.params.loop?b=t.params.slidesPerGroup>1?Math.floor(t.realIndex/t.params.slidesPerGroup):t.realIndex:typeof t.snapIndex<"u"?b=t.snapIndex:b=t.activeIndex||0,g.type==="bullets"&&t.pagination.bullets&&t.pagination.bullets.length>0){const D=t.pagination.bullets;let S,T,O;if(g.dynamicBullets&&(s=SS(D[0],t.isHorizontal()?"width":"height",!0),v.forEach(C=>{C.style[t.isHorizontal()?"width":"height"]=`${s*(g.dynamicMainBullets+4)}px`}),g.dynamicMainBullets>1&&t.previousIndex!==void 0&&(o+=b-(t.previousIndex||0),o>g.dynamicMainBullets-1?o=g.dynamicMainBullets-1:o<0&&(o=0)),S=Math.max(b-o,0),T=S+(Math.min(D.length,g.dynamicMainBullets)-1),O=(T+S)/2),D.forEach(C=>{C.classList.remove(...["","-next","-next-next","-prev","-prev-prev","-main"].map(k=>`${g.bulletActiveClass}${k}`))}),v.length>1)D.forEach(C=>{const k=Hg(C);k===b&&C.classList.add(g.bulletActiveClass),g.dynamicBullets&&(k>=S&&k<=T&&C.classList.add(`${g.bulletActiveClass}-main`),k===S&&c(C,"prev"),k===T&&c(C,"next"))});else{const C=D[b];if(C&&C.classList.add(g.bulletActiveClass),g.dynamicBullets){const k=D[S],R=D[T];for(let P=S;P<=T;P+=1)D[P]&&D[P].classList.add(`${g.bulletActiveClass}-main`);c(k,"prev"),c(R,"next")}}if(g.dynamicBullets){const C=Math.min(D.length,g.dynamicMainBullets+4),k=(s*C-s)/2-O*s,R=m?"right":"left";D.forEach(P=>{P.style[t.isHorizontal()?R:"top"]=`${k}px`})}}v.forEach((D,S)=>{if(g.type==="fraction"&&(D.querySelectorAll(ld(g.currentClass)).forEach(T=>{T.textContent=g.formatFractionCurrent(b+1)}),D.querySelectorAll(ld(g.totalClass)).forEach(T=>{T.textContent=g.formatFractionTotal(E)})),g.type==="progressbar"){let T;g.progressbarOpposite?T=t.isHorizontal()?"vertical":"horizontal":T=t.isHorizontal()?"horizontal":"vertical";const O=(b+1)/E;let C=1,k=1;T==="horizontal"?C=O:k=O,D.querySelectorAll(ld(g.progressbarFillClass)).forEach(R=>{R.style.transform=`translate3d(0,0,0) scaleX(${C}) scaleY(${k})`,R.style.transitionDuration=`${t.params.speed}ms`})}g.type==="custom"&&g.renderCustom?(D.innerHTML=g.renderCustom(t,b+1,E),S===0&&r("paginationRender",D)):(S===0&&r("paginationRender",D),r("paginationUpdate",D)),t.params.watchOverflow&&t.enabled&&D.classList[t.isLocked?"add":"remove"](g.lockClass)})}function h(){const m=t.params.pagination;if(l())return;const g=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length;let v=t.pagination.el;v=a(v);let b="";if(m.type==="bullets"){let I=t.params.loop?Math.ceil(g/t.params.slidesPerGroup):t.snapGrid.length;t.params.freeMode&&t.params.freeMode.enabled&&I>g&&(I=g);for(let E=0;E<I;E+=1)m.renderBullet?b+=m.renderBullet.call(t,E,m.bulletClass):b+=`<${m.bulletElement} class="${m.bulletClass}"></${m.bulletElement}>`}m.type==="fraction"&&(m.renderFraction?b=m.renderFraction.call(t,m.currentClass,m.totalClass):b=`<span class="${m.currentClass}"></span> / <span class="${m.totalClass}"></span>`),m.type==="progressbar"&&(m.renderProgressbar?b=m.renderProgressbar.call(t,m.progressbarFillClass):b=`<span class="${m.progressbarFillClass}"></span>`),v.forEach(I=>{m.type!=="custom"&&(I.innerHTML=b||""),m.type==="bullets"&&(t.pagination.bullets=[...I.querySelectorAll(ld(m.bulletClass))])}),m.type!=="custom"&&r("paginationRender",v[0])}function f(){t.params.pagination=Pde(t,t.originalParams.pagination,t.params.pagination,{el:"swiper-pagination"});const m=t.params.pagination;if(!m.el)return;let g;typeof m.el=="string"&&t.isElement&&(g=t.el.shadowRoot.querySelector(m.el)),!g&&typeof m.el=="string"&&(g=[...document.querySelectorAll(m.el)]),g||(g=m.el),!(!g||g.length===0)&&(t.params.uniqueNavElements&&typeof m.el=="string"&&Array.isArray(g)&&g.length>1&&(g=[...t.el.querySelectorAll(m.el)],g.length>1&&(g=g.filter(v=>Qj(v,".swiper")[0]===t.el)[0])),Array.isArray(g)&&g.length===1&&(g=g[0]),Object.assign(t.pagination,{el:g}),g=a(g),g.forEach(v=>{m.type==="bullets"&&m.clickable&&v.classList.add(m.clickableClass),v.classList.add(m.modifierClass+m.type),v.classList.add(t.isHorizontal()?m.horizontalClass:m.verticalClass),m.type==="bullets"&&m.dynamicBullets&&(v.classList.add(`${m.modifierClass}${m.type}-dynamic`),o=0,m.dynamicMainBullets<1&&(m.dynamicMainBullets=1)),m.type==="progressbar"&&m.progressbarOpposite&&v.classList.add(m.progressbarOppositeClass),m.clickable&&v.addEventListener("click",u),t.enabled||v.classList.add(m.lockClass)}))}function p(){const m=t.params.pagination;if(l())return;let g=t.pagination.el;g&&(g=a(g),g.forEach(v=>{v.classList.remove(m.hiddenClass),v.classList.remove(m.modifierClass+m.type),v.classList.remove(t.isHorizontal()?m.horizontalClass:m.verticalClass),m.clickable&&v.removeEventListener("click",u)})),t.pagination.bullets&&t.pagination.bullets.forEach(v=>v.classList.remove(m.bulletActiveClass))}n("init",()=>{t.params.pagination.enabled===!1?w():(f(),h(),d())}),n("activeIndexChange",()=>{typeof t.snapIndex>"u"&&d()}),n("snapIndexChange",()=>{d()}),n("snapGridLengthChange",()=>{h(),d()}),n("destroy",()=>{p()}),n("enable disable",()=>{let{el:m}=t.pagination;m&&(m=a(m),m.forEach(g=>g.classList[t.enabled?"remove":"add"](t.params.pagination.lockClass)))}),n("lock unlock",()=>{d()}),n("click",(m,g)=>{const v=g.target;let{el:b}=t.pagination;if(Array.isArray(b)||(b=[b].filter(I=>!!I)),t.params.pagination.el&&t.params.pagination.hideOnClick&&b&&b.length>0&&!v.classList.contains(t.params.pagination.bulletClass)){if(t.navigation&&(t.navigation.nextEl&&v===t.navigation.nextEl||t.navigation.prevEl&&v===t.navigation.prevEl))return;const I=b[0].classList.contains(t.params.pagination.hiddenClass);r(I===!0?"paginationShow":"paginationHide"),b.forEach(E=>E.classList.toggle(t.params.pagination.hiddenClass))}});const y=()=>{t.el.classList.remove(t.params.pagination.paginationDisabledClass);let{el:m}=t.pagination;m&&(m=a(m),m.forEach(g=>g.classList.remove(t.params.pagination.paginationDisabledClass))),f(),h(),d()},w=()=>{t.el.classList.add(t.params.pagination.paginationDisabledClass);let{el:m}=t.pagination;m&&(m=a(m),m.forEach(g=>g.classList.add(t.params.pagination.paginationDisabledClass))),p()};Object.assign(t.pagination,{enable:y,disable:w,render:h,update:d,init:f,destroy:p})}function ul(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"}function to(t,e){const n=["__proto__","constructor","prototype"];Object.keys(e).filter(r=>n.indexOf(r)<0).forEach(r=>{typeof t[r]>"u"?t[r]=e[r]:ul(e[r])&&ul(t[r])&&Object.keys(e[r]).length>0?e[r].__swiper__?t[r]=e[r]:to(t[r],e[r]):t[r]=e[r]})}function Zj(t={}){return t.navigation&&typeof t.navigation.nextEl>"u"&&typeof t.navigation.prevEl>"u"}function eV(t={}){return t.pagination&&typeof t.pagination.el>"u"}function tV(t={}){return t.scrollbar&&typeof t.scrollbar.el>"u"}function nV(t=""){const e=t.split(" ").map(r=>r.trim()).filter(r=>!!r),n=[];return e.forEach(r=>{n.indexOf(r)<0&&n.push(r)}),n.join(" ")}function Ode(t=""){return t?t.includes("swiper-wrapper")?t:`swiper-wrapper ${t}`:"swiper-wrapper"}const rV=["modules","init","_direction","oneWayMovement","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopedSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideNextClass","slidePrevClass","wrapperClass","lazyPreloaderClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control","injectStyles","injectStylesUrls"];function Lde(t={},e=!0){const n={on:{}},r={},i={};to(n,rf.defaults),to(n,rf.extendedDefaults),n._emitClasses=!0,n.init=!1;const s={},o=rV.map(l=>l.replace(/_/,"")),a=Object.assign({},t);return Object.keys(a).forEach(l=>{typeof t[l]>"u"||(o.indexOf(l)>=0?ul(t[l])?(n[l]={},i[l]={},to(n[l],t[l]),to(i[l],t[l])):(n[l]=t[l],i[l]=t[l]):l.search(/on[A-Z]/)===0&&typeof t[l]=="function"?e?r[`${l[2].toLowerCase()}${l.substr(3)}`]=t[l]:n.on[`${l[2].toLowerCase()}${l.substr(3)}`]=t[l]:s[l]=t[l])}),["navigation","pagination","scrollbar"].forEach(l=>{n[l]===!0&&(n[l]={}),n[l]===!1&&delete n[l]}),{params:n,passedParams:i,rest:s,events:r}}function Mde({el:t,nextEl:e,prevEl:n,paginationEl:r,scrollbarEl:i,swiper:s},o){Zj(o)&&e&&n&&(s.params.navigation.nextEl=e,s.originalParams.navigation.nextEl=e,s.params.navigation.prevEl=n,s.originalParams.navigation.prevEl=n),eV(o)&&r&&(s.params.pagination.el=r,s.originalParams.pagination.el=r),tV(o)&&i&&(s.params.scrollbar.el=i,s.originalParams.scrollbar.el=i),s.init(t)}function Fde(t,e,n,r,i){const s=[];if(!e)return s;const o=l=>{s.indexOf(l)<0&&s.push(l)};if(n&&r){const l=r.map(i),c=n.map(i);l.join("")!==c.join("")&&o("children"),r.length!==n.length&&o("children")}return rV.filter(l=>l[0]==="_").map(l=>l.replace(/_/,"")).forEach(l=>{if(l in t&&l in e)if(ul(t[l])&&ul(e[l])){const c=Object.keys(t[l]),u=Object.keys(e[l]);c.length!==u.length?o(l):(c.forEach(d=>{t[l][d]!==e[l][d]&&o(l)}),u.forEach(d=>{t[l][d]!==e[l][d]&&o(l)}))}else t[l]!==e[l]&&o(l)}),s}function iV(t){return t.type&&t.type.displayName&&t.type.displayName.includes("SwiperSlide")}function sV(t){const e=[];return Pe.Children.toArray(t).forEach(n=>{iV(n)?e.push(n):n.props&&n.props.children&&sV(n.props.children).forEach(r=>e.push(r))}),e}function $de(t){const e=[],n={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return Pe.Children.toArray(t).forEach(r=>{if(iV(r))e.push(r);else if(r.props&&r.props.slot&&n[r.props.slot])n[r.props.slot].push(r);else if(r.props&&r.props.children){const i=sV(r.props.children);i.length>0?i.forEach(s=>e.push(s)):n["container-end"].push(r)}else n["container-end"].push(r)}),{slides:e,slots:n}}function Ude({swiper:t,slides:e,passedParams:n,changedParams:r,nextEl:i,prevEl:s,scrollbarEl:o,paginationEl:a}){const l=r.filter(S=>S!=="children"&&S!=="direction"&&S!=="wrapperClass"),{params:c,pagination:u,navigation:d,scrollbar:h,virtual:f,thumbs:p}=t;let y,w,m,g,v,b,I,E;r.includes("thumbs")&&n.thumbs&&n.thumbs.swiper&&c.thumbs&&!c.thumbs.swiper&&(y=!0),r.includes("controller")&&n.controller&&n.controller.control&&c.controller&&!c.controller.control&&(w=!0),r.includes("pagination")&&n.pagination&&(n.pagination.el||a)&&(c.pagination||c.pagination===!1)&&u&&!u.el&&(m=!0),r.includes("scrollbar")&&n.scrollbar&&(n.scrollbar.el||o)&&(c.scrollbar||c.scrollbar===!1)&&h&&!h.el&&(g=!0),r.includes("navigation")&&n.navigation&&(n.navigation.prevEl||s)&&(n.navigation.nextEl||i)&&(c.navigation||c.navigation===!1)&&d&&!d.prevEl&&!d.nextEl&&(v=!0);const D=S=>{t[S]&&(t[S].destroy(),S==="navigation"?(t.isElement&&(t[S].prevEl.remove(),t[S].nextEl.remove()),c[S].prevEl=void 0,c[S].nextEl=void 0,t[S].prevEl=void 0,t[S].nextEl=void 0):(t.isElement&&t[S].el.remove(),c[S].el=void 0,t[S].el=void 0))};r.includes("loop")&&t.isElement&&(c.loop&&!n.loop?b=!0:!c.loop&&n.loop?I=!0:E=!0),l.forEach(S=>{if(ul(c[S])&&ul(n[S]))to(c[S],n[S]);else{const T=n[S];(T===!0||T===!1)&&(S==="navigation"||S==="pagination"||S==="scrollbar")?T===!1&&D(S):c[S]=n[S]}}),l.includes("controller")&&!w&&t.controller&&t.controller.control&&c.controller&&c.controller.control&&(t.controller.control=c.controller.control),r.includes("children")&&e&&f&&c.virtual.enabled&&(f.slides=e,f.update(!0)),r.includes("children")&&e&&c.loop&&(E=!0),y&&p.init()&&p.update(!0),w&&(t.controller.control=c.controller.control),m&&(t.isElement&&(!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-pagination"),t.el.shadowEl.appendChild(a)),a&&(c.pagination.el=a),u.init(),u.render(),u.update()),g&&(t.isElement&&(!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-scrollbar"),t.el.shadowEl.appendChild(o)),o&&(c.scrollbar.el=o),h.init(),h.updateSize(),h.setTranslate()),v&&(t.isElement&&((!i||typeof i=="string")&&(i=document.createElement("div"),i.classList.add("swiper-button-next"),t.el.shadowEl.appendChild(i)),(!s||typeof s=="string")&&(s=document.createElement("div"),s.classList.add("swiper-button-prev"),t.el.shadowEl.appendChild(s))),i&&(c.navigation.nextEl=i),s&&(c.navigation.prevEl=s),d.init(),d.update()),r.includes("allowSlideNext")&&(t.allowSlideNext=n.allowSlideNext),r.includes("allowSlidePrev")&&(t.allowSlidePrev=n.allowSlidePrev),r.includes("direction")&&t.changeDirection(n.direction,!1),(b||E)&&t.loopDestroy(),(I||E)&&t.loopCreate(),t.update()}function jde(t,e,n){if(!n)return null;const r=u=>{let d=u;return u<0?d=e.length+u:d>=e.length&&(d=d-e.length),d},i=t.isHorizontal()?{[t.rtlTranslate?"right":"left"]:`${n.offset}px`}:{top:`${n.offset}px`},{from:s,to:o}=n,a=t.params.loop?-e.length:0,l=t.params.loop?e.length*2:e.length,c=[];for(let u=a;u<l;u+=1)u>=s&&u<=o&&c.push(e[r(u)]);return c.map(u=>Pe.cloneElement(u,{swiper:t,style:i}))}const Vde=t=>{!t||t.destroyed||!t.params.virtual||t.params.virtual&&!t.params.virtual.enabled||(t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.parallax&&t.params.parallax&&t.params.parallax.enabled&&t.parallax.setTranslate())};function Yd(t,e){return typeof window>"u"?H.useEffect(t,e):H.useLayoutEffect(t,e)}const JR=H.createContext(null),Bde=H.createContext(null);function bS(){return bS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bS.apply(this,arguments)}const oV=H.forwardRef(function(t,e){let{className:n,tag:r="div",wrapperTag:i="div",children:s,onSwiper:o,...a}=t===void 0?{}:t,l=!1;const[c,u]=H.useState("swiper"),[d,h]=H.useState(null),[f,p]=H.useState(!1),y=H.useRef(!1),w=H.useRef(null),m=H.useRef(null),g=H.useRef(null),v=H.useRef(null),b=H.useRef(null),I=H.useRef(null),E=H.useRef(null),D=H.useRef(null),{params:S,passedParams:T,rest:O,events:C}=Lde(a),{slides:k,slots:R}=$de(s),P=()=>{p(!f)};Object.assign(S.on,{_containerClasses(F,z){u(z)}});const B=()=>{Object.assign(S.on,C),l=!0;const F={...S};if(delete F.wrapperClass,m.current=new rf(F),m.current.virtual&&m.current.params.virtual.enabled){m.current.virtual.slides=k;const z={cache:!1,slides:k,renderExternal:h,renderExternalUpdate:!1};to(m.current.params.virtual,z),to(m.current.originalParams.virtual,z)}};w.current||B(),m.current&&m.current.on("_beforeBreakpoint",P);const A=()=>{l||!C||!m.current||Object.keys(C).forEach(F=>{m.current.on(F,C[F])})},x=()=>{!C||!m.current||Object.keys(C).forEach(F=>{m.current.off(F,C[F])})};H.useEffect(()=>()=>{m.current&&m.current.off("_beforeBreakpoint",P)}),H.useEffect(()=>{!y.current&&m.current&&(m.current.emitSlidesClasses(),y.current=!0)}),Yd(()=>{if(e&&(e.current=w.current),!!w.current)return m.current.destroyed&&B(),Mde({el:w.current,nextEl:b.current,prevEl:I.current,paginationEl:E.current,scrollbarEl:D.current,swiper:m.current},S),o&&o(m.current),()=>{m.current&&!m.current.destroyed&&m.current.destroy(!0,!1)}},[]),Yd(()=>{A();const F=Fde(T,g.current,k,v.current,z=>z.key);return g.current=T,v.current=k,F.length&&m.current&&!m.current.destroyed&&Ude({swiper:m.current,slides:k,passedParams:T,changedParams:F,nextEl:b.current,prevEl:I.current,scrollbarEl:D.current,paginationEl:E.current}),()=>{x()}}),Yd(()=>{Vde(m.current)},[d]);function j(){return S.virtual?jde(m.current,k,d):k.map((F,z)=>Pe.cloneElement(F,{swiper:m.current,swiperSlideIndex:z}))}return Pe.createElement(r,bS({ref:w,className:nV(`${c}${n?` ${n}`:""}`)},O),Pe.createElement(Bde.Provider,{value:m.current},R["container-start"],Pe.createElement(i,{className:Ode(S.wrapperClass)},R["wrapper-start"],j(),R["wrapper-end"]),Zj(S)&&Pe.createElement(Pe.Fragment,null,Pe.createElement("div",{ref:I,className:"swiper-button-prev"}),Pe.createElement("div",{ref:b,className:"swiper-button-next"})),tV(S)&&Pe.createElement("div",{ref:D,className:"swiper-scrollbar"}),eV(S)&&Pe.createElement("div",{ref:E,className:"swiper-pagination"}),R["container-end"]))});oV.displayName="Swiper";function ES(){return ES=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ES.apply(this,arguments)}const TS=H.forwardRef(function(t,e){let{tag:n="div",children:r,className:i="",swiper:s,zoom:o,lazy:a,virtualIndex:l,swiperSlideIndex:c,...u}=t===void 0?{}:t;const d=H.useRef(null),[h,f]=H.useState("swiper-slide"),[p,y]=H.useState(!1);function w(b,I,E){I===d.current&&f(E)}Yd(()=>{if(typeof c<"u"&&(d.current.swiperSlideIndex=c),e&&(e.current=d.current),!(!d.current||!s)){if(s.destroyed){h!=="swiper-slide"&&f("swiper-slide");return}return s.on("_slideClass",w),()=>{s&&s.off("_slideClass",w)}}}),Yd(()=>{s&&d.current&&!s.destroyed&&f(s.getSlideClasses(d.current))},[s]);const m={isActive:h.indexOf("swiper-slide-active")>=0,isVisible:h.indexOf("swiper-slide-visible")>=0,isPrev:h.indexOf("swiper-slide-prev")>=0,isNext:h.indexOf("swiper-slide-next")>=0},g=()=>typeof r=="function"?r(m):r,v=()=>{y(!0)};return Pe.createElement(n,ES({ref:d,className:nV(`${h}${i?` ${i}`:""}`),"data-swiper-slide-index":l,onLoad:v},u),o&&Pe.createElement(JR.Provider,{value:m},Pe.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof o=="number"?o:void 0},g(),a&&!p&&Pe.createElement("div",{className:"swiper-lazy-preloader"}))),!o&&Pe.createElement(JR.Provider,{value:m},g(),a&&!p&&Pe.createElement("div",{className:"swiper-lazy-preloader"})))});TS.displayName="SwiperSlide";function ZR({imgsrc:t}){return _.jsx(oV,{modules:[Dde],pagination:{clickable:!0},slidesPerView:1,spaceBetween:50,onSlideChange:()=>"slide change",onSwiper:e=>e,children:t[0]!=="h"?t.map(e=>_.jsx(TS,{children:_.jsx("img",{alt:" ",src:e})},e)):_.jsx(TS,{children:_.jsx("img",{alt:" ",src:t})})})}uu`
  ${eE}
  ${Zb}
  html{
    scroll-behavior: smooth;
  }
  body {
  font-family: "Pretendard Variable", Pretendard, -apple-system, BlinkMacSystemFont, system-ui, Roboto, "Helvetica Neue", "Segoe UI", "Apple SD Gothic Neo", "Noto Sans KR", "Malgun Gothic", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
}

  .a11yHidden,
  legend {
    display: inline-block;
    overflow: hidden;
    position: absolute !important;
    clip: rect(0, 0, 0, 0);
    clip-path: inset(50%);
    width: 1px;
    height: 1px;
    margin: -1px;
  }

  fieldset {
    padding: 0;
  }
  button {
    cursor: pointer;
  }
`;const Ux="#CFA36E",aV="#ADB5BD",jx="#D1D3D8";function zde({myinputRef:t}){const[e,n]=H.useState([]),[r,i]=H.useState([]),s=a=>{let l=a.target.files;n(Array.from(l));let c=[],u=l.length>5?5:l.length;for(let d=0;d<u;d++){let h=l[d],f=new FileReader;f.onload=()=>{c[d]=f.result,i([...c])},f.readAsDataURL(h)}},o=a=>{const l=[...e];l.splice(a,1),n(l);const c=[...r];c.splice(a,1),i(c)};return _.jsxs(Wde,{children:[_.jsxs(Gde,{children:[_.jsx(La,{accept:".png, .jpeg, .jpg, .gif",multiple:!0,myinputRef:t,type:"file",onChange:s,onClick:a=>a.target.value=null}),r.map((a,l)=>_.jsxs(eN,{children:[_.jsx("button",{type:"button",onClick:()=>o(l),children:_.jsx("img",{alt:"  ",src:"src/assets/icon-close-button.svg"})}),_.jsx("img",{alt:a,src:a})]},a)),r.length>=5?"":_.jsx(eN,{})]}),_.jsx(Hde,{children:"    ."})]})}const Wde=de.div`
  width: 886px;
  margin: 0 auto;
`,Hde=de.span`
  display: inline-block;
  font-size: 12px;
  color: ${Ux};
  margin-bottom: 30px;
`,Gde=de.div`
  display: flex;
  gap 20px;
  padding: 10px 0;
  
  & label{
    display: inline-block;
    width: 90px;
    height: 90px;
    background: url('src/assets/icon-add-photo.svg') no-repeat;
    background-position: center;
    border: 1px solid ${jx};
    border-radius: 10px;
    cursor: pointer;
  }
  
  input{
    display: none;
  }
  
  div{
    width: 90px;
    height: 90px;
    border-radius: 10px;
  }
`,eN=de.div`
  border: 1px dashed ${jx};
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
  overflow: hidden;

  button{
    position: absolute;
    right: 0;
    top: 5px;
    background: none;
    border: none;
    cursor: pointer;
  }

  img{
    width: 100%;
  }
`,qde=Qn.firestore(),tN=Hle();function Kde(){const t=H.useRef(),e=Vo(),[n,r]=H.useState(0),[i]=Lr(v_),[s]=Lr(ip),[o,a]=H.useState({title:"",side:" ",price:" - ",content:"",nickname:"",profileImage:""}),l=u=>{a({...o,[u.target.name]:u.target.value})},c=u=>{r(1),u.preventDefault();const d=t.current.files,h=[];for(let f=0;f<d.length;f++){const p=Wg(tN,"writeimages/"+d[f].name);h.push(Fle(p,d[f]))}Promise.all(h).then(()=>{const f=[];for(let p=0;p<d.length;p++){const y=Wg(tN,"writeimages/"+d[p].name);f.push(Uj(y))}Promise.all(f).then(p=>{qde.collection("UserWrite").add({title:o.title,side:"  ",price:o.price,content:o.content,date:new Date,imgsrc:p,chat:0,check:0,heart:0,userId:i,nickname:s.nickname,profileImage:s.profileImage,location:s.location}).then(()=>{e("/HotArticles")})})})};return _.jsxs("section",{children:[_.jsx(zde,{myinputRef:t}),_.jsx("h3",{className:"a11yHidden",children:" "}),_.jsx(Qde,{children:_.jsxs("fieldset",{children:[_.jsx("legend",{children:"  "}),_.jsx(La,{name:"title",placeholder:" ",required:!0,type:"text",value:o.title,onChange:l}),_.jsxs(Yde,{className:"userRegion",children:[_.jsx("span",{children:s.location.sido}),_.jsx("span",{children:s.location.sigungu}),_.jsx("span",{children:s.location.bname})]}),_.jsxs(Zde,{children:[_.jsx(La,{name:"price",placeholder:"  ",required:!0,type:"number",value:o.price,onChange:l}),_.jsxs("span",{className:"productPrice",children:["  : ",o.price.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),""]})]}),_.jsx(La,{content:!0,name:"content",placeholder:" ",required:!0,type:"text",value:o.content,onChange:l}),_.jsxs(ehe,{children:[_.jsx(nN,{onClick:()=>{e("/HotArticles")},children:""}),_.jsx(nN,{disabled:n||!o.title||!o.price||!o.content,type:"submit",onClick:c,children:""})]})]})})]})}function La({className:t,placeholder:e,disabled:n,type:r,content:i,value:s,accept:o,required:a,onChange:l,name:c,multiple:u,myinputRef:d,onClick:h}){return _.jsx("label",{children:i?_.jsx(Jde,{ref:d,className:t,name:c,placeholder:e,required:a,type:r,value:s,onChange:l}):_.jsx(Xde,{ref:d,accept:o,className:t,disabled:n,multiple:u,name:c,placeholder:e,required:a,type:r,value:s,onChange:l,onClick:h})})}const Vx=wo`
  margin-bottom: 20px;
  border-radius: 5px;
  border: 1px solid ${aV};
  box-sizing: border-box;
  padding: 0 12px;
  font-size: 15px;
`,Qde=de.form`
  width: 886px;
  display: flex;
  flex-flow: column nowrap;
  margin-left: auto;
  margin-right: auto;

  fieldset{
    padding: 0;
  }
`,Yde=de.div`
  display: flex;
  gap: 20px;
  justify-content: space-between;
  
  & span{
    ${Vx}
    width: 100%;
    line-height: 36px;    
    cursor: default;
  }
`,Xde=de.input`
  ${Vx}
  width: 100%;
  height: 37px;
`,Jde=de.textarea`
  ${Vx}
  width: 100%;
  height: 290px;
  padding: 12px;
  resize: none;
`,Zde=de.div`
  width: 886px;
  display: flex;
  justify-content: space-between;
  gap: 50px;

  input{
    width: 585px;
    border: none;
    border-radius: 0;
    border-bottom: 1px solid ${aV};
  }

  input::-webkit-inner-spin-button {
    appearance: none;
  }

  span{    
    width: 250px;
    line-height: 36px;
    text-align: center;
    font-weight: bold;
    font-size: 18px;
    letter-spacing: .5px;
  }
`,ehe=de.div`
  width: 218px;
  height: 40px;
  margin: 40px auto 80px auto;
  display: flex;
  justify-content: space-between;
  gap: 20px;
`,nN=de.button`
  width: 100%;
  border: none;
  border-radius: 4px;
  background: ${Ux};
  color: white;
  font-weight: bold;
  cursor: pointer;
  
  &[disabled]{
    cursor: not-allowed;
    background: ${jx};
  }
`,the="/assets/icon_temp4-151e43f9.svg";function nhe(){const[t,e]=H.useState({title:null,side:null,date:null,price:null,content:null,heart:null,chat:null,check:null,imgsrc:null,userId:null,nickname:null,profileImage:null,location:null}),n=CD(),[r,i]=H.useState(0);let[s]=H.useState(0);const o=Es(ms,"UserWrite",n.id),a=zh(o),[l]=Lr(ip);return l.uid==t.userId&&(s=1),H.useEffect(()=>{window.scrollTo(0,0);const c={check:B$(1)};il(o,c).then(()=>{a.then(u=>{e(u.data()),i(1)})})},[n]),_.jsx(_.Fragment,{children:r?_.jsx(lV,{chat:t.chat,check:t.check,content:t.content,data:t.data,heart:t.heart,imgsrc:t.imgsrc,location:t.location,nickname:t.nickname,price:t.price,profileImage:t.profileImage,side:t.side,state:s,title:t.title}):_.jsx(__,{})})}function lV({state:t,title:e,side:n,nickname:r,profileImage:i,location:s,temperature:o,date:a,price:l,content:c,heart:u,chat:d,check:h,imgsrc:f}){const p=Vo(),[y,w]=H.useState(!1),[m,g]=H.useState(0),[v,b]=H.useState(0),[I,E]=H.useState(0),[D,S]=H.useState([]),T=()=>{w(y?0:1)},O=CD(),C=Es(ms,"UserWrite",O.id),k=zh(C),[R,P]=H.useState({modifiedTitle:e,modifiedPrice:l,modifiedContent:c}),B=x=>{P(j=>({...j,[x.target.name]:x.target.value}))};H.useEffect(()=>{Jc(y_,x=>{const j=x.docs.map(F=>({id:F.id,...F.data()}));j.sort((F,z)=>z.heart-F.heart),S(j.slice(0,6)),g(1)})},[]);const A=()=>{b(1),il(C,{title:e,price:l,content:c})};return _.jsxs(she,{children:[_.jsxs(rN,{children:[_.jsx("button",{"aria-label":"   .",className:"image-button",type:"button",onClick:T,children:_.jsx(ZR,{imgsrc:f[0]!==void 0?f:"https://firebasestorage.googleapis.com/v0/b/patato-market.appspot.com/o/no_image.jpg?alt=media&token=d2d005ba-9dbb-40cb-bd61-4d47f5118b2c"})}),y?_.jsxs("div",{className:"module-swiper",children:[_.jsx("button",{className:"a11yhidden-button",type:"button",onClick:T,children:_.jsx("img",{alt:" ",src:fue})}),_.jsx(ZR,{imgsrc:f[0]!==void 0?f:"https://firebasestorage.googleapis.com/v0/b/patato-market.appspot.com/o/no_image.jpg?alt=media&token=d2d005ba-9dbb-40cb-bd61-4d47f5118b2c"})]}):null,_.jsxs(gh,{className:"profile",href:"naver.com",rel:"noopener noreferrer",target:"_blank",to:"/HotArticles",children:[_.jsxs("div",{className:"left-profile",children:[_.jsx("img",{alt:" ",className:"profile-image",src:i}),_.jsxs("div",{children:[_.jsx("span",{className:"nickname",children:r}),_.jsxs("span",{className:"address",children:[s.sido," ",s.sigungu," ",s.bname]})]})]}),_.jsxs("div",{className:"right-profile",children:[_.jsxs("div",{children:[_.jsxs("span",{className:"temperature",children:[o," "]}),_.jsx("span",{className:"thermometer"})]}),_.jsx("img",{alt:"  ",className:"temperature-image",src:the})]})]}),_.jsxs("div",{className:"article",children:[_.jsx("h2",{className:"title",children:e}),_.jsxs("div",{className:"side-title",children:[_.jsx("span",{children:n}),_.jsxs("span",{children:[a," "]})]}),_.jsxs("p",{className:"price",children:[Bj(l),""]}),_.jsx("p",{className:"content",children:c}),_.jsxs("div",{className:"counting-group",children:[_.jsxs("span",{children:[" ",u," "]}),_.jsxs("span",{children:[" ",d," "]}),_.jsxs("span",{children:[" ",h," "]})]}),_.jsx("div",{className:"button-list",children:t?_.jsxs(_.Fragment,{children:[_.jsx(ts,{onClick:A,children:""}),_.jsx(ts,{red:!0,onClick:()=>{E(1)},children:""})]}):_.jsx(ts,{children:""})})]})]}),_.jsxs(rN,{children:[_.jsxs("div",{className:"best-product-group",children:[_.jsx("h2",{children:" "}),_.jsx(gh,{rel:"noopener noreferrer",to:"/HotArticles",children:" "})]}),_.jsx("div",{className:"best-product",children:m?D.map(({content:x,title:j,price:F,side:z,imgsrc:Z,location:N,id:$,heart:L,check:U},M)=>_.jsx(sp,{check:U,content:x,heart:L,id:$,imgsrc:Z,location:N,price:F,side:z,title:j},M)):_.jsx(__,{className:"loading"})})]}),I?_.jsx(rhe,{children:_.jsxs("form",{children:[_.jsx("h3",{children:" ?"}),_.jsxs("div",{className:"button-wrapper",children:[_.jsx(ts,{red:!0,onClick:x=>{x.preventDefault(),V$(Es(ms,"UserWrite",O.id)).then(()=>{p("/HotArticles")})},children:""}),_.jsx(ts,{onClick:()=>{E(0)},children:""})]})]})}):null,v?_.jsx(ihe,{children:_.jsxs("form",{children:[_.jsx("h2",{children:" "}),_.jsxs("div",{className:"input-wrapper",children:[_.jsx(La,{className:"title-input",name:"modifiedTitle",type:"text",value:R.modifiedTitle,onChange:B}),_.jsx(La,{className:"price-input",name:"modifiedPrice",type:"number",value:R.modifiedPrice,onChange:B})]}),_.jsx(La,{content:!0,className:"content-input",name:"modifiedContent",type:"text",value:R.modifiedContent,onChange:B}),_.jsxs("div",{className:"button-wrapper",children:[_.jsx(ts,{onClick:()=>{b(0)},children:""}),_.jsx(ts,{className:"modifie-button",onClick:()=>{const x={content:R.modifiedContent,price:R.modifiedPrice,title:R.modifiedTitle};il(C,x).then(()=>{k.then(()=>{s.reload()})})},children:""})]})]})}):null]})}lV.defaultProps={title:" .",side:"",nickname:"",address:"  ",temperature:"36.5",date:"1",price:"500",content:" ",heart:"0",chat:"0",check:"0",imgsrc:["https://firebasestorage.googleapis.com/v0/b/patato-market.appspot.com/o/%E1%84%80%E1%85%A5%E1%84%8B%E1%85%AE%E1%86%AF%E1%84%85%E1%85%B5%E1%84%8E%E1%85%B5.png?alt=media&token=f23ce701-2450-495f-8166-2e1049699b2b","https://firebasestorage.googleapis.com/v0/b/patato-market.appspot.com/o/%E1%84%80%E1%85%A5%E1%84%8B%E1%85%AE%E1%86%AF%E1%84%85%E1%85%B5%E1%84%8E%E1%85%B5.png?alt=media&token=f23ce701-2450-495f-8166-2e1049699b2b","https://firebasestorage.googleapis.com/v0/b/patato-market.appspot.com/o/%E1%84%80%E1%85%A5%E1%84%8B%E1%85%AE%E1%86%AF%E1%84%85%E1%85%B5%E1%84%8E%E1%85%B5.png?alt=media&token=f23ce701-2450-495f-8166-2e1049699b2b","https://firebasestorage.googleapis.com/v0/b/patato-market.appspot.com/o/%E1%84%80%E1%85%A5%E1%84%8B%E1%85%AE%E1%86%AF%E1%84%85%E1%85%B5%E1%84%8E%E1%85%B5.png?alt=media&token=f23ce701-2450-495f-8166-2e1049699b2b"]};const rhe=de.div`
  display: flex;
  align-items: center;
  justify-content: center;
  top:0;
  width:100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.54);
  position: fixed;
  z-index:100;
  & .button-wrapper{
    display:flex;
    gap:20px;
  }
  button:first-child{
    border: none;
  }
  & h3{
    font-weight: 900;
    font-size: 20px;
    margin-bottom: 24px;
  }
  & form{
    border-radius: 20px;
    background-color: white;
    width: 503px;
    height: 100px;
    padding: 40px 0px;
    display: flex;
    align-items: center;
    flex-flow: column;
  }
`,ihe=de.div`
  display: flex;
  align-items: center;
  justify-content: center;
  top:0;
  width:100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.54);
  position: fixed;
  z-index:100;
  & .input-wrapper{
    display:flex;
    width:100%;
    justify-content: center;
    gap:20px;
  }
  & .title-input{
    width: 507px;
    height: 38px;
  }
  & .price-input{
    width: 150px;
  }
  & .content-input{
    width: 673.5px;
    height: 288px;
    margin-bottom: 40px;
  }
  & .button-wrapper{
    display:flex;
    gap:20px;
  }
  & .modifie-button{
    background: #CFA36E;
    color:white;
  }
  & .modifie-button:hover{
    background: #a58258;
  }
  & form{
    border-radius: 20px;
    background-color: white;
    width: 803px;
    height: 500px;
    padding: 40px 0px;
    display: flex;
    align-items: center;
    flex-flow: column;
  }
  & h2{
    font-weight: 600;
    font-size: 32px;
    margin-bottom: 24px;
  }
`,ts=de.button`
  & .BoardDeleteButton{
    border: 1px solid #FFFFFF;
  }
  cursor:pointer;
  width: 99px;
  height: 40px;
  color : ${t=>t.red?"#FFFFFF":"#212124"};
  background: ${t=>t.red?"#CFA36E":"#FFFFFF"};
  border: 1px solid ${t=>t.red?"":"#D1D3D8"};
  border-radius: 4px;
  font-weight: 700;
  font-size: 16px;
    &:hover{
    background: ${t=>t.red?"#a7845b":"#D1D3D8"};
    transition: .5s;
  }
`,she=de.main`
  & a{
    color:black;
  }
  display:flex;
  flex-flow:column;
  align-items: center;
  width:100%;
  margin-top: 40px;
  margin-bottom: 40px;
`,rN=de.section`
  width:677px;
  & .swiper{
    height: 500px;
    border-radius: 8px;
    overflow:hidden;
  }
  & .swiper img{
    width:100%;
    height: 100%;
  }
  & .profile{
    text-decoration: none;
    margin: 24px 0;
    height: 42px;
    display:flex;
    flex-flow:row;
    justify-content: space-between;
  }
  & .profile span{
    display:inline-block;
  }
  & .left-profile, & .right-profile{
    display:flex;
    align-items: center;     
    flex-flow:row;
  }
  & .right-profile{
    text-align: right;
  }
  & .right-profile div{
    gap:8px;
  }
  & .left-profile div,& .right-profile div{
    display:flex;
    flex-flow:column;
  }
  & .left-profile div{
    margin-left: 8px;
  }
  .nickname{
    font-weight: 600;
    font-size: 15px;
    margin-bottom: 5px;
  }
  .address{
    font-weight: 400;
    font-size: 13px;
  }
  & .right-profile div{
    margin-right:8px;
  }
  .temperature{
    font-size: 16px;
    font-weight: 700;
    color: #319E45;
  }
  & .profile-image{
    width: 40px;
    height: 40px;
    border-radius: 50%;
    margin-right: 3px;
  }
  & .temperature-image{
    width: 30px;
    height: 30px;
    border-radius: 20px;
  }

  & .best-product{
    display:inline-block;
    margin-top: 10px;
  }
  & .best-product .product{
    margin:30px 11px;
  }
  & .article{
    position:relative;
    padding: 36px 0;
    border-bottom: 1px solid #E9ECEF;
    border-top: 1px solid #E9ECEF;
  }
  & .title{
    font-weight: 600;
    font-size: 20px;
    margin-bottom: 8px;
  }
  & .side-title{
    font-weight: 400;
    font-size: 13px;
    color: #868E96;
    margin-bottom:12px;
  }
  & .side-title span:first-child::after{
    content: '';
    margin-right:5px;
  }
  & .price{
    font-weight: 700;
    font-size: 17px;
    margin-bottom:22px;
  }
  & .content{
    font-weight: 400;
    font-size: 17px;
    margin-bottom: 50px;
  }
  & .counting-group{
    color: #868E96;
    font-weight: 400;
    font-size: 13px;
  }
  & .counting-group span::after{
    content:'';
  }
  & .counting-group span:last-child::after{
    content:'';
  }
  & .best-product-group{
    display:flex;
    justify-content: space-between;
    margin-top:35.45px;
  }
  & .best-product-group h2{
    font-weight: 600;
    font-size: 18px;
  }
  & .best-product-group a{
    color: #CFA36E;
    font-weight: 400;
    font-size: 15px;
    text-decoration: none;
  }

  & .thermometer{
    background: rgb(49,158,69);
    background: linear-gradient(90deg, rgba(49,158,69,1) 50%, rgba(233,236,239,1) 38%);
    width: 100px;
    height: 4px;
  }
  & .button-list{
    position: absolute;
    right:0;
    bottom:27px;
  }
  & .button-list button{
    margin-left:18px;    
  }
  & .button-list button:nth-child(2){
    border: none;
  }
  & .module-swiper{
    top:0;
    left:0;
    z-index:999;
    position:fixed;
    width:100%;
    height:100%;
  }
  & .module-swiper .swiper{
    background-color: black;
    height:100%;
  }
  & .module-swiper .swiper-slide-active{
    text-align: center;
  }
  & .module-swiper img{
    max-width:1200px;
    max-height:100%;
    width:100%;
    height:auto;
  }
  & .module-swiper .swiper-pagination-bullet{
    position: relative;
    bottom:10px;
    width:50px;
    height:50px; 
  }
  & .a11yhidden-button{
    border:0;
    position:absolute;
    right:20%;
    color:white;
    font-size:80px;
    top:0;
    z-index:9999;
    background-color: inherit;
  }
  & .image-button{
    cursor:pointer;
    background-color: inherit;
    border:0;
    width:100%;
  }
`;function ohe(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}function cV(t,e){return new Promise(function(n,r){let i;return ahe(t).then(function(s){try{return i=s,n(new Blob([e.slice(0,2),i,e.slice(2)],{type:"image/jpeg"}))}catch(o){return r(o)}},r)})}const ahe=t=>new Promise((e,n)=>{const r=new FileReader;r.addEventListener("load",({target:{result:i}})=>{const s=new DataView(i);let o=0;if(s.getUint16(o)!==65496)return n("not a valid JPEG");for(o+=2;;){const a=s.getUint16(o);if(a===65498)break;const l=s.getUint16(o+2);if(a===65505&&s.getUint32(o+4)===1165519206){const c=o+10;let u;switch(s.getUint16(c)){case 18761:u=!0;break;case 19789:u=!1;break;default:return n("TIFF header contains invalid endian")}if(s.getUint16(c+2,u)!==42)return n("TIFF header contains invalid version");const d=s.getUint32(c+4,u),h=c+d+2+12*s.getUint16(c+d,u);for(let f=c+d+2;f<h;f+=12)if(s.getUint16(f,u)==274){if(s.getUint16(f+2,u)!==3)return n("Orientation data type is invalid");if(s.getUint32(f+4,u)!==1)return n("Orientation data count is invalid");s.setUint16(f+8,1,u);break}return e(i.slice(o,o+2+l))}o+=2+l}return e(new Blob)}),r.readAsArrayBuffer(t)});var Gg={},lhe={get exports(){return Gg},set exports(t){Gg=t}};(function(t){var e,n,r={};lhe.exports=r,r.parse=function(i,s){for(var o=r.bin.readUshort,a=r.bin.readUint,l=0,c={},u=new Uint8Array(i),d=u.length-4;a(u,d)!=101010256;)d--;l=d,l+=4;var h=o(u,l+=4);o(u,l+=2);var f=a(u,l+=2),p=a(u,l+=4);l+=4,l=p;for(var y=0;y<h;y++){a(u,l),l+=4,l+=4,l+=4,a(u,l+=4),f=a(u,l+=4);var w=a(u,l+=4),m=o(u,l+=4),g=o(u,l+2),v=o(u,l+4);l+=6;var b=a(u,l+=8);l+=4,l+=m+g+v,r._readLocal(u,b,c,f,w,s)}return c},r._readLocal=function(i,s,o,a,l,c){var u=r.bin.readUshort,d=r.bin.readUint;d(i,s),u(i,s+=4),u(i,s+=2);var h=u(i,s+=2);d(i,s+=2),d(i,s+=4),s+=4;var f=u(i,s+=8),p=u(i,s+=2);s+=2;var y=r.bin.readUTF8(i,s,f);if(s+=f,s+=p,c)o[y]={size:l,csize:a};else{var w=new Uint8Array(i.buffer,s);if(h==0)o[y]=new Uint8Array(w.buffer.slice(s,s+a));else{if(h!=8)throw"unknown compression method: "+h;var m=new Uint8Array(l);r.inflateRaw(w,m),o[y]=m}}},r.inflateRaw=function(i,s){return r.F.inflate(i,s)},r.inflate=function(i,s){return i[0],i[1],r.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),s)},r.deflate=function(i,s){s==null&&(s={level:6});var o=0,a=new Uint8Array(50+Math.floor(1.1*i.length));a[o]=120,a[o+1]=156,o+=2,o=r.F.deflateRaw(i,a,o,s.level);var l=r.adler(i,0,i.length);return a[o+0]=l>>>24&255,a[o+1]=l>>>16&255,a[o+2]=l>>>8&255,a[o+3]=l>>>0&255,new Uint8Array(a.buffer,0,o+4)},r.deflateRaw=function(i,s){s==null&&(s={level:6});var o=new Uint8Array(50+Math.floor(1.1*i.length)),a=r.F.deflateRaw(i,o,a,s.level);return new Uint8Array(o.buffer,0,a)},r.encode=function(i,s){s==null&&(s=!1);var o=0,a=r.bin.writeUint,l=r.bin.writeUshort,c={};for(var u in i){var d=!r._noNeed(u)&&!s,h=i[u],f=r.crc.crc(h,0,h.length);c[u]={cpr:d,usize:h.length,crc:f,file:d?r.deflateRaw(h):h}}for(var u in c)o+=c[u].file.length+30+46+2*r.bin.sizeUTF8(u);o+=22;var p=new Uint8Array(o),y=0,w=[];for(var u in c){var m=c[u];w.push(y),y=r._writeHeader(p,y,u,m,0)}var g=0,v=y;for(var u in c)m=c[u],w.push(y),y=r._writeHeader(p,y,u,m,1,w[g++]);var b=y-v;return a(p,y,101010256),y+=4,l(p,y+=4,g),l(p,y+=2,g),a(p,y+=2,b),a(p,y+=4,v),y+=4,y+=2,p.buffer},r._noNeed=function(i){var s=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(s)!=-1},r._writeHeader=function(i,s,o,a,l,c){var u=r.bin.writeUint,d=r.bin.writeUshort,h=a.file;return u(i,s,l==0?67324752:33639248),s+=4,l==1&&(s+=2),d(i,s,20),d(i,s+=2,0),d(i,s+=2,a.cpr?8:0),u(i,s+=2,0),u(i,s+=4,a.crc),u(i,s+=4,h.length),u(i,s+=4,a.usize),d(i,s+=4,r.bin.sizeUTF8(o)),d(i,s+=2,0),s+=2,l==1&&(s+=2,s+=2,u(i,s+=6,c),s+=4),s+=r.bin.writeUTF8(i,s,o),l==0&&(i.set(h,s),s+=h.length),s},r.crc={table:function(){for(var i=new Uint32Array(256),s=0;s<256;s++){for(var o=s,a=0;a<8;a++)1&o?o=3988292384^o>>>1:o>>>=1;i[s]=o}return i}(),update:function(i,s,o,a){for(var l=0;l<a;l++)i=r.crc.table[255&(i^s[o+l])]^i>>>8;return i},crc:function(i,s,o){return 4294967295^r.crc.update(4294967295,i,s,o)}},r.adler=function(i,s,o){for(var a=1,l=0,c=s,u=s+o;c<u;){for(var d=Math.min(c+5552,u);c<d;)l+=a+=i[c++];a%=65521,l%=65521}return l<<16|a},r.bin={readUshort:function(i,s){return i[s]|i[s+1]<<8},writeUshort:function(i,s,o){i[s]=255&o,i[s+1]=o>>8&255},readUint:function(i,s){return 16777216*i[s+3]+(i[s+2]<<16|i[s+1]<<8|i[s])},writeUint:function(i,s,o){i[s]=255&o,i[s+1]=o>>8&255,i[s+2]=o>>16&255,i[s+3]=o>>24&255},readASCII:function(i,s,o){for(var a="",l=0;l<o;l++)a+=String.fromCharCode(i[s+l]);return a},writeASCII:function(i,s,o){for(var a=0;a<o.length;a++)i[s+a]=o.charCodeAt(a)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,s,o){for(var a,l="",c=0;c<o;c++)l+="%"+r.bin.pad(i[s+c].toString(16));try{a=decodeURIComponent(l)}catch{return r.bin.readASCII(i,s,o)}return a},writeUTF8:function(i,s,o){for(var a=o.length,l=0,c=0;c<a;c++){var u=o.charCodeAt(c);if(!(4294967168&u))i[s+l]=u,l++;else if(!(4294965248&u))i[s+l]=192|u>>6,i[s+l+1]=128|u>>0&63,l+=2;else if(!(4294901760&u))i[s+l]=224|u>>12,i[s+l+1]=128|u>>6&63,i[s+l+2]=128|u>>0&63,l+=3;else{if(4292870144&u)throw"e";i[s+l]=240|u>>18,i[s+l+1]=128|u>>12&63,i[s+l+2]=128|u>>6&63,i[s+l+3]=128|u>>0&63,l+=4}}return l},sizeUTF8:function(i){for(var s=i.length,o=0,a=0;a<s;a++){var l=i.charCodeAt(a);if(!(4294967168&l))o++;else if(!(4294965248&l))o+=2;else if(!(4294901760&l))o+=3;else{if(4292870144&l)throw"e";o+=4}}return o}},r.F={},r.F.deflateRaw=function(i,s,o,a){var l=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][a],c=r.F.U,u=r.F._goodIndex;r.F._hash;var d=r.F._putsE,h=0,f=o<<3,p=0,y=i.length;if(a==0){for(;h<y;)d(s,f,h+(C=Math.min(65535,y-h))==y?1:0),f=r.F._copyExact(i,h,C,s,f+8),h+=C;return f>>>3}var w=c.lits,m=c.strt,g=c.prev,v=0,b=0,I=0,E=0,D=0,S=0;for(y>2&&(m[S=r.F._hash(i,0)]=0),h=0;h<y;h++){if(D=S,h+1<y-2){S=r.F._hash(i,h+1);var T=h+1&32767;g[T]=m[S],m[S]=T}if(p<=h){(v>14e3||b>26697)&&y-h>100&&(p<h&&(w[v]=h-p,v+=2,p=h),f=r.F._writeBlock(h==y-1||p==y?1:0,w,v,E,i,I,h-I,s,f),v=b=E=0,I=h);var O=0;h<y-2&&(O=r.F._bestMatch(i,h,g,D,Math.min(l[2],y-h),l[3]));var C=O>>>16,k=65535&O;if(O!=0){k=65535&O;var R=u(C=O>>>16,c.of0);c.lhst[257+R]++;var P=u(k,c.df0);c.dhst[P]++,E+=c.exb[R]+c.dxb[P],w[v]=C<<23|h-p,w[v+1]=k<<16|R<<8|P,v+=2,p=h+C}else c.lhst[i[h]]++;b++}}for(I==h&&i.length!=0||(p<h&&(w[v]=h-p,v+=2,p=h),f=r.F._writeBlock(1,w,v,E,i,I,h-I,s,f),v=0,b=0,v=b=E=0,I=h);7&f;)f++;return f>>>3},r.F._bestMatch=function(i,s,o,a,l,c){var u=32767&s,d=o[u],h=u-d+32768&32767;if(d==u||a!=r.F._hash(i,s-h))return 0;for(var f=0,p=0,y=Math.min(32767,s);h<=y&&--c!=0&&d!=u;){if(f==0||i[s+f]==i[s+f-h]){var w=r.F._howLong(i,s,h);if(w>f){if(p=h,(f=w)>=l)break;h+2<w&&(w=h+2);for(var m=0,g=0;g<w-2;g++){var v=s-h+g+32768&32767,b=v-o[v]+32768&32767;b>m&&(m=b,d=v)}}}h+=(u=d)-(d=o[u])+32768&32767}return f<<16|p},r.F._howLong=function(i,s,o){if(i[s]!=i[s-o]||i[s+1]!=i[s+1-o]||i[s+2]!=i[s+2-o])return 0;var a=s,l=Math.min(i.length,s+258);for(s+=3;s<l&&i[s]==i[s-o];)s++;return s-a},r.F._hash=function(i,s){return(i[s]<<8|i[s+1])+(i[s+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(i,s,o,a,l,c,u,d,h){var f,p,y,w,m,g,v,b,I,E=r.F.U,D=r.F._putsF,S=r.F._putsE;E.lhst[256]++,p=(f=r.F.getTrees())[0],y=f[1],w=f[2],m=f[3],g=f[4],v=f[5],b=f[6],I=f[7];var T=32+(h+3&7?8-(h+3&7):0)+(u<<3),O=a+r.F.contSize(E.fltree,E.lhst)+r.F.contSize(E.fdtree,E.dhst),C=a+r.F.contSize(E.ltree,E.lhst)+r.F.contSize(E.dtree,E.dhst);C+=14+3*v+r.F.contSize(E.itree,E.ihst)+(2*E.ihst[16]+3*E.ihst[17]+7*E.ihst[18]);for(var k=0;k<286;k++)E.lhst[k]=0;for(k=0;k<30;k++)E.dhst[k]=0;for(k=0;k<19;k++)E.ihst[k]=0;var R=T<O&&T<C?0:O<C?1:2;if(D(d,h,i),D(d,h+1,R),h+=3,R==0){for(;7&h;)h++;h=r.F._copyExact(l,c,u,d,h)}else{var P,B;if(R==1&&(P=E.fltree,B=E.fdtree),R==2){r.F.makeCodes(E.ltree,p),r.F.revCodes(E.ltree,p),r.F.makeCodes(E.dtree,y),r.F.revCodes(E.dtree,y),r.F.makeCodes(E.itree,w),r.F.revCodes(E.itree,w),P=E.ltree,B=E.dtree,S(d,h,m-257),S(d,h+=5,g-1),S(d,h+=5,v-4),h+=4;for(var A=0;A<v;A++)S(d,h+3*A,E.itree[1+(E.ordr[A]<<1)]);h+=3*v,h=r.F._codeTiny(b,E.itree,d,h),h=r.F._codeTiny(I,E.itree,d,h)}for(var x=c,j=0;j<o;j+=2){for(var F=s[j],z=F>>>23,Z=x+(8388607&F);x<Z;)h=r.F._writeLit(l[x++],P,d,h);if(z!=0){var N=s[j+1],$=N>>16,L=N>>8&255,U=255&N;S(d,h=r.F._writeLit(257+L,P,d,h),z-E.of0[L]),h+=E.exb[L],D(d,h=r.F._writeLit(U,B,d,h),$-E.df0[U]),h+=E.dxb[U],x+=z}}h=r.F._writeLit(256,P,d,h)}return h},r.F._copyExact=function(i,s,o,a,l){var c=l>>>3;return a[c]=o,a[c+1]=o>>>8,a[c+2]=255-a[c],a[c+3]=255-a[c+1],c+=4,a.set(new Uint8Array(i.buffer,s,o),c),l+(o+4<<3)},r.F.getTrees=function(){for(var i=r.F.U,s=r.F._hufTree(i.lhst,i.ltree,15),o=r.F._hufTree(i.dhst,i.dtree,15),a=[],l=r.F._lenCodes(i.ltree,a),c=[],u=r.F._lenCodes(i.dtree,c),d=0;d<a.length;d+=2)i.ihst[a[d]]++;for(d=0;d<c.length;d+=2)i.ihst[c[d]]++;for(var h=r.F._hufTree(i.ihst,i.itree,7),f=19;f>4&&i.itree[1+(i.ordr[f-1]<<1)]==0;)f--;return[s,o,h,l,u,f,a,c]},r.F.getSecond=function(i){for(var s=[],o=0;o<i.length;o+=2)s.push(i[o+1]);return s},r.F.nonZero=function(i){for(var s="",o=0;o<i.length;o+=2)i[o+1]!=0&&(s+=(o>>1)+",");return s},r.F.contSize=function(i,s){for(var o=0,a=0;a<s.length;a++)o+=s[a]*i[1+(a<<1)];return o},r.F._codeTiny=function(i,s,o,a){for(var l=0;l<i.length;l+=2){var c=i[l],u=i[l+1];a=r.F._writeLit(c,s,o,a);var d=c==16?2:c==17?3:7;c>15&&(r.F._putsE(o,a,u,d),a+=d)}return a},r.F._lenCodes=function(i,s){for(var o=i.length;o!=2&&i[o-1]==0;)o-=2;for(var a=0;a<o;a+=2){var l=i[a+1],c=a+3<o?i[a+3]:-1,u=a+5<o?i[a+5]:-1,d=a==0?-1:i[a-1];if(l==0&&c==l&&u==l){for(var h=a+5;h+2<o&&i[h+2]==l;)h+=2;(f=Math.min(h+1-a>>>1,138))<11?s.push(17,f-3):s.push(18,f-11),a+=2*f-2}else if(l==d&&c==l&&u==l){for(h=a+5;h+2<o&&i[h+2]==l;)h+=2;var f=Math.min(h+1-a>>>1,6);s.push(16,f-3),a+=2*f-2}else s.push(l,0)}return o>>>1},r.F._hufTree=function(i,s,o){var a=[],l=i.length,c=s.length,u=0;for(u=0;u<c;u+=2)s[u]=0,s[u+1]=0;for(u=0;u<l;u++)i[u]!=0&&a.push({lit:u,f:i[u]});var d=a.length,h=a.slice(0);if(d==0)return 0;if(d==1){var f=a[0].lit;return h=f==0?1:0,s[1+(f<<1)]=1,s[1+(h<<1)]=1,1}a.sort(function(b,I){return b.f-I.f});var p=a[0],y=a[1],w=0,m=1,g=2;for(a[0]={lit:-1,f:p.f+y.f,l:p,r:y,d:0};m!=d-1;)p=w!=m&&(g==d||a[w].f<a[g].f)?a[w++]:a[g++],y=w!=m&&(g==d||a[w].f<a[g].f)?a[w++]:a[g++],a[m++]={lit:-1,f:p.f+y.f,l:p,r:y};var v=r.F.setDepth(a[m-1],0);for(v>o&&(r.F.restrictDepth(h,o,v),v=o),u=0;u<d;u++)s[1+(h[u].lit<<1)]=h[u].d;return v},r.F.setDepth=function(i,s){return i.lit!=-1?(i.d=s,s):Math.max(r.F.setDepth(i.l,s+1),r.F.setDepth(i.r,s+1))},r.F.restrictDepth=function(i,s,o){var a=0,l=1<<o-s,c=0;for(i.sort(function(d,h){return h.d==d.d?d.f-h.f:h.d-d.d}),a=0;a<i.length&&i[a].d>s;a++){var u=i[a].d;i[a].d=s,c+=l-(1<<o-u)}for(c>>>=o-s;c>0;)(u=i[a].d)<s?(i[a].d++,c-=1<<s-u-1):a++;for(;a>=0;a--)i[a].d==s&&c<0&&(i[a].d--,c++);c!=0&&console.log("debt left")},r.F._goodIndex=function(i,s){var o=0;return s[16|o]<=i&&(o|=16),s[8|o]<=i&&(o|=8),s[4|o]<=i&&(o|=4),s[2|o]<=i&&(o|=2),s[1|o]<=i&&(o|=1),o},r.F._writeLit=function(i,s,o,a){return r.F._putsF(o,a,s[i<<1]),a+s[1+(i<<1)]},r.F.inflate=function(i,s){var o=Uint8Array;if(i[0]==3&&i[1]==0)return s||new o(0);var a=r.F,l=a._bitsF,c=a._bitsE,u=a._decodeTiny,d=a.makeCodes,h=a.codes2map,f=a._get17,p=a.U,y=s==null;y&&(s=new o(i.length>>>2<<3));for(var w,m,g=0,v=0,b=0,I=0,E=0,D=0,S=0,T=0,O=0;g==0;)if(g=l(i,O,1),v=l(i,O+1,2),O+=3,v!=0){if(y&&(s=r.F._check(s,T+(1<<17))),v==1&&(w=p.flmap,m=p.fdmap,D=511,S=31),v==2){b=c(i,O,5)+257,I=c(i,O+5,5)+1,E=c(i,O+10,4)+4,O+=14;for(var C=0;C<38;C+=2)p.itree[C]=0,p.itree[C+1]=0;var k=1;for(C=0;C<E;C++){var R=c(i,O+3*C,3);p.itree[1+(p.ordr[C]<<1)]=R,R>k&&(k=R)}O+=3*E,d(p.itree,k),h(p.itree,k,p.imap),w=p.lmap,m=p.dmap,O=u(p.imap,(1<<k)-1,b+I,i,O,p.ttree);var P=a._copyOut(p.ttree,0,b,p.ltree);D=(1<<P)-1;var B=a._copyOut(p.ttree,b,I,p.dtree);S=(1<<B)-1,d(p.ltree,P),h(p.ltree,P,w),d(p.dtree,B),h(p.dtree,B,m)}for(;;){var A=w[f(i,O)&D];O+=15&A;var x=A>>>4;if(!(x>>>8))s[T++]=x;else{if(x==256)break;var j=T+x-254;if(x>264){var F=p.ldef[x-257];j=T+(F>>>3)+c(i,O,7&F),O+=7&F}var z=m[f(i,O)&S];O+=15&z;var Z=z>>>4,N=p.ddef[Z],$=(N>>>4)+l(i,O,15&N);for(O+=15&N,y&&(s=r.F._check(s,T+(1<<17)));T<j;)s[T]=s[T++-$],s[T]=s[T++-$],s[T]=s[T++-$],s[T]=s[T++-$];T=j}}}else{7&O&&(O+=8-(7&O));var L=4+(O>>>3),U=i[L-4]|i[L-3]<<8;y&&(s=r.F._check(s,T+U)),s.set(new o(i.buffer,i.byteOffset+L,U),T),O=L+U<<3,T+=U}return s.length==T?s:s.slice(0,T)},r.F._check=function(i,s){var o=i.length;if(s<=o)return i;var a=new Uint8Array(Math.max(o<<1,s));return a.set(i,0),a},r.F._decodeTiny=function(i,s,o,a,l,c){for(var u=r.F._bitsE,d=r.F._get17,h=0;h<o;){var f=i[d(a,l)&s];l+=15&f;var p=f>>>4;if(p<=15)c[h]=p,h++;else{var y=0,w=0;p==16?(w=3+u(a,l,2),l+=2,y=c[h-1]):p==17?(w=3+u(a,l,3),l+=3):p==18&&(w=11+u(a,l,7),l+=7);for(var m=h+w;h<m;)c[h]=y,h++}}return l},r.F._copyOut=function(i,s,o,a){for(var l=0,c=0,u=a.length>>>1;c<o;){var d=i[c+s];a[c<<1]=0,a[1+(c<<1)]=d,d>l&&(l=d),c++}for(;c<u;)a[c<<1]=0,a[1+(c<<1)]=0,c++;return l},r.F.makeCodes=function(i,s){for(var o,a,l,c,u=r.F.U,d=i.length,h=u.bl_count,f=0;f<=s;f++)h[f]=0;for(f=1;f<d;f+=2)h[i[f]]++;var p=u.next_code;for(o=0,h[0]=0,a=1;a<=s;a++)o=o+h[a-1]<<1,p[a]=o;for(l=0;l<d;l+=2)(c=i[l+1])!=0&&(i[l]=p[c],p[c]++)},r.F.codes2map=function(i,s,o){for(var a=i.length,l=r.F.U.rev15,c=0;c<a;c+=2)if(i[c+1]!=0)for(var u=c>>1,d=i[c+1],h=u<<4|d,f=s-d,p=i[c]<<f,y=p+(1<<f);p!=y;)o[l[p]>>>15-s]=h,p++},r.F.revCodes=function(i,s){for(var o=r.F.U.rev15,a=15-s,l=0;l<i.length;l+=2){var c=i[l]<<s-i[l+1];i[l]=o[c]>>>a}},r.F._putsE=function(i,s,o){o<<=7&s;var a=s>>>3;i[a]|=o,i[a+1]|=o>>>8},r.F._putsF=function(i,s,o){o<<=7&s;var a=s>>>3;i[a]|=o,i[a+1]|=o>>>8,i[a+2]|=o>>>16},r.F._bitsE=function(i,s,o){return(i[s>>>3]|i[1+(s>>>3)]<<8)>>>(7&s)&(1<<o)-1},r.F._bitsF=function(i,s,o){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16)>>>(7&s)&(1<<o)-1},r.F._get17=function(i,s){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16)>>>(7&s)},r.F._get25=function(i,s){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16|i[3+(s>>>3)]<<24)>>>(7&s)},r.F.U=(e=Uint16Array,n=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var i=r.F.U,s=0;s<32768;s++){var o=s;o=(4278255360&(o=(4042322160&(o=(3435973836&(o=(2863311530&o)>>>1|(1431655765&o)<<1))>>>2|(858993459&o)<<2))>>>4|(252645135&o)<<4))>>>8|(16711935&o)<<8,i.rev15[s]=(o>>>16|o<<16)>>>17}function a(l,c,u){for(;c--!=0;)l.push(0,u)}for(s=0;s<32;s++)i.ldef[s]=i.of0[s]<<3|i.exb[s],i.ddef[s]=i.df0[s]<<4|i.dxb[s];a(i.fltree,144,8),a(i.fltree,112,9),a(i.fltree,24,7),a(i.fltree,8,8),r.F.makeCodes(i.fltree,9),r.F.codes2map(i.fltree,9,i.flmap),r.F.revCodes(i.fltree,9),a(i.fdtree,32,5),r.F.makeCodes(i.fdtree,5),r.F.codes2map(i.fdtree,5,i.fdmap),r.F.revCodes(i.fdtree,5),a(i.itree,19,0),a(i.ltree,286,0),a(i.dtree,30,0),a(i.ttree,320,0)}()})();var che=ohe({__proto__:null,default:Gg},[Gg]);const ai=function(){var t={nextZero(u,d){for(;u[d]!=0;)d++;return d},readUshort:(u,d)=>u[d]<<8|u[d+1],writeUshort(u,d,h){u[d]=h>>8&255,u[d+1]=255&h},readUint:(u,d)=>16777216*u[d]+(u[d+1]<<16|u[d+2]<<8|u[d+3]),writeUint(u,d,h){u[d]=h>>24&255,u[d+1]=h>>16&255,u[d+2]=h>>8&255,u[d+3]=255&h},readASCII(u,d,h){let f="";for(let p=0;p<h;p++)f+=String.fromCharCode(u[d+p]);return f},writeASCII(u,d,h){for(let f=0;f<h.length;f++)u[d+f]=h.charCodeAt(f)},readBytes(u,d,h){const f=[];for(let p=0;p<h;p++)f.push(u[d+p]);return f},pad:u=>u.length<2?`0${u}`:u,readUTF8(u,d,h){let f,p="";for(let y=0;y<h;y++)p+=`%${t.pad(u[d+y].toString(16))}`;try{f=decodeURIComponent(p)}catch{return t.readASCII(u,d,h)}return f}};function e(u,d,h,f){const p=d*h,y=s(f),w=Math.ceil(d*y/8),m=new Uint8Array(4*p),g=new Uint32Array(m.buffer),{ctype:v}=f,{depth:b}=f,I=t.readUshort;if(v==6){const F=p<<2;if(b==8)for(var E=0;E<F;E+=4)m[E]=u[E],m[E+1]=u[E+1],m[E+2]=u[E+2],m[E+3]=u[E+3];if(b==16)for(E=0;E<F;E++)m[E]=u[E<<1]}else if(v==2){const F=f.tabs.tRNS;if(F==null){if(b==8)for(E=0;E<p;E++){var D=3*E;g[E]=255<<24|u[D+2]<<16|u[D+1]<<8|u[D]}if(b==16)for(E=0;E<p;E++)D=6*E,g[E]=255<<24|u[D+4]<<16|u[D+2]<<8|u[D]}else{var S=F[0];const z=F[1],Z=F[2];if(b==8)for(E=0;E<p;E++){var T=E<<2;D=3*E,g[E]=255<<24|u[D+2]<<16|u[D+1]<<8|u[D],u[D]==S&&u[D+1]==z&&u[D+2]==Z&&(m[T+3]=0)}if(b==16)for(E=0;E<p;E++)T=E<<2,D=6*E,g[E]=255<<24|u[D+4]<<16|u[D+2]<<8|u[D],I(u,D)==S&&I(u,D+2)==z&&I(u,D+4)==Z&&(m[T+3]=0)}}else if(v==3){const F=f.tabs.PLTE,z=f.tabs.tRNS,Z=z?z.length:0;if(b==1)for(var O=0;O<h;O++){var C=O*w,k=O*d;for(E=0;E<d;E++){T=k+E<<2;var R=3*(P=u[C+(E>>3)]>>7-((7&E)<<0)&1);m[T]=F[R],m[T+1]=F[R+1],m[T+2]=F[R+2],m[T+3]=P<Z?z[P]:255}}if(b==2)for(O=0;O<h;O++)for(C=O*w,k=O*d,E=0;E<d;E++)T=k+E<<2,R=3*(P=u[C+(E>>2)]>>6-((3&E)<<1)&3),m[T]=F[R],m[T+1]=F[R+1],m[T+2]=F[R+2],m[T+3]=P<Z?z[P]:255;if(b==4)for(O=0;O<h;O++)for(C=O*w,k=O*d,E=0;E<d;E++)T=k+E<<2,R=3*(P=u[C+(E>>1)]>>4-((1&E)<<2)&15),m[T]=F[R],m[T+1]=F[R+1],m[T+2]=F[R+2],m[T+3]=P<Z?z[P]:255;if(b==8)for(E=0;E<p;E++){var P;T=E<<2,R=3*(P=u[E]),m[T]=F[R],m[T+1]=F[R+1],m[T+2]=F[R+2],m[T+3]=P<Z?z[P]:255}}else if(v==4){if(b==8)for(E=0;E<p;E++){T=E<<2;var B=u[A=E<<1];m[T]=B,m[T+1]=B,m[T+2]=B,m[T+3]=u[A+1]}if(b==16)for(E=0;E<p;E++){var A;T=E<<2,B=u[A=E<<2],m[T]=B,m[T+1]=B,m[T+2]=B,m[T+3]=u[A+2]}}else if(v==0)for(S=f.tabs.tRNS?f.tabs.tRNS:-1,O=0;O<h;O++){const F=O*w,z=O*d;if(b==1)for(var x=0;x<d;x++){var j=(B=255*(u[F+(x>>>3)]>>>7-(7&x)&1))==255*S?0:255;g[z+x]=j<<24|B<<16|B<<8|B}else if(b==2)for(x=0;x<d;x++)j=(B=85*(u[F+(x>>>2)]>>>6-((3&x)<<1)&3))==85*S?0:255,g[z+x]=j<<24|B<<16|B<<8|B;else if(b==4)for(x=0;x<d;x++)j=(B=17*(u[F+(x>>>1)]>>>4-((1&x)<<2)&15))==17*S?0:255,g[z+x]=j<<24|B<<16|B<<8|B;else if(b==8)for(x=0;x<d;x++)j=(B=u[F+x])==S?0:255,g[z+x]=j<<24|B<<16|B<<8|B;else if(b==16)for(x=0;x<d;x++)B=u[F+(x<<1)],j=I(u,F+(x<<1))==S?0:255,g[z+x]=j<<24|B<<16|B<<8|B}return m}function n(u,d,h,f){const p=s(u),y=Math.ceil(h*p/8),w=new Uint8Array((y+1+u.interlace)*f);return d=u.tabs.CgBI?i(d,w):r(d,w),u.interlace==0?d=o(d,u,0,h,f):u.interlace==1&&(d=function(g,v){const b=v.width,I=v.height,E=s(v),D=E>>3,S=Math.ceil(b*E/8),T=new Uint8Array(I*S);let O=0;const C=[0,0,4,0,2,0,1],k=[0,4,0,2,0,1,0],R=[8,8,8,4,4,2,2],P=[8,8,4,4,2,2,1];let B=0;for(;B<7;){const x=R[B],j=P[B];let F=0,z=0,Z=C[B];for(;Z<I;)Z+=x,z++;let N=k[B];for(;N<b;)N+=j,F++;const $=Math.ceil(F*E/8);o(g,v,O,F,z);let L=0,U=C[B];for(;U<I;){let M=k[B],te=O+L*$<<3;for(;M<b;){var A;if(E==1&&(A=(A=g[te>>3])>>7-(7&te)&1,T[U*S+(M>>3)]|=A<<7-((7&M)<<0)),E==2&&(A=(A=g[te>>3])>>6-(7&te)&3,T[U*S+(M>>2)]|=A<<6-((3&M)<<1)),E==4&&(A=(A=g[te>>3])>>4-(7&te)&15,T[U*S+(M>>1)]|=A<<4-((1&M)<<2)),E>=8){const G=U*S+M*D;for(let ee=0;ee<D;ee++)T[G+ee]=g[(te>>3)+ee]}te+=E,M+=j}L++,U+=x}F*z!=0&&(O+=z*(1+$)),B+=1}return T}(d,u)),d}function r(u,d){return i(new Uint8Array(u.buffer,2,u.length-6),d)}var i=function(){const u={H:{}};return u.H.N=function(d,h){const f=Uint8Array;let p,y,w=0,m=0,g=0,v=0,b=0,I=0,E=0,D=0,S=0;if(d[0]==3&&d[1]==0)return h||new f(0);const T=u.H,O=T.b,C=T.e,k=T.R,R=T.n,P=T.A,B=T.Z,A=T.m,x=h==null;for(x&&(h=new f(d.length>>>2<<5));w==0;)if(w=O(d,S,1),m=O(d,S+1,2),S+=3,m!=0){if(x&&(h=u.H.W(h,D+(1<<17))),m==1&&(p=A.J,y=A.h,I=511,E=31),m==2){g=C(d,S,5)+257,v=C(d,S+5,5)+1,b=C(d,S+10,4)+4,S+=14;let F=1;for(var j=0;j<38;j+=2)A.Q[j]=0,A.Q[j+1]=0;for(j=0;j<b;j++){const N=C(d,S+3*j,3);A.Q[1+(A.X[j]<<1)]=N,N>F&&(F=N)}S+=3*b,R(A.Q,F),P(A.Q,F,A.u),p=A.w,y=A.d,S=k(A.u,(1<<F)-1,g+v,d,S,A.v);const z=T.V(A.v,0,g,A.C);I=(1<<z)-1;const Z=T.V(A.v,g,v,A.D);E=(1<<Z)-1,R(A.C,z),P(A.C,z,p),R(A.D,Z),P(A.D,Z,y)}for(;;){const F=p[B(d,S)&I];S+=15&F;const z=F>>>4;if(!(z>>>8))h[D++]=z;else{if(z==256)break;{let Z=D+z-254;if(z>264){const M=A.q[z-257];Z=D+(M>>>3)+C(d,S,7&M),S+=7&M}const N=y[B(d,S)&E];S+=15&N;const $=N>>>4,L=A.c[$],U=(L>>>4)+O(d,S,15&L);for(S+=15&L;D<Z;)h[D]=h[D++-U],h[D]=h[D++-U],h[D]=h[D++-U],h[D]=h[D++-U];D=Z}}}}else{7&S&&(S+=8-(7&S));const F=4+(S>>>3),z=d[F-4]|d[F-3]<<8;x&&(h=u.H.W(h,D+z)),h.set(new f(d.buffer,d.byteOffset+F,z),D),S=F+z<<3,D+=z}return h.length==D?h:h.slice(0,D)},u.H.W=function(d,h){const f=d.length;if(h<=f)return d;const p=new Uint8Array(f<<1);return p.set(d,0),p},u.H.R=function(d,h,f,p,y,w){const m=u.H.e,g=u.H.Z;let v=0;for(;v<f;){const b=d[g(p,y)&h];y+=15&b;const I=b>>>4;if(I<=15)w[v]=I,v++;else{let E=0,D=0;I==16?(D=3+m(p,y,2),y+=2,E=w[v-1]):I==17?(D=3+m(p,y,3),y+=3):I==18&&(D=11+m(p,y,7),y+=7);const S=v+D;for(;v<S;)w[v]=E,v++}}return y},u.H.V=function(d,h,f,p){let y=0,w=0;const m=p.length>>>1;for(;w<f;){const g=d[w+h];p[w<<1]=0,p[1+(w<<1)]=g,g>y&&(y=g),w++}for(;w<m;)p[w<<1]=0,p[1+(w<<1)]=0,w++;return y},u.H.n=function(d,h){const f=u.H.m,p=d.length;let y,w,m,g;const v=f.j;for(var b=0;b<=h;b++)v[b]=0;for(b=1;b<p;b+=2)v[d[b]]++;const I=f.K;for(y=0,v[0]=0,w=1;w<=h;w++)y=y+v[w-1]<<1,I[w]=y;for(m=0;m<p;m+=2)g=d[m+1],g!=0&&(d[m]=I[g],I[g]++)},u.H.A=function(d,h,f){const p=d.length,y=u.H.m.r;for(let w=0;w<p;w+=2)if(d[w+1]!=0){const m=w>>1,g=d[w+1],v=m<<4|g,b=h-g;let I=d[w]<<b;const E=I+(1<<b);for(;I!=E;)f[y[I]>>>15-h]=v,I++}},u.H.l=function(d,h){const f=u.H.m.r,p=15-h;for(let y=0;y<d.length;y+=2){const w=d[y]<<h-d[y+1];d[y]=f[w]>>>p}},u.H.M=function(d,h,f){f<<=7&h;const p=h>>>3;d[p]|=f,d[p+1]|=f>>>8},u.H.I=function(d,h,f){f<<=7&h;const p=h>>>3;d[p]|=f,d[p+1]|=f>>>8,d[p+2]|=f>>>16},u.H.e=function(d,h,f){return(d[h>>>3]|d[1+(h>>>3)]<<8)>>>(7&h)&(1<<f)-1},u.H.b=function(d,h,f){return(d[h>>>3]|d[1+(h>>>3)]<<8|d[2+(h>>>3)]<<16)>>>(7&h)&(1<<f)-1},u.H.Z=function(d,h){return(d[h>>>3]|d[1+(h>>>3)]<<8|d[2+(h>>>3)]<<16)>>>(7&h)},u.H.i=function(d,h){return(d[h>>>3]|d[1+(h>>>3)]<<8|d[2+(h>>>3)]<<16|d[3+(h>>>3)]<<24)>>>(7&h)},u.H.m=function(){const d=Uint16Array,h=Uint32Array;return{K:new d(16),j:new d(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new d(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new h(32),J:new d(512),_:[],h:new d(32),$:[],w:new d(32768),C:[],v:[],d:new d(32768),D:[],u:new d(512),Q:[],r:new d(32768),s:new h(286),Y:new h(30),a:new h(19),t:new h(15e3),k:new d(65536),g:new d(32768)}}(),function(){const d=u.H.m;for(var h=0;h<32768;h++){let p=h;p=(2863311530&p)>>>1|(1431655765&p)<<1,p=(3435973836&p)>>>2|(858993459&p)<<2,p=(4042322160&p)>>>4|(252645135&p)<<4,p=(4278255360&p)>>>8|(16711935&p)<<8,d.r[h]=(p>>>16|p<<16)>>>17}function f(p,y,w){for(;y--!=0;)p.push(0,w)}for(h=0;h<32;h++)d.q[h]=d.S[h]<<3|d.T[h],d.c[h]=d.p[h]<<4|d.z[h];f(d._,144,8),f(d._,112,9),f(d._,24,7),f(d._,8,8),u.H.n(d._,9),u.H.A(d._,9,d.J),u.H.l(d._,9),f(d.$,32,5),u.H.n(d.$,5),u.H.A(d.$,5,d.h),u.H.l(d.$,5),f(d.Q,19,0),f(d.C,286,0),f(d.D,30,0),f(d.v,320,0)}(),u.H.N}();function s(u){return[1,null,3,1,2,null,4][u.ctype]*u.depth}function o(u,d,h,f,p){let y=s(d);const w=Math.ceil(f*y/8);let m,g;y=Math.ceil(y/8);let v=u[h],b=0;if(v>1&&(u[h]=[0,0,1][v-2]),v==3)for(b=y;b<w;b++)u[b+1]=u[b+1]+(u[b+1-y]>>>1)&255;for(let I=0;I<p;I++)if(m=h+I*w,g=m+I+1,v=u[g-1],b=0,v==0)for(;b<w;b++)u[m+b]=u[g+b];else if(v==1){for(;b<y;b++)u[m+b]=u[g+b];for(;b<w;b++)u[m+b]=u[g+b]+u[m+b-y]}else if(v==2)for(;b<w;b++)u[m+b]=u[g+b]+u[m+b-w];else if(v==3){for(;b<y;b++)u[m+b]=u[g+b]+(u[m+b-w]>>>1);for(;b<w;b++)u[m+b]=u[g+b]+(u[m+b-w]+u[m+b-y]>>>1)}else{for(;b<y;b++)u[m+b]=u[g+b]+a(0,u[m+b-w],0);for(;b<w;b++)u[m+b]=u[g+b]+a(u[m+b-y],u[m+b-w],u[m+b-y-w])}return u}function a(u,d,h){const f=u+d-h,p=f-u,y=f-d,w=f-h;return p*p<=y*y&&p*p<=w*w?u:y*y<=w*w?d:h}function l(u,d,h){h.width=t.readUint(u,d),d+=4,h.height=t.readUint(u,d),d+=4,h.depth=u[d],d++,h.ctype=u[d],d++,h.compress=u[d],d++,h.filter=u[d],d++,h.interlace=u[d],d++}function c(u,d,h,f,p,y,w,m,g){const v=Math.min(d,p),b=Math.min(h,y);let I=0,E=0;for(let B=0;B<b;B++)for(let A=0;A<v;A++)if(w>=0&&m>=0?(I=B*d+A<<2,E=(m+B)*p+w+A<<2):(I=(-m+B)*d-w+A<<2,E=B*p+A<<2),g==0)f[E]=u[I],f[E+1]=u[I+1],f[E+2]=u[I+2],f[E+3]=u[I+3];else if(g==1){var D=u[I+3]*.00392156862745098,S=u[I]*D,T=u[I+1]*D,O=u[I+2]*D,C=f[E+3]*(1/255),k=f[E]*C,R=f[E+1]*C,P=f[E+2]*C;const x=1-D,j=D+C*x,F=j==0?0:1/j;f[E+3]=255*j,f[E+0]=(S+k*x)*F,f[E+1]=(T+R*x)*F,f[E+2]=(O+P*x)*F}else if(g==2)D=u[I+3],S=u[I],T=u[I+1],O=u[I+2],C=f[E+3],k=f[E],R=f[E+1],P=f[E+2],D==C&&S==k&&T==R&&O==P?(f[E]=0,f[E+1]=0,f[E+2]=0,f[E+3]=0):(f[E]=S,f[E+1]=T,f[E+2]=O,f[E+3]=D);else if(g==3){if(D=u[I+3],S=u[I],T=u[I+1],O=u[I+2],C=f[E+3],k=f[E],R=f[E+1],P=f[E+2],D==C&&S==k&&T==R&&O==P)continue;if(D<220&&C>20)return!1}return!0}return{decode:function(d){const h=new Uint8Array(d);let f=8;const p=t,y=p.readUshort,w=p.readUint,m={tabs:{},frames:[]},g=new Uint8Array(h.length);let v,b=0,I=0;const E=[137,80,78,71,13,10,26,10];for(var D=0;D<8;D++)if(h[D]!=E[D])throw"The input is not a PNG file!";for(;f<h.length;){const B=p.readUint(h,f);f+=4;const A=p.readASCII(h,f,4);if(f+=4,A=="IHDR")l(h,f,m);else if(A=="iCCP"){for(var S=f;h[S]!=0;)S++;p.readASCII(h,f,S-f),h[S+1];const x=h.slice(S+2,f+B);let j=null;try{j=r(x)}catch{j=i(x)}m.tabs[A]=j}else if(A=="CgBI")m.tabs[A]=h.slice(f,f+4);else if(A=="IDAT"){for(D=0;D<B;D++)g[b+D]=h[f+D];b+=B}else if(A=="acTL")m.tabs[A]={num_frames:w(h,f),num_plays:w(h,f+4)},v=new Uint8Array(h.length);else if(A=="fcTL"){I!=0&&((P=m.frames[m.frames.length-1]).data=n(m,v.slice(0,I),P.rect.width,P.rect.height),I=0);const x={x:w(h,f+12),y:w(h,f+16),width:w(h,f+4),height:w(h,f+8)};let j=y(h,f+22);j=y(h,f+20)/(j==0?100:j);const F={rect:x,delay:Math.round(1e3*j),dispose:h[f+24],blend:h[f+25]};m.frames.push(F)}else if(A=="fdAT"){for(D=0;D<B-4;D++)v[I+D]=h[f+D+4];I+=B-4}else if(A=="pHYs")m.tabs[A]=[p.readUint(h,f),p.readUint(h,f+4),h[f+8]];else if(A=="cHRM")for(m.tabs[A]=[],D=0;D<8;D++)m.tabs[A].push(p.readUint(h,f+4*D));else if(A=="tEXt"||A=="zTXt"){m.tabs[A]==null&&(m.tabs[A]={});var T=p.nextZero(h,f),O=p.readASCII(h,f,T-f),C=f+B-T-1;if(A=="tEXt")R=p.readASCII(h,T+1,C);else{var k=r(h.slice(T+2,T+2+C));R=p.readUTF8(k,0,k.length)}m.tabs[A][O]=R}else if(A=="iTXt"){m.tabs[A]==null&&(m.tabs[A]={}),T=0,S=f,T=p.nextZero(h,S),O=p.readASCII(h,S,T-S);const x=h[S=T+1];var R;h[S+1],S+=2,T=p.nextZero(h,S),p.readASCII(h,S,T-S),S=T+1,T=p.nextZero(h,S),p.readUTF8(h,S,T-S),C=B-((S=T+1)-f),x==0?R=p.readUTF8(h,S,C):(k=r(h.slice(S,S+C)),R=p.readUTF8(k,0,k.length)),m.tabs[A][O]=R}else if(A=="PLTE")m.tabs[A]=p.readBytes(h,f,B);else if(A=="hIST"){const x=m.tabs.PLTE.length/3;for(m.tabs[A]=[],D=0;D<x;D++)m.tabs[A].push(y(h,f+2*D))}else if(A=="tRNS")m.ctype==3?m.tabs[A]=p.readBytes(h,f,B):m.ctype==0?m.tabs[A]=y(h,f):m.ctype==2&&(m.tabs[A]=[y(h,f),y(h,f+2),y(h,f+4)]);else if(A=="gAMA")m.tabs[A]=p.readUint(h,f)/1e5;else if(A=="sRGB")m.tabs[A]=h[f];else if(A=="bKGD")m.ctype==0||m.ctype==4?m.tabs[A]=[y(h,f)]:m.ctype==2||m.ctype==6?m.tabs[A]=[y(h,f),y(h,f+2),y(h,f+4)]:m.ctype==3&&(m.tabs[A]=h[f]);else if(A=="IEND")break;f+=B,p.readUint(h,f),f+=4}var P;return I!=0&&((P=m.frames[m.frames.length-1]).data=n(m,v.slice(0,I),P.rect.width,P.rect.height)),m.data=n(m,g,m.width,m.height),delete m.compress,delete m.interlace,delete m.filter,m},toRGBA8:function(d){const h=d.width,f=d.height;if(d.tabs.acTL==null)return[e(d.data,h,f,d).buffer];const p=[];d.frames[0].data==null&&(d.frames[0].data=d.data);const y=h*f*4,w=new Uint8Array(y),m=new Uint8Array(y),g=new Uint8Array(y);for(let b=0;b<d.frames.length;b++){const I=d.frames[b],E=I.rect.x,D=I.rect.y,S=I.rect.width,T=I.rect.height,O=e(I.data,S,T,d);if(b!=0)for(var v=0;v<y;v++)g[v]=w[v];if(I.blend==0?c(O,S,T,w,h,f,E,D,0):I.blend==1&&c(O,S,T,w,h,f,E,D,1),p.push(w.buffer.slice(0)),I.dispose!=0){if(I.dispose==1)c(m,S,T,w,h,f,E,D,0);else if(I.dispose==2)for(v=0;v<y;v++)w[v]=g[v]}}return p},_paeth:a,_copyTile:c,_bin:t}}();(function(){const{_copyTile:t}=ai,{_bin:e}=ai,n=ai._paeth;var r={table:function(){const S=new Uint32Array(256);for(let T=0;T<256;T++){let O=T;for(let C=0;C<8;C++)1&O?O=3988292384^O>>>1:O>>>=1;S[T]=O}return S}(),update(S,T,O,C){for(let k=0;k<C;k++)S=r.table[255&(S^T[O+k])]^S>>>8;return S},crc:(S,T,O)=>4294967295^r.update(4294967295,S,T,O)};function i(S,T,O,C){T[O]+=S[0]*C>>4,T[O+1]+=S[1]*C>>4,T[O+2]+=S[2]*C>>4,T[O+3]+=S[3]*C>>4}function s(S){return Math.max(0,Math.min(255,S))}function o(S,T){const O=S[0]-T[0],C=S[1]-T[1],k=S[2]-T[2],R=S[3]-T[3];return O*O+C*C+k*k+R*R}function a(S,T,O,C,k,R,P){P==null&&(P=1);const B=C.length,A=[];for(var x=0;x<B;x++){const U=C[x];A.push([U>>>0&255,U>>>8&255,U>>>16&255,U>>>24&255])}for(x=0;x<B;x++){let U=4294967295;for(var j=0,F=0;F<B;F++){var z=o(A[x],A[F]);F!=x&&z<U&&(U=z,j=F)}}const Z=new Uint32Array(k.buffer),N=new Int16Array(T*O*4),$=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(x=0;x<$.length;x++)$[x]=255*(($[x]+.5)/16-.5);for(let U=0;U<O;U++)for(let M=0;M<T;M++){var L;x=4*(U*T+M),P!=2?L=[s(S[x]+N[x]),s(S[x+1]+N[x+1]),s(S[x+2]+N[x+2]),s(S[x+3]+N[x+3])]:(z=$[4*(3&U)+(3&M)],L=[s(S[x]+z),s(S[x+1]+z),s(S[x+2]+z),s(S[x+3]+z)]),j=0;let te=16777215;for(F=0;F<B;F++){const ue=o(L,A[F]);ue<te&&(te=ue,j=F)}const G=A[j],ee=[L[0]-G[0],L[1]-G[1],L[2]-G[2],L[3]-G[3]];P==1&&(M!=T-1&&i(ee,N,x+4,7),U!=O-1&&(M!=0&&i(ee,N,x+4*T-4,3),i(ee,N,x+4*T,5),M!=T-1&&i(ee,N,x+4*T+4,1))),R[x>>2]=j,Z[x>>2]=C[j]}}function l(S,T,O,C,k){k==null&&(k={});const{crc:R}=r,P=e.writeUint,B=e.writeUshort,A=e.writeASCII;let x=8;const j=S.frames.length>1;let F,z=!1,Z=33+(j?20:0);if(k.sRGB!=null&&(Z+=13),k.pHYs!=null&&(Z+=21),k.iCCP!=null&&(F=pako.deflate(k.iCCP),Z+=21+F.length+4),S.ctype==3){for(var N=S.plte.length,$=0;$<N;$++)S.plte[$]>>>24!=255&&(z=!0);Z+=8+3*N+4+(z?8+1*N+4:0)}for(var L=0;L<S.frames.length;L++)j&&(Z+=38),Z+=(G=S.frames[L]).cimg.length+12,L!=0&&(Z+=4);Z+=12;const U=new Uint8Array(Z),M=[137,80,78,71,13,10,26,10];for($=0;$<8;$++)U[$]=M[$];if(P(U,x,13),x+=4,A(U,x,"IHDR"),x+=4,P(U,x,T),x+=4,P(U,x,O),x+=4,U[x]=S.depth,x++,U[x]=S.ctype,x++,U[x]=0,x++,U[x]=0,x++,U[x]=0,x++,P(U,x,R(U,x-17,17)),x+=4,k.sRGB!=null&&(P(U,x,1),x+=4,A(U,x,"sRGB"),x+=4,U[x]=k.sRGB,x++,P(U,x,R(U,x-5,5)),x+=4),k.iCCP!=null){const ee=13+F.length;P(U,x,ee),x+=4,A(U,x,"iCCP"),x+=4,A(U,x,"ICC profile"),x+=11,x+=2,U.set(F,x),x+=F.length,P(U,x,R(U,x-(ee+4),ee+4)),x+=4}if(k.pHYs!=null&&(P(U,x,9),x+=4,A(U,x,"pHYs"),x+=4,P(U,x,k.pHYs[0]),x+=4,P(U,x,k.pHYs[1]),x+=4,U[x]=k.pHYs[2],x++,P(U,x,R(U,x-13,13)),x+=4),j&&(P(U,x,8),x+=4,A(U,x,"acTL"),x+=4,P(U,x,S.frames.length),x+=4,P(U,x,k.loop!=null?k.loop:0),x+=4,P(U,x,R(U,x-12,12)),x+=4),S.ctype==3){for(P(U,x,3*(N=S.plte.length)),x+=4,A(U,x,"PLTE"),x+=4,$=0;$<N;$++){const ee=3*$,ue=S.plte[$],ye=255&ue,se=ue>>>8&255,De=ue>>>16&255;U[x+ee+0]=ye,U[x+ee+1]=se,U[x+ee+2]=De}if(x+=3*N,P(U,x,R(U,x-3*N-4,3*N+4)),x+=4,z){for(P(U,x,N),x+=4,A(U,x,"tRNS"),x+=4,$=0;$<N;$++)U[x+$]=S.plte[$]>>>24&255;x+=N,P(U,x,R(U,x-N-4,N+4)),x+=4}}let te=0;for(L=0;L<S.frames.length;L++){var G=S.frames[L];j&&(P(U,x,26),x+=4,A(U,x,"fcTL"),x+=4,P(U,x,te++),x+=4,P(U,x,G.rect.width),x+=4,P(U,x,G.rect.height),x+=4,P(U,x,G.rect.x),x+=4,P(U,x,G.rect.y),x+=4,B(U,x,C[L]),x+=2,B(U,x,1e3),x+=2,U[x]=G.dispose,x++,U[x]=G.blend,x++,P(U,x,R(U,x-30,30)),x+=4);const ee=G.cimg;P(U,x,(N=ee.length)+(L==0?0:4)),x+=4;const ue=x;A(U,x,L==0?"IDAT":"fdAT"),x+=4,L!=0&&(P(U,x,te++),x+=4),U.set(ee,x),x+=N,P(U,x,R(U,ue,x-ue)),x+=4}return P(U,x,0),x+=4,A(U,x,"IEND"),x+=4,P(U,x,R(U,x-4,4)),x+=4,U.buffer}function c(S,T,O){for(let C=0;C<S.frames.length;C++){const k=S.frames[C];k.rect.width;const R=k.rect.height,P=new Uint8Array(R*k.bpl+R);k.cimg=f(k.img,R,k.bpp,k.bpl,P,T,O)}}function u(S,T,O,C,k){const R=k[0],P=k[1],B=k[2],A=k[3],x=k[4],j=k[5];let F=6,z=8,Z=255;for(var N=0;N<S.length;N++){const Me=new Uint8Array(S[N]);for(var $=Me.length,L=0;L<$;L+=4)Z&=Me[L+3]}const U=Z!=255,M=function(ve,Le,ft,qe,ut,Nt){const et=[];for(var pe=0;pe<ve.length;pe++){const _e=new Uint8Array(ve[pe]),Re=new Uint32Array(_e.buffer);var Ge;let xe=0,$e=0,we=Le,W=ft,V=qe?1:0;if(pe!=0){const J=Nt||qe||pe==1||et[pe-2].dispose!=0?1:2;let re=0,ce=1e9;for(let he=0;he<J;he++){var K=new Uint8Array(ve[pe-1-he]);const Oe=new Uint32Array(ve[pe-1-he]);let Ie=Le,Ce=ft,Fe=-1,rt=-1;for(let Ze=0;Ze<ft;Ze++)for(let vt=0;vt<Le;vt++)Re[X=Ze*Le+vt]!=Oe[X]&&(vt<Ie&&(Ie=vt),vt>Fe&&(Fe=vt),Ze<Ce&&(Ce=Ze),Ze>rt&&(rt=Ze));Fe==-1&&(Ie=Ce=Fe=rt=0),ut&&((1&Ie)==1&&Ie--,(1&Ce)==1&&Ce--);const it=(Fe-Ie+1)*(rt-Ce+1);it<ce&&(ce=it,re=he,xe=Ie,$e=Ce,we=Fe-Ie+1,W=rt-Ce+1)}K=new Uint8Array(ve[pe-1-re]),re==1&&(et[pe-1].dispose=2),Ge=new Uint8Array(we*W*4),t(K,Le,ft,Ge,we,W,-xe,-$e,0),V=t(_e,Le,ft,Ge,we,W,-xe,-$e,3)?1:0,V==1?h(_e,Le,ft,Ge,{x:xe,y:$e,width:we,height:W}):t(_e,Le,ft,Ge,we,W,-xe,-$e,0)}else Ge=_e.slice(0);et.push({rect:{x:xe,y:$e,width:we,height:W},img:Ge,blend:V,dispose:0})}if(qe)for(pe=0;pe<et.length;pe++){if((Se=et[pe]).blend==1)continue;const _e=Se.rect,Re=et[pe-1].rect,xe=Math.min(_e.x,Re.x),$e=Math.min(_e.y,Re.y),we={x:xe,y:$e,width:Math.max(_e.x+_e.width,Re.x+Re.width)-xe,height:Math.max(_e.y+_e.height,Re.y+Re.height)-$e};et[pe-1].dispose=1,pe-1!=0&&d(ve,Le,ft,et,pe-1,we,ut),d(ve,Le,ft,et,pe,we,ut)}let Y=0;if(ve.length!=1)for(var X=0;X<et.length;X++){var Se;Y+=(Se=et[X]).rect.width*Se.rect.height}return et}(S,T,O,R,P,B),te={},G=[],ee=[];if(C!=0){const Me=[];for(L=0;L<M.length;L++)Me.push(M[L].img.buffer);const ve=function(ut){let Nt=0;for(var et=0;et<ut.length;et++)Nt+=ut[et].byteLength;const pe=new Uint8Array(Nt);let Ge=0;for(et=0;et<ut.length;et++){const K=new Uint8Array(ut[et]),Y=K.length;for(let X=0;X<Y;X+=4){let Se=K[X],_e=K[X+1],Re=K[X+2];const xe=K[X+3];xe==0&&(Se=_e=Re=0),pe[Ge+X]=Se,pe[Ge+X+1]=_e,pe[Ge+X+2]=Re,pe[Ge+X+3]=xe}Ge+=Y}return pe.buffer}(Me),Le=y(ve,C);for(L=0;L<Le.plte.length;L++)G.push(Le.plte[L].est.rgba);let ft=0;for(L=0;L<M.length;L++){const qe=(ye=M[L]).img.length;var ue=new Uint8Array(Le.inds.buffer,ft>>2,qe>>2);ee.push(ue);const ut=new Uint8Array(Le.abuf,ft,qe);j&&a(ye.img,ye.rect.width,ye.rect.height,G,ut,ue),ye.img.set(ut),ft+=qe}}else for(N=0;N<M.length;N++){var ye=M[N];const Me=new Uint32Array(ye.img.buffer);var se=ye.rect.width;for($=Me.length,ue=new Uint8Array($),ee.push(ue),L=0;L<$;L++){const ve=Me[L];if(L!=0&&ve==Me[L-1])ue[L]=ue[L-1];else if(L>se&&ve==Me[L-se])ue[L]=ue[L-se];else{let Le=te[ve];if(Le==null&&(te[ve]=Le=G.length,G.push(ve),G.length>=300))break;ue[L]=Le}}}const De=G.length;for(De<=256&&x==0&&(z=De<=2?1:De<=4?2:De<=16?4:8,z=Math.max(z,A)),N=0;N<M.length;N++){(ye=M[N]).rect.x,ye.rect.y,se=ye.rect.width;const Me=ye.rect.height;let ve=ye.img;new Uint32Array(ve.buffer);let Le=4*se,ft=4;if(De<=256&&x==0){Le=Math.ceil(z*se/8);var He=new Uint8Array(Le*Me);const qe=ee[N];for(let ut=0;ut<Me;ut++){L=ut*Le;const Nt=ut*se;if(z==8)for(var Ee=0;Ee<se;Ee++)He[L+Ee]=qe[Nt+Ee];else if(z==4)for(Ee=0;Ee<se;Ee++)He[L+(Ee>>1)]|=qe[Nt+Ee]<<4-4*(1&Ee);else if(z==2)for(Ee=0;Ee<se;Ee++)He[L+(Ee>>2)]|=qe[Nt+Ee]<<6-2*(3&Ee);else if(z==1)for(Ee=0;Ee<se;Ee++)He[L+(Ee>>3)]|=qe[Nt+Ee]<<7-1*(7&Ee)}ve=He,F=3,ft=1}else if(U==0&&M.length==1){He=new Uint8Array(se*Me*3);const qe=se*Me;for(L=0;L<qe;L++){const ut=3*L,Nt=4*L;He[ut]=ve[Nt],He[ut+1]=ve[Nt+1],He[ut+2]=ve[Nt+2]}ve=He,F=2,ft=3,Le=3*se}ye.img=ve,ye.bpl=Le,ye.bpp=ft}return{ctype:F,depth:z,plte:G,frames:M}}function d(S,T,O,C,k,R,P){const B=Uint8Array,A=Uint32Array,x=new B(S[k-1]),j=new A(S[k-1]),F=k+1<S.length?new B(S[k+1]):null,z=new B(S[k]),Z=new A(z.buffer);let N=T,$=O,L=-1,U=-1;for(let te=0;te<R.height;te++)for(let G=0;G<R.width;G++){const ee=R.x+G,ue=R.y+te,ye=ue*T+ee,se=Z[ye];se==0||C[k-1].dispose==0&&j[ye]==se&&(F==null||F[4*ye+3]!=0)||(ee<N&&(N=ee),ee>L&&(L=ee),ue<$&&($=ue),ue>U&&(U=ue))}L==-1&&(N=$=L=U=0),P&&((1&N)==1&&N--,(1&$)==1&&$--),R={x:N,y:$,width:L-N+1,height:U-$+1};const M=C[k];M.rect=R,M.blend=1,M.img=new Uint8Array(R.width*R.height*4),C[k-1].dispose==0?(t(x,T,O,M.img,R.width,R.height,-R.x,-R.y,0),h(z,T,O,M.img,R)):t(z,T,O,M.img,R.width,R.height,-R.x,-R.y,0)}function h(S,T,O,C,k){t(S,T,O,C,k.width,k.height,-k.x,-k.y,2)}function f(S,T,O,C,k,R,P){const B=[];let A,x=[0,1,2,3,4];R!=-1?x=[R]:(T*C>5e5||O==1)&&(x=[0]),P&&(A={level:0});const j=che;for(var F=0;F<x.length;F++){for(let N=0;N<T;N++)p(k,S,N,C,O,x[F]);B.push(j.deflate(k,A))}let z,Z=1e9;for(F=0;F<B.length;F++)B[F].length<Z&&(z=F,Z=B[F].length);return B[z]}function p(S,T,O,C,k,R){const P=O*C;let B=P+O;if(S[B]=R,B++,R==0)if(C<500)for(var A=0;A<C;A++)S[B+A]=T[P+A];else S.set(new Uint8Array(T.buffer,P,C),B);else if(R==1){for(A=0;A<k;A++)S[B+A]=T[P+A];for(A=k;A<C;A++)S[B+A]=T[P+A]-T[P+A-k]+256&255}else if(O==0){for(A=0;A<k;A++)S[B+A]=T[P+A];if(R==2)for(A=k;A<C;A++)S[B+A]=T[P+A];if(R==3)for(A=k;A<C;A++)S[B+A]=T[P+A]-(T[P+A-k]>>1)+256&255;if(R==4)for(A=k;A<C;A++)S[B+A]=T[P+A]-n(T[P+A-k],0,0)+256&255}else{if(R==2)for(A=0;A<C;A++)S[B+A]=T[P+A]+256-T[P+A-C]&255;if(R==3){for(A=0;A<k;A++)S[B+A]=T[P+A]+256-(T[P+A-C]>>1)&255;for(A=k;A<C;A++)S[B+A]=T[P+A]+256-(T[P+A-C]+T[P+A-k]>>1)&255}if(R==4){for(A=0;A<k;A++)S[B+A]=T[P+A]+256-n(0,T[P+A-C],0)&255;for(A=k;A<C;A++)S[B+A]=T[P+A]+256-n(T[P+A-k],T[P+A-C],T[P+A-k-C])&255}}}function y(S,T){const O=new Uint8Array(S),C=O.slice(0),k=new Uint32Array(C.buffer),R=w(C,T),P=R[0],B=R[1],A=O.length,x=new Uint8Array(A>>2);let j;if(O.length<2e7)for(var F=0;F<A;F+=4)j=m(P,z=O[F]*(1/255),Z=O[F+1]*(1/255),N=O[F+2]*(1/255),$=O[F+3]*(1/255)),x[F>>2]=j.ind,k[F>>2]=j.est.rgba;else for(F=0;F<A;F+=4){var z=O[F]*.00392156862745098,Z=O[F+1]*(1/255),N=O[F+2]*(1/255),$=O[F+3]*(1/255);for(j=P;j.left;)j=g(j.est,z,Z,N,$)<=0?j.left:j.right;x[F>>2]=j.ind,k[F>>2]=j.est.rgba}return{abuf:C.buffer,inds:x,plte:B}}function w(S,T,O){O==null&&(O=1e-4);const C=new Uint32Array(S.buffer),k={i0:0,i1:S.length,bst:null,est:null,tdst:0,left:null,right:null};k.bst=I(S,k.i0,k.i1),k.est=E(k.bst);const R=[k];for(;R.length<T;){let B=0,A=0;for(var P=0;P<R.length;P++)R[P].est.L>B&&(B=R[P].est.L,A=P);if(B<O)break;const x=R[A],j=v(S,C,x.i0,x.i1,x.est.e,x.est.eMq255);if(x.i0>=j||x.i1<=j){x.est.L=0;continue}const F={i0:x.i0,i1:j,bst:null,est:null,tdst:0,left:null,right:null};F.bst=I(S,F.i0,F.i1),F.est=E(F.bst);const z={i0:j,i1:x.i1,bst:null,est:null,tdst:0,left:null,right:null};for(z.bst={R:[],m:[],N:x.bst.N-F.bst.N},P=0;P<16;P++)z.bst.R[P]=x.bst.R[P]-F.bst.R[P];for(P=0;P<4;P++)z.bst.m[P]=x.bst.m[P]-F.bst.m[P];z.est=E(z.bst),x.left=F,x.right=z,R[A]=F,R.push(z)}for(R.sort((B,A)=>A.bst.N-B.bst.N),P=0;P<R.length;P++)R[P].ind=P;return[k,R]}function m(S,T,O,C,k){if(S.left==null)return S.tdst=function(F,z,Z,N,$){const L=z-F[0],U=Z-F[1],M=N-F[2],te=$-F[3];return L*L+U*U+M*M+te*te}(S.est.q,T,O,C,k),S;const R=g(S.est,T,O,C,k);let P=S.left,B=S.right;R>0&&(P=S.right,B=S.left);const A=m(P,T,O,C,k);if(A.tdst<=R*R)return A;const x=m(B,T,O,C,k);return x.tdst<A.tdst?x:A}function g(S,T,O,C,k){const{e:R}=S;return R[0]*T+R[1]*O+R[2]*C+R[3]*k-S.eMq}function v(S,T,O,C,k,R){for(C-=4;O<C;){for(;b(S,O,k)<=R;)O+=4;for(;b(S,C,k)>R;)C-=4;if(O>=C)break;const P=T[O>>2];T[O>>2]=T[C>>2],T[C>>2]=P,O+=4,C-=4}for(;b(S,O,k)>R;)O-=4;return O+4}function b(S,T,O){return S[T]*O[0]+S[T+1]*O[1]+S[T+2]*O[2]+S[T+3]*O[3]}function I(S,T,O){const C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],k=[0,0,0,0],R=O-T>>2;for(let P=T;P<O;P+=4){const B=S[P]*.00392156862745098,A=S[P+1]*(1/255),x=S[P+2]*(1/255),j=S[P+3]*(1/255);k[0]+=B,k[1]+=A,k[2]+=x,k[3]+=j,C[0]+=B*B,C[1]+=B*A,C[2]+=B*x,C[3]+=B*j,C[5]+=A*A,C[6]+=A*x,C[7]+=A*j,C[10]+=x*x,C[11]+=x*j,C[15]+=j*j}return C[4]=C[1],C[8]=C[2],C[9]=C[6],C[12]=C[3],C[13]=C[7],C[14]=C[11],{R:C,m:k,N:R}}function E(S){const{R:T}=S,{m:O}=S,{N:C}=S,k=O[0],R=O[1],P=O[2],B=O[3],A=C==0?0:1/C,x=[T[0]-k*k*A,T[1]-k*R*A,T[2]-k*P*A,T[3]-k*B*A,T[4]-R*k*A,T[5]-R*R*A,T[6]-R*P*A,T[7]-R*B*A,T[8]-P*k*A,T[9]-P*R*A,T[10]-P*P*A,T[11]-P*B*A,T[12]-B*k*A,T[13]-B*R*A,T[14]-B*P*A,T[15]-B*B*A],j=x,F=D;let z=[Math.random(),Math.random(),Math.random(),Math.random()],Z=0,N=0;if(C!=0)for(let L=0;L<16&&(z=F.multVec(j,z),N=Math.sqrt(F.dot(z,z)),z=F.sml(1/N,z),!(L!=0&&Math.abs(N-Z)<1e-9));L++)Z=N;const $=[k*A,R*A,P*A,B*A];return{Cov:x,q:$,e:z,L:Z,eMq255:F.dot(F.sml(255,$),z),eMq:F.dot(z,$),rgba:(Math.round(255*$[3])<<24|Math.round(255*$[2])<<16|Math.round(255*$[1])<<8|Math.round(255*$[0])<<0)>>>0}}var D={multVec:(S,T)=>[S[0]*T[0]+S[1]*T[1]+S[2]*T[2]+S[3]*T[3],S[4]*T[0]+S[5]*T[1]+S[6]*T[2]+S[7]*T[3],S[8]*T[0]+S[9]*T[1]+S[10]*T[2]+S[11]*T[3],S[12]*T[0]+S[13]*T[1]+S[14]*T[2]+S[15]*T[3]],dot:(S,T)=>S[0]*T[0]+S[1]*T[1]+S[2]*T[2]+S[3]*T[3],sml:(S,T)=>[S*T[0],S*T[1],S*T[2],S*T[3]]};ai.encode=function(T,O,C,k,R,P,B){k==null&&(k=0),B==null&&(B=!1);const A=u(T,O,C,k,[!1,!1,!1,0,B,!1]);return c(A,-1),l(A,O,C,R,P)},ai.encodeLL=function(T,O,C,k,R,P,B,A){const x={ctype:0+(k==1?0:2)+(R==0?0:4),depth:P,frames:[]},j=(k+R)*P,F=j*O;for(let z=0;z<T.length;z++)x.frames.push({rect:{x:0,y:0,width:O,height:C},img:new Uint8Array(T[z]),blend:0,dispose:1,bpp:Math.ceil(j/8),bpl:Math.ceil(F/8)});return c(x,0,!0),l(x,O,C,B,A)},ai.encode.compress=u,ai.encode.dither=a,ai.quantize=y,ai.quantize.getKDtree=w,ai.quantize.getNearest=m})();const uV={toArrayBuffer(t,e){const n=t.width,r=t.height,i=n<<2,s=t.getContext("2d").getImageData(0,0,n,r),o=new Uint32Array(s.data.buffer),a=(32*n+31)/32<<2,l=a*r,c=122+l,u=new ArrayBuffer(c),d=new DataView(u),h=1<<20;let f,p,y,w,m=h,g=0,v=0,b=0;function I(S){d.setUint16(v,S,!0),v+=2}function E(S){d.setUint32(v,S,!0),v+=4}function D(S){v+=S}I(19778),E(c),D(4),E(122),E(108),E(n),E(-r>>>0),I(1),I(32),E(3),E(l),E(2835),E(2835),D(8),E(16711680),E(65280),E(255),E(4278190080),E(1466527264),function S(){for(;g<r&&m>0;){for(w=122+g*a,f=0;f<i;)m--,p=o[b++],y=p>>>24,d.setUint32(w+f,p<<8|y),f+=4;g++}b<o.length?(m=h,setTimeout(S,uV._dly)):e(u)}()},toBlob(t,e){this.toArrayBuffer(t,n=>{e(new Blob([n],{type:"image/bmp"}))})},_dly:9};var dr={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},uhe={[dr.CHROME]:16384,[dr.FIREFOX]:11180,[dr.DESKTOP_SAFARI]:16384,[dr.IE]:8192,[dr.IOS]:4096,[dr.ETC]:8192};const Bx=typeof window<"u",dV=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,qg=Bx&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),dhe=(Bx||dV)&&(qg&&qg.getOriginalSymbol(window,"File")||typeof File<"u"&&File),hV=(Bx||dV)&&(qg&&qg.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function zx(t,e,n=Date.now()){return new Promise(r=>{const i=t.split(","),s=i[0].match(/:(.*?);/)[1],o=globalThis.atob(i[1]);let a=o.length;const l=new Uint8Array(a);for(;a--;)l[a]=o.charCodeAt(a);const c=new Blob([l],{type:s});c.name=e,c.lastModified=n,r(c)})}function fV(t){return new Promise((e,n)=>{const r=new hV;r.onload=()=>e(r.result),r.onerror=i=>n(i),r.readAsDataURL(t)})}function pV(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>e(r),r.onerror=i=>n(i),r.src=t})}function Ta(){if(Ta.cachedResult!==void 0)return Ta.cachedResult;let t=dr.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?t=dr.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?t=dr.IOS:/Safari/i.test(e)?t=dr.DESKTOP_SAFARI:/Firefox/i.test(e)?t=dr.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(t=dr.IE),Ta.cachedResult=t,Ta.cachedResult}function mV(t,e){const n=Ta(),r=uhe[n];let i=t,s=e,o=i*s;const a=i>s?s/i:i/s;for(;o>r*r;){const l=(r+i)/2,c=(r+s)/2;l<c?(s=c,i=c*a):(s=l*a,i=l),o=i*s}return{width:i,height:s}}function w_(t,e){let n,r;try{if(n=new OffscreenCanvas(t,e),r=n.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),r=n.getContext("2d")}return n.width=t,n.height=e,[n,r]}function gV(t,e){const{width:n,height:r}=mV(t.width,t.height),[i,s]=w_(n,r);return e&&/jpe?g/.test(e)&&(s.fillStyle="white",s.fillRect(0,0,i.width,i.height)),s.drawImage(t,0,0,i.width,i.height),i}function wm(){return wm.cachedResult!==void 0||(wm.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),wm.cachedResult}function Kg(t,e={}){return new Promise(function(n,r){let i,s;var o=function(){try{return s=gV(i,e.fileType||t.type),n([i,s])}catch(l){return r(l)}},a=function(l){try{var c=function(u){try{throw u}catch(d){return r(d)}};try{let u;return fV(t).then(function(d){try{return u=d,pV(u).then(function(h){try{return i=h,function(){try{return o()}catch(f){return r(f)}}()}catch(f){return c(f)}},c)}catch(h){return c(h)}},c)}catch(u){c(u)}}catch(u){return r(u)}};try{if(wm()||[dr.DESKTOP_SAFARI,dr.MOBILE_SAFARI].includes(Ta()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(t).then(function(l){try{return i=l,o()}catch{return a()}},a)}catch{a()}})}function Qg(t,e,n,r,i=1){return new Promise(function(s,o){let a;if(e==="image/png"){let d,h,f;return d=t.getContext("2d"),{data:h}=d.getImageData(0,0,t.width,t.height),f=ai.encode([h.buffer],t.width,t.height,4096*i),a=new Blob([f],{type:e}),a.name=n,a.lastModified=r,l.call(this)}{let d=function(){return l.call(this)};var c=d;if(e==="image/bmp")return new Promise(h=>uV.toBlob(t,h)).then(function(h){try{return a=h,a.name=n,a.lastModified=r,d.call(this)}catch(f){return o(f)}}.bind(this),o);{let h=function(){return d.call(this)};var u=h;if(typeof OffscreenCanvas=="function"&&t instanceof OffscreenCanvas)return t.convertToBlob({type:e,quality:i}).then(function(f){try{return a=f,a.name=n,a.lastModified=r,h.call(this)}catch(p){return o(p)}}.bind(this),o);{let f;return f=t.toDataURL(e,i),zx(f,n,r).then(function(p){try{return a=p,h.call(this)}catch(y){return o(y)}}.bind(this),o)}}}function l(){return s(a)}})}function xi(t){t.width=0,t.height=0}function ic(){return new Promise(function(t,e){let n,r,i,s;return ic.cachedResult!==void 0?t(ic.cachedResult):zx("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(o){try{return n=o,Kg(n).then(function(a){try{return r=a[1],Qg(r,n.type,n.name,n.lastModified).then(function(l){try{return i=l,xi(r),Kg(i).then(function(c){try{return s=c[0],ic.cachedResult=s.width===1&&s.height===2,t(ic.cachedResult)}catch(u){return e(u)}},e)}catch(c){return e(c)}},e)}catch(l){return e(l)}},e)}catch(a){return e(a)}},e)})}function yV(t){return new Promise((e,n)=>{const r=new hV;r.onload=i=>{const s=new DataView(i.target.result);if(s.getUint16(0,!1)!=65496)return e(-2);const o=s.byteLength;let a=2;for(;a<o;){if(s.getUint16(a+2,!1)<=8)return e(-1);const l=s.getUint16(a,!1);if(a+=2,l==65505){if(s.getUint32(a+=2,!1)!=1165519206)return e(-1);const c=s.getUint16(a+=6,!1)==18761;a+=s.getUint32(a+4,c);const u=s.getUint16(a,c);a+=2;for(let d=0;d<u;d++)if(s.getUint16(a+12*d,c)==274)return e(s.getUint16(a+12*d+8,c))}else{if((65280&l)!=65280)break;a+=s.getUint16(a,!1)}}return e(-1)},r.onerror=i=>n(i),r.readAsArrayBuffer(t)})}function vV(t,e){const{width:n}=t,{height:r}=t,{maxWidthOrHeight:i}=e;let s,o=t;return isFinite(i)&&(n>i||r>i)&&([o,s]=w_(n,r),n>r?(o.width=i,o.height=r/n*i):(o.width=n/r*i,o.height=i),s.drawImage(t,0,0,o.width,o.height),xi(t)),o}function _V(t,e){const{width:n}=t,{height:r}=t,[i,s]=w_(n,r);switch(e>4&&e<9?(i.width=r,i.height=n):(i.width=n,i.height=r),e){case 2:s.transform(-1,0,0,1,n,0);break;case 3:s.transform(-1,0,0,-1,n,r);break;case 4:s.transform(1,0,0,-1,0,r);break;case 5:s.transform(0,1,1,0,0,0);break;case 6:s.transform(0,1,-1,0,r,0);break;case 7:s.transform(0,-1,-1,0,r,n);break;case 8:s.transform(0,-1,1,0,0,n)}return s.drawImage(t,0,0,n,r),xi(t),i}function iN(t,e,n=0){return new Promise(function(r,i){let s,o,a,l,c,u,d,h,f,p,y,w,m,g,v,b,I,E,D,S;function T(C=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;s+=C,e.onProgress(Math.min(s,100))}function O(C){if(e.signal&&e.signal.aborted)throw e.signal.reason;s=Math.min(Math.max(C,s),100),e.onProgress(s)}return s=n,o=e.maxIteration||10,a=1024*e.maxSizeMB*1024,T(),Kg(t,e).then(function(C){try{return[,l]=C,T(),c=vV(l,e),T(),new Promise(function(k,R){var P;if(!(P=e.exifOrientation))return yV(t).then(function(A){try{return P=A,B.call(this)}catch(x){return R(x)}}.bind(this),R);function B(){return k(P)}return B.call(this)}).then(function(k){try{return u=k,T(),ic().then(function(R){try{return d=R?c:_V(c,u),T(),h=e.initialQuality||1,f=e.fileType||t.type,Qg(d,f,t.name,t.lastModified,h).then(function(P){try{{let j=function(){if(o--&&(v>a||v>m)){let z,Z;return z=S?.95*D.width:D.width,Z=S?.95*D.height:D.height,[I,E]=w_(z,Z),E.drawImage(D,0,0,z,Z),h*=f==="image/png"?.85:.95,Qg(I,f,t.name,t.lastModified,h).then(function(N){try{return b=N,xi(D),D=I,v=b.size,O(Math.min(99,Math.floor((g-v)/(g-a)*100))),j}catch($){return i($)}},i)}return[1]},F=function(){return xi(D),xi(I),xi(c),xi(d),xi(l),O(100),r(b)};var A=j,x=F;if(p=P,T(),y=p.size>a,w=p.size>t.size,!y&&!w)return O(100),r(p);var B;return m=t.size,g=p.size,v=g,D=d,S=!e.alwaysKeepResolution&&y,(B=function(z){for(;z;){if(z.then)return void z.then(B,i);try{if(z.pop){if(z.length)return z.pop()?F.call(this):z;z=j}else z=z.call(this)}catch(Z){return i(Z)}}}.bind(this))(j)}}catch(j){return i(j)}}.bind(this),i)}catch(P){return i(P)}}.bind(this),i)}catch(R){return i(R)}}.bind(this),i)}catch(k){return i(k)}}.bind(this),i)})}const hhe=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let q0;function fhe(t,e){return new Promise((n,r)=>{q0||(q0=function(o){const a=[];return typeof o=="function"?a.push(`(${o})()`):a.push(o),URL.createObjectURL(new Blob(a))}(hhe));const i=new Worker(q0);i.addEventListener("message",function(o){if(e.signal&&e.signal.aborted)i.terminate();else if(o.data.progress===void 0){if(o.data.error)return r(new Error(o.data.error)),void i.terminate();n(o.data.file),i.terminate()}else e.onProgress(o.data.progress)}),i.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",()=>{r(e.signal.reason),i.terminate()}),i.postMessage({file:t,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function jn(t,e){return new Promise(function(n,r){let i,s,o,a,l,c;if(i={...e},o=0,{onProgress:a}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,l=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=f=>{o=f,typeof a=="function"&&a(o)},!(t instanceof Blob||t instanceof dhe))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return r(new Error("The file given is not an image"));if(c=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!l||typeof Worker!="function"||c)return iN(t,i).then(function(f){try{return s=f,h.call(this)}catch(p){return r(p)}}.bind(this),r);var u=function(){try{return h.call(this)}catch(f){return r(f)}}.bind(this),d=function(f){try{return iN(t,i).then(function(p){try{return s=p,u()}catch(y){return r(y)}},r)}catch(p){return r(p)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",fhe(t,i).then(function(f){try{return s=f,u()}catch{return d()}},d)}catch{d()}function h(){try{s.name=t.name,s.lastModified=t.lastModified}catch{}try{i.preserveExif&&t.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===t.type)&&(s=cV(t,s))}catch{}return n(s)}})}jn.getDataUrlFromFile=fV,jn.getFilefromDataUrl=zx,jn.loadImage=pV,jn.drawImageInCanvas=gV,jn.drawFileInCanvas=Kg,jn.canvasToFile=Qg,jn.getExifOrientation=yV,jn.handleMaxWidthOrHeight=vV,jn.followExifOrientation=_V,jn.cleanupCanvasMemory=xi,jn.isAutoOrientationInBrowser=ic,jn.approximateBelowMaximumCanvasSizeOfBrowser=mV,jn.copyExifWithoutOrientation=cV,jn.getBrowserName=Ta,jn.version="2.0.2";const phe=({profileUrl:t,setProfileUrl:e})=>{const[n,r]=H.useState(t||"../src/assets/default_profile.png"),i=async s=>{const o=s.target.files[0],a={maxSizeMB:.1,maxWidthOrHeight:100,useWebWorker:!0};if(o){const l=await jn(o,a),c=URL.createObjectURL(l);r(c),e(l)}};return _.jsxs(_.Fragment,{children:[_.jsx(Wx,{htmlFor:"profileImage",children:" "}),_.jsxs(Hx,{children:[_.jsx("img",{alt:"  ",className:"profile-image-preview",src:n}),_.jsx("input",{accept:".png, .jpg, .jpeg, .svg",id:"profileImage",type:"file",onChange:i})]})]})},mhe=({setOpenPostcode:t,fullAddress:e})=>{const n=()=>{t(r=>!r)};return _.jsxs(_.Fragment,{children:[_.jsx(Wx,{htmlFor:"userLocation",children:""}),_.jsxs(Hx,{children:[_.jsxs("div",{className:"loca",children:[_.jsx("input",{readOnly:!0,id:"userLocation",name:"userLocation",type:"text",value:e==="undefined undefined undefined"?"":e,onClick:n}),_.jsx(wV,{type:"button",onClick:n,children:""})]}),_.jsx(Gx,{children:"    "})]})]})},ha=({id:t,type:e,onChange:n,value:r,placeholder:i,text:s,desc:o,valid:a,label:l,button:c})=>_.jsxs(_.Fragment,{children:[l?_.jsx(Wx,{htmlFor:t,children:s}):_.jsx("label",{className:"a11yHidden",htmlFor:t,children:s}),_.jsxs(Hx,{children:[_.jsx("input",{id:t,name:t,placeholder:i,type:e,value:r,onChange:n}),o&&_.jsx(Gx,{children:o}),a&&_.jsx(ghe,{children:a})]}),c&&_.jsx(wV,{type:"button",children:c})]}),Wx=de.label`
  display: inline-block;
  flex-shrink: 0;
  width: 139px;
  font-weight: 700;
  line-height: 44px;
  cursor: pointer;
  @media screen and (max-width: 700px) {
    width: 100%;
  }
`,Hx=de.div`
  display: flex;
  flex-direction: column;
  gap: 8px;
  max-width: 493px;

  input[type="text"],
  input[type="password"],
  input[type="tel"],
  input[type="email"],
  input[type="file"]::file-selector-button {
    width: 340px;
    height: 44px;
    padding: 9px 20px;
    background-color: #fff;
    border: 1px solid ${Lc};
    border-radius: 4px;
    box-sizing: border-box;
  }
  input[type="file"] {
    width: 340px;
    &::file-selector-button {
      border: 1px solid ${zn};
      color: ${zn};
      font-weight: 600;
      cursor: pointer;
    }
  }
  button {
    width: 340px;
  }
  .profile-image-preview {
    width: 100px;
    height: 100px;
    margin: 0 auto;
    object-fit: cover;
    border-radius: 50%;
    border: 1px solid ${Lc};
  }
  .loca {
    display: flex;
    button {
      width: 147px;
      margin-left: 8px;
    }
  }
  @media screen and (max-width: 700px) {
    width: 100%;
    max-width: none;
    input[type="text"],
    input[type="password"],
    input[type="tel"],
    input[type="email"],
    input[type="file"],
    input[type="file"]::file-selector-button,
    button {
      width: 100%;
    }
  }
`,Gx=de.p`
  margin-top: 4px;
  font-size: 14px;
  line-height: 19px;
`,ghe=de(Gx)`
  color: #da3a06;
`,wV=de.button`
  flex: 1 0 auto;
  width: 143px;
  height: 44px;
  background-color: #fff;
  border: 1px solid ${zn};
  border-radius: 4px;
  font-weight: 700;
  color: ${zn};
  @media screen and (max-width: 700px) {
    width: 100%;
    max-width: 340px;
    max-width: none;
  }
`;function xS({text:t,onClose:e}){return _.jsx(yhe,{children:_.jsxs("div",{className:"pop",children:[_.jsx("p",{children:t}),_.jsx("button",{type:"button",onClick:e,children:""})]})})}const yhe=de.div`
  z-index: 100;
  position: fixed;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: rgba(0,0,0,.4);
  .pop {
    width: 320px;
    min-height: 80px;
    background-color: white;
    border-radius: 10px;
    p {
      text-align: center;
      font-size: 14px;
      font-weight: 700;
      line-height: 30px;
      padding: 20px 0;
    }
    button {
      display: block;
      border: none;
      border-top: 1px solid ${Mc};
      background-color: white;
      text-align: center;
      color: ${Ux};
      width: 100%;
      line-height: 30px;
      font-weight: 700;
      margin: 10px 0;
    }
  }
`,IS=de.button`
  display: block;
  width: 340px;
  height: 54px;
  margin: 12px auto 0;
  border-radius: 4px;
  line-height: 54px;
  font-size: 16px;
  font-weight: 700;
  text-align: center;
  cursor: pointer;
  ${t=>t.primary&&wo`
      background-color: ${zn};
      color: #fff;
      border: none;
    `||wo`
      background-color: #fff;
      color: ${zn};
      border: 1px solid ${zn};
    `};
`;function vhe(){const t=Vo(),[e,n]=H.useState(!1),[r,i]=H.useState({email:"",password:""}),s=async a=>{a.preventDefault();try{await _S.signInWithEmailAndPassword(r.email,r.password),(await vm.where("email","==",r.email).get()).size>0&&t(-1)}catch{n(!0)}},o=a=>{i(l=>({...l,[a.target.name]:a.target.value}))};return _.jsxs(_he,{children:[_.jsx("h2",{children:""}),_.jsx(whe,{id:"loginForm",onSubmit:s,children:_.jsxs("fieldset",{children:[_.jsx("legend",{children:"  "}),_.jsxs("ul",{className:"form-list",children:[_.jsx("li",{children:_.jsx(ha,{id:"email",placeholder:" ",text:"",type:"email",value:r.email,onChange:o})}),_.jsx("li",{children:_.jsx(ha,{id:"password",placeholder:" ",text:"",type:"password",value:r.password,onChange:o})})]}),_.jsx(IS,{primary:!0,type:"submit",children:""}),_.jsx(IS,{as:"a",onClick:()=>t("/signup"),children:""})]})}),e&&_.jsx(xS,{text:",  .",onClose:()=>{n(!1)}})]})}const _he=de.section`
  padding: 80px 0 70px;
  h2 {
    line-height: 36px;
    font-size: 32px;
    font-weight: 500;
    text-align: center;
  }
`,whe=de.form`
  width: 340px;
  margin: 32px auto 10px;
  .form-list li {
    margin-top: 12px;
  }
  /* .account-find {
    display: flex;
    justify-content: flex-end;
    margin: 12px 0 28px;
    line-height: 19px;
    font-size: 14px;
    li:nth-child(2)::before {
      content: "|";
      display: inline-block;
      padding: 0 4px;
    }
    a {
      color: black;
      text-decoration: none;
    }
  } */
`;var SV={},bV={},S_={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.postcodeScriptUrl=void 0;var e="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js";t.postcodeScriptUrl="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js";var n=function(){var i=null;return function(){var s=0<arguments.length&&arguments[0]!==void 0?arguments[0]:e;return i||(i=new Promise(function(o,a){var l=document.createElement("script");l.src=s,l.onload=function(){var c,u;return(c=window)!==null&&c!==void 0&&(u=c.daum)!==null&&u!==void 0&&u.Postcode?o(window.daum.Postcode):void a(new Error("Script is loaded successfully, but cannot find Postcode module. Check your scriptURL property."))},l.onerror=function(c){return a(c)},l.id="daum_postcode_script",document.body.appendChild(l)}),i)}}(),r=n;t.default=r})(S_);(function(t){function e(C){return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},e(C)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(H),r=o(S_),i=["scriptUrl","className","style","defaultQuery","autoClose","errorMessage","onComplete","onClose","onResize","onSearch"];function s(C){if(typeof WeakMap!="function")return null;var k=new WeakMap,R=new WeakMap;return(s=function(P){return P?R:k})(C)}function o(C,k){if(!k&&C&&C.__esModule)return C;if(C===null||e(C)!=="object"&&typeof C!="function")return{default:C};var R=s(k);if(R&&R.has(C))return R.get(C);var P={},B=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in C)if(A!="default"&&Object.prototype.hasOwnProperty.call(C,A)){var x=B?Object.getOwnPropertyDescriptor(C,A):null;x&&(x.get||x.set)?Object.defineProperty(P,A,x):P[A]=C[A]}return P.default=C,R&&R.set(C,P),P}function a(C,k){var R=Object.keys(C);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(C);k&&(P=P.filter(function(B){return Object.getOwnPropertyDescriptor(C,B).enumerable})),R.push.apply(R,P)}return R}function l(C){for(var k,R=1;R<arguments.length;R++)k=arguments[R]==null?{}:arguments[R],R%2?a(Object(k),!0).forEach(function(P){I(C,P,k[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(k)):a(Object(k)).forEach(function(P){Object.defineProperty(C,P,Object.getOwnPropertyDescriptor(k,P))});return C}function c(C,k){if(C==null)return{};var R,P,B=u(C,k);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(C);for(P=0;P<A.length;P++)R=A[P],0<=k.indexOf(R)||Object.prototype.propertyIsEnumerable.call(C,R)&&(B[R]=C[R])}return B}function u(C,k){if(C==null)return{};var R,P,B={},A=Object.keys(C);for(P=0;P<A.length;P++)R=A[P],0<=k.indexOf(R)||(B[R]=C[R]);return B}function d(C,k){if(!(C instanceof k))throw new TypeError("Cannot call a class as a function")}function h(C,k){for(var R,P=0;P<k.length;P++)R=k[P],R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(C,R.key,R)}function f(C,k,R){return k&&h(C.prototype,k),R&&h(C,R),C}function p(C,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function");C.prototype=Object.create(k&&k.prototype,{constructor:{value:C,writable:!0,configurable:!0}}),k&&y(C,k)}function y(C,k){return y=Object.setPrototypeOf||function(R,P){return R.__proto__=P,R},y(C,k)}function w(C){var k=v();return function(){var R,P=b(C);if(k){var B=b(this).constructor;R=Reflect.construct(P,arguments,B)}else R=P.apply(this,arguments);return m(this,R)}}function m(C,k){return k&&(e(k)==="object"||typeof k=="function")?k:g(C)}function g(C){if(C===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C}function v(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function b(C){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)},b(C)}function I(C,k,R){return k in C?Object.defineProperty(C,k,{value:R,enumerable:!0,configurable:!0,writable:!0}):C[k]=R,C}var E=n.default.createElement("p",null," Daum     .    ."),D={width:"100%",height:400},S={scriptUrl:r.postcodeScriptUrl,errorMessage:E,autoClose:!0},T=function(C){function k(){var P;d(this,k);for(var B=arguments.length,A=Array(B),x=0;x<B;x++)A[x]=arguments[x];return P=R.call.apply(R,[this].concat(A)),I(g(P),"wrap",(0,n.createRef)()),I(g(P),"state",{hasError:!1}),I(g(P),"initiate",function(j){if(P.wrap.current){var F=P.props;F.scriptUrl,F.className,F.style;var z=F.defaultQuery,Z=F.autoClose;F.errorMessage;var N=F.onComplete,$=F.onClose,L=F.onResize,U=F.onSearch,M=c(F,i),te=new j(l(l({},M),{},{oncomplete:function(ee){N&&N(ee),Z&&P.wrap.current&&P.wrap.current.remove()},onsearch:U,onresize:L,onclose:$,width:"100%",height:"100%"}));te.embed(P.wrap.current,{q:z,autoClose:Z})}}),I(g(P),"onError",function(j){console.error(j),P.setState({hasError:!0})}),P}p(k,C);var R=w(k);return f(k,[{key:"componentDidMount",value:function(){var B=this.initiate,A=this.onError,x=this.props.scriptUrl;x&&(0,r.default)(x).then(B).catch(A)}},{key:"render",value:function(){var B=this.props,A=B.className,x=B.style,j=B.errorMessage,F=this.state.hasError;return n.default.createElement("div",{ref:this.wrap,className:A,style:l(l({},D),x)},F&&j)}}]),k}(n.Component);I(T,"defaultProps",S);var O=T;t.default=O})(bV);var EV={};(function(t){function e(p){return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},e(p)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=H,r=o(S_),i=["defaultQuery","left","top","popupKey","popupTitle","autoClose","onComplete","onResize","onClose","onSearch","onError"];function s(p){if(typeof WeakMap!="function")return null;var y=new WeakMap,w=new WeakMap;return(s=function(m){return m?w:y})(p)}function o(p,y){if(!y&&p&&p.__esModule)return p;if(p===null||e(p)!=="object"&&typeof p!="function")return{default:p};var w=s(y);if(w&&w.has(p))return w.get(p);var m={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var v in p)if(v!="default"&&Object.prototype.hasOwnProperty.call(p,v)){var b=g?Object.getOwnPropertyDescriptor(p,v):null;b&&(b.get||b.set)?Object.defineProperty(m,v,b):m[v]=p[v]}return m.default=p,w&&w.set(p,m),m}function a(p,y){var w=Object.keys(p);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(p);y&&(m=m.filter(function(g){return Object.getOwnPropertyDescriptor(p,g).enumerable})),w.push.apply(w,m)}return w}function l(p){for(var y,w=1;w<arguments.length;w++)y=arguments[w]==null?{}:arguments[w],w%2?a(Object(y),!0).forEach(function(m){c(p,m,y[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(y)):a(Object(y)).forEach(function(m){Object.defineProperty(p,m,Object.getOwnPropertyDescriptor(y,m))});return p}function c(p,y,w){return y in p?Object.defineProperty(p,y,{value:w,enumerable:!0,configurable:!0,writable:!0}):p[y]=w,p}function u(p,y){if(p==null)return{};var w,m,g=d(p,y);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(p);for(m=0;m<v.length;m++)w=v[m],0<=y.indexOf(w)||Object.prototype.propertyIsEnumerable.call(p,w)&&(g[w]=p[w])}return g}function d(p,y){if(p==null)return{};var w,m,g={},v=Object.keys(p);for(m=0;m<v.length;m++)w=v[m],0<=y.indexOf(w)||(g[w]=p[w]);return g}function h(){var p=0<arguments.length&&arguments[0]!==void 0?arguments[0]:r.postcodeScriptUrl;(0,n.useEffect)(function(){(0,r.default)(p)},[p]);var y=(0,n.useCallback)(function(w){var m=l({},w),g=m.defaultQuery,v=m.left,b=m.top,I=m.popupKey,E=m.popupTitle,D=m.autoClose,S=m.onComplete,T=m.onResize,O=m.onClose,C=m.onSearch,k=m.onError,R=u(m,i);return(0,r.default)(p).then(function(P){var B=new P(l(l({},R),{},{oncomplete:S,onsearch:C,onresize:T,onclose:O}));B.open({q:g,left:v,top:b,popupTitle:E,popupKey:I,autoClose:D})}).catch(k)},[p]);return y}var f=h;t.default=f})(EV);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DaumPostcodeEmbed",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"useDaumPostcodePopup",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"loadPostcode",{enumerable:!0,get:function(){return r.default}}),t.default=void 0;var e=i(bV),n=i(EV),r=i(S_);function i(o){return o&&o.__esModule?o:{default:o}}var s=e.default;t.default=s})(SV);const She=CS(SV),bhe=({location:t,setLocation:e})=>{const[n,r]=H.useState(!1),i=s=>{e(o=>({...o,sido:s.sido,sigungu:s.sigungu,bname:s.bname})),r(!1)};return _.jsxs(_.Fragment,{children:[_.jsx(mhe,{fullAddress:`${t.sido} ${t.sigungu} ${t.bname}`,setOpenPostcode:r}),n&&_.jsx(She,{autoClose:!1,defaultQuery:"",onComplete:i})]})},TV=de.label`
  flex-grow: 1;
  position: relative;
  display: flex;
  align-items: center;
  flex-wrap: nowrap;
  padding: 12px 0;
  cursor: pointer;
  box-sizing: border-box;
`,Ehe=de(TV)`
  padding: 0 0 14px;
  align-items: start;
  i {
    margin-top: 4px;
  }
`,The=de.div`
  display: flex;
  label {
    flex-grow: 1;
    position: relative;
    display: flex;
    align-items: center;
    flex-wrap: nowrap;
    padding: 12px 0;
    cursor: pointer;
    box-sizing: border-box;
  }
`,sN=de.input`
  position: absolute;
  width: 1px;
  height: 1px;
  clip: rect(0px, 0px, 0px, 0px);
  overflow: hidden;
  box-sizing: border-box;
  padding: 0px;

  &:checked + i {
    background: url("../src/assets/checkbox-checked.svg") no-repeat;
  }

  &:focus-visible + i {
    outline-offset: 1px;
    outline: 2px solid black;
  }

  & + i {
    flex-shrink: 0;
    display: inline-block;
    width: 24px;
    height: 24px;
    background: url("../src/assets/checkbox.svg") no-repeat;
    border-radius: 50%;
  }
`,xV=de.span`
  padding: 0 8px;
  margin-right: auto;
`,xhe=de(xV)`
  flex-grow: 1;
  position: relative;
  font-size: 21px;
  line-height: 32px;
  font-weight: 700;

  span {
    display: block;
    margin-top: 4px;
    color: ${Lc};
    font-size: 14px;
    font-weight: 400;
    line-height: 19px;
    letter-spacing: -.4px;
  }
`,Ihe=de.button`
  position: relative;
  min-width: 80px;
  background-color: #fff;
  border: 0;
  color: ${zn};
  font-size: 14px;

  &::after {
    content: "";
    position: absolute;
    top: 50%;
    right: 6px;
    width: 5px;
    height: 5px;
    border: 1px solid ${zn};
    border-width: 1px 1px 0 0;
    transform: rotate(45deg) translateY(-50%);
  }
`,cd=({id:t,text:e,all:n,checked:r,onChange:i})=>_.jsx(_.Fragment,{children:n?_.jsxs(Ehe,{htmlFor:t,children:[_.jsx(sN,{id:t,name:t,type:"checkbox",checked:r,onChange:i}),_.jsx("i",{}),_.jsxs(xhe,{"aria-labelledby":t,children:[" .",_.jsx("span",{children:"          ."})]})]}):_.jsxs(The,{children:[_.jsxs(TV,{htmlFor:t,children:[_.jsx(sN,{id:t,name:t,type:"checkbox",checked:r,onChange:i}),_.jsx("i",{}),_.jsx(xV,{"aria-labelledby":t,children:e})]}),_.jsx(Ihe,{type:"button",children:""})]})});function Che(){const t=Vo(),[e,n]=H.useState(!1),[r,i]=H.useState(!1),[s,o]=H.useState(!1),[a,l]=H.useState(!1),[c,u]=H.useState(!1),[d,h]=H.useState({}),[f,p]=H.useState({phoneNumber:"",email:"",password:"",confirmPassword:"",nickname:"",Agree:a?",   /  ":""}),[y,w]=H.useState(""),[m,g]=H.useState(""),[v,b]=H.useState(""),[I,E]=H.useState(!1),D=!f.phoneNumber||!f.email||!f.password||!f.confirmPassword||!f.nickname,S=async A=>{if(A.preventDefault(),!r||!s||!c){E("   .");return}if((await vm.where("nickname","==",f.nickname).get()).empty)g("");else{g(" .");return}try{const j=await _S.createUserWithEmailAndPassword(f.email,f.password);let F="https://firebasestorage.googleapis.com/v0/b/potato-market-lab18.appspot.com/o/default_profile.png?alt=media&token=bdb0de59-063c-42f9-823d-34e5d7b254c3";v&&(F=await ece.ref().child("profileImages/"+(new Date().getTime()+Math.random().toString(36).substr(2,5))).put(v).then(L=>L.ref.getDownloadURL()));const z=vm.doc(j.user.uid),Z=ms.batch();Z.set(z,{email:f.email,phoneNumber:f.phoneNumber,nickname:f.nickname,profileImage:F,agree:a,location:{sido:d.sido,sigungu:d.sigungu,bname:d.bname}}),await Z.commit(),E(!0)}catch(j){const F=T(j,r,s,c,D);E(F)}},T=(A,x,j,F,z)=>{if(z)return"   .";if(!x||!j||!F)return"   .";switch(A.code){case"auth/user-not-found":case"auth/wrong-password":return"    .";case"auth/email-already-in-use":return"   .";case"auth/weak-password":return" 6  .";case"auth/network-request-failed":return"   .";case"auth/invalid-email":return"  .";case"auth/internal-error":return" .";default:return"  ."}},O=A=>{p(x=>({...x,[A.target.name]:A.target.value}))},C=A=>{const x=A.target.checked;n(x),i(!!x),o(!!x),l(!!x),u(!!x)},k=A=>{i(A.target.checked),A.target.checked||n(!1)},R=A=>{o(A.target.checked),A.target.checked||n(!1)},P=A=>{l(A.target.checked),A.target.checked||n(!1);const x=_S.currentUser;x&&vm.doc(x.uid).update({agree:A.target.checked},{merge:!0}).catch(F=>{w(F.message)})},B=A=>{u(A.target.checked),A.target.checked||n(!1)};return _.jsxs(khe,{children:[_.jsx("h2",{children:""}),_.jsx(Ahe,{onSubmit:S,children:_.jsxs("fieldset",{children:[_.jsx("legend",{children:"  "}),_.jsxs("ul",{className:"form-list",children:[_.jsx("li",{className:"form-item",children:_.jsx(ha,{label:!0,button:" ",id:"phoneNumber",placeholder:" ",text:"",type:"tel",value:f.phoneNumber,onChange:O})}),_.jsx("li",{className:"form-item",children:_.jsx(ha,{label:!0,button:" ",id:"email",placeholder:" ",text:"",type:"email",value:f.email,onChange:O})}),_.jsx("li",{className:"form-item",children:_.jsx(ha,{label:!0,id:"password",placeholder:" ",text:"",type:"password",valid:f.password&&(f.password.length<6||f.password.length>8)?" 6  8  .":"",onChange:O})}),_.jsx("li",{className:"form-item",children:_.jsx(ha,{label:!0,id:"confirmPassword",placeholder:"   ",text:" ",type:"password",valid:f.confirmPassword&&f.password!==f.confirmPassword?"   .":"",onChange:O})}),_.jsx("li",{className:"form-item",children:_.jsx(ha,{label:!0,id:"nickname",placeholder:" ",text:"",type:"text",valid:m,value:f.nickname,onChange:O})}),_.jsx("li",{className:"form-item",children:_.jsx(phe,{profileUrl:v,setProfileUrl:b})}),_.jsx("li",{className:"form-item",children:_.jsx(bhe,{location:d,setLocation:h})})]}),_.jsxs("div",{className:"term-list",children:[_.jsx("span",{className:"term-title",children:""}),_.jsxs("div",{className:"term-check",children:[_.jsx(cd,{all:!0,checked:e,onChange:C}),_.jsx(cd,{checked:r,id:"term1",text:"  ()",onChange:k}),_.jsx(cd,{checked:s,id:"term2",text:"     ()",onChange:R}),_.jsx(cd,{checked:a,id:"term3",text:",   /   ()",value:f.agree,onChange:P}),_.jsx(cd,{checked:c,id:"term4",text:"  14 . ()",onChange:B})]})]}),I&&_.jsx(xS,{setShowPopup:E,showPopup:I,text:T(y,r,s,c,D)}),_.jsx(IS,{primary:!0,disabled:D,type:"submit",style:{backgroundColor:D?ti:zn,pointerEvents:D?"none":"auto"},onClick:S,children:""})]})}),I&&_.jsx(xS,{text:" ! !",onClose:()=>{E(!1),t("/")}})]})}const khe=de.section`
  padding: 80px 0 40px;
  h2 {
    line-height: 36px;
    font-size: 32px;
    font-weight: 500;
    text-align: center;
  }
`,Ahe=de.form`
  position: relative;
  width: 640px;
  margin: 44px auto;
  .form-list {
    display: block;
    border-top: 2px solid black;
  }
  .form-item {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    min-height: 84px;
    padding: 20px 0;
    box-sizing: border-box;
  }
  .term-list {
    display: flex;
    gap: 8px;
    padding: 12px 0 20px;
    margin-bottom: 40px;
    border-top: 1px solid black;
    border-bottom: 1px solid ${wf};
  }
  .term-title {
    flex-shrink: 0;
    width: 139px;
    font-weight: 700;
    line-height: 32px;
  }
  .term-check {
    width: 100%;
  }
  @media screen and (max-width: 700px) {
    width: calc(100% - 60px);
    margin: 44px 30px;
    .form-item {
      flex-direction: column;
    }
    .term-list {
      flex-direction: column;
    }
  }
`;function Rhe(){const[t,e]=Lr(v_),n=Vo();return _.jsxs(Nhe,{className:"wrapper",children:[_.jsx(Fx,{}),t==null?_.jsxs(_.Fragment,{children:[_.jsx("h2",{className:"error-massage",children:"  ."}),_.jsxs("div",{className:"button-div",children:[_.jsx(ts,{onClick:()=>{n("/signin")},red:!0,children:""}),_.jsx(ts,{onClick:()=>{n(-1)},children:""})]})]}):_.jsxs(_.Fragment,{children:[_.jsx("h2",{className:"articleTitle",children:" "}),_.jsx(Kde,{})]})]})}const Nhe=de.main`
  display:flex;
  flex-flow:column;
  justify-content: center;
  align-items: center;
  width: 886px;
  margin-left: auto;
  margin-right: auto;
  & .error-massage{
    font-size:32px;
    font-weight: 700;
    margin-bottom:24px;
  }
  & .button-div{
    display:flex;
    gap:12px;
  }
`,Phe=Ez([{path:"/",element:_.jsx(uce,{}),children:[{path:"",element:_.jsx(_ce,{})},{path:"hotarticles",element:_.jsx(lue,{})},{path:"detailarticle/:id",element:_.jsx(nhe,{})},{path:"writearticle",element:_.jsx(Rhe,{})},{path:"mypage",element:_.jsx(cue,{})},{path:"signin",element:_.jsx(vhe,{})},{path:"signup",element:_.jsx(Che,{})},{path:"chat",element:_.jsx(sue,{})}]}]);Q0.createRoot(document.getElementById("root")).render(_.jsx(_q,{children:_.jsx(pz,{router:Phe})}));
